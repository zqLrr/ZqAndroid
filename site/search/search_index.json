{"config":{"lang":["zh","en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u6b22\u8fce\u6765\u5230\u6211\u7684\u6280\u672fwiki","text":""},{"location":"#wiki_1","title":"\u4e2a\u4eba\u6280\u672fWiki\u5305\u542b\u7684\u4e3b\u8981\u5185\u5bb9","text":"<ul> <li>Android</li> <li> <p>JAVA</p> </li> <li> <p>PYTHON</p> </li> </ul>"},{"location":"#4","title":"\u57284\u6708\u5b8c\u5584\u4ee5\u4e0b\u76ee\u6807\uff1a","text":"<ul> <li>\u6574\u7406Android\u4e2d\u7684\u77e5\u8bc6\u70b9\uff0c\u753b\u4e00\u4e2a\u601d\u7ef4\u5bfc\u56fe</li> <li>Android \u5185\u5b58\u6cc4\u6f0f </li> <li>Android \u70ed\u4fee\u590d\u6280\u672f</li> </ul>"},{"location":"Android/","title":"Android\u7684\u57fa\u7840\u77e5\u8bc6","text":"<p>\u7531\u4e8e\u6280\u672f\u6709\u9650\uff0c\u5c0f\u767d\u4ece0\u5f00\u59cb\u7684\u79ef\u7d2f\uff0c\u5f88\u591a\u77e5\u8bc6\u90fd\u662f\u770b\u4e66\u548c\u535a\u5ba2\u6240\u5f97\uff0c\u82e5\u6709\u6284\u88ad\u548c\u89c1\u89e3\u4e0d\u5bf9\u7684\u5730\u65b9\uff0c\u8bf7\u539f\u8c05\uff01</p>"},{"location":"Android/#_1","title":"\u76ee\u5f55","text":"<p>1\u3001Android\u5165\u95e8\u5b66\u4e60</p> <p>2\u3001Android\u5927\u7eb21-\u603b\u4f53\u7684\u77e5\u8bc6\u70b9</p> <p>3\u3001</p>"},{"location":"Android/10Android%20Crash%20%E5%88%86%E6%9E%90/","title":"10Android Crash \u5206\u6790","text":"<ol> <li>Java Crash</li> </ol> <p>Java Crash \u53ef\u4ee5\u6839\u636e\u6253\u51fa\u7684Logcat\u4fe1\u606f\u5b9a\u4f4d\u95ee\u9898\u53d1\u751f\u7684\u539f\u56e0</p> <ol> <li>Native Crash</li> </ol> <p>\u4e00\u822c\u662f\u751f\u6210\u7684so\u6587\u4ef6\uff0c\u4ea7\u751f\u7684bug,C++ \u8bed\u8a00\u7684bug</p> <ul> <li>\u7b26\u53f7\u8868</li> </ul>"},{"location":"Android/11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","title":"11 \u8bbe\u8ba1\u6a21\u5f0f","text":"<p>\u8bbe\u8ba1\u539f\u5219\uff1a</p> <p>1.\u5f00\u653e\u2014\u5c01\u95ed\u539f\u5219</p> <p>2.\u5355\u4e00\u6307\u8d23\u539f\u5219</p> <p>\u6307\u7c7b\uff0c\u63a5\u53e3\uff0c\u65b9\u6cd5</p> <p>3.\u91cc\u6c0f\u66ff\u6362\u539f\u5219</p> <p>\u5b50\u7c7b\u53ef\u4ee5\u6269\u5c55\u7236\u7c7b\u7684\u529f\u80fd\uff0c\u4f46\u662f\u4e0d\u80fd\u6539\u53d8\u7236\u7c7b\u539f\u6709\u7684\u529f\u80fd</p> <p>\u5b50\u7c7b\u53ef\u4ee5\u5b9e\u73b0\u7236\u7c7b\u7684\u62bd\u8c61\u65b9\u6cd5\uff0c\u4f46\u4e0d\u80fd\u8986\u76d6\u7236\u7c7b\u7684\u975e\u62bd\u8c61\u65b9\u6cd5</p> <p>\u91cc\u6c0f\u4ee3\u6362\u539f\u5219\u89c4\u5b9a\u5b50\u7c7b\u4e0d\u5f97\u91cd\u5199\u7236\u7c7b\u7684\u666e\u901a\u65b9\u6cd5\uff0c\u53ea\u80fd\u91cd\u5199\u7236\u7c7b\u7684\u62bd\u8c61\u65b9\u6cd5\uff0c\u8bbe\u8ba1\u7ee7\u627f\u62bd\u8c61\u7c7b\uff0c\u800c\u4e0d\u8981\u7ee7\u627f\u666e\u901a\u7c7b\u3002</p> <p>4.\u4f9d\u8d56\u5012\u7f6e\u539f\u5219</p> <p>\u4f4e\u5c42\u6a21\u5757\u5c3d\u91cf\u8981\u6709\u62bd\u8c61\u7c7b\u6216\u63a5\u53e3\uff0c\u5373\u9762\u5411\u63a5\u53e3\u7f16\u7a0b\u3002</p> <p>5.\u63a5\u53e3\u9694\u79bb\u539f\u5219</p> <p>\u7528\u4e8e\u6070\u5f53\u7684\u5212\u5206\u89d2\u8272\u548c\u63a5\u53e3\uff0c\u5177\u6709\u4e24\u79cd\u542b\u4e49\uff1a1\u3001\u7528\u6237\u4e0d\u5e94\u8be5\u4f9d\u8d56\u5b83\u4e0d\u9700\u8981\u7684\u63a5\u53e3\uff1b2\u3001\u7c7b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u5e94\u8be5\u5efa\u7acb\u5728\u6700\u5c0f\u7684\u7684\u63a5\u53e3\u4e0a\u3002</p> <p>6.\u8fea\u7c73\u7279\u539f\u5219</p> <p>\u4e00\u4e2a\u7c7b\u5e94\u8be5\u5bf9\u81ea\u5df1\u9700\u8981\u8026\u5408\u6216\u8005\u8c03\u7528\u7684\u7c7b\u77e5\u9053\u7684\u6700\u5c11\u3002</p> <p>\u5f3a\u8c03\u7c7b\u95f4\u5f31\u8026\u5408\u3002</p>"},{"location":"Android/11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#1","title":"1. \u7ec4\u5408\u6a21\u5f0f","text":"<p>\u53c8\u79f0\u7ec4\u5408\u6574\u4f53\u6a21\u5f0f,\u7ec4\u5408\u591a\u4e2a\u5bf9\u8c61\u5f62\u6210\u6811\u5f62\u7ed3\u6784\u4ee5\u8868\u793a\u5177\u6709 \u201c\u6574\u4f53\u2014\u90e8\u5206\u201d \u5173\u7cfb\u7684\u5c42\u6b21\u7ed3\u6784\u3002\u7ec4\u5408\u6a21\u5f0f\u5bf9\u5355\u4e2a\u5bf9\u8c61\uff08\u5373\u53f6\u5b50\u5bf9\u8c61\uff09\u548c\u7ec4\u5408\u5bf9\u8c61\uff08\u5373\u5bb9\u5668\u5bf9\u8c61\uff09\u7684\u4f7f\u7528\u5177\u6709\u4e00\u81f4\u6027\uff0c\u7ec4\u5408\u6a21\u5f0f\u53c8\u53ef\u4ee5\u79f0\u4e3a \u201c\u6574\u4f53\u2014\u90e8\u5206\u201d(Part-Whole) \u6a21\u5f0f\uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002</p> <p></p> <ul> <li>Component  \u62bd\u8c61\u6784\u4ef6</li> </ul> <p>\u5b83\u53ef\u4ee5\u662f\u63a5\u53e3\u6216\u62bd\u8c61\u7c7b\uff0c\u4e3a\u53f6\u5b50\u6784\u4ef6\u548c\u5bb9\u5668\u6784\u4ef6\u5bf9\u8c61\u58f0\u660e\u63a5\u53e3\uff0c\u5728\u8be5\u89d2\u8272\u4e2d\u53ef\u4ee5\u5305\u542b\u6240\u6709\u5b50\u7c7b\u5171\u6709\u884c\u4e3a\u7684\u58f0\u660e\u548c\u5b9e\u73b0\u3002\u5728\u62bd\u8c61\u6784\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u8bbf\u95ee\u53ca\u7ba1\u7406\u5b83\u7684\u5b50\u6784\u4ef6\u7684\u65b9\u6cd5\uff0c\u5982\u589e\u52a0\u5b50\u6784\u4ef6\u3001\u5220\u9664\u5b50\u6784\u4ef6\u3001\u83b7\u53d6\u5b50\u6784\u4ef6\u7b49</p> <ul> <li>Leaf              \u53f6\u5b50\u6784\u4ef6</li> </ul> <p>\u5b83\u5728\u7ec4\u5408\u7ed3\u6784\u4e2d\u8868\u793a\u53f6\u5b50\u8282\u70b9\u5bf9\u8c61\uff0c\u53f6\u5b50\u8282\u70b9\u6ca1\u6709\u5b50\u8282\u70b9\uff0c\u5b83\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u6784\u4ef6\u4e2d\u5b9a\u4e49\u7684\u884c\u4e3a\u3002\u5bf9\u4e8e\u90a3\u4e9b\u8bbf\u95ee\u53ca\u7ba1\u7406\u5b50\u6784\u4ef6\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7\u5f02\u5e38\u7b49\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u3002</p> <ul> <li>Composite \u5bb9\u5668\u6784\u4ef6</li> </ul> <p>\u5b83\u5728\u7ec4\u5408\u7ed3\u6784\u4e2d\u8868\u793a\u5bb9\u5668\u8282\u70b9\u5bf9\u8c61\uff0c\u5bb9\u5668\u8282\u70b9\u5305\u542b\u5b50\u8282\u70b9\uff0c\u5176\u5b50\u8282\u70b9\u53ef\u4ee5\u662f\u53f6\u5b50\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u662f\u5bb9\u5668\u8282\u70b9\uff0c\u5b83\u63d0\u4f9b\u4e00\u4e2a\u96c6\u5408\u7528\u4e8e\u5b58\u50a8\u5b50\u8282\u70b9\uff0c\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u6784\u4ef6\u4e2d\u5b9a\u4e49\u7684\u884c\u4e3a\uff0c\u5305\u62ec\u90a3\u4e9b\u8bbf\u95ee\u53ca\u7ba1\u7406\u5b50\u6784\u4ef6\u7684\u65b9\u6cd5\uff0c\u5728\u5176\u4e1a\u52a1\u65b9\u6cd5\u4e2d\u53ef\u4ee5\u9012\u5f52\u8c03\u7528\u5176\u5b50\u8282\u70b9\u7684\u4e1a\u52a1\u65b9\u6cd5\u3002</p> <ul> <li>Client \u5ba2\u6237\u7aef</li> </ul> <p>\u4f7f\u7528\u7ec4\u5408\u6a21\u5f0f\u521b\u5efa\u51fa\u7684\u5bf9\u8c61</p> <ul> <li>\u5b9e\u4f8b</li> </ul> <pre><code>\npublic abstract class Component {\n    private String name;\n    private String desc;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public void setDesc(String desc) {\n        this.desc = desc;\n    }\n\n    public Component(String name, String desc) {\n        this.name = name;\n        this.desc = desc;\n    }\n\n    public void add(Component component){\n        throw new UnsupportedOperationException();\n    }\n\n    public void remove(Component component){\n        throw new UnsupportedOperationException();\n    }\n\n    public abstract void show();\n}\n//\u5546\u5e97\npublic class Store extends Component{\n\n    List&lt;Component&gt; componentList = new ArrayList&lt;Component&gt;();\n\n    public Store(String name, String desc){\n        super(name, desc);\n    }\n\n    @Override\n    public String getName() {\n        return super.getName();\n    }\n\n    @Override\n    public String getDesc() {\n        return super.getDesc();\n    }\n\n    @Override\n    public void add(Component component) {\n        System.out.println(\"\u6dfb\u52a0\uff1a\" + getName());\n        componentList.add(component);\n    }\n\n    @Override\n    public void remove(Component component) {\n        System.out.println(\"\u79fb\u9664\uff1a\" + getName());\n        componentList.remove(component);\n    }\n\n    @Override\n    public void show() {\n        for (Component component : componentList) {\n            System.out.println(component.getName());\n            component.show();\n        }\n    }\n}\n//\u670d\u88c5\u4e13\u5356\u5e97\npublic class BrandStore extends Component{\n\n    List&lt;Component&gt; componentList = new ArrayList&lt;Component&gt;();\n\n    public BrandStore(String name, String desc) {\n        super(name, desc);\n    }\n\n    @Override\n    public String getName() {\n        return super.getName();\n    }\n\n    @Override\n    public String getDesc() {\n        return super.getDesc();\n    }\n\n    @Override\n    public void add(Component component) {\n        componentList.add(component);\n    }\n\n    @Override\n    public void remove(Component component) {\n        componentList.remove(component);\n    }\n\n    @Override\n    public void show() {\n        for (Component component : componentList) {\n            System.out.println(component.getName());\n            component.show();\n        }\n    }\n}\n//\u8fd0\u52a8\u88c5\npublic class Sportswear extends Component{\n\n    List&lt;Component&gt; componentList = new ArrayList&lt;Component&gt;();\n\n    @Override\n    public String getName() {\n        return super.getName();\n    }\n\n    @Override\n    public String getDesc() {\n        return super.getDesc();\n    }\n\n    public Sportswear(String name, String desc) {\n        super(name, desc);\n    }\n\n    @Override\n    public void add(Component component) {\n        componentList.add(component);\n    }\n\n    @Override\n    public void remove(Component component) {\n        componentList.remove(component);\n    }\n\n    @Override\n    public void show() {\n        for (Component component: componentList) {\n            System.out.println(component.getName());\n        }\n    }\n}\n//Client\npublic class Test {\n    public static void main(String[] args) {\n        // \u670d\u88c5\u5e97\n        Component store = new Store(\"\u670d\u88c5\u5e97\",\"\u670d\u88c5\u5e97\");\n\n        // \u4e13\u5356\u5e97\n        Component brandStore1 = new BrandStore(\"\u674e\u5b81\u670d\u88c5\u4e13\u5356\u5e97\",\"\u674e\u5b81\u670d\u88c5\u4e13\u5356\u5e97\");\n        Component brandStore2 = new BrandStore(\"361\u670d\u88c5\u4e13\u5356\u5e97\",\"361\u670d\u88c5\u4e13\u5356\u5e97\");\n\n        // \u8fd0\u52a8\u88c5\n        Component sportswear1 = new Sportswear(\"\u8fd0\u52a8\u88c5\",\"\u8fd0\u52a8\u88c5\");\n        Component sportswear2 = new Sportswear(\"\u4f11\u95f2\u88c5\",\"\u4f11\u95f2\u88c5\");\n\n        brandStore1.add(sportswear1);\n        brandStore2.add(sportswear2);\n\n        store.add(brandStore1);\n        store.add(brandStore2);\n        store.show();\n    }\n}\n</code></pre> <ul> <li> <p>\u4f18\u7f3a\u70b9</p> </li> <li> <p>\u4f18\u52bf</p> </li> </ul> <p>1.\u53ef\u4ee5\u65e0\u89c6\u4e2a\u4f53\u548c\u6574\u4f53\u7684\u5dee\u5f02\u6027\uff0c\u4e00\u53ea\u7684\u5904\u7406\u5355\u4e2a\u548c\u591a\u4e2a\u5bf9\u8c61</p> <p>2.\u6269\u5c55\u6027\u6bd4\u8f83\u9ad8\uff0c\u53ef\u4ee5\u5feb\u901f\u7684\u6dfb\u52a0\u53f6\u5b50\u8282\u70b9\u548c\u975e\u53f6\u5b50\u7ed3\u70b9</p> <ul> <li>\u52a3\u52bf</li> </ul> <p>\u5404\u4e2a\u8282\u70b9\u5dee\u5f02\u5f88\u5927\u7684\u8bdd\uff0c\u4e0d\u9002\u5408\u4f7f\u7528\u7ec4\u5408\u6a21\u5f0f</p> <ul> <li>\u9002\u7528\u573a\u666f</li> <li>\u5904\u7406\u6811\u5f62\u7ed3\u6784\uff0c\u5177\u5907\u7edf\u4e00\u884c\u4e3a</li> <li>\u4f53\u73b0\u5bf9\u8c61\u7684\u90e8\u5206\u548c\u6574\u4f53\u5173\u7cfb\u65f6</li> </ul>"},{"location":"Android/11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#2","title":"2. \u88c5\u9970\u6a21\u5f0f","text":"<p>\u88c5\u9970\u6a21\u5f0f\u662f\u5728\u4e0d\u5fc5\u6539\u53d8\u539f\u7c7b\u548c\u4f7f\u7528\u7ee7\u627f\u7684\u60c5\u51b5\u4e0b\uff0c\u52a8\u6001\u5730\u6269\u5c55\u4e00\u4e2a\u5bf9\u8c61\u7684\u529f\u80fd\u3002\u5b83\u662f\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u5305\u88c5\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u88c5\u9970\u6765\u5305\u88f9\u771f\u5b9e\u7684\u5bf9\u8c61\u3002</p> <p>\u88c5\u9970\u6a21\u5f0f\u4e0d\u4f7f\u7528\u7ee7\u627f\uff0c\u662f\u6a2a\u5411\u7684\u6269\u5c55</p> <p></p> <ul> <li>Component \u62bd\u8c61\u63a5\u53e3</li> </ul> <p>\u5b9a\u4e49\u9700\u8981\u5b9e\u73b0\u4e1a\u52a1\u7684\u62bd\u8c61\u65b9\u6cd5\u3002</p> <ul> <li>ConcreteComponent \u5177\u4f53\u6784\u4ef6</li> </ul> <p>\u5b9e\u73b0Component\u63a5\u53e3\uff0c\u7528\u4e8e\u5b9a\u4e49\u5177\u4f53\u7684\u6784\u5efa\u5bf9\u8c61</p> <ul> <li>Decorator\uff08\u62bd\u8c61\u88c5\u9970\u7c7b\uff09</li> </ul> <p>\u5b9e\u73b0Component\u63a5\u53e3\uff0c\u5e76\u521b\u5efaComponent\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u7528\u4e8e\u7ed9\u5177\u4f53\u6784\u4ef6\u589e\u52a0\u804c\u8d23\u3002</p> <ul> <li>ConcreteDecorator\uff08\u5177\u4f53\u88c5\u9970\u7c7b)</li> </ul> <p>*\u62bd\u8c61\u88c5\u9970\u7c7b\u7684\u5b50\u7c7b\uff0c\u8d1f\u8d23\u5411\u5177\u4f53\u6784\u4ef6\u6dfb\u52a0\u5177\u4f53\u7684\u804c\u8d23*</p> <ul> <li>\u5b9e\u4f8b</li> </ul> <pre><code>//Compont\ninterface  food{\n  void Descrition();\n}\n// ConcreteComponent \u5177\u4f53\u6784\u4ef6\npublic class Coffee implements food{\n\n  @Override\n  public void Descrition() {\n    System.out.print(\"\u539f\u59cb\u5496\u5561\");\n  }\n}\n\npublic abstract class Decorator implements food{\n\n  private food mfood;\n  public Decorator(food f) {\n    this.mfood = f;\n  }\n\n  @Override\n  public void Descrition() {\n    this.mfood.Descrition();\n  }\n}\n\npublic class milkDecorater extends  Decorator{\n\n  public milkDecorater(food f) {\n    super(f);\n  }\n\n  @Override\n  public void Descrition() {\n    super.Descrition();\n    addMilk();\n  }\n\n  public  void addMilk(){\n    System.out.print(\"\u52a0\u725b\u5976\");\n  }\n}\n\npublic class suggerDector extends  Decorator{\n\n  public suggerDector(food f) {\n    super(f);\n  }\n\n  @Override\n  public void Descrition() {\n    super.Descrition();\n    addSugger();\n  }\n\n  public void addSugger(){\n    System.out.print(\"\u52a0\u7cd6\");\n  }\n}\n\npublic void main() {\n  //\u539f\u59cb\u5496\u5561\n  food coffee = new Coffee();\n  coffee.Descrition();\n  System.out.println(\"\");\n\n  //\u52a0\u725b\u5976\n  coffee = new milkDecorater(coffee);\n  coffee.Descrition();\n  System.out.println(\"\");\n\n  //\u52a0\u725b\u5976 \u52a0\u7cd6\n  coffee = new suggerDector(coffee);\n  coffee.Descrition();\n  System.out.println(\"\");\n}\n</code></pre> <ul> <li> <p>\u4f18\u7f3a\u70b9</p> </li> <li> <p>\u4f18\u70b9</p> </li> </ul> <p>1.\u5728\u4e0d\u5f71\u54cd\u5176\u4ed6\u5bf9\u8c61\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5\u52a8\u6001\u3001\u900f\u660e\u7684\u65b9\u5f0f\u7ed9\u5355\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u804c\u8d23\uff0c\u7b26\u5408\u5f00\u95ed\u539f\u5219 2.\u53ef\u4ee5\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u4e5f\u53ef\u4ee5\u52a8\u6001\u5730\u88ab\u64a4\u9500\u3002</p> <ul> <li>\u7f3a\u70b9</li> </ul> <p>1.\u88c5\u9970\u6a21\u5f0f\u4f1a\u5bfc\u81f4\u8bbe\u8ba1\u51fa\u5927\u91cf\u7684ConcreteDecorator\u7c7b\uff0c\u589e\u52a0\u7cfb\u7edf\u7684\u590d\u6742\u6027\u3002</p> <p>2.\u5bf9\u4e8e\u591a\u6b21\u88c5\u9970\u7684\u5bf9\u8c61\uff0c\u4e00\u65e6\u51fa\u73b0\u9519\u8bef\uff0c\u6392\u9519\u7e41\u7410\uff1b</p> <ul> <li>\u9002\u7528\u573a\u666f</li> </ul> <ol> <li>\u5f53\u4e0d\u80fd\u91c7\u7528\u7ee7\u627f\u7684\u65b9\u5f0f\u5bf9\u7cfb\u7edf\u8fdb\u884c\u6269\u5145\u6216\u8005\u91c7\u7528\u7ee7\u627f\u4e0d\u5229\u4e8e\u7cfb\u7edf\u6269\u5c55\u548c\u7ef4\u62a4\u65f6\u3002</li> <li>\u9700\u8981\u52a8\u6001\u5730\u7ef4\u62a4\u5bf9\u8c61\u7684\u529f\u80fd</li> </ol> <ul> <li>\u4e0e\u4ee3\u7406\u6a21\u5f0f\u7684\u533a\u522b</li> </ul> <p>\u88c5\u9970\u6a21\u5f0f\u4f5c\u7528\u8303\u56f4\u662f\u7c7b\uff0c\u5c06\u539f\u59cb\u5bf9\u8c61\u4f5c\u4e3a\u4e00\u4e2a\u53c2\u6570\u4f20\u9012\u7ed9\u88c5\u9970\u8005\u7684\u6784\u9020\u5668\uff0c\u589e\u5f3a\u7c7b\u7684\u80fd\u529b</p> <p>\u4ee3\u7406\u6a21\u5f0f\u4f5c\u7528\u8303\u56f4\u662f\u884c\u4e3a\uff0c\u5728\u4ee3\u7406\u7c7b\u4e2d\u521b\u5efa\u4e00\u4e2a\u88ab\u4ee3\u7406\u7c7b\u7684\u5bf9\u8c61\uff0c\u589e\u5f3a\u884c\u4e3a\u52a8\u4f5c</p> <ul> <li>\u4e0e\u6784\u9020\u8005\u6a21\u5f0f\u7684\u533a\u522b</li> </ul> <p>\u5efa\u9020\u8005\u6a21\u5f0f\u5c5e\u4e8e\u521b\u5efa\u578b\u6a21\u5f0f\uff0c\u88c5\u9970\u8005\u5c5e\u4e8e\u7ed3\u6784\u6027\u6a21\u5f0f\u3002</p> <p>\u5efa\u9020\u8005\u6a21\u5f0f\u662f\u5bf9\u590d\u6742\u5bf9\u8c61\u6574\u4f53\u529f\u80fd\u7684\u4e00\u4e2a\u7ec4\u88c5\uff0c\u88c5\u9970\u8005\u6a21\u5f0f\u662f\u8868\u9762\u5916\u90e8\u7684\u88c5\u626e\uff0c\u57fa\u7840\u529f\u80fd\u8fd8\u662f\u5c5e\u4e8e\u5bf9\u8c61\u672c\u8eab\u3002</p>"},{"location":"Android/11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#3","title":"3.  \u4ee3\u7406\u6a21\u5f0f","text":"<p>\u4ee3\u7406\u6a21\u5f0f\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u63d0\u4f9b\u4e00\u79cd\u4ee3\u7406\u4ee5\u63a7\u5236\u5bf9\u8be5\u5bf9\u8c61\u7684\u8bbf\u95ee\uff0c\u4e3b\u8981\u662f\u5bf9\u5bf9\u8c61\u7684\u884c\u4e3a\u8fdb\u884c\u4e86\u6269\u5c55\u3002</p> <p></p> <p>\u9759\u6001\u4ee3\u7406</p> <p>\u5f00\u53d1\u8005\u6307\u5b9a\u7279\u5b9a\u7684\u4ee3\u7406\u5bf9\u8c61\u3002</p> <p>\u52a8\u6001\u4ee3\u7406</p> <p>\u8fd0\u884c\u65f6\u624d\u6307\u5b9a\u7279\u5b9a\u7684\u4ee3\u7406\u5bf9\u8c61\u3002</p> <p>\u4f18\u7f3a\u70b9\uff1a</p> <ol> <li>\u53ef\u4ee5\u4f7f\u771f\u5b9e\u4e1a\u52a1\u89d2\u8272\u8d23\u4efb\u66f4\u7eaf\u7cb9\uff0c\u4e0d\u7528\u5305\u542b\u4e00\u4e9b\u516c\u5171\u4e1a\u52a1\u3002</li> <li>\u516c\u5171\u4e1a\u52a1\u4ea4\u7ed9\u4e86\u4ee3\u7406\u7c7b\uff0c\u5b9e\u73b0\u4e86\u89e3\u8026\u3002</li> <li>\u63d0\u4f9b\u4e86\u9762\u5411\u5207\u9762\u7f16\u7a0b\u7684\u57fa\u7840\uff0c\u4f7f\u4e00\u4e2a\u6a2a\u5411\u4e1a\u52a1\u66f4\u5bb9\u6613\u7f16\u5199</li> <li>\u52a8\u6001\u4ee3\u7406\u53ef\u4ee5\u4ee3\u7406\u591a\u4e2a\u5b9e\u73b0\u4e86\u540c\u4e00\u4e2a\u63a5\u53e3\u7684\u7c7b\u3002</li> </ol> <p>\u9002\u7528\u573a\u666f\uff1a</p> <ol> <li>\u5f53\u4e1a\u52a1\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u67d0\u4e2a\u7c7b\u65f6\uff0c\u9700\u8981\u4e00\u4e2a\u4ee3\u7406\u7c7b\u53bb\u4ee3\u7406\u8bbf\u95ee\u3002</li> <li>\u5f53\u9700\u8981\u6a2a\u5411\u6dfb\u52a0\u4e00\u4e9b\u529f\u80fd\uff0c\u6bd4\u5982\u65e5\u5fd7\u529f\u80fd\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee3\u7406\u6a21\u5f0f\u3002</li> </ol>"},{"location":"Android/11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#4","title":"4. \u6784\u9020\u8005\u6a21\u5f0f","text":"<p>\u5c5e\u4e8e\u521b\u5efa\u6027\u6a21\u5f0f\uff0c\u5c06\u5c06\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\u7684\u6784\u5efa\u4e0e\u8868\u793a\u5206\u79bb\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u8868\u793a\u3002\u5efa\u9020\u8005\u6a21\u5f0f\u9690\u85cf\u4e86\u590d\u6742\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\uff0c\u5b83\u628a\u590d\u6742\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\u52a0\u4ee5\u62bd\u8c61\uff0c\u901a\u8fc7\u5b50\u7c7b\u7ee7\u627f\u6216\u8005\u91cd\u8f7d\u7684\u65b9\u5f0f\uff0c\u52a8\u6001\u7684\u521b\u5efa\u5177\u6709\u590d\u5408\u5c5e\u6027\u7684\u5bf9\u8c61\u3002</p> <p></p> <p>\u5b9e\u4f8b</p> <pre><code> PersonBuilder builder = new PersonBuilderImpl();\n\n    public Person  build(int age,String name,String school){\n        return builder.setAge(age)\n                .setName(name)\n                .setSchool(school)\n                .build();\n    }\n\n    //Person\n    public class Person{\n        private int age;\n        private String name;\n        private String School;\n\n        public int getAge() {\n            return age;\n        }\n\n        public void setAge(int age) {\n            this.age = age;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public void setName(String name) {\n            this.name = name;\n        }\n\n        public String getSchool() {\n            return School;\n        }\n\n        public void setSchool(String school) {\n            School = school;\n        }\n\n        @Override\n        public String toString() {\n            return \"Person{\" +\n                    \"age=\" + age +\n                    \", name='\" + name + '\\'' +\n                    \", School='\" + School + '\\'' +\n                    '}';\n        }\n    }\n\n\n\n    //Builder\n    interface PersonBuilder{\n        PersonBuilder setAge(int age);\n        PersonBuilder setName(String name);\n        PersonBuilder setSchool(String school);\n        Person build();\n    }\n\n    //ConcreteBulider\n    public class PersonBuilderImpl implements  PersonBuilder{\n\n       public Person person = new Person();\n\n\n        @Override\n        public PersonBuilder setAge(int age) {\n            person.setAge(age);\n            return this;\n        }\n\n        @Override\n        public PersonBuilder setName(String name) {\n            person.setName(name);\n            return this;\n        }\n\n        @Override\n        public PersonBuilder setSchool(String school) {\n            person.setSchool(school);\n            return this;\n        }\n\n        @Override\n        public Person build() {\n            return person;\n        }\n    }\n//\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u9759\u6001\u5185\u90e8\u7c7b\u6765\u5b9e\u73b0builder\n</code></pre> <ul> <li> <p>\u4f18\u7f3a\u70b9</p> </li> <li> <p>\u4f18\u70b9</p> </li> </ul> <p>1.\u9075\u5faa\u5f00\u95ed\u539f\u5219\u3002 2.\u5bf9\u8c61\u7684\u5efa\u9020\u548c\u8868\u793a\u5206\u79bb\uff0c\u5b9e\u73b0\u4e86\u89e3\u8026\u3002 3.\u9690\u85cf\u4e86\u5bf9\u8c61\u7684\u5efa\u9020\u7ec6\u8282\uff0c\u7528\u6237\u53ea\u9700\u5173\u5fc3\u4ea7\u54c1\u7684\u8868\u793a\uff0c\u800c\u4e0d\u9700\u8981\u4e86\u89e3\u662f\u5982\u4f55\u521b\u5efa\u4ea7\u54c1\u7684\u3002</p> <ul> <li>\u7f3a\u70b9</li> </ul> <p>1.\u5982\u679c\u6784\u9020\u8005\u591a\uff0c\u4f1a\u6709\u5f88\u591a\u7684\u5efa\u9020\u7c7b\uff0c\u96be\u4ee5\u7ef4\u62a4\u3002 2.\u4ea7\u54c1\u7684\u7ec4\u6210\u90e8\u5206\u5fc5\u987b\u76f8\u540c\uff0c\u8fd9\u9650\u5236\u4e86\u5176\u4f7f\u7528\u8303\u56f4\u3002</p> <ul> <li>\u9002\u7528\u573a\u666f</li> </ul> <p>1.\u9694\u79bb\u590d\u6742\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u4f7f\u7528\uff0c\u76f8\u540c\u7684\u65b9\u6cd5\uff0c\u4e0d\u540c\u6267\u884c\u987a\u5e8f\uff0c\u4ea7\u751f\u4e0d\u540c\u4e8b\u4ef6\u7ed3\u679c 2.\u9700\u8981\u751f\u6210\u7684\u4ea7\u54c1\u5bf9\u8c61\u7684\u5c5e\u6027\u76f8\u4e92\u4f9d\u8d56\uff0c\u9700\u8981\u6307\u5b9a\u5176\u751f\u6210\u987a\u5e8f\u3002</p>"},{"location":"Android/11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#5","title":"5. \u5355\u4f8b\u6a21\u5f0f","text":"<ol> <li> <p>\u63a8\u8350\u4f7f\u7528\u5355\u4f8b\u7684\u65b9\u6cd5(Lazy loading\u3001\u7ebf\u7a0b\u5b89\u5168)</p> </li> <li> <p>\u53cc\u91cd\u68c0\u67e5</p> <p><code>java  public class Singleton(){    private static volatile Singleton singleton = null;    private Singleton(){}    public static Singleton getInstance(){      if(singleton == null){          synchronized (Singleton.class){            if(singleton ==null){              singleton = new Singleton();            }          }      }      return singleton;    }  }  volatile\u9632\u6b62\u4e86\u91cd\u6392</code></p> </li> <li> <p>\u9759\u6001\u5185\u90e8\u7c7b\u5b9e\u73b0\u5355\u4f8b</p> <p><code>java  public class Singleton(){    private Singleton(){}    private static class SingletonInstance(){       private final static Singleton INSTANCE = new Singleton();    }    public static Singleton getInstance(){      return SingletonInstance.INSTANCE;    }  }</code></p> </li> <li> <p>\u997f\u6c49\u5f0f\u5355\u4f8b</p> <p><code>java  public class Singleton(){    private static volatile Singleton singleton  = new Singleton();    private Singleton(){}    public static Singleton getInstance(){      return singleton;    }  }  //\u7f3a\u70b9\uff1a\u6d6a\u8d39\u7a7a\u95f4 \u4f18\u70b9\uff1a\u7ebf\u7a0b\u5b89\u5168</code></p> </li> <li> <p>\u61d2\u6c49\u5f0f\u5355\u4f8b</p> <p><code>java  public class Singleton(){    private static volatile Singleton singleton;    private Singleton(){}    public static Singleton getInstance(){      if(singleton = null){        singleton  = new Singleton()      }      return singleton;    }  }  //\u7f3a\u70b9\uff1a\u7ebf\u7a0b\u4e0d\u5b89\u5168 \u4f18\u70b9\uff1a\u5ef6\u8fdf\u52a0\u8f7d</code></p> </li> <li> <p>\u4f18\u70b9\uff1a\u7cfb\u7edf\u5185\u5b58\u4e2d\u8be5\u7c7b\u53ea\u5b58\u5728\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8282\u7701\u4e86\u7cfb\u7edf\u8d44\u6e90\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u9700\u8981\u9891\u7e41\u521b\u5efa\u9500\u6bc1\u7684\u5bf9\u8c61\uff0c\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\u53ef\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u6027\u80fd\u3002</p> </li> <li> <p>\u7f3a\u70b9\uff1a\u5f53\u60f3\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5355\u4f8b\u7c7b\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u8981\u8bb0\u4f4f\u4f7f\u7528\u76f8\u5e94\u7684\u83b7\u53d6\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u4f7f\u7528new\uff0c\u53ef\u80fd\u4f1a\u7ed9\u5176\u4ed6\u5f00\u53d1\u4eba\u5458\u9020\u6210\u56f0\u6270\uff0c\u7279\u522b\u662f\u770b\u4e0d\u5230\u6e90\u7801\u7684\u65f6\u5019\u3002</p> </li> <li> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> </li> <li> <p>\u9700\u8981\u9891\u7e41\u7684\u8fdb\u884c\u521b\u5efa\u548c\u9500\u6bc1\u7684\u5bf9\u8c61</p> </li> <li>\u521b\u5efa\u5bf9\u8c61\u65f6\u8017\u65f6\u8fc7\u591a\u6216\u8017\u8d39\u8d44\u6e90\u8fc7\u591a\uff0c\u4f46\u53c8\u7ecf\u5e38\u7528\u5230\u7684\u5bf9\u8c61</li> <li>\u5de5\u5177\u7c7b\u5bf9\u8c61</li> <li>\u9891\u7e41\u8bbf\u95ee\u6570\u636e\u5e93\u6216\u6587\u4ef6\u7684\u5bf9\u8c61</li> </ol>"},{"location":"Android/11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#6","title":"6. \u5de5\u5382\u8bbe\u8ba1\u6a21\u5f0f","text":"<p>\u7b80\u5355\u5de5\u5382\u6a21\u5f0f   \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f \u62bd\u8c61\u5de5\u5382\u6a21\u5f0f</p> <p></p> <p>\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u53ef\u4ee5\u8bf4\u662f\u4e00\u79cd\u7f16\u7a0b\u4e60\u60ef\uff0c\u5373\u5c06\u4e00\u4e9b\u590d\u6742\u7684\u65b9\u6cd5\u62bd\u5230\u51fd\u6570\u6216\u7c7b\u4e2d\uff0c\u51cf\u8f7b\u4e86\u672c\u8eab\u7684\u4ee3\u7801\u91cf\u3002</p> <p></p> <p>\u6bcf\u4e00\u4e2a\u4ea7\u54c1\u90fd\u5b89\u6392\u4e00\u4e2a\u5de5\u5382\u53bb\u5b9e\u73b0</p> <p>3\u3001\u62bd\u8c61\u5de5\u7a0b\u6a21\u5f0f</p> <p></p> <p>\u5de5\u5382\u53ef\u4ee5\u5b9e\u73b0\u591a\u4e2a\u4ea7\u54c1\uff0c\u4ea7\u54c1\u4e5f\u9700\u8981\u591a\u4e2a\u62bd\u8c61\u7c7b</p> <p>7\u3001\u89c2\u5bdf\u8005\u6a21\u5f0f</p> <p>8\u3001\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f</p> <p>\u53d1\u5e03-\u8ba2\u9605\u662f\u4e00\u79cd\u6d88\u606f\u8303\u5f0f\uff0c\u6d88\u606f\u7684\u53d1\u9001\u8005\uff08\u79f0\u4e3a\u53d1\u5e03\u8005\uff09\u4e0d\u4f1a\u5c06\u6d88\u606f\u76f4\u63a5\u53d1\u9001\u7ed9\u7279\u5b9a\u7684\u63a5\u6536\u8005\uff08\u79f0\u4e3a\u8ba2\u9605\u8005\uff09\u3002\u800c\u662f\u5c06\u53d1\u5e03\u7684\u6d88\u606f\u5206\u4e3a\u4e0d\u540c\u7684\u7c7b\u522b\uff0c\u65e0\u9700\u4e86\u89e3\u54ea\u4e9b\u8ba2\u9605\u8005\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\u53ef\u80fd\u5b58\u5728\u3002</p> <ul> <li> <p>\u4e0e\u89c2\u5bdf\u8005\u6a21\u5f0f\u76f8\u540c\uff0c\u5c06\u6d88\u606f\u53d1\u7ed9\u9700\u8981\u6536\u5230\u6d88\u606f\u7684\u4eba</p> </li> <li> <p>\u4e0e\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u533a\u522b</p> </li> </ul> <ol> <li>\u89c2\u5bdf\u8005\u6a21\u5f0f\u4e2d\u89c2\u5bdf\u8005\u662f\u77e5\u9053\u88ab\u89c2\u5bdf\u8005(Subject)\u7684\uff0c\u4f1a\u8c03\u7528Subject\u7684\u65b9\u6cd5\uff1b\u800c\u53d1\u5e03\u8005-\u8ba2\u9605\u8005\u662f\u76f8\u4e92\u4e0d\u77e5\u9053\u5bf9\u65b9\u7684\u5b58\u5728\uff0c\u662f\u901a\u8fc7\u6d88\u606f\u4ee3\u7406\u8fdb\u884c\u901a\u4fe1\u7684\u3002</li> <li>\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\uff0c\u7ec4\u4ef6\u662f\u677e\u6563\u8026\u5408\u7684\uff0c\u800c\u89c2\u5bdf\u8005\u6a21\u5f0f\u662f\u8026\u5408\u5728\u4e00\u8d77\u7684</li> <li>\u89c2\u5bdf\u8005\u6a21\u5f0f\u662f\u540c\u6b65\u7684\uff0c\u5f53Subject\u6709\u53d8\u5316\u65f6\uff0c\u89c2\u5bdf\u8005(Observer)\u662f\u4f1a\u8ddf\u7740\u53d8\u5316\u8fdb\u884c\u540c\u6b65\uff1b\u800c\u53d1\u5e03-\u8ba2\u9605\u6a21\u5f0f\u662f\u6709\u7684\u65f6\u5019\u53ef\u4ee5\u662f\u5f02\u6b65\uff0c\u4f7f\u7528\u6d88\u606f\u961f\u5217\u3002</li> </ol> <p>9.\u4eab\u5143\u6a21\u5f0f</p> <p>10.\u5916\u89c2\u6a21\u5f0f</p>"},{"location":"Android/11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_1","title":"\u7b80\u5355\u5de5\u5382\u6a21\u5f0f","text":""},{"location":"Android/11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_2","title":"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f","text":""},{"location":"Android/12%20Otto%E5%BA%93%E3%80%81IPCOtto%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"12 Otto\u5e93\u3001IPCOtto\u5e93\u7684\u4f7f\u7528","text":""},{"location":"Android/12%20Otto%E5%BA%93%E3%80%81IPCOtto%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#otto","title":"Otto\u5e93","text":"<p>Otto \u662f\u4e00\u79cd\u4e8b\u4ef6\u603b\u7ebf\uff0c\u65e8\u5728\u89e3\u8026\u5e94\u7528\u7a0b\u5e8f\u7684\u4e0d\u540c\u90e8\u5206\uff0c\u540c\u65f6\u4ecd\u5141\u8bb8\u5b83\u4eec\u6709\u6548\u901a\u4fe1\u3002</p> <p>Otto \u4ece Guava \u884d\u751f\u800c\u6765\uff0c\u4e3a\u5df2\u7ecf\u5b8c\u5584\u7684\u4e8b\u4ef6\u603b\u7ebf\u6dfb\u52a0\u4e86\u72ec\u7279\u7684\u529f\u80fd\uff0c\u5e76\u5c06\u5176\u4e13\u95e8\u7528\u4e8e Android \u5e73\u53f0\u3002</p>"},{"location":"Android/12%20Otto%E5%BA%93%E3%80%81IPCOtto%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#1","title":"1. \u4ec0\u4e48\u662f\u4e8b\u4ef6\u603b\u7ebf","text":"<p>\u4e3a\u4e86\u5b9e\u73b0\u53d1\u5e03\u8005\u548c\u8ba2\u9605\u8005\u4e4b\u95f4\u7684\u533f\u540d\uff0c\u9700\u8981\u4e00\u4e2a\u4e2d\u95f4\u4eba\u8fdb\u884c\u6c9f\u901a\uff0c\u4e8b\u4ef6\u603b\u7ebf\u5c31\u662f\u8fd9\u6837\u7684\u4e00\u4e2a\u4e2d\u95f4\u4eba\u3002</p> <p>Android \u4e2d\u5e38\u7528\u7684\u4e24\u4e2a\u4e8b\u4ef6\u603b\u7ebf\u5e93\u662fOtto\u548cEventBus,\u73b0\u5728\u63a8\u8350\u7684\u662fRxjava-Rxbus\u3002</p>"},{"location":"Android/12%20Otto%E5%BA%93%E3%80%81IPCOtto%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#2otto","title":"2.\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528Otto\u5e93","text":"<p>\u73b0\u5728\u5b98\u65b9\u63a8\u8350\u4f7f\u7528Rxjava-RxBus\uff0c\u56e0\u4e3aotto\u5e93\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528\uff0c\u4f46\u662f\u5efa\u8bae\u5982\u679c\u53ea\u662f\u4f7f\u7528\u4e8b\u4ef6\u603b\u7ebf\u53ef\u4ee5\u4f7f\u7528Otto\uff0c\u56e0\u4e3a\u5176\u6ce8\u89e3\u6bd4\u8f83\u6e05\u6670\u597d\u7528\uff0c\u82e5\u662fApp\u4e2d\u5df2\u5b58\u5728Rxjava\uff0c\u4e0d\u60f3\u6dfb\u52a0\u65b0\u7684\u5e93\u53ef\u4ee5\u4f7f\u7528Rxjava-Rxbus\u3002</p>"},{"location":"Android/12%20Otto%E5%BA%93%E3%80%81IPCOtto%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#otto_1","title":"Otto\u7684\u4f7f\u7528","text":"<p>\u6d88\u606f\u7c7b</p> <p>\u7528\u6765\u5b58\u50a8\u53d1\u5e03\u8005\u548c\u8ba2\u9605\u8005\u901a\u4fe1\u7684\u5185\u5bb9</p> <p>Bus\u7c7b</p> <p>Otto\u5e93\u7684\u4e3b\u8981\u529f\u80fd\u901a\u8fc7Bus\u7c7b\u6765\u4f7f\u7528\uff0c\u9700\u8981\u6ce8\u518c\u548c\u89e3\u6ce8\u518c</p> <p>@Subscibe</p> <p>Otto\u5e93\u8ba2\u9605\u8005\u529f\u80fd\u7684\u6ce8\u89e3</p> <p>post</p> <p>Bus\u53d1\u5e03\u4e8b\u4ef6\u7684\u51fd\u6570</p> <p>@Produce</p> <p>Otto\u5e93\u751f\u4ea7\u8005\u7684\u6ce8\u89e3\uff0c\u5f53Bus\u5728\u6ce8\u518c\u7684\u65f6\u5019\uff0c\u8c03\u7528\u8be5\u6ce8\u89e3\u6765\u53d1\u5e03\u4e8b\u4ef6</p> <ul> <li>\u5b9e\u4f8b</li> </ul> <pre><code>//\u6d88\u606f\u7c7b\npublic class BusData {\n    public BusData(String message) {\n        this.message = message;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n    public String message;\n\n}\n//Bus\u5355\u4f8b\npublic class OttoBus extends Bus {\n\n    public OttoBus() {\n    }\n\n    private static class BusIntance{\n       private final  static  OttoBus  mInstance = new OttoBus();\n    }\n\n    public static OttoBus getInstance(){\n        return BusIntance.mInstance;\n    }\n}\n//\u53d1\u5e03\u8ba2\u9605\npublic class OttoActivity extends AppCompatActivity {\n\n    private OttoBus bus;\n    private TextView mText;\n    private EditText mSendText;\n    private Button bt_send;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_otto);\n\n        mText = findViewById(R.id.txt_receive);\n        mSendText = findViewById(R.id.et_send);\n        bt_send = findViewById(R.id.bt_send);\n        bt_send.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                BusData data = new BusData(mSendText.getText().toString());\n              //\u53d1\u5e03\u4e8b\u4ef6\n                bus.post(data);\n            }\n        });\n        //\u6ce8\u518cOtto bus\n        bus = OttoBus.getInstance();\n        bus.register(this);\n    }\n\n  //@Produe \u53d1\u5e03\u4e8b\u4ef6\n    @Produce\n    public BusData postMessage(){\n        return new BusData(\"\u4f7f\u7528Produce\u6ce8\u89e3\");\n    }\n\n  //@Produce \u8ba2\u9605\u4e8b\u4ef6\n    @Subscribe\n    public void setMessage(BusData data){\n        mText.setText(data.getMessage());\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        //\u89e3\u6ce8\u518cbus\n        bus.unregister(this);\n    }\n}\n</code></pre> <p>3\u3001ipcotto\u5e93\u7684\u4f7f\u7528</p> <p>\u7ed3\u5408humers\u5b9e\u73b0\u4e86\u8de8\u8fdb\u7a0b\u7684\u4e8b\u4ef6\u603b\u7ebf\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e0d\u540c\u8fdb\u7a0b\u7684\u53d1\u5e03\u8ba2\u9605</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.Otto\u5728\u7236\u7c7b\u4e2d\u6ce8\u518c\u662f\u6ca1\u95ee\u9898\u7684\uff0c\u4f46\u662f\u8ba2\u9605\u5199\u5728\u7236\u7c7b\u662f\u65e0\u6cd5\u6536\u5230\u7684</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"13  Android \u591a\u6a21\u5757\u5f00\u53d1\u548c\u6784\u5efa\u8fc7\u7a0b","text":"<p>\u76f8\u5173\u7f51\u5740\u94fe\u63a5\uff1a</p> <p>\u5b98\u65b9\u624b\u518c\uff1ahttps://docs.gradle.org/7.0.2/userguide/userguide.html</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#gradle","title":"Gradle \u6784\u5efa\u5de5\u5177\u7684\u4f7f\u7528","text":"<p>\u7b80\u4ecb</p> <p>\u4ece Gradle \u7684\u89d2\u5ea6\u770b\uff0c\u6211\u4eec\u77e5\u9053 Android \u5176\u5b9e\u5c31\u662f Gradle \u7684\u4e00\u4e2a\u7b2c\u4e09\u65b9\u63d2\u4ef6\uff0c\u5b83\u662f\u7531 Google</p> <p>\u7684Android\u56e2\u961f\u5f00\u53d1\u7684\u3002\u4f46\u662f\u4eceAndroid\u7684\u89d2\u5ea6\u770b\uff0cAndroid\u63d2\u4ef6\u662f\u57fa\u4e8eGradle\u6784\u5efa\u7684\uff0c\u548cAndroid </p> <p>Studio \u5b8c\u7f8e\u65e0\u7f1d\u642d\u914d\u7684\u65b0\u4e00\u4ee3\u6784\u5efa\u7cfb\u7edf\u3002</p> <p>\u6784\u5efa\u6d41\u7a0b\uff1a</p> <p></p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#1gradleproperities","title":"1.gradle.properities","text":"<p>\u4e3aGradle\u7684\u5c5e\u6027\u914d\u7f6e\u6587\u4ef6\uff0c\u6240\u6709\u7684.gradle \u6587\u4ef6\u90fd\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u5c5e\u6027</p> <pre><code>//\u7528\u6cd5\nProperties properties = new Properties()\nproperties.load(new FileInputStream(new File(project.rootProject.projectDir,\"local.properties\")));//gradle.properties\u7684\u6587\u4ef6\u5730\u5740\nlacal =  properties.getProperty('local','false')\n//\u6216\u8005 \u76f4\u63a5\u83b7\u53d6\n  lacal =  rootProject.getProperty('local','false')\n</code></pre>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#2buildgradle","title":"2.build.gradle","text":"<p>Gradle Code\u7684\u4e3b\u8981\u6587\u4ef6\uff0c\u53ef\u4ee5\u4fee\u6539\u540d\u79f0</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#build","title":"\u9876\u5c42Build\u6587\u4ef6","text":"<p>\u9876\u5c42 <code>build.gradle</code> \u6587\u4ef6\u4f4d\u4e8e\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\uff0c\u7528\u4e8e\u5b9a\u4e49\u9002\u7528\u4e8e\u9879\u76ee\u4e2d\u6240\u6709\u6a21\u5757\u7684\u4f9d\u8d56\u9879\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u9876\u5c42 build \u6587\u4ef6\u4f7f\u7528 <code>plugins</code> \u4ee3\u7801\u5757\u5b9a\u4e49\u9879\u76ee\u4e2d\u6240\u6709\u6a21\u5757\u5171\u7528\u7684 Gradle \u4f9d\u8d56\u9879\u3002\u6b64\u5916\uff0c\u9876\u5c42 build \u6587\u4ef6\u8fd8\u5305\u542b\u7528\u4e8e\u6e05\u7406 build \u76ee\u5f55\u7684\u4ee3\u7801</p> <p>buildscript{}\u3001allprojects{}\u3001ext{}</p> <pre><code>task clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre> <p>Gradle 7.0\u4e4b\u540e\uff0c\u9876\u5c42build\u6587\u4ef6\u529f\u80fd\u5206\u7ed9\u4e86settings.gradle,\u73b0\u5728\u4e3b\u8981\u662f\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '7.3.1' apply false\n    id 'com.android.library' version '7.3.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.7.20' apply false\n}\n</code></pre> <p>\u5728\u9876\u5c42\u6a21\u5757\u76f4\u63a5\u6307\u5b9a\u4e86Gradle\u63d2\u4ef6\u7684\u7248\u672c\u3002</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#build_1","title":"\u6a21\u5757Build\u6587\u4ef6","text":"<p>\u5e38\u7528\u64cd\u4f5c</p> <pre><code>//\u5f15\u7528.gradle \u6587\u4ef6\napply from: \"filename.gradle\"\n//\u63d2\u4ef6 library \u58f0\u660e\n apply plugin: 'com.android.library'\n</code></pre> <p>Android\u5e38\u89c1\u4e94\u79cd\u63d2\u4ef6id\uff1a</p> plugin id \u63cf\u8ff0 com.android.application \u5e94\u7528\u7a0b\u5e8f\u63d2\u4ef6\uff0c\u751f\u6210apk com.android.library \u5e93\u63d2\u4ef6\uff0c\u751f\u6210aar\uff0c\u53ef\u4f9b\u5176\u5b83\u9879\u76ee\u4f7f\u7528 com.android.test \u6d4b\u8bd5\u63d2\u4ef6 com.android.feature \u521b\u5efaAndroid Instant App\u65f6\u9700\u8981\u7528\u5230\u7684\u63d2\u4ef6 com.android.instantapp Android Instant App\u7684\u5165\u53e3"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#buildscript","title":"buildscript{} \u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u7684\u914d\u7f6e","text":""},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#allprojects","title":"allprojects{} \u6574\u4e2a\u9879\u76ee\u9700\u8981\u4f9d\u8d56\u7684\u4ed3\u5e93","text":"<p>\u8fd9\u4e00\u9879\u5728Gradle 7.0\u4e4b\u540e\uff0c\u5c06\u5176\u653e\u5728\u4e86settings.gradle,\u4f46\u662f\u4e5f\u53ef\u4ee5\u4f7f\u7528\uff0c\u4f46\u4e0d\u8981\u548c\u8fd9\u4e2a\u51b2\u7a81</p> <p>``` dependencyResolutionManagement {     repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)     repositories {</p> <pre><code>    google()\n    mavenCentral() \n}\n</code></pre> <p>} ```</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#ext","title":"ext{} \u7528\u6765\u5b58\u653e\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027","text":""},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#dependencies","title":"dependencies{}","text":"<p>gradle \u4f9d\u8d56\u7684\u76f8\u5173\u64cd\u4f5c</p> <pre><code>implementation fileTree(dir: 'libs', include: ['*.aar', '*.jar'], exclude: [])//\u4f9d\u8d56libs\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u76f8\u5173\u7c7b\u578b\u6587\u4ef6\nimplementation project(path: ':moudlename')//\u4f9d\u8d56\u672c\u5730\u6587\u4ef6\nimplementation files('libs/libraryname.jar')//\u4f9d\u8d56\u672c\u5730\u5e93\n  implementation(group: 'com.sina.weibo.lib', name: 'ipc', version: '0.1.2-SNAPSHOT', ext: 'aar') { transitive = true //\u662f\u5426\u7a7f\u900f }//\u4f9d\u8d56\u8fdc\u7a0b\u5e93 \u9700\u8981\u5728allprojects\u4e2d\u6dfb\u52a0maven\u4ed3\u5e93\n</code></pre> <p>dependencies\u7684Api</p> Android Studio 2.X Android Studio 3.X apk runtimeOnly provided compileOnly compile api \u6ca1\u6709\u5bf9\u5e94 implementation debugCompile debugImplementation releaseCompile releaseImplementation androidTestCompile androidTestImplementation <ul> <li>implementation</li> </ul> <p>\u76f8\u5f53\u4e8eprivate,\u4e0d\u4f1a\u5c06\u4f9d\u8d56\u4f20\u9012\u5230\u4e0b\u4e00\u7ea7,\u5bf9\u4e8e\u5176\u4ed6moudle\u662f\u4e0d\u53ef\u89c1\u7684</p> <ul> <li>compile</li> </ul> <p>\u76f8\u5f53\u4e8epublic\uff0c\u4f1a\u5c06\u4f9d\u8d56\u4f20\u9012\u5230\u4e0b\u4e00\u7ea7</p> <ul> <li>api</li> </ul> <p>\u5b8c\u5168\u7b49\u540c\u4e8ecompile\uff0c\u662fcompile\u7684\u5347\u7ea7\u7248\uff0c\u73b0\u5728\u4f7f\u7528api</p> <ul> <li>provided\uff08compileOnly\uff09</li> </ul> <p>\u200b       \u53ea\u5728\u7f16\u8bd1\u65f6\u6709\u6548\uff0c\u4e0d\u4f1a\u53c2\u4e0e\u6253\u5305</p> <ul> <li>apk\uff08runtimeOnly\uff09</li> </ul> <p>\u53ea\u5728\u751f\u6210apk\u7684\u65f6\u5019\u53c2\u4e0e\u6253\u5305\uff0c\u7f16\u8bd1\u65f6\u4e0d\u4f1a\u53c2\u4e0e\uff0c\u5f88\u5c11\u7528\u3002</p> <ul> <li> <p>testCompile\uff08testImplementation\uff09   testCompile \u53ea\u5728\u5355\u5143\u6d4b\u8bd5\u4ee3\u7801\u7684\u7f16\u8bd1\u4ee5\u53ca\u6700\u7ec8\u6253\u5305\u6d4b\u8bd5apk\u65f6\u6709\u6548\u3002</p> </li> <li> <p>debugCompile\uff08debugImplementation\uff09   debugCompile \u53ea\u5728debug\u6a21\u5f0f\u7684\u7f16\u8bd1\u548c\u6700\u7ec8\u7684debug apk\u6253\u5305\u65f6\u6709\u6548</p> </li> <li> <p>releaseCompile\uff08releaseImplementation\uff09   Release compile \u4ec5\u4ec5\u9488\u5bf9Release \u6a21\u5f0f\u7684\u7f16\u8bd1\u548c\u6700\u7ec8\u7684Release apk\u6253\u5305\u3002</p> </li> <li> <p>Android{}</p> </li> <li> <p>compileSdk</p> <p>compileSdkVersion\u544a\u8bc9gradle\u4f7f\u7528\u54ea\u4e2a\u7248\u672cAndroid SDK\u7f16\u8bd1\u4f60\u7684\u5e94\u7528\uff0c\u4f7f\u7528\u4efb\u4f55\u65b0\u6dfb\u52a0\u7684API\u5c31\u8981\u4f7f\u7528\u5bf9\u5e94level\u7684Android SDK\uff0c\u4f46\u662f\u8be5\u914d\u7f6e\u4fe1\u606f\u4e0d\u4f1a\u52a0\u5728\u6253\u5305\u73af\u5883\u4e2d\uff0c\u53ea\u662f\u4e3aIDE\u63d0\u4f9b\u7684\u7f16\u8bd1\u73af\u5883\u3002</p> <p>\u63a8\u8350\u4f7f\u7528\u6700\u65b0\u7684SDK\u73af\u5883\u7f16\u8bd1</p> </li> <li> <p>minSdk</p> <p>\u6307\u660e\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u6240\u9700\u7684\u6700\u5c0fAPI level\uff0c\u82e5\u7528\u6237\u7684\u673a\u578b\u5c0f\u4e8e\u8fd9\u4e2a\u7248\u672c\uff0c\u5219\u65e0\u6cd5\u5b89\u88c5\u3002\u540c\u65f6\u4e0d\u80fd\u4f7f\u7528\u8be5level\u7248\u672cSDK\u6240\u4e0d\u5177\u5907\u7684API\u3002</p> <p>\u4f60\u7684minSdkVersion\u8981\u5927\u4e8e\u4f60\u4f9d\u8d56\u7684\u6240\u6709\u5e93\u7684minSdkVersion\u3002</p> <p>minSDK \u51b3\u5b9a\u4e86\u4f60\u4f7f\u7528\u7684API \u7248\u672c\u3002</p> <p>\u4f7f\u7528\u9ad8\u4e8eminSdkVersion\u7684API\uff0c\u53ea\u662f\u7f16\u8bd1\u65f6\u4f1a\u62a5\u8b66\u544a\uff0c\u4f46\u662f\u5982\u679c\u8fd0\u884c\u5728\u4f4e\u7248\u672c\u624b\u673a\u4e0a\uff0c\u4f1a\u4ee5\u4e3aapi\u627e\u4e0d\u5230\u5bfc\u81f4crash</p> </li> <li> <p>targetSdk</p> <p>targetSdkVersion \u662f Android \u7cfb\u7edf\u63d0\u4f9b\u524d\u5411\u517c\u5bb9\u7684\u4e3b\u8981\u624b\u6bb5\u3002\u610f\u601d\u5c31\u662f\u5728SDK\u7248\u672c\u66f4\u65b0\u540e\uff0c\u6839\u636etargetSdk\u6765\u7ef4\u6301\u539f\u6709\u7684\u884c\u4e3a\uff0c\u5047\u5982\u4f60\u5f53\u524d\u7684targetSDK = 19,\u5f53Android\u7cfb\u7edf\u66f4\u65b0\u523020\u65f6\uff0c\u884c\u4e3a\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u4ecd\u7136\u630919\u6765\u8fd0\u884c\u3002</p> <p>targetSdk\u51b3\u5b9a\u4e86\u4f60\u8fd0\u884c\u7684API\u7248\u672c\u3002</p> <p>\u6bcf\u4e00Android\u7cfb\u7edf\u4f1a\u63d0\u4f9b\u4e00\u5957API\uff0c\u9ad8\u7248\u672c\u7684API\u517c\u5bb9\u4f4e\u7248\u672c\u7684API\u3002</p> <p>\u4f7f\u7528\u4f4e\u7248\u672cAPI\u7684\u597d\u5904\uff0c\u53ef\u4ee5\u517c\u5bb9\u66f4\u591a\u7684\u673a\u578b\u3002</p> <p>\u4f7f\u7528\u9ad8\u7248\u672cAPI\u7684\u597d\u5904\uff0c\u63d0\u4f9b\u4e86\u66f4\u591a\u5c01\u88c5\u597d\u7684API,\u6d88\u9664\u4e86\u4f4e\u7248\u672c\u7684\u4e00\u4e9b\u95ee\u9898\u548c\u4e0d\u8db3\u3002</p> <p>\u5b9e\u9645\u4e0a\u4e09\u8005\u4e4b\u95f4\u7684\u5173\u7cfb\u5e94\u8be5\u662f\uff1a</p> <p><code>java minSdkVersion &lt;= targetSdkVersion &lt;= compileSdkVersion</code></p> <p>\u56e0\u6b64\uff0c\u4e00\u822c\u662f\u4f7f\u7528minSdk\u53bb\u517c\u5bb9\u66f4\u591a\u7684\u673a\u578b\uff0c\u66f4\u9ad8\u7684targetSdk\u548ccompileSdk\u6765\u7ef4\u62a4\u66f4\u597d\u7684\u6027\u80fd\u3002</p> </li> <li> <p>versionCode</p> </li> <li> <p>versionName</p> </li> <li> <p>testInstrumentationRunner</p> </li> </ul>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#configurationsall","title":"configurations.all{} \u5bf9\u6240\u6709\u914d\u7f6e\u8fdb\u884c\u7edf\u4e00\u66f4\u6539","text":"<ol> <li>\u6dfb\u52a0\u4f9d\u8d56\u9879\uff1a\u901a\u8fc7 <code>dependencies</code> \u914d\u7f6e\u5757\uff0c\u4f60\u53ef\u4ee5\u5411\u6240\u6709\u914d\u7f6e\u6dfb\u52a0\u7edf\u4e00\u7684\u4f9d\u8d56\u9879\u3002\u4f8b\u5982\uff1a</li> </ol> <p><code>groovy    configurations.all {        dependencies {            implementation 'com.example:library:1.0.0'        }    }</code></p> <p>\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u6240\u6709\u914d\u7f6e\u90fd\u5f15\u5165\u76f8\u540c\u7684\u4f9d\u8d56\u9879\u3002</p> <ol> <li>\u914d\u7f6e\u5c5e\u6027\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>each</code> \u65b9\u6cd5\u904d\u5386\u6240\u6709\u914d\u7f6e\uff0c\u5e76\u5bf9\u6bcf\u4e2a\u914d\u7f6e\u8fdb\u884c\u5c5e\u6027\u8bbe\u7f6e\u3002\u4f8b\u5982\uff1a</li> </ol> <p><code>groovy    configurations.all {        it.resolutionStrategy.cacheChangingModulesFor 0, 'seconds'    }</code></p> <p>\u8fd9\u6837\u53ef\u4ee5\u8bbe\u7f6e\u6240\u6709\u914d\u7f6e\u7684\u7f13\u5b58\u7b56\u7565\u3002</p> <ol> <li>\u5e94\u7528\u63d2\u4ef6\uff1a\u901a\u8fc7 <code>apply</code> \u65b9\u6cd5\uff0c\u4f60\u53ef\u4ee5\u5728\u6240\u6709\u914d\u7f6e\u4e2d\u5e94\u7528\u76f8\u540c\u7684\u63d2\u4ef6\u3002\u4f8b\u5982\uff1a</li> </ol> <p><code>groovy    configurations.all {        apply plugin: 'com.example.myplugin'    }</code></p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#buildtypes-apk","title":"buildTypes{} \u7528\u4e8e\u6784\u5efa\u4e0d\u540c\u7684Apk","text":"<p>\u5f00\u542f\u6df7\u6dc6\uff0c\u533a\u5206debug/release/custon\u7b49</p> <pre><code>buildTypes {\n        release {\n            minifyEnabled true //\u5f00\u542f\u6df7\u6dc6\n            shrinkResources true //\u79fb\u9664\u672a\u4f7f\u7528\u8d44\u6e90\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.release //\u8bbe\u7f6e\u4f7f\u7528\u7684\u7b7e\u540d\n        }\n        debug {\n            debuggable true\n        }\n        custom {\n            minifyEnabled false\n        }\n    }\n</code></pre> \u5c5e\u6027 \u63cf\u8ff0 applicationIdSuffix \u914d\u7f6eapplicationId\u7684\u540e\u7f00 debuggable \u662f\u5426\u652f\u6301\u65ad\u70b9\u8c03\u8bd5 jniDebuggable \u662f\u5426\u53ef\u4ee5\u8c03\u8bd5NDK\u4ee3\u7801 buildConfigField \u914d\u7f6e\u4e0d\u540c\u7684\u5f00\u53d1\u73af\u5883\uff0c\u6bd4\u5982\u6d4b\u8bd5\u73af\u5883\u548c\u6b63\u5f0f\u73af\u5883 shrinkResources \u7f16\u8bd1\u65f6\u662f\u5426\u79fb\u9664\u672a\u4f7f\u7528\u7684\u8d44\u6e90\uff0c\u9ed8\u8ba4false zipAlignEnabled \u662f\u5426\u5f00\u542f\u5f00\u542fzipalign\u4f18\u5316\uff0c\u63d0\u9ad8apk\u8fd0\u884c\u6548\u7387 proguardFile ProGuard\u6df7\u6dc6\u6240\u4f7f\u7528\u7684ProGuard\u914d\u7f6e\u6587\u4ef6 proguardFiles \u540c\u65f6\u914d\u7f6e\u591a\u4e2aProGuard\u914d\u7f6e\u6587\u4ef6 signingConfig \u914d\u7f6e\u7b7e\u540d\u4fe1\u606f multiDexEnabled \u662f\u5426\u81ea\u52a8\u62c6\u5206\u591a\u4e2aDex"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#signingconfig","title":"signingConfig{}","text":"<p>\u53ef\u4ee5\u5728bulidTypes\u4e0b\u7684signingConfig\u4e2d\u5f15\u7528</p> <pre><code>    signingConfigs {\n        debug {//\u53ef\u4ee5\u5728bulidTypes\u4e0b\u7684signingConfig\u4e2d\u5f15\u7528\n            storeFile file('release.keystore')//\u7b7e\u540d\u6587\u4ef6\u8def\u5f84\n            storePassword 'xxxxxx'\n            keyAlias 'androidreleasekey'\n            keyPassword '123456'\n        }\n        release {\n            storeFile file('release.keystore')\n            storePassword 'xxxxxx'\n            keyAlias 'androidreleasekey'\n            keyPassword '123456'\n        }\n    }\n</code></pre>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#sourcesets","title":"sourceSets{}","text":"<p>\u53ef\u4ee5\u6307\u5b9a\u7f16\u8bd1\u54ea\u4e9b\u6e90\u6587\u4ef6</p> <pre><code>    sourceSets {\n        main {\n            manifest.srcFile 'AndroidManifest.xml'\n            java.srcDirs = ['src']\n            resources.srcDirs = ['src']\n            aidl.srcDirs = ['src']\n            renderscript.srcDirs = ['src']\n            res.srcDirs = ['res']\n            assets.srcDirs = ['assets']\n            jniLibs.srcDirs = ['src/main/jniLibs']\n            java {\n                exclude '/test/**'  // \u4e0d\u60f3\u5305\u542b\u6587\u4ef6\u7684\u8def\u5f84\n            }\n        }\n    }\n</code></pre>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#afterevaluate","title":"afterEvaluate{}","text":"<p>\u95ed\u5305\u53ef\u4ee5\u7528\u6765\u5728\u914d\u7f6e\u9636\u6bb5\u7ed3\u675f\u540e\u6267\u884c\u4e00\u4e9b\u64cd\u4f5c\uff0c\u901a\u5e38\u7528\u4e8e\u5bf9\u5df2\u89e3\u6790\u7684\u914d\u7f6e\u8fdb\u884c\u8fdb\u4e00\u6b65\u5904\u7406\u6216\u52a8\u6001\u4fee\u6539\u914d\u7f6e\u3002</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#ndk","title":"NDK \u914d\u7f6e","text":"<p>1\uff09defaultConfig{}\u4e2d\u7684 ndk.abiFilters \u5c5e\u6027\uff0c\u914d\u7f6endk\u94fe\u63a5\u5e93\u652f\u6301\u7684cpu\u67b6\u6784</p> <p>2\uff09externalNativeBuild{}\u4e2d\u914d\u7f6ecmake</p> <pre><code>externalNativeBuild {\n    cmake {\n        path \"CMakeLists.txt\"\n        cppFlags '-std=c++11'\n        arguments '-DANDROID_PLATFORM=android-21',\n                '-DANDROID_TOOLCHAIN=clang',\n                '-DANDROID_STL=c++_shared'\n    }\n}\n</code></pre> <p>3\uff09sourceSets\u4e2d\u914d\u7f6e\u52a8\u6001\u94fe\u63a5\u5e93\u7684\u76ee\u5f55</p> <pre><code>sourceSets {\n    main {\n        jniLibs.srcDirs = ['src/main/jniLibs']\n    }\n}\n</code></pre> <p>4\uff09android {} ndkversion</p> <ul> <li>\u4e0a\u4f20Library\u5230maven</li> </ul> <pre><code>apply plugin: 'maven'\n//...\u5176\u5b83\u914d\u7f6e\n//\u5c06\u6e90\u7801\u6253\u5305  \u4e3a\u4e86\u4fdd\u8bc1\u5f15\u5165\u7684aar  \u5305\u53ef\u4ee5\u67e5\u770b\u6e90\u7801\ntask androidSourcesJar(type: Jar) {\n    classifier = 'sources'\n    from android.sourceSets.main.java.srcDirs\n}\n//\u5305\u542b\u6587\u6863\u548c\u6e90\u7801\u7684aar\nartifacts {\n    archives androidSourcesJar\n}\n//\u4e0a\u4f20\u5230Maven\u4ed3\u5e93\u7684task\nuploadArchives {\n    repositories {\n        mavenDeployer {\n            //\u6307\u5b9amaven\u4ed3\u5e93url\n            repository(url: \"http://url/maven-releases/\") {\n                //nexus\u767b\u5f55\u9ed8\u8ba4\u7528\u6237\u540d\u548c\u5bc6\u7801\n                authentication(userName: \"admin\", password: \"123456\")\n            }\n            pom.groupId = \"com.test.camera\"// \u552f\u4e00\u6807\u8bc6\uff08\u901a\u5e38\u4e3a\u6a21\u5757\u5305\u540d\uff0c\u4e5f\u53ef\u4ee5\u4efb\u610f\uff09\n            pom.artifactId = \"CameraMix\" // \u9879\u76ee\u540d\u79f0\uff08\u901a\u5e38\u4e3a\u7c7b\u5e93\u6a21\u5757\u540d\u79f0\uff0c\u4e5f\u53ef\u4ee5\u4efb\u610f\uff09\n            pom.version = \"1.0.0\" // \u7248\u672c\u53f7\n        }\n    }\n}\n//\u7248\u672c\u53f7\u6bcf\u6b21\u4e0a\u4f20\u5fc5\u987b\u6362\u65b0\uff0c\u9664\u975e\u4f7f\u7528-SNAPSHOT\n</code></pre> <pre><code> compileOptions {//\u7f16\u8bd1\u9009\u9879\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n lintOptions {//lint\u914d\u7f6e\n        checkReleaseBuilds false\n        abortOnError false\n    }\n</code></pre>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#3-buildgradle","title":"3.\u81ea\u5b9a\u4e49 build.gradle","text":"<p>\u53ef\u4ee5\u81ea\u5b9a\u4e49.gradle \u6587\u4ef6 \u53ef\u4ee5\u901a\u8fc7apply \u5c06\u81ea\u5b9a\u4e49\u7684.gradle\u5f15\u5165\u5230build.gradle</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#4build-variants","title":"4.Build variants","text":"<p>\u8fc7\u914d\u7f6e build \u53d8\u4f53\u6765\u6839\u636e\u5355\u4e2a\u9879\u76ee\u6784\u5efa\u51fa\u4e0d\u540c\u7248\u672c\u7684\u5e94\u7528\uff0c\u4ee5\u53ca\u5982\u4f55\u6b63\u786e\u7ba1\u7406\u4f9d\u8d56\u9879\u548c\u7b7e\u540d\u914d\u7f6e\u3002</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#5aab","title":"5.AAB\u683c\u5f0f","text":"<p>2021\u5e748\u6708\uff0cgoogle\u5b98\u65b9\u5ba3\u5e03\u90fd\u5c06\u4f7f\u7528Android App Bundles\u683c\u5f0f\u6765\u4e0a\u4f20\u6253\u5305\u6587\u4ef6\u3002AAB\u683c\u5f0f\u662f\u4e00\u79cd\u53d1\u5e03\u683c\u5f0f\uff0c\u5b83\u4e3b\u8981\u89e3\u51b3\u4e86\u901a\u7528\u7684Apk\u56e0\u4e3a\u8981\u9002\u914d\u591a\u5730\u533a\u3001\u591a\u673a\u578b\u5e26\u6765\u7684\u8d44\u6e90\u8fc7\u591a\u7684\u95ee\u9898\uff0c\u5177\u6709\u51cf\u5c11\u5f00\u53d1\u8005\u8d1f\u62c5\u3001\u51cf\u5c11\u5e94\u7528\u5927\u5c0f\u3001\u5b89\u88c5\u65f6\u95f4\u548c\u5bbd\u5e26\u6d88\u8017\uff0c\u5b83\u5c06\u6784\u6210\u4e00\u4e2aApk\u7684\u64cd\u4f5c\u4ea4\u7ed9\u4e86google play\u53bb\u5b8c\u6210\uff0c\u6700\u7ec8\u5b89\u88c5\u5728\u624b\u673a\u4e0a\u7684\u8fd8\u662fApk\u683c\u5f0f\u3002</p> <ul> <li>\u52a8\u6001\u4ea4\u4ed8\uff08google play Dynamic Delivery\uff09</li> </ul> <p>Google play \u6839\u636eAAB\u6587\u4ef6\uff0c\u5c06\u5176\u4ece\u591a\u4e2a\u7ef4\u5ea6\u62c6\u5206\uff0c\u5728\u8d44\u6e90\u7ef4\u5ea6\u3001ABI\u7ef4\u5ea6\u548cLaunge\u7ef4\u5ea6\u8fdb\u884c\u4e86\u62c6\u5206\uff0c\u4f60\u53ea\u8981\u6309\u9700\u7ec4\u88c5\u4f60\u7684Apk\u5373\u53ef\uff0c\u6bd4\u5982\u4f60\u7684\u624b\u673a\u662fx86 ,xhdpi\u7684\u624b\u673a\uff0cgoogle play\u4f1a\u83b7\u53d6\u624b\u673a\u4fe1\u606f\uff0c\u6309\u7167\u4f60\u9700\u8981\u7684\u8d44\u6e90\u62fc\u88c5\u6210\u4e00\u4e2aapk\uff0c\u800c\u65e0\u5173\u7684\u8d44\u6e90\u4f1a\u5220\u9664\uff0c\u51cf\u5c11\u4e86Apk\u7684\u5927\u5c0f\u3002</p> <p>\u8fd8\u53ef\u4ee5\u5c06\u4e00\u4e2aapk\u62c6\u5206\u6210\u591a\u4e2aapk\uff0c\u6309\u9700\u52a0\u8f7d\uff0c\u6709\u4ee5\u4e0b\u51e0\u79cdsplit apk</p> <ul> <li>Base Apk \u5305\u542b\u4e86\u6240\u6709\u5176\u4ed6\u62c6\u5206APK\u90fd\u53ef\u4ee5\u8bbf\u95ee\u7684\u4ee3\u7801\u548c\u8d44\u6e90\uff0c\u5e76\u63d0\u4f9b\u5e94\u7528\u7684\u57fa\u672c\u529f\u80fd</li> <li>Configuration Apks  native libraries \u548c\u9002\u914d\u5f53\u524d\u624b\u673a\u5c4f\u5e55\u5206\u8fa8\u7387\u7684\u8d44\u6e90</li> <li>Dynamic feature Apks. \u6bcf\u4e2a\u52a8\u6001\u529f\u80fd\u90fd\u5305\u542b\u67d0\u9879\u529f\u80fd\u7684\u4ee3\u7801\u548c\u8d44\u6e90\u3002</li> </ul>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#6settingsgradle","title":"6.Settings.gradle","text":"<p>\u4e00\u822c\u653e\u5728\u5de5\u7a0b\u9876\u5c42,\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u4e2a\u529f\u80fd\uff1a</p> <pre><code>pluginManagement {\n    repositories {\n        google()\n        mavenCentral()\n        gradlePluginPortal()\n    }\n}\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\nrootProject.name = \"TestApplication\"\ninclude ':app'\n</code></pre> <ul> <li>pluginManagement \u811a\u672c\u5757 \u7b49\u540c\u4e8ebuild.gradle\u7684<code>buildprojects{}</code></li> </ul> <p>\u7528\u4e8e \u914d\u7f6e Gradle \u63d2\u4ef6\u7684 Maven \u4ed3\u5e93 ,\u914d\u7f6e\u7684\u662f\u6784\u5efa\u8fc7\u7a0b \u4e2d , \u4f7f\u7528\u7684\u4ed3\u5e93 ;</p> <ul> <li>dependencyResolutionManagement \u811a\u672c\u5757</li> </ul> <p>\u7528\u4e8e \u914d\u7f6e \u4f9d\u8d56 \u7684 Maven \u4ed3\u5e93 ,\u914d\u7f6e\u7684\u662f\u5de5\u7a0b\u6216\u6a21\u5757 \u4e0b\u7684\u4f9d\u8d56\u4f7f\u7528\u7684\u4ed3\u5e93 \uff0c\u7b49\u540c\u4e8ebuild.gradle\u7684<code>allprojects{}</code></p> <ul> <li>dependencyResolutionManagement#repositoriesMode \u6a21\u5f0f\u6709\u4e24\u79cd :</li> </ul> <p>RepositoriesMode.PREFER_PROJECT : \u89e3\u6790\u4f9d\u8d56\u5e93\u65f6 , \u4f18\u5148\u4f7f\u7528\u672c\u5730\u4ed3\u5e93 , \u672c\u5730\u4ed3\u5e93\u6ca1\u6709\u8be5\u4f9d\u8d56 , \u5219\u4f7f\u7528\u8fdc\u7a0b\u4ed3\u5e93 ; RepositoriesMode.FAIL_ON_PROJECT_REPOS : \u89e3\u6790\u4f9d\u8d56\u5e93\u65f6 , \u5f3a\u884c\u4f7f\u7528\u8fdc\u7a0b\u4ed3\u5e93 , \u4e0d\u7ba1\u672c\u5730\u4ed3\u5e93\u6709\u6ca1\u6709\u8be5\u4f9d\u8d56\u5e93 ;  RepositoriesMode.PREFER_SETTINGS(false)--\u9996\u9009\u8bbe\u7f6e\u5b58\u50a8\u5e93</p> <ul> <li>rootProject.name \u7528\u4e8e\u6307\u5b9a\u5de5\u7a0b\u6839\u76ee\u5f55 , \u5728\u8be5\u76ee\u5f55\u4e0b\u6709\u4e00\u4e2a build.gradle \u6784\u5efa\u811a\u672c , \u58f0\u660e\u540e\u4f1a\u81ea\u52a8\u6267\u884c\u8be5\u6784\u5efa\u811a\u672c ;</li> <li>include \u7528\u4e8e\u6307\u5b9a\u5b50\u9879\u76ee , \u5728\u5b50\u9879\u76ee\u4e2d\u4e5f\u6709\u4e00\u4e2a build.gradle \u6784\u5efa\u811a\u672c , \u58f0\u660e\u540e\u4f1a\u81ea\u52a8\u6267\u884c\u8be5\u6784\u5efa\u811a\u672c ;</li> </ul>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#_1","title":"\u7f16\u8bd1\u6027\u80fd\u4f18\u5316\u5de5\u5177","text":"<p>1.Android Studio Analyzer</p> <p>Android Studio \u63d0\u4f9b\u7684\u53ef\u89c6\u5316\u5206\u6790Build\u6027\u80fd\u7684\u5de5\u5177\u3002</p> <p>2.\u72ec\u7acb\u7684 <code>gradle-profiler</code> \u5de5\u5177</p> <p>\u8fd9\u662f\u4e00\u6b3e\u7528\u4e8e\u6df1\u5165\u5206\u6790 build \u7684\u5f3a\u5927\u5de5\u5177\u3002</p> <p>3.Gradle <code>--profile</code> \u9009\u9879</p> <p>\u8fd9\u662f\u4e00\u6b3e\u53ef\u4ece Gradle \u547d\u4ee4\u884c\u542f\u52a8\u7684\u4fbf\u6377\u5de5\u5177\u3002</p> <p>\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u53ef\u4ee5\u626b\u63cf\u7f16\u8bd1\u65f6\u95f4</p> <pre><code> ./gradlew app:assembleDebug  --profile --scan\n ./gradlew --profile --offline --rerun-tasks assembleFlavorDebug\n</code></pre>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#gradle_1","title":"\u5e38\u7528\u7684Gradle\u547d\u4ee4","text":""},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#gradlew","title":"Gradlew \u4f9d\u8d56\u95ee\u9898","text":""},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#1program-type-already-present-xxx","title":"1.<code>Program type already present: XXX</code>","text":"<p>\u4e00\u822c\u662f\u4f9d\u8d56\u91cd\u590d\u5bfc\u81f4\u7684\uff0c\u89e3\u51b3\u65b9\u6848\u662f\u6392\u9664\u91cd\u590d\u7684\u4f9d\u8d56\u3002</p> <p>\u6392\u67e5\u4f9d\u8d56\u7684\u547d\u4ee4\uff1a<code>./gradlew -q \u6a21\u5757\u540d:dependencies</code>,\u4f1a\u51fa\u73b0\u591a\u4e2a\u4f9d\u8d56\u6811\uff0c</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#gladletask","title":"\u6253\u5305\u8fc7\u7a0b\u4e2d\u7684Gladle\u7684Task","text":"<p>Android \u4f7f\u7528Gradle\u6253\u5305\u7684\u8fc7\u7a0b\u662f\u901a\u8fc7Android Gradle Plugin\u6765\u5b8c\u6210\u7684\u3002</p> <p>\u901a\u8fc7<code>./gradlew assembleDebug --console plain &gt; tasks.txt</code>\u6765\u67e5\u770bgradle\u547d\u4ee4\u3002</p> <pre><code>//aidl \u8f6c\u6362aidl\u6587\u4ef6\u4e3ajava\u6587\u4ef6\n&gt; Task :app:compileDebugAidl\n\n//\u751f\u6210BuildConfig\u6587\u4ef6\n&gt; Task :app:generateDebugBuildConfig\n\n//\u83b7\u53d6gradle\u4e2d\u914d\u7f6e\u7684\u8d44\u6e90\u6587\u4ef6\n&gt; Task :app:generateDebugResValues\n\n// merge\u8d44\u6e90\u6587\u4ef6\uff0cAAPT2 \u7f16\u8bd1\u9636\u6bb5\n&gt; Task :app:mergeDebugResources\n\n// merge assets\u6587\u4ef6\n&gt; Task :app:mergeDebugAssets\n&gt; Task :app:compressDebugAssets\n\n// merge\u6240\u6709\u7684manifest\u6587\u4ef6\n&gt; Task :app:processDebugManifest\n\n//\u751f\u6210R\u6587\u4ef6 AAPT2 \u94fe\u63a5\u9636\u6bb5\n&gt; Task :app:processDebugResources\n\n//\u7f16\u8bd1kotlin\u6587\u4ef6\n&gt; Task :app:compileDebugKotlin\n\n//javac \u7f16\u8bd1java\u6587\u4ef6\n&gt; Task :app:compileDebugJavaWithJavac\n\n//\u8f6c\u6362class\u6587\u4ef6\u4e3adex\u6587\u4ef6\n&gt; Task :app:dexBuilderDebug\n\n//\u6253\u5305\u6210apk\u5e76\u7b7e\u540d\n&gt; Task :app:packageDebug\n</code></pre>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#gradle_2","title":"Gradle \u8bed\u6cd5\u5b66\u4e60","text":"<p>Gradle DSL\uff08Domain Specific Language\uff09\u662f\u4e00\u79cd\u7528\u4e8e\u7f16\u5199 Gradle \u6784\u5efa\u811a\u672c\u7684\u7279\u5b9a\u9886\u57df\u8bed\u8a00\u3002\u5b83\u662f\u57fa\u4e8e Groovy \u8bed\u8a00\u7684\u8bed\u6cd5\uff0c\u5e76\u4e14\u4e3a\u6784\u5efa\u811a\u672c\u63d0\u4f9b\u4e86\u4e00\u7ec4\u7279\u5b9a\u7684\u8bed\u6cd5\u548c\u7ea6\u5b9a\uff0c\u7528\u4e8e\u5b9a\u4e49\u6784\u5efa\u4efb\u52a1\u3001\u4f9d\u8d56\u5173\u7cfb\u3001\u63d2\u4ef6\u914d\u7f6e\u7b49\u3002</p> <p>Gradle \u662f\u4e00\u79cd\u5f00\u6e90\u7684\u6784\u5efa\u81ea\u52a8\u5316\u5de5\u5177\uff0c\u7528\u4e8e\u6784\u5efa\u548c\u7ba1\u7406\u9879\u76ee\u7684\u7f16\u8bd1\u3001\u6d4b\u8bd5\u3001\u6253\u5305\u3001\u90e8\u7f72\u7b49\u4efb\u52a1\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u7075\u6d3b\u4e14\u5f3a\u5927\u7684\u6784\u5efa\u7cfb\u7edf\uff0c\u652f\u6301\u591a\u79cd\u7f16\u7a0b\u8bed\u8a00\u548c\u9879\u76ee\u7c7b\u578b\uff0c\u5e76\u4e14\u5177\u6709\u9ad8\u5ea6\u53ef\u6269\u5c55\u6027\u548c\u5b9a\u5236\u6027\u3002</p> <p>\u56e0\u6b64\uff0cGradle DSL \u662f\u7528\u4e8e\u7f16\u5199 Gradle \u6784\u5efa\u811a\u672c\u7684\u8bed\u8a00\uff0c\u800c Gradle \u662f\u6784\u5efa\u5de5\u5177\u672c\u8eab\u3002\u901a\u8fc7 Gradle DSL\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u7f16\u5199\u63cf\u8ff0\u9879\u76ee\u6784\u5efa\u548c\u7ba1\u7406\u7684\u811a\u672c\uff0c\u7136\u540e\u4f7f\u7528 Gradle \u5de5\u5177\u6765\u6267\u884c\u8fd9\u4e9b\u811a\u672c\u4ee5\u5b8c\u6210\u76f8\u5e94\u7684\u6784\u5efa\u4efb\u52a1\u3002Gradle DSL \u63d0\u4f9b\u4e86\u4e00\u79cd\u6613\u4e8e\u9605\u8bfb\u548c\u7f16\u5199\u7684\u8bed\u6cd5\uff0c\u4f7f\u5f97\u6784\u5efa\u811a\u672c\u7684\u7f16\u5199\u53d8\u5f97\u66f4\u52a0\u7b80\u6d01\u548c\u53ef\u7ef4\u62a4\u3002</p> <p>1.\u5b9a\u4e49\u4efb\u52a1Task</p> <p>\u5728build.gradle\u6587\u4ef6\u6216\u8005\u81ea\u5b9a\u4e49\u7684.gradle\u6587\u4ef6\u4e2d</p> <pre><code>// build.gradle\ntask hello {\n    doLast {\n        println 'Hello world!'\n    }\n}\n//\u5728\u63a7\u5236\u53f0\u8fd0\u884c\u547d\u4ee4\n./gradlew -q hello // Android \u7528\u6237\u5728\u6839\u76ee\u5f55\u4f7f\u7528 ./gradlew\n</code></pre>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#gradle-plugin","title":"Gradle  Plugin\u5b66\u4e60","text":"<p>\u81ea\u5b9a\u4e49Gradle\u63d2\u4ef6</p> <p>https://juejin.cn/post/6887581345384497165</p> <p>https://www.jianshu.com/p/92504554d727</p>"},{"location":"Android/13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#groovy","title":"Groovy\u8bed\u6cd5\u7b80\u5355\u5b66\u4e60","text":"<p>\u4e3b\u8981\u662f\u5bf9\u95ed\u5305\u7684\u4f7f\u7528</p> <p>1.\u5728build.gradle\u4e2d\u76f4\u63a5\u4f7f\u7528Plugin\u4f7f\u7528\u63d2\u4ef6</p> <pre><code>//\u5728build.gradle \u6700\u7b80\u5355\u7684\u4f7f\u7528Plugin\u63d2\u4ef6\nclass GreetingPlugin implements Plugin&lt;Project&gt; {\n    void apply(Project project) {\n        project.task('pluginhello') {\n            doLast {\n                println 'Hello from the GreetingPlugin'\n            }\n        }\n    }\n}\n\n// Apply the plugin\napply plugin: GreetingPlugin\n\n&gt; gradle -q pluginhello\nHello from the GreetingPlugin\n</code></pre> <p>2.Plugin extension\u7684\u4f7f\u7528</p>"},{"location":"Android/14%20Service/","title":"Android \u7ec4\u4ef6-Service","text":""},{"location":"Android/14%20Service/#_1","title":"\u5b9a\u4e49","text":""},{"location":"Android/14%20Service/#aidl-service","title":"AIDL Service","text":""},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/","title":"15 Android \u5e38\u7528\u4e1a\u52a1\u529f\u80fd","text":""},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#1alarmanager","title":"1.AlarManager","text":"<p>AlarmManager \u53ef\u4ee5\u6309\u7167\u201d\u9884\u5148\u8bbe\u5b9a\u7684\u65f6\u95f4\u201c\u6216\u201d\u65f6\u95f4\u95f4\u9694\"\u6fc0\u6d3bIntent\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u4ed6\u4e0etimer\u4e0d\u540c\u7684\u662f\uff0c\u4ed6\u662f\u7a0b\u5e8f\u4e4b\u5916\u7684\uff0c\u751f\u547d\u5468\u671f\u4e0d\u53d7\u7a0b\u5e8f\u63a7\u5236\uff0c\u5373\u4f7f\u7a0b\u5e8f\u5173\u95ed\u4e5f\u4f1a\u89e6\u53d1\u3002\u5b83\u6bd4Service\u548c\u5b9a\u65f6\u5668\u66f4\u52a0\u8282\u7701\u8d44\u6e90\u3002\u5982\u679c\u5728\u5e94\u7528\u7a0b\u5e8f\u5185\u89e6\u53d1\u5b9a\u65f6\u64cd\u4f5c\uff0c\u63a8\u8350Handler\uff0cTimer\u4ee5\u53caThread\u7b49\u65b9\u5f0f\u3002\u56e0\u4e3a\u8fd9\u6837Android\u80fd\u66f4\u597d\u7684\u63a7\u5236\u7cfb\u7edf\u8d44\u6e90\u3002</p> <ul> <li>Alerm\u7684\u56db\u4e2a\u53ef\u7528\u7c7b\u578b\uff08set()\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff09</li> </ul> <p>\uff081\uff09RTC_WAKEUP \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5524\u9192\u8bbe\u5907\uff0c\u5e76\u6fc0\u6d3bPendingIntent</p> <p>\uff082\uff09RTC \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6fc0\u6d3bPendingIntent\uff0c\u4f46\u662f\u4e0d\u4f1a\u5524\u9192\u8bbe\u5907</p> <p>\uff083\uff09 ELAPSED_REALTIME \u6839\u636e\u8bbe\u5907\u542f\u52a8\u4e4b\u540e\u7ecf\u8fc7\u7684\u65f6\u95f4\u6fc0\u6d3bPendingIntent\uff0c\u4f46\u662f\u4e0d\u4f1a\u5524\u9192\u8bbe\u5907\uff0c\u7ecf\u8fc7\u7684\u65f6\u95f4\u5305\u542b\u8bbe\u5907\u4f11\u7720\u7684\u6240\u6709\u65f6\u95f4</p> <p>\uff084\uff09ELAPSED_REALTIME_WAKEUP \u5728\u8bbe\u5907\u542f\u52a8\u5e76\u7ecf\u8fc7\u6307\u5b9a\u7684\u65f6\u95f4\u4e4b\u540e\u6fc0\u6d3bPendingIntent\u548c\u5524\u9192\u8bbe\u5907\u3002</p> <ul> <li> <p>\u8bbe\u7f6e\u91cd\u590d\u7684Alarm</p> </li> <li> <p>setRepeating  \u53ef\u4ee5\u7cbe\u786e\u63a7\u5236\u65f6\u95f4\uff0c\u6bd4\u8f83\u8017\u7535</p> </li> <li> <p>setIndexactRepeating \u53ef\u4ee5\u51cf\u5c11\u7535\u91cf\u7684\u6d88\u8017\uff0c\u4f46\u662f\u4f1a\u540c\u6b65\u591a\u4e2a\u6ca1\u6709\u7cbe\u786e\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u7684Alerm.</p> <p>INTERVAL_FIFTEEN_MINUTES\uff08\u6bcf\u5341\u4e94\u5206\u949f\uff09</p> <p>INTERVAL_HALF_HOUR\uff08\u6bcf\u9694\u534a\u4e2a\u5c0f\u65f6\uff09</p> <p>INTERVAL_HOUR\uff08\u6bcf\u9694\u4e00\u4e2a\u5c0f\u65f6\uff09</p> <p>INTEVAL_HALF_DAY\uff08\u6bcf\u4e2a\u534a\u5929\uff09</p> </li> </ul> <p>\u200b        INTEVAL_DAY\uff08\u6bcf\u9694\u4e00\u5929\uff09</p> <ul> <li>set (int type,                    long triggerAtMillis,                    PendingIntent operation)</li> </ul> <p>Android 19\u4e4b\u540e\uff0c<code>triggerAtMillis</code>\u662f\u4e0d\u7cbe\u786e\u7684\uff0c\u4e0d\u4f1a\u63d0\u524d\u4f46\u53ef\u80fd\u4f1a\u5ef6\u8fdf\uff0c\u4e3a\u4e86\u964d\u4f4e\u7cfb\u7edf\u7684\u6d88\u8017</p> <p>\u4ee3\u7801\u793a\u4f8b\uff1a1\u5206\u949f\u540e\u53d1\u9001\u5e7f\u64adACTION_GET_PUSH_VALUE</p> <pre><code>AlarmManager alarmMng = (AlarmManager) context\n                    .getSystemService(Context.ALARM_SERVICE);\n            int flags = SDKAdaptationUtils.getPendingIntent31Flags(1);//Flags\u9002\u914dAndroid\u7248\u672c\n            PendingIntent rtcIntent = PendingIntent.getBroadcast(context, 0,\n                    new Intent(ACTION_GET_PUSH_VALUE), flags);\n            Date t = new Date();\n            t.setTime(java.lang.System.currentTimeMillis() + 60 * 1000);\n            alarmMng.set(AlarmManager.RTC, t.getTime(), rtcIntent);\n//\u53d6\u6d88\u8be5\u4efb\u52a1\nalarmMng.cancle();\n</code></pre>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#2action","title":"2.\u5e38\u7528\u7684Action","text":"<ol> <li><code>Intent.ACTION_BOOT_COMPLETED</code>,\u5f00\u673a\u542f\u52a8\u5e7f\u64ad</li> </ol> <p><code>xml    \u9700\u8981\u6743\u9650    &lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\" /&gt;    //\u81ea\u5b9a\u4e49\u7684\u5e7f\u64ad\u6dfb\u52a0    &lt;intent-filter&gt;      &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\" /&gt;    &lt;/intent-filter&gt;</code></p> <p>\u6ce8\u610f\uff1a</p> <p>1.\u9700\u8981\u7cfb\u7edf\u5f00\u542f\u81ea\u542f\u52a8\u5f00\u5173\uff0c\u5f53\u7136\u8fd9\u4e2a\u5f00\u5173\u4e0d\u662f\u8bf4app\u53ef\u4ee5\u81ea\u542f\u52a8\u4e86\uff0c\u53ea\u662f\u53ef\u4ee5\u63a5\u6536\u5f00\u673a\u542f\u52a8\u5e7f\u64ad\u4e86.</p> <p>2.Android 8 \u4e4b\u540e\u8bf4\u9759\u6001\u6ce8\u518c\u7684\u5e7f\u64ad\u4e0d\u80fd\u63a5\u6536\u7cfb\u7edf\u5e7f\u64ad\uff0c\u56e0\u4e3aAndroid 8\u5e7f\u64ad\u53ea\u80fd\u53d1\u9001\u663e\u5f0f\u5e7f\u64ad,\u7ecf\u6d4b\u8bd5\uff0c\u4ecd\u7136\u53ef\u4ee5\u63a5\u6536\u7cfb\u7edf\u5e7f\u64ad</p> <p>3.\u5f00\u673a\u5e7f\u64ad\u9700\u8981\u5f00\u673a\u4e00\u6bb5\u65f6\u95f4\u540e\u624d\u80fd\u6536\u5230\u3002  </p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#3android","title":"3.Android \u5b9a\u4f4d\u7684\u539f\u7406","text":"<p>\u79fb\u52a8\u7aef\u5927\u81f4\u901a\u8fc7\u4e09\u79cd\u65b9\u5f0f\u6765\u8fdb\u884c\u8bbe\u5907\u5b9a\u4f4d\uff1aGPS\u3001\u57fa\u7ad9\u3001wifi\u3002</p> <p>Android\u4e2d\u6211\u4eec\u4e00\u822c\u4f7f\u7528<code>LocationManager</code>\u6765\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\uff0c<code>Provider</code>\u6709\uff1a</p> <pre><code>public static final String NETWORK_PROVIDER = \"network\";\npublic static final String GPS_PROVIDER = \"gps\";\npublic static final String PASSIVE_PROVIDER = \"passive\";\npublic static final String FUSED_PROVIDER = \"fused\";\n</code></pre> \u7c7b\u578b \u4f5c\u7528 \u4f18\u7f3a\u70b9 GPS_PROVIDER \u901a\u8fc7 GPS \u6765\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u7684\u7ecf\u7eac\u5ea6\u4fe1\u606f \u4f18\u70b9\uff1a\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u7cbe\u786e\u5ea6\u9ad8\uff1b \u7f3a\u70b9\uff1a\u53ea\u80fd\u5728\u6237\u5916\u4f7f\u7528\uff0c\u83b7\u53d6\u7ecf\u7eac\u5ea6\u4fe1\u606f\u8017\u65f6\uff0c\u8017\u7535\uff1b NETWORK_PROVIDER \u901a\u8fc7\u79fb\u52a8\u7f51\u7edc\u7684\u57fa\u7ad9\u6216\u8005 Wi-Fi \u6765\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e \u4f18\u70b9\uff1a\u53ea\u8981\u6709\u7f51\u7edc\uff0c\u5c31\u53ef\u4ee5\u5feb\u901f\u5b9a\u4f4d\uff0c\u5ba4\u5185\u5ba4\u5916\u90fd\u53ef\uff1b \u7f3a\u70b9\uff1a\u7cbe\u786e\u5ea6\u4e0d\u9ad8\uff1b PASSIVE_PROVIDER \u88ab\u52a8\u63a5\u6536\u66f4\u65b0\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\uff0c\u800c\u4e0d\u7528\u81ea\u5df1\u8bf7\u6c42\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u3002 PASSIVE_PROVIDER \u8fd4\u56de\u7684\u4f4d\u7f6e\u662f\u901a\u8fc7\u5176\u4ed6 providers \u4ea7\u751f\u7684 FUSED_PROVIDER \u4f9d\u8d56GMS \u6682\u65f6\u5728\u56fd\u5185\u65e0\u6cd5\u4f7f\u7528,\u76ee\u524d\u5728Android12\uff08\u5373android api 31\uff09\u4e0a\u53c8\u91cd\u65b0\u4f7f\u7528\u4e86\u8d77\u6765 <p>\u6253\u5f00\u7cfb\u7edf\u5b9a\u4f4d\uff0c\u5e76\u5141\u8bb8app\u4f7f\u7528\u5b9a\u4f4d\u6743\u9650\uff0c\u5219\u4f1a\u83b7\u53d6\u4ee5\u4e0aProvider\uff0c\u5173\u95ed\u5b9a\u4f4d\uff0c\u5219\u4e00\u4e2a\u90fd\u4e0d\u4f1a\u83b7\u53d6\u5230\uff0c\u4f4e\u7248\u672c\u7684\u80fd\u83b7\u53d6\u5230PASSIVE_PROVIDER\u3002</p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#_1","title":"\u4f4d\u7f6e\u4fe1\u606f\u4f7f\u7528\u6743\u7684\u7c7b\u578b","text":"<pre><code>&lt;manifest ... &gt;\n  &lt;-- \u524d\u53f0\u4f4d\u7f6e\u4fe1\u606f--&gt;\n  &lt;--\u7cbe\u786e\u5b9a\u4f4d--&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/&gt;\n  &lt;--\u6a21\u7cca\u5b9a\u4f4d--&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/&gt;\n &lt;-- \u540e\u53f0\u4f4d\u7f6e\u4fe1\u606f--&gt;\n  &lt;!-- Required only when requesting background location access on\n       Android 10 (API level 29) and higher. --&gt;\n  &lt;uses-permission android:name=\"android.permission.ACCESS_BACKGROUND_LOCATION\" /&gt;\n&lt;/manifest&gt;\n</code></pre> <p>1.\u5728API Level 29\u4ee5\u4e0b\u8bf7\u6c42\u4f4d\u7f6e\u4fe1\u606f\uff0c\u8bf7\u6c42\u524d\u53f0\u4f4d\u7f6e\u4fe1\u606f\u540c\u65f6\u4f1a\u83b7\u53d6\u540e\u53f0\u4f4d\u7f6e\u4fe1\u606f\uff0c\u572829\u4ee5\u4e0a\uff0c\u9700\u8981\u8bf7\u6c42\u540e\u53f0\u4f4d\u7f6e\u4fe1\u606f\u3002</p> <p>2.\u7cbe\u786e\u5ea6</p> <ul> <li> <p>\u6a21\u7cca\u5b9a\u4f4d\uff0c\u57283\u5e73\u7c73\u4ee5\u5185</p> </li> <li> <p>\u7cbe\u786e\u5b9a\u4f4d\uff0c\u572850\u7c73\u4ee5\u5185 </p> </li> </ul> <p>\u7cbe\u786e\u5b9a\u4f4d\u7684\u8bf7\u6c42\u540c\u65f6\u4f1a\u8fd4\u56de\u6a21\u7cca\u5b9a\u4f4d\u7684\u6743\u9650\uff0c\u4f46Android \u5efa\u8bae\u9012\u589e\u5f0f\u8bf7\u6c42\u4f4d\u7f6e\u4fe1\u606f\u3002</p> <p>3.\u6743\u9650\u7ec4</p> <pre><code>public static final String LOCATION = android.permission-group.LOCATION\n</code></pre> <p>\u6743\u9650\u7ec4\u7684\u6982\u5ff5\u662f\u4e3a\u4e86\u66f4\u597d\u7684\u4f7f\u7528\u6743\u9650\uff0c\u800c\u4e0d\u9700\u8981\u6bcf\u6b21\u53bb\u8bf7\u6c42\u3002</p> <p>1.ACCESS_BACKGROUND_LOCATION\u2014\u2014\u540e\u53f0\u5b9a\u4f4d\u6743\u9650\u4f7f\u7528\u8bf4\u660e</p> <ul> <li>targetSdkVersion&lt;29\u65f6,\u5373Android 10 \u4ee5\u4e0b\uff0c\u4e0d\u533a\u5206\u524d\u53f0\u548c\u540e\u53f0\u5b9a\u4f4d\u6743\u9650,\u7533\u8bf7\u524d\u53f0\u4f4d\u7f6e\u6743\u9650\uff0c\u9ed8\u8ba4\u7ed9\u4e88\u540e\u53f0\u4f4d\u7f6e\u6743\u9650\u3002</li> <li>targetSdkVersion&gt;=29\u65f6,\u5373Android 10\u53ca\u4ee5\u4e0a\uff0c\u81f3\u5c11\u9700\u8981\u6709\u4e00\u4e2a\u524d\u53f0\u6743\u9650\u540c\u610f\uff0c\u624d\u80fd\u7533\u8bf7\u540e\u53f0\u5b9a\u4f4d\uff0c\u82e5\u4e24\u4e2a\u6ca1\u6709\uff0c\u5219\u4e0d\u4f1a\u5c55\u793a\u6743\u9650\u7533\u8bf7\u6846\uff0c\u9ed8\u8ba4\u62d2\u7edd\u3002</li> <li>targetSdkVersion&gt;=29\u65f6\uff0c\u5f53\u524d\u53f0\u548c\u540e\u53f0\u6743\u9650\u540c\u65f6\u7533\u8bf7\u65f6\uff0c\u9009\u62e9\u201c\u4f7f\u7528\u65f6\u5141\u8bb8\u201d\uff0c\u540e\u53f0\u5b9a\u4f4d\u7533\u8bf7\u4f1a\u88ab\u62d2\u7edd\u3002targetSdkVersion&gt;=30\u65f6,\u5373Android 11\u53ca\u4ee5\u4e0a\uff0c\u53d6\u6d88\u4e86\u201c\u59cb\u7ec8\u5141\u8bb8\u201d\uff0c\u5219\u540e\u53f0\u4e00\u5b9a\u4f1a\u88ab\u62d2\u7edd\u3002\u56e0\u6b64\u5148\u9009\u524d\u53f0\uff0c\u518d\u9009\u540e\u53f0\u3002</li> </ul> <p>2.ACCESS_COARSE_LOCATION&amp;&amp; ACCESS_FINE_LOCATION</p> <p>Android 12\uff0c\u7533\u8bf7ACCESS_COARSE_LOCATION\u4e0d\u4f1a\u9ed8\u8ba4\u6709ACCESS_FINE_LOCATION\u6743\u9650\uff0c\u4f46\u662f\u7533\u8bf7ACCESS_FINE_LOCATION\u56de\u9ed8\u8ba4\u6709ACCESS_COARSE_LOCATION\u6743\u9650\u3002</p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#gps","title":"GPS \u5b9a\u4f4d","text":"<p>\u7cbe\u786e\u5b9a\u4f4d\u6253\u5f00\u7684\u60c5\u51b5\uff0c\u4e0d\u4f1a\u518d\u8bf7\u6c42\u6253\u5f00\u6a21\u7cca\u5b9a\u4f4d\u7684\u6743\u9650\uff0c\u6a21\u7cca\u5b9a\u4f4d\u7684\u6743\u9650\u6253\u5f00\uff0c\u9700\u8981\u7cbe\u786e\u5b9a\u4f4d\u7684\u65f6\u5019\u4ecd\u7136\u9700\u8981\u7533\u8bf7\u6743\u9650\u6253\u5f00\u3002</p> <p>\u9700\u8981\u6253\u5f00App Gps \u5b9a\u4f4d\uff0c\u4f7f\u7528LocationManager \u5b9a\u4f4d,\u4f1a\u5728Listener\u4e2d\u6536\u5230Location,</p> <pre><code>LocationManager.requestLocationUpdates()\n</code></pre>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#_2","title":"\u7f51\u7edc\u5b9a\u4f4d","text":"<p>\u9700\u8981\u6743\u9650</p> <pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/&gt;\n</code></pre> <p>\u540cGps\u5b9a\u4f4d\uff0c\u9700\u8981\u83b7\u53d6NETWORK_PROVIDER</p> <p>\u539f\u7406\uff1aAndroid \u63d0\u4f9b\u7684\u4f4d\u7f6e\u670d\u52a1\uff0c\u5229\u7528\u4f4d\u7f6e\u670d\u52a1\u5668\u8fdb\u884c\u5b9a\u4f4d</p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#_3","title":"\u57fa\u7ad9\u5b9a\u4f4d","text":"<p>\u901a\u8fc7TelephonyManager\u6211\u4eec\u53ef\u4ee5\u62ff\u5230\u57fa\u7ad9\u4fe1\u606f\uff0c\u518d\u901a\u8fc7\u76f8\u5173\u7684api\u63a5\u53e3\u5c31\u80fd\u5f97\u5230\u7ecf\u7eac\u5ea6\uff0c\u4f46\u662f\u57fa\u7ad9\u5b9a\u4f4d\u7cbe\u5ea6\u5f88\u5dee\u3002</p> <p>\u57fa\u7ad9\u4fe1\u606f\u5305\u542b\u5982\u4e0b\uff1a</p> <p>MCC\uff0cMobile Country Code\uff0c\u79fb\u52a8\u56fd\u5bb6\u4ee3\u7801\uff08\u4e2d\u56fd\u7684\u4e3a460\uff09\uff1b MNC\uff0cMobile Network Code\uff0c\u79fb\u52a8\u7f51\u7edc\u53f7\u7801\uff08\u4e2d\u56fd\u79fb\u52a8\u4e3a00\uff0c\u4e2d\u56fd\u8054\u901a\u4e3a01\uff09\uff1b LAC\uff0cLocation Area Code\uff0c\u4f4d\u7f6e\u533a\u57df\u7801\uff1b CID\uff0cCell Identity\uff0c\u57fa\u7ad9\u7f16\u53f7\uff0c\u662f\u4e2a16\u4f4d\u7684\u6570\u636e\uff08\u8303\u56f4\u662f0\u523065535\uff09\u3002</p> <p>\u4ee5\u4e0b\u662fCDMA\u72ec\u6709\u7684\u4fe1\u606f</p> <p>SID, \u65e0\u7ebf\u7cfb\u7edfID</p> <p>NID,Network id</p> <p>BID, Basestation ID</p> <p>\u9700\u8981\u533a\u5206GSM\u548cCDMA\uff0cIMSL\uff1a\u4e2d\u56fd\u8054\u901aGSM\u7cfb\u7edf\u4f7f\u752801\uff0c\u4e2d\u56fd\u79fb\u52a8GSM\u7cfb\u7edf\u4f7f\u752802\uff0c\u4e2d\u56fd\u7535\u4fe1CDMA\u7cfb\u7edf\u4f7f\u752803\u3002</p> <p>\u83b7\u53d6\u5230\u4ee5\u4e0a\u4fe1\u606f\uff0c\u901a\u8fc7\u4e00\u4e9b\u516c\u5f00\u7684Api\u4fe1\u606f\u83b7\u53d6\u5230\u7ecf\u7eac\u5ea6\u3002</p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#_4","title":"\u57fa\u7ad9\u5b9a\u4f4d\u4fe1\u606f\u83b7\u53d6","text":"<p>\u57fa\u7ad9\u4fe1\u606f\u7684\u83b7\u53d6\u9700\u8981\u5f00\u542f\u5b9a\u4f4d\u670d\u52a1\u548c\u7cbe\u786e\u4f4d\u7f6e\u6743\u9650\uff0c\u5426\u5219\u65e0\u6cd5\u83b7\u53d6\u57fa\u7ad9\u4fe1\u606f\u3002</p> <p>\u4f4e\u7248\u672c\u4e0d\u9700\u8981\u5f00\u542f\u670d\u52a1\u3002</p> <p>\u9700\u8981\u6743\u9650</p> <pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/&gt; dangours\n</code></pre> <p>\u83b7\u53d6\u53611\u57fa\u7ad9\u4fe1\u606f </p> <ul> <li>TelephonyManager#getCellLocation();</li> </ul> <p>\u83b7\u53d6\u5f53\u524d\u624b\u673a\u7684\u57fa\u7ad9\u4f4d\u7f6e\uff0c\u9700\u8981\u7cbe\u786e\u4f4d\u7f6e\u7684\u6743\u9650\u3002</p> <p><code>java   TelephonyManager mTelephonyManager = context.getSystemService(Context.TELEPHONY_SERVICE);   CellLocation cellLocation = mTelephonyManager.getCellLocation();</code></p> <ul> <li>TelephonyManager#getAllCellInfo();</li> </ul> <p>\u83b7\u53d6\u5f53\u524d\u8bbe\u5907\u7684\u6240\u6709\u57fa\u7ad9\u4fe1\u606f\uff0c\u9700\u8981\u7cbe\u786e\u4f4d\u7f6e\u7684\u6743\u9650\u3002</p> <ul> <li>TelephonyManagerEx#getCellLocation()</li> </ul> <p>\u901a\u8fc7\u53cd\u5c04\u83b7\u53d6\u5f53\u524d\u8bbe\u5907\u57fa\u7ad9\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u9009\u62e9\u53611/\u53612\uff0c\u9700\u8981\u7cbe\u786e\u4f4d\u7f6e\u7684\u6743\u9650\u3002</p> <p><code>java     Class&lt;?&gt; cls;               try {                  cls = Class.forName(\"com.mediatek.telephony.TelephonyManagerEx\");                  Method method1 = cls.getDeclaredMethod(\"getCellLocation\", int.class);                  Method method2 = cls.getDeclaredMethod(\"getDefault\");                  Object obj = (Object)method2.invoke(null);                  cellLocation = (CellLocation)method1.invoke(obj, 1);  //0\u8868\u793a\u53611\uff0c1\u8868\u793a\u53612               } catch (ClassNotFoundException e) {                   e.printStackTrace();               } catch (IllegalArgumentException e) {                   e.printStackTrace();               } catch (NoSuchMethodException e) {                   e.printStackTrace();               } catch (IllegalAccessException e) {                   e.printStackTrace();               } catch (InvocationTargetException e) {                   e.printStackTrace();               }  catch (Exception e) {                 e.printStackTrace();             }</code></p> <ul> <li>ITelephony#getCellLocation()</li> </ul> <p>\u83b7\u53d6\u5f53\u524d\u8bbe\u5907\u7684\u57fa\u7ad9\u4fe1\u606f\uff0c\u4e3b\u8981\u9488\u5bf9\u4e8e\u53cc\u5361\u53cc\u5f85\u624b\u673a</p> <p><code>try {   bundle = getITelephonyBundle(mTelephonyManager);   } catch (Exception e) {   e.printStackTrace();   }   if (bundle != null) {   backupCell = new GsmCellLocation(bundle);   }   private Bundle getITelephonyBundle(TelephonyManager telMgr)throws Exception {   @SuppressLint(\"SoonBlockedPrivateApi\")   Method getITelephony = telMgr.getClass().getDeclaredMethod(\"getITelephony\");   getITelephony.setAccessible(true);   Object iTelephony = getITelephony.invoke(telMgr);   Method getCellLocation = iTelephony.getClass().getDeclaredMethod(\"getCellLocation\");   Object result = getCellLocation.invoke(iTelephony);   return (Bundle) result;   }</code></p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#wifi","title":"Wifi\u5b9a\u4f4d","text":"<p>wifi\u5b9a\u4f4d\u662f\u901a\u8fc7WifiManager\u62ff\u5230wifi\u7684\u4fe1\u606f\uff0c\u4e3b\u8981\u662fwifi\u7684BSSID\uff08\u5373mac\u5730\u5740\uff09\u3002\u7136\u540e\u901a\u8fc7\u4e00\u4e9bapi\u67e5\u8be2\u7ecf\u7eac\u5ea6</p> <p>\u6bd4\u5982\uff1a\u63a5\u53e3\u8bf4\u660e\u6587\u6863 | LBS\u6570\u636e\u4ed3\u5e93</p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#wifi_1","title":"Wifi\u7684\u76f8\u5173\u6982\u5ff5","text":"<ul> <li>SAT</li> </ul> <p>Station(\u7ad9\u70b9)\uff0c\u662f\u6307Android\u8bbf\u95ee\u65e0\u7ebf\u7f51\u7edc\u7684\u8282\u70b9</p> <ul> <li>AP</li> </ul> <p>AccessPoint(\u63a5\u5165\u70b9)\uff0c\u5206\u4e3a\u786cAP\u548c\u8f6fAP\u3002</p> <p>\u786cAP\u662f\u6307\u62e5\u6709\u72ec\u7acb\u7684CPU\uff0c\u80fd\u72ec\u7acb\u8fdb\u884c\u6570\u636e\u7684\u76f8\u5173\u5904\u7406\uff0c\u662f\u4e00\u4e2a\u72ec\u7acb\u5b8c\u5168\u7684\u6a21\u5757\uff0c\u5e38\u89c1\u7684\u4e3a\u65e0\u7ebf\u8def\u7531\u5668\u3002</p> <p>\u8f6fAP\u662f\u6307\u4f7f\u7528\u9a71\u52a8\u914d\u7f6e\u79f0\u4e3aAP\u6a21\u5f0f\uff0c\u5b9e\u73b0\u63a5\u5165\u70b9\u7684\u529f\u80fd\uff0c\u5305\u62ec\u901a\u8fc7 Wi-Fi \u70ed\u70b9\u548c\u4ec5\u9650\u672c\u5730\u4f7f\u7528\u7684 Wi-Fi \u70ed\u70b9\u5171\u4eab\u7f51\u7edc\u3002</p> <ul> <li>wifi\u611f\u77e5\u5bf9\u8bbe\u5907</li> </ul> <p>\u901a\u8fc7 Android 8.0 \u4e2d\u65b0\u589e\u7684 Wi-Fi \u611f\u77e5\u529f\u80fd\uff0c\u652f\u6301\u8bbe\u5907\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Wi-Fi \u611f\u77e5\u534f\u8bae\u53d1\u73b0\u5176\u4ed6\u8bbe\u5907\u3001\u4e0e\u5176\u4ed6\u8bbe\u5907\u4e92\u8fde\uff0c\u4ee5\u53ca\u5c06\u8986\u76d6\u8303\u56f4\u6269\u5c55\u5230\u5176\u4ed6\u8bbe\u5907\u3002</p> <ul> <li>WIFI\u76f4\u8054</li> </ul> <p>WLAN \u76f4\u8fde\u529f\u80fd\u53c8\u79f0\u201cWi-Fi \u70b9\u5bf9\u70b9\u201d\uff0c\u5b83\u5141\u8bb8\u652f\u6301\u8bbe\u5907\u76f4\u63a5\u4f7f\u7528 WLAN \u76f4\u8fde\u534f\u8bae\u53d1\u73b0\u5176\u4ed6\u8bbe\u5907\u5e76\u4e0e\u4e4b\u4e92\u8fde\uff0c\u65e0\u9700\u8fde\u63a5\u5230\u4e92\u8054\u7f51\u6216\u79fb\u52a8\u7f51\u7edc\uff0c\u5373\u5728\u4e0d\u4f7f\u7528\u79fb\u52a8\u7f51\u7edc\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528wifi\u5728\u8bbe\u5907\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u901a\u4fe1\u3002</p> <p>\u73b0\u5728\u5df2\u7ecf\u51fa\u73b0\u4e86SAT/SAT\u5e76\u53d1\u3001SAT/AP\u5e76\u53d1\u548cAP/AP\u5e76\u53d1\uff0c\u5141\u8bb8\u8bbe\u5907\u540c\u65f6\u8fde\u63a5\u4e24\u4e2aWifi\uff0c\u5b9e\u73b0\u4e86wifi\u5207\u6362\u65f6\u7684\u5e73\u6ed1\u8fc7\u6e21\uff0c\u56e0\u6b64Android 12\u53ca\u4ee5\u4e0a\u63a8\u51fa\u4e86\u65b0\u7684API \u6765\u83b7\u53d6wifi\u4fe1\u606f\u3002</p> <p>\u56e0\u6b64\u4e0d\u4f7f\u7528 <code>WifiManager.getConnectionInfo()</code>\uff0c\u800c\u6539\u7528 <code>NetworkCallback.onCapabilitiesChanged()</code>\uff0c\u4ee5\u83b7\u53d6\u4e0e\u7528\u4e8e\u6ce8\u518c <code>NetworkCallback</code> \u7684 <code>NetworkRequest</code> \u5339\u914d\u7684\u6240\u6709 <code>WifiInfo</code> \u5bf9\u8c61\u3002</p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#wifi_2","title":"wifi\u4fe1\u606f\u7684\u83b7\u53d6\u548c\u4f7f\u7528","text":"<p>\u9700\u8981\u6743\u9650</p> <pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\"/&gt; normal\n&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/&gt; dangours\n</code></pre> <p>\u9700\u8981\u6253\u5f00wifi\u548c\u6253\u5f00\u5b9a\u4f4d\u670d\u52a1\uff0c\u624d\u80fd\u83b7\u53d6\u5230\u8fde\u63a5\u7684wifi\u4fe1\u606f\uff0c\u9700\u8981\u7cbe\u786e\u5b9a\u4f4d\u6743\u9650\u624d\u80fd\u83b7\u53d6\u63a5\u5165\u70b9\u5217\u8868\u3002\u4f4e\u7248\u672cAndroid \u4e0d\u9700\u8981\u5b9a\u4f4d\u670d\u52a1</p> <p>\u9700\u8981\u6253\u5f00wifi,\u8fde\u4e0d\u8fde\u4e0a\u65e0\u6240\u8c13\uff0c\u5728google\u7684\u670d\u52a1\u5668\u6216\u8005\u5176\u4ed6\u670d\u52a1\u5668\u4e2d\u5b58\u6709\u4f60\u9644\u8fd1\u7684wifi\u4fe1\u606f\uff0c\u5219\u53ef\u4ee5\u5b9a\u4f4d</p> <ul> <li> <p>\u83b7\u53d6\u8fde\u63a5\u7684wifi\u4fe1\u606f</p> </li> <li> <p>WifiManager#getConnectionInfo()</p> </li> </ul> <p><code>java   //Android 12 \u4e4b\u524d   WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);   android.net.wifi.WifiInfo wifiinfo =  wifiManager.getConnectionInfo();</code></p> <ul> <li>NetworkCallback.onCapabilitiesChanged()</li> </ul> <p><code>java</code></p> <ul> <li>\u83b7\u53d6\u6700\u8fd1\u4e00\u6b21\u626b\u63cf\u7684\u63a5\u5165\u70b9\u5217\u8868</li> </ul> <p>WifiManager#getScanResults() \u9700\u8981\u7cbe\u786e\u5b9a\u4f4d\u7684\u6743\u9650</p> <p><code>java   WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);   List&lt;ScanResult&gt; oriScanResults  = wifiManager.getScanResults();</code></p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#_5","title":"\u6df7\u5408\u5b9a\u4f4d","text":"<p>\u57fa\u4e8e\u4e34\u8fd1\u57fa\u7ad9\u548cWIFI\u70ed\u70b9\u7684\u9ad8\u7cbe\u5ea6\u6df7\u5408\u57fa\u7ad9\u5b9a\u4f4d\uff0c\u6bd4\u5355\u4e00\u7684\u57fa\u7ad9\u5b9a\u4f4d\u548cwifi\u5b9a\u4f4d\u66f4\u52a0\u7cbe\u786e\u4e00\u70b9\u3002</p> <p>\u65b9\u6848\uff1a</p> <p>1.\u901a\u8fc7WifiManager\u7684getScanResults\u51fd\u6570\u83b7\u53d6\u626b\u63cf\u5230\u7684wifi\u5217\u8868\uff0c\u5176\u4e2dlevel\u5c31\u662f\u4fe1\u53f7\u5f3a\u5ea6\uff0c\u53ef\u80fd\u9700\u8981\u53bb\u91cd/</p> <p>2.\u901a\u8fc7TelephonyManager\u7684getAllCe.llInfo\u51fd\u6570\u83b7\u5f97\u3002\u8fd9\u4e2a\u51fd\u6570\u8981\u6c42minsdkverison\u5fc5\u987b\u572817\u53ca\u4ee5\u4e0a,\u5176\u4e2dmRssi\u5c31\u662f\u4fe1\u53f7\u5f3a\u5ea6\u3002</p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#agps","title":"AGPS\u5b9a\u4f4d","text":"<p>\u8fd9\u4e2a\u4e0e\u5176\u8bf4\u662f\u4e00\u4e2a\u5b9a\u4f4d\u65b9\u5f0f\uff0c\u4e0d\u5982\u8bf4\u662f\u4e00\u79cd\u5b9e\u73b0\u65b9\u6848\uff0c\u5373\u901a\u8fc7\u7f51\u7edc\u4f4d\u7f6e\u548c\u4f4d\u7f6e\u670d\u52a1\u5668\u5224\u65ad\u51fa\u6700\u4f73\u7684\u536b\u661f\uff0c\u51cf\u5c11\u83b7\u53d6\u536b\u661f\u4fe1\u53f7\u7684\u65f6\u95f4\uff0c\u56e0\u4e3a\u83b7\u53d6\u7f51\u7edc\u4f4d\u7f6e\u7684\u901f\u5ea6\u6bd4\u8f83\u5feb\u3002\u8fd9\u4e2a\u662fAndroid\u81ea\u5e26\u7684\uff0c\u4f46\u662f\u597d\u50cf\u9ed8\u8ba4\u5c31\u662f\u8fd9\u79cd\u6a21\u5f0f\u3002</p>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#android-moke","title":"Android Moke\u4f4d\u7f6e","text":"<p>\u53ea\u9488\u5bf9\u4e8eProvider,\u5373\u7f51\u7edc\u5b9a\u4f4d\u548cGps\u5b9a\u4f4d</p> <ul> <li>\u6743\u9650</li> </ul> <p><code>&lt;uses-permission android:name=\"android.permission.ACCESS_MOCK_LOCATION\"   tools:ignore=\"MockLocation\"/&gt;</code></p> <pre><code>//code\n\n</code></pre>"},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#android","title":"Android \u6c89\u6d78\u5f0f(\u5168\u5c4f\u529f\u80fd\u5b9e\u73b0)","text":""},{"location":"Android/15%20Android%20%E5%B8%B8%E7%94%A8%E4%B8%9A%E5%8A%A1%E5%8A%9F%E8%83%BD/#android-asyncinflater","title":"Android AsyncInflater","text":"<p>\u5728\u5f02\u6b65\u7ebf\u7a0b\u4e2d\u52a0\u8f7dxml\u6210View,\u7136\u540e\u56de\u5230\u4e3b\u7ebf\u7a0b\u76f4\u63a5\u52a0\u8f7dView\u3002</p> <p>\u4f7f\u7528\u7528\u6cd5\uff1a</p> <pre><code>  // \u5f02\u6b65\u52a0\u8f7d xml, \u5728 Activity.onCreate(xxx) \u91cc\u9762\n        new AsyncLayoutInflater(this).inflate(R.layout.activity_main, null, new AsyncLayoutInflater.OnInflateFinishedListener() {\n            @Override\n            public void onInflateFinished(@NonNull View view, int resid, @Nullable ViewGroup parent) {\n                setContentView(view);\n                Log.d(TAG, \"onInflateFinished: \");\n            }\n        });\n\n</code></pre> <p>\u539f\u7406\uff1a</p> <p>1.new AsyncLayoutInflater(Context)\u7684\u64cd\u4f5c</p> <pre><code> public AsyncLayoutInflater(@NonNull Context context) {\n        mInflater = new BasicInflater(context);\n        mHandler = new Handler(mHandlerCallback);\n        mInflateThread = InflateThread.getInstance();\n    }\n</code></pre> <p>mInflater:\u7528\u6765\u6e32\u67d3xml\u6587\u4ef6\u4e3aview</p> <p>mHandler:\u65b0\u5efa\u4e86\u4e00\u4e2aLooper\u4e3a\u4e3b\u7ebf\u7a0b\u7684Handler</p> <p>mInflateThread\uff1a \u65b0\u5efa\u4e86\u4e00\u4e2a\u7ebf\u7a0b\uff0cInflateThread\u6539\u7ebf\u7a0b\u4e3a\u4e00\u4e2a\u5355\u4f8b\u3002</p> <p>2.AsyncLayoutInflater.inflate()</p> <pre><code>  @UiThread\n    public void inflate(@LayoutRes int resid, @Nullable ViewGroup parent,\n            @NonNull OnInflateFinishedListener callback) {\n        if (callback == null) {\n            throw new NullPointerException(\"callback argument may not be null!\");\n        }\n        InflateRequest request = mInflateThread.obtainRequest();\n        request.inflater = this;\n        request.resid = resid;\n        request.parent = parent;\n        request.callback = callback;\n        mInflateThread.enqueue(request);\n    }\n</code></pre> <p>\u65b0\u5efa\u4e86InflateRequest\uff0c\u5c01\u88c5\u4e86\u4e00\u4e2aInflateRequest\u8bf7\u6c42\uff0c\u5305\u62ec\u6301\u6709AsyncLayoutInflater\u7684\u5f15\u7528inflater\uff0c\u7ebf\u7a0b\u7ed8\u5236view\u7684resid\uff0c\u56de\u5230\u4e3b\u7ebf\u7a0b\u52a0\u8f7dview\u7684callback\uff0c\u7136\u540e\u8fdb\u5165\u5230\u4e86InflateThread\u7684\u8bf7\u6c42\u961f\u5217\u4e2d\u3002</p> <p>3.InflateThread\u7ed8\u5236\u5b8c\u540e\uff0c\u901a\u8fc7handler\u8fd4\u56de\u5230\u4e3b\u7ebf\u7a0b</p> <pre><code>  private static class InflateThread extends Thread {\n    // \u5355\u4f8b \n        private static final InflateThread sInstance;\n        static {\n            sInstance = new InflateThread();\n            sInstance.start();\n        }\n\n        public static InflateThread getInstance() {\n            return sInstance;\n        }\n\n       //\u963b\u585e\u961f\u5217\n        private ArrayBlockingQueue&lt;InflateRequest&gt; mQueue = new ArrayBlockingQueue&lt;&gt;(10);\n       //\u540c\u6b65\u7684\u8bf7\u6c42\u7f13\u5b58\u6c60\n        private SynchronizedPool&lt;InflateRequest&gt; mRequestPool = new SynchronizedPool&lt;&gt;(10);\n\n        // Extracted to its own method to ensure locals have a constrained liveness\n        // scope by the GC. This is needed to avoid keeping previous request references\n        // alive for an indeterminate amount of time, see b/33158143 for details\n       //\u8fd9\u662f\u91cd\u70b9\uff0c\u4ece\u963b\u585e\u961f\u5217\u4e2d\u53d6\u5230\u8bf7\u6c42\uff0c\n        public void runInner() {\n            InflateRequest request;\n            try {\n              //1.\u4ece\u963b\u585e\u961f\u5217\u4e2d\u53d6\u5230\u8bf7\u6c42\n                request = mQueue.take();\n            } catch (InterruptedException ex) {\n                // Odd, just continue\n                Log.w(TAG, ex);\n                return;\n            }\n\n            try {\n              //2.\u7ed8\u5236\u6210View\n                request.view = request.inflater.mInflater.inflate(\n                        request.resid, request.parent, false);\n            } catch (RuntimeException ex) {\n                // Probably a Looper failure, retry on the UI thread\n                Log.w(TAG, \"Failed to inflate resource in the background! Retrying on the UI\"\n                        + \" thread\", ex);\n            }\n          //3.\u5c06view\u8fd4\u56de\u7ed9\u4e3b\u7ebf\u7a0b\n            Message.obtain(request.inflater.mHandler, 0, request)\n                    .sendToTarget();\n        }\n\n        @Override\n        public void run() {\n            while (true) {\n                runInner();\n            }\n        }\n\n    //\u4ecerequest\u4e2d\u83b7\u53d6\u8bf7\u6c42\n        public InflateRequest obtainRequest() {\n            InflateRequest obj = mRequestPool.acquire();\n            if (obj == null) {\n                obj = new InflateRequest();\n            }\n            return obj;\n        }\n\n        public void releaseRequest(InflateRequest obj) {\n            obj.callback = null;\n            obj.inflater = null;\n            obj.parent = null;\n            obj.resid = 0;\n            obj.view = null;\n            mRequestPool.release(obj);\n        }\n\n        public void enqueue(InflateRequest request) {\n            try {\n                mQueue.put(request);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(\n                        \"Failed to enqueue async inflate request\", e);\n            }\n        }\n    }\n\n//\u4e3b\u7ebf\u7a0b\u4e2d\n  private Callback mHandlerCallback = new Callback() {\n        @Override\n        public boolean handleMessage(Message msg) {\n            InflateRequest request = (InflateRequest) msg.obj;\n            if (request.view == null) {\n                request.view = mInflater.inflate(\n                        request.resid, request.parent, false);\n            }\n          //\u62ff\u5230View\u540e\u5728onInflateFinished\u4e2d\u8c03\u7528setContentView(View view)\uff1b\n            request.callback.onInflateFinished(\n                    request.view, request.resid, request.parent);\n            mInflateThread.releaseRequest(request);\n            return true;\n        }\n    };\n</code></pre> <p>4.AsyncInflater\u7684\u539f\u7406\u6bd4\u8f83\u7b80\u5355\uff0c\u6ce8\u610f\u4e00\u70b9\u662f\u6709\u53ef\u80fd\u4f1a\u5185\u5b58\u6cc4\u6f0f\uff0c\u56e0\u4e3aInflateThread\u662f\u4e00\u4e2a\u5355\u4f8b\uff0c\u5b83\u4f1a\u6301\u6709Activity\u7684\u5f15\u7528\u3002</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/","title":"17 Jetpacket\u57fa\u7840\u5b66\u4e60","text":""},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#1","title":"1.\u6982\u8ff0","text":"<p>Jetpack \u662f\u4e00\u4e2a\u7531\u591a\u4e2a\u5e93\u7ec4\u6210\u7684\u5957\u4ef6\uff0c\u53ef\u5e2e\u52a9\u5f00\u53d1\u8005\u9075\u5faa\u6700\u4f73\u505a\u6cd5\u3001\u51cf\u5c11\u6837\u677f\u4ee3\u7801\u5e76\u7f16\u5199\u53ef\u5728\u5404\u79cd Android \u7248\u672c\u548c\u8bbe\u5907\u4e2d\u4e00\u81f4\u8fd0\u884c\u7684\u4ee3\u7801\uff0c\u8ba9\u5f00\u53d1\u8005\u53ef\u5c06\u7cbe\u529b\u96c6\u4e2d\u4e8e\u771f\u6b63\u91cd\u8981\u7684\u7f16\u7801\u5de5\u4f5c\u3002</p> <p>\u7531\u4e8eJetpack \u5e93\u5728 <code>androidx</code> \u547d\u540d\u7a7a\u95f4\u4e2d\u53d1\u5e03\uff0c\u56e0\u6b64\u53ea\u8981\u4f7f\u7528\u4e86Androidx,\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528Androidx.</p> <p></p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#2jetpacket","title":"2.JetPacket\u5e93\u6280\u672f\u6574\u7406","text":"\u5e93\u540d \u4f5c\u7528 \u7c7b\u578b WorkManager \u6ee1\u8db3\u60a8\u7684\u540e\u53f0\u8c03\u5ea6\u9700\u6c42\u3002(\u66f4\u65b0) \u67b6\u6784\u7ec4\u4ef6 Room \u5b9e\u73b0\u6570\u636e\u5b58\u50a8\u6301\u4e45\u6027\u3002(\u66f4\u65b0) \u67b6\u6784\u7ec4\u4ef6 Navigation \u7ba1\u7406\u5e94\u7528\u5bfc\u822a\u6d41\u7a0b\u3002\u4e3b\u8981\u9002\u5408Frament\u4e4b\u95f4\u7684\u5207\u6362,\u5e95\u90e8\u5bfc\u822a\u680f\uff0c\u62bd\u5c49\u5bfc\u822a\u680f \u67b6\u6784\u7ec4\u4ef6 CameraX \u6ee1\u8db3\u76f8\u673a\u5e94\u7528\u9700\u6c42 \u76f8\u673a\u7ec4\u4ef6 DataStore \u4ee5\u5f02\u6b65\u3001\u4e00\u81f4\u7684\u4e8b\u52a1\u65b9\u5f0f\u5b58\u50a8\u6570\u636e\uff0c\u514b\u670d\u4e86 SharedPreferences \u7684\u4e00\u4e9b\u7f3a\u70b9 \u67b6\u6784\u7ec4\u4ef6 Lifecycle \u751f\u547d\u5468\u671f\u7684\u7ba1\u7406 \u67b6\u6784\u7ec4\u4ef6 LiveData \u5177\u6709\u751f\u547d\u5468\u671f\u611f\u77e5\u80fd\u529b\u7684\u6570\u636e\u5b58\u50a8\u5668\u7c7b\uff0c\u9700\u8981\u7ed3\u5408ViewModel\u4e00\u8d77\u4f7f\u7528 \u67b6\u6784\u7ec4\u4ef6 ViewModel ViewModel\u662f\u4e00\u79cd\u4e1a\u52a1\u903b\u8f91\u6216\u5c4f\u5e55\u7ea7\u72b6\u6001\u5bb9\u5668\uff0c\u5b83\u7684\u4e3b\u8981\u4f18\u70b9\u662f\uff0c\u5b83\u53ef\u4ee5\u7f13\u5b58\u72b6\u6001\uff0c\u5e76\u53ef\u5728\u914d\u7f6e\u66f4\u6539\u540e\u6301\u4e45\u4fdd\u7559\u76f8\u5e94\u72b6\u6001\u3002 \u67b6\u6784\u7ec4\u4ef6 Data Binding \u6570\u636e\u7ed1\u5b9a\u5e93\u662f\u4e00\u79cd\u652f\u6301\u5e93\uff0c\u501f\u52a9\u8be5\u5e93\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u58f0\u660e\u6027\u683c\u5f0f\uff08\u800c\u975e\u7a0b\u5e8f\u5316\u5730\uff09\u5c06\u5e03\u5c40\u4e2d\u7684\u754c\u9762\u7ec4\u4ef6\u7ed1\u5b9a\u5230\u5e94\u7528\u4e2d\u7684\u6570\u636e\u6e90\u3002\u9700\u8981\u7ed3\u5408ViewModel\u4e00\u8d77\u4f7f\u7528 \u67b6\u6784\u7ec4\u4ef6 Paging RecyclerView \u4e2d\u9010\u6b65\u59a5\u5584\u5730\u52a0\u8f7d\u6570\u636e(\u66f4\u65b0)\uff0c\u5206\u9875 \u67b6\u6784\u7ec4\u4ef6(\u754c\u9762\u5c42\u5e93) Macrobenchmark \u4f18\u5316\u542f\u52a8\u65f6\u95f4 \u6027\u80fd\u7ec4\u4ef6 JankStats \u5206\u6790\u5e94\u7528\u754c\u9762\u7684\u6027\u80fd\u95ee\u9898\uff0c\u5176\u4e2d\u5305\u62ec\u62a5\u544a\u4e22\u5931\u6e32\u67d3\u5e27\u2014\u2014\u901a\u5e38\u88ab\u79f0\u4e3a \"\u5361\u987f (jank)\" \u6027\u80fd\u7ec4\u4ef6 SlidingPaneLayout \u66f4\u65b0\u4e3a\u4f7f\u7528 WindowManager \u7684\u667a\u80fd\u5e03\u5c40 API\uff0c\u4ee5\u907f\u514d\u5185\u5bb9\u88ab\u653e\u7f6e\u4e8e\u88ab\u906e\u6321\u533a\u57df (\u4f8b\u5982\u8de8\u8d8a\u7269\u7406\u94f0\u94fe\u533a\u57df)\uff0c\u62bd\u5c49\u5bfc\u822a\u680f\uff0c\u5b9e\u73b0\u6ed1\u52a8\u7a97\u683c\u754c\u9762\u6a21\u5f0f UI\u7ec4\u4ef6 DragAndDrop \u5b9e\u73b0\u62d6\u653e\u64cd\u4f5c\uff0c\u79fb\u52a8\u81f3\u5176\u4ed6\u5e94\u7528\u6216\u8005\u540c\u4e00\u4e2a\u5e94\u7528\u7684\u5176\u4ed6\u4f4d\u7f6e UI\u7ec4\u4ef6 Ads \u5e7f\u544a\u76f8\u5173\u7684,\u9700\u8981google play service \u5e7f\u544a\u76f8\u5173 Multidex \u89e3\u51b3apk\u53ef\u4ee5\u6709\u591a\u4e2adex,API21\u4ee5\u540e\u9ed8\u8ba4\u542f\u7528 \u57fa\u7840\u7ec4\u4ef6 appcompt \u8ba9\u60a8\u53ef\u4ee5\u5728\u5e73\u53f0\u7684\u65e7\u7248 API \u4e0a\u8bbf\u95ee\u65b0 API\uff08\u5f88\u591a\u90fd\u7b26\u5408 Material Design \u51c6\u5219 UI\u7ec4\u4ef6 AppSearch \u63d0\u4f9b\u4e86\u4e00\u79cd\u65b0\u7684\u5728App\u5e94\u7528\u5185\u641c\u7d22\u7684\u65b9\u5f0f\uff0c\u63d0\u4f9b\u4e86\u65b0\u7684\u5b58\u50a8\u65b9\u5f0f\uff0c\u641c\u7d22\u5feb\uff0c\u591a\u8bed\u8a00\u652f\u6301 \u6570\u636e\u5e93 arch.core \u5176\u4ed6\u67b6\u6784\u4f9d\u8d56\u9879\u7684\u5e2e\u52a9\u7a0b\u5e8f\uff0c\u5305\u62ec\u53ef\u4e0e LiveData \u914d\u5408\u4f7f\u7528\u7684 JUnit \u6d4b\u8bd5\u89c4\u5219\u3002 \u67b6\u6784\u7ec4\u4ef6 Asynclayoutinflater \u5f02\u6b65\u6e32\u67d3\u5e03\u5c40\u4ee5\u907f\u514d\u754c\u9762\u51fa\u73b0\u5361\u987f UI\u7ec4\u4ef6 Autofill \u81ea\u52a8\u586b\u5145\u6846\u67b6 UI\u7ec4\u4ef6 Biometric \u901a\u8fc7\u751f\u7269\u8bc6\u522b\u7279\u5f81\u6216\u8bbe\u5907\u51ed\u636e\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4ee5\u53ca\u6267\u884c\u52a0\u5bc6\u64cd\u4f5c Browser \u5728\u7528\u6237\u7684\u9ed8\u8ba4\u6d4f\u89c8\u5668\u4e2d\u663e\u793a\u7f51\u9875\u3002 Cardview \u5b9e\u73b0\u5361\u7247\u5f0fView UI\u7ec4\u4ef6 Collection \u96c6\u5408\u6846\u67b6\u5e93 Constraintlayout \u76f8\u5bf9\u5e03\u5c40 Concurrent \u4f7f\u7528\u534f\u7a0b\u5c06\u4efb\u52a1\u79fb\u51fa\u4e3b\u7ebf\u7a0b\uff0c\u5e76\u5145\u5206\u5229\u7528 ListenableFuture\u3002 Coordinatorlayout \u534f\u8c03\u5e03\u5c40 Contentpager \u5728\u540e\u53f0\u7ebf\u7a0b\u4e2d\u52a0\u8f7d ContentProvider \u6570\u636e\u5e76\u8fdb\u884c\u5206\u9875\u3002 Cursoradapter Cursoradapter\u4e00\u79cd\u53ef\u4ee5\u63d0\u4f9b\u6807\u9898\u540d\u7684Adapter Documentfile DocumentsProvider\u8bbf\u95ee\u7a0b\u5e8f\u4e2d\u7684\u6587\u6863\uff0c\u53ef\u8ba9\u5b58\u50a8\u670d\u52a1\uff08\u5982 Google \u4e91\u7aef\u786c\u76d8\uff09\u63d0\u4f9b\u5176\u7ba1\u7406\u7684\u6587\u4ef6 Drawerlayout \u6dfb\u52a0\u62bd\u5c49\u5f0f\u5bfc\u822a\u680f Dynamicanimation \u57fa\u4e8e\u7269\u7406\u7279\u6027\u7684\u52a8\u753b\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5f39\u7c27\u7684\u521a\u5ea6\u3001\u963b\u5c3c\u4ee5\u53ca\u6700\u7ec8\u4f4d\u7f6e Emoji2 \u5728Android \u8bbe\u5907\u4e0a\u652f\u6301\u8868\u60c5\u7b26\u53f7 Enterprise \u521b\u5efa\u4f01\u4e1a\u4e13\u7528\u5e94\u7528\u3002 Exifinterface \u8bfb\u53d6\u548c\u5199\u5165\u56fe\u7247\u6587\u4ef6 EXIF\u6807\u8bb0\u3002\uff08EXIF\u52a0\u5165\u4e86\u62cd\u6444\u53c2\u6570\uff09 Android Games \u53ef\u4ee5\u5e2e\u52a9\u5feb\u901f\u5f00\u53d1Android \u6e38\u620f Glance \u4f7f\u7528 <code>Compose</code> \u98ce\u683c\u7684API\u4e3a\u5c0f\u90e8\u4ef6\u6784\u5efa\u5e03\u5c40\u3002 graphics \u5229\u7528\u591a\u4e2a Android \u5e73\u53f0\u7248\u672c\u4e2d\u7684\u56fe\u5f62\u5de5\u5177 Health&amp;&amp;Health Connect \u901a\u8fc7\u5e73\u53f0\u65e0\u5173\u7684\u65b9\u5f0f\u6784\u5efa\u9ad8\u6027\u80fd\u5065\u5eb7\u5e94\u7528\u3002 Heifwriter \u4f7f\u7528 Android \u8bbe\u5907\u4e0a\u53ef\u7528\u7684\u7f16\u89e3\u7801\u5668\uff0c\u4ee5 HEIF \u683c\u5f0f\u5bf9\u56fe\u50cf\u6216\u56fe\u50cf\u96c6\u8fdb\u884c\u7f16\u7801\u3002(HEIF\u4e0d\u4ec5\u53ef\u4ee5\u5b58\u50a8\u9759\u6001\u56fe\u50cf\u548cEXIF\u4fe1\u606f\u5143\u6570\u636e\u7b49\uff0c\u8fd8\u53ef\u4ee5\u5b58\u50a8\u52a8\u753b\u3001\u56fe\u50cf\u5e8f\u5217\u751a\u81f3\u89c6\u9891\u3001\u97f3\u9891\u7b49\u7b49) Hilt \u63d0\u4f9b\u4e86\u81ea\u52a8\u521b\u5efa\u4f9d\u8d56\u6ce8\u5165\u9879\u7684\u529f\u80fd\uff0c\u662fDagger\u7684\u6269\u5c55\u7248\uff0c\u9002\u914d\u4e86Androidx Input \u901a\u8fc7\u9884\u6d4b\u672a\u6765\u7684 MotionEvent \u7f29\u77ed\u8f93\u5165\u4e92\u52a8\u7684\u5ef6\u8fdf\u65f6\u95f4\uff08\u627e\u4e0d\u5230\u76f8\u5173\u7684\u5f00\u53d1\u6587\u6863\uff09 Interpolator \u52a8\u753b\u7684\u63d2\u503c\u5668 JavascriptEngine Android App\u4f18\u5316JavaScript Loader \u52a0\u8f7d\u914d\u7f6e\u53d1\u751f\u53d8\u66f4\u7684\u6570\u636e\uff0cAPI28\u5f03\u7528\uff0c\u5efa\u8bae\u4f7f\u7528 <code>ViewModels</code> \u548c <code>LiveData</code> \u7684\u7ec4\u5408\u6765\u5904\u7406\u52a0\u8f7d\u6570\u636e Localbroadcastmanager \u672c\u5730\u5e7f\u64ad\uff0c\u5efa\u8bae\u4f7f\u7528LiveData Media2 \u591a\u5a92\u4f53\u5e94\u7528\u6846\u67b6 Media3 \u591a\u5a92\u4f53\u5e94\u7528\u6846\u67b6 beta\u7248\u672c Mediarouter \u8fdc\u7a0b\u63a7\u5236\u63a5\u6536\u7aef\u8bbe\u5907\u4e0a\u663e\u793a\u548c\u64ad\u653e\u5a92\u4f53\u5185\u5bb9 Metrics \u8ddf\u8e2a\u548c\u62a5\u544a\u5e94\u7528\u7684\u5404\u79cd\u8fd0\u884c\u65f6\u6307\u6807 Palette \u53ef\u4ee5\u4ece\u4f20\u5165\u7684Bitmap\u63d0\u53d6\u51fa\u4e3b\u9898\u989c\u8272\uff0c\u662f\u4e00\u4e2a\u7c7b\u4f3c\u8c03\u8272\u677f\u7684\u5de5\u5177\u7c7b Preference \u9002\u5408\u6784\u5efa\u8bbe\u7f6e\u9875\uff0c\u63d0\u4f9b\u4e86\u754c\u9762\u548c\u5b58\u50a8\u7684\u5b9e\u73b0 Print \u901a\u8fc7\u60a8\u7684\u5e94\u7528\u6253\u5370\u7167\u7247\u3001\u6587\u6863\u548c\u5176\u4ed6\u56fe\u5f62\u53ca\u56fe\u7247\u3002 privacysandbox-tools \u7528\u4e8e\u6cbb\u7406\u9690\u79c1\u5408\u89c4\u7684\u529f\u80fd\u5e93\uff0c\u4e3b\u8981\u662f\u9488\u5bf9\u4e8eSDK\u7684\u6743\u9650\u548c\u5e7f\u544a\uff0c\u4e0d\u77e5\u56fd\u5185\u5382\u5546\u662f\u5426\u6709 ProfileInstaller \u5e93\u548c\u5e94\u7528\u5b9a\u4e49\u201c\u914d\u7f6e\u6587\u4ef6\u89c4\u5219\u201d\u5e76\u5c06 ART \u914d\u7f6e\u6587\u4ef6\u4fe1\u606f\u4e0e\u4e00\u4e2a APK \u6346\u7ed1\u8d77\u6765\uff0c\u6b64\u5e93\u5c06\u5728\u5e94\u7528\u542f\u52a8\u540e\u5b89\u88c5\u8fd9\u4e9b\u914d\u7f6e\u6587\u4ef6\u3002\u8be5\u5e93\u53ef\u7528\u4e8e\u63d0\u5347\u5e94\u7528\u6027\u80fd\u3002Gradle 7.0\u4e4b\u540e\u624d\u80fd\u7528 Recyclerview \u5728\u60a8\u7684\u754c\u9762\u4e2d\u663e\u793a\u5927\u91cf\u6570\u636e\uff0c\u540c\u65f6\u6700\u5927\u9650\u5ea6\u51cf\u5c11\u5185\u5b58\u7528\u91cf Remotecallback \u521b\u5efa\u4e00\u4e2a\u5c01\u88c5\u5bb9\u5668\uff0c\u4ee5\u4fbf\u5f00\u53d1\u8005\u66f4\u8f7b\u677e\u5730\u63d0\u4f9b PendingIntent\u3002 ResourceInspection \u5728 Android Studio \u7684\u5b9e\u65f6\u5e03\u5c40\u68c0\u67e5\u5668\u4e2d\u663e\u793a\u81ea\u5b9a\u4e49\u89c6\u56fe\u7684\u5c5e\u6027\u3002 Savedstate \u7f16\u5199\u53ef\u63d2\u5165\u7ec4\u4ef6\uff0c\u4ee5\u5728\u8fdb\u7a0b\u7ec8\u6b62\u65f6\u4fdd\u5b58\u754c\u9762\u72b6\u6001\uff0c\u5e76\u5728\u8fdb\u7a0b\u91cd\u542f\u65f6\u6062\u590d\u754c\u9762\u72b6\u6001\u3002\u7c7b\u4f3conSaveInstanceState(),\u7ed3\u5408ViewModel\u4f7f\u7528 security.crypto \u4f7f\u7528\u5bc6\u94a5\u5bf9\u6587\u4ef6\u548csharedpreferences\u8fdb\u884c\u52a0\u5bc6\u3002 ShareTarget \u63d0\u4f9b\u4e86ShortCuts\u4f5c\u4e3ashareTarget\u5411\u540e\u517c\u5bb9\u7684\u80fd\u529b Slice \u5728\u5e94\u7528\u5916\u663e\u793a\u6a21\u677f\u5316\u754c\u9762\u5143\u7d20,\u4e00\u79cd\u754c\u9762\u6a21\u7248 Startup \u5728\u5e94\u7528\u542f\u52a8\u65f6\uff0c\u66f4\u52a0\u9ad8\u6548\u5730\u521d\u59cb\u5316\u7ec4\u4ef6 Swiperefreshlayout google\u63a8\u8350\u7684\u4e0b\u62c9\u5237\u65b0\u63a7\u4ef6 Test Android \u6d4b\u8bd5 test.Uiautomator \u9002\u7528\u4e8e\u8de8\u5e94\u7528\u529f\u80fd\u754c\u9762\u6d4b\u8bd5\u7684\u6846\u67b6 Textclassifier \u6587\u672c\u5206\u7c7b\u5668\uff0c\u901a\u8fc7\u6587\u672c\u5339\u914d\u4ece\u800c\u81ea\u5b9a\u4e49\u5206\u7c7b\u5668 Tracing \u662f\u4e00\u4e2a\u53ef\u5e2e\u52a9\u5c06\u8ddf\u8e2a\u4e8b\u4ef6\u5199\u5165\u7cfb\u7edf\u8ddf\u8e2a\u7f13\u51b2\u533a\u7684\u5e93\u3002\u53ef\u901a\u8fc7 Systrace \u548c Perfetto \u7b49\u5de5\u5177\u76f4\u89c2\u5448\u73b0 Transition \u4e3aView\u7684\u52a8\u4f5c\u6dfb\u52a0\u52a8\u753b\u6548\u679c Vectordrawable \u6e32\u67d3\u77e2\u91cf\u56fe\u5f62\uff0c\u4f7f\u7528xml\u6587\u4ef6\u7ed8\u5236 Versionedparcelable \u63d0\u4f9b\u7a33\u5b9a\u4e14\u7d27\u51d1\u7684\u4e8c\u8fdb\u5236\u5e8f\u5217\u5316\u683c\u5f0f\uff0c\u8be5\u683c\u5f0f\u53ef\u8de8\u8fdb\u7a0b\u4f20\u9012\u6216\u5b89\u5168\u4fdd\u7559\u3002 ViewPager2 \u53ef\u6ed1\u52a8\u7684\u683c\u5f0f\u663e\u793a\u89c6\u56fe\u6216 Fragment\u3002 Webkit Android 5 \u53ca\u66f4\u9ad8\u7248\u672c\u4e0a\u4f7f\u7528\u65b0\u5f0f WebView API\u3002 WindowManager \u521d\u59cb\u4e3a\u53ef\u6298\u53e0\u8bbe\u5907\u8bbe\u8ba1\uff0c\u672a\u6765\u8fd8\u5c06\u652f\u6301\u66f4\u591a\u5c4f\u5e55\u7c7b\u578b\u548c\u7a97\u53e3\u529f\u80fd Jetifier \u4e00\u6b3e\u72ec\u7acb\u5de5\u5177\uff0c\u53ef\u5c06\u67d0\u4e2a\u5e93\u4e2d\u5bf9\u5df2\u5f03\u7528\u652f\u6301\u5e93\u7684\u4f9d\u8d56\u9879\u8fc1\u79fb\u5230\u7b49\u6548\u7684 AndroidX \u4f9d\u8d56\u9879\u3002 <p>\u53ef\u4ee5\u4f7f\u7528\u7684:</p> \u5e93\u540d \u4f5c\u7528 benchmark \u7528\u4e8e\u57fa\u51c6\u6d4b\u8bd5\u3002 JankStats \u5206\u6790\u5e94\u7528\u754c\u9762\u7684\u6027\u80fd\u95ee\u9898\uff0c\u5176\u4e2d\u5305\u62ec\u62a5\u544a\u4e22\u5931\u6e32\u67d3\u5e27\u2014\u2014\u901a\u5e38\u88ab\u79f0\u4e3a \"\u5361\u987f (jank)\" privacysandbox-tools \u8fd0\u884c\u65f6SDk Textclassifier \u6587\u672c\u5206\u7c7b\u5668\uff0c\u901a\u8fc7\u6587\u672c\u5339\u914d\u4ece\u800c\u81ea\u5b9a\u4e49\u5206\u7c7b\u5668 <p>AppSearch</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#3lifecycle-","title":"3.LifeCycle --\u4f7f\u7528\u751f\u547d\u5468\u671f\u611f\u77e5\u578b\u7ec4\u4ef6\u5904\u7406\u751f\u547d\u5468\u671f","text":"<p>\u5b98\u65b9\u6587\u6863</p> <p>\u7528\u6237\u6307\u5357</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#1_1","title":"1.\u6982\u8ff0","text":"<p>\u5728Android 9\u4e4b\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u4f7f\u7528androidx\uff0c\u8be5\u547d\u540d\u7a7a\u95f4\u4e0b\u5305\u542b\u4e86 Android Jetpack \u5e93\uff0cAppCompatActivity\u5df2\u7ecf\u5b9e\u73b0\u4e86LifeCycleOwner,\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528LifeCycle\u7ba1\u7406Activity\u548cFragment\u7684\u751f\u547d\u5468\u671f</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#2","title":"2.\u58f0\u660e\u4f9d\u8d56","text":""},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#3lifecycle","title":"3.LifeCycle\u4e2d\u7684\u7c7b","text":"<ul> <li>Lifecycle</li> <li>DefaultLifecycleObserver</li> <li>LifecycleOwner</li> </ul>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#liyecycle","title":"LiyeCycle","text":"<p><code>Lifecycle</code> \u662f\u4e00\u4e2a\u7c7b\uff0c\u7528\u4e8e\u5b58\u50a8\u6709\u5173\u7ec4\u4ef6\uff08\u5982 Activity \u6216 Fragment\uff09\u7684\u751f\u547d\u5468\u671f\u72b6\u6001\u7684\u4fe1\u606f\uff0c\u5e76\u5141\u8bb8\u5176\u4ed6\u5bf9\u8c61\u89c2\u5bdf\u6b64\u72b6\u6001\u3002</p> <p></p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#defaultlifecycleobserver","title":"DefaultLifecycleObserver","text":"<p>\u7c7b\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0 <code>DefaultLifecycleObserver</code> \u5e76\u66ff\u6362\u76f8\u5e94\u7684\u65b9\u6cd5\uff08\u5982 <code>onCreate</code> \u548c <code>onStart</code> \u7b49\uff09\u6765\u76d1\u63a7\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u72b6\u6001\u3002\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code>Lifecycle</code> \u7c7b\u7684 <code>addObserver()</code> \u65b9\u6cd5\u5e76\u4f20\u9012\u89c2\u5bdf\u5668\u7684\u5b9e\u4f8b\u6765\u6dfb\u52a0\u89c2\u5bdf\u5668\u3002</p> <pre><code>//code example\npublic class MyObserver implements DefaultLifecycleObserver {\n    @Override\n    public void onResume(LifecycleOwner owner) {\n        connect()\n    }\n\n    @Override\n    public void onPause(LifecycleOwner owner) {\n        disconnect()\n    }\n}\n\nmyLifecycleOwner.getLifecycle().addObserver(new MyObserver());\n</code></pre>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#lifecycleowner","title":"LifecycleOwner","text":"<p><code>LifecycleOwner</code> \u662f\u5355\u4e00\u65b9\u6cd5\u63a5\u53e3\uff0c\u8868\u793a\u7c7b\u5177\u6709 <code>Lifecycle</code>\u3002\u5b83\u5177\u6709\u4e00\u79cd\u65b9\u6cd5\uff08\u5373 <code>getLifecycle()</code>\uff09,\u6b64\u63a5\u53e3\u4ece\u5404\u4e2a\u7c7b\uff08\u5982 <code>Fragment</code> \u548c <code>AppCompatActivity</code>\uff09\u62bd\u8c61\u5316 <code>Lifecycle</code> \u7684\u6240\u6709\u6743\uff0c\u5e76\u5141\u8bb8\u7f16\u5199\u4e0e\u8fd9\u4e9b\u7c7b\u642d\u914d\u4f7f\u7528\u7684\u7ec4\u4ef6\u3002\u4efb\u4f55\u81ea\u5b9a\u4e49\u5e94\u7528\u7c7b\u5747\u53ef\u5b9e\u73b0 <code>LifecycleOwner</code> \u63a5\u53e3\u3002</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#lifecycleowner_1","title":"Lifecycleowner\u5141\u8bb8\u67e5\u8be2\u5f53\u524d\u7684\u751f\u547d\u5468\u671f\u72b6\u6001","text":"<pre><code>class MyLocationListener implements DefaultLifecycleObserver {\n    private boolean enabled = false;\n    public MyLocationListener(Context context, Lifecycle lifecycle, Callback callback) {\n       ...\n    }\n\n    @Override\n    public void onStart(LifecycleOwner owner) {\n        if (enabled) {\n           // connect\n        }\n    }\n\n    public void enable() {\n        enabled = true;\n        if (lifecycle.getCurrentState().isAtLeast(STARTED)) {\n            // connect if not connected\n        }\n    }\n\n    @Override\n    public void onStop(LifecycleOwner owner) {\n        // disconnect if connected\n    }\n}\n</code></pre>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#lifecycleowner_2","title":"\u5b9e\u73b0\u81ea\u5b9a\u4e49Lifecycleowner","text":"<p>\u9700\u8981\u4f7f\u7528 LifecycleRegistry \u7c7b\uff0c\u4f46\u9700\u8981\u5c06\u4e8b\u4ef6\u8f6c\u53d1\u5230\u8be5\u7c7b\u3002</p> <pre><code>public class MyActivity extends Activity implements LifecycleOwner {\n    private LifecycleRegistry lifecycleRegistry;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        lifecycleRegistry = new LifecycleRegistry(this);\n        lifecycleRegistry.setCurrentState(Lifecycle.State.CREATED);\n    }\n\n    @Override\n    public void onStart() {\n        super.onStart();\n        lifecycleRegistry.setCurrentState(Lifecycle.State.STARTED);\n    }\n\n    @NonNull\n    @Override\n    public Lifecycle getLifecycle() {\n        return lifecycleRegistry;\n    }\n}\n</code></pre>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#processlifecycleowner","title":"ProcessLifecycleOwner","text":"<p>\u7ba1\u7406\u6574\u4e2a\u5e94\u7528\u8fdb\u7a0b\u7684\u751f\u547d\u5468\u671f</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#4navigation","title":"4.Navigation","text":"<p>\u5bfc\u822a\u7ec4\u4ef6\u662f\u6307\u652f\u6301\u7528\u6237\u5bfc\u822a\u3001\u8fdb\u5165\u548c\u9000\u51fa\u5e94\u7528\u4e2d\u4e0d\u540c\u5185\u5bb9\u7247\u6bb5\u7684\u4ea4\u4e92\u3002</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_1","title":"\u4f18\u52bf","text":"<ul> <li>\u5904\u7406 Fragment \u4e8b\u52a1\u3002</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6b63\u786e\u5904\u7406\u5f80\u8fd4\u64cd\u4f5c\u3002</li> <li>\u4e3a\u52a8\u753b\u548c\u8f6c\u6362\u63d0\u4f9b\u6807\u51c6\u5316\u8d44\u6e90\u3002</li> <li>\u5b9e\u73b0\u548c\u5904\u7406\u6df1\u5c42\u94fe\u63a5\u3002</li> <li>\u5305\u62ec\u5bfc\u822a\u754c\u9762\u6a21\u5f0f\uff08\u4f8b\u5982\u62bd\u5c49\u5f0f\u5bfc\u822a\u680f\u548c\u5e95\u90e8\u5bfc\u822a\uff09\uff0c\u7528\u6237\u53ea\u9700\u5b8c\u6210\u6781\u5c11\u7684\u989d\u5916\u5de5\u4f5c\u3002</li> <li>Safe Args - \u53ef\u5728\u76ee\u6807\u4e4b\u95f4\u5bfc\u822a\u548c\u4f20\u9012\u6570\u636e\u65f6\u63d0\u4f9b\u7c7b\u578b\u5b89\u5168\u7684 Gradle \u63d2\u4ef6\u3002</li> <li><code>ViewModel</code> \u652f\u6301 - \u60a8\u53ef\u4ee5\u5c06 <code>ViewModel</code> \u7684\u8303\u56f4\u9650\u5b9a\u4e3a\u5bfc\u822a\u56fe\uff0c\u4ee5\u5728\u56fe\u8868\u7684\u76ee\u6807\u4e4b\u95f4\u5171\u4eab\u4e0e\u754c\u9762\u76f8\u5173\u7684\u6570\u636e\u3002</li> </ul>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_2","title":"\u5173\u952e\u90e8\u5206","text":"<ul> <li>\u5bfc\u822a\u56fe\uff1a\u5728\u4e00\u4e2a\u96c6\u4e2d\u4f4d\u7f6e\u5305\u542b\u6240\u6709\u5bfc\u822a\u76f8\u5173\u4fe1\u606f\u7684 XML \u8d44\u6e90\u3002\u8fd9\u5305\u62ec\u5e94\u7528\u5185\u6240\u6709\u5355\u4e2a\u5185\u5bb9\u533a\u57df\uff08\u79f0\u4e3a\u76ee\u6807\uff09\u4ee5\u53ca\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u5e94\u7528\u83b7\u53d6\u7684\u53ef\u80fd\u8def\u5f84\u3002</li> <li><code>NavHost</code>\uff1a\u663e\u793a\u5bfc\u822a\u56fe\u4e2d\u76ee\u6807\u7684\u7a7a\u767d\u5bb9\u5668\u3002\u5bfc\u822a\u7ec4\u4ef6\u5305\u542b\u4e00\u4e2a\u9ed8\u8ba4 <code>NavHost</code> \u5b9e\u73b0 (<code>NavHostFragment</code>)\uff0c\u53ef\u663e\u793a Fragment \u76ee\u6807\u3002</li> <li><code>NavController</code>\uff1a\u5728 <code>NavHost</code> \u4e2d\u7ba1\u7406\u5e94\u7528\u5bfc\u822a\u7684\u5bf9\u8c61\u3002\u5f53\u7528\u6237\u5728\u6574\u4e2a\u5e94\u7528\u4e2d\u79fb\u52a8\u65f6\uff0c<code>NavController</code> \u4f1a\u5b89\u6392 <code>NavHost</code> \u4e2d\u76ee\u6807\u5185\u5bb9\u7684\u4ea4\u6362\u3002</li> </ul>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_3","title":"\u5b9e\u4f8b\u5b9e\u73b0","text":"<p>1.\u5efa\u7acbnav xml</p> <p>\u5728res\u76ee\u5f55\u4e0b\u65b0\u5efaAndroid Resources file,</p> <p>\u3010File Name\u3011:nav_splash_navigation</p> <p>\u3010Resource Name\u3011:Navigation</p> <p></p> <p>\u70b9\u51fb\u786e\u5b9a\u5219\u4f1a\u65b0\u5efa\u3002</p> <p>2.\u5efa\u7acbNavHostFragment</p> <pre><code>  &lt;fragment\n        android:id=\"@+id/welcome_fragment\"\n        android:name=\"androidx.navigation.fragment.NavHostFragment\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:defaultNavHost=\"true\"\n        app:navGraph=\"@navigation/nav_splash_navigation\"/&gt;\n</code></pre> <ul> <li><code>android:name</code> \u5c5e\u6027\u5305\u542b <code>NavHost</code> \u5b9e\u73b0\u7684\u7c7b\u540d\u79f0\u3002</li> <li><code>app:navGraph</code> \u5c5e\u6027\u5c06 <code>NavHostFragment</code> \u4e0e\u5bfc\u822a\u56fe\u76f8\u5173\u8054\u3002\u5bfc\u822a\u56fe\u4f1a\u5728\u6b64 <code>NavHostFragment</code> \u4e2d\u6307\u5b9a\u7528\u6237\u53ef\u4ee5\u5bfc\u822a\u5230\u7684\u6240\u6709\u76ee\u7684\u5730\u3002</li> <li><code>app:defaultNavHost=\"true\"</code> \u5c5e\u6027\u786e\u4fdd\u60a8\u7684 <code>NavHostFragment</code> \u4f1a\u62e6\u622a\u7cfb\u7edf\u8fd4\u56de\u6309\u94ae\u3002\u8bf7\u6ce8\u610f\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u9ed8\u8ba4 <code>NavHost</code>\u3002\u5982\u679c\u540c\u4e00\u5e03\u5c40\uff08\u4f8b\u5982\uff0c\u53cc\u7a97\u683c\u5e03\u5c40\uff09\u4e2d\u6709\u591a\u4e2a\u5bbf\u4e3b\uff0c\u8bf7\u52a1\u5fc5\u4ec5\u6307\u5b9a\u4e00\u4e2a\u9ed8\u8ba4 <code>NavHost</code>\u3002</li> </ul> <p>3.\u5efa\u7acbDestination</p> <pre><code>&lt;navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/nav_splash_navigation\"\n    app:startDestination=\"@id/welcomeFragment\"&gt;\n    &lt;fragment\n        android:id=\"@+id/loginFragment\"\n        android:name=\"com.example.testjetpack.LoginFragment\"\n        android:label=\"fragment_login\"\n        tools:layout=\"@layout/fragment_login\" &gt;\n    &lt;/fragment&gt;\n    &lt;fragment\n        android:id=\"@+id/registerFragment\"\n        android:name=\"com.example.testjetpack.RegisterFragment\"\n        android:label=\"fragment_register\"\n        tools:layout=\"@layout/fragment_register\" &gt;\n        &lt;action\n            android:id=\"@+id/action_registerFragment_to_loginFragment\"\n            app:destination=\"@id/loginFragment\" /&gt;\n    &lt;/fragment&gt;\n    &lt;fragment\n        android:id=\"@+id/welcomeFragment\"\n        android:name=\"com.example.testjetpack.WelcomeFragment\"\n        android:label=\"fragment_welcome\"\n        tools:layout=\"@layout/fragment_welcome\" &gt;\n        &lt;action\n            android:id=\"@+id/action_welcomeFragment_to_registerFragment\"\n            app:destination=\"@id/registerFragment\" /&gt;\n        &lt;action\n            android:id=\"@+id/action_welcomeFragment_to_loginFragment\"\n            app:destination=\"@id/loginFragment\" /&gt;\n    &lt;/fragment&gt;\n\n&lt;/navigation&gt;\n</code></pre> <ul> <li>app:startDestination \uff1a\u6307\u9996\u4e2a\u5bfc\u822a\u7684\u76ee\u7684\u5730</li> </ul> <p>\u901a\u8fc7\u56fe\u5f62\u5316\u754c\u9762\uff0c\u624b\u52a8\u94fe\u63a5\u5373\u53ef\u751f\u6210\u6b64\u4ee3\u7801\u3002</p> <p></p> <p>4.\u4f7f\u7528NavigationController\u5b9e\u73b0\u8df3\u8f6c\u3002</p> <pre><code> Button button = view.findViewById(R.id.bt_navlogin);\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Navigation.findNavController(view).navigate(R.id.action_welcomeFragment_to_loginFragment);\n            }\n        });\n</code></pre>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#5workmanager","title":"5.WorkManager","text":"<p>WorkManager \u662f\u9002\u5408\u7528\u4e8e\u6301\u4e45\u6027\u5de5\u4f5c\u7684\u63a8\u8350\u89e3\u51b3\u65b9\u6848\u3002\u5982\u679c\u5de5\u4f5c\u59cb\u7ec8\u8981\u901a\u8fc7\u5e94\u7528\u91cd\u542f\u548c\u7cfb\u7edf\u91cd\u65b0\u542f\u52a8\u6765\u8c03\u5ea6\uff0c\u4fbf\u662f\u6301\u4e45\u6027\u7684\u5de5\u4f5c\u3002\u7531\u4e8e\u5927\u591a\u6570\u540e\u53f0\u5904\u7406\u64cd\u4f5c\u90fd\u662f\u901a\u8fc7\u6301\u4e45\u6027\u5de5\u4f5c\u5b8c\u6210\u7684\uff0c\u56e0\u6b64 WorkManager \u662f\u9002\u7528\u4e8e\u540e\u53f0\u5904\u7406\u64cd\u4f5c\u7684\u4e3b\u8981\u63a8\u8350 API\u3002</p> <p>\u88ab\u7cfb\u7edf\u6761\u4ef6\u89e6\u53d1\u7684\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528workManager.</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#6datastore","title":"6.DataStore","text":""},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_4","title":"\u540d\u8bcd\u89e3\u91ca","text":"<p><code>Protocol buffers</code>:\u662fgoogle \u65e0\u5173\u8bed\u8a00\uff0c\u65e0\u5173\u5e73\u53f0\uff0c\u66f4\u5c0f\uff0c\u66f4\u5feb\uff0c\u66f4\u7b80\u5355\u7684\u7528\u6765\u5e8f\u5217\u5316\u7ed3\u6784\u6570\u636e\u7684\u53ef\u6269\u5c55\u673a\u5236\u2014\u2014Think XML\u3002</p> <p><code>\u534f\u7a0b</code>\uff1a\u662f\u4e00\u79cd\u5e76\u53d1\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u7b80\u5316\u4e86\u5f02\u6b65\u6267\u884c\u7684\u4ee3\u7801\u3002</p> <ul> <li>\u5904\u7406\u8017\u65f6\u4efb\u52a1 (<code>Long running tasks</code>)\uff0c\u8fd9\u79cd\u4efb\u52a1\u5e38\u5e38\u4f1a\u963b\u585e\u4f4f\u4e3b\u7ebf\u7a0b\uff1b</li> <li>\u4fdd\u8bc1\u4e3b\u7ebf\u7a0b\u5b89\u5168 (<code>Main-safety</code>) \uff0c\u5373\u786e\u4fdd\u5b89\u5168\u5730\u4ece\u4e3b\u7ebf\u7a0b\u8c03\u7528\u4efb\u4f55 suspend \u51fd\u6570\u3002</li> </ul>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#datastore","title":"DataStore \u7c7b\u578b","text":""},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#7appsearch","title":"7.AppSearch","text":"<p>AppSearch\u6846\u67b6</p> <p></p> <p>AppSearch\u5b9e\u4f8b</p> <pre><code>//create document entity\n\n//openSechema\n//set a scheme\n//put a document\n//search\n//remove a document\n//presist a disk\n</code></pre> <p>\u9700\u8981compileSdk = 33</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#8room","title":"8.Room","text":""},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_5","title":"\u4e3b\u8981\u7ec4\u4ef6","text":"<ul> <li>\u6570\u636e\u5e93\u7c7b\uff0c\u7528\u4e8e\u4fdd\u5b58\u6570\u636e\u5e93\u5e76\u4f5c\u4e3a\u5e94\u7528\u6301\u4e45\u6027\u6570\u636e\u5e95\u5c42\u8fde\u63a5\u7684\u4e3b\u8981\u8bbf\u95ee\u70b9\u3002</li> <li>\u6570\u636e\u5b9e\u4f53\uff0c\u7528\u4e8e\u8868\u793a\u5e94\u7528\u7684\u6570\u636e\u5e93\u4e2d\u7684\u8868\u3002</li> <li>\u6570\u636e\u8bbf\u95ee\u5bf9\u8c61 (DAO)\uff0c\u63d0\u4f9b\u60a8\u7684\u5e94\u7528\u53ef\u7528\u4e8e\u67e5\u8be2\u3001\u66f4\u65b0\u3001\u63d2\u5165\u548c\u5220\u9664\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u7684\u65b9\u6cd5\u3002</li> </ul> <p>\u6570\u636e\u5e93\u7c7b\u4e3a\u5e94\u7528\u63d0\u4f9b\u4e0e\u8be5\u6570\u636e\u5e93\u5173\u8054\u7684 DAO \u7684\u5b9e\u4f8b\u3002\u53cd\u8fc7\u6765\uff0c\u5e94\u7528\u53ef\u4ee5\u4f7f\u7528 DAO \u4ece\u6570\u636e\u5e93\u4e2d\u68c0\u7d22\u6570\u636e\uff0c\u4f5c\u4e3a\u5173\u8054\u7684\u6570\u636e\u5b9e\u4f53\u5bf9\u8c61\u7684\u5b9e\u4f8b\u3002\u6b64\u5916\uff0c\u5e94\u7528\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5b9a\u4e49\u7684\u6570\u636e\u5b9e\u4f53\u66f4\u65b0\u76f8\u5e94\u8868\u4e2d\u7684\u884c\uff0c\u6216\u8005\u521b\u5efa\u65b0\u884c\u4f9b\u63d2\u5165\u3002</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_6","title":"\u914d\u7f6e\u7f16\u8bd1\u5668\u9009\u9879","text":"<pre><code>android {\n    ...\n    defaultConfig {\n        ...\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments += [\n                    \"room.schemaLocation\":\"$projectDir/schemas\".toString(),\n                    \"room.incremental\":\"true\",\n                    \"room.expandProjection\":\"true\"]\n            }\n        }\n    }\n}\n</code></pre> <ul> <li>room.schemaLocation \u5bfc\u51fa\u6570\u636e\u5e93\u7ed3\u6784\u5230json\u6587\u4ef6\u4e2d\uff08\u5fc5\u987b\u586b\u5199\uff0c\u5426\u5219exportSchema\u9700\u8981\u8bbe\u7f6e\u4e3afalse\uff09</li> <li>room.schemaLocation \u662f\u5426\u589e\u91cf\u7f16\u8bd1</li> </ul>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_7","title":"\u5b9e\u4f8b\u5b9e\u73b0\u6b65\u9aa4","text":"<p>1.\u5efa\u7acb\u6570\u636e\u8868\u7684\u5b9e\u4f53</p> <pre><code>/**\n * \u5efa\u7acb\u6570\u636e\u8868\u7684\u5b9e\u4f53\n */\n@Fts4\n@Entity(tableName = \"users\",indices = {@Index(value = {\"first_name\",\"last_name\"},unique = true)})\npublic class User {\n    @PrimaryKey\n    public int id;\n    @ColumnInfo(name = \"first_name\")\n    public String firstName;\n    @ColumnInfo(name = \"last_name\")\n    public String lastName;\n    @ColumnInfo(name = \"user_address\")\n    public String address;\n    @ColumnInfo(name = \"user_age\")\n    public int age;\n}\n</code></pre> <p>2.\u5efa\u7acb\u6570\u636e\u8bbf\u95ee\u5bf9\u8c61Dao</p> <pre><code>@Dao\npublic interface UserDao {\n    @Insert\n    void insertAll(User ...users);\n    @Delete\n    void delete(User user);\n    @Update\n    void update(User ...users);\n    @Query(\"SELECT * FROM users\")\n    List&lt;User&gt; queryAll();\n}\n\n</code></pre> <p>3.\u5efa\u7acb\u6570\u636e\u5e93</p> <pre><code>@Database(entities = {User.class},version = 1)\npublic abstract class AppDataBase extends RoomDatabase {\n    public abstract  UserDao userDao();\n}\n\n</code></pre> <p>4.\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u8868\u7684\u589e\u5220\u6539\u67e5</p> <pre><code>//\u9700\u8981\u5728\u5f02\u6b65\u4e2d\u8fdb\u884c\nmdb = Room.databaseBuilder(getApplicationContext(),AppDataBase.class,\"database-name\").build();\n        if (mdb != null) {\n            mdao = mdb.userDao();\n        }\nmdao.insertAll(new User(\"ZHANG\",\"Robin\",\"\u5317\u4eac\",15));\n</code></pre> <p>\u9047\u5230\u7684\u95ee\u9898</p> <p>1.Schema export directory is not provided to the annotation processor so we cannot export the schema. You can either provide <code>room.schemaLocation</code> annotation processor argument OR set exportSchema to false.</p> <p>\u95ee\u9898\u539f\u56e0\uff1aRoom\u4f1a\u5bfc\u51fa\u6570\u636e\u5e93\u7684\u67b6\u6784\u5230json\u6587\u4ef6\u4e2d</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <p>1.\u589e\u52a0\u7f16\u8bd1\u5668\u9009\u9879</p> <pre><code>javaCompileOptions {\n            annotationProcessorOptions {\n                arguments += [\n                    \"room.schemaLocation\":\"$projectDir/schemas\".toString(),//\u5bfc\u51fa\u6570\u636e\u5e93\u67b6\u6784\u7684\u5730\u5740\n                   ...\n            }\n        }\n</code></pre> <p>2.\u6570\u636e\u5e93\u6dfb\u52a0\u6ce8\u89e3\u5c5e\u6027 exportSchema = false.</p> <pre><code>@Database(entities = {User.class},version = 1,exportSchema = false)\npublic abstract class AppDataBase extends RoomDatabase {\n    public abstract  UserDao userDao();\n}\n</code></pre>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#9textclassifier","title":"9.TextClassifier","text":"<p>\u6ce8\u610f\uff1a2022\u5e743\u6708\u4efdandroidx.TextClassification\u5df2\u5168\u90e8\u88ab\u5f03\u7528\uff0c\u6539\u7528android.view.textclassifier.TextClassification</p> <p>\u6587\u672c\u5206\u7c7b\u5668\u3002</p> <p>\u529f\u80fd\u4ecb\u7ecd\uff1a</p> <p>\u901a\u8fc7\u5382\u5546\u63d0\u524d\u51c6\u5907\u597d\u7684\u673a\u5668\u5b66\u4e60\u6a21\u578b\uff0c\u53ef\u4ee5\u5339\u914d\u9700\u8981\u7528\u5230\u7684\u6587\u672c\uff0c\u63d0\u4f9b\u76f8\u5e94\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u53d1\u90ae\u4ef6\uff0c\u6253\u5f00\u94fe\u63a5\u3002</p> <p>\u53ef\u4ee5\u5b9e\u73b0\u7684\u573a\u666f\uff1a</p> <p>TextView,WebView,\u81ea\u5b9a\u4e49View</p> <p>\u5177\u4f53\u4f7f\u7528\u573a\u666f,\u7b49\u6709\u7a7a\u6574\u7406</p> <p>1.TextView\u4e2d\u4f7f\u7528</p> <pre><code>public class TextClassifierActivity extends AppCompatActivity {\n\n    private static final String TAG = \"TextClassifierActivity_test\";\n\n    private String emailText = \"dummy@email.com\";\n    private String urlText = \"https://blog.stylingandroid.com\";\n    private String  hybridText = \"Email:\"+emailText;\n\n    private TextClassificationManager manager;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_text_classifier);\n        classfier();\n    }\n\n    private void classfier(){\n        ThreadHelper.getThreadPool().execute(new Runnable() {\n            @Override\n            public void run() {\n                manager = (TextClassificationManager) getSystemService(Context.TEXT_CLASSIFICATION_SERVICE);\n                TextClassifier classifier = manager.getTextClassifier();\n                TextClassification emailClassfication = classifier.classifyText(emailText,0,emailText.length(), LocaleList.getDefault());\n                Log.d(TAG, \"run: \"+ emailClassfication);\n                TextClassification urlClassfication = classifier.classifyText(urlText,0,urlText.length(), LocaleList.getDefault());\n                Log.d(TAG, \"run: \"+ urlClassfication);\n                TextSelection suggestions = classifier.suggestSelection(hybridText,10,11, LocaleList.getDefault());\n                Log.d(TAG, \"run: \"+ suggestions);\n            }\n        });\n    }\n  //xml\u6ce8\u610f\u8fd9\u4e2a\u5c5e\u6027\n   android:textIsSelectable=\"true\"\n</code></pre> <p>2.\u81ea\u5b9a\u4e49TextClassifier</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#10jankstats","title":"10.JankStats\u2014\u2014\u5361\u987f","text":"<p>https://developer.android.google.cn/studio/profile/jankstats?hl=zh_cn</p> <p>\u9700\u8981compile sdk = 32</p> <ul> <li><code>JankStats</code> \u5e93\u63d0\u4f9b\u4e86\u5728\u8fd0\u884c\u65f6\u60a8\u7684\u5e94\u7528\u4e2d\u68c0\u6d4b\u548c\u63a5\u6536\u56de\u8c03\u7684\u529f\u80fd\uff0c\u8fd9\u6709\u52a9\u4e8e\u53d1\u73b0\u5b9e\u9645\u6027\u80fd\u95ee\u9898\u3002</li> <li><code>JankStats</code> \u4e0e API \u7ed3\u5408\u4f7f\u7528\uff0c\u4f7f\u60a8\u80fd\u591f\u8f7b\u677e\u6ce8\u5165\u6709\u5173\u754c\u9762\u72b6\u6001\u7684\u4fe1\u606f\uff0c\u5e76\u8ddf\u8e2a\u548c\u62a5\u544a\u6bcf\u5e27\u6027\u80fd\uff0c\u8ba9\u5f00\u53d1\u8005\u4e86\u89e3\u7684\u4e0d\u662f\u5e94\u7528\u662f\u5426\u5b58\u5728\u6027\u80fd\u95ee\u9898\uff0c\u800c\u662f\u53d1\u751f\u6027\u80fd\u95ee\u9898\u7684\u65f6\u95f4\u548c\u539f\u56e0\u3002</li> </ul> <p>\u4e3b\u8981\u4e24\u4e2a\u529f\u80fd\u4f5c\u4e3a\u4f18\u52bf\uff1a</p> <p>1.\u5361\u987f\u5224\u65ad\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u4f1a\u5c06\u5361\u987f\u5b9a\u4e49\u4e3a\u5448\u73b0\u5e27\u7684\u7528\u65f6\u4e3a\u5f53\u524d\u5237\u65b0\u7387\u4e24\u500d\u7684\u60c5\u51b5\uff0c\u4f7f\u7528 <code>jankHeuristicMultiplier</code> \u5c5e\u6027\u5207\u6362\u5361\u987f\u7b97\u6cd5\u3002</p> <p>2.\u754c\u9762\u72b6\u6001\uff1a\u9700\u8981\u624b\u52a8\u6dfb\u52a0metricsStateHolder\u6765\u663e\u793a\u754c\u9762\u72b6\u6001\u3002</p> <p>\u76d1\u6d4b\u540e\u4e3b\u8981\u7684\u8fd4\u56de\u4fe1\u606f\uff1a</p> <ul> <li>\u5e27\u5f00\u59cb\u65f6\u95f4</li> <li>\u65f6\u957f\u503c</li> <li>\u5e27\u662f\u5426\u5e94\u88ab\u89c6\u4e3a\u5361\u987f</li> <li>\u4e00\u7ec4\u5b57\u7b26\u4e32\u5bf9\uff0c\u5176\u4e2d\u5305\u542b\u5448\u73b0\u5e27\u671f\u95f4\u5e94\u7528\u72b6\u6001\u7684\u76f8\u5173\u4fe1\u606f</li> </ul> <p>\u4f7f\u7528\u6848\u4f8b</p> <pre><code> //\u5b9a\u4e49JankStats\nprivate JankStats jankStats;\n\n//\u8bbe\u7f6e\u56de\u8c03\n    private JankStats.OnFrameListener  mFrameListener = new JankStats.OnFrameListener() {\n        @Override\n        public void onFrame(@NonNull FrameData frameData) {\n            Log.d(TAG, \"onFrame: \"+ frameData.toString());\n        }\n    };\nvoid onCreate(Bundle savedInstanceState){\n  //\u521b\u5efaJankStatsd\u5bf9\u8c61\n  jankStats = JankStats.createAndTrack(getWindow(), mFrameListener);\n}\n\n//metricsStateHolder\u6dfb\u52a0\u754c\u9762\u72b6\u6001\nmRecyclerView.addOnScrollListener(new RecyclerView.OnScrollListener() {\n  @Override\n  public void onScrollStateChanged(@NonNull RecyclerView recyclerView, int newState) {\n    super.onScrollStateChanged(recyclerView, newState);\n    PerformanceMetricsState.Holder metricsStateHolder =  PerformanceMetricsState.getHolderForHierarchy(recyclerView);\n    metricsStateHolder.getState().putState(\"onScrollStateChanged\",\"RecyclerView:\"+newState);\n  }\n\n  @Override\n  public void onScrolled(@NonNull RecyclerView recyclerView, int dx, int dy) {\n    super.onScrolled(recyclerView, dx, dy);\n    PerformanceMetricsState.Holder metricsStateHolder =  PerformanceMetricsState.getHolderForHierarchy(recyclerView);\n    metricsStateHolder.getState().putState(\"onScrolled\",\"RecyclerView\");\n  }\n});\n\nvoid onResume(){\n  if (jankStats != null) {\n    //\u5f00\u542f\n    jankStats.setTrackingEnabled(true);\n  }\n}\nvoid onPause(){\n  if (jankStats != null) {\n    //\u5173\u95ed\n    jankStats.setTrackingEnabled(false);\n  }\n}\n</code></pre>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#11privacysandbox","title":"11.privacysandbox","text":"<p>\u8bbe\u8ba1\u6587\u6863:https://developer.android.google.cn/design-for-safety/privacy-sandbox/attribution</p> <p>\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u4e09\u4e2a\u5e93\uff1a</p> <ul> <li>privacysandbox ads</li> <li>privacysandbox sdkruntime</li> <li>privacysandbox-tools</li> </ul> <p>\u4e3b\u8981\u529f\u80fd:\u4e3b\u8981\u662f\u9488\u5bf9\u4e8e\u5e7f\u544a\u7684\u7528\u6237\u9690\u79c1\u65b9\u6848\u3002</p> <ul> <li>SDK\u8fd0\u884c\u65f6:\u4e3aSDK\u660e\u786e\u5b9a\u4e49\u7684\u6743\u9650\u548c\u6570\u636e\u8bbf\u95ee\u6743\uff0c\u4e0d\u9002\u5408\u9700\u8981\u4e0e\u4e3b\u5e94\u7528\u8fdb\u884c\u5b9e\u65f6\u901a\u4fe1\u6216\u9ad8\u541e\u5410\u91cf\u901a\u4fe1\u7684 SDK\u3002</li> <li>\u9690\u79c1\u4fdd\u62a4API:\u90fd\u662f\u9488\u5bf9\u5e7f\u544a\u7528\u6237\u4e1a\u52a1\u7684\u9690\u79c1\u6765\u7684\u3002\u6682\u65f6\u4f7f\u7528\u4e0d\u5230</li> <li>Topics:\u5f15\u5165\u4e86\u4e00\u79cd\u6839\u636e\u5e94\u7528\u5f00\u53d1\u8005\u5b9a\u4e49\u7684\u201c\u81ea\u5b9a\u4e49\u53d7\u4f17\u7fa4\u4f53\u201d\u4ee5\u53ca\u5e94\u7528\u5185\u7684\u4e92\u52a8\u6765\u5c55\u793a\u5e7f\u544a\u7684\u65b0\u65b9\u5f0f\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u5c06\u8fd9\u4e9b\u4fe1\u606f\u548c\u5173\u8054\u7684\u5e7f\u544a\u5b58\u50a8\u5728\u672c\u5730\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u6846\u67b6\u6765\u7f16\u6392\u5e7f\u544a\u9009\u62e9\u5de5\u4f5c\u6d41\u3002</li> <li>FLEDGeD on Android\uff1a\u5f15\u5165\u4e86\u4e00\u79cd\u6839\u636e\u5e94\u7528\u5f00\u53d1\u8005\u5b9a\u4e49\u7684\u201c\u81ea\u5b9a\u4e49\u53d7\u4f17\u7fa4\u4f53\u201d\u4ee5\u53ca\u5e94\u7528\u5185\u7684\u4e92\u52a8\u6765\u5c55\u793a\u5e7f\u544a\u7684\u65b0\u65b9\u5f0f\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u5c06\u8fd9\u4e9b\u4fe1\u606f\u548c\u5173\u8054\u7684\u5e7f\u544a\u5b58\u50a8\u5728\u672c\u5730\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u6846\u67b6\u6765\u7f16\u6392\u5e7f\u544a\u9009\u62e9\u5de5\u4f5c\u6d41\u3002</li> <li>Attribution Reporting \u652f\u6301\u8f6c\u5316\u8861\u91cf\u3001\u673a\u5668\u5b66\u4e60\u4f18\u5316\u7528\u4f8b\uff08\u4f8b\u5982\u9884\u6d4b\u8f6c\u5316\u7387\u6a21\u578b\u6784\u5efa\uff09\u548c\u65e0\u6548\u6d3b\u52a8\u68c0\u6d4b\uff0c\u4f18\u5316\u5e7f\u544a\u7684\u5c55\u793a\u6b64\u4e8b\u6b21\u6570\u548c\u65e0\u6548\u5e7f\u544a\u7684\u5c55\u793a\u6b21\u6570\u3002</li> </ul>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#sdk","title":"SDK \u8fd0\u884c\u65f6\u5f00\u53d1\u8005\u6307\u5357","text":"<ul> <li>\u73af\u5883\u51c6\u5907</li> </ul> <p>\u9700\u8981\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684 Canary \u7248 Android Studio,\u8bbe\u7f6e\u8bbe\u7f6e\u652f\u6301 Privacy Sandbox on Android \u7684\u6a21\u62df\u5668\u3002</p> <ul> <li> <p>\u521b\u5efaSDK</p> </li> <li> <p>\u6743\u9650</p> <p>\u63d0\u4f9b\u4e00\u4e9b\u9ed8\u8ba4\u7684\u6743\u9650\uff0c\u800c\u4e0d\u662f\u4f7f\u7528App\u7684\u6743\u9650\u3002</p> </li> <li> <p>\u901a\u4fe1</p> <ul> <li>\u4ece\u5e94\u7528\u5230Sdk</li> <li>\u4eceSdk\u5230Sdk</li> </ul> </li> <li> <p>\u5b58\u50a8\u7a7a\u95f4</p> <p>\u4f7f\u7528SDK\u5185\u90e8\u5b58\u50a8\u7a7a\u95f4\uff0c\u4e0d\u80fd\u4f7f\u7528\u5e94\u7528\u7684\u5185\u90e8\u5b58\u50a8\u7a7a\u95f4\uff0cSDK\u5b58\u50a8\u7a7a\u95f4\u5c06\u6301\u4e45\u4fdd\u7559\u3002</p> <p>\u4e0d\u652f\u6301\u4f7f\u7528\u5916\u90e8\u5b58\u50a8\u7a7a\u95f4\uff0c</p> </li> <li> <p>\u53ea\u80fd\u8bfb\u53d6SharedPreference\uff0c\u4e0d\u80fd\u5199\u5165</p> </li> </ul>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#12benchmark","title":"12.benchmark","text":"<p>\u53ef\u4ee5\u4f7f\u7528Android Studio\u5bf9Android\u539f\u751f\u4ee3\u7801\u8fdb\u884c\u57fa\u51c6\u6d4b\u8bd5\uff0c\u6d4b\u91cf\u4ee3\u7801\u6027\u80fd.</p> Macrobenchmark Microbenchmark \u51fd\u6570 \u6d4b\u91cf\u9ad8\u7ea7\u522b\u5165\u53e3\u70b9\u6216\u4ea4\u4e92\uff08\u4f8b\u5982\uff0cactivity \u542f\u52a8\u6216\u5217\u8868\u6eda\u52a8\uff09 \u6d4b\u91cf\u5404\u4e2a\u51fd\u6570 \u8303\u56f4 \u5bf9\u6574\u4e2a\u5e94\u7528\u8fdb\u884c\u8fdb\u7a0b\u5916\u6d4b\u8bd5 \u5bf9 CPU \u5de5\u4f5c\u60c5\u51b5\u8fdb\u884c\u8fdb\u7a0b\u5185\u6d4b\u8bd5 \u901f\u5ea6 \u8fed\u4ee3\u901f\u5ea6\u4e2d\u7b49\uff08\u53ef\u80fd\u8d85\u8fc7 1 \u5206\u949f\uff09 \u8fed\u4ee3\u901f\u5ea6\u8f83\u5feb\uff08\u901a\u5e38\u4e0d\u5230 10 \u79d2\uff09 \u8ddf\u8e2a \u7ed3\u679c\u5305\u542b\u6027\u80fd\u5206\u6790\u8f68\u8ff9 \u53ef\u9009\u7684\u65b9\u6cd5\u91c7\u6837\u548c\u8ddf\u8e2a \u6700\u4f4e API \u7248\u672c 23 14"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_8","title":"\u57fa\u51c6\u6587\u4ef6","text":"<p>\u57fa\u51c6\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u907f\u514d\u5bf9\u5305\u542b\u7684\u4ee3\u7801\u8def\u5f84\u6267\u884c\u89e3\u8bd1\u548c\u5373\u65f6 (JIT) \u7f16\u8bd1\u6b65\u9aa4\uff0c\u4ece\u800c\u8ba9\u4ee3\u7801\u6267\u884c\u901f\u5ea6\u4ece\u9996\u6b21\u542f\u52a8\u5f00\u59cb\u63d0\u9ad8\u7ea6 30%\u3002</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#microbenchmark","title":"Microbenchmark(\u5fae\u57fa\u51c6)","text":"<p>Microbenchmark \u6700\u9002\u7528\u4e8e\u5e94\u7528\u4e2d\u9891\u7e41\u8fd0\u884c\u7684 CPU \u5de5\u4f5c\uff08\u4e5f\u79f0\u4e3a\u70ed\u4ee3\u7801\u8def\u5f84\uff09\uff0c\u5178\u578b\u4f8b\u5b50\u5305\u62ec\u4e00\u6b21\u663e\u793a\u4e00\u9879\u7684 <code>RecyclerView</code> \u6eda\u52a8\u3001\u6570\u636e\u8f6c\u6362/\u5904\u7406\u4ee5\u53ca\u53cd\u590d\u4f7f\u7528\u7684\u4ee3\u7801\u3002</p> <p>\u57fa\u51c6\u5206\u6790\u7684\u4e3b\u8981\u76ee\u6807\uff1a</p> <ul> <li>MethodTracing</li> </ul> <p>\u65b9\u6cd5\u8ddf\u8e2a\uff0c\u6bcf\u79cd\u65b9\u6cd5\u8fdb\u5165\u548c\u9000\u51fa\u7684\u5f00\u9500</p> <ul> <li>StackSampling</li> </ul> <p>\u5806\u6808\u91c7\u6837</p> <p>\u7f16\u5199\u57fa\u51c6</p> <p>\u8fd9\u4e2a\u9700\u8981\u624b\u52a8\u53bb\u5199\u6bcf\u4e2a\u65b9\u6cd5\u7684\u57fa\u51c6\uff0c\u5982\u9700\u521b\u5efa\u57fa\u51c6\uff0c\u8bf7\u4f7f\u7528\u57fa\u51c6\u5e93\u63d0\u4f9b\u7684 <code>BenchmarkRule</code> \u7c7b\u3002\u5982\u9700\u5bf9 Activity \u8fdb\u884c\u57fa\u51c6\u5316\u5206\u6790\uff0c\u8bf7\u4f7f\u7528 <code>ActivityTestRule</code> \u6216 <code>ActivityScenarioRule</code>\u3002\u5982\u9700\u5bf9\u754c\u9762\u4ee3\u7801\u8fdb\u884c\u57fa\u51c6\u5316\u5206\u6790\uff0c\u8bf7\u4f7f\u7528 <code>@UiThreadTest</code>\u3002</p> <p>1.\u8bbe\u7f6eMicrobenchmark\u6a21\u5757</p> <p>2.\u66f4\u6539Microbenchmark\u6a21\u5757 <code>build.gradle</code></p> <pre><code>dependencies {\n    // modulename \u662f\u6307\u4f60\u8981\u6d4b\u8bd5\u65b9\u6cd5\u7684\u6a21\u5757\n    androidTestImplementation project(':benchmarkable')\n}\n</code></pre> <p>3.\u521b\u5efaMicrobenchmark\u57fa\u51c6\u7c7b</p> <pre><code>@RunWith(AndroidJUnit4.class)\nclass SampleBenchmark {\n    @Rule\n    public BenchmarkRule benchmarkRule = new BenchmarkRule();\n\n    @Test\n    public void benchmarkSomeWork() {\n        final BenchmarkState state = benchmarkRule.getState();\n        while (state.keepRunning()) {\n            doSomeWork();\n        }\n    }\n}\n</code></pre> <p>4.\u8fd0\u884c\u57fa\u51c6\uff0c\u67e5\u770b\u7ed3\u679c</p>"},{"location":"Android/17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#macrobenchmark","title":"Macrobenchmark(\u5b8f\u57fa\u51c6)","text":"<p>Macrobenchmark \u5e93\u9002\u7528\u4e8e\u6d4b\u8bd5\u5e94\u7528\u7684\u8f83\u5927\u7528\u4f8b\uff0c\u5305\u62ec\u5e94\u7528\u542f\u52a8\u548c\u590d\u6742\u7684\u754c\u9762\u64cd\u4f5c\u3002</p> <p>\u57fa\u51c6\u4e3b\u8981\u6307\u6807:</p> <ul> <li>StartupTimingMetric: \u542f\u52a8\u65f6\u95f4\u6307\u6807</li> <li>FrameTimingMetric:\u5e27\u7684\u6307\u6807\uff0c\u4e3b\u8981\u662f\u5e27\u751f\u6210\u7684\u65f6\u95f4\uff0c\u5e27\u7684\u4f7f\u7528\u65f6\u95f4</li> <li>TraceSectionMetric:\u8f93\u51faTrace\u6240\u82b1\u8d39\u7684\u65f6\u95f4</li> <li>Powermetic :\u8017\u7535\u91cf\u548c\u80fd\u91cf\u53d8\u5316</li> </ul> <p>\u7f16\u5199\u57fa\u51c6</p> <p>1.\u8bbe\u7f6e Macrobenchmark \u6a21\u5757</p> <p>2.\u8bbe\u7f6e\u5e94\u7528</p> <ul> <li>\u4fee\u6539build.gradlew</li> </ul> <p>```groovy   buildTypes {       release {           minifyEnabled true           shrinkResources true           proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'       }</p> <pre><code>  benchmark {\n      initWith buildTypes.release\n      signingConfig signingConfigs.debug\n      proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'benchmark-rules.pro'\n  }\n</code></pre> <p>}   ```</p> <ul> <li>\u6253\u5f00\u5de6\u4fa7\u7684 Build Variants \u9762\u677f\uff0c\u9009\u62e9\u5e94\u7528\u548c Macrobenchmark \u6a21\u5757\u7684\u8981\u8fdb\u884c\u57fa\u51c6\u6d4b\u8bd5\u7684\u53d8\u4f53</li> </ul> <p>3.\u8bbe\u7f6e\u591a\u6a21\u5757(\u53ef\u9009)</p> <p>4.\u8bbe\u7f6e\u591a\u4e2aVariants(\u53ef\u9009)</p> <p>5.\u7f16\u5199Macrobenchmark \u7c7b</p> <pre><code>@LargeTest\n@RunWith(AndroidJUnit4.class)\npublic class SampleStartupBenchmark {\n    @Rule\n    public MacrobenchmarkRule benchmarkRule = new MacrobenchmarkRule();\n\n    @Test\n    public void startup() {\n        benchmarkRule.measureRepeated(\n            /* packageName */ TARGET_PACKAGE,\n            /* metrics */ Arrays.asList(new StartupTimingMetric()),\n            /* iterations */ 5,\n            /* measureBlock */ scope -&gt; {\n                // starts default launch activity\n                scope.startActivityAndWait();\n                return Unit.INSTANCE;\n            }\n        );\n    }\n}\n</code></pre> <p>6.\u8fd0\u884c\u57fa\u51c6\uff0c\u67e5\u770b\u7ed3\u679c</p>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/","title":"RxJAVA    \u57fa\u7840\u77e5\u8bc6","text":""},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#1rxjava","title":"1\u3001\u4f7f\u7528RxJAVA\u7684\u7406\u7531\uff1a","text":"<p>\u200b    1.\u5b9e\u73b0\u4e86\u5f02\u6b65</p> <p>\u200b    2.\u4ee3\u7801\u662f\u94fe\u5f0f\u7684\uff0c\u903b\u8f91\u6bd4\u8f83\u7b80\u6d01</p>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#2","title":"2\u3001\u539f\u7406","text":"<p>\u89c2\u5bdf\u8005\u6a21\u5f0f\uff1a\u89c2\u5bdf\u8005\u6a21\u5f0f\u9762\u5411\u7684\u9700\u6c42\u662f\uff1aA \u5bf9\u8c61\uff08\u89c2\u5bdf\u8005\uff09\u5bf9 B \u5bf9\u8c61\uff08\u88ab\u89c2\u5bdf\u8005\uff09\u7684\u67d0\u79cd\u53d8\u5316\u9ad8\u5ea6\u654f\u611f\uff0c\u9700\u8981\u5728 B \u53d8\u5316\u7684\u4e00\u77ac\u95f4\u505a\u51fa\u53cd\u5e94\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u65b0\u95fb\u91cc\u559c\u95fb\u4e50\u89c1\u7684\u8b66\u5bdf\u6293\u5c0f\u5077\uff0c\u8b66\u5bdf\u9700\u8981\u5728\u5c0f\u5077\u4f38\u624b\u4f5c\u6848\u7684\u65f6\u5019\u5b9e\u65bd\u6293\u6355\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u91cc\uff0c\u8b66\u5bdf\u662f\u89c2\u5bdf\u8005\uff0c\u5c0f\u5077\u662f\u88ab\u89c2\u5bdf\u8005\uff0c\u8b66\u5bdf\u9700\u8981\u65f6\u523b\u76ef\u7740\u5c0f\u5077\u7684\u4e00\u4e3e\u4e00\u52a8\uff0c\u624d\u80fd\u4fdd\u8bc1\u4e0d\u4f1a\u6f0f\u8fc7\u4efb\u4f55\u77ac\u95f4\u3002\u7a0b\u5e8f\u7684\u89c2\u5bdf\u8005\u6a21\u5f0f\u548c\u8fd9\u79cd\u771f\u6b63\u7684\u300e\u89c2\u5bdf\u300f\u7565\u6709\u4e0d\u540c\uff0c\u89c2\u5bdf\u8005\u4e0d\u9700\u8981\u65f6\u523b\u76ef\u7740\u88ab\u89c2\u5bdf\u8005\uff08\u4f8b\u5982 A \u4e0d\u9700\u8981\u6bcf\u8fc7 2ms \u5c31\u68c0\u67e5\u4e00\u6b21 B \u7684\u72b6\u6001\uff09\uff0c\u800c\u662f\u91c7\u7528\u6ce8\u518c(Register)\u6216\u8005\u79f0\u4e3a\u8ba2\u9605(Subscribe)\u7684\u65b9\u5f0f\uff0c\u544a\u8bc9\u88ab\u89c2\u5bdf\u8005\uff1a\u6211\u9700\u8981\u4f60\u7684\u67d0\u67d0\u72b6\u6001\uff0c\u4f60\u8981\u5728\u5b83\u53d8\u5316\u7684\u65f6\u5019\u901a\u77e5\u6211\u3002 Android \u5f00\u53d1\u4e2d\u4e00\u4e2a\u6bd4\u8f83\u5178\u578b\u7684\u4f8b\u5b50\u662f\u70b9\u51fb\u76d1\u542c\u5668 <code>OnClickListener</code> \u3002\u5bf9\u8bbe\u7f6e <code>OnClickListener</code> \u6765\u8bf4\uff0c <code>View</code> \u662f\u88ab\u89c2\u5bdf\u8005\uff0c <code>OnClickListener</code> \u662f\u89c2\u5bdf\u8005\uff0c\u4e8c\u8005\u901a\u8fc7 <code>setOnClickListener()</code> \u65b9\u6cd5\u8fbe\u6210\u8ba2\u9605\u5173\u7cfb\u3002\u8ba2\u9605\u4e4b\u540e\u7528\u6237\u70b9\u51fb\u6309\u94ae\u7684\u77ac\u95f4\uff0cAndroid Framework \u5c31\u4f1a\u5c06\u70b9\u51fb\u4e8b\u4ef6\u53d1\u9001\u7ed9\u5df2\u7ecf\u6ce8\u518c\u7684 <code>OnClickListener</code> \u3002\u91c7\u53d6\u8fd9\u6837\u88ab\u52a8\u7684\u89c2\u5bdf\u65b9\u5f0f\uff0c\u65e2\u7701\u53bb\u4e86\u53cd\u590d\u68c0\u7d22\u72b6\u6001\u7684\u8d44\u6e90\u6d88\u8017\uff0c\u4e5f\u80fd\u591f\u5f97\u5230\u6700\u9ad8\u7684\u53cd\u9988\u901f\u5ea6\u3002\u5f53\u7136\uff0c\u8fd9\u4e5f\u5f97\u76ca\u4e8e\u6211\u4eec\u53ef\u4ee5\u968f\u610f\u5b9a\u5236\u81ea\u5df1\u7a0b\u5e8f\u4e2d\u7684\u89c2\u5bdf\u8005\u548c\u88ab\u89c2\u5bdf\u8005\uff0c\u800c\u8b66\u5bdf\u53d4\u53d4\u660e\u663e\u65e0\u6cd5\u8981\u6c42\u5c0f\u5077\u300e\u4f60\u5728\u4f5c\u6848\u7684\u65f6\u5019\u52a1\u5fc5\u901a\u77e5\u6211\u300f\u3002</p> <p>\u5373\uff1a\u89c2\u5bdf\u8005\u8ba2\u9605\u88ab\u89c2\u5bdf\u8005\uff0c\u4f46\u662f\u88ab\u89c2\u5bdf\u8005\u53d1\u9001\u81ea\u5df1\u7684\u53d8\u5316\u7ed9\u89c2\u5bdf\u8005\u3002</p>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#3","title":"3\u3001\u6838\u5fc3\u6982\u5ff5\uff1a","text":""},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#1observable","title":"1\u3001Observable(\u88ab\u89c2\u5bdf\u8005)\uff1a","text":"<ul> <li>create():\u521b\u5efa\u4e00\u4e2aObservable,\u5e76\u4e3a\u5b83\u5b9a\u4e49\u4e8b\u4ef6\u89e6\u53d1\u89c4\u5219</li> </ul> <p>```java      Observable observable = Observable.create(new ObservableOnSubscribe() {               //\u4f20\u5165\u7684\u662fOnSubscribe \u5bf9\u8c61               //\u5f53 Observable \u88ab\u8ba2\u9605\u65f6\uff0cOnSubscribe \u7684 call() \u65b9\u6cd5\u4f1a\u81ea\u52a8\u88ab\u8c03\u7528\uff0c\u5373\u4e8b\u4ef6\u5e8f\u5217\u5c31\u4f1a\u4f9d\u7167\u8bbe\u5b9a\u4f9d\u6b21\u88ab\u89e6\u53d1               @Override               public void subscribe(@NonNull ObservableEmitter emmiter) throws Exception {                   //\u5728\u8fd9\u91cc\u5199\u4ea7\u751f\u7684\u4e8b\u4ef6                   // \u901a\u8fc7 ObservableEmitter\u7c7b\u5bf9\u8c61 \u4ea7\u751f &amp; \u53d1\u9001\u4e8b\u4ef6                   // a. \u5b9a\u4e49\uff1a\u4e8b\u4ef6\u53d1\u5c04\u5668                   // b. \u4f5c\u7528\uff1a\u5b9a\u4e49\u9700\u8981\u53d1\u9001\u7684\u4e8b\u4ef6 &amp; \u5411\u89c2\u5bdf\u8005\u53d1\u9001\u4e8b\u4ef6                   // \u6ce8\uff1a\u5efa\u8bae\u53d1\u9001\u4e8b\u4ef6\u524d\u68c0\u67e5\u89c2\u5bdf\u8005\u7684isUnsubscribed\u72b6\u6001\uff0c\u4ee5\u4fbf\u5728\u6ca1\u6709\u89c2\u5bdf\u8005\u65f6\uff0c\u8ba9Observable\u505c\u6b62\u53d1\u5c04\u6570\u636e, observer\u4e3a\u89c2\u5bdf\u8005\u5bf9\u8c61                   if (!observer.isUnsubscribed()) {                       emmiter.onNext(\"zhangsan\");                       emmiter.onNext(\"lisi\");                   } <pre><code>             emmiter.onComplete();\n          }\n      });\n</code></pre> <p>//\u5e38\u89c4\u4f7f\u7528    Observable.create(new ObservableOnSubscribe() {               @Override               public void subscribe(@NonNull ObservableEmitter emmiter) throws Exception {                       emmiter.onNext(\"zhangsan\");                       emmiter.onNext(\"lisi\");                  emmiter.onComplete();               }           }).subscribe(new Observer() {      //\u4e8b\u4ef6\u7684\u6574\u4e2a\u6d41\u7a0b               @Override               public void onSubscribe(@NonNull Disposable d) {                   Log.d(TAG, \"\u5f00\u59cb\u91c7\u7528subscribe\u8fde\u63a5\");               } <pre><code>          @Override\n          public void onNext(@NonNull String s) {\n              Log.d(TAG, \"onNext: Hello,\"+s);\n          }\n\n          @Override\n          public void onError(@NonNull Throwable e) {\n              Log.d(TAG, \"onError: \");\n          }\n\n          @Override\n          public void onComplete() {\n              Log.d(TAG, \"onComplete:\");\n          }\n      });\n</code></pre> <p>```</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u91cc\u4f20\u5165\u4e86\u4e00\u4e2a <code>OnSubscribe</code> \u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u3002<code>OnSubscribe</code> \u4f1a\u88ab\u5b58\u50a8\u5728\u8fd4\u56de\u7684 <code>Observable</code> \u5bf9\u8c61\u4e2d\uff0c\u5b83\u7684\u4f5c\u7528\u76f8\u5f53\u4e8e\u4e00\u4e2a\u8ba1\u5212\u8868\uff0c\u5f53 <code>Observable</code> \u88ab\u8ba2\u9605\u7684\u65f6\u5019\uff0c<code>OnSubscribe</code> \u7684 <code>call()</code> \u65b9\u6cd5\u4f1a\u81ea\u52a8\u88ab\u8c03\u7528\uff0c\u4e8b\u4ef6\u5e8f\u5217\u5c31\u4f1a\u4f9d\u7167\u8bbe\u5b9a\u4f9d\u6b21\u89e6\u53d1\uff08\u5bf9\u4e8e\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u5c31\u662f\u89c2\u5bdf\u8005<code>Subscriber</code> \u5c06\u4f1a\u88ab\u8c03\u7528\u4e09\u6b21 <code>onNext()</code> \u548c\u4e00\u6b21 <code>onCompleted()</code>\uff09\u3002\u8fd9\u6837\uff0c\u7531\u88ab\u89c2\u5bdf\u8005\u8c03\u7528\u4e86\u89c2\u5bdf\u8005\u7684\u56de\u8c03\u65b9\u6cd5\uff0c\u5c31\u5b9e\u73b0\u4e86\u7531\u88ab\u89c2\u5bdf\u8005\u5411\u89c2\u5bdf\u8005\u7684\u4e8b\u4ef6\u4f20\u9012\uff0c\u5373\u89c2\u5bdf\u8005\u6a21\u5f0f\u3002</p> <ul> <li> <p>just(T...):\u57fa\u4e8ecreate()\u65b9\u6cd5\uff0c\u5c06\u4f20\u5165\u7684\u53c2\u6570\u4e00\u6b21\u53d1\u51fa\u6765</p> </li> <li> <p>from(T[]....)/from(Iterable&lt;?,extends,T&gt;):\u57fa\u4e8ecreate()\u65b9\u6cd5\uff0c\u5c06\u6570\u7ec4\u6216Itreable\u62c6\u5206\u6210\u5177\u4f53\u5bf9\u8c61\u540e\uff0c\u4f9d\u6b21\u53d1\u9001\u51fa\u6765</p> </li> <li> <p>onNext():\u56de\u8c03\u65b9\u6cd5</p> </li> <li> <p>onComplete()\uff1a\u56de\u8c03\u65b9\u6cd5\uff0c\u5f53\u4e0d\u4f1a\u6709\u65b0\u7684onNext()\u53d1\u51fa\u540e\uff0c\u6267\u884conComplete()</p> </li> <li> <p>onError()\uff1a\u56de\u8c03\u65b9\u6cd5\uff0c\u5f53\u4e8b\u4ef6\u961f\u5217\u5f02\u5e38\u65f6\uff0c\u4f1a\u89e6\u53d1onError()\uff0c\u5e76\u7ec8\u6b62</p> </li> <li> <p>onComplete()\u548conError()\u65b9\u6cd5\u53ea\u4f1a\u51fa\u73b0\u4e00\u4e2a</p> </li> <li> <p>filter\uff1a\u8fc7\u6ee4</p> </li> <li> <p>switchIfEmpty() \u5982\u679c\u662f\u7a7a\u7684\u5982\u4f55\u5904\u7406</p> </li> <li> <p>map\uff1a\u8f6c\u6362\u6570\u636e</p> </li> </ul>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#2observer","title":"2\u3001Observer(\u89c2\u5bdf\u8005)\uff1a","text":"<ul> <li> <p>\u5b58\u5728\u4e24\u4e2a\u7c7b\uff1aObserver\u548cSubscriber,Subscriber\u662f\u5b9e\u73b0Observer\u7684\u62bd\u8c61\u7c7b\uff0c\u5b9e\u8d28\u4e0a\u90fd\u662f\u5728\u4f7f\u7528\u540e\u8005\u3002</p> </li> <li> <p>\u521b\u5efaObserver\u548cSubscriber</p> </li> </ul> <p>```java   Observer observer = new Observer() {       @Override       public void onNext(String s) {           Log.d(tag, \"Item: \" + s);       } <pre><code>  @Override\n  public void onCompleted() {\n      Log.d(tag, \"Completed!\");\n  }\n\n  @Override\n  public void onError(Throwable e) {\n      Log.d(tag, \"Error!\");\n  }\n</code></pre> <p>};   Subscriber subscriber = new Subscriber() {       @Override       public void onNext(String s) {           Log.d(tag, \"Item: \" + s);       } <pre><code>  @Override\n  public void onCompleted() {\n      Log.d(tag, \"Completed!\");\n  }\n\n  @Override\n  public void onError(Throwable e) {\n      Log.d(tag, \"Error!\");\n  }\n</code></pre> <p>};   ```</p> <ul> <li> <p>\u4e24\u4e2a\u7c7b\u7684\u533a\u522b\uff1aSubscriber\u589e\u52a0\u548c\u5b9e\u73b0\u4e86\u4e24\u4e2a\u65b9\u6cd5\u3002</p> </li> <li> <p>onStart():\u5728subscrib\u521a\u5f00\u59cb\uff0c\u8fd8\u672a\u53d1\u9001\u6570\u636e\u4e4b\u524d\u7684\u8fdb\u884c\u6570\u636e\u51c6\u5907\uff0c\u53ea\u80fd\u5728subscrib\u6240\u53d1\u751f\u7684\u7ebf\u7a0b\u4e2d\u8c03\u7528.</p> </li> <li>Unsurscribe():\u7528\u4e8e\u53d6\u6d88\u8ba2\u9605\u3002</li> </ul>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#3subscribe","title":"3\u3001subscribe():(\u5b9e\u73b0\u8ba2\u9605)\uff1a","text":"<ul> <li>\u4ee3\u7801\u5b9e\u73b0\uff1a</li> </ul> <p><code>java   observable.subscribe(observer);   // \u6216\u8005\uff1a   observable.subscribe(subscriber);</code></p> <ul> <li>\u6838\u5fc3\u6e90\u7801\uff1a</li> </ul> <p><code>java   // \u6ce8\u610f\uff1a\u8fd9\u4e0d\u662f subscribe() \u7684\u6e90\u7801\uff0c\u800c\u662f\u5c06\u6e90\u7801\u4e2d\u4e0e\u6027\u80fd\u3001\u517c\u5bb9\u6027\u3001\u6269\u5c55\u6027\u6709\u5173\u7684\u4ee3\u7801\u5254\u9664\u540e\u7684\u6838\u5fc3\u4ee3\u7801\u3002   // \u5982\u679c\u9700\u8981\u770b\u6e90\u7801\uff0c\u53ef\u4ee5\u53bb RxJava \u7684 GitHub \u4ed3\u5e93\u4e0b\u8f7d\u3002   public Subscription subscribe(Subscriber subscriber) {       subscriber.onStart();       onSubscribe.call(subscriber);       return subscriber;   }</code></p> <p>\u505a\u4e86\u4e09\u4ef6\u4e8b\uff1a</p> <ul> <li>\u8c03\u7528 <code>Subscriber.onStart()</code> \u3002\u8fd9\u4e2a\u65b9\u6cd5\u5728\u524d\u9762\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\uff0c\u662f\u4e00\u4e2a\u53ef\u9009\u7684\u51c6\u5907\u65b9\u6cd5\u3002</li> <li>\u8c03\u7528 <code>Observable</code> \u4e2d\u7684 <code>OnSubscribe.call(Subscriber)</code> \u3002\u5728\u8fd9\u91cc\uff0c\u4e8b\u4ef6\u53d1\u9001\u7684\u903b\u8f91\u5f00\u59cb\u8fd0\u884c\u3002\u4ece\u8fd9\u4e5f\u53ef\u4ee5\u770b\u51fa\uff0c\u5728 RxJava \u4e2d\uff0c <code>Observable</code> \u5e76\u4e0d\u662f\u5728\u521b\u5efa\u7684\u65f6\u5019\u5c31\u7acb\u5373\u5f00\u59cb\u53d1\u9001\u4e8b\u4ef6\uff0c\u800c\u662f\u5728\u5b83\u88ab\u8ba2\u9605\u7684\u65f6\u5019\uff0c\u5373\u5f53 <code>subscribe()</code> \u65b9\u6cd5\u6267\u884c\u7684\u65f6\u5019\u3002</li> <li>\u5c06\u4f20\u5165\u7684 <code>Subscriber</code> \u4f5c\u4e3a <code>Subscription</code> \u8fd4\u56de\u3002\u8fd9\u662f\u4e3a\u4e86\u65b9\u4fbf <code>unsubscribe()</code>.</li> </ul>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#4","title":"4\u3001\u53d6\u6d88\u8ba2\u9605","text":"<p>1\u3001Disposable \u53d6\u6d88\u8ba2\u9605</p> <pre><code>Disposable disposable = Observable.just(1).subscribe(new Consumer&lt;Integer&gt;() {\n    @Override\n    public void accept(@NonNull Integer integer) throws Exception {\n\n    }\n});\n\n//\u53d6\u6d88\u8ba2\u9605\nif(disposable != null &amp;&amp; !disposable.isDisposed()){\n     disposable.dispose();\n}\n\n//\u6216\u8005\u76f4\u63a5\u4f7f\u7528Observer\u4e2d\u7684onSubscribe()\u65b9\u6cd5\nprivate Disposable disposable;\nObservable.just(1).subscribe(new Observer&lt;Integer&gt;() {\n       @Override\n       public void onSubscribe(Disposable d) {\n            disposable = d;\n       }\n\n       @Override\n       public void onNext(Integer integer) {}\n\n       @Override\n       public void onError(Throwable e) {}\n\n       @Override\n       public void onComplete() {}\n});\n\n//\u7136\u540e\u5728\u9700\u8981\u53d6\u6d88\u8ba2\u9605\u7684\u5730\u65b9\u8c03\u7528\u5373\u53ef\nif(disposable != null &amp;&amp; !disposable.isDisposed()){\n     disposable.dispose();\n}\n</code></pre> <p>2\u3001DisposableObserver \u53d6\u6d88\u8ba2\u9605</p> <pre><code>//\u6bd4\u5982\u8fd9\u4e2a\u662f\u6211\u4eec\u7684Observer\nDisposableObserver observer = new DisposableObserver() {\n      @Override\n      public void onNext(Object o) {}\n      @Override\n      public void onError(Throwable e) {}\n      @Override\n      public void onComplete() {}\n};\n//\u628a\u6211\u4eec\u7684Observer\u5bf9Observable\u8fdb\u884c\u8ba2\u9605        \nObservable.just(1).subscribe(observer);\n\n//\u7136\u540e\u5728\u9700\u8981\u53d6\u6d88\u8ba2\u9605\u7684\u5730\u65b9\u5bf9\u8fd9\u4e2aobserver\u8fdb\u884c\u53d6\u6d88\u8ba2\u9605\u5373\u53ef\u3002\nobserver.dispose();\n</code></pre> <p>3\u3001DisposableObserver+subscribeWith \u53d6\u6d88\u8ba2\u9605</p> <pre><code>DisposableObserver observer = Observable.just(1).subscribeWith(new DisposableObserver&lt;Integer&gt;() {\n     @Override\n     public void onNext(Integer integer) {}\n     @Override\n     public void onError(Throwable e) {}\n     @Override\n     public void onComplete() {}\n});\n\n//\u9700\u8981\u53d6\u6d88\u8ba2\u9605\u7684\u5730\u65b9\uff1a\nobserver.disposable();\n</code></pre> <p>4\u3001CompositeDisposable \u540c\u65f6\u53d6\u6d88\u591a\u4e2a\u8ba2\u9605</p> <pre><code>CompositeDisposable compositeDisposable = new CompositeDisposable();\n//\u6279\u91cf\u6dfb\u52a0\ncompositeDisposable.add(observer1);\ncompositeDisposable.add(observer2);\ncompositeDisposable.add(observer2);\n//\u6700\u540e\u4e00\u6b21\u6027\u5168\u90e8\u53d6\u6d88\u8ba2\u9605\ncompositeDisposable.dispose();\n</code></pre> <p>5\u3001RxLifeCycle \u53d6\u6d88\u8ba2\u9605</p>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#4_1","title":"4. \u7ebf\u7a0b\u63a7\u5236","text":"<ul> <li>\u9ed8\u8ba4\u7684\u7ebf\u7a0b</li> </ul> <p>\u88ab\u89c2\u5bdf\u8005 <code>\uff08Observable\uff09</code> / \u89c2\u5bdf\u8005<code>\uff08Observer\uff09</code>\u7684\u5de5\u4f5c\u7ebf\u7a0b = \u521b\u5efa\u81ea\u8eab\u7684\u7ebf\u7a0b\uff0c\u5373\u5728\u54ea\u91cc\u521b\u5efa\u5728\u54ea\u91cc\u53d1\u9001\u4e8b\u4ef6/\u63a5\u6536\u4e8b\u4ef6\u3002</p> <p>```java    Observable.create(new ObservableOnSubscribe() {               @Override               public void subscribe(@NonNull ObservableEmitter e) throws Exception {                   Log.d(TAG, \"create: \"+ Thread.currentThread().getName());                   e.onNext(1);               }           })                   .subscribeOn(Schedulers.io())                   .doOnSubscribe(new Consumer() {                       @Override                       public void accept(Disposable disposable) throws Exception {                           Log.d(TAG, \"accept: \"+ Thread.currentThread().getName());                       }                   })                   .subscribeOn(AndroidSchedulers.mainThread())                   .flatMap(new Function&gt;() {                       @Override                       public ObservableSource apply(@NonNull Integer integer) throws Exception { <pre><code>                      return Observable.create(new ObservableOnSubscribe&lt;String&gt;() {\n\n                          @Override\n                          public void subscribe(@NonNull ObservableEmitter&lt;String&gt; e) {\n                              try {\n                                  Log.d(TAG, \"subscribe: \"+ Thread.currentThread().getName());\n                                  testRxjava test = NetEngineFactory.CreateNetEngine(OkHttpNetEngine.class, RxjavaMainActivity.this).testFloatMap();\n                                  e.onNext(test.getErrno());\n                              }catch (Exception error){\n                                  e.onError(error);\n                              }\n                          }\n                      }).map(new Function&lt;String, Boolean&gt;() {\n                          @Override\n                          public Boolean apply(@NonNull String s) throws Exception {\n</code></pre> <p>//                                Log.d(TAG, \"testRxjava: map\");                                   Log.d(TAG, \"map: \"+ Thread.currentThread().getName());                                   if(TextUtils.equals(s,\"10000\")){                                       return  true;                                   }                                   return false;                               }                           });                       }                   })                   .observeOn(AndroidSchedulers.mainThread())                   .subscribe(rst -&gt; {               Log.d(TAG, \"testRxjava: final result \"+ rst);           }, error -&gt; {               Log.d(TAG, \"testRxjava: \"+ error.toString());           });   //\u6d4b\u8bd5\u7ed3\u679c   2022-04-01 17:22:51.340 13672-13672/com.example.androiddemo D/testRxjava: accept: main   2022-04-01 17:22:51.341 13672-13832/com.example.androiddemo D/testRxjava: create: RxCachedThreadScheduler-1   2022-04-01 17:22:51.342 13672-13832/com.example.androiddemo D/testRxjava: subscribe: RxCachedThreadScheduler-1   2022-04-01 17:22:55.054 13672-13832/com.example.androiddemo D/testRxjava: map: RxCachedThreadScheduler-1   2022-04-01 17:22:55.055 13672-13672/com.example.androiddemo D/testRxjava: testRxjava: final result false   ```</p> <p>\u4ee5\u4e0a\u6d41\u7a0b\u53ef\u4ee5\u5b8c\u6210\u4e00\u4e2aAsyncTask\u7684\u6b65\u9aa4\uff0c\u5f02\u6b65\u7ebf\u7a0b\u5982\u679c\u53ea\u9700\u8981\u4e00\u4e2a\uff0c\u53ef\u4ee5\u53ea\u4f7f\u7528subscribeOn()\u3002</p> <ul> <li> <p>Secheduler API   \u8c03\u5ea6\u5668\uff0c\u901a\u8fc7\u5b83\u6765\u63a7\u5236\u5e94\u8be5\u5728\u54ea\u4e2a\u7ebf\u7a0b\u8fd0\u884c</p> </li> <li> <p><code>Schedulers.immediate()</code>: \u76f4\u63a5\u5728\u5f53\u524d\u7ebf\u7a0b\u8fd0\u884c\uff0c\u76f8\u5f53\u4e8e\u4e0d\u6307\u5b9a\u7ebf\u7a0b\u3002\u8fd9\u662f\u9ed8\u8ba4\u7684 <code>Scheduler</code>\u3002\uff08\u5df2\u88ab\u79fb\u9664\uff09</p> </li> <li> <p><code>Schedulers.newThread()</code>: \u603b\u662f\u542f\u7528\u65b0\u7ebf\u7a0b\uff0c\u5e76\u5728\u65b0\u7ebf\u7a0b\u6267\u884c\u64cd\u4f5c\u3002</p> </li> <li> <p><code>Schedulers.io()</code>: I/O \u64cd\u4f5c\uff08\u8bfb\u5199\u6587\u4ef6\u3001\u8bfb\u5199\u6570\u636e\u5e93\u3001\u7f51\u7edc\u4fe1\u606f\u4ea4\u4e92\u7b49\uff09\u6240\u4f7f\u7528\u7684 <code>Scheduler</code>\u3002\u884c\u4e3a\u6a21\u5f0f\u548c <code>newThread()</code> \u5dee\u4e0d\u591a\uff0c\u533a\u522b\u5728\u4e8e <code>io()</code> \u7684\u5185\u90e8\u5b9e\u73b0\u662f\u662f\u7528\u4e00\u4e2a\u65e0\u6570\u91cf\u4e0a\u9650\u7684\u7ebf\u7a0b\u6c60\uff0c\u53ef\u4ee5\u91cd\u7528\u7a7a\u95f2\u7684\u7ebf\u7a0b\uff0c\u56e0\u6b64\u591a\u6570\u60c5\u51b5\u4e0b <code>io()</code> \u6bd4 <code>newThread()</code> \u66f4\u6709\u6548\u7387\u3002\u4e0d\u8981\u628a\u8ba1\u7b97\u5de5\u4f5c\u653e\u5728 <code>io()</code> \u4e2d\uff0c\u53ef\u4ee5\u907f\u514d\u521b\u5efa\u4e0d\u5fc5\u8981\u7684\u7ebf\u7a0b\u3002</p> </li> <li> <p><code>Schedulers.computation()</code>: \u8ba1\u7b97\u6240\u4f7f\u7528\u7684 <code>Scheduler</code>\u3002\u4e5f\u662f\u4e00\u4e2a\u7ebf\u7a0b\u6c60\uff0c\u533a\u522b\u4e8eI/O\u8c03\u5ea6\u7684\u662f\u7ebf\u7a0b\u6570=CPU\u6838\u6570\uff0c\u8fd9\u4e2a\u8ba1\u7b97\u6307\u7684\u662f CPU \u5bc6\u96c6\u578b\u8ba1\u7b97\uff0c\u5373\u4e0d\u4f1a\u88ab I/O \u7b49\u64cd\u4f5c\u9650\u5236\u6027\u80fd\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u56fe\u5f62\u7684\u8ba1\u7b97\u3002\u8fd9\u4e2a <code>Scheduler</code> \u4f7f\u7528\u7684\u56fa\u5b9a\u7684\u7ebf\u7a0b\u6c60\uff0c\u5927\u5c0f\u4e3a CPU \u6838\u6570\u3002\u4e0d\u8981\u628a I/O \u64cd\u4f5c\u653e\u5728 <code>computation()</code> \u4e2d\uff0c\u5426\u5219 I/O \u64cd\u4f5c\u7684\u7b49\u5f85\u65f6\u95f4\u4f1a\u6d6a\u8d39 CPU\uff0c\u9002\u7528\u4e8e\u8ba1\u7b97\u64cd\u4f5c\u3002</p> </li> <li> <p><code>Schedulers.Single()</code>:\u7531\u4e00\u4e2a\u7ebf\u7a0b\u652f\u6301\uff0c\u65e0\u8bba\u6709\u591a\u5c11\u4e2aobservables,\u90fd\u5c06\u53ea\u8fd0\u884c\u5728\u8fd9\u4e2a\u7ebf\u7a0b\u4e0a\u3002\u4e5f\u53ef\u5c06\u5176\u8ba4\u4e3a\u662f\u4e3b\u7ebf\u7a0b\u7684\u4e00\u4e2a\u66ff\u4ee3\u3002</p> </li> <li> <p>\u5982\u679c\u4f60\u6709\u4ee3\u7801\u8fd0\u884c\u5728\u4e3b\u7ebf\u7a0b\u4e0a\uff0c\u5b83\u4f1a\u5c06\u5c06\u8981\u8fd0\u884c\u7684\u4ee3\u7801\u5757\u6dfb\u52a0\u5230\u4e3b\u7ebf\u7a0b\u7684\u961f\u5217\u3002\u548cImmediate\u975e\u5e38\u76f8\u4f3c\uff0c\u4e0d\u540c\u7684\u662fImmediate\u4f1a\u963b\u585e\u6b64\u7ebf\u7a0b\uff0c\u800cTrampoline\u4f1a\u7b49\u5f85\u5f53\u524d\u4efb\u52a1\u6267\u884c\u5b8c\u6210\u3002\u9002\u7528\u7528\u4e8e\u4e0d\u6b62\u4e00\u4e2aobservables\uff0c\u5e76\u4e14\u5e0c\u671b\u5b83\u4eec\u80fd\u591f\u6309\u7167\u987a\u5e8f\u6267\u884c\u7684\u573a\u666f\u3002</p> </li> <li> <p><code>Schedulers.trampoline()</code>:\u8fd0\u884c\u5728\u5f53\u524d\u7ebf\u7a0b\uff0c\u5728\u5176\u4e2d\u4e00\u4e2a\u53c2\u4e0e\u7ebf\u7a0b\u4e2d\u4ee5\u987a\u5e8f\u548c FIFO \u65b9\u5f0f\u8fd0\u884c\u5de5\u4f5c\uff0c\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u76ee\u7684\u3002</p> </li> <li> <p><code>Schedulers.from(Executor)</code>\uff1a\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u6c60\uff0c\u9002\u7528\u4e8eObservable\u8fdc\u591a\u4e8eIO\u8c03\u5ea6\u7684\u573a\u666f\u3002</p> <p><code>java val executor = Executors.newFixedThreadPool(10)  val pooledScheduler = Schedulers.from(executor)</code></p> </li> <li> <p>\u53e6\u5916\uff0c Android \u8fd8\u6709\u4e00\u4e2a\u4e13\u7528\u7684 <code>AndroidSchedulers.mainThread()</code>\uff0c\u5b83\u6307\u5b9a\u7684\u64cd\u4f5c\u5c06\u5728 Android \u4e3b\u7ebf\u7a0b\u8fd0\u884c\u3002</p> </li> <li> <p>subscribeOn()\u65b9\u6cd5\uff1a\u6307\u5b9asubscribe()\u6240\u53d1\u751f\u7684\u7ebf\u7a0b\u3002</p> </li> <li> <p>observeOn():\u6307\u5b9asubscribe()\u6240\u8fd0\u884c\u7684\u7ebf\u7a0b\u3002</p> </li> </ul> <p><code>java   Observable.just(1, 2, 3, 4)       .subscribeOn(Schedulers.io()) // \u6307\u5b9a subscribe() \u53d1\u751f\u5728 IO \u7ebf\u7a0b       .observeOn(AndroidSchedulers.mainThread()) // \u6307\u5b9a Subscriber \u7684\u56de\u8c03\u53d1\u751f\u5728\u4e3b\u7ebf\u7a0b       .subscribe(new Action1&lt;Integer&gt;() {           @Override           public void call(Integer number) {               Log.d(tag, \"number:\" + number);           }       });</code></p> <p>\u5728IO\u7ebf\u7a0b\u53d1\u51fa\u6570\u636e\uff0c\u5728andriod\u7684\u4e3b\u7ebf\u7a0b\u8fdb\u884c\u8c03\u7528\u3002</p> <ul> <li>\u7ebf\u7a0b\u63a7\u5236\u539f\u7406</li> </ul> <p><code>java   Observable.just(1, 2, 3, 4) // IO \u7ebf\u7a0b\uff0c\u7531 subscribeOn() \u6307\u5b9a       .subscribeOn(Schedulers.io())       .observeOn(Schedulers.newThread())       .map(mapOperator) // \u65b0\u7ebf\u7a0b\uff0c\u7531 observeOn() \u6307\u5b9a       .observeOn(Schedulers.io())       .map(mapOperator2) // IO \u7ebf\u7a0b\uff0c\u7531 observeOn() \u6307\u5b9a       .observeOn(AndroidSchedulers.mainThread)        .subscribe(subscriber);  // Android \u4e3b\u7ebf\u7a0b\uff0c\u7531 observeOn() \u6307\u5b9a</code></p> <p>\u4ee5\u4e0a\u4e3a\u4f8b\uff0c\u6211\u4eec\u77e5\u9053subscribeOn()\u6307\u5b9a\u4e8b\u4ef6\u4ea7\u751f\u7684\u7ebf\u7a0b\uff0cobserveOn()\u6307\u5b9asubscribe()\u8fd0\u884c\u7684\u7ebf\u7a0b\u3002</p> <ul> <li> <p>subscribeOn()\u7684\u539f\u7406\u56fe</p> <p></p> <p>subscribeOn()\u53d1\u751f\u5728OnSubscribe()\u4e2d\uff0c\u901a\u77e5\u4e0a\u4e00\u7ea7\u4e4b\u524d\u3002\u6b64\u65f6\u4e8b\u4ef6\u8fd8\u6ca1\u6709\u53d1\u9001\uff0c\u5728\u4e8b\u4ef6\u5f00\u7aef \u5c31\u8fdb\u884c\u4e86\u5207\u6362\uff0c\u56e0\u6b64\u5f53\u6709\u591a\u4e2asubscribeOn()\u65f6\uff0c\u4f1a\u88ab\u7b2c\u4e00\u4e2asubscribeOn()\u62e6\u622a\uff0c\u540e\u7eed\u7684subscribeOn()\u5c06\u4e0d\u4f1a\u5bf9\u4e8b\u4ef6\u6d41\u7a0b\u53d1\u751f\u6539\u53d8\u3002</p> </li> <li> <p>observeOn()\u7684\u539f\u7406\u56fe</p> <p></p> <p>observeOn()\u53d1\u751f\u5728\u81ea\u5df1\u5185\u5efa\u7684Subscriber\u4e2d\uff0c\u53d1\u751f\u5728\u5373\u5c06\u53d1\u9001\u7ed9\u4e0b\u4e00\u7ea7\u7684Subscriber\u4e2d\uff0c\u63a7\u5236\u7684\u662f\u540e\u9762\u7684\u7ebf\u7a0b\uff0c\u56e0\u6b64\u53ef\u4ee5\u6709\u591a\u4e2aobserveOn()\u53d1\u751f\u3002</p> <ul> <li>doOnSubscribe():\u56e0\u4e3aSubscriber.onStart()\u53d1\u751f\u5728\u4e8b\u4ef6\u53d1\u9001\u4e4b\u524d\uff0c\u800csubscribe()\u6240\u8fd0\u884c\u7684\u7ebf\u7a0b\u53ef\u4ee5\u88abobserve()\u6307\u5b9a\uff0c\u6240\u4ee5onStart()\u53d1\u751f\u5728\u54ea\u4e2a\u7ebf\u7a0b\u4e0d\u80fd\u6307\u5b9a\uff0c\u4e00\u4e9b\u9700\u8981\u6570\u636e\u51c6\u5907\u5728\u4e3b\u7ebf\u7a0b\u7684\u64cd\u4f5c\u65e0\u6cd5\u6267\u884c\uff0c\u4e8e\u662f\u4f7f\u7528\u4e86doOnSubscribe()\u65b9\u6cd5\u3002</li> <li>doOnsubscibe()\u9ed8\u8ba4\u53d1\u751f\u7684\u7ebf\u7a0b\u662fsubscibe()\u53d1\u751f\u7684\u7ebf\u7a0b\u3002</li> <li>\u53ef\u4ee5\u5728doOnsubscribe()\u4e4b\u540e\u7531subscribeOn()\u6307\u5b9a\u6240\u53d1\u751f\u7684\u7ebf\u7a0b</li> </ul> <p><code>java Observable.create(onSubscribe)     .subscribeOn(Schedulers.io())     .doOnSubscribe(new Action0() {         @Override         public void call() {             progressBar.setVisibility(View.VISIBLE); // \u9700\u8981\u5728\u4e3b\u7ebf\u7a0b\u6267\u884c         }     })     .subscribeOn(AndroidSchedulers.mainThread()) // \u6307\u5b9a\u4e3b\u7ebf\u7a0b     .observeOn(AndroidSchedulers.mainThread())     .subscribe(subscriber);</code></p> </li> </ul>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#5","title":"5. \u53d8\u6362\u539f\u7406","text":"<p>\u5c06\u4e8b\u4ef6\u5e8f\u5217\u4e2d\u7684\u5bf9\u8c61\u6216\u6574\u4e2a\u5e8f\u5217\u8fdb\u884c\u52a0\u5de5\u5904\u7406\uff0c\u8f6c\u6362\u6210\u4e0d\u540c\u7684\u4e8b\u4ef6\u3002</p> <p>\u53d8\u6362\u64cd\u4f5c\u53d1\u751f\u5728\u8ba2\u9605\u4e4b\u524d\uff0c\u9ed8\u8ba4\u548c\u4e8b\u4ef6\u53d1\u5c04\u662f\u540c\u4e2a\u7ebf\u7a0b</p> <ul> <li> <p>\u53d8\u6362\u7684\u539f\u7406\uff1alift().  map()\u548cflatmop()\u90fd\u662f\u57fa\u4e8e\u8fd9\u4e2a\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> </li> <li> <p>\u6838\u5fc3\u6e90\u7801\uff1a</p> <p><code>java // \u6ce8\u610f\uff1a\u8fd9\u4e0d\u662f lift() \u7684\u6e90\u7801\uff0c\u800c\u662f\u5c06\u6e90\u7801\u4e2d\u4e0e\u6027\u80fd\u3001\u517c\u5bb9\u6027\u3001\u6269\u5c55\u6027\u6709\u5173\u7684\u4ee3\u7801\u5254\u9664\u540e\u7684\u6838\u5fc3\u4ee3\u7801\u3002 // \u5982\u679c\u9700\u8981\u770b\u6e90\u7801\uff0c\u53ef\u4ee5\u53bb RxJava \u7684 GitHub \u4ed3\u5e93\u4e0b\u8f7d\u3002 public &lt;R&gt; Observable&lt;R&gt; lift(Operator&lt;? extends R, ? super T&gt; operator) {     return Observable.create(new OnSubscribe&lt;R&gt;() {         @Override         public void call(Subscriber subscriber) {             Subscriber newSubscriber = operator.call(subscriber);             newSubscriber.onStart();             onSubscribe.call(newSubscriber);         }     }); }</code></p> </li> <li> <p><code>subscribe()</code> \u4e2d\u8fd9\u53e5\u8bdd\u7684 <code>onSubscribe</code> \u6307\u7684\u662f <code>Observable</code> \u4e2d\u7684 <code>onSubscribe</code> \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u6ca1\u6709\u95ee\u9898\uff0c\u4f46\u662f <code>lift()</code> \u4e4b\u540e\u7684\u60c5\u51b5\u5c31\u590d\u6742\u4e86\u70b9\u3002</p> </li> <li> <p>\u5f53\u542b\u6709 <code>lift()</code> \u65f6\uff1a     1.<code>lift()</code> \u521b\u5efa\u4e86\u4e00\u4e2a <code>Observable</code> \u540e\uff0c\u52a0\u4e0a\u4e4b\u524d\u7684\u539f\u59cb <code>Observable</code>\uff0c\u5df2\u7ecf\u6709\u4e24\u4e2a <code>Observable</code> \u4e86\uff1b     2.\u800c\u540c\u6837\u5730\uff0c\u65b0 <code>Observable</code> \u91cc\u7684\u65b0 <code>OnSubscribe</code> \u52a0\u4e0a\u4e4b\u524d\u7684\u539f\u59cb <code>Observable</code> \u4e2d\u7684\u539f\u59cb <code>OnSubscribe</code>\uff0c\u4e5f\u5c31\u6709\u4e86\u4e24\u4e2a <code>OnSubscribe</code>\uff1b     3.\u5f53\u7528\u6237\u8c03\u7528\u7ecf\u8fc7 <code>lift()</code> \u540e\u7684 <code>Observable</code> \u7684 <code>subscribe()</code> \u7684\u65f6\u5019\uff0c\u4f7f\u7528\u7684\u662f <code>lift()</code> \u6240\u8fd4\u56de\u7684\u65b0\u7684 <code>Observable</code> \uff0c\u4e8e\u662f\u5b83\u6240\u89e6\u53d1\u7684 <code>onSubscribe.call(subscriber)</code>\uff0c\u4e5f\u662f\u7528\u7684\u65b0 <code>Observable</code> \u4e2d\u7684\u65b0 <code>OnSubscribe</code>\uff0c\u5373\u5728 <code>lift()</code> \u4e2d\u751f\u6210\u7684\u90a3\u4e2a <code>OnSubscribe</code>\uff1b     4.\u800c\u8fd9\u4e2a\u65b0 <code>OnSubscribe</code> \u7684 <code>call()</code> \u65b9\u6cd5\u4e2d\u7684 <code>onSubscribe</code> \uff0c\u5c31\u662f\u6307\u7684\u539f\u59cb <code>Observable</code> \u4e2d\u7684\u539f\u59cb <code>OnSubscribe</code> \uff0c\u5728\u8fd9\u4e2a <code>call()</code> \u65b9\u6cd5\u91cc\uff0c\u65b0 <code>OnSubscribe</code> \u5229\u7528 <code>operator.call(subscriber)</code> \u751f\u6210\u4e86\u4e00\u4e2a\u65b0\u7684 <code>Subscriber</code>\uff08<code>Operator</code> \u5c31\u662f\u5728\u8fd9\u91cc\uff0c\u901a\u8fc7\u81ea\u5df1\u7684 <code>call()</code> \u65b9\u6cd5\u5c06\u65b0 <code>Subscriber</code> \u548c\u539f\u59cb <code>Subscriber</code> \u8fdb\u884c\u5173\u8054\uff0c\u5e76\u63d2\u5165\u81ea\u5df1\u7684\u300e\u53d8\u6362\u300f\u4ee3\u7801\u4ee5\u5b9e\u73b0\u53d8\u6362\uff09\uff0c\u7136\u540e\u5229\u7528\u8fd9\u4e2a\u65b0 <code>Subscriber</code> \u5411\u539f\u59cb <code>Observable</code> \u8fdb\u884c\u8ba2\u9605\u3002     \u8fd9\u6837\u5c31\u5b9e\u73b0\u4e86 <code>lift()</code> \u8fc7\u7a0b\uff0c\u6709\u70b9\u50cf\u4e00\u79cd\u4ee3\u7406\u673a\u5236\uff0c\u901a\u8fc7\u4e8b\u4ef6\u62e6\u622a\u548c\u5904\u7406\u5b9e\u73b0\u4e8b\u4ef6\u5e8f\u5217\u7684\u53d8\u6362</p> </li> <li> <p>\u7b80\u5355\u8bf4\uff1a\u5f53observable\u6267\u884c\u4e86lift()\u51fd\u6570\u4ee5\u540e\uff0c\u8fd4\u56de\u7684\u662f\u65b0\u7684observable\uff0c\u8fd9\u4e2a\u65b0\u7684observable\u5c06\u539f\u59cb\u7684observable\u53d1\u51fa\u7684\u4e8b\u4ef6\u8fdb\u884c\u5904\u7406\u548c\u53d8\u6362\uff0c\u6700\u540e\u8fd4\u56de\u7ed9subcriber.</p> <p></p> </li> </ul>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#6observable","title":"6\u3001\u51b7/\u70edObservable","text":"<p>https://juejin.cn/post/6844903476883881998#comment</p> <ul> <li>hot Observable </li> </ul> <p>\u5982\u679c\u5f00\u59cb\u4f20\u8f93\u6570\u636e\uff0c\u4f60\u4e0d\u4e3b\u52a8\u558a\u505c(<code>dispose()</code>/<code>cancel()</code>)\uff0c\u90a3\u4e48\u4ed6\u5c31\u4e0d\u4f1a\u505c\uff0c\u4e00\u76f4\u53d1\u5c04\u6570\u636e\uff0c\u5373\u4f7f\u4ed6\u5df2\u7ecf\u6ca1\u6709Subscriber\u4e86\u3002\u7279\u70b9\uff1a\u4e0d\u540c\u7684Subscriber\uff0c\u5171\u4eab\u4e8b\u4ef6</p> <p>\u53ef\u4ee5\u4f7f\u7528<code>publish</code>\u5c06Cold  Observable\u8f6c\u6362\u4e3ahot Observable\u3002</p> <ul> <li>Cold  Observable</li> </ul> <p>\u53ea\u6709\u5f53\u8ba2\u9605(subscriber)\u4e86\u7684\u65f6\u5019\u624d\u4f1a\u53d1\u5c04\u4e8b\u4ef6\u3002\u7279\u70b9\uff1a\u5f53\u4f60\u6709\u591a\u4e2aSubscriber\u7684\u65f6\u5019\uff0c\u4ed6\u4eec\u7684\u4e8b\u4ef6\u662f\u72ec\u7acb\u7684</p> <p>\u200b      \u5e38\u89c1\u7684\u5de5\u5382\u65b9\u6cd5\u90fd\u662fCold  Observable\uff0c\u4f8b\u5982<code>create</code>\u3001<code>defer</code>\u3001<code>fromXX</code>\u7b49</p>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#7transformer","title":"7\u3001transformer","text":"<p>ObservableTransformer,FlowableTransformer,SingleTransformer,MaybeTransformer,CompletableTransformer\u3002</p>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#4rxjava-observable","title":"4\u3001RxJava Observable \u64cd\u4f5c\u7b26","text":""},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#1","title":"1\u3001\u521b\u5efa\u578b","text":"<p>\u4e00\u822c\u5728\u6700\u4e0a\u6e38\uff0c\u9759\u6001\u65b9\u6cd5</p> \u64cd\u4f5c\u7b26 \u8bf4\u660e create(emitter -&gt; {}) \u901a\u8fc7emitter\u6765\u53d1\u5c04\u4e8b\u4ef6\uff0c\u4ece\u800c\u521b\u5efa\u4e00\u4e2aObservable\u9700\u8981\u81ea\u5df1\u5b9e\u73b0onNext()\u3001onError()\u3001onComplete()\u7684\u903b\u8f91 just(c) \u8ddf\u8fdb\u7ed9\u5b9a\u7684\u5e38\u91cf\u6216\u8868\u8fbe\u5f0f\u521b\u5efaObservablec\u5982\u679c\u662f\u8868\u8fbe\u5f0f\uff0c\u90a3\u5728\u8ba2\u9605\u524d\u5df2\u7ecf\u5b8c\u6210\uff0c\u6210\u4e3a\u5e38\u91cf\uff0c\u518d\u6b21\u8ba2\u9605\u4e5f\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8 defer(callable) \u6bd4just\u7075\u6d3b\uff0c\u8ba2\u9605\u7684\u65f6\u5019\u624d\u4f1a\u521b\u5efaObservable\uff0c\u5e76\u4e14\u4e3a\u6bcf\u4e2a\u8ba2\u9605\u8005\u521b\u5efa\u81ea\u5df1\u7684Obserablecallable\u4e00\u822c\u4e3a\u9759\u6001\u56de\u8c03 fromCallable(callable) \u901a\u8fc7Callable\u521b\u5efaObservable\u4e0edefer\u7565\u6709\u4e0d\u540c\uff0c\u4f1a\u66f4\u6ce8\u91cdObservable\u7684\u5f02\u6b65\u7684\u60c5\u51b5 fromFuture(future) \u62e5\u6709\u66f4\u591a\u5f02\u6b65\u53ef\u9009\u9879\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbe\u7f6e\u8c03\u5ea6\u5668\u548c\u8d85\u65f6\u65f6\u95f4 fromArray(array)fromIterable(iterable) \u62c6\u5206\u6570\u7ec4\u3001\u8fed\u4ee3\u5668\uff0c\u4f9d\u6b21\u53d1\u5c04\u4e8b\u4ef6 repeat(int) \u91cd\u590d\u521b\u5efan\u4e2aint\u6570\u636e\u7684Observable range() \u521b\u5efa\u6570\u5b57\u533a\u95f4\u6570\u636e\u7684Observable rangelong() range\u7684\u552f\u4e00\u533a\u522b\u662f\u6570\u636e\u7c7b\u578b\u662flong interval() \u521b\u5efa\u5468\u671f\u53d1\u5c04\u7684Observable\uff0c\u9ed8\u8ba4\u8c03\u5ea6\u5668\u4e3acomputation intervaRangel() \u6bcf\u9694\u6307\u5b9a\u65f6\u95f4\u5c31\u53d1\u9001 \u4e8b\u4ef6\uff0c\u53ef\u6307\u5b9a\u4e8b\u4ef6\u5e8f\u5217\u8d77\u70b9\uff0c\u53ef\u6307\u5b9a\u53d1\u9001\u6570\u636e\u7684\u6570\u91cf timer() \u521b\u5efa\u5ef6\u65f6\u53d1\u5c04\u7684Observable\uff0c\u9ed8\u8ba4\u8c03\u5ea6\u5668\u4e3acomputation <ul> <li>just</li> </ul> <p>\u5feb\u901f\u521b\u5efa\u591a\u4e2a\u89c2\u5bdf\u8005\u5bf9\u8c61\uff0c\u6700\u591a\u53ea\u80fd\u4f20\u5165\u5341\u4e2a\u5bf9\u8c61\uff0c\u5982\u679c\u6709\u8868\u8fbe\u5f0f\uff0c\u4f1a\u5728\u4f20\u5165\u4e8b\u4ef6\u4e4b\u524d\u4ea7\u751f\u3002</p> <p><code>java   Observable.just(1,2,3,4)                  .subscribe(rst-&gt;{                      Log.d(TAG, \"testRxjava: \"+ rst);                  });</code></p> <ul> <li>fromArray </li> </ul> <p>\u4f1a\u5c06\u6570\u7ec4\u8fdb\u884c\u62c6\u5206\uff0c\u4f9d\u6b21\u53d1\u5c04\u4e8b\u4ef6\uff0c\u4f46\u662f\u82e5\u662flist\u96c6\u5408\uff0c\u5219\u4f1a\u4e00\u6b21\u6027\u53d1\u5c04\uff0c\u53ef\u4ee5\u4f20\u5165\u5341\u4e2a\u5bf9\u8c61\u4ee5\u4e0a</p> <p><code>java    //\u6570\u7ec4\u5fc5\u987b\u4f7f\u7528\u5f15\u7528\u5bf9\u8c61   Integer[] str = {1, 2};           Observable.fromArray(str)                   .subscribe(rst-&gt;{                       Log.d(TAG, \"testRxjava: \"+ rst);                   });</code></p> <ul> <li>fromIterable</li> </ul> <p>\u53d1\u9001\u4e8b\u4ef6\u7684\u7279\u70b9\uff1a\u76f4\u63a5\u53d1\u9001 \u4f20\u5165\u7684\u96c6\u5408<code>List</code>\u6570\u636e,\u4f1a\u8fdb\u884clist\u96c6\u5408\u7684\u904d\u5386\uff0c\u53ef\u4ee5\u4f20\u5165\u5341\u4e2a\u5bf9\u8c61\u4ee5\u4e0a</p> <p><code>java    //\u53c2\u6570\u5fc5\u987b\u662flist \u6216 iterator   ArrayList&lt;String&gt; str1 = new ArrayList&lt;String&gt;();           str1.add(\"zhangsan\");           str1.add(\"lisi\");           Observable.fromIterable(str1)                   .subscribe(rst-&gt;{                       Log.d(TAG, \"testRxjava: \"+ rst);                   });</code></p> <ul> <li>defer()</li> </ul> <p>\u5ef6\u8fdf\u521b\u5efa\uff0c\u76f4\u5230\u6709\u89c2\u5bdf\u8005\uff08<code>Observer</code> \uff09\u8ba2\u9605\u65f6\uff0c\u624d\u52a8\u6001\u521b\u5efa\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\uff08<code>Observable</code>\uff09 &amp; \u53d1\u9001\u4e8b\u4ef6</p> <p>\u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a\u52a8\u6001\u521b\u5efa\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\uff08<code>Observable</code>\uff09 &amp; \u83b7\u53d6\u6700\u65b0\u7684<code>Observable</code>\u5bf9\u8c61\u6570\u636e</p> <p>```java          &lt;-- 1. \u7b2c1\u6b21\u5bf9i\u8d4b\u503c -&gt;&gt;           Integer i = 10;</p> <pre><code>      // 2. \u901a\u8fc7defer \u5b9a\u4e49\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\n      // \u6ce8\uff1a\u6b64\u65f6\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\u8fd8\u6ca1\u521b\u5efa\n      Observable&lt;Integer&gt; observable = Observable.defer(new Callable&lt;ObservableSource&lt;? extends Integer&gt;&gt;() {\n          @Override\n          public ObservableSource&lt;? extends Integer&gt; call() throws Exception {\n              return Observable.just(i);\n          }\n      });\n\n      &lt;-- 2. \u7b2c2\u6b21\u5bf9i\u8d4b\u503c -&gt;&gt;\n      i = 15;\n\n      &lt;-- 3. \u89c2\u5bdf\u8005\u5f00\u59cb\u8ba2\u9605 -&gt;&gt;\n      // \u6ce8\uff1a\u6b64\u65f6\uff0c\u624d\u4f1a\u8c03\u7528defer\uff08\uff09\u521b\u5efa\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\uff08Observable\uff09\n      observable.subscribe(new Observer&lt;Integer&gt;() {\n\n          @Override\n          public void onSubscribe(Disposable d) {\n              Log.d(TAG, \"\u5f00\u59cb\u91c7\u7528subscribe\u8fde\u63a5\");\n          }\n\n          @Override\n          public void onNext(Integer value) {\n              Log.d(TAG, \"\u63a5\u6536\u5230\u7684\u6574\u6570\u662f\"+ value  );\n          }\n\n          @Override\n          public void onError(Throwable e) {\n              Log.d(TAG, \"\u5bf9Error\u4e8b\u4ef6\u4f5c\u51fa\u54cd\u5e94\");\n          }\n\n          @Override\n          public void onComplete() {\n              Log.d(TAG, \"\u5bf9Complete\u4e8b\u4ef6\u4f5c\u51fa\u54cd\u5e94\");\n          }\n      });\n</code></pre> <p>```</p> <ul> <li>timer()</li> </ul> <p>\u5ef6\u8fdf\u6307\u5b9a\u65f6\u95f4\u540e\uff0c\u53d1\u90011\u4e2a\u6570\u503c0\uff08<code>Long</code>\u7c7b\u578b\uff09,\u76f8\u5f53\u4e8e\u5ef6\u8fdf\u6307\u5b9a\u65f6\u95f4\u540e\uff0c\u8c03\u7528\u4e00\u6b21 <code>onNext(0)</code></p> <p><code>java   Observable.timer(2, TimeUnit.SECONDS)                      .subscribe(rst-&gt; {});</code></p> <ul> <li>Interval()</li> </ul> <p>\u6bcf\u9694\u6307\u5b9a\u65f6\u95f4\u5c31\u53d1\u9001 \u4e8b\u4ef6\uff0c\u4ece0\u5f00\u59cb\u3001\u65e0\u9650\u9012\u589e1\u7684\u6574\u6570\u5e8f\u5217</p> <p><code>java     // \u53c2\u6570\u8bf4\u660e\uff1a           // \u53c2\u65701 = \u7b2c1\u6b21\u5ef6\u8fdf\u65f6\u95f4\uff1b           // \u53c2\u65702 = \u95f4\u9694\u65f6\u95f4\u6570\u5b57\uff1b           // \u53c2\u65703 = \u65f6\u95f4\u5355\u4f4d   Observable.interval(3,1,TimeUnit.SECONDS)                   // \u5ef6\u8fdf3s\u540e\u53d1\u9001\u4e8b\u4ef6\uff0c\u6bcf\u96941\u79d2\u4ea7\u751f1\u4e2a\u6570\u5b57\uff08\u4ece0\u5f00\u59cb\u9012\u589e1\uff0c\u65e0\u9650\u4e2a\uff09                   .subscribe(rst-&gt;{})</code></p> <ul> <li>IntervalRange()</li> </ul> <p>\u6bcf\u9694\u6307\u5b9a\u65f6\u95f4\u5c31\u53d1\u9001 \u4e8b\u4ef6\uff0c\u53ef\u6307\u5b9a\u4e8b\u4ef6\u5e8f\u5217\u8d77\u70b9\uff0c\u53ef\u6307\u5b9a\u53d1\u9001\u6570\u636e\u7684\u6570\u91cf</p> <p><code>java   // \u53c2\u65701 = \u4e8b\u4ef6\u5e8f\u5217\u8d77\u59cb\u70b9\uff1b           // \u53c2\u65702 = \u4e8b\u4ef6\u6570\u91cf\uff1b           // \u53c2\u65703 = \u7b2c1\u6b21\u4e8b\u4ef6\u5ef6\u8fdf\u53d1\u9001\u65f6\u95f4\uff1b           // \u53c2\u65704 = \u95f4\u9694\u65f6\u95f4\u6570\u5b57\uff1b           // \u53c2\u65705 = \u65f6\u95f4\u5355\u4f4d           Observable.intervalRange(3,10,2, 1, TimeUnit.SECONDS)             // \u5ef6\u8fdf2s\u540e\u53d1\u900110\u4e2a\u4e8b\u4ef6\uff0c\u6bcf\u96941\u79d2\u4ea7\u751f1\u4e2a\u6570\u5b57\uff08\u4ece3\u5f00\u59cb\u9012\u589e1\uff09             .subcribe(rst-&gt;{});</code></p> <ul> <li>range()</li> </ul> <p>\u53d1\u9001\u4e8b\u4ef6\u7684\u7279\u70b9\uff1a\u8fde\u7eed\u53d1\u9001m\u4e2a\u4e8b\u4ef6\u5e8f\u5217\uff0c\u53ef\u6307\u5b9a\u4e8b\u4ef6\u5e8f\u5217\u7684\u8303\u56f4,[n,n+m-1];</p> <p><code>java   // \u53c2\u6570\u8bf4\u660e\uff1a           // \u53c2\u65701 = \u4e8b\u4ef6\u5e8f\u5217\u8d77\u59cb\u70b9\uff1b           // \u53c2\u65702 = \u4e8b\u4ef6\u6570\u91cf\uff1b           // \u6ce8\uff1a\u82e5\u8bbe\u7f6e\u4e3a\u8d1f\u6570\uff0c\u5219\u4f1a\u629b\u51fa\u5f02\u5e38           Observable.range(3,10)             .subcribe(rst-&gt;{});</code></p> <ul> <li>rangeLong\uff08\uff09 </li> </ul> <p>\u540crange() \u53ea\u662f\u7c7b\u578b\u662flong</p> <p>\u4ee5\u4e0b\u9002\u7528\u4e8e\u6d4b\u8bd5\u65f6\u4f7f\u7528</p> <pre><code>/ \u4e0b\u5217\u65b9\u6cd5\u4e00\u822c\u7528\u4e8e\u6d4b\u8bd5\u4f7f\u7528\n\n&lt;-- empty()  --&gt;\n// \u8be5\u65b9\u6cd5\u521b\u5efa\u7684\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\u53d1\u9001\u4e8b\u4ef6\u7684\u7279\u70b9\uff1a\u4ec5\u53d1\u9001Complete\u4e8b\u4ef6\uff0c\u76f4\u63a5\u901a\u77e5\u5b8c\u6210\nObservable observable1=Observable.empty(); \n// \u5373\u89c2\u5bdf\u8005\u63a5\u6536\u540e\u4f1a\u76f4\u63a5\u8c03\u7528onCompleted\uff08\uff09\n\n&lt;-- error()  --&gt;\n// \u8be5\u65b9\u6cd5\u521b\u5efa\u7684\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\u53d1\u9001\u4e8b\u4ef6\u7684\u7279\u70b9\uff1a\u4ec5\u53d1\u9001Error\u4e8b\u4ef6\uff0c\u76f4\u63a5\u901a\u77e5\u5f02\u5e38\n// \u53ef\u81ea\u5b9a\u4e49\u5f02\u5e38\nObservable observable2=Observable.error(new RuntimeException())\n// \u5373\u89c2\u5bdf\u8005\u63a5\u6536\u540e\u4f1a\u76f4\u63a5\u8c03\u7528onError\uff08\uff09\n\n&lt;-- never()  --&gt;\n// \u8be5\u65b9\u6cd5\u521b\u5efa\u7684\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\u53d1\u9001\u4e8b\u4ef6\u7684\u7279\u70b9\uff1a\u4e0d\u53d1\u9001\u4efb\u4f55\u4e8b\u4ef6\nObservable observable3=Observable.never();\n// \u5373\u89c2\u5bdf\u8005\u63a5\u6536\u540e\u4ec0\u4e48\u90fd\u4e0d\u8c03\u7528\n</code></pre>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#2_1","title":"2\u3001\u53d8\u6362\u64cd\u4f5c\u7b26","text":"<p>\u8fdb\u884c\u6570\u636e\u8f6c\u6362\uff0c\u6709\u8f93\u5165\uff0c\u6709\u8f93\u51fa</p> \u64cd\u4f5c\u7b26 \u8bf4\u660e map(a -&gt; b\uff09 a\u8f6c\u6210b flatMap(a -&gt; observable\uff09 a\u8f6c\u6210observable concatMap(a -&gt; observable\uff09 flatMap\u4e0d\u80fd\u4fdd\u8bc1\u8f93\u51fa\u987a\u5e8f\u548c\u8f93\u5165\u987a\u5e8f\u4e00\u81f4\uff0cconcatMap\u5219\u662f\u4fdd\u8bc1\u987a\u5e8f\u7684 switchMap(a -&gt; observable) \u5f53\u6e90Observable\u53d1\u5c04\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u9879\u65f6\uff0c\u5982\u679c\u65e7\u6570\u636e\u9879\u8ba2\u9605\u8fd8\u672a\u5b8c\u6210\uff0c\u5c31\u53d6\u6d88\u65e7\u8ba2\u9605\u6570\u636e\u548c\u505c\u6b62\u76d1\u89c6\u90a3\u4e2a\u6570\u636e\u9879\u4ea7\u751f\u7684Observable\uff0c\u5f00\u59cb\u76d1\u89c6\u65b0\u7684\u6570\u636e\u9879\u3002\u5982\u679c\u6e90Observable\u548c\u65b0Observable\u90fd\u662f\u5728\u540c\u4e00\u4e2a\u7ebf\u7a0b\u91cc\u8dd1\u7684\u8bdd\uff0c\u90a3\u4e48\u8be5\u64cd\u4f5c\u7b26\u4e0eContactMap\u65e0\u5f02\uff1b\u53ea\u6709\u6e90Observable\u548c\u65b0Observable\u5728\u4e0d\u540c\u7684\u7ebf\u7a0b\u91cc\u8dd1\u7684\u65f6\u5019\uff0c\u5373\u65b0Observable\u7ebf\u7a0b\u65b9\u6848\u4e3anewThread\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002 debounce \u5bf9Observable\u6bcf\u4ea7\u751f\u4e00\u4e2a\u7ed3\u679c\u540e\uff0c\u5982\u679c\u5728\u89c4\u5b9a\u7684\u95f4\u9694\u65f6\u95f4\u5185\u6ca1\u6709\u522b\u7684\u7ed3\u679c\u4ea7\u751f\uff0c\u5219\u628a\u8fd9\u4e2a\u7ed3\u679c\u63d0\u4ea4\u7ed9\u8ba2\u9605\u8005\u5904\u7406\uff0c\u5426\u5219\u5ffd\u7565\u8be5\u7ed3\u679c\u3002 flatMapIterable(a -&gt; iterable) \u4f5c\u8005\uff1a\u4ee3\u7801\u6539\u53d8\u4eba\u751f \u94fe\u63a5\uff1ahttps://www.jianshu.com/p/9ddbb4144a4d \u6765\u6e90\uff1a\u7b80\u4e66 \u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002a\u8f6c\u4e3aiterable\uff0c\u4f9d\u6b21\u53d1\u5c04 scan((a, b) -&gt; f(a, b) f(a, b)\u7684\u7ed3\u679c\u4f20\u9012\u7ed9\u4e0b\u6e38\uff0c\u540c\u65f6\u8fd8\u4f1a\u8d4b\u503c\u7ed9a\uff0c\u4e00\u76f4\u7d2f\u8ba1 compose \u5bf9 Observable \u8fdb\u884c\u6574\u4f53\u7684\u53d8\u6362\uff0ccompose\u80fd\u591f\u4ece\u6570\u636e\u6d41\u4e2d\u5f97\u5230\u539f\u59cb\u7684\u88ab\u89c2\u5bdf\u8005\uff0c\u5f53\u521b\u5efa\u88ab\u89c2\u5bdf\u8005\u65f6\uff0ccompose \u64cd\u4f5c\u7b26\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u800c\u4e0d\u50cf\u5176\u4ed6\u7684\u64cd\u4f5c\u7b26\u9700\u8981\u5728 onNext() \u8c03\u7528\u540e\u624d\u80fd\u6267\u884c <ul> <li>map()</li> </ul> <pre><code>Observable.just(\"images/logo.png\") // \u8f93\u5165\u7c7b\u578b String\n    .map(new Func1&lt;String, Bitmap&gt;() {\n        @Override\n        public Bitmap call(String filePath) { // \u53c2\u6570\u7c7b\u578b String\n            return getBitmapFromPath(filePath); // \u8fd4\u56de\u7c7b\u578b Bitmap\n        }\n    })\n    .subscribe(new Action1&lt;Bitmap&gt;() {\n        @Override\n        public void call(Bitmap bitmap) { // \u53c2\u6570\u7c7b\u578b Bitmap\n            showBitmap(bitmap);\n        }\n    });\n</code></pre> <p><code>map()</code> \u65b9\u6cd5\u5c06\u53c2\u6570\u4e2d\u7684 <code>String</code> \u5bf9\u8c61\u8f6c\u6362\u6210\u4e00\u4e2a <code>Bitmap</code> \u5bf9\u8c61\u540e\u8fd4\u56de\uff0c\u800c\u5728\u7ecf\u8fc7 <code>map()</code> \u65b9\u6cd5\u540e\uff0c\u4e8b\u4ef6\u7684\u53c2\u6570\u7c7b\u578b\u4e5f\u7531 <code>String</code> \u8f6c\u4e3a\u4e86 <code>Bitmap</code>\u3002\u8fd9\u79cd\u76f4\u63a5\u53d8\u6362\u5bf9\u8c61\u5e76\u8fd4\u56de\u7684\uff0c\u662f\u6700\u5e38\u89c1\u7684\u4e5f\u6700\u5bb9\u6613\u7406\u89e3\u7684\u53d8\u6362\u3002</p> <p>map()\u7684\u53d8\u6362\u793a\u610f\u56fe\uff1a</p> <p></p> <ul> <li>flatmap():</li> </ul> <p>\u793a\u4f8b\uff1a\u4e00\u4e2a\u5b66\u751f\u6709\u591a\u95e8\u8bfe\u7a0b\uff0c\u6253\u5370\u51fa\u6240\u6709\u5b66\u751f\u62e5\u6709\u7684\u8bfe\u7a0b\u3002</p> <pre><code>Student[] students = ...;\nSubscriber&lt;Course&gt; subscriber = new Subscriber&lt;Course&gt;() {\n    @Override\n    public void onNext(Course course) {\n        Log.d(tag, course.getName());\n    }\n    ...\n};\nObservable.from(students)\n    .flatMap(new Func1&lt;Student, Observable&lt;Course&gt;&gt;() {\n        @Override\n        public Observable&lt;Course&gt; call(Student student) {\n            return Observable.from(student.getCourses());\n        }\n    })\n    .subscribe(subscriber);\n</code></pre> <p><code>flatMap()</code> \u548c <code>map()</code> \u6709\u4e00\u4e2a\u76f8\u540c\u70b9\uff1a\u5b83\u4e5f\u662f\u628a\u4f20\u5165\u7684\u53c2\u6570\u8f6c\u5316\u4e4b\u540e\u8fd4\u56de\u53e6\u4e00\u4e2a\u5bf9\u8c61\u3002\u4f46\u9700\u8981\u6ce8\u610f\uff0c\u548c <code>map()</code> \u4e0d\u540c\u7684\u662f\uff0c <code>flatMap()</code> \u4e2d\u8fd4\u56de\u7684\u662f\u4e2a <code>Observable</code> \u5bf9\u8c61\uff0c\u5e76\u4e14\u8fd9\u4e2a <code>Observable</code> \u5bf9\u8c61\u5e76\u4e0d\u662f\u88ab\u76f4\u63a5\u53d1\u9001\u5230\u4e86 <code>Subscriber</code> \u7684\u56de\u8c03\u65b9\u6cd5\u4e2d\u3002 <code>flatMap()</code> \u7684\u539f\u7406\u662f\u8fd9\u6837\u7684\uff1a</p> <ol> <li>\u4f7f\u7528\u4f20\u5165\u7684\u4e8b\u4ef6\u5bf9\u8c61\u521b\u5efa\u4e00\u4e2a <code>Observable</code> \u5bf9\u8c61\uff1b</li> <li>\u5e76\u4e0d\u53d1\u9001\u8fd9\u4e2a <code>Observable</code>, \u800c\u662f\u5c06\u5b83\u6fc0\u6d3b\uff0c\u4e8e\u662f\u5b83\u5f00\u59cb\u53d1\u9001\u4e8b\u4ef6\uff1b</li> <li>\u6bcf\u4e00\u4e2a\u521b\u5efa\u51fa\u6765\u7684 <code>Observable</code> \u53d1\u9001\u7684\u4e8b\u4ef6\uff0c\u90fd\u88ab\u6c47\u5165\u540c\u4e00\u4e2a <code>Observable</code> \uff0c\u800c\u8fd9\u4e2a <code>Observable</code> \u8d1f\u8d23\u5c06\u8fd9\u4e9b\u4e8b\u4ef6\u7edf\u4e00\u4ea4\u7ed9 <code>Subscriber</code> \u7684\u56de\u8c03\u65b9\u6cd5\u3002</li> </ol> <p>\u8fd9\u4e09\u4e2a\u6b65\u9aa4\uff0c\u628a\u4e8b\u4ef6\u62c6\u6210\u4e86\u4e24\u7ea7\uff0c\u901a\u8fc7\u4e00\u7ec4\u65b0\u521b\u5efa\u7684 <code>Observable</code> \u5c06\u521d\u59cb\u7684\u5bf9\u8c61\u300e\u94fa\u5e73\u300f\u4e4b\u540e\u901a\u8fc7\u7edf\u4e00\u8def\u5f84\u5206\u53d1\u4e86\u4e0b\u53bb\u3002\u800c\u8fd9\u4e2a\u300e\u94fa\u5e73\u300f\u5c31\u662f <code>flatMap()</code> \u6240\u8c13\u7684 flat\u3002</p> <p></p> <ul> <li>concatMap()</li> </ul> <p>\u7c7b\u4f3cFloatMap,\u533a\u522b\u5728\u4e8e\u62c6\u5206 &amp; \u91cd\u65b0\u5408\u5e76\u751f\u6210\u7684\u4e8b\u4ef6\u5e8f\u5217 \u7684\u987a\u5e8f = \u88ab\u89c2\u5bdf\u8005\u65e7\u5e8f\u5217\u751f\u4ea7\u7684\u987a\u5e8f\uff0c\u65b0\u751f\u6210\u7684Observable\u5fc5\u987b\u5b9e\u73b0onComplete()\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5728onComplete()\u4e4b\u540e,\u624d\u4f1a\u8fdb\u884c\u65b0\u7684\u4e8b\u4ef6\u53d1\u5c04\u3002</p> <p>```java      Observable.range(1,2)                   .concatMap(new Function&gt;() {                       @Override                       public Observable apply(@NonNull Integer integer) throws Exception { <pre><code>                      return Observable.create(new ObservableOnSubscribe&lt;String&gt;() {\n\n                          @Override\n                          public void subscribe(@NonNull ObservableEmitter&lt;String&gt; e) {\n                              try {\n                                  testRxjava test = NetEngineFactory.CreateNetEngine(OkHttpNetEngine.class, RxjavaMainActivity.this).testFloatMap();\n</code></pre> <p>//                                    Log.d(TAG, \"subscribe: \"+ test.getErrno());                                       e.onNext(test.getErrno());                                       e.onComplete();                                   }catch (Exception error){                                       e.onError(error);                                   }                               }                           });                       }                   })                   .subscribe(rst -&gt; {           }, error -&gt; {           });   ```</p> <ul> <li>switchMap()</li> </ul> <p>New Observable \u7684Schedulers\u4e3anewThread()\u65f6\uff0c\u4ee5\u4e0b\u7684\u4f8b\u5b50\u4e2d\u53ea\u4f1a\u8ba2\u9605\u54cd\u5e94\u6700\u540e\u4e00\u4e2a\u3002</p> <p>```java    Observable.range(1,5)                   .switchMap(new Function&gt;() {                       @Override                       public Observable apply(@NonNull Integer integer) throws Exception { <pre><code>                      return Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() {\n\n                          @Override\n                          public void subscribe(@NonNull ObservableEmitter&lt;Integer&gt; e) {\n                              try {\n</code></pre> <p>//                                    testRxjava test = NetEngineFactory.CreateNetEngine(OkHttpNetEngine.class, RxjavaMainActivity.this).testFloatMap();   ////                                    Log.d(TAG, \"subscribe: \"+ test.getErrno());                                       Log.d(TAG, \"subscribe: \"+ Thread.currentThread().getName());                                       e.onNext(integer);                                       e.onComplete();                                   }catch (Exception error){                                       e.onError(error);                                   }                               }                           }).subscribeOn(Schedulers.newThread())                       }                   })</p> <pre><code>              .subscribe(rst -&gt; {\n                  Log.d(TAG, \"testRxjava: \"+rst);\n      }, error -&gt; {\n      });\n</code></pre> <p>```</p> <ul> <li>debounce \u6296\u52a8 \u7b5b\u9009</li> </ul> <p><code>java   Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() {               @Override               public void subscribe(ObservableEmitter&lt;Integer&gt; emitter) throws Exception {                   // send events with simulated time wait                   emitter.onNext(1); // skip                   Thread.sleep(400);                   emitter.onNext(2); // deliver                   Thread.sleep(505);                   emitter.onNext(3); // skip                   Thread.sleep(100);                   emitter.onNext(4); // deliver                   Thread.sleep(605);                   emitter.onNext(5); // deliver                   Thread.sleep(510);                   emitter.onComplete();               }           })                 // \u8bbe\u7f6e\u65f6\u95f4\u4e3a0.5\u79d2               .debounce(500, TimeUnit.MILLISECONDS)                // Run on a background thread                .subscribeOn(Schedulers.io())                // Be notified on the main thread                .observeOn(AndroidSchedulers.mainThread())                 .subscribe(getObserver());   //\u8fd0\u884c\u7ed3\u679c 2 4 5</code></p> <ul> <li> <p>compose</p> </li> <li> <p>\u8fdb\u884c\u7ebf\u7a0b\u5207\u6362</p> <p>compose \u64cd\u4f5c\u7b26\u53ef\u4ee5\u548c Transformer \u7ed3\u5408\u4f7f\u7528,\u63d0\u9ad8\u4ee3\u7801\u7684\u590d\u7528\u6027\uff0c\u540c\u65f6\u4e0d\u5f71\u54cdRxjava\u7684\u94fe\u5f0f\u8c03\u7528\u7684\u7b80\u6d01</p> <p>```java public class ComSchedulerTransformer implements ObservableTransformer { <pre><code>private LifecycleOwner owner;\n\npublic ComSchedulerTransformer(LifecycleOwner owner) {\n    this.owner = owner;\n}\n\n@NonNull\n@Override\npublic ObservableSource&lt;T&gt; apply(@NonNull Observable&lt;T&gt; upstream) {\n    return upstream.subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread());\n}\n</code></pre> <p>} //\u4f7f\u7528\u65f6 .compose(new ComSchedulerTransformer&lt;&gt;()) ```</p> <p>RxLifecycle \u662f trello \u5f00\u6e90\u7684\u4e00\u4e2a\u914d\u7f6e RxJava \u4f7f\u7528\u7684\u5f00\u6e90\u5e93\uff0c\u6211\u4eec\u77e5\u9053 RxJava \u6709\u4e2a\u7f3a\u70b9\u5c31\u662f\u4f1a\u5bfc\u81f4\u5185\u5b58\u6cc4\u9732\uff0c\u6b64\u65f6\uff0cRxLifecycle \u6a2a\u7a7a\u51fa\u4e16\u4e86\uff0c\u5b83\u53ef\u4ee5\u914d\u5408 RxJava \u4e00\u8d77\u4f7f\u7528\uff0c\u53ef\u4ee5\u6709\u6548\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f\u53d1\u751f\u3002</p>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#3_1","title":"3\u3001\u6761\u4ef6/\u5e03\u5c14\u64cd\u4f5c\u7b26","text":""},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#3_2","title":"3\u3001\u529f\u80fd\u578b","text":"<p>\u4f20\u5165\u53c2\u6570\u5373\u53ef\uff0c\u5de5\u5177\u7c7b\u578b\u64cd\u4f5c\u7b26</p> \u64cd\u4f5c\u7b26 \u8bf4\u660e buffer(int) \u6bcf\u96c6\u9f50int\u4e2a\u5143\u7d20\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u96c6\u5408\u53d1\u5c04\u5230\u4e0b\u6e38 buffer(int, timeUnit) \u6bcf\u6536\u96c6\u4e00\u6bb5\u65f6\u95f4\uff0c\u6536\u96c6\u5230\u7684\u5143\u7d20\u4f5c\u4e3a\u4e00\u4e2a\u96c6\u5408\u53d1\u5c04\u5230\u4e0b\u6e38 window(int, timeUnit) \u4e0ebuffer\u7c7b\u4f3c\uff0c\u4f46\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Observable cast(clazz) \u7c7b\u578b\u5f3a\u8f6c timeout(int, timeUnit) \u8d85\u65f6\u629b\u5f02\u5e38\u6216\u53d1\u5c04\u9ed8\u8ba4Observable startWith(c) \u5728\u4e8b\u4ef6\u6e90\u4e4b\u524d\u5148\u53d1\u5c04\u4e00\u4e2a\u4e8b\u4ef6\uff0c\u7ecf\u5e38\u914d\u5408timer\u4f7f\u7528"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#4_2","title":"4\u3001\u8fc7\u6ee4\u578b","text":"<p>\u8ddf\u8fdb\u6761\u4ef6\u8fc7\u6ee4\u8f93\u51fa</p> \u64cd\u4f5c\u7b26 \u8bf4\u660e filter(a -&gt; boolean) \u6bcf\u96c6\u9f50int\u4e2a\u5143\u7d20\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u96c6\u5408\u53d1\u5c04\u5230\u4e0b\u6e38 take(int) \u53d6int\u9879\u5411\u4e0b\u6e38\u53d1\u5c04 takeuntil skip(int) \u5ffd\u7565int\u9879\u540e\uff0c\u518d\u5411\u4e0b\u6e38\u53d1\u5c04 elementAt(int) \u53d1\u5c04\u7b2cint\u9879 debounce(int, timeUnit) \u9632\u6296\uff0c\u4e00\u6bb5\u65f6\u95f4\u5185\u65e0\u65b0\u4e8b\u4ef6\u4f20\u5165\u624d\u4f1a\u628a\u8be5\u4e8b\u4ef6\u5411\u4e0b\u6e38\u53d1\u51fa\uff0c\u5426\u5219\u9057\u5f03 throttle(int, timeUnit) \u91c7\u6837\uff0c\u4e00\u6bb5\u65f6\u95f4\u5185\uff0c\u53ea\u5411\u4e0b\u6e38\u53d1\u5c04\u7b2c\u4e00\u4e2a\u6216\u6700\u540e\u4e00\u4e2a\u63a5\u6536\u5230\u7684\u4e8b\u4ef6 distinct() \u8fc7\u6ee4\u91cd\u590d\u5143\u7d20 first() / last() \u53ea\u53d1\u9001\u6307\u5b9a\u9879\u6216\u7b26\u5408\u6761\u4ef6\u7684\u6307\u5b9a\u9879"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#5_1","title":"5\u3001\u7ec4\u5408\u578b","text":"<p>\u7ec4\u5408\u591a\u4e2aObservable</p> \u64cd\u4f5c\u7b26 \u8bf4\u660e merge(o1, o2) \u7ec4\u54082\u4e2aObservable\uff0c\u5404\u81ea\u6309\u7167\u81ea\u5df1\u7684\u987a\u5e8f\u4e8b\u4ef6\u53d1\u5c04\u5143\u7d20 concat(o1, o2) \u7ec4\u54082\u4e2aObservable\uff0c\u5148\u53d1\u9001\u7684Observable\u53d1\u5c04\u5b8c\u5168\u90e8\u5143\u7d20complete\u540e\u624d\u5230\u53e6\u4e00\u4e2a\u53d1\u5c04 amb((o1, o2)) \u5148\u53d1\u5c04\u4e8b\u4ef6\u7684Observable\u4f5c\u4e3a\u771f\u6b63\u7684Observable\uff0c\u5176\u4ed6\u7684\u76f4\u63a5\u629b\u5f03 zip((o1, o2) -&gt; f(x, y)) \u7ec4\u54082\u4e2aObservable\uff0c\u4e24\u4e2aObservable\u7684\u5143\u7d20\u4e00\u4e00\u5bf9\u5e94\u7684\u63a5\u6536\u5230\u624d\u4f1a\u7ec4\u5408 f(x, y)\u7684\u7ed3\u679c\u5411\u4e0b\u6e38\u53d1\u5c04 combineLast((o1, o2) -&gt; f(x, y)) \u7ec4\u54082\u4e2aObservable\uff0c\u4e0d\u8981\u6c42\u4e24\u4e2aObservable\u7684\u5143\u7d20\u4e00\u4e00\u5bf9\u5e94\uff0c\u63a5\u5230\u4efb\u4f55\u65b0\u5143\u7d20\u90fd\u4f1a\u7ec4\u5408\u65b0\u7684\u5143\u7d20\u5411\u4e0b\u6e38\u53d1\u5c04\uff0c\u7ec4\u5408\u65b9\u6cd5f(x, y)\u7684x\uff0cy\u5206\u522b\u662f\u8fde\u4e2aObservable\u6700\u65b0\u53d1\u51fa\u6765\u7684\u5143\u7d20"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#6","title":"6\u3001\u91cd\u590d\u4e0e\u91cd\u8bd5","text":"\u64cd\u4f5c\u7b26 \u8bf4\u660e repeat() complete\u540e\u81ea\u52a8\u91cd\u65b0\u8ba2\u9605 repeatWhen(predict) \u6ee1\u8db3\u6761\u4ef6\u65f6\uff0ccomplete\u5219\u81ea\u52a8\u91cd\u65b0\u8ba2\u9605 retry() \u629b\u5f02\u5e38\u5219\u91cd\u8bd5\uff0c\u53ea\u5bf9\u5176\u4e0a\u6e38\u7684error\u6709\u6548 retryWhen(errorObservable -&gt; observable) \u629b\u5f02\u5e38\u65f6\uff0c\u6ee1\u8db3\u6761\u4ef6\u91cd\u65b0\u8ba2\u9605"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#7","title":"7\u3001\u5f02\u6b65\u8f6c\u540c\u6b65\u3001\u963b\u585e","text":"\u64cd\u4f5c\u7b26 \u8bf4\u660e blockingFirst() \u963b\u585e\u5e76\u8fd4\u56de\u7b2c\u4e00\u4e2a\u6536\u5230\u7684\u5143\u7d20 blockingForEach(a - f(a)) \u963b\u585e\u6bcf\u4e00\u4e2a\u5143\u7d20\uff0c\u76f4\u5230complete\u3002\u6536\u5230\u6bcf\u4e2a\u5143\u7d20\u90fd\u8c03\u7528\u56de\u8c03\u53bb\u5904\u7406"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#5flowable","title":"5\u3001\u80cc\u538b\u7b56\u7565(Flowable)","text":"<p>\u4e00\u79cd \u63a7\u5236\u4e8b\u4ef6\u6d41\u901f \u7684\u7b56\u7565</p> <ul> <li>\u89e3\u51b3\u7684\u95ee\u9898</li> </ul> <p>\u5728\u5f02\u6b65\u8ba2\u9605\u4e2d\uff0c\u88ab\u89c2\u5bdf\u8005\u53d1\u9001\u4e8b\u4ef6\u901f\u5ea6 \u4e0e \u89c2\u5bdf\u8005\u63a5\u6536\u4e8b\u4ef6\u901f\u5ea6 \u4e0d\u5339\u914d\uff08\u4e00\u822c\u662f\u524d\u8005 \u5feb\u4e8e \u540e\u8005\uff09\uff0c\u4ece\u800c\u5bfc\u81f4\u89c2\u5bdf\u8005\u65e0\u6cd5\u53ca\u65f6\u54cd\u5e94 / \u5904\u7406\u6240\u6709 \u88ab\u89c2\u5bdf\u8005\u53d1\u9001\u7684\u4e8b\u4ef6\uff0c\u4ece\u800c\u9020\u6210\u5bfc\u81f4\u7f13\u5b58\u533a\u6ea2\u51fa\u3001\u4e8b\u4ef6\u4e22\u5931 &amp; OOM\u3002</p> <ul> <li>\u4f5c\u7528</li> </ul> <p>\u5728 \u5f02\u6b65\u8ba2\u9605\u5173\u7cfb \u4e2d\uff0c\u63a7\u5236\u4e8b\u4ef6\u53d1\u9001 &amp; \u63a5\u6536\u7684\u901f\u5ea6</p> <ul> <li>\u5e94\u7528\u573a\u666f</li> </ul> <p>\u88ab\u89c2\u5bdf\u8005\u53d1\u9001\u4e8b\u4ef6\u901f\u5ea6 \u4e0e \u89c2\u5bdf\u8005\u63a5\u6536\u4e8b\u4ef6\u901f\u5ea6 \u4e0d\u5339\u914d\u7684\u573a\u666f</p> <p>\u5177\u4f53\u573a\u666f\u5c31\u53d6\u51b3\u4e8e \u8be5\u4e8b\u4ef6\u7684\u7c7b\u578b\uff0c\u5982\uff1a\u7f51\u7edc\u8bf7\u6c42\uff0c\u90a3\u4e48\u5177\u4f53\u573a\u666f\uff1a\u6709\u5f88\u591a\u7f51\u7edc\u8bf7\u6c42\u9700\u8981\u6267\u884c\uff0c\u4f46\u6267\u884c\u8005\u7684\u6267\u884c\u901f\u5ea6\u6ca1\u90a3\u4e48\u5feb\uff0c\u6b64\u65f6\u5c31\u9700\u8981\u4f7f\u7528\u80cc\u538b\u7b56\u7565\u6765\u8fdb\u884c\u63a7\u5236\u3002</p>"},{"location":"Android/18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#6_1","title":"6\u3001\u5b9e\u4f8b\u5e94\u7528","text":"<p>1\u3001\u4f18\u5148\u52a0\u8f7d\u7f13\u5b58\uff0c\u518d\u52a0\u8f7d\u7f51\u7edc\u8bf7\u6c42</p>"},{"location":"Android/19%20%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/","title":"19 \u97f3\u89c6\u9891\u5f00\u53d1","text":""},{"location":"Android/19%20%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/#19","title":"19 \u97f3\u89c6\u9891\u5f00\u53d1","text":""},{"location":"Android/19%20%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/#1","title":"1.\u89c6\u9891\u6587\u4ef6","text":"<p>\u89c6\u9891\u6587\u4ef6\uff1aFLV,MKV,MP4 \u53ea\u662f\u5c01\u88c5\u89c6\u9891\u7684\u683c\u5f0f</p> <p></p> <p>1.\u5c01\u88c5\u6570\u636e\u683c\u5f0f\u91cc\u9762\u53ef\u4ee5\u5b58\u591a\u4e2a\u97f3\u9891\u6d41\u548c\u89c6\u9891\u6d41</p> <p>2.\u89c6\u9891\u9700\u8981\u89e3\u7801\u624d\u80fd\u5c55\u793a</p> <p>3.\u7f16\u7801</p> <ul> <li>\u7a7a\u95f4\u5197\u4f59\uff1a\u56fe\u50cf\u5185\u90e8\u76f8\u90bb\u50cf\u7d20\u4e4b\u95f4\u5b58\u5728\u8f83\u5f3a\u7684\u76f8\u5173\u6027\u591a\u9020\u6210\u7684\u5197\u4f59</li> <li>\u65f6\u95f4\u5197\u4f59\uff1a\u89c6\u9891\u56fe\u50cf\u5e8f\u5217\u4e2d\u7684\u4e0d\u540c\u5e27\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u6240\u9020\u6210\u7684\u5197\u4f59</li> <li>\u89c6\u89c9\u5197\u4f59\uff1a\u4eba\u773c\u4e0d\u80fd\u611f\u77e5\u6216\u4e0d\u654f\u611f\u7684\u90a3\u90e8\u5206\u56fe\u50cf\u4fe1\u606f</li> <li>\u4fe1\u606f\u71b5\u5197\u4f59\uff1a\u7f16\u7801\u5197\u4f59\uff0c\u4eba\u4eec\u7528\u4e8e\u8868\u8fbe\u67d0\u4e00\u4fe1\u606f\u6240\u9700\u8981\u7684\u6bd4\u7279\u6570\u603b\u6bd4\u7406\u8bba\u4e0a\u8868\u793a\u8be5\u4fe1\u606f\u6240\u9700\u8981\u7684\u6700\u5c11\u6bd4\u7279\u6570\u8981\u5927\uff0c\u4ed6\u4eec\u4e4b\u95f4\u7684\u5dee\u8ddd\u5c31\u662f\u4fe1\u606f\u71b5\u5197\u4f59</li> <li>\u77e5\u8bc6\u5197\u4f59\uff1a\u6307\u5728\u6709\u4e9b\u56fe\u50cf\u4e2d\u8fd8\u4e0e\u67d0\u4e9b\u9a8c\u8bc1\u77e5\u8bc6\u6709\u5173\u7684\u4fe1\u606f\u3002</li> </ul> <p>4.\u89c6\u9891\u7f16\u7801</p> <ul> <li> <p>ITU-T H.264 H.265</p> </li> <li> <p>H.264 \u53c8\u88ab\u79f0\u4e3aMPEG-4 AVC</p> </li> </ul> <p>H.264 \u7801\u6d41\u6587\u4ef6\u5206\u4e3a\u4e24\u5c42\uff1a</p> <p>1.VCL \u89c6\u9891\u7f16\u7801\u5c42\uff1a\u8d1f\u8d23\u9ad8\u6548\u7684\u89c6\u9891\u5185\u5bb9\u8868\u793a</p> <p>2.NAL \u7f51\u7edc\u63d0\u53d6\u5c42\uff1a\u8d1f\u8d23\u4ee5\u7f51\u7edc\u6240\u8981\u6c42\u7684\u6070\u5f53\u7684\u65b9\u5f0f\u5bf9\u6570\u636e\u8fdb\u884c\u6253\u5305\u548c\u4f20\u9001\u3001</p> <p>H.264 \u7f16\u7801\u5668\u683c\u5f0f\uff1a\u8d77\u59cb\u7801+NALU\uff08NAL\u5355\u5143\uff09</p> <p>NALU = \uff08NAL Header + \u8d1f\u8377\u6570\u636eEBSP\uff09*  </p> <p>\u5176\u4e2dNAL Header\u5360\u4e00\u4e2a\u5b57\u8282\uff0c \u4f4e\u4e94\u4f4d\u8868\u793aNALU\u7c7b\u578b</p> <ul> <li>H.265 \u53c8\u79f0\u4e3a HEVC \u9ad8\u6548\u7387\u89c6\u9891\u7f16\u7801</li> </ul> <p>5.\u89c6\u9891\u4fe1\u606f</p> <p>SPS:</p> <p>FPS:</p> <ul> <li>MPEG\u7cfb\u5217</li> </ul>"},{"location":"Android/19%20%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/#2ffmpeg","title":"2.FFmpeg","text":""},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/","title":"Android studio\u57fa\u7840\uff0c\u4ece\u5165\u95e8\u5230\u7cbe\u901a\uff0c\u5b66\u5b8c\u5c0f\u767d\u4e5f\u80fd\u4f1a","text":"<p>\u8fd9\u662f\u6211\u770b\u7684\u7b2c\u4e00\u95e8\u514d\u8d39\u89c6\u9891\uff0c\u770b\u5b8c\u540e\uff0c\u7ed3\u5408\u7b2c\u4e00\u884c\u4ee3\u7801\u8fdb\u884c\u7684\u7b14\u8bb0\u603b\u7ed3\u3002</p> <p>\u611f\u8c22B\u7ad9\u5927\u4f6c\uff1a\u5b66\u4e60\u89c6\u9891</p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#_1","title":"\u5386\u53f2\u4ecb\u7ecd","text":"<p>1\u3001\u5b89\u8fea\u5f00\u53d1\u7684 google\u516c\u53f8\uff0c\u73b0\u5728\u523010.0\uff0c\u5e02\u573a\u5360\u6709\u7387\u6bd4\u8f83\u9ad8</p> <p>Android Studio \u5b89\u88c5\u6559\u7a0b  \u4e0b\u8f7d\u5730\u5740http://www.android-studio.org/</p> <p>sdk \u4e0b\u8f7d\u5730\u5740 http://tools.android-studio.org/index.php/sdk</p> <p>\u5b89\u88c5 AS\u540e \u5b89\u88c5 SDK \u7136\u540e\u5b89\u88c5AVD</p> <p></p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#_2","title":"\u914d\u7f6e\u771f\u673a","text":"<p>1\uff09 Andriod Studio \u5b89\u88c5USB\u9a71\u52a8</p> <p>file - settings-Android SDK - SDK Tools -&gt; USB Derivids</p> <p>2) \u8fde\u63a5\u624b\u673a</p> <p>\u6253\u5f00\u5f00\u53d1\u8005\u6a21\u5f0f\uff0c\u8bbe\u7f6e\u8fde\u63a5\uff0c\u6709AVD\u7684\u9009\u62e9\u4ec5\u5145\u7535\uff0c\u6ca1\u6709AVD\u9009\u9879\u7684\u9009\u62e9\u6587\u4ef6\u4f20\u8f93</p> <p>\u6ce8\u610f\u7684\u95ee\u9898\uff1a HVD\u627e\u4e0d\u5230\u9a71\u52a8\uff0c\u6211\u4e0b\u8f7d\u4e86\u534e\u4e3a\u7684HiSuite,\u5c31\u53ef\u4ee5\u4e86 </p> <p>3\uff09 Run Select Devices </p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#_3","title":"\u5b66\u4e60\u6559\u7a0b","text":"<p>1\u3001\u67b6\u6784\u5206\u56db\u5c42\uff1a</p> <p></p> <p>2\u3001android\u865a\u62df\u673a</p> <p>Dalvik  vm  java jvm</p> \u533a\u522b jvm dalvik vm \u7f16\u8bd1\u540e\u7684\u6587\u4ef6\u683c\u5f0f .java-&gt;.class-&gt;.jar .java-&gt;.class-&gt;.dex-&gt;.odex \u57fa\u4e8e\u7684\u67b6\u6784 \u57fa\u4e8e\u6808\u7684\u67b6\u6784 \u57fa\u4e8e\u5bc4\u5b58\u5668\u7684\u67b6\u6784 <p>art  android  runtime \u66ff\u6362dalvik</p> <p>art\u6a21\u5f0f \u628a\u7ffb\u8bd1\u7684\u5de5\u4f5c\u63d0\u524d\uff0c\u5b89\u88c5\u7684\u65f6\u5019\u628a\u5b57\u8282\u7801\u7ffb\u8bd1\u6210\u673a\u5668\u7801\uff0c\u7a7a\u95f4\u6362\u65f6\u95f4</p> <p>3\u3001\u5b89\u5353\u6587\u4ef6\u4ecb\u7ecd</p> \u6587\u4ef6\u540d\u79f0\uff08APP\u76ee\u5f55\uff09 \u4f5c\u7528 app \u8981\u5199\u7684\u4ee3\u7801\u76ee\u5f55 bulid \u7f16\u8bd1\u65f6\u7684\u81ea\u52a8\u6587\u4ef6\uff08\u4e0d\u9700\u8981\u52a8\uff09 libs jar\u5305 androidtest \u81ea\u52a8\u5316\u6d4b\u8bd5 java .java res drawable        \u56fe\u7247 layout             \u5e03\u5c40 values             \u5b57\u7b26\u4e32 AndroidManifest.xml \u7f6e\u6587\u4ef6\uff0c\u56db\u5927\u7ec4\u4ef6\u914d\u7f6e\u7684\u5730\u65b9 test \u5355\u5143\u6d4b\u8bd5\u7528\u7684 .gitignore app\u6a21\u5757\u7684\u5ffd\u7565\u6587\u4ef6 app.iml IDEA\u81ea\u52a8\u751f\u6210\u7684\u9879\u76ee\uff08\u4e0d\u7528\u8003\u8651\uff09 bulid.gradle \u9879\u76ee\u6784\u5efa\u7684\u914d\u7f6e proguard-rules.pro \u52a0\u5bc6\u3001\u6df7\u80b4\u4ee3\u7801 minmap-\u3001drawable-\u3001values-\u3001 \u4e3a\u4e86\u517c\u5bb9\u5404\u79cd\u8bbe\u5907 \u6587\u4ef6\u540d\u79f0\uff08\u6700\u5916\u5c42\u76ee\u5f55\u4e0b\uff09 \u4f5c\u7528 bulid.gradle \u9879\u76ee\u5168\u5c40\u7684gradle\u7684\u811a\u672c gradle.properties q\u5168\u5c40\u7684\u914d\u7f6e\u6587\u4ef6 gradlew linux\u4e0b\u4f7f\u7528\u7684 gradlew.bat windows\u4e0b\u76ee\u5f55\u4f7f\u7528 local.properties SDK\u7684\u4f4d\u7f6e settings.gradle \u6307\u5b9a\u6a21\u5757\u7ec4\u5408"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#1","title":"1\u3001\u4ee3\u7801\u4e2d\u9047\u5230\u7684\u5751","text":"<p>1\uff09 Toast\u5f39\u51fa\u6846\u4e0d\u663e\u793a</p> <p>\u6e90\u7801\uff1aToast.makeText(MainActivity.this,\"You clicked Button\",Toast.LENGTH_SHORT).show();</p> <p>2\uff09\u62a5\u9519\uff1aactivity supporting action_view is not set as browsable\u3002</p> <p>\u6dfb\u52a0\uff1a</p> <p>3\uff09\u89c4\u5b9aActivity\u53ef\u4ee5\u6253\u5f00http\u65f6\uff0c\u7cfb\u7edf\u6ca1\u6709\u81ea\u52a8\u5f39\u51fa\u53ef\u9009\u62e9\u7684\u6253\u5f00\u65b9\u5f0f\uff0c\u800c\u662f\u9ed8\u8ba4\u91c7\u7528\u6d4f\u89c8\u5668\u6253\u5f00\u7684\u3002</p> <p>4\uff09dialog\u5bf9\u8bdd\u6846\u4e0d\u5f39\u51fa\uff082.3\uff09</p> <p>5\uff09logcat\u4e0d\u5b9e\u65f6\u663e\u793a\uff0c\u91cd\u542fAS\u3002</p> <p>6\uff09AVD\u5b89\u88c5\u5931\u8d25\uff1a\u63d0\u793a\u627e\u4e0d\u5230\u6587\u4ef6,\u4f7f\u7528\u771f\u673a\u6a21\u62df</p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#2","title":"2\u3001\u5b66\u4e60\u7b14\u8bb0","text":""},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#21","title":"2.1 \u57fa\u7840\u77e5\u8bc6","text":""},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#1-logt-tap","title":"1\u3001\u65e5\u5fd7   logt +tap \u53ef\u4ee5\u5b9e\u73b0\u9ed8\u8ba4\u7684\u6d3b\u52a8\u540d","text":"<p>\u200b     \u4f7f\u7528fileter \u53ef\u4ee5\u5c06\u81ea\u5df1\u9700\u8981\u7684\u65e5\u5fd7\u67e5\u627e\u51fa\u6765</p> <p>log.v(\u6807\u7b7e\uff0c\u5185\u5bb9)\uff1b</p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#2_1","title":"2\u3001\u6d3b\u52a8\u751f\u6210\u7684\u6b65\u9aa4","text":"<ul> <li> <p>\u521b\u5efa\u7a7a\u6d3b\u52a8</p> </li> <li> <p>\u65b0\u5efaEmporty Activity</p> </li> <li> <p>\u65b0\u5efalayout\u8d44\u6e90 \u65b0\u5efa\u4e00\u4e2a\u5e03\u5c40</p> </li> <li> <p>\u4f7f\u7528setContentView()\u5c06\u5e03\u5c40\u6dfb\u52a0\u5728Activity\u4e0a</p> </li> <li> <p>\u5728AndroidManifest.xml\u6ce8\u518c\u8be5\u6d3b\u52a8\uff0c\u5e76\u8bbe\u7f6eMain\u51fd\u6570\u4f5c\u4e3a\u542f\u52a8\u9879</p> <p><code>xml   &lt;activity android:name=\".FirstActivity\"              android:label=\"\u8fd9\u662f\u7b2c\u4e00\u4e2a\u6d3b\u52a8v\"&gt;              &lt;intent-filter &gt;                  &lt;action android:name=\"android.intent.action.MAIN\"&gt;&lt;/action&gt;                  &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt;              &lt;/intent-filter&gt;          &lt;/activity&gt;</code></p> </li> </ul>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#activityfinish","title":"Activity\u4e2d\u8c03\u7528finish\uff08\uff09\u8fc7\u7a0b","text":"<p>1.Activity\u542f\u52a8\u7684\u8fc7\u7a0b</p> <p>\u9996\u5148\uff0c\u8c03\u7528onCreate(),\u63a5\u7740\u662fonStart(),\u6700\u540e\u8d70onResume()\u3002\u8fd9\u4e2a\u5f88\u7b80\u5355\uff0c\u5927\u5bb6\u4e5f\u90fd\u77e5\u9053\uff0c\u6253\u4e0b\u65e5\u5fd7\u5c31\u80fd\u770b\u7684\uff1a</p> <p></p> <ol> <li>\u70b9\u51fbback\u952e\u7684\u9500\u6bc1\u8fc7\u7a0b</li> </ol> <p>\u70b9\u51fb\uff0cback\u952e\u540e\uff0cActivity\u8d70\u7684\u6d41\u7a0b\u662f:onPause()\uff0conStop(),\u6700\u540e\u662fonDestory()\u3002\u8fd9\u4e2a\u4e5f\u6ca1\u7684\u8bf4\u7684\uff0c\u8fd8\u662f\u6253\u65e5\u5fd7\uff1a</p> <p></p> <p>3.\u70b9\u51fbHome\u952e\u5230\u540e\u53f0\u8fd0\u884c\u7684\u8fc7\u7a0b</p> <p>\u70b9\u51fb\uff0cHome\u952e\u540e\uff0c\u5e94\u7528\u5230\u540e\u53f0\uff0c\u8d70\u7684\u6d41\u7a0b\u662fonPause(),onStop\u3002\u65e5\u5fd7\u5982\u4e0b\uff1a</p> <p></p> <p>4.\u70b9\u51fbHome\u952e\u4e4b\u540e\uff0c\u4e0d\u7ba1\u662f\u518d\u6b21\u70b9\u51fb\u56fe\u7247\uff0c\u8fd8\u662f\u4ece\u6700\u8fd1\u8fd0\u884c\u4efb\u52a1\u8fdb\u5165</p> <p>\u518d\u6b21\u8fdb\u5165\u5230\u5e94\u7528\uff0c\u8d70\u7684\u6d41\u7a0b\u662fonRestart(),onStart(),\u6700\u540e\u662fonResume(),\u4e5f\u6253\u51fa\u4e86\u65e5\u5fd7\uff1a</p> <p></p> <p>\u4e0a\u9762\u662fActivity\u7684\u751f\u547d\u5468\u671f\uff0c\u4e0b\u9762\u662fthis.finish()\u65b9\u6cd5\u6267\u884c\u4e4b\u540e\u3002\u3002\u3002</p> <p>5.\u8c03\u7528finish()\u65b9\u6cd5\u4e4b\u540e</p> <p>\u5728Activity\u4e2d\u6267\u884cthis.finish()\u65b9\u6cd5\u4e4b\u540e\uff0c\u6267\u884c\u5982\u4e0b\u8fc7\u7a0b\uff1aonPause(),onStop(),onDestory(),\u65e5\u5fd7\u8f93\u51fa\u5982\uff1a</p> <p></p> <p>\u4ece\u4e0a\u9762\u53ef\u4ee5\u770b\u51fa\uff0cfinish()\u65b9\u6cd5\u4e4b\u540e\uff0c\u8d70\u7684\u548cback\u952e\u5904\u7406\u4e00\u6837\u3002</p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#3","title":"3\u3001\u5b89\u5353\u7684\u5f39\u51fa\u6846","text":"<pre><code>  Toast.makeText(FirstActivity.this,\"\u70b9\u4e86\",Toast.LENGTH_SHORT).show();\n</code></pre> <p>4\u3001\u6587\u4ef6\u5939\u548c\u9879\u76ee\u540d\u79f0\u5c3d\u91cf\u4e0d\u8981\u5927\u5199</p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#5menu","title":"5\u3001\u6dfb\u52a0Menu","text":"<p>\u53ea\u6709\u5b58\u5728ActionBar\u65f6\u624d\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\u3002</p> <p>app:showAsAction</p> <p>\u5b83\u6709\u4e09\u4e2a\u53ef\u9009\u9879 1.always\uff1a\u603b\u662f\u663e\u793a\u5728\u754c\u9762\u4e0a 2.never\uff1a\u4e0d\u663e\u793a\u5728\u754c\u9762\u4e0a\uff0c\u53ea\u8ba9\u51fa\u73b0\u5728\u53f3\u8fb9\u7684\u4e09\u4e2a\u70b9\u4e2d 3.ifRoom\uff1a\u5982\u679c\u6709\u4f4d\u7f6e\u624d\u663e\u793a\uff0c\u4e0d\u7136\u5c31\u51fa\u73b0\u5728\u53f3\u8fb9\u7684\u4e09\u4e2a\u70b9\u4e2d</p> <p>android:showAsAction</p> <p>\u8fd9\u4e2a\u5c5e\u6027\u53ef\u63a5\u53d7\u7684\u503c\u6709\uff1a</p> <p>1.alaways:\u8fd9\u4e2a\u503c\u4f1a\u4f7f\u83dc\u5355\u9879\u4e00\u76f4\u663e\u793a\u5728ActionBar\u4e0a\u3002</p> <p>2.ifRoom:\u5982\u679c\u6709\u8db3\u591f\u7684\u7a7a\u95f4,\u8fd9\u4e2a\u503c\u4f1a\u4f7f\u83dc\u5355\u663e\u793a\u5728ActionBar\u4e0a\u3002</p> <p>3.never:\u8fd9\u4e2a\u503c\u83dc\u5355\u6c38\u8fdc\u4e0d\u4f1a\u51fa\u73b0\u5728ActionBar\u662f\u3002</p> <p>4.withText:\u8fd9\u4e2a\u503c\u4f7f\u83dc\u5355\u548c\u5b83\u7684\u56fe\u6807\uff0c\u83dc\u5355\u6587\u672c\u4e00\u8d77\u663e\u793a\u3002</p> <ul> <li>\u524d\u7aef\u754c\u9762  \u52a0\u4e00\u4e2amenu resource file ,\u4ee3\u7801\u5982\u4e0b\uff1a</li> </ul> <p>```xml   </p> <p>```</p> <ul> <li>\u5728\u4e3b\u6d3b\u52a8\u4e2d\u6dfb\u52a0\u8c03\u7528\u663e\u793a\u83dc\u5355\u7684\u51fd\u6570getMenuInflater\uff08\uff09\uff0c\u5f15\u5165\u65b0\u5305import  android.view.Menu;</li> </ul> <p><code>java   public boolean onCreateOptionsMenu(Menu menu)       {          //\u8c03\u7528\u83dc\u5355\u7684\u65b9\u6cd5 \u663e\u793a\u51fa\u83dc\u5355           getMenuInflater().inflate(R.menu.menu_first,menu );           return true;       }       public boolean onOptionsItemSelected(MenuItem item)       {           switch (item.getItemId()){               case R.id.add_item:                   Toast.makeText(this,\"Add a menu\",Toast.LENGTH_SHORT).show();                   break;               case R.id.delte_item:                   Toast.makeText(this,\"Delete a menu\",Toast.LENGTH_SHORT).show();                   break;               default:           }           return true;       }   }</code></p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#6","title":"6\u3001\u6d3b\u52a8\u7684\u663e\u793a\u4f20\u9012\u548c\u9690\u5f0f\u4f20\u9012","text":"<p>1\uff09Intent \u53ef\u4ee5\u5b9e\u73b0\u663e\u5f0f\u548c\u9690\u5f0f\u8fdb\u884c\u4e24\u4e2a\u6d3b\u52a8\u4e4b\u95f4\u7684\u4f20\u9012</p> <p>\u663e\u793a\u4f20\u9012\u4ee3\u7801\u5982\u4e0b</p> <pre><code>Intent intent = new Intent(MainActivity.this,SecondActivity.class);\nstartActivity(intent);\n</code></pre> <p>\u9690\u5f0f\u4f20\u9012 \u901a\u8fc7\u5404\u79cd\u914d\u7f6e\u6587\u4ef6\uff0c\u8ba9\u7cfb\u7edf\u81ea\u5df1\u53bb\u9009\u62e9\u8df3\u8f6c\u54ea\u4e2a\u754c\u9762</p> <ul> <li>\u901a\u8fc7Intent-filetr action name \u53bb\u4f20\u9012  category\u4e3a\u9ed8\u8ba4</li> </ul> <p><code>java    Intent intent = new Intent(\"com.example.activitytest.ACTION_Start\");            startActivity(intent);</code></p> <p><code>xml   &lt;intent-filter&gt;       &lt;action android:name=\"com.example.activitytest.ACTION_Start\"/&gt;       &lt;category android:name=\"android.intent.category.DEFAULT\"/&gt;   &lt;/intent-filter&gt;</code></p> <ul> <li>\u901a\u8fc7Intent-filetr action\u548ccategory\u7684\u7ed3\u5408\u4f20\u9012</li> </ul> <p><code>java   Intent intent = new Intent(\"com.example.activitytest.ACTION_Start\");   intent.addCategory(\"com.example.activity.MY_CATEGOTY\");   startActivity(intent);</code></p> <p><code>xml     &lt;intent-filter&gt;                   &lt;action android:name=\"com.example.activitytest.ACTION_Start\"/&gt;                   &lt;category android:name=\"android.intent.category.DEFAULT\"/&gt;                   &lt;category android:name=\"com.example.activity.MY_CATEGOTY\"/&gt;               &lt;/intent-filter&gt;</code></p> <ul> <li>\u4f7f\u7528URL\u3001Tel\u7b49\u76f4\u63a5\u6253\u5f00\u5176\u4ed6\u5df2\u6709\u7684\u6d3b\u52a8</li> </ul> <p><code>java   intent.setData(Uri.parse(\"http://www.baidu.com\"));   intent.setData(Uri.parse(\"tel:10086\"));</code></p> <ul> <li>setData</li> </ul> <p>2\uff09Intent\u53ef\u4ee5\u901a\u8fc7putExtra getStringExtra\u8fdb\u884c\u4e24\u4e2a\u6d3b\u52a8\u4e4b\u95f4\u7684\u4fe1\u606f\u4f20\u9012\u3002</p> <ul> <li>\u4f20\u9012\u4ee3\u7801</li> </ul> <p><code>java   String data = \"\u60a8\u597d\";   Intent intent = new Intent(FirstActivity.this, SecondActivity.class);   intent.putExtra(\"Extra_Data\",data);   startActivity(intent);</code></p> <ul> <li>\u63a5\u6536\u4ee3\u7801</li> </ul> <p><code>java   //\u83b7\u53d6Intent   Intent intent = getIntent();   //\u83b7\u53d6data   String data = intent.getStringExtra(\"Extra_Data\");   Toast.makeText(this,data,Toast.LENGTH_SHORT).show();</code></p> <p>\u91c7\u7528startActivityForResult()\u8fdb\u884c\u83b7\u53d6\u4e0a\u4e00\u4e2a\u6d3b\u52a8\u7ed9\u8fd4\u56de\u7684\u503c\uff0c\u54cd\u5e94\u51fd\u6570\u4e3aonActivityResult()\u8fdb\u884c\u54cd\u5e94\u3002 \u4e0a\u4e00\u4e2a\u6d3b\u52a8\u901a\u8fc7setResult\uff08\uff09\u8fdb\u884c\u4f20\u503c\u3002</p> <p>3)\u66f4\u591a\u7684\u4f20\u9012 \uff0c\u5229\u7528data\u6807\u7b7e\u914d\u7f6e\u5982http,Tel\u3002</p> <p>4\uff09\u6d3b\u52a8\u7684\u751f\u547d\u5468\u671f</p> <p></p> <p>6\uff09\u6d3b\u52a8\u56e0\u4e3aStop\u88ab\u7cfb\u7edf\u56de\u6536\uff0c\u6570\u636e\u6d88\u5931\uff0c\u5982\u4f55\u5c06\u6570\u636e\u4fdd\u5b58\uff1f</p> <p>onSaveInstanceState()\u4e2d\u53c2\u6570Bundle\u4fdd\u5b58\u6570\u636e\u3002\u5728onCreate()\u65f6\uff0c\u5c06Bundle\u7684\u6570\u636e\u53d6\u51fa\u6765\u3002</p> <p>7\uff09\u6d3b\u52a8\u7684\u542f\u52a8\u6a21\u5f0f</p> \u6d3b\u52a8\u540d\u79f0 \u6d3b\u52a8\u7279\u70b9 standard \u901a\u8fc7\u4e00\u4e2a\u8fd4\u56de\u6808\u4e0d\u65ad\u65b0\u5efa\u4e00\u4e2a\u6d3b\u52a8 singleTop \u5224\u65ad\u5f53\u524d\u6808\u662f\u5426\u662f\u6700\u4e0a\u9762\u7684\uff0c\u82e5\u662f\u4e0d\u518d\u65b0\u5efa\uff0c\u5426\u5219\u65b0\u5efa\u6d3b\u52a8 singleTask \u5224\u65ad\u8fd4\u56de\u6808\u4e2d\u662f\u5426\u5b58\u5728\u8be5\u6d3b\u52a8\uff0c\u82e5\u5b58\u5728\uff0c\u5c06\u8be5\u6d3b\u52a8\u4e4b\u4e0a\u7684\u6808\u90fddestory,\u663e\u793a\u51fa\u8be5\u6d3b\u52a8 singleIntance \u72ec\u7acb\u4e8e\u8fd4\u56de\u6808\u4e4b\u5916\uff0c\u5148\u8fdb\u884c\u8fd4\u56de\u6808\u4e2d\u7684\u64cd\u4f5c\uff0c\u6700\u540e\u8fd4\u56de\u8fd9\u4e2a\u72ec\u7acb\u4e8e\u8fd4\u56de\u6808\u4e2d\u7684\u6d3b\u52a8 <p>8\uff09\u83b7\u53d6\u5f53\u524d\u7684\u6d3b\u52a8</p> <p>getClass().getSimpleName.</p> <p>9)\u542f\u52a8\u6d3b\u52a8\u7684\u6700\u4f73\u5199\u6cd5</p> <p>\u5bf9\u76ee\u6807\u51fd\u6570\u8fdb\u884c\u5c01\u88c5\uff0c\u65b9\u4fbf\u5176\u4ed6\u4eba\u7684\u8c03\u7528\u3002</p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#7ui","title":"7\u3001UI\u5e03\u5c40","text":""},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#71","title":"7.1 \u7ebf\u6027\u5e03\u5c40","text":"<p>\u4f7f\u7528<code>android:orientation= \"vertical/horizontal\"</code>\u5b9a\u4e49\u6392\u5217\u65b9\u5411</p> <p>LinearLayout\u6700\u5e38\u7528\u7684\u5c5e\u6027\u6709\uff1a</p> <ul> <li> <p>android:id \uff1a\u5b9a\u4e49\u5e03\u5c40id\uff0c\u5373\u6807\u8bc6\u7b26\uff0c\u53ef\u4ee5\u901a\u8fc7id\u6765\u627e\u5230\u8be5\u5e03\u5c40\u6216\u8005\u63a7\u4ef6</p> </li> <li> <p>android :layout_width \uff1a\u5e03\u5c40\u5bbd\u5ea6\uff0c\u6709match_parent ,wrap_content\uff0cfill_paren</p> </li> <li> <p>android:layout_height \uff1a\u5e03\u5c40\u9ad8\u5ea6\uff0c\u6709match_parent,wrap_content\uff0cfill_paren</p> </li> <li> <p>android:background \uff1a\u8bbe\u7f6e\u5e03\u5c40\u7684\u80cc\u666f\uff0c\u53ef\u4ee5\u7528\u989c\u8272\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u56fe\u7247\uff0c\u989c\u8272\u5e38\u4ee5\u516d\u4f4d\u7684\u5341\u516d\u8fdb\u5236\u8868\u793a</p> </li> <li> <p>android:layout_margin \uff1a\u5916\u8fb9\u8ddd\uff0c\u5e03\u5c40\u6216\u63a7\u4ef6\u8ddd\u79bb\u5916\u90e8\u5143\u7d20\u7684\u8fb9\u8ddd</p> </li> <li> <p>android:layout_padding \uff1a\u5185\u8fb9\u8ddd\uff0c\u5e03\u5c40\u6216\u63a7\u4ef6\u8ddd\u79bb\u5185\u90e8\u5143\u7d20\u7684\u8fb9\u8ddd</p> </li> <li> <p>android:orientation \uff1a\u5e03\u5c40\u65b9\u5411\uff0c\u6c34\u5e73\u5e03\u5c40horizontal\uff0c\u5782\u76f4\u5e03\u5c40vertical</p> </li> <li> <p>android:layout_weight\uff1a\u6743\u91cd\uff0c\u9664\u4e86\u88ab\u663e\u793a\u5360\u636e\u7684\u7a7a\u95f4\u4ee5\u5916\u7684\u7684\u7a7a\u95f4\uff0c\u7136\u540e\u6839\u636e\u6743\u91cd\u7684\u5927\u5c0f\u6765\u5206\u914d\u7a7a\u95f4\uff0c\u4f7f\u7528\u6743\u91cd\u901a\u5e38\u4f1a\u628a\u5206\u914d\u8be5\u6743                                     \u91cd\u65b9\u5411\u7684\u5bbd\u5ea6\u8bbe\u7f6e\u4e3a0dp\uff0c\u5982\u679c\u672a\u8bbe\u7f6e0dp\uff0c\u5219\u8be5\u63a7\u4ef6\u4f1a\u5360\u636e\u6307\u5b9a\u7684\u5bbd\u5ea6\uff0c\u7136\u540e\u518d\u52a0\u4e0a\u6839\u636e\u6743\u91cd\u6765\u5206\u914d\u7684\u7a7a\u95f4  \u7c7b\u4f3c\u4e8edisplay</p> </li> <li> <p>android:gravity:\u4e0b\u9762\u5143\u7d20\u7684\u6392\u5e8f\u65b9\u5f0f\uff0c\u5982center:\u5782\u76f4\u5c45\u4e2d</p> </li> <li> <p>android:layout_gravity:\u5143\u7d20\u5728\u754c\u9762\u7684\u5bf9\u5176\u65b9\u5f0f</p> </li> </ul>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#72","title":"7.2 \u76f8\u5bf9\u5e03\u5c40","text":"<p>RelativeLayout\uff08\u76f8\u5bf9\u5e03\u5c40)\uff1a\u6309\u7167\u63a7\u4ef6\u76f8\u4e92\u4e4b\u95f4\u7684\u76f8\u5bf9\u4f4d\u7f6e\u6765\u786e\u5b9a\uff0cRelativeLayout\u4e2d\u5f80\u5f80\u9700\u8981\u5b9a\u4e49\u6bcf\u4e00\u4e2a\u63a7\u4ef6\u7684\u8d44\u6e90ID\u3002</p> <p>android\uff1alayout_centerHrizontal \u6c34\u5e73\u5c45\u4e2d</p> <p>android\uff1alayout_centerVertical \u5782\u76f4\u5c45\u4e2d</p> <p>android\uff1alayout_centerInparent \u76f8\u5bf9\u4e8e\u7236\u63a7\u4ef6\u5b8c\u5168\u5c45\u4e2d</p> <p>android\uff1alayout_alignParentBottom \u8d34\u7d27\u7236\u63a7\u4ef6\u7684\u4e0b\u8fb9\u7f18</p> <p>android\uff1alayout_alignParentLeft \u8d34\u7d27\u7236\u63a7\u4ef6\u7684\u5de6\u8fb9\u7f18</p> <p>android\uff1alayout_alignParentRight \u8d34\u7d27\u7236\u63a7\u4ef6\u7684\u53f3\u8fb9\u7f18</p> <p>android\uff1alayout_alignParentTop \u8d34\u7d27\u7236\u63a7\u4ef6\u7684\u4e0a\u8fb9\u7f18</p> <p>android\uff1alayout_alignWithParentIfMissing \u5982\u679c\u5bf9\u5e94\u7684\u5144\u5f1f\u63a7\u4ef6\u627e\u4e0d\u5230\u7684\u8bdd\uff0c\u5c31\u4ee5\u7236\u63a7\u4ef6\u4f5c\u4e3a\u53c2\u7167\u7269</p> <p>\u7b2c\u4e8c\u7c7b\u5c5e\u6027 \u5c5e\u6027\u503c\u5fc5\u987b\u4e3aid\u7684\u5f15\u7528\u540d\u201c@id/id-name\u201d</p> <p>android\uff1alayout_below \u5728\u67d0\u63a7\u4ef6\u4e0b\u65b9</p> <p>android\uff1alayout_above \u5728\u67d0\u63a7\u4ef6\u4e0a\u65b9</p> <p>android\uff1alayout_toLeftOf \u5728\u67d0\u63a7\u4ef6\u7684\u5de6\u8fb9</p> <p>android\uff1alayout_toRightOf \u5728\u67d0\u63a7\u4ef6\u7684\u53f3\u8fb9</p> <p>android\uff1alayout_alignTop \u672c\u63a7\u4ef6\u7684\u4e0a\u8fb9\u7f18\u548c\u67d0\u63a7\u4ef6\u7684\u4e0a\u8fb9\u7f18\u5bf9\u9f50</p> <p>android\uff1alayout_alignLeft \u672c\u63a7\u4ef6\u7684\u5de6\u8fb9\u7f18\u548c\u67d0\u63a7\u4ef6\u7684\u5de6\u8fb9\u7f18\u5bf9\u9f50</p> <p>android\uff1alayout_alignBottom \u672c\u63a7\u4ef6\u7684\u4e0b\u8fb9\u7f18\u548c\u67d0\u63a7\u4ef6\u7684\u4e0b\u63a7\u4ef6\u5bf9\u9f50</p> <p>android\uff1alayout_alignRight \u672c\u63a7\u4ef6\u7684\u53f3\u8fb9\u7f18\u548c\u67d0\u63a7\u4ef6\u7684\u53f3\u8fb9\u7f18\u5bf9\u9f50</p> <p>\u7b2c\u4e09\u7c7b\uff1a\u5c5e\u6027\u503c\u4e3a\u5177\u4f53\u7684\u50cf\u7d20\u503c\uff0c\u598230dip\uff0c40px</p> <p>android\uff1alayout_marginBottom \u79bb\u67d0\u63a7\u4ef6\u5e95\u8fb9\u7f18\u7684\u8ddd\u79bb</p> <p>android\uff1alayout_marginLeft \u79bb\u67d0\u63a7\u4ef6\u5de6\u8fb9\u7f18\u7684\u8ddd\u79bb</p> <p>android\uff1alayout_marginRight \u79bb\u67d0\u63a7\u4ef6\u53f3\u8fb9\u7f18\u7684\u8ddd\u79bb</p> <p>android\uff1alayout_marginTop \u79bb\u67d0\u63a7\u4ef6\u4e0a\u8fb9\u7f18\u7684\u8ddd\u79bb</p> <p>EditText\u7684android\uff1ahint \u8bbe\u7f6eEditText\u672a\u8f93\u5165\u5185\u5bb9\uff08\u4e3a\u7a7a\uff09\u7684\u63d0\u793a\u4fe1\u606f</p> <p>android\uff1agravity \u5bf9\u8be5view\u7684\u8bbe\u5b9a\uff0c\u76f8\u5bf9\u4e8e\u63a7\u4ef6\u5185\u90e8\u7684\u4f4d\u7f6e\u53d8\u5316\u66f4\u6539\u3002\u6bd4\u5982Bottom\u7684Text\uff0c\u8bbe\u7f6e\u4e3aright\u5c31\u662f\u8ddd\u79bb\u7236\u63a7\u4ef6\u3002</p> <p>android\uff1alayout_gravity \u76f8\u5bf9\u4e8e\u7236\u63a7\u4ef6\uff0c\u6539view\u7684\u4f4d\u7f6e\u53d8\u5316</p> <p>android\uff1alayout_alignParentRight \u5f53\u524d\u63a7\u4ef6\u7684\u6709\u6bb5\u548c\u7236\u63a7\u4ef6\u7684\u53f3\u7aef\u5bf9\u9f50\uff0c\u5c5e\u6027\u53ea\u80fd\u4e3atrue\u6216false\uff0c\u9ed8\u8ba4\u4e3afalse\u3002</p> <p>android\uff1ascaleType \u8be5\u5c5e\u6027\u4e3b\u8981\u4e3a\u63a7\u5236\u56fe\u7247\u7684size\u3002</p> <p>CENTER/center \u6309\u7167\u56fe\u7247\u539f\u6765\u7684size\u5c45\u4e2d\u663e\u793a\uff0c\u5f53\u56fe\u7247\u957f/\u5bbd\u8d85\u8fc7View\u7684\u957f/\u5bbd\uff0c\u5219\u622a\u53d6\u56fe\u7247\u7684\u5c45\u4e2d\u90e8\u5206\u663e\u793a\u3002</p> <p>CENTER_CROP/centercrop \u6309\u6bd4\u4f8b\u6269\u5927\u56fe\u7247\u7684size\u5c45\u4e2d\u663e\u793a\uff0c\u4f7f\u5f97\u56fe\u7247\u957f\uff08\u5bbd\uff09\u7b49\u4e8e\u6216\u5927\u4e8eView\u7684\u957f\uff08\u5bbd\uff09</p> <p>CENTER_INSIDE/centerinside \u5c06\u56fe\u7247\u7684\u5185\u5bb9\u5b8c\u6574\u5c45\u4e2d\u663e\u793a\uff0c\u901a\u8fc7\u6bd4\u4f8b\u7f29\u5c0f\u6216\u539f\u6765\u7684size\u4f7f\u5f97\u56fe\u7247\u957f/\u5bbd\u7b49\u4e8e\u6216\u5c0f\u4e8eView\u7684\u957f/\u5bbd</p> <p>FIT_CENTER/fitCenter \u5c06\u56fe\u7247\u6309\u6bd4\u4f8b\u6269\u5927/\u7f29\u5c0f\u5230View\u7684\u5bbd\u5ea6\uff0c\u5c45\u4e2d\u663e\u793a</p> <p>FIT_END/fitEnd \u628a\u56fe\u7247\u6309\u6bd4\u4f8b\u6269\u5927/\u7f29\u5c0f\u5230View\u7684\u5bbd\u5ea6\uff0c\u663e\u793a\u5728View\u7684\u4e0b\u90e8\u5206\u4f4d\u7f6e</p> <p>FIT_START/fitStart \u628a\u56fe\u7247\u6309\u6bd4\u4f8b\u6269\u5927/\u7f29\u5c0f\u5230View\u7684\u5bbd\u5ea6\uff0c\u663e\u793a\u5728View\u7684\u4e0a\u90e8\u5206\u4f4d\u7f6e</p> <p>FIT_XY/fitXY \u628a\u56fe\u7247\u4e0d\u6309\u6bd4\u4f8b\u6269\u5927/\u7f29\u5c0f\u5230View\u7684\u5927\u5c0f\u663e\u793a</p> <p>MATRIX/ matrix \u7528\u77e9\u9635\u6765\u7ed8\u5236\uff0c\u52a8\u6001\u7f29\u5c0f\u653e\u5927\u56fe\u7247\u6765\u663e\u793a</p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#73","title":"7.3 \u7ea6\u675f\u5e03\u5c40","text":"<pre><code>androidx.constraintlayout.widget.ConstraintLayout\uff1a\n</code></pre> <p>\u901a\u8fc7\u6c34\u5e73\u504f\u5dee\u548c\u5782\u76f4\u504f\u5dee\u6765\u63a7\u5236\u4f4d\u7f6e</p> <pre><code>app:layout_constraintHorizontal_bias=\"0.1\"\napp:layout_constraintVertical_bias=\"0.5\"\n</code></pre>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#74","title":"7.4 \u81ea\u5b9a\u4e49\u5e03\u5c40","text":""},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#8","title":"8\u3001\u63a7\u4ef6","text":"<p>8.1 TextView </p> <p>textcolor:\u989c\u8272</p> <p>textSize:\u5b57\u4f53\u5927\u5c0f</p> <p>gravity:\u6587\u5b57\u7684\u5bf9\u9f50\u65b9\u5f0f</p> <p>textAllCaps:\u5173\u95ed\u5168\u5927\u5199</p> <p>ellipsize:\u653e\u4e0d\u4e0b\u65f6\u4f1a\u3002\u3002\u3002\u3002</p> <p>drawableRight :\u53f3\u8fb9\u653e\u56fe\u7247</p> <p>drawablePadding:</p> <p>\u4e0b\u5212\u7ebf\uff1a</p> <pre><code>Textview.getPaint().setFlags(Paint.STRIKE_THRU_TEXT_FLAG);//\u4e2d\u5212\u7ebf\nTextview.getPaint().setAntiAlias(true); //\u53bb\u6389\u952f\u9f7f\n</code></pre> <p>\u8fd8\u53ef\u4ee5\u901a\u8fc7html\u4ee3\u7801\u5b9e\u73b0\u3002</p> <pre><code>Textview.setText(Html.formHTML(\"&lt;u&gt;\u4e0b\u5212\u7ebf&lt;/u&gt;\"))\n</code></pre> <p>\u5faa\u73af\u663e\u793a\u4e00\u53e5\u8bdd</p> <pre><code>android:ellipsize=\"marquee\"\nandroid:marqueeRepeatLimit=\"marquee_forever\"\nandroid:focusable=\"true\"\nandroid:focusableInTouchMode=\"true\"\n</code></pre> <p>8.2 Button</p> <p>layout_gravity:\u5e03\u5c40\u5185\u7684\u5bf9\u9f50\u65b9\u5f0f</p> <p>1\u3001\u901a\u8fc7drawable \u53ef\u4ee5\u8bbe\u7f6e\u80cc\u666f\u989c\u8272\u548c\u80cc\u666f\u5f62\u72b6</p> <p>shape</p> <pre><code>&lt;shape\n    android:shape=\"rectangle\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;stroke\n        android:width=\"1dp\"\n        android:color=\"#FF9900\"&gt;&lt;/stroke&gt;\n    &lt;corners\n        android:radius=\"20dp\"/&gt;\n&lt;/shape&gt;\n</code></pre> <p>seletor</p> <pre><code>&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n&lt;item android:state_pressed=\"true\"&gt;\n    &lt;shape&gt;\n        &lt;solid android:color=\"#AA6600\"&gt;&lt;/solid&gt;\n        &lt;corners android:radius=\"20dp\"&gt;&lt;/corners&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n    &lt;item android:state_pressed=\"false\"&gt;\n        &lt;shape&gt;\n            &lt;solid android:color=\"#FF9900\"&gt;&lt;/solid&gt;\n            &lt;corners android:radius=\"20dp\"&gt;&lt;/corners&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n&lt;/selector&gt;\n</code></pre> <p>8.3 EditText</p> <pre><code>    &lt;EditText\n        android:id=\"@+id/editText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:ems=\"10\"\n        android:inputType=\"phone\"\n        android:textSize=\"16sp\"\n        android:textColor=\"#FF0000\"\n        android:maxLines=\"1\"\n        android:hint=\"\u624b\u673a\u53f7\"\n        android:drawableLeft=\"\"\n        android:drawablePadding=\"50dp\"/&gt;\n</code></pre> <p>\u76d1\u542c\u4e8b\u4ef6</p> <pre><code>addTextChange()\n</code></pre> <ol> <li>4 \u5355\u9009\u6309\u94ae</li> </ol> <pre><code>&lt;RadioGroup\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:id=\"@+id/rg_1\"&gt;\n    &lt;RadioButton\n        android:id=\"@+id/radioButton_1\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"RadioButton1\" /&gt;\n\n    &lt;RadioButton\n        android:id=\"@+id/radioButton_2\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"RadioButton2\" /&gt;\n&lt;/RadioGroup&gt;\n</code></pre> <p>\u76d1\u542c\u4e8b\u4ef6</p> <pre><code>setOnCheckedChangeListener()\n</code></pre> <p>8.5 ImageView</p> <pre><code>\n&lt;ImageView\n    android:layout_width=\"300dp\"\n    android:layout_height=\"200dp\"\n    android:background=\"#FF9900\"\n    android:src=\"@drawable/bg_htm1\"\n    android:scaleType=\"fitXY\"/&gt;\n</code></pre> <p>scaleType</p> FitXY \u6491\u6ee1\u63a7\u4ef6\uff0c\u5bbd\u9ad8\u6bd4\u53d1\u751f\u6539\u53d8 FitCenter \u4fdd\u6301\u5bbd\u9ad8\u6bd4\u7f29\u653e\uff0c\u76f4\u81f3\u80fd\u591f\u5b8c\u5168\u663e\u793a centerCrop \u4fdd\u6301\u5bbd\u9ad8\u6bd4\u7f29\u653e\uff0c\u5b8c\u5168\u8986\u76d6\u8f6f\u4ef6\uff0c\u88c1\u526a\u663e\u793a <p>\u8fdc\u7a0b\u52a0\u8f7d\u56fe\u7247 </p> <pre><code> IV_1 = (ImageView) findViewById(R.id.ig_1);\n        Glide.with(this).load(\"https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png\").into(IV_1);\n</code></pre> <p>8.6 ListView \uff08\u4ee5\u4e00\u4e2a\u56fe\u7247\u52a0\u4e00\u4e2a\u540d\u79f0\u4e3a\u4f8b\uff09</p> <ul> <li> <p>\u65b0\u5efa\u4e00\u4e2a\u5e03\u5c40\uff0c\u653e\u5165ListView\u63a7\u4ef6</p> </li> <li> <p>\u65b0\u5efa\u4e00\u4e2a\u5e03\u5c40\uff0c\u5b58\u50a8ListView\u7684\u6bcf\u4e00\u884c</p> </li> </ul> <p>```xml    <p>   ```</p> <ul> <li> <p>\u65b0\u5efa\u4e00\u4e2a\u7c7b\u5b58\u50a8\uff08\u56fe\u7247\u548c\u540d\u79f0\uff09</p> </li> <li> <p>\u65b0\u5efa\u4e00\u4e2a\u9002\u914d\u5668\u5b58\u50a8\u6bcf\u884c\u4fe1\u606f</p> </li> </ul> <p>```java   public class MyFruitAdapater extends ArrayAdapter {       private int ResourceId; <pre><code>  //\u6784\u9020\u51fd\u6570\n  public MyFruitAdapater(Context context, int textViewResourceId, List&lt;Fruit&gt; object) {\n      super(context, textViewResourceId, object);\n      ResourceId = textViewResourceId;\n  }\n\n  //\u83b7\u53d6\u6bcf\u4e00\u9879\u7684\u4fe1\u606f\n  @NonNull\n  @Override\n  public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n      Fruit fruit = getItem(position);//\u83b7\u53d6\u5f53\u524d\u5b9e\u4f8b\n      View view = LayoutInflater.from(getContext()).inflate(ResourceId, parent, false);//\u52a0\u8f7d\u6bcf\u9879\u7684\u5e03\u5c40\n      TextView fruitName = (TextView) view.findViewById(R.id.fruit_item_text);\n      ImageView fruitImage = (ImageView) view.findViewById(R.id.friut_item_img);\n      fruitName.setText(fruit.getName());\n      fruitImage.setImageResource(fruit.getImageId());\n      return view;\n  }\n</code></pre> <p>}   ```</p> <ul> <li>\u5728\u6d3b\u52a8\u4e2d\u6dfb\u52a0\u6570\u636e\uff0c\u663e\u793a\u70b9\u51fb\u540e\u7684\u6548\u679c</li> </ul> <p>```java     InitFruits();//\u521d\u59cb\u5316\u6c34\u679c\u6570\u636e           MyFruitAdapater fruitAdapater = new MyFruitAdapater(ListActivity.this,R.layout.fruit_item,fruitList);           //\u5c06\u9002\u914d\u5668\u6dfb\u52a0\u5230listview           ListView Ltview = (ListView)findViewById(R.id.ListView_1);           Ltview.setAdapter(fruitAdapater);          //\u70b9\u51fb\u4e8b\u4ef6           Ltview.setOnItemClickListener(new AdapterView.OnItemClickListener() {               @Override               public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {                   Fruit fruit = fruitList.get(position);                   Toast.makeText(ListActivity.this,fruit.getName(),Toast.LENGTH_SHORT).show();               }           });</p> <p>```</p> <p>8.7\u3001Alert.Dialog\u7684\u4f7f\u7528     \u63d0\u793a\u91cd\u8981\u4fe1\u606f</p> <pre><code>// Alert.Dialog\u7684\u4f7f\u7528\nAlertDialog.Builder dialog = new AlertDialog.Builder(SecondActivity.this);\ndialog.setTitle(\"\u8fd9\u662f\u4e00\u4e2a\u91cd\u8981\u7684\u4fe1\u606f\");\ndialog.setMessage(\"\u4f60\u786e\u5b9a\u8981\u70b9\u51fb\u5417?\");\ndialog.setCancelable(false); //\u662f\u5426\u70b9\u51fb\u5176\u4ed6\u5730\u65b9\u4f1a\u53d6\u6d88\ndialog.setPositiveButton(\"Ok!\", new DialogInterface.OnClickListener() {\n    @Override\n    public void onClick(DialogInterface dialog, int which) {\n\n    }\n});\ndialog.show();\n</code></pre> <p>8.8 Prograssbar </p> <p>Visibility   (visible,invisible,gone)</p> <pre><code>//\u8bbe\u7f6e\u4e3a\u6c34\u5e73\u8fdb\u5ea6\u6761\nstyle=\"@style/Widget.AppCompat.ProgressBar.Horizontal\"\nandroid:max=\"100\"\n</code></pre>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#9broadcast-receiver","title":"9\u3001Broadcast receiver \u5e7f\u64ad","text":"<ul> <li> <p>\u4f60\u7684\u5e94\u7528\u53ef\u4ee5\u4f7f\u7528\u5b83\u5bf9\u5916\u90e8\u4e8b\u4ef6\u8fdb\u884c\u8fc7\u6ee4\uff0c\u53ea\u5bf9\u611f\u5174\u8da3\u7684\u5916\u90e8\u4e8b\u4ef6(\u5982\u5f53\u7535\u8bdd\u547c\u5165\u65f6\uff0c\u6216\u8005\u6570\u636e\u7f51\u7edc\u53ef\u7528\u65f6)\u8fdb\u884c\u63a5\u6536\u5e76\u505a\u51fa\u54cd\u5e94\u3002\u5e7f\u64ad\u63a5\u6536\u5668\u6ca1\u6709\u7528\u6237\u754c\u9762\u3002\u7136\u800c\uff0c\u5b83\u4eec\u53ef\u4ee5\u542f\u52a8\u4e00\u4e2aactivity\u6216serice\u6765\u54cd\u5e94\u5b83\u4eec\u6536\u5230\u7684\u4fe1\u606f\uff0c\u6216\u8005\u7528NotificationManager\u6765\u901a\u77e5\u7528\u6237\u3002\u901a\u77e5\u53ef\u4ee5\u7528\u5f88\u591a\u79cd\u65b9\u5f0f\u6765\u5438\u5f15\u7528\u6237\u7684\u6ce8\u610f\u529b\uff0c\u4f8b\u5982\u95ea\u52a8\u80cc\u706f\u3001\u9707\u52a8\u3001\u64ad\u653e\u58f0\u97f3\u7b49\u3002\u4e00\u822c\u6765\u8bf4\u662f\u5728\u72b6\u6001\u680f\u4e0a\u653e\u4e00\u4e2a\u6301\u4e45\u7684\u56fe\u6807\uff0c\u7528\u6237\u53ef\u4ee5\u6253\u5f00\u5b83\u5e76\u83b7\u53d6\u6d88\u606f\u3002</p> </li> <li> <p>\u7a0b\u5e8f\u52a8\u6001\u6ce8\u518c</p> </li> </ul> <p>\u5f53\u7528\u6765\u6ce8\u518c\u7684Activity\u5173\u6389\u540e\uff0c\u5e7f\u64ad\u4e5f\u5c31\u5931\u6548\u4e86</p> <ul> <li> <p>\u65b0\u5efa\u7c7b\u7ee7\u627f\u5e7f\u64ad\uff0c\u5f53\u7f51\u7edc\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u53d1\u51fa\u5e7f\u64ad</p> <p>```java  private NetWorkChangeReceiver netWorkChangeReceiver;  class NetWorkChangeReceiver extends BroadcastReceiver {</p> <pre><code>    @Override\n    public void onReceive(Context context, Intent intent) {\n        Toast.makeText(context,\"network changes\",Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre> <p>```</p> </li> <li> <p>\u6ce8\u518c\u5e7f\u64ad\uff0c\u9700\u8981Intenterfliter\u534f\u52a9</p> <p><code>java private IntentFilter intentFilter; //Boardcast \u5e7f\u64ad\u7a0b\u5e8f\u52a8\u6001\u6ce8\u518c intentFilter = new IntentFilter(); intentFilter.addAction(\"android.net.com.CONNECTIVITY_CHANGE\"); //\u5b9e\u73b0\u76d1\u542c netWorkChangeReceiver = new NetWorkChangeReceiver(); registerReceiver(netWorkChangeReceiver,intentFilter);</code></p> </li> <li> <p>\u5173\u95ed\u65f6\u53d6\u6d88\u5e7f\u64ad</p> <p><code>java  //\u5173\u95ed\u65f6\u53d6\u6d88\u5e7f\u64ad\u7684\u6ce8\u518c     protected  void onDestoy()     {         super.onDestroy();         unregisterReceiver(netWorkChangeReceiver);     }</code></p> </li> <li> <p>AndoidManifest.xml\u4e2d\u6ce8\u518c\u6743\u9650</p> <p><code>xml  &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;</code></p> </li> <li> <p>\u9759\u6001\u6ce8\u518c</p> </li> </ul> <p>\u9759\u6001\u6ce8\u518c\u65e0\u9700\u62c5\u5fe7\u5e7f\u64ad\u63a5\u6536\u5668\u662f\u5426\u88ab\u5173\u95ed\uff0c\u53ea\u8981\u8bbe\u5907\u662f\u5f00\u542f\u72b6\u6001\uff0c\u5e7f\u64ad\u63a5\u6536\u5668\u4e5f\u662f\u6253\u5f00\u7740\u7684\u3002Android 7\u4e4b\u540e\u9700\u8981\u8bbe\u7f6e\u624d\u80fd\u6253\u5f00\u4ece\u672a\u542f\u52a8\u8fc7App\u7684\u9759\u6001\u6ce8\u518c\u7684\u5e7f\u64ad\uff0c\u8be5app\u8ba2\u9605\u7684\u5e7f\u64ad\u5728\u89e6\u53d1\u65f6\u4e5f\u4f1a\u5bf9\u5b83\u8d77\u4f5c\u7528\u3002</p> <ul> <li> <p>\u4ee5\u91cd\u542f\u4e3a\u4f8b</p> </li> <li> <p>\u65b0\u5efa\u4e00\u4e2aBroadcast Receiver\uff0c\u4fee\u6539\u5176\u51fd\u6570</p> </li> <li> <p>\u5728AndroidManifest.xml\u4e2d\u6ce8\u518c\u548c\u6dfb\u52a0\u91cd\u542f\u6743\u9650</p> <p><code>xml &lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\"/&gt; &lt;receiver           android:name=\".BootCompleteReceiver\"           android:enabled=\"true\"           android:exported=\"true\"&gt;     &lt;intent-filter&gt;         &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\"/&gt;     &lt;/intent-filter&gt; &lt;/receiver&gt;</code></p> </li> <li> <p>\u5f3a\u5236\u4e0b\u7ebf</p> </li> </ul>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#10","title":"10\u3001\u6587\u4ef6\u8bfb\u5199\u548c\u5b58\u50a8","text":"<ul> <li>\u5b58\u50a8\u5728\u76f8\u5bf9\u8def\u5f84\u4e0b\uff0c\u4f7f\u7528FileOutputStream\u7c7b\u83b7\u53d6\u6587\u4ef6\uff0cBufferedWriter\u7c7b\u5199\u5165\u3002\uff08\u4ee5\u9500\u6bc1\u65f6\u5b58\u6237\u6570\u636e\u4e3a\u4f8b\uff09</li> </ul> <pre><code>private void save(String str) {\n    FileOutputStream out = null;\n    BufferedWriter writer = null;\n    try {\n        out = openFileOutput(\"data\", Context.MODE_PRIVATE);\n        writer = new BufferedWriter(new OutputStreamWriter(out));\n        writer.write(str);\n    } catch (IOException e) {\n        e.printStackTrace();\n    } finally {\n        try {\n            if (writer != null) {\n                writer.close();\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre> <p>\u200b       </p> <ul> <li>\u8bfb\u53d6\u76f8\u5bf9\u8def\u5f84\u4e0b\u7684\u6570\u636e\uff0c\u4f7f\u7528FileInputStream\u7c7b\u83b7\u53d6\u6587\u4ef6\uff0cBufferedReader\u8bfb\u53d6\u6587\u4ef6\u3002</li> </ul> <pre><code> private String LoadData(){\n        FileInputStream in = null;\n        BufferedReader reader = null;\n        StringBuilder content = new StringBuilder();\n        try {\n            in = openFileInput(\"data\");\n            reader =  new BufferedReader(new InputStreamReader(in));\n            String line = \"\";\n            //\u8bfb\u53d6\u6bcf\u4e00\u884c\n            while((line = reader.readLine())!=null)\n            {\n                  content.append(line);\n            }\n        }catch (IOException e){\n            e.printStackTrace();\n        }\n        finally {\n            try{\n                if(reader != null)\n                {\n                    reader.close();\n                }\n            }\n            catch (IOException e)\n            {\n                e.printStackTrace();\n            }\n        }\n        return content.toString();\n    }\n</code></pre> <ul> <li>\u4f7f\u7528SharedPreferences\u5b58\u50a8\u6570\u636e\uff0c\u8fd9\u662f\u4ee5Key-value\u7684\u5f62\u5f0f\u5b58\u50a8\u5728xml\u4e2d\u3002</li> </ul> <pre><code>SharedPreferences.Editor editor = getSharedPreferences(\"data\",MODE_PRIVATE).edit();\neditor.putString(\"name\",\"Tome\");\neditor.putInt(\"age\",26);\neditor.putBoolean(\"sex\",true);\neditor.apply();\n</code></pre> <ul> <li>\u4f7f\u7528SharedPreferences\u8bfb\u53d6\u6570\u636e</li> </ul> <pre><code>SharedPreferences Pref = getSharedPreferences(\"data\",MODE_PRIVATE);\nString Name = Pref.getString(\"name\",\"\"); //Key\u503c \u627e\u4e0d\u5230\u65f6\u7684\u8fd4\u56de\u503c\nint Age = Pref.getInt(\"age\",-1);\nboolean sex = Pref.getBoolean(\"sex\",false);\nLog.d(TAG, \"Name is \"+Name);\nLog.d(TAG, \"Age is\"+Age);\nLog.d(TAG, \"sex is\"+ sex);\n</code></pre>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#11sqlite","title":"11\u3001SQLite\u6570\u636e\u5e93\u7684\u4f7f\u7528","text":"<ul> <li> <p>SQLite\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u6570\u636e\u5e93\u3002</p> </li> <li> <p>\u5185\u7f6e\u7684SQLiteOpenHelper\u7c7b\u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u82e5\u60f3\u4f7f\u7528\u5b83\uff0c\u5fc5\u987b\u7ee7\u627f\u4f7f\u7528\u5b83\uff0c\u501f\u52a9\u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u521b\u5efa</p> </li> </ul> \u65b9\u6cd5\u6216\u5b9e\u4f8b \u4f5c\u7528 DatabaseHelper\uff08\uff09 \u6784\u9020\u51fd\u6570\u3002\u56db\u4e2a\u53c2\u6570(Context context, String name, CursorFactory factory, int version\uff09 onCreate() \u521b\u5efa\u6570\u636e\u5e93 onUpgrade() \u5347\u7ea7\u6570\u636e\u5e93 getReadableDatabase() \u521b\u5efa\u6216\u6253\u5f00\u4e00\u4e2a\u5df2\u6709\u7684\u6570\u636e\u5e93\uff0c\u8fd4\u56de\u5bf9\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u5bf9\u8c61SQLiteDatabase\uff0c\u78c1\u76d8\u6ee1\u65f6\uff0c\u8fd4\u56de\u53ea\u8bfb getWritableDatabase() g <p>\u53ef\u89c6\u5316\u6570\u636e\u5e93\u63d2\u4ef6\u540d\u79f0\uff1aDatabase Navigator \u6216Android studio \u81ea\u5e26\u7684aApp Inspection</p> <p><code>java     DBhelper =new MyDataOpenHelper(this,\"Library.dp\",null,1);     DBhelper.getWritableDatabase();</code></p> <ul> <li>SQlitedatabse\u5bf9\u8c61\u7684\u65b9\u6cd5</li> </ul> \u65b9\u6cd5\u540d\u79f0 \u53c2\u6570 \u65b9\u6cd5\u8bf4\u660e insert() (Table\uff0cnull,ContentValue) \u6dfb\u52a0\u6570\u636e update() (Table,ContentValue,WhereClause) \u4fee\u6539\u6570\u636e delete() (Table,WhereClause) \u5220\u9664\u6570\u636e query() (Table,columns,selection,selection Args,Group By\uff0chaving,order by) \u67e5\u8be2\u6570\u636e <p><code>java   //insert  SQLiteDatabse\u64cd\u4f5c   SQLiteDatabase database =   DBhelper.getReadableDatabase();   ContentValues values = new ContentValues();   //\u5f00\u59cb\u6dfb\u52a0\u4e00\u7ec4\u6570\u636e   values.put(\"name\",\"Android Base\");   values.put(\"author\",\"Harry\");   values.put(\"pages\",123);   values.put(\"price\",16.32);   database.insert(\"Book\",null,values);   values.clear();   values.put(\"name\",\"Base Android \");   values.put(\"author\",\"Harry\");   values.put(\"pages\",123);   values.put(\"price\",16.32);   database.insert(\"Book\",null,values);   //SQLiteOpenHelper   db.execSQL(\"insert into person (name,number) values(?,?)\",new Object[]{name,number});</code></p> <p>```java   //\u4fee\u6539\u6570\u636e   SQLiteDatabase \u64cd\u4f5c   SQLiteDatabase database = DBhelper.getReadableDatabase();                   ContentValues values = new ContentValues();                   values.put(\"price\",10.00);                   database.update(\"Book\",values,\"id =?\",new String[]{\"1\"});   //SQLiteOpenHelper</p> <p>```</p> <p>```java   //\u5220\u9664\u6570\u636e\u6570\u636e    SQLiteDatabase database = DBhelper.getWritableDatabase();                   database.delete(\"Book\",\"id=?\",new String[]{\"2\"});                   database.close();</p> <p>```</p> <p><code>java    //\u67e5\u8be2\u6570\u636e    SQLiteDatabase database = DBhelper.getWritableDatabase();                   Cursor  cursor = database.query(\"Book\",null,null,null,null,null,null);                   if(cursor.moveToFirst()){                       do{                           String name =  cursor.getString(cursor.getColumnIndex(\"name\"));                           Log.d(TAG, \"Name is \"+name);                       }while (cursor.moveToNext());                   }</code></p>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#12fragment","title":"12\u3001Fragment\u7684\u4f7f\u7528","text":"<ul> <li> <p>\u9759\u6001\u4f7f\u7528</p> </li> <li> <p>\u65b0\u5efa\u7247\u6bb5\u5e03\u5c40</p> <p><code>xml &lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"     android:orientation=\"horizontal\" android:layout_width=\"match_parent\"     android:layout_height=\"match_parent\"&gt; &lt;Button     android:id=\"@+id/left_Bt1\"     android:layout_width=\"wrap_content\"     android:layout_height=\"wrap_content\"     android:layout_gravity=\"center_horizontal\"     android:text=\"left\"     /&gt; &lt;/LinearLayout&gt;</code></p> </li> <li> <p>\u65b0\u5efa\u7247\u6bb5\u7c7b\u7ee7\u627fFragment\uff0c\u7136\u540e\u52a0\u8f7d\u7247\u6bb5\u5e03\u5c40</p> <p><code>java public class LeftFragment extends Fragment {     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){         View view = inflater.inflate(R.layout.left_fragment,container,false);         return view; } }</code></p> </li> <li> <p>\u5728\u4e3b\u754c\u9762\u901a\u8fc7\u5305\u540d\u4f7f\u7528\u7247\u6bb5\u5e03\u5c40</p> <p><code>xml     &lt;fragment         android:id=\"@+id/fragementleft\"         android:layout_width=\"0dp\"         android:layout_height=\"match_parent\"         android:layout_weight=\"1\"         android:name=\"com.example.databasetest.LeftFragment\"/&gt;</code></p> </li> <li> <p>\u52a8\u6001\u4f7f\u7528\u7247\u6bb5</p> </li> <li> <p>\u5e03\u5c40\u7684\u5efa\u7acb\u548c\u9759\u6001\u7684\u5e03\u5c40\u4e00\u6837</p> </li> <li> <p>\u5728\u4e3b\u754c\u9762\u65b0\u5efaFrameLayout\u63a7\u4ef6\u7528\u6765\u653e\u7247\u6bb5\u5e03\u5c40</p> </li> <li> <p>\u7247\u6bb5\u5e03\u5c40\u7684\u66ff\u6362\u51fd\u6570</p> <p><code>java   //\u52a8\u6001\u6dfb\u52a0Fragement     private void replaceFragment(Fragment fragment) {         //1\u3001\u521b\u5efa\u4ee3\u66ffFrgment\u7684\u5b9e\u4f8b         //2\u3001\u901a\u8fc7getSupportFragmentManager()\u83b7\u53d6         //3\u3001\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1         //4\u3001\u6dfb\u52a0\u7247\u6bb5         //5\u3001\u63d0\u4ea4\u4e8b\u52a1         FragmentManager fragmentManager = getSupportFragmentManager();         FragmentTransaction transaction = fragmentManager.beginTransaction();         transaction.replace(R.id.RightFrame, fragment);         transaction.commit();     }</code></p> </li> <li> <p>\u901a\u8fc7\u4e8b\u4ef6\u8fdb\u884c\u66ff\u6362</p> </li> </ul> <p>\u7247\u6bb5\u6a21\u62df\u8fd4\u56de\u6808</p> <pre><code>/**\n * Add this transaction to the back stack.  This means that the transaction\n * will be remembered after it is committed, and will reverse its operation\n * when later popped off the stack.\n *\n * @param name An optional name for this back stack state, or null.\n */\n@NonNull\npublic abstract FragmentTransaction addToBackStack(@Nullable String name);\n</code></pre>"},{"location":"Android/1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/#13material-design","title":"13\u3001Material Design","text":"<ul> <li>Material ToolBar</li> </ul> <p>\u4e3b\u9898\u7684\u5207\u6362  \u4ee5Actionbar\u4e3a\u4f8b</p> <pre><code>&lt;androidx.appcompat.widget.Toolbar\n    android:id=\"@+id/ToolBar\"\n    android:layout_width=\"match_parent\"\n    android:background=\"#8546ff\"\n    android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n    app:popupTheme=\"@style/Theme.AppCompat.Light\"\n    android:layout_height=\"?attr/actionBarSize\"/&gt;\n\n</code></pre> <pre><code>        Toolbar bar = (Toolbar) findViewById(R.id.ToolBar);\n        setSupportActionBar(bar);\n</code></pre> <ul> <li> <p>Material DrawerLayout \u6eda\u52a8\u83dc\u5355</p> </li> <li> <p>\u5efa\u7acbDrawerLayout\u5e03\u5c40\u7684\u754c\u9762  </p> <p><code>xml &lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"     xmlns:app=\"http://schemas.android.com/apk/res-auto\"     xmlns:tools=\"http://schemas.android.com/tools\"     android:layout_width=\"match_parent\"     android:layout_height=\"match_parent\"     android:id=\"@+id/drawer_layout\"     tools:context=\".MainActivity\"&gt;     &lt;FrameLayout         android:layout_width=\"match_parent\"         android:layout_height=\"match_parent\"&gt;         &lt;androidx.appcompat.widget.Toolbar             android:id=\"@+id/ToolBar\"             android:layout_width=\"match_parent\"             android:background=\"#8546ff\"             android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"             app:popupTheme=\"@style/Theme.AppCompat.Light\"             android:layout_height=\"?attr/actionBarSize\"/&gt;     &lt;/FrameLayout&gt;   &lt;TextView       android:id=\"@+id/txt_drawer\"       android:layout_width=\"match_parent\"       android:layout_height=\"match_parent\"       android:textSize=\"30sp\"       android:background=\"#ff5263\"       android:layout_gravity=\"start\"  //\u4ece\u54ea\u91cc\u51fa\u73b0       android:text=\"This is a Menu\"/&gt; &lt;/androidx.drawerlayout.widget.DrawerLayout&gt;</code></p> </li> <li> <p>\u8bbe\u7f6e\u63d0\u793a\u6309\u94ae</p> <p><code>java mDrawerLayout = (DrawerLayout)findViewById(R.id.drawer_layout); ActionBar bar1 = getSupportActionBar(); if(bar1!=null){     bar1.setDisplayHomeAsUpEnabled(true);     //\u53ef\u4ee5\u52a0\u4e00\u4e2a\u56fe\u6807     //bar1.setHomeAsUpIndicator(R.); }</code></p> </li> <li> <p>\u70b9\u51fb\u51fa\u73b0\u6eda\u52a8\u83dc\u5355</p> <p><code>java  case android.R.id.home:                 mDrawerLayout.openDrawer(GravityCompat.START);                 break;</code></p> </li> <li> <p>NavigationView\u83dc\u5355\u680f\u7684\u4f7f\u7528</p> </li> <li> <p>\u5bfc\u5165\u4f9d\u8d56\u5305(app\u6587\u4ef6\u5939\u4e0bbuild.grade)</p> <p><code>xml implementation \"android.arch.navigation:navigation-fragment-ktx:1.0.0-alpha04\"     implementation \"android.arch.navigation:navigation-ui-ktx:1.0.0-alpha04\"</code></p> </li> <li> <p>\u65b0\u5efanav_menu\u5b58\u50a8\u83dc\u5355\u9009\u9879</p> <p>```xml  <p> ```</p> <li> <p>\u65b0\u5efanav_header\u5e03\u5c40\uff0c\u663e\u793a\u83dc\u5355\u7684\u6807\u5934</p> <p>```xml &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;       &lt;TextView         android:id=\"@+id/Mail\"         android:layout_width=\"wrap_content\"         android:layout_height=\"wrap_content\"         android:layout_alignParentBottom=\"true\"         android:text=\"zhangsan@163.com\" <pre><code>    android:textColor=\"#ffffff\"\n    android:textSize=\"16sp\"/&gt;\n&lt;TextView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"Zhangsan\"\n    android:textSize=\"25sp\"\n    android:layout_above=\"@+id/Mail\"\n    android:textColor=\"#ffffff\"/&gt;\n</code></pre> <p> ```</p> <li> <p>\u6dfb\u52a0\u5728NavigationView\u4e2d</p> <p><code>xml    &lt;com.google.android.material.navigation.NavigationView         android:id=\"@+id/Navigation\"         android:layout_gravity=\"start\"         android:layout_width=\"match_parent\"         android:layout_height=\"match_parent\"         app:menu=\"@menu/nav_menu\"         app:headerLayout=\"@layout/nav_header\"         /&gt;</code></p> </li> <li> <p>\u5b9e\u73b0\u5bf9\u83dc\u5355\u680f\u7684\u9009\u4e2d</p> <p><code>java   NavigationView nav = (NavigationView)findViewById(R.id.Navigation);         nav.setCheckedItem(R.id.Add);         nav.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() {             @Override             public boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {                 mDrawerLayout.closeDrawers();                 return true;             }         });</code></p> </li> <li> <p>FloatingActionButton \u60ac\u6d6e\u6309\u94ae</p> </li> <p><code>xml    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton              android:id=\"@+id/fab\"               android:layout_width=\"wrap_content\"               android:layout_height=\"wrap_content\"               android:layout_gravity=\"bottom|center\"               android:layout_margin=\"16dp\"               android:elevation=\"10dp\"/&gt; //\u60ac\u6d6e\u9ad8\u5ea6</code></p> <ul> <li>Snackbar\u7684\u4f7f\u7528  \u5f39\u51fa\u6846</li> </ul> <p><code>java      Snackbar.make(v,\"Data Deleted\",Snackbar.LENGTH_SHORT).setAction(\"Undo\", new View.OnClickListener() {                            @Override                            public void onClick(View v) {                                Toast.makeText(MainActivity.this,\"Data restored\",Toast.LENGTH_SHORT).show();                            }                        }).show();</code></p>"},{"location":"Android/20%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","title":"20 \u6027\u80fd\u4f18\u5316","text":"<p>1.\u5b66\u4f1a\u4f7f\u7528matrix\u6846\u67b6</p>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/","title":"21Gson\u4f7f\u7528\u548c\u6e90\u7801\u89e3\u6790","text":"<p>Gson\u5b98\u7f51</p> <p>Gson\u4f7f\u7528\u6587\u6863</p> <p>\u4f7f\u7528Gson\u7684\u539f\u56e0</p> <p>1.\u89e3\u6790\u5feb</p> <ul> <li>\u51cf\u5c11\u4e86\u53cd\u5c04</li> </ul> <p>2.\u529f\u80fd\u5168</p> <ul> <li>\u5e8f\u5217\u5316\u53c2\u6570</li> <li>\u5ffd\u7565\u53c2\u6570</li> </ul>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#1gson","title":"1.Gson\u7684\u4f7f\u7528","text":""},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#11-tojson-fromjson","title":"1.1 tojson &amp;&amp; fromjson \u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316","text":""},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#primitives","title":"\u57fa\u672c\u5c5e\u6027 primitives","text":"<pre><code>// Serialization\nGson gson = new Gson();\ngson.toJson(1);            // ==&gt; 1\ngson.toJson(\"abcd\");       // ==&gt; \"abcd\"\ngson.toJson(new Long(10)); // ==&gt; 10\nint[] values = { 1 };\ngson.toJson(values);       // ==&gt; [1]\n\n// Deserialization\nint one = gson.fromJson(\"1\", int.class);\nInteger one = gson.fromJson(\"1\", Integer.class);\nLong one = gson.fromJson(\"1\", Long.class);\nBoolean false = gson.fromJson(\"false\", Boolean.class);\nString str = gson.fromJson(\"\\\"abc\\\"\", String.class);\nString[] anotherStr = gson.fromJson(\"[\\\"abc\\\"]\", String[].class);\n</code></pre>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#-object","title":"\u7c7b-Object","text":"<pre><code>class BagOfPrimitives {\n  private int value1 = 1;\n  private String value2 = \"abc\";\n  private transient int value3 = 3;\n  BagOfPrimitives() {\n    // no-args constructor\n  }\n}\n// Serialization\nBagOfPrimitives obj = new BagOfPrimitives();\nGson gson = new Gson();\nString json = gson.toJson(obj);\n\n// ==&gt; json is {\"value1\":1,\"value2\":\"abc\"}\n// Deserialization\nBagOfPrimitives obj2 = gson.fromJson(json, BagOfPrimitives.class);\n// ==&gt; obj2 is just like obj\n</code></pre> <p>\u6ce8\u610f\uff1a</p> <p>1.\u63a8\u8350\u7c7b\u4e2d\u7684\u5c5e\u6027\u4f7f\u7528\u79c1\u6709\u5c5e\u6027\u3002</p> <p>2.\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u4e0d\u9700\u8981\u6ce8\u89e3\uff0c\u6240\u6709\u90fd\u4f7f\u7528\u9ed8\u8ba4\u7684\u3002</p> <p>3.transient \u5c5e\u6027\u4e0d\u88ab\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316</p> <p>4.\u5982\u4f55\u5904\u7406\u7a7a\u503c</p> <ul> <li>\u5e8f\u5217\u5316\u65f6(tojson)\uff0c\u7a7a\u503c\u4f1a\u88ab\u5ffd\u7565</li> <li>\u53cd\u5e8f\u5217\u5316\u65f6(fromjson),\u7a7a\u503c\u4f1a\u88ab\u53cd\u5e8f\u5217\u5316\u76f8\u5e94\u7684\u9ed8\u8ba4\u503c\uff0cObject = null,boolean = false ,int = 0;</li> </ul> <p>5.synthetic\u5c5e\u6027\u4e0d\u88ab\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316</p> <p>6.\u5185\u90e8\u7c7b\u4e2d\u5bf9\u5e94\u5916\u90e8\u7c7b\u7684\u5c5e\u6027\u5c06\u88ab\u5ffd\u7565\uff0c\u4e0d\u4f1a\u88ab\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316</p> <p>7.~~\u533f\u540d\u7c7b\u548c\u5185\u90e8\u7c7b\u4f1a\u88ab\u6392\u9664~~\u3002\u7ecf\u9a8c\u8bc1\u533f\u540d\u7c7b\u4ecd\u7136\u4f1a\u88ab\u5e8f\u5217\u5316\uff0c\u4f46\u5185\u90e8\u7c7b\u4f1a\u88ab\u6392\u9664</p>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#array-collections","title":"Array &amp;&amp; Collections","text":"<pre><code>Gson gson = new Gson();\nint[] ints = {1, 2, 3, 4, 5};\nString[] strings = {\"abc\", \"def\", \"ghi\"};\n// Serialization\ngson.toJson(ints);     // ==&gt; [1,2,3,4,5]\ngson.toJson(strings);  // ==&gt; [\"abc\", \"def\", \"ghi\"]\n\n// Deserialization\nint[] ints2 = gson.fromJson(\"[1,2,3,4,5]\", int[].class);\n// ==&gt; ints2 will be same as ints\n</code></pre> <pre><code>Gson gson = new Gson();\nCollection&lt;Integer&gt; ints = Arrays.asList(1,2,3,4,5);\n\n// Serialization\nString json = gson.toJson(ints);  // ==&gt; json is [1,2,3,4,5]\n\n// Deserialization\nTypeToken&lt;Collection&lt;Integer&gt;&gt; collectionType = new TypeToken&lt;Collection&lt;Integer&gt;&gt;(){};\n// Note: For older Gson versions it is necessary to use `collectionType.getType()` as argument below,\n// this is however not type-safe and care must be taken to specify the correct type for the local variable\nCollection&lt;Integer&gt; ints2 = gson.fromJson(json, collectionType);\n// ==&gt; ints2 is same as ints\n</code></pre> <p>\u6ce8\u610f\uff1aCollection \u5728\u53cd\u5e8f\u5217\u5316\u65f6\uff0c\u9700\u8981\u4f7f\u7528\u6cdb\u578bTypeToken,\u56e0\u4e3a\u5b83\u65e0\u6cd5\u6307\u5b9a\u7ed3\u679c\u7c7b\u7684\u5177\u4f53\u7c7b\u578b\u3002</p>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#map","title":"Map","text":"<pre><code>Gson gson = new Gson();\nMap&lt;String, String&gt; stringMap = new LinkedHashMap&lt;&gt;();\nstringMap.put(\"key\", \"value\");\nstringMap.put(null, \"null-entry\");\n\n// Serialization\nString json = gson.toJson(stringMap); // ==&gt; json is {\"key\":\"value\",\"null\":\"null-entry\"}\n\nMap&lt;Integer, Integer&gt; intMap = new LinkedHashMap&lt;&gt;();\nintMap.put(2, 4);\nintMap.put(3, 6);\n\n// Serialization\nString json = gson.toJson(intMap); // ==&gt; json is {\"2\":4,\"3\":6}\n\n// Deserialization\nGson gson = new Gson();\nTypeToken&lt;Map&lt;String, String&gt;&gt; mapType = new TypeToken&lt;Map&lt;String, String&gt;&gt;(){};\nString json = \"{\\\"key\\\": \\\"value\\\"}\";\n\n// Note: For older Gson versions it is necessary to use `mapType.getType()` as argument below,\n// this is however not type-safe and care must be taken to specify the correct type for the local variable\nMap&lt;String, String&gt; stringMap = gson.fromJson(json, mapType);\n// ==&gt; stringMap is {key=value}\n</code></pre> <p>\u6ce8\u610f\uff1aGson\u9ed8\u8ba4\u5c06<code>java.util.Map</code>\u4f7f\u7528Json\u5bf9\u8c61\u7684\u5f62\u5f0f\u5e8f\u5217\u5316\uff0c\u672c\u8d28\u4e0a\u662f\u5728Map\u4e0a\u8c03\u7528toString()\u65b9\u6cd5\u3002</p> <p>\u200b      \u4f46\u5bf9\u4e8e\u590d\u6742\u7684Map\u5bf9\u8c61\uff0c\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\uff1a<code>GsonBuilder().enableComplexMapKeySerialization()</code>,\u5982\u679c\u4f7f\u7528\u4e86\u8fd9\u4e2a\u529f\u80fd\uff0c\u5c06\u4f1a\u4f7f\u7528TypeAdapter#write()\u65b9\u6cd5\u4ee3\u66ff<code>toString()</code></p> <pre><code>class PersonName {\n  String firstName;\n  String lastName;\n\n  PersonName(String firstName, String lastName) {\n    this.firstName = firstName;\n    this.lastName = lastName;\n  }\n\n  // ... equals and hashCode\n}\n\nGson gson = new GsonBuilder().enableComplexMapKeySerialization().create();\nMap&lt;PersonName, Integer&gt; complexMap = new LinkedHashMap&lt;&gt;();\ncomplexMap.put(new PersonName(\"John\", \"Doe\"), 30);\ncomplexMap.put(new PersonName(\"Jane\", \"Doe\"), 35);\n\n// Serialization; complex map is serialized as a JSON array containing key-value pairs (as JSON arrays)\nString json = gson.toJson(complexMap);\n// ==&gt; json is [[{\"firstName\":\"John\",\"lastName\":\"Doe\"},30],[{\"firstName\":\"Jane\",\"lastName\":\"Doe\"},35]]\n//\n//\u82e5\u5177\u5907Enable\u7684gson\u5bf9\u8c61\u5e8f\u5217\u5316\u5e38\u89c4\u7684Map\u7c7b\u578b\uff0c\u8fd8\u662f\u4f1a\u5e8f\u5217\u5316\u6210\u5e38\u89c4\u7684Json\u5bf9\u8c61\u3002\nMap&lt;String, String&gt; stringMap = new LinkedHashMap&lt;&gt;();\nstringMap.put(\"key\", \"value\");\n// Serialization; non-complex map is serialized as a regular JSON object\nString json = gson.toJson(stringMap); // json is {\"key\":\"value\"}\n</code></pre> <p>\u82e5\u4f7f\u7528\u4e0d\u5177\u5907Enable\u7684gson\u5bf9\u8c61\uff0c\u4f1a\u5bfc\u81f4\u7f16\u7801\u7684\u952e\u683c\u5f0f\u9519\u8bef\uff0c\u5982\u4e0b:</p> <pre><code>Gson gson = new Gson();\nString json = gson.toJson(complexMap);\n// ==&gt; {\"com.example.androiddemo.gson.PersonName@8e33f51\":30,\"com.example.androiddemo.gson.PersonName@fb2d3b6\":35}\n</code></pre>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#_1","title":"\u6cdb\u578b","text":"<p>\u6cdb\u578b\u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528toJson()||fromJson(),\u56e0\u4e3a\u83b7\u53d6\u7684class\u7c7b\u578b\u662f \u6cdb\u578b\u7684class\uff0c\u56e0\u6b64\u9700\u8981\u4f7f\u7528<code>TypeToken</code>Class\u3002</p> <pre><code>class Foo&lt;T&gt; {\n  T value;\n}\n//\u9519\u8bef\u4f7f\u7528\nGson gson = new Gson();\nFoo&lt;Bar&gt; foo = new Foo&lt;Bar&gt;();\ngson.toJson(foo); // May not serialize foo.value correctly\n\ngson.fromJson(json, foo.getClass()); // Fails to deserialize foo.value as Bar\n//\u6b63\u786e\u4f7f\u7528\nType fooType = new TypeToken&lt;Foo&lt;Bar&gt;&gt;() {}.getType();\ngson.toJson(foo, fooType);\ngson.fromJson(json, fooType);\n</code></pre> <p>\u95ee\u9898\uff1a\u4e3a\u4ec0\u4e48\u4f7f\u7528<code>new TypeToken&lt;Foo&lt;Bar&gt;&gt;() {}</code>\u533f\u540d\u5185\u90e8\u7c7b\u6765\u83b7\u53d6<code>getType()</code>,\u76f4\u63a5\u4f7f\u7528new () \u4e0d\u597d\u5417\uff1f</p> <p>\u7b54\uff1aJava5\u4e4b\u540e\u89c4\u5b9a\u4e86\u65b0\u7684Class\u6587\u4ef6\u683c\u5f0f\u89c4\u8303\uff0c\u65b9\u6cd5\u4e0e\u57df\u7684\u63cf\u8ff0\u7b26\u589e\u6dfb\u4e86\u5bf9\u6cdb\u578b\u4fe1\u606f\u7684\u8bb0\u5f55\u3002\u56e0\u6b64\u6cdb\u578b\u5199\u5230Class\u6587\u4ef6\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u89c4\u5f8b\uff1a</p> <ul> <li>\u58f0\u660e\u4e00\u4fa7\u7684\uff0c\u6e90\u7801\u91cc\u5199\u4e86\u4ec0\u4e48\u8fd0\u884c\u65f6\u5c31\u80fd\u770b\u5230\u4ec0\u4e48\u3002</li> <li>\u4f7f\u7528\u4e00\u4fa7\u7684\uff0c\u6e90\u7801\u91cc\u5199\u4e86\u4ec0\u4e48\u5230\u8fd0\u884c\u65f6\u5c31\u6ca1\u4e86</li> </ul> <p>\u56e0\u6b64\u51fa\u73b0\u8fd9\u6837\u7684\u60c5\u51b5\uff1a</p> <pre><code>List&lt;String&gt; list1 = new ArrayList&lt;String&gt;();//\u5de6\u4fa7\u58f0\u660e \u53f3\u4fa7\u4f7f\u7528\nList list2 = new ArrayList&lt;String&gt;();//\u5de6\u4fa7\u58f0\u660e \u53f3\u4fa7\u4f7f\u7528\n</code></pre> <p>\u5b9e\u4f8b1 <code>list1</code>class\u6587\u4ef6\u4e2d\u4f1a\u4fdd\u5b58String\u8fd9\u4e2a\u4f20\u5165\u7684\u6cdb\u578b\u53c2\u6570\u7684\u4fe1\u606f(\u8def\u5f84),\u800c\u5b9e\u4f8b2<code>list2</code>\u5c31\u6ca1\u6709\u5305\u542bString\u3002</p> <p>\u540c\u7406\uff0c</p> <pre><code>new TypeToken&lt;Foo&lt;Bar&gt;&gt;()//\u82e5\u53ea\u662f\u7528new()\uff0c\u5219\u76f8\u5f53\u4e8eTypeToken&lt;T&gt; = new TypeToken&lt;Foo&lt;Bar&gt;&gt;() \u548c\u5b9e\u4f8b2\u4e00\u6837\nnew TypeToken&lt;Foo&lt;Bar&gt;&gt;(){} //\u4f7f\u7528\u533f\u540d\u5185\u90e8\u7c7b\u76f8\u5f53\u4e8eTypeToken&lt;Foo&lt;Bar&gt;&gt; = new TypeToken&lt;Foo&lt;Bar&gt;&gt;() \u548c\u5b9e\u4f8b1\u4e00\u6837\n</code></pre> <p>\u8fd9\u6837\u5c31\u4e0d\u4f1a\u51fa\u73b0\u627e\u4e0d\u5230\u6b63\u786e\u7684\u6cdb\u578b\u7c7b\u578b\u7684\u95ee\u9898\u3002</p> <p>RowType\u5c31\u662f\u7c7b\u578b\u64e6\u9664\u540e\u7684\u539f\u59cb\u7c7b\u578b\u3002</p> <p>\u9664\u4e86\u7c7b\u578b\u64e6\u9664\u8fd9\u4e2a\u539f\u56e0\u4e4b\u5916\uff0cTypeToken\u4f7f\u7528\u533f\u540d\u5185\u90e8\u7c7b\u7684\u539f\u56e0\uff0c\u662f\u56e0\u4e3aTypeToken\u65e0\u53c2\u6784\u9020\u51fd\u6570\u7684\u4f5c\u7528\u57df\u662fprotected\u3002</p> <p>\u4f7f\u7528\u533f\u540d\u5185\u90e8\u7c7b\u7684\u573a\u666f\uff1a</p> <ul> <li>\u53ea\u7528\u5230\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8b</li> <li>\u7c7b\u5728\u5b9a\u4e49\u540e\u9a6c\u4e0a\u7528\u5230\uff08\u4e00\u822c\u53ea\u7528\u4e00\u6b21\uff09</li> <li>\u7c7b\u975e\u5e38\u5c0f\uff08SUN\u63a8\u8350\u662f\u57284\u884c\u4ee3\u7801\u4ee5\u4e0b\uff09</li> <li>\u7ed9\u7c7b\u547d\u540d\u5e76\u4e0d\u4f1a\u5bfc\u81f4\u4f60\u7684\u4ee3\u7801\u66f4\u5bb9\u6613\u88ab\u7406\u89e3</li> </ul>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#_2","title":"\u590d\u6742\u7c7b\u578b\u7684\u96c6\u5408","text":"<p>\u50cf\u4ee5\u4e0b\u590d\u6742\u7c7b\u578b\u7684\u96c6\u5408\uff0c\u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528TypeToken\u5b9e\u73b0\u53cd\u5e8f\u5217\u5316\u3002</p> <pre><code>Collection collection = new ArrayList();\ncollection.add(\"hello\");\ncollection.add(5);\ncollection.add(new Event(\"GREETINGS\", \"guest\"));\nclass Event {\n  private String name;\n  private String source;\n  private Event(String name, String source) {\n    this.name = name;\n    this.source = source;\n  }\n}\nString json = gson.toJson(collection); //toJson\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002\n</code></pre> <p>\u56e0\u6b64\uff0cgson\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u51e0\u79cd\u65b9\u6848\uff1a</p> <ul> <li>\u4f7f\u7528Gson\u7684JsonParser API\u6765\u5b9e\u73b0\uff0c\u5373\u8f6c\u6362\u6210JsonElement\u6765\u5b9e\u73b0\u3002</li> </ul> <p><code>java   JsonArray array = JsonParser.parseString(json).getAsJsonArray();       String message = gson.fromJson(array.get(0), String.class);       int number = gson.fromJson(array.get(1), int.class);       Event event = gson.fromJson(array.get(2), Event.class);</code></p> <ul> <li> <p>\u4e3a<code>Collection.class</code>\u6ce8\u518c\u4e00\u4e2aType Adapter\uff0c\u8fd9\u4e2agson\u672c\u8eab\u5c31\u6709\u3002</p> </li> <li> <p>\u4e3a <code>MyCollectionMemberType</code> \u6ce8\u518c\u4e00\u4e2aTypeAdapter,\u5e76\u4f7f\u7528 <code>Collection&lt;MyCollectionMemberType&gt;</code>\u3002</p> </li> </ul>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#12-gsonbuilder","title":"1.2 GsonBuilder\u7684\u5176\u4ed6\u5c5e\u6027","text":"<p>\u4e3b\u8981\u662f\u6307\u5e8f\u5217\u5316\u65f6\u7684\u5f71\u54cd\u3002</p> <ul> <li> <p>setPrettyPrinting() //\u8bbe\u7f6e\u8f93\u51fa\u683c\u5f0f\u4e3a\u53ef\u8bfb\u6027\u4f18\u5148(\u9ed8\u8ba4\u662f\u4f53\u79ef\u5c0f\u4f18\u5148),\u4f1a\u4f7fJson\u7684\u683c\u5f0f</p> </li> <li> <p>serializeNulls() //\u8bbe\u7f6e\u8f93\u51fanull(\u9ed8\u8ba4null\u4f1a\u88ab\u5ffd\u7565)</p> </li> <li> <p>setVersion(1.0) \u548c\u6ce8\u89e3 @Since\u53ef\u4ee5\u533a\u5206Json\u89e3\u6790\u7684\u7248\u672c\u3002</p> </li> </ul> <p>```java   public class VersionedClass {     @Since(1.1) private final String newerField;     @Since(1.0) private final String newField;     private final String field;</p> <pre><code>public VersionedClass() {\n  this.newerField = \"newer\";\n  this.newField = \"new\";\n  this.field = \"old\";\n}\n</code></pre> <p>}</p> <p>VersionedClass versionedObject = new VersionedClass();   Gson gson = new GsonBuilder().setVersion(1.0).create();   String jsonOutput = gson.toJson(versionedObject);   System.out.println(jsonOutput);   System.out.println();</p> <p>gson = new Gson();   jsonOutput = gson.toJson(versionedObject);   System.out.println(jsonOutput);   //output   {\"newField\":\"new\",\"field\":\"old\"}   {\"newerField\":\"newer\",\"newField\":\"new\",\"field\":\"old\"}   ```</p> <ul> <li>excludeFieldsWithModifiers()//\u8bbe\u7f6e\u4e0d\u88ab\u5305\u62ec\u5728\u5e8f\u5217\u5316\u4e2d\u7684\u4fee\u9970\u7b26(\u9ed8\u8ba4\u4e3astatic //transient\uff0c\u4f46\u662f\u4f60\u53ef\u4ee5\u8986\u76d6\u8bbe\u7f6e)</li> </ul> <p><code>java   (Modifier.STATIC, Modifier.TRANSIENT, Modifier.VOLATILE</code></p> <ul> <li>Gson's <code>@Expose</code></li> </ul> <p>\u8be5\u6ce8\u89e3\u7684\u4f5c\u7528\uff0c\u9700\u8981\u4f7f\u7528<code>new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create()</code>\uff0c\u53ea\u8f93\u51fa\u6dfb\u52a0\u4e86<code>@Expose</code>\u6ce8\u89e3\u7684\u5c5e\u6027\u3002</p> <ul> <li>setExclusionStrategies()\u53ef\u4ee5\u7528\u6237\u81ea\u5b9a\u4e49\u6392\u9664\u7b56\u7565\u3002</li> </ul> <p>```java   @Retention(RetentionPolicy.RUNTIME)   @Target({ElementType.FIELD})   public @interface Foo {     // Field tag only annotation   }</p> <p>public class SampleObjectForTest {     @Foo private final int annotatedField;     private final String stringField;     private final long longField;     private final Class&lt;?&gt; clazzField;</p> <pre><code>public SampleObjectForTest() {\n  annotatedField = 5;\n  stringField = \"someDefaultValue\";\n  longField = 1234;\n}\n</code></pre> <p>}</p> <p>public class MyExclusionStrategy implements ExclusionStrategy {     private final Class&lt;?&gt; typeToSkip;</p> <pre><code>private MyExclusionStrategy(Class&lt;?&gt; typeToSkip) {\n  this.typeToSkip = typeToSkip;\n}\n\npublic boolean shouldSkipClass(Class&lt;?&gt; clazz) {\n  return (clazz == typeToSkip);\n}\n\npublic boolean shouldSkipField(FieldAttributes f) {\n  return f.getAnnotation(Foo.class) != null;\n}\n</code></pre> <p>}</p> <p>public static void main(String[] args) {     Gson gson = new GsonBuilder()         .setExclusionStrategies(new MyExclusionStrategy(String.class)) //\u6392\u9664String\u7c7b\u578b\u548c@Foo\u6ce8\u89e3\u7684\u5c5e\u6027         .serializeNulls()         .create();     SampleObjectForTest src = new SampleObjectForTest();     String json = gson.toJson(src);     System.out.println(json);   }   //output   {\"longField\":1234}   ```</p> <ul> <li>\u5c5e\u6027\u7684\u81ea\u5b9a\u4e49\u540d\u79f0 @SerializedName </li> </ul> <p>\u901a\u8fc7\u6ce8\u89e3 @SerializedName \uff0c\u53ef\u4ee5\u91cd\u65b0\u547d\u540dJson\u7684Key\u503c\u3002</p> <ul> <li>\u4f7f\u7528FieldNamingPolicy\u6765\u5b9a\u4e49Json\u7684Key\u503c\u8f93\u51fa\u5f62\u5f0f\u3002</li> </ul> <p>```java   private class SomeObject {     @SerializedName(\"custom_naming\") private final String someField;     private final String someOtherField;</p> <pre><code>public SomeObject(String a, String b) {\n  this.someField = a;\n  this.someOtherField = b;\n}\n</code></pre> <p>}</p> <p>SomeObject someObject = new SomeObject(\"first\", \"second\");   Gson gson = new GsonBuilder().setFieldNamingPolicy(FieldNamingPolicy.UPPER_CAMEL_CASE).create();   String jsonRepresentation = gson.toJson(someObject);   System.out.println(jsonRepresentation);   //output   {\"custom_naming\":\"first\",\"SomeOtherField\":\"second\"}   ```</p> <ul> <li>Stream</li> </ul>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#13","title":"1.3 \u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316","text":"<p>Gson\u4e3a\u5e38\u7528\u7684\u7c7b\u5185\u7f6e\u4e86\u4e00\u4e9b\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff0c\u53c2\u8003<code>TypeAdapters</code></p> <p>\u4f46\u662f\u63d0\u4f9b\u7684\u5185\u7f6e\u65b9\u6cd5\u5f80\u5f80\u4e0d\u591f\u4f7f\u7528\uff0c\u56e0\u6b64\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u7684\u65b9\u6cd5\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3002</p> <ul> <li>JSON Serializers: Need to define custom serialization for an object</li> <li>JSON Deserializers: Needed to define custom deserialization for a type</li> <li>Instance Creators: Not needed if no-args constructor is available or a deserializer is registered(\u5982\u679c\u65e0\u53c2\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u83b7\u53d6\u6216\u8005\u53cd\u5e8f\u5217\u5316\u5df2\u6ce8\u518c\uff0c\u5219\u4e0d\u9700\u8981)\uff0c\u81ea\u5b9a\u4e49\u67d0\u79cd\u5bf9\u8c61\u7684\u521b\u5efa\u884c\u4e3a\u3002</li> </ul> <pre><code>GsonBuilder gson = new GsonBuilder();\ngson.registerTypeAdapter(MyType2.class, new MyTypeAdapter());\ngson.registerTypeAdapter(MyType.class, new MySerializer());\ngson.registerTypeAdapter(MyType.class, new MyDeserializer());\ngson.registerTypeAdapter(MyType.class, new MyInstanceCreator());\n</code></pre> <p><code>registerTypeAdapter</code>\u63d0\u4f9b\u4e86\u68c0\u67e5\u662f\u5426\u81f3\u5c11\u5b9e\u73b0\u4e86\u4e00\u79cd\u4ee5\u4e0a\u7684\u63a5\u53e3\u5e76\u4e14\u6ce8\u518c\u4ed6\u4eec\u3002</p>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#json-serializers","title":"JSON Serializers","text":"<p>\u5b9e\u73b0<code>JsonSerializer</code>\u63a5\u53e3\uff0c\u501f\u52a9JsonElement\u5b9e\u73b0\u5bf9\u7279\u5b9a\u7684\u9700\u6c42\u8fdb\u884c\u5e8f\u5217\u5316\uff0c\u7531\u6e90\u7801\u53ef\u77e5\u6700\u540e\u56de\u8c03\u7528serialize()\u65b9\u6cd5\u3002</p> <pre><code>//\u8bbe\u7f6eboolean\u7c7b\u578b\u4e3a0 \u62161\npublic class BooleanSerializer implements JsonSerializer&lt;Boolean&gt; {\n\n    public JsonElement serialize(Boolean aBoolean, Type type,\n        JsonSerializationContext jsonSerializationContext) \n    {\n        if(aBoolean){\n           return new JsonPrimitive(1);\n        }\n        return new JsonPrimitive(0);\n    }\n}\npublic static void main(String[] args) throws Exception \n    {\n        Employee emp = new Employee(1, \"Lokesh\", \"Gupta\", \"howtodoinjava@gmail.com\", true);\n\n        Gson gson = new GsonBuilder()\n                .registerTypeAdapter(Boolean.class, new BooleanSerializer())\n                .setPrettyPrinting()\n                .create();\n\n        String json = gson.toJson(emp);\n\n        System.out.println(json);\n    }\n</code></pre>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#json-deserializers","title":"JSON Deserializers","text":"<p>\u540c\u7406\uff0c\u5b9e\u73b0<code>JsonDeserializers</code>\u63a5\u53e3\uff0c\u501f\u52a9JsonElement\u5b9e\u73b0\u3002</p> <pre><code>//\u5c06\u5e74\u6708\u65e5\u8f6c\u6362\u6210LocalData\npublic class Employee \n{\n    private Integer id;\n    private String firstName;\n    private String lastName;\n    private String email;\n    private LocalDate dob;\n}\npublic class EmployeeDeserializer implements JsonDeserializer&lt;Employee&gt; \n{  \n    @Override\n    public Employee deserialize(JsonElement json, Type typeOfT, \n                JsonDeserializationContext context) throws JsonParseException \n    {\n        JsonObject jsonObject = json.getAsJsonObject();\n\n        LocalDate localDate = LocalDate.of(\n                jsonObject.get(\"year\").getAsInt(),\n                jsonObject.get(\"month\").getAsInt(),\n                jsonObject.get(\"day\").getAsInt()\n        );\n\n        return new Employee(\n                jsonObject.get(\"id\").getAsInt(), \n                jsonObject.get(\"firstName\").getAsString(), \n                jsonObject.get(\"lastName\").getAsString(), \n                jsonObject.get(\"email\").getAsString(), \n                localDate);\n    }\n}\n//\u6ce8\u518c\u4f7f\u7528\u5373\u53ef\n</code></pre>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#instance-creators","title":"Instance Creators","text":"<p>\u53ef\u4f7f\u7528\u573a\u666f\uff1a</p> <p>1.\u9700\u8981\u91cd\u65b0\u5b9a\u4e49\u884c\u4e3a\u7684\u521b\u5efa\u65b9\u5f0f\u3002\u5982\u521b\u5efa\u5b50\u7c7b</p> <p>2.\u521b\u5efa\u7684\u5b9e\u4f8b\u4e5f\u662f\u6cdb\u578b\u7684\uff0c\u901a\u8fc7ParameterizedType\u83b7\u53d6Type\u7c7b\u578b</p> <pre><code>//\u7b2c\u4e8c\u79cd\u60c5\u51b5\npublic class Id&lt;T&gt; {\n  private final Class&lt;T&gt; classOfId;\n  private final long value;\n  public Id(Class&lt;T&gt; classOfId, long value) {\n    this.classOfId = classOfId;\n    this.value = value;\n  }\n}\nclass IdInstanceCreator implements InstanceCreator&lt;Id&lt;?&gt;&gt; {\n  public Id&lt;?&gt; createInstance(Type type) {\n    Type[] typeParameters = ((ParameterizedType)type).getActualTypeArguments();\n    Type idType = typeParameters[0]; // Id has only one parameterized type T\n    return new Id((Class)idType, 0L);\n  }\n}\n//\u4f7f\u7528\nGson gson=new GsonBuilder()\n  .registerTypeAdapter(Id.getClass(),new IdInstanceCreator())\n  .create();\nString json=\"\";\nId&lt;Foo&gt; id=gson.fromJson(json,Id.getClass());\n</code></pre> <p>InstanceCreater\u6e90\u7801\u89e3\u6790</p> <p>\u77e5\u6653\u5176\u4f55\u65f6\u521b\u5efa\u5b9e\u4f8b\uff0c\u5b66\u4e60gson\u4f18\u79c0\u7684\u6e90\u7801</p> <p>1.InstanceCreater\u6ce8\u518c</p> <pre><code>private final Map&lt;Type, InstanceCreator&lt;?&gt;&gt; instanceCreators\n  = new HashMap&lt;Type, InstanceCreator&lt;?&gt;&gt;();\n\n//\u5148\u653e\u5728map\u4e2d\npublic GsonBuilder registerTypeAdapter(Type type, Object typeAdapter) {\n\n  if (typeAdapter instanceof InstanceCreator&lt;?&gt;) {\n    //\u653e\u5165map\u4e2d\n    instanceCreators.put(type, (InstanceCreator) typeAdapter);\n  }\n  //\u7701\u7565\u90e8\u5206\u4ee3\u7801\n  return this;\n}\n\n public Gson create() {\n\n    addTypeAdaptersForDate(datePattern, dateStyle, timeStyle, factories);\n\n    //\u5220\u9664\u4e0e\u672c\u6587\u65e0\u5173\u7684\u4ee3\u7801\n    return new Gson(...,..., instanceCreators,\n        ..., ...,\n        ..., ..., ..., ...,\n        ..., ..., ...);\n  }\n//Gson\u6784\u9020\u51fd\u6570\n private final ConstructorConstructor constructorConstructor;\n Gson(\u3002\u3002\u3002,\n      final Map&lt;Type, InstanceCreator&lt;?&gt;&gt; instanceCreators, \u3002\u3002\u3002\u3002\u3002) {\n    this.constructorConstructor = new ConstructorConstructor(instanceCreators);\n  \uff5d\n</code></pre> <p>\u4ece\u4e2d\u53ef\u4ee5\u770b\u51fa\u6700\u540einstanceCreators\u4ee5map\u7684\u5f62\u5f0f\u653e\u5728Gson\u5bf9\u8c61\u4e2d\u6301\u6709\u7684ConstructorConstructor\u5bf9\u8c61\u4e2d\u7684map\u4e2d\u3002</p> <pre><code>//Gson\u6301\u6709ConstructorConstructor\u5bf9\u8c61\u3002\npublic final class ConstructorConstructor {\n  private final Map&lt;Type, InstanceCreator&lt;?&gt;&gt; instanceCreators;\n\n  public ConstructorConstructor(Map&lt;Type, InstanceCreator&lt;?&gt;&gt; instanceCreators) {\n    this.instanceCreators = instanceCreators;\n  }\n \uff5d\n</code></pre> <p>ReflectiveTypeAdapterFactory\u5bf9\u8c61\u521d\u59cb\u5316TypeAdapter\u65f6\uff0c\u4f1a\u83b7\u53d6ObjectConstruct\u3002</p> <pre><code>//Gson\u521d\u59cb\u5316\u65f6\u4f1a\u5c06ConstructorConstructor\u5bf9\u8c61\u4f20\u9012\u7ed9ReflectiveTypeAdapterFactory\nGson(,,,,,,,){\n  factories.add(new ReflectiveTypeAdapterFactory(\n        constructorConstructor, fieldNamingStrategy, excluder, jsonAdapterFactory));\n}\npublic &lt;T&gt; TypeAdapter&lt;T&gt; create(Gson gson, final TypeToken&lt;T&gt; type) {\n    //\u6839\u636etype\u83b7\u53d6ObjectConstructor\n    ObjectConstructor&lt;T&gt; constructor = constructorConstructor.get(type);\n    return new Adapter&lt;T&gt;(constructor, getBoundFields(gson, type, raw));\n  }\n</code></pre> <p>\u7136\u540e\u770b\u4e00\u4e0b\uff0cObjectConstructor#get\u65b9\u6cd5\u6765\u5b9e\u73b0\u83b7\u53d6Type\u5bf9\u5e94\u7684\u5b9e\u4f8b\uff0c\u4e3a\u4ec0\u4e48\u8981\u52a0\u4e00\u4e2aConstructorConstructor\u6765\u83b7\u53d6\u5b9e\u4f8b\u3002</p> <pre><code>public &lt;T&gt; ObjectConstructor&lt;T&gt; get(TypeToken&lt;T&gt; typeToken) {\n    final Type type = typeToken.getType();\n    final Class&lt;? super T&gt; rawType = typeToken.getRawType();\n\n    // \u521b\u5efa\u5bf9\u8c61\u65b9\u5f0fA\n    final InstanceCreator&lt;T&gt; typeCreator = (InstanceCreator&lt;T&gt;) instanceCreators.get(type);\n    //\u5ba2\u6237\u7aef\u6ca1\u6709\u4f20InstanceCreator\u7684\u65f6\u5019\u4e3anull\n    if (typeCreator != null) {\n      return new ObjectConstructor&lt;T&gt;() {//\u7701\u7565\u90e8\u5206\u4ee3\u7801 };\n    }\n\n    // \u521b\u5efa\u5bf9\u8c61\u65b9\u5f0fB\n    final InstanceCreator&lt;T&gt; rawTypeCreator =\n        (InstanceCreator&lt;T&gt;) instanceCreators.get(rawType);\n     //\u5ba2\u6237\u7aef\u6ca1\u6709\u4f20InstanceCreator\u7684\u65f6\u5019\u4e3anull   \n    if (rawTypeCreator != null) {\n      return new ObjectConstructor&lt;T&gt;() {\n        @Override public T construct() {//\u7701\u7565\u90e8\u5206\u4ee3\u7801 }\n      };\n    }\n\n   // \u521b\u5efa\u5bf9\u8c61\u65b9\u5f0fC\n    //\u5982\u679c\u6ca1\u6709\u914d\u7f6eInstanceCreator\u7684\u5b9e\u73b0\n    ObjectConstructor&lt;T&gt; defaultConstructor = newDefaultConstructor(rawType);\n    if (defaultConstructor != null) {\n      return defaultConstructor;\n    }\n\n // \u521b\u5efa\u5bf9\u8c61\u65b9\u5f0fD\n\n//\u5982\u679c\u6ca1\u6709\u914d\u7f6eInstanceCreator\u7684\u5b9e\u73b0\n ObjectConstructor&lt;T&gt; defaultImplementation = newDefaultImplementationConstructor(type, rawType);\n    if (defaultImplementation != null) {\n      return defaultImplementation;\n    }\n\n    // finally try unsafe\n    return newUnsafeAllocator(type, rawType);\n  }\n</code></pre> <p>\u6b64\u5904\u4f7f\u7528\u4e86\u8bbe\u8ba1\u6a21\u5f0f\u2014\u2014\u7b56\u7565\u6a21\u5f0f\uff0c\u6709\u4e94\u79cd\u7b56\u7565\u6765\u5b9e\u73b0\u83b7\u53d6\u5bf9\u8c61\u5b9e\u4f8b\u3002</p> <p>1\u3001\u6839\u636etype\u901a\u8fc7\u5ba2\u6237\u7aef\u4f20\u5165\u7684InstanceCreator 2\u3001\u6839\u636erawType\u901a\u8fc7\u5ba2\u6237\u7aef\u4f20\u5165\u7684InstanceCreator 3\u3001\u901a\u8fc7constructor \u7684newInstance \u8be6\u89c1newDefaultConstructor\u65b9\u6cd5 4\u3001\u5224\u65ad\u662f\u5426\u662f\u96c6\u5408\u5bf9\u8c61\uff0c\u6765\u521d\u59cb\u5316\u76ee\u6807javaBean\u5bf9\u8c61\uff0c\u8be6\u89c1newDefaultImplementationConstructor 5\u3001\u6700\u540e\u8c03\u7528newUnsafeAllocator\u6765\u5b8c\u6210\u5bf9\u8c61\u7684\u521d\u59cb\uff0c\u8be6\u89c1newUnsafeAllocator\u3002</p> <p>2.\u4f7f\u7528\u5165\u53e3\uff1a\u521b\u5efa\u5bf9\u8c61\u7684\u5b9e\u4f8b\uff0c\u5728Adapter\u4e2d(ReflectiveTypeAdapterFactory)\u6765\u521b\u5efa\u5b9e\u4f8b</p> <pre><code> //\u521b\u5efa\u5bf9\u8c61\u7684\u5b9e\u4f8b\uff1a\u8fd9\u6bb5\u81f3\u5173\u91cd\u8981 \u53c2\u8003\u300aGson\u53cd\u5c04\u89e3\u6790\u673a\u5236\u8be6\u89e3\uff081\uff09\u300b\npublic T read(JsonReader in) throws IOException {\n      //....\n      //\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5bf9\u8c61  constructor\u662fObjectConstructor&lt;T&gt;\n      T instance = constructor.construct();\n\n        in.beginObject();\n        //\u904d\u5386json\u4e3ainstance\u7684\u5b57\u6bb5\u81ea\u52a8\u8d4b\u503c\n        while (in.hasNext()) {\n          String name = in.nextName();\n          BoundField field = boundFields.get(name);\n          if (field == null || !field.deserialized) {\n            in.skipValue();\n          } else {\n            field.read(in, instance);\n          }\n        }\n\n      in.endObject();\n      //\u8fd4\u56de\u4e00\u4e2ajava bean\u5bf9\u8c61\n      return instance;\n    }\n</code></pre> <p>\u4ece\u800c\u5728Gson\u7684constructor#construct \u83b7\u53d6\u5b9e\u4f8b\u3002</p> <pre><code> T instance = constructor.construct(); \n</code></pre>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#typeadapter","title":"TypeAdapter\u5b9e\u73b0\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316","text":"<p>TypeAdapter\u548cSerializer\u3001Deserializer\u8d77\u5230\u76f8\u540c\u7684\u4f5c\u7528\uff0c\u533a\u522b\u5728\u4e8eTypeAdapter\u4f7f\u7528\u6d41\u6765\u89e3\u6790\u6570\u636e\uff0c\u800c\u4e0d\u662f\u4f7f\u7528JsonElement.</p> <p>\u7531<code>GsonBuilder().registerTypeAdapter()</code>\u53ef\u77e5\uff0cTypeAdapter\u4f1a\u4ee5\u5de5\u5382\u6a21\u5f0f\u7684\u65b9\u5f0f\u6dfb\u52a0\u5230factories\u3002</p> <pre><code>public GsonBuilder registerTypeAdapter(Type type, Object typeAdapter) {\n    Objects.requireNonNull(type);\n    $Gson$Preconditions.checkArgument(typeAdapter instanceof JsonSerializer&lt;?&gt;\n        || typeAdapter instanceof JsonDeserializer&lt;?&gt;\n        || typeAdapter instanceof InstanceCreator&lt;?&gt;\n        || typeAdapter instanceof TypeAdapter&lt;?&gt;);\n    ...\n    if (typeAdapter instanceof JsonSerializer&lt;?&gt; || typeAdapter instanceof JsonDeserializer&lt;?&gt;) {\n      TypeToken&lt;?&gt; typeToken = TypeToken.get(type);\n      //Serializer\u3001Deserializer \u5c01\u88c5\u5728\u4e86TreeTypeAdapter\u4e2d\n      factories.add(TreeTypeAdapter.newFactoryWithMatchRawType(typeToken, typeAdapter));\n    }\n    if (typeAdapter instanceof TypeAdapter&lt;?&gt;) {\n      //\u8fd9\u91cc\u662f\u65b0\u5efa\u4e86Factory\n      @SuppressWarnings({\"unchecked\", \"rawtypes\"})\n      TypeAdapterFactory factory = TypeAdapters.newFactory(TypeToken.get(type), (TypeAdapter)typeAdapter);\n      factories.add(factory);\n    }\n    return this;\n  }\n</code></pre> <p>\u4e3b\u8981\u4f7f\u7528\u4e86<code>read()</code>\u548c<code>write()</code>\u65b9\u6cd5\u6765\u5b9e\u73b0\u5bf9Json\u6570\u636e\u6d41\u7684\u5904\u7406\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2ademo.</p> <pre><code>public class BookTypeAdapter extends TypeAdapter {\n\n  @Override\n  public Book read(final JsonReader in) throws IOException {\n    final Book book = new Book();\n\n    in.beginObject();\n    while (in.hasNext()) {\n      switch (in.nextName()) {\n      case \"isbn\":\n        book.setIsbn(in.nextString());\n        break;\n      case \"title\":\n        book.setTitle(in.nextString());\n        break;\n      case \"authors\":\n        book.setAuthors(in.nextString().split(\";\"));\n        break;\n      }\n    }\n    in.endObject();\n\n    return book;\n  }\n\n  @Override\n  public void write(final JsonWriter out, final Book book) throws IOException {\n    out.beginObject();\n    out.name(\"isbn\").value(book.getIsbn());\n    out.name(\"title\").value(book.getTitle());\n    out.name(\"authors\").value(StringUtils.join(book.getAuthors(), \";\"));\n    out.endObject();\n  }\n}\n</code></pre>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#14","title":"1.4 \u5e38\u7528\u7684\u7c7b","text":""},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#object","title":"Object","text":"<p>\u6bcf\u4e2a\u7c7b\u5305\u62ec\u6570\u7ec4\u90fd\u7ee7\u627f\u81eaObject</p>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#class","title":"Class","text":"<p>Class\u662f\u4e00\u4e2a\u7c7b\u3002\u7c7b\u5bf9\u8c61\u7531Java\u865a\u62df\u673a\u81ea\u52a8\u6784\u5efa\uff0c\u7528\u4e8e\u8868\u793aJVM\u8fd0\u884c\u65f6\u7c7b\u6216\u63a5\u53e3\u7684\u4fe1\u606f\u3002Class\u7c7b\u7684\u6784\u9020\u51fd\u6570\u88ab\u8bbe\u8ba1\u4e3a\u79c1\u6709\u7684\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u4e0d\u80fd\u901a\u8fc7new\u7684\u65b9\u5f0f\u6765\u521b\u5efaClass\u5bf9\u8c61\uff0c\u53ea\u6709JVM\u624d\u80fd\u521b\u5efa\u8be5\u7c7b\u7684\u5b9e\u4f8b\u3002"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#type","title":"Type","text":"<p>\u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u81ea1.5\u4e4b\u540e\uff0c\u662fJava\u6240\u6709\u7c7b\u578b\u7684\u901a\u7528\u8d85\u7ea7\u63a5\u53e3\u3002</p> <p>Raw Type:\u539f\u59cb\u7c7b\u578b\uff0c\u5305\u62ec\u7c7b\u548c\u63a5\u53e3\u3002\u57fa\u672c\u6570\u636e\u7c7b\u578b\u548c\u4e0d\u6d89\u53ca\u6cdb\u578b\u7684\u6240\u6709\u5f15\u7528\u7c7b\u578b(\u7c7b\u3001\u63a5\u53e3\u3001\u6570\u7ec4)\u5747\u662fClass\u7c7b\u578b\u3002</p> <p>Parameterized types:\u53c2\u6570\u5316\u7c7b\u578b\uff0c\u6307\u6cdb\u578b\uff0c\u4f8b\u5982List\u662f\u4e00\u4e2a\u53c2\u6570\u5316\u7c7b\u578b\u3002 <ul> <li>getActualTypeArguments()\u8fd4\u56deType[]\uff0c\u5373\u201c&lt;&gt;\u201d\u91cc\u7684\u53c2\u6570\uff0c\u6bd4\u5982Map <li>getRawType()\u8fd4\u56deTpye\uff0c\u5f97\u5230\u201c&lt;&gt;\u201d\u524d\u9762\u7684\u7c7b\u578b\uff0c\u6bd4\u5982List</li> <li>getOwnerType()\u8fd4\u56deType\uff0c\u8fd4\u56deParameterizedType\u7c7b\u578b\u6240\u5728\u7684\u7c7b\u7684Type\u3002\u5982Map.Entry\u8fd9\u4e2a\u53c2\u6570\u5316\u7c7b\u578b\u8fd4\u56de\u7684\u662fMap(\u56e0\u4e3aMap.Entry\u8fd9\u4e2a\u7c7b\u578b\u6240\u5728\u7684\u7c7b\u662fMap)\u7684\u7c7b\u578b\u3002 <p>Array types:\u5e26\u6709\u6cdb\u578b\u7684\u6570\u7ec4\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f\u5e26\u6709\u53c2\u6570\u5316\u7c7b\u6216\u8005\u63a5\u53e3\u6240\u8868\u793a\u7684\u6570\u7ec4\u5bf9\u5e94\u7684\u7c7b\u578b\uff0c\u4f8b\u5982 List s[]\u3001Map map[]\u7b49\u5bf9\u5e94\u7684\u7c7b\u578b\u5747\u662fGenericArrayType\u7c7b\u578b,\u800cList s[]\u3001Map map[]\u662fClass\u7c7b\u578b\u3002 <p>\u7c7b\u578b\u53d8\u91cf(type variables)\uff1a\u4e5f\u53eb\u6cdb\u578b\u53d8\u91cf\uff0c\u5373\u6cdb\u578b\u4e2d\u7684\u53d8\u91cf\uff0c\u4f8b\u5982\uff1aT\u3001K\u3001V\u7b49\u53d8\u91cf\uff0c\u53ef\u4ee5\u8868\u793a\u4efb\u4f55\u7c7b\u3002 \u57fa\u672c\u6570\u636e\u7c7b\u578b(primitive types)\uff1abyte\u3001short\u3001boolean\u3001char\u3001int\u3001long\u3001float\u3001double\u516b\u5927\u57fa\u672c\u6570\u636e\u7c7b\u578b\u3002 \u901a\u914d\u7b26\u7c7b\u578b(WildcardType) \uff1a\u901a\u914d\u7b26\u5bf9\u5e94\u7684\u7c7b\u578b\uff0c\u4f8b\u5982 List&lt;? extends Object&gt; \u4e2d?\u5bf9\u5e94\u7684\u7c7b\u578b</p>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#22100","title":"2.\u6e90\u7801\u89e3\u6790(\u6e90\u7801\u4ee52.10.0\u4e3a\u4f8b\uff0c\u5e76\u6dfb\u52a0\u81ea\u5df1\u7684\u4fee\u6539)","text":""},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#gson","title":"Gson\u4e2d\u5173\u952e\u7c7b\u7684\u8bf4\u660e","text":""},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#gson_1","title":"Gson","text":""},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#gsonbuilder","title":"GsonBuilder","text":""},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#gson_2","title":"Gson\u89e3\u6790\u7684\u539f\u7406\u6d41\u7a0b\u56fe","text":"<p>Gson\u662f\u4e00\u4e2a\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316Json\u6570\u636e\u7684Java\u5e93\uff0c\u603b\u7ed3\u5de5\u4f5c\u4e2d\u4f7f\u7528\u5230\u7684\u539f\u7406\uff0c\u4e3b\u8981\u662f\u5bf9Gson\u7684\u4e00\u4e2a\u53cd\u5e8f\u5217\u5316\u8fc7\u7a0b\u7684\u89e3\u6790\u3002</p> <p>Gson\u5e8f\u5217\u5316\u6e90\u7801\u5206\u6790</p> <p>Gson\u53cd\u5e8f\u5217\u5316\u6e90\u7801\u5206\u6790</p>"},{"location":"Android/21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#jsonreader","title":"JsonReader \u7684\u6e90\u7801\u89e3\u6790","text":"<p>JsonReader\u662f\u7528\u6765\u53cd\u5e8f\u5217\u5316Json\u5b57\u7b26\u4e32\u7684\u4e3b\u8981\u7c7b\u3002</p> <p>\u91cd\u70b9\u5c5e\u6027</p> <p>stack\uff1a \u4e00\u4e2aint\u6570\u7ec4\uff0c\u9ed8\u8ba432\u4f4d</p> <p>stackSize: \u6808\u7684\u957f\u5ea6</p> <p>Peeked\uff1a \u5f53\u524d\u5b57\u7b26\u7684\u72b6\u6001 \u4e00\u5171\u670917\u79cd\u72b6\u6001</p> \u72b6\u6001 \u503c \u4f5c\u7528 PEEKED_NONE 0 PEEKED_BEGIN_OBJECT 1 PEEKED_END_OBJECT 2 PEEKED_BEGIN_ARRAY 3 PEEKED_END_ARRAY 4 PEEKED_TRUE 5 PEEKED_FALSE 6 PEEKED_NULL 7 PEEKED_SINGLE_QUOTED 8 PEEKED_DOUBLE_QUOTED 9 PEEKED_UNQUOTED 10 PEEKED_BUFFERED 11 PEEKED_SINGLE_QUOTED_NAME 12 PEEKED_DOUBLE_QUOTED_NAME 13 PEEKED_UNQUOTED_NAME 14 PEEKED_LONG 15 PEEKED_NUMBER 16 PEEKED_EOF 17 <p>JsonScope\uff1a8\u79cd\u72b6\u6001\uff0c\u5f53\u524d\u5c42\u7ea7\u7684\u72b6\u6001peekStack</p> \u72b6\u6001 \u503c EMPTY_ARRAY 1 NONEMPTY_ARRAY 2 EMPTY_OBJECT 3 DANGLING_NAME 4 NONEMPTY_OBJECT 5 EMPTY_DOCUMENT 6 NONEMPTY_DOCUMENT 7 CLOSED 8 <p>\u91cd\u70b9\u65b9\u6cd5\uff1a</p> <ul> <li>doPeek()</li> </ul> <p>\u8fd9\u4e2a\u65b9\u6cd5\u662f\u6700\u91cd\u8981\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u8fdb\u884c\u5b57\u7b26\u8bfb\u53d6\uff0c\u5e76\u6839\u636e\u5f53\u524d\u7684\u5c42\u7ea7\u72b6\u6001peekStack\u6765\u5904\u7406\u5b57\u7b26\u4e32\uff0c\u6700\u540e\u8fd4\u56de\u5c06\u8981\u5904\u7406\u5b57\u7b26\u7684\u72b6\u6001Peeked\u3002</p> <p>\u6211\u4eec\u9700\u8981\u77e5\u9053Json\u662f\u4e00\u4e2a\u5c42\u7ea7\u7684\u6811\u5f62\uff0c\u5b83\u662f\u4e00\u5c42\u4e00\u5c42\u7684\uff0c\u4e3b\u8981\u662f\u901a\u8fc7<code>[]</code>\u3001<code>{}</code>\u6765\u5bf9\u6570\u636e\u8fdb\u884c\u5c42\u7ea7\u7684\u5206\u5c42\u3002</p> <pre><code>{\n  stack[stackSize++] = JsonScope.EMPTY_DOCUMENT;\n}\n  int peeked = PEEKED_NONE;\n</code></pre> <p>\u9996\u5148\uff0c\u5b83\u5728\u6784\u9020\u4ee3\u7801\u5757\u4e2d\u5148\u5c06\u5c42\u7ea7\u5b9a\u4f4d1\u5c42\uff0c\u6b64\u65f6\u4ee3\u7801\u7684\u5c42\u7ea7\u662f1\uff0c\u4ee3\u7801\u5c42\u7ea7\u7684\u72b6\u6001\u662fEMPTY_DOCUMENT\uff0cpeeked\u7684\u521d\u59cb\u72b6\u6001\u662fPEEKED_NONE\u3002</p> <p>\u6211\u4eec\u4ee5\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u8d70\u4e00\u4e0b,\u5728\u6b64\u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3\uff0c\u4f1a\u4ea4\u53c9\u5199\u4e00\u4e0b\u5176\u4ed6\u7684\u65b9\u6cd5\u3002</p> <pre><code>{\"a\": [\"one\"], \"b\": 123}\n</code></pre> <p>\u82e5\u8981\u53cd\u5e8f\u5217\u5316\u8fd9\u4e2a\u5b57\u7b26\u4e32\uff0c\u9700\u8981\u8fd9\u6837\u8bfb\u3002</p> <pre><code> JsonReader reader = new JsonReader(reader(\n        \"{\\\"a\\\": [\\\"one\\\"], \\\"b\\\": 123}\"));\n reader.beginObject();\n reader.nextName();\n reader.beginArray();\n reader.nextString();\n reader.endArray();\n reader.nextName();\n reader.nextInt();\n reader.endObject();\n</code></pre> <p><code>reader.beginObject()</code>\u4e2d\u4f1a\u770b\u5230:</p> <pre><code> public void beginObject() throws IOException {\n    int p = peeked;\n    if (p == PEEKED_NONE) {\n      p = doPeek();\n    }\n   ...\n  }\n</code></pre> <p>\u90fd\u4f1a\u5148\u8d70dopeek()\u65b9\u6cd5\uff0c\u83b7\u53d6PeekStack\uff0c\u8fdb\u884c\u5224\u65ad\u5b57\u7b26\u72b6\u6001\u3002</p> <p></p> <p>\u521d\u59cb\u5316\u65f6\uff0cPeekStack=EMPTY_DOCUMENT</p> <pre><code>else if (peekStack == JsonScope.EMPTY_DOCUMENT) {\n  if (lenient) {\n    consumeNonExecutePrefix();//\u8fd9\u4e00\u6b65\u5c31\u662f\u628a\u524d\u9762\u65e0\u5173\u7684\u5b57\u7b26\u5220\u9664\uff0c\u6bd4\u5982\u7a7a\u683c\uff0c\u00b7 \u7b49\u4e0d\u5c5e\u4e8ejson\u7684\u5b57\u7b26\n  }\n  stack[stackSize - 1] = JsonScope.NONEMPTY_DOCUMENT;\n} \n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT],StackSize=1\n</code></pre> <p>\u5c06\u5f53\u524d\u5c42\u7ea7\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u4e86JsonScope.NONEMPTY_DOCUMENT\u3002</p> <pre><code> int c = nextNonWhitespace(true); //\u8fd9\u4e2a\u65b9\u6cd5\u662f\u8bfb\u53d6\u4e0b\u4e00\u4e2a\u5b57\u7b26\n    switch (c) {\n    ...\n    case '{':\n      return peeked = PEEKED_BEGIN_OBJECT;\n    default:\n      pos--; // Don't consume the first character in a literal value.\n    }\n</code></pre> <p>\u6839\u636e\u5b57\u7b26\u7684ASCii\u7801\u5bf9\u76f8\u5e94\u7684\u5b57\u7b26\u8fd4\u56de\u76f8\u5e94\u7684\u5b57\u7b26\u72b6\u6001\uff0c\u6839\u636e\u4ee5\u4e0a\u4ee3\u7801\u4f1a\u8fd4\u56de peeked = PEEKED_BEGIN_OBJECT\u3002</p> <p>\u63a5\u7740\u770bbeginObject(),</p> <pre><code>if (p == PEEKED_BEGIN_OBJECT) {\n  push(JsonScope.EMPTY_OBJECT);\n  peeked = PEEKED_NONE;\n} else {\n  throw new IllegalStateException(\"Expected BEGIN_OBJECT but was \" + peek() + locationString());\n}\n\n  private void push(int newTop) {\n      ...\n      stack[stackSize++] = newTop;\n    }\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT,EMPTY_OBJECT],StackSize =2;\n</code></pre> <p>\u5f53\u5b57\u7b26\u662fPEEKED_BEGIN_OBJECT\u65f6\uff0c\u4f1a\u5728stack[]\u4e2d\u6dfb\u52a0\u65b0\u7684\u5c42\u7ea7EMPTY_OBJECT,StackSize+1\u3002\u63a5\u7740\u770bnextName(),</p> <pre><code> public String nextName() throws IOException {\n    int p = peeked;\n    if (p == PEEKED_NONE) {\n      p = doPeek();\n    }\n  ...\n  }\n</code></pre> <p>\u5b83\u4e5f\u4f1a\u8d70dopeek()\uff0c\u8fd9\u65f6\u53d6\u5230\u7684PeekStack = PEEKED_BEGIN_OBJECT\u3002</p> <pre><code>if (peekStack == JsonScope.EMPTY_OBJECT || peekStack == JsonScope.NONEMPTY_OBJECT) {\n      stack[stackSize - 1] = JsonScope.DANGLING_NAME;\n      // Look for a comma before the next element.\n            ...\n      int c = nextNonWhitespace(true);\n      switch (c) {\n      case '\"':\n        return peeked = PEEKED_DOUBLE_QUOTED_NAME;\n     ...\n      default:\n      ...\n      }\n    }\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT,DANGLING_NAME],StackSize =2;\n</code></pre> <p>\u5c06\u5f53\u524d\u7684\u5c42\u7ea7\u72b6\u6001\u6539\u4e3aDANGLING_NAME\uff0c\u5e76\u8fd4\u56de\u5b57\u7b26\u72b6\u6001\u4e3aPEEKED_DOUBLE_QUOTED_NAME\uff0c\u518d\u770bnextName()</p> <pre><code>   String result;\n    if (p == PEEKED_UNQUOTED_NAME) {\n      result = nextUnquotedValue();\n    } else if (p == PEEKED_SINGLE_QUOTED_NAME) {\n      result = nextQuotedValue('\\'');\n    } else if (p == PEEKED_DOUBLE_QUOTED_NAME) {\n      result = nextQuotedValue('\"'); \n    } else {\n      throw new IllegalStateException(\"Expected a name but was \" + peek() + locationString());\n    }\n    peeked = PEEKED_NONE;\n    pathNames[stackSize - 1] = result;\n    return result;\n</code></pre> <p><code>nextQuotedValue('\"')</code>\u4f1a\u8bfb\u53d6\u5230<code>\"\"</code>\u4e2d\u7684\u5185\u5bb9\u7ed9result\u4e2d\uff0c\u63a5\u7740\u5c06peeked\u8bbe\u7f6e\u4e3aPEEKED_NONE\u3002\u5230\u8fd9\u91cc\u6211\u4eec\u4f1a\u53d1\u73b0PEEKED_NONE\u662f\u65b0\u7684\u5b57\u7b26\u5f00\u59cb\u8bfb\u53d6\u548c\u7ed3\u675f\u7684\u72b6\u6001\u3002</p> <p>\u63a5\u7740 <code>reader.beginArray();</code>,beginArray()\u548cbeginObject()\u65b9\u6cd5\u5f88\u50cf\uff0c\u6211\u4eec\u8d70\u4e00\u4e0b\uff0c\u8fd8\u662f\u5148\u8d70doPeek()</p> <pre><code>if (peekStack == JsonScope.DANGLING_NAME) {\n  stack[stackSize - 1] = JsonScope.NONEMPTY_OBJECT;\n  // Look for a colon before the value.\n  int c = nextNonWhitespace(true);\n  switch (c) {\n    case ':':\n      break;\n    case '=':\n      checkLenient();\n      if ((pos &lt; limit || fillBuffer(1)) &amp;&amp; buffer[pos] == '&gt;') {\n        pos++;\n      }\n      break;\n    default:\n      throw syntaxError(\"Expected ':'\");\n  }\n}\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT,NONEMPTY_OBJECT],StackSize =2;\n</code></pre> <p>\u6b64\u65f6\u7684\u5c42\u7ea7\u72b6\u6001\u4e3aDANGLING_NAME\uff0c\u4f1a\u4fee\u6539\u6210NONEMPTY_OBJECT,\u5728<code>:</code>\u5904break,dopeek()\u63a5\u7740\u5f80\u4e0b\u8d70\u3002</p> <pre><code>int c = nextNonWhitespace(true);//\u8bfb\u53d6\u4e0b\u4e00\u4e2a\u5b57\u7b26\n    switch (c) {\n        ...\n    case '[':\n      return peeked = PEEKED_BEGIN_ARRAY;\n      ...\n    default:\n      pos--; // Don't consume the first character in a literal value.\n    }\n</code></pre> <p>\u4f1a\u8fd4\u56de\u5b57\u7b26\u7684\u72b6\u6001PEEKED_BEGIN_ARRAY\u3002 \u5728\u770bbeginArray()\uff0c\u4f1a\u5728stack[]\u4e2d\u518d\u52a0\u4e00\u5c42\uff0cStackSize+1\u3002</p> <pre><code> //begainArray\nif (p == PEEKED_BEGIN_ARRAY) {\n      push(JsonScope.EMPTY_ARRAY);\n      pathIndices[stackSize - 1] = 0;\n      peeked = PEEKED_NONE;\n    } else {\n      throw new IllegalStateException(\"Expected BEGIN_ARRAY but was \" + peek() + locationString() + \"\uff0cv=\"+nextErrorString());\n    }\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT,NONEMPTY_OBJECT,EMPTY_ARRAY],StackSize =3\n</code></pre> <p><code>reader.nextString();</code>\u4ecd\u7136\u5148\u8d70dopeek()</p> <pre><code>if (peekStack == JsonScope.EMPTY_ARRAY) {\n  stack[stackSize - 1] = JsonScope.NONEMPTY_ARRAY;\n}\n int c = nextNonWhitespace(true);\n    switch (c) {\n    case '\"':\n      return peeked = PEEKED_DOUBLE_QUOTED;\n    default:\n      pos--; // Don't consume the first character in a literal value.\n    }\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT,NONEMPTY_OBJECT,NONEMPTY_ARRAY],StackSize =3\n</code></pre> <p>\u7136\u540e\u5728nextString()\u4e2d\u5c06<code>nextQuotedValue('\"')</code>,\u5c06\u53cc\u5f15\u53f7\u4e2d\u7684\u5b57\u7b26\u8bfb\u53d6\u51fa\u6765\u3002\u5b57\u7b26\u72b6\u6001\u6062\u590d\u5230PEEKED_NONE\u3002</p> <p>reader.endArray(); \u4ecd\u7136\u5148\u8d70dopeek()</p> <p>```java\u00a0 if (peekStack == JsonScope.NONEMPTY_ARRAY) {   // Look for a comma before the next element.   int c = nextNonWhitespace(true);   switch (c) {     case ']':       return peeked = PEEKED_END_ARRAY;     case ';':       checkLenient(); // fall-through     case ',':       break;     default:       throw syntaxError(\"Unterminated array\");   } } </p> <pre><code>\n\u4f1a\u8fd4\u56de\u5b57\u7b26\u72b6\u6001PEEKED_END_ARRAY\uff0c\u770b\u4e00\u4e0bendArray().\n\n```java\nif (p == PEEKED_END_ARRAY) {\n  stackSize--;\n  pathIndices[stackSize - 1]++; //\u4e3a\u4e86\u8bb0\u5f55\u8def\u5f84\u4f7f\u7528\u7684\n  peeked = PEEKED_NONE;\n} else {\n  throw new IllegalStateException(\"Expected END_ARRAY but was \" + peek() + locationString());\n}\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT,NONEMPTY_OBJECT],StackSize =2 \n\n//\u5b9e\u9645\u4e0astack[NONEMPTY_DOCUMENT,NONEMPTY_OBJECT,NONEMPTY_ARRAY]\uff0c\u4f46\u662fNONEMPTY_ARRAY\u8fd9\u4e2a\u5df2\u7ecf\u65e0\u5173\u7d27\u8981\u4e86\u53ea\u662f\u6ca1\u6709\u6e050\u800c\u5df2\n</code></pre> <p>reader.nextName();\u4ecd\u7136\u5148\u8d70doPeek().</p> <pre><code>if (peekStack == JsonScope.EMPTY_OBJECT || peekStack == JsonScope.NONEMPTY_OBJECT) {\n      stack[stackSize - 1] = JsonScope.DANGLING_NAME;\n      // Look for a comma before the next element.\n      if (peekStack == JsonScope.NONEMPTY_OBJECT) {\n        int c = nextNonWhitespace(true);\n        switch (c) {\n        ...\n        case ',':\n          break;\n        ...\n        }\n      }\n      int c = nextNonWhitespace(true);\n      switch (c) {\n      case '\"':\n        return peeked = PEEKED_DOUBLE_QUOTED_NAME;\n        ...\n      }\n    }\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT,DANGLING_NAME],StackSize =2 \n</code></pre> <p>\u8fd4\u56de\u5b57\u7b26\u72b6\u6001PEEKED_DOUBLE_QUOTED_NAME\uff0cnextName()\u4e2d\uff0c\u4f1a\u8bfb\u53d6\u5b57\u7b26\u4e32\u7684\u503c\uff0c\u5e76\u5c06\u5b57\u7b26\u79fb\u52a8\u5230<code>\"</code>\u7684\u4f4d\u7f6e\u3002</p> <p>reader.nextInt(),\u4ecd\u7136\u5148\u8d70doPeek()</p> <pre><code>if (peekStack == JsonScope.DANGLING_NAME) {\n      stack[stackSize - 1] = JsonScope.NONEMPTY_OBJECT;\n      // Look for a colon before the value.\n      int c = nextNonWhitespace(true);\n      switch (c) {\n      case ':':\n        break;\n      default:\n        throw syntaxError(\"Expected ':'\");\n      }\n    } \nresult = peekNumber();\nif (result != PEEKED_NONE) {\n  return result;\n}\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT,NONEMPTY_OBJECT],StackSize =2 \n</code></pre> <p>peekNumber()\u65b9\u6cd5\u4f1a\u8bfb\u53d6<code>:</code>\u540e\u7684\u6570\u5b57\uff0c\u6b63\u5e38\u60c5\u8def\u4e0b\u4e3b\u8981\u8fd4\u56dePEEKED_LONG\u548cPEEKED_NUMBER\u8fd9\u4e24\u4e2a\u72b6\u6001\uff0c\u5728nextInt()\u4e2d\u53bb\u8bfb\u53d6\u8981\u8bfb\u53d6\u7684\u5b57\u7b26\u4e32\u3002</p> <p>reader.endObject(); \u4ecd\u7136\u8d70dopeek(),\u8fd4\u56de\u5b57\u7b26\u72b6\u6001PEEKED_END_OBJECT\u3002</p> <pre><code>if (peekStack == JsonScope.NONEMPTY_OBJECT) {\n  int c = nextNonWhitespace(true);\n  switch (c) {\n    case '}':\n      return peeked = PEEKED_END_OBJECT;\n      ...\n    default:\n      throw syntaxError(\"Unterminated object\");\n  }\n}\n</code></pre> <p>endObject()\u4e2d\u4f1a\u5c06stack[]\u8fdb\u884c\u66f4\u65b0\u3002</p> <pre><code> if (p == PEEKED_END_OBJECT) {\n      stackSize--;\n      pathNames[stackSize] = null; // Free the last path name so that it can be garbage collected!\n      pathIndices[stackSize - 1]++;\n      peeked = PEEKED_NONE;\n    } else {\n      throw new IllegalStateException(\"Expected END_OBJECT but was \" + peek() + locationString());\n    }\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT],StackSize =1\n</code></pre> <p>\u5230\u6b64\u6574\u4e2a\u4e0a\u9762\u4ee3\u7801\u7684\u6e90\u7801\u6d41\u7a0b\u5c31\u8d70\u5b8c\u4e86\uff0c\u56e0\u4e3a\u8d70\u7684\u662f\u6b63\u5e38\u60c5\u51b5\uff0c\u4e2d\u95f4\u7684\u7ea0\u9519\u6ca1\u6709\u7ec6\u81f4\u6765\u5206\u6790\uff0c\u4f46\u6b64\u65f6stack[]\u4ecd\u7136\u662fNONEMPTY_DOCUMENT\uff0c\u662f\u4e0d\u662f\u5c31\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u5f80\u4e0b\u8d70\uff0c\u53ef\u4ee5\u7528JsonReader#peek()\uff0c\u4ecd\u7136\u8d70dopeek()</p> <pre><code>if (peekStack == JsonScope.NONEMPTY_DOCUMENT) {\n  int c = nextNonWhitespace(false);\n  if (c == -1) {\n    return peeked = PEEKED_EOF;\n  } else {\n    checkLenient();\n    pos--;\n  }\n}\n//\u6b64\u65f6stack[NONEMPTY_DOCUMENT],StackSize =1 \u4ecd\u7136\u4e0d\u53d8\n</code></pre> <p>\u4f46\u662f\u4f1a\u8fd4\u56de\u5b57\u7b26\u72b6\u6001PEEKED_EOF\uff0c\u8fd9\u662f\u7ed3\u675f\u7684\u6807\u5fd7\u3002</p> <p>\u7531\u4ee5\u4e0a\u7684\u6d41\u7a0b\u6765\u603b\u7ed3\u4e00\u4e0bdoPeek()\u65b9\u6cd5\uff1a</p> <p>\u6839\u636eJsonCope\u6765\u8fd4\u56de\u5f53\u524d\u7684\u5b57\u7b26\u72b6\u6001\uff0c\u4e3b\u8981\u5904\u7406JsonCope\u7684\u72b6\u6001\uff0c\u8bfb\u53d6\u4e0b\u4e00\u4e2a\u5b57\u7b26\uff0c\u5224\u65ad\u5f53\u524d\u5b57\u7b26\u7684\u72b6\u6001\u3002</p> <pre><code>//\u7b2c\u4e00\u4e2a\u6d41\u7a0b \u80fd\u76f4\u63a5\u6839\u636e\u5f53\u524d\u5b57\u7b26\u548cJsonScope\u786e\u5b9a\u5f53\u524d\u5b57\u7b26\u72b6\u6001\u7684\n if (peekStack == JsonScope.EMPTY_ARRAY) {\n      stack[stackSize - 1] = JsonScope.NONEMPTY_ARRAY;\n    } else if (peekStack == JsonScope.NONEMPTY_ARRAY) {\n      // Look for a comma before the next element.\n      int c = nextNonWhitespace(true);\n      switch (c) {\n      case ']':\n        return peeked = PEEKED_END_ARRAY;\n      case ';':\n        checkLenient(); // fall-through\n      case ',':\n        break;\n      default:\n        throw syntaxError(\"Unterminated array\");\n      }\n    } else if (peekStack == JsonScope.EMPTY_OBJECT || peekStack == JsonScope.NONEMPTY_OBJECT) {\n      stack[stackSize - 1] = JsonScope.DANGLING_NAME;\n      // Look for a comma before the next element.\n      if (peekStack == JsonScope.NONEMPTY_OBJECT) {\n        int c = nextNonWhitespace(true);\n        switch (c) {\n        case '}':\n          return peeked = PEEKED_END_OBJECT;\n        case ';':\n          checkLenient(); // fall-through\n        case ',':\n          break;\n        default:\n          throw syntaxError(\"Unterminated object\");\n        }\n      }\n      int c = nextNonWhitespace(true);\n      switch (c) {\n      case '\"':\n        return peeked = PEEKED_DOUBLE_QUOTED_NAME;\n      case '\\'':\n        checkLenient();\n        return peeked = PEEKED_SINGLE_QUOTED_NAME;\n      case '}':\n        if (peekStack != JsonScope.NONEMPTY_OBJECT) {\n          return peeked = PEEKED_END_OBJECT;\n        } else {\n          throw syntaxError(\"Expected name\");\n        }\n      default:\n        checkLenient();\n        pos--; // Don't consume the first character in an unquoted string.\n        if (isLiteral((char) c)) {\n          return peeked = PEEKED_UNQUOTED_NAME;\n        } else {\n          throw syntaxError(\"Expected name\");\n        }\n      }\n    } else if (peekStack == JsonScope.DANGLING_NAME) {\n      stack[stackSize - 1] = JsonScope.NONEMPTY_OBJECT;\n      // Look for a colon before the value.\n      int c = nextNonWhitespace(true);\n      switch (c) {\n      case ':':\n        break;\n      case '=':\n        checkLenient();\n        if ((pos &lt; limit || fillBuffer(1)) &amp;&amp; buffer[pos] == '&gt;') {\n          pos++;\n        }\n        break;\n      default:\n        throw syntaxError(\"Expected ':'\");\n      }\n    } else if (peekStack == JsonScope.EMPTY_DOCUMENT) {\n      if (lenient) {\n        consumeNonExecutePrefix();\n      }\n      stack[stackSize - 1] = JsonScope.NONEMPTY_DOCUMENT;\n    } else if (peekStack == JsonScope.NONEMPTY_DOCUMENT) {\n      int c = nextNonWhitespace(false);\n      if (c == -1) {\n        return peeked = PEEKED_EOF;\n      } else {\n        checkLenient();\n        pos--;\n      }\n    } else if (peekStack == JsonScope.CLOSED) {\n      throw new IllegalStateException(\"JsonReader is closed\");\n    }\n//\u7b2c\u4e8c\u6b65 \u6d88\u8d39\u4e0b\u4e00\u4e2a\u5b57\u7b26 \n int c = nextNonWhitespace(true);\n    switch (c) {\n    case ']':\n      if (peekStack == JsonScope.EMPTY_ARRAY) {\n        return peeked = PEEKED_END_ARRAY;\n      }\n      // fall-through to handle \",]\"\n    case ';':\n    case ',':\n      // In lenient mode, a 0-length literal in an array means 'null'.\n      if (peekStack == JsonScope.EMPTY_ARRAY || peekStack == JsonScope.NONEMPTY_ARRAY) {\n        checkLenient();\n        pos--;\n        return peeked = PEEKED_NULL;\n      } else {\n        throw syntaxError(\"Unexpected value\");\n      }\n    case '\\'':\n      checkLenient();\n      return peeked = PEEKED_SINGLE_QUOTED;\n    case '\"':\n      return peeked = PEEKED_DOUBLE_QUOTED;\n    case '[':\n      return peeked = PEEKED_BEGIN_ARRAY;\n    case '{':\n      return peeked = PEEKED_BEGIN_OBJECT;\n    default:\n      pos--; // Don't consume the first character in a literal value.\n    }\n//\u82e5\u4ee5\u4e0a\u672a\u6d88\u8d39\uff0c\nint result = peekKeyword();//\u4e3b\u8981\u662f\u5904\u7406true,false,null\n    if (result != PEEKED_NONE) {\n      return result;\n    }\n\n    result = peekNumber();//\u4e3b\u8981\u662f\u5904\u7406int,short,byte,long,flat,double\u7c7b\u578b\u7684\n    if (result != PEEKED_NONE) {\n      return result;\n    }\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/","title":"22 Kotlin \u8bed\u6cd5\u5165\u95e8","text":""},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#_1","title":"\u73af\u5883\u914d\u7f6e","text":""},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#idea","title":"IDEA","text":"<p>\u9700\u8981\u5728IDEA\u4e2d\u4e0b\u8f7dKotlin\u63d2\u4ef6</p> <p>1.\u4f7f\u7528Gradle \u7ba1\u7406Kotlin\u7248\u672c</p> <pre><code>//Build.gradle\nplugins {\n    id 'org.jetbrains.kotlin.jvm' version '1.8.20'\n}\n\nrepositories {\n    mavenCentral()\n    jcenter()\n}\n\ndependencies {\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib\"\n}\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#android-studio","title":"Android Studio","text":"<p>Gradle\u7ba1\u7406Kotlin\u7248\u672c</p> <pre><code>classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.8.20\"\n</code></pre> <pre><code>fun main() {\n    val kotlinVersion = KotlinVersion.CURRENT\n    println(\"Kotlin compiler version: ${kotlinVersion.major}.${kotlinVersion.minor}.${kotlinVersion.patch}\")\n}\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#_2","title":"\u8bed\u6cd5\u5165\u95e8","text":""},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#_3","title":"\u51fd\u6570","text":"<p>\u51fd\u6570\u5b9a\u4e49\u4f7f\u7528\u5173\u952e\u5b57 fun\uff0c\u51fd\u6570\u683c\u5f0f\uff1afun \u51fd\u6570\u540d(\u51fd\u6570\u53c2\u6570): \u8fd4\u56de\u7c7b\u578b\uff1b\u53c2\u6570\u683c\u5f0f\u4e3a\uff1a\u53c2\u6570 : \u7c7b\u578b\u3002</p> <pre><code>//\u6807\u51c6\u683c\u5f0f\nfun sum(a: Int, b: Int): Int {   \n    return a + b\n}\n\n// \u8868\u8fbe\u5f0f\u4f5c\u4e3a\u51fd\u6570\u4f53\uff0c\u8fd4\u56de\u7c7b\u578b\u81ea\u52a8\u63a8\u65ad\nfun sum(a: Int, b: Int) = a + b\npublic fun sum(a: Int, b: Int): Int = a + b   // public \u65b9\u6cd5\u5219\u5fc5\u987b\u660e\u786e\u5199\u51fa\u8fd4\u56de\u7c7b\u578b\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#null","title":"NULL\u68c0\u67e5\u673a\u5236","text":"<p>\u5b57\u6bb5\u540e+<code>?</code>:\u53ef\u4e0d\u505a\u5904\u7406\u8fd4\u56de\u503c\u4e3anull\u6216\u4f7f\u7528<code>?:</code>\uff0c\u5b57\u6bb5\u540e+<code>!!</code>:\u629b\u51fa\u7a7a\u6307\u9488\u5f02\u5e38\u3002</p> <pre><code>//\u7c7b\u578b\u540e\u9762\u52a0?\u8868\u793a\u53ef\u4e3a\u7a7a\nvar age: String? = \"23\" \n//\u629b\u51fa\u7a7a\u6307\u9488\u5f02\u5e38\nval ages = age!!.toInt()\n//\u4e0d\u505a\u5904\u7406\u8fd4\u56de null\nval ages1 = age?.toInt()\n//age\u4e3a\u7a7a\u8fd4\u56de-1\nval ages2 = age?.toInt() ?: -1\n  // \u5982\u679c str \u7684\u5185\u5bb9\u4e0d\u662f\u6570\u5b57\u8fd4\u56de null\nfun parseInt(str: String): Int? {\n    // \u2026\u2026\n}\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#_4","title":"\u7c7b\u578b\u68c0\u6d4b\u4e0e\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362","text":"<p><code>is</code> \u8fd0\u7b97\u7b26\u68c0\u6d4b\u4e00\u4e2a\u8868\u8fbe\u5f0f\u662f\u5426\u67d0\u7c7b\u578b\u7684\u4e00\u4e2a\u5b9e\u4f8b.</p> <pre><code>fun getStringLength(obj: Any): Int? {\n    if (obj is String) {\n        // `obj` \u5728\u8be5\u6761\u4ef6\u5206\u652f\u5185\u81ea\u52a8\u8f6c\u6362\u6210 `String`\n        return obj.length\n    }\n\n    // \u5728\u79bb\u5f00\u7c7b\u578b\u68c0\u6d4b\u5206\u652f\u540e\uff0c`obj` \u4ecd\u7136\u662f `Any` \u7c7b\u578b\n    return null\n}\nfun getStringLength(obj: Any): Int? {\n    if (obj !is String) return null\n\n    // `obj` \u5728\u8fd9\u4e00\u5206\u652f\u81ea\u52a8\u8f6c\u6362\u4e3a `String`\n    return obj.length\n}\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#when","title":"When\u8868\u8fbe\u5f0f","text":"<pre><code>fun describe(obj: Any): String =\n    when (obj) {\n        1          -&gt; \"One\"\n        \"Hello\"    -&gt; \"Greeting\"\n        is Long    -&gt; \"Long\"\n        !is String -&gt; \"Not a string\"\n        else       -&gt; \"Unknown\"\n    }\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#_5","title":"\u96c6\u5408","text":"<pre><code>val fruits = listOf(\"banana\", \"avocado\", \"apple\", \"kiwifruit\")\n  fruits\n  .filter { it.startsWith(\"a\") } //\u96c6\u5408\u53ef\u4ee5\u8fc7\u6ee4\n.sortedBy { it }\n.map { it.toUpperCase() }//\u53ef\u4ee5\u8f6c\u6362\n.forEach { println(it) }\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#contract","title":"Contract\u7684\u6982\u5ff5","text":"<p>Contract \u662f\u4e00\u79cd\u5411\u7f16\u8bd1\u5668\u901a\u77e5\u51fd\u6570\u884c\u4e3a\u7684\u65b9\u6cd5\uff0c\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ol> <li>\u53ea\u80fd\u5728 top-level \u51fd\u6570\u4f53\u5185\u4f7f\u7528 Contract\uff0c\u5373\u6211\u4eec\u4e0d\u80fd\u5728\u6210\u5458\u548c\u7c7b\u51fd\u6570\u4e0a\u4f7f\u7528\u5b83\u4eec\u3002</li> <li>Contract \u6240\u8c03\u7528\u7684\u58f0\u660e\u5fc5\u987b\u662f\u51fd\u6570\u4f53\u5185\u7b2c\u4e00\u6761\u8bed\u53e5</li> <li>Kotlin \u7f16\u8bd1\u5668\u5e76\u4e0d\u4f1a\u9a8c\u8bc1 Contract\uff0c\u56e0\u6b64\u5fc5\u987b\u7f16\u5199\u6b63\u786e\u5408\u7406\u7684 Contract</li> <li>\u5185\u8054\u5316\u7684\u51fd\u6570\uff08\u4e5f\u9700\u8981\u662f top-level \u5c42\u7ea7\u7684\u51fd\u6570\uff09\u652f\u6301\u4f7f\u7528 Contract</li> </ol> <pre><code>@ExperimentalContracts\nfun String?.isNull(): Boolean {\n    //\u4e0b\u9762\u662f\u6dfb\u52a0\u7684\u5185\u5bb9\n    contract {\n        returns(false) implies (this@isNull != null)\n    }\n    //\u4e0a\u9762\u662f\u6dfb\u52a0\u7684\u5185\u5bb9\n    return this == null\n}\n\n@ExperimentalContracts\nfun test() {\n    var str: String? = null\n\n    if (str.isNull()) {\n        str = \"kotlin contract\"\n    }\n\n    println(str.length)\n}\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#contract_1","title":"Contract \u7684\u5206\u7c7b","text":""},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#returns-contracts","title":"Returns Contracts","text":"<p>\u8868\u793a\u5f53 return \u7684\u8fd4\u56de\u503c\u662f\u67d0\u4e2a\u503c\uff08\u4f8b\u5982true\u3001false\u3001null\uff09\u65f6\uff0cimplies \u540e\u9762\u7684\u6761\u4ef6\u6210\u7acb\uff0c\u6709\u4ee5\u4e0b\u51e0\u79cd\u5f62\u5f0f\uff1a</p> \u5f62\u5f0f \u8bf4\u660e returns(value: Any?) implies \u6761\u4ef6 \u5982\u679c\u51fd\u6570\u8fd4\u56de\u503c\u4e3a value\uff0c\u6761\u4ef6\u6210\u7acb returns() implies \u6761\u4ef6 \u5982\u679c\u51fd\u6570\u80fd\u591f\u6b63\u5e38\u8fd4\u56de\uff0c\u4e14\u6ca1\u6709\u629b\u51fa\u5f02\u5e38\uff0c\u6761\u4ef6\u6210\u7acb returnsNotNull implies \u6761\u4ef6 \u5982\u679c\u51fd\u6570\u8fd4\u56de\u975e null \u503c\uff0c\u6761\u4ef6\u6210\u7acb"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#callsinplace-contracts","title":"CallsInPlace Contracts","text":"<p>CallsInPlace Contracts \u5141\u8bb8\u5f00\u53d1\u8005\u5bf9\u8c03\u7528\u7684 lambda \u8868\u8fbe\u5f0f\u8fdb\u884c\u9891\u7387\u4e0a\u7684\u7ea6\u675f\uff0c\u53ea\u80fd\u5728 inline \u51fd\u6570\u4e2d\u8c03\u7528</p> <p>\u524d\u9762\u7684\u9ad8\u9636\u51fd\u6570 let \u5c31\u662f\u4e00\u4e2a CallsInPlace Contracts</p> <pre><code>@kotlin.internal.InlineOnly\npublic inline fun &lt;T, R&gt; T.let(block: (T) -&gt; R): R {\n    contract {\n        callsInPlace(block, InvocationKind.EXACTLY_ONCE)\n    }\n    return block(this)\n}\n</code></pre> <p>contract() \u4e2d\u7684 callsInPlace \u4f1a\u544a\u8bc9\u7f16\u8bd1\u5668\uff0clambda \u8868\u8fbe\u5f0f block \u5728 let \u51fd\u6570\u5185\u53ea\u4f1a\u6267\u884c\u4e00\u6b21</p> <p>callsInPlace() \u4e2d\u7684 InvocationKind \u662f\u4e00\u4e2a\u679a\u4e3e\u7c7b\uff0c\u5305\u542b\u5982\u4e0b\u7684\u679a\u4e3e\u503c</p> \u679a\u4e3e\u503c \u8bf4\u660e AT_MOST_ONCE \u51fd\u6570\u53c2\u6570\u8c03\u7528\u6b21\u6570 &lt;= 1 EXACTLY_ONCE \u51fd\u6570\u53c2\u6570\u8c03\u7528\u6b21\u6570 == 1 AT_LEAST_ONCE \u51fd\u6570\u53c2\u6570\u8c03\u7528\u6b21\u6570 &gt;= 1 UNKNOWN \u51fd\u6570\u53c2\u6570\u8c03\u7528\u6b21\u6570 \u4e0d\u9650\u5236 <p>let</p> <pre><code>@kotlin.internal.InlineOnly\npublic inline fun &lt;T, R&gt; T.let(block: (T) -&gt; R): R {\n    contract {\n        callsInPlace(block, InvocationKind.EXACTLY_ONCE)\n    }\n    return block(this)\n}\n</code></pre>"},{"location":"Android/22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/#_6","title":"\u7c7b\u4e0e\u5bf9\u8c61","text":"<p>\u6784\u9020\u51fd\u6570\uff1a\u5206\u4e3a\u4e3b\u6784\u9020\u51fd\u6570\u548c\u6b21\u6784\u9020\u51fd\u6570\u3002</p> <p>\u4e3b\u6784\u9020\u51fd\u6570\u6307\u76f4\u63a5\u5728\u7c7b\u540d\u540e\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u7528<code>()</code>\u5b9e\u73b0</p> <p>\u4e3b\u6784\u9020\u51fd\u6570\u4e2d\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4e49\u5c5e\u6027</p> <p>\u4e3b\u6784\u9020\u51fd\u6570\u4e2d\u4e0d\u80fd\u6709\u4efb\u4f55\u4ee3\u7801\uff0c\u53ef\u4ee5\u4f7f\u7528init \u5b9a\u4e49\u7684\u521d\u59cb\u5316\u5757\u4e2d\u6765\u5b9e\u73b0</p> <p>\u4e3b\u6784\u9020\u51fd\u6570\u5b9a\u4e49\u7684\u5c5e\u6027\u53ef\u4ee5\u5728init \u4e2d\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5728\u58f0\u660e\u5c5e\u6027\u7684\u521d\u59cb\u5316\u5668\u4e2d\u4f7f\u7528</p> <p>\u521d\u59cb\u5316\u5757\u662f\u4e3b\u6784\u9020\u51fd\u6570\u7684\u4e00\u90e8\u5206\uff0c\u54ea\u6015\u6ca1\u6709\u5b9e\u73b0\uff0c\u4e5f\u4f1a\u9690\u5f0f\u53d1\u751f\u3002</p> <p>\u6b21\u6784\u9020\u51fd\u6570\uff0c\u5728\u7c7b\u4e2d\u4f7f\u7528constructor(){} \u6765\u5b9e\u73b0</p>"},{"location":"Android/23%20OkDownLoad%20%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/","title":"23 OkDownLoad \u4f7f\u7528\u6559\u7a0b","text":"<p>1.\u8bb0\u5f55\u5355\u7ebf\u7a0b\u4e0b\u8f7d\u65b9\u6cd5</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u77ed\u70b9\u7eed\u4f20\u65f6\u4f7f\u7528\u5355\u7ebf\u7a0b\uff0c\u4e0b\u8f7d\u65f6\u4e5f\u9700\u8981\u4f7f\u7528\u5355\u7ebf\u7a0b</p>"},{"location":"Android/24%20%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/","title":"24 \u81ea\u52a8\u5316\u6d4b\u8bd5","text":"<p>AirTest\u5b98\u7f51</p> <p>\u4f7f\u7528AirTest\u5b9e\u73b0\u81ea\u52a8\u5316\u6d4b\u8bd5\u3002</p> <p>AirTestIDE </p>"},{"location":"Android/24%20%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/#1","title":"1.\u73af\u5883\u914d\u7f6e","text":"<pre><code># \u5b89\u88c5Airtest\u6846\u67b6\npip install airtest\n\n# \u5b89\u88c5Poco\u6846\u67b6\uff1b\u7f16\u5199\u4e86Poco\u8bed\u53e5\u5c31\u9700\u8981\u5b89\u88c5\npip install pocoui\n\n# \u5b89\u88c5airtest-selenium\u6846\u67b6\uff1b\u7f16\u5199\u4e86airtest-selenium\u8bed\u53e5\u5c31\u9700\u8981\u5b89\u88c5\npip install airtest-selenium\n</code></pre> <p>1.\u672c\u5730Python\u73af\u5883\u5efa\u8bae\u4f7f\u7528python 3.8,\u539f\u56e0\u662f\u4f7f\u7528Python 3.9\u4f1a\u6709Numpy \u7f3a\u5931\u6587\u4ef6\u7684\u62a5\u9519</p> <p>AirTest\u4f7f\u7528\u9047\u5230\u7684\u5751</p> <p>2.Oppo\u4f7f\u7528Adb\u83b7\u53d6\u6743\u9650\u4e0d\u7ed9\u6743\u9650</p> <p>\u5f02\u5e38\u62a5\u9519\uff1a</p> <pre><code>Operation not allowed: java.lang.SecurityException: grantRuntimePermission: Neither user 2000 nor current process has android.permission.GRANT_RUNTIME_PERMISSIONS.\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <p>\u8bbe\u7f6e---\u5f00\u53d1\u8005\u9009\u9879---\u7981\u6b62\u6743\u9650\u76d1\u63a7</p> <p>3.Airtest\u4f7f\u7528poco(\"\")\u83b7\u53d6\u63a7\u4ef6\uff0c\u5f53\u63a7\u4ef6\u4e0d\u5b58\u5728UI\u754c\u9762\u65f6\uff0c\u4f1a\u62a5RpcRemoteException\u3002</p> <p>\u573a\u666f\u5982\u4e0b\uff1a</p> <pre><code>poco(\"com.example.test:id/beta_button_right\").exists()\n</code></pre>"},{"location":"Android/25%20Apk%E5%A4%A7%E5%B0%8F%E4%BC%98%E5%8C%96/","title":"25 Apk\u5927\u5c0f\u4f18\u5316","text":"<p>\u6b63\u5e38\u7684Apk \u5e94\u5305\u542b\u4ee5\u4e0b\u6587\u4ef6</p> <ul> <li>META-INF/ \uff1a\u5305\u542b CERT.SF \u548c CERT.RSA \u7b7e\u540d\u6587\u4ef6\uff0c\u4ee5\u53ca MANIFEST.MF \u6e05\u5355\u6587\u4ef6\u3002</li> </ul> <p>\u7528\u4e8e\u4fdd\u5b58\u5e94\u7528\u7a0b\u5e8f\u7684\u7b7e\u540d\u548c\u6821\u9a8c\u4fe1\u606f\uff0c\u4ee5\u4fdd\u8bc1\u7a0b\u5e8f\u7684\u5b8c\u6574\u6027\u3002\u751f\u6210apk\u5305\u65f6\uff0c\u7cfb\u7edf\u4f1a\u5bf9\u5305\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u505a\u4e00\u6b21\u6821\u9a8c,\u7136\u540e\u5c06\u7ed3\u679c\u4fdd\u5b58\u5728\u8fd9\u91cc\u3002\u8bbe\u5907\u5728\u5b89\u88c5\u8fd9\u4e00\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u8fd8\u4f1a\u5bf9\u5185\u5bb9\u5728\u505a\u4e00\u6b21\u6821\u9a8c\uff0c\u5e76\u548cMETA-INF\u7684\u503c\u8fdb\u884c\u6bd4\u5bf9\uff0c\u4ee5\u907f\u514d\u7a0b\u5e8f\u5305\u88ab\u6076\u610f\u7be1\u6539\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u53ea\u7b80\u5355\u901a\u8fc7\u66ff\u6362\u6587\u4ef6\u4e8c\u6b21\u6253\u5305\uff0c\u7a0b\u5e8f\u4e0d\u80fd\u6b63\u5e38\u5b89\u88c5\u7684\u539f\u56e0\u3002</p> <ul> <li> <p>assets/ \uff1a\u5305\u542b\u5e94\u7528\u7684\u8d44\u6e90\uff1b\u5e94\u7528\u53ef\u4ee5\u4f7f\u7528 AssetManager \u5bf9\u8c61\u68c0\u7d22\u8fd9\u4e9b\u8d44\u6e90\u3002</p> </li> <li> <p>res/\uff1a\u5305\u542b\u9879\u76eeres\u6587\u4ef6\u5939\u4e0b\u7684\u8d44\u6e90\uff0c\u4f8b\u5982\u5e03\u5c40\u8d44\u6e90\u3001\u5b57\u7b26\u4e32\u8d44\u6e90\u3001\u56fe\u7247\u8d44\u6e90\u7b49\u3002</p> </li> <li> <p>lib/\uff1a\u5305\u542b\u7279\u5b9a\u4e8e\u5904\u7406\u5668\u8f6f\u4ef6\u5c42\u7684\u5df2\u7f16\u8bd1\u4ee3\u7801\u3002\u6b64\u76ee\u5f55\u5305\u542b\u6bcf\u79cd\u5e73\u53f0\u7c7b\u578b\u7684\u5b50\u76ee\u5f55\uff0c\u5982 armeabi \u3001</p> </li> </ul> <p>armeabi-v7a \u3001 arm64-v8a \u3001 x86 \u3001 x86_64 \u548c mips \u3002</p> <ul> <li>AndroidManifest.xml \uff1a\u5305\u542b\u6838\u5fc3 Android \u6e05\u5355\u6587\u4ef6\u3002\u6b64\u6587\u4ef6\u5217\u51fa\u4e86\u5e94\u7528\u7684\u540d\u79f0\u3001\u7248\u672c\u3001\u8bbf\u95ee\u6743\u9650\u548c\u5f15\u7528\u7684\u5e93\u6587\u4ef6\u3002\u8be5\u6587\u4ef6\u4f7f\u7528 Android \u7684\u4e8c\u8fdb\u5236 XML \u683c\u5f0f\u3002</li> <li>classes.dex \uff1a\u5305\u542b\u4ee5 Dalvik/ART \u865a\u62df\u673a\u53ef\u7406\u89e3\u7684 DEX \u6587\u4ef6\u683c\u5f0f\u7f16\u8bd1\u7684\u7c7b\u3002</li> <li>resources.arsc \uff1a\u5305\u542b\u5df2\u7f16\u8bd1\u7684\u8d44\u6e90\u3002\u6b64\u6587\u4ef6\u5305\u542b res/ \u6587\u4ef6\u5939\u7684\u6240\u6709\u914d\u7f6e\u4e2d\u7684 XML \u5185\u5bb9\u3002\u6253\u5305\u5de5\u5177\u4f1a\u63d0\u53d6\u6b64 XML \u5185\u5bb9\uff0c\u5c06\u5176\u7f16\u8bd1\u4e3a\u4e8c\u8fdb\u5236\u6587\u4ef6\u5f62\u5f0f\uff0c\u5e76\u538b\u7f29\u5185\u5bb9\u3002\u6b64\u5185\u5bb9\u5305\u62ec\u8bed\u8a00\u5b57\u7b26\u4e32\u548c\u6837\u5f0f\uff0c\u4ee5\u53ca\u672a\u76f4\u63a5\u5305\u542b\u5728 resources.arsc \u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\uff08\u4f8b\u5982\u5e03\u5c40\u6587\u4ef6\u548c\u56fe\u7247\uff09\u7684\u8def\u5f84\u3002</li> </ul> <p>Lib:so  :\u62fc\u591a\u591a\u5c11\u5f88\u591a</p> <p>Assert :\u5e94\u7528\u7684\u8d44\u6e90\uff0c\u6253\u5305\u4e0d\u4f1a\u88ab\u538b\u7f29\uff0c\u4e0d\u4f1a\u751f\u6210R.java\u6587\u4ef6</p> <p>res: \u62fc\u591a\u591a\u53ea\u6709\u51e0M</p> <p>Dex\uff1aJava\u4ee3\u7801\u6587\u4ef6</p> <p>Java\u4ee3\u7801\u4f18\u5316\uff1a</p> <p>\u63d2\u4ef6\u5316:\u6b21\u8981\u529f\u80fd\u9700\u8981\u4f7f\u7528\u7684\u65f6\u5019\u518d\u52a8\u6001\u52a0\u8f7d\u4e0b\u6765  </p> <p>shadow\u5b9e\u73b0\u4ee3\u7406\u548c\u53cd\u5c04</p> <p>\u51cf\u5c11Apk\u4f53\u79ef\u7684\u65b9\u5f0f\uff1a</p> <p>1.\u5c06\u56fe\u7247\u8f6c\u6362\u6210webp</p> <p>2.\u53bb\u9664\u591a\u8bed\u8a00</p> <p>3.so \u53ea\u4fdd\u755932\u4f4d</p> <p>4.\u79fb\u9664\u548c\u538b\u7f29\u65e0\u7528\u8d44\u6e90</p> <ul> <li>Proguard</li> </ul> <p>\u914d\u5408minifyEnabled\u4e3atrue\uff0c\u901a\u8fc7shrinkResources\u538b\u7f29\u65e0\u7528\u8d44\u6e90 xml\u4f1a\u538b\u7f29\u5230\u53ea\u5269\u5934\u90e8</p> <p>\u5f00\u542f\u6df7\u6dc6\uff0c\u5220\u9664\u672a\u4f7f\u7528\u7684\u7ed3\u6784</p> <ul> <li>Lint \u68c0\u67e5\u65e0\u7528\u8d44\u6e90\u5e76\u5220\u9664</li> </ul> <p>5.\u51cf\u5c11\u7b2c\u4e09\u65b9\u5e93</p> <p>6.AndResGuard\u5fae\u4fe1\u8d44\u6e90\u538b\u7f29\u65b9\u6848  \u538b\u7f29\u8d44\u6e90\u8def\u5f84\u548c\u51cf\u5c0f\u8d44\u6e90\u53ef\u8bfb\u6027</p> <p>7.\u52a8\u6001\u4e0b\u53d1so\u5e93</p>"},{"location":"Android/25%20Apk%E5%A4%A7%E5%B0%8F%E4%BC%98%E5%8C%96/#apk","title":"Apk\u6253\u5305\u6d41\u7a0b","text":"<p>1.\u5904\u7406AIDL\u6587\u4ef6</p> <p>2.\u5904\u7406\u8d44\u6e90\u6587\u4ef6 </p> <p>res\u4e2d\u7684\u6587\u4ef6\u8981\u751f\u6210R.java\u6587\u4ef6</p> <p>3.\u7f16\u8bd1\u6e90\u7801\u548c\u7b2c\u4e09\u65b9\u5e93</p> <p>\u751f\u6210.class\u6587\u4ef6\u540e\u518d\u751f\u6210dex\u6587\u4ef6\u4f9bJava\u865a\u62df\u673a\u4f7f\u7528</p> <p>4.ApkBuilder \u751f\u6210apk\u6216aab</p> <p>5.\u7b7e\u540d</p>"},{"location":"Android/26%20AOSP%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/","title":"26 AOSP\u6e90\u7801\u5b66\u4e60","text":"<p>AOSP\u5165\u95e8</p>"},{"location":"Android/26%20AOSP%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/#1project","title":"1.Project","text":"<p>\u5728 App \u7684\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u8981\u53bb\u6253\u6e20\u9053\u5305\uff0c\u6839\u636e\u4e0d\u540c\u5e94\u7528\u5e02\u573a\u7684\u8981\u6c42\u6253\u5305\u51fa\u4e0d\u540c\u7684 apk \u5305\u3002</p> <p>\u540c\u6837\u7684\u9053\u7406\uff0cAndroid \u7684\u7cfb\u7edf\u6e90\u7801\uff0c\u7ecf\u8fc7\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u6253\u5305\u51fa\u4e0d\u540c\u7684\u7cfb\u7edf\u955c\u50cf\uff0c\u7528\u4e8e\u4e0d\u540c\u7684\u4ea7\u54c1\u3002\u4f8b\u5982\u5c0f\u7c73 12s\uff0c\u5c0f\u7c7312s pro\uff0c\u5c0f\u7c7312s ultra \u5747\u6e90\u4e8e\u9a81\u9f998+\u5e73\u53f0\u3002</p> <p></p> <p>\u5728build/target \u6216\u8005device\u76ee\u5f55\u4e0b\u53ef\u4ee5\u770b\u5230AOSP\u9884\u7f6e\u7684Project</p>"},{"location":"Android/26%20AOSP%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/#aosp","title":"AOSP\u6e90\u7801\u76ee\u5f55\u4ecb\u7ecd","text":"<ol> <li>build\uff1a\u5305\u542b\u4e86\u6784\u5efa Android \u7cfb\u7edf\u7684\u76f8\u5173\u5de5\u5177\u548c\u811a\u672c\u3002</li> <li>cts\uff1a\u5305\u542b\u4e86 Compatibility Test Suite (CTS) \u7684\u76f8\u5173\u4ee3\u7801\u548c\u6d4b\u8bd5\u7528\u4f8b\uff0c\u7528\u4e8e\u9a8c\u8bc1\u8bbe\u5907\u7684\u517c\u5bb9\u6027\u3002</li> <li>dalvik\uff1a\u5305\u542b\u4e86 Dalvik \u865a\u62df\u673a\u7684\u6e90\u4ee3\u7801\uff0cDalvik \u662f Android \u65e9\u671f\u4f7f\u7528\u7684 Java \u865a\u62df\u673a\u3002</li> <li>development\uff1a\u5305\u542b\u4e86\u5f00\u53d1\u5de5\u5177\u548c\u5e93\u7684\u6e90\u4ee3\u7801\uff0c\u5982 adb\uff08Android \u8c03\u8bd5\u6865\uff09\u3001Android Studio \u63d2\u4ef6\u7b49\u3002</li> <li>frameworks\uff1a\u662f Android \u7cfb\u7edf\u7684\u6838\u5fc3\u6846\u67b6\u5c42\uff0c\u5305\u542b\u4e86\u8bb8\u591a Android \u7684 API\u3001\u670d\u52a1\u548c\u7ec4\u4ef6\u7684\u5b9e\u73b0\u4ee3\u7801\u3002</li> <li>hardware\uff1a\u5305\u542b\u4e86\u786c\u4ef6\u62bd\u8c61\u5c42\uff08Hardware Abstraction Layer\uff0cHAL\uff09\u7684\u5b9e\u73b0\u4ee3\u7801\uff0c\u7528\u4e8e\u63d0\u4f9b\u4e0e\u786c\u4ef6\u4ea4\u4e92\u7684\u63a5\u53e3\u3002</li> <li>libs\uff1a\u5305\u542b\u4e86\u4e00\u4e9b\u901a\u7528\u7684\u5e93\u548c\u7ec4\u4ef6\uff0c\u5982 SQLite \u6570\u636e\u5e93\u3001OpenGL ES \u7b49\u3002</li> <li>packages\uff1a\u5305\u542b\u4e86 Android \u7cfb\u7edf\u7684\u5404\u79cd\u5e94\u7528\u7a0b\u5e8f\u5305\uff0c\u5982\u6d4f\u89c8\u5668\u3001\u8054\u7cfb\u4eba\u3001\u7535\u8bdd\u7b49\u3002</li> <li>system\uff1a\u5305\u542b\u4e86 Android \u7cfb\u7edf\u7684\u6838\u5fc3\u7ec4\u4ef6\u548c\u670d\u52a1\uff0c\u5982 Activity Manager\u3001Package Manager\u3001Window Manager \u7b49\u3002</li> <li>tools\uff1a\u5305\u542b\u4e86 Android \u5f00\u53d1\u548c\u6784\u5efa\u5de5\u5177\u7684\u6e90\u4ee3\u7801\uff0c\u5982 ADB\u3001Android SDK \u5de5\u5177\u3001ProGuard \u7b49\u3002</li> </ol>"},{"location":"Android/27%20JNI%20%E5%92%8C.SO%E5%85%A5%E9%97%A8/","title":"27 JNI \u548c.SO\u5165\u95e8","text":""},{"location":"Android/27%20JNI%20%E5%92%8C.SO%E5%85%A5%E9%97%A8/#1android-jnic-native","title":"1.\u5728Android \u5de5\u7a0b\u4e2d\u901a\u8fc7JNI\u8c03\u7528C++ Native\u65b9\u6cd5","text":""},{"location":"Android/27%20JNI%20%E5%92%8C.SO%E5%85%A5%E9%97%A8/#_1","title":"\u9759\u6001\u6ce8\u518c","text":"<p>1.\u4e0b\u8f7dNDK \u548cCmake</p> <p></p> <p>2.Android Studio \u914d\u7f6eNDK</p> <p>\u5728local.properties\u6587\u4ef6\u4e2d\u914d\u7f6e</p> <pre><code>ndk.dir=  /Android/sdk/ndk/25.2.9519653 //ndk\u7684\u7edd\u5bf9\u8def\u5f84\n</code></pre> <p>3.\u5728\u6a21\u5757\u4e0b\u6dfb\u52a0C++  Moudle</p> <p></p> <p>4.\u914d\u7f6eCmakeLists.txt  </p> <pre><code>#\u521b\u5efa\u4e00\u4e2a\u5e93\nadd_library(\n        #\u8bbe\u7f6e\u5e93\u7684\u540d\u79f0\n        jniLib\n        #\u5c06\u5e93\u8bbe\u7f6e\u4e3a\u5171\u4eab\u5e93\n        SHARED\n        #\u6307\u5b9a\u6e90\u6587\u4ef6\n        hello.cpp\n)\n</code></pre> <p>5.\u521b\u5efaCpp\u6587\u4ef6 \u548c\u6307\u5b9a\u6e90\u6587\u4ef6\u4e2d\u540d\u79f0\u914d\u7f6e\u4e00\u81f4</p> <pre><code>#include &lt;jni.h&gt;\n/**\n * \u65b9\u6cd5\u540d : Java_\u5168\u7c7b\u540d_\u65b9\u6cd5\u540d\n * jniEnv : jni.h\u4e2d\u7684\u7ed3\u6784\u4f53\u7684\u4e8c\u7ea7\u6307\u9488,\u5728\u7f16\u8bd1\u65f6\u5176\u5b9a\u4e49\u7684\u53c2\u6570(\u51fd\u6570\u6307\u9488)\u88ab\u8d4b\u503c.\u53ef\u5728jni.h \u4e2d\u67e5\u770b\u5b9a\u4e49\u7684\u5168\u90e8\u51fd\u6570\u6307\u9488\n * jobject: native\u65b9\u6cd5\u4e3a\u975e\u9759\u6001\u65f6 \u65b9\u6cd5\u7684\u8c03\u7528\u8005\u5bf9\u8c61 ; \u5f53native\u65b9\u6cd5\u4e3a\u9759\u6001\u65f6, \u6b64\u53c2\u6570\u4e3a jclass,\u8868\u793a\u8c03\u7528\u8005\u7c7b\n * */\n\nextern \"C\" JNIEXPORT jstring JNICALL\nJava_com_example_androiddemo_nativeJava_NativeJavaMain_sayHello(JNIEnv *env, jobject thiz) {\n    char* text = \"i am from c\";\n    return (*env).NewStringUTF(text);\n}\n</code></pre> <p>6.\u6839\u636eJava_com_example_androiddemo_nativeJava_NativeJavaMain_sayHello\u521b\u5efa\u5168\u7c7b\u540d\u7684\u4f7f\u7528</p> <pre><code>package com.example.androiddemo.nativeJava;\n\npublic class NativeJavaMain {\n    {\n      //\u5e93\u540d\u79f0\u548cCmakelist\u7684\u4fdd\u6301\u4e00\u81f4\n        System.loadLibrary(\"jniLib\");\n    }\n    public native String sayHello();\n}\n</code></pre> <p>7.build.gradlew \u914d\u7f6e \u4e00\u822c\u4f1a\u81ea\u52a8\u751f\u6210</p> <pre><code> Android{\n   externalNativeBuild {\n        cmake {\n            path file('src/main/jni/CMakeLists.txt')\n            version '3.22.1'\n        }\n    }\n } \n</code></pre> <p>8.\u627e\u4e00\u4e2a\u5730\u65b9\u8c03\u7528sayHello</p> <pre><code>new NativeJavaMain().sayHello()\n</code></pre>"},{"location":"Android/27%20JNI%20%E5%92%8C.SO%E5%85%A5%E9%97%A8/#_2","title":"\u52a8\u6001\u6ce8\u518c","text":"<p>\u4e0e\u9759\u6001\u6ce8\u518c\u7684\u533a\u522b\u662f\uff1a\u4e0d\u7528\u53bb\u5199\u5168\u7c7b\u540d\u7684\u65b9\u6cd5\u540d\u6765\u8c03\u7528Native\u65b9\u6cd5\u3002</p> <p>\u901a\u8fc7\u63d0\u4f9b\u4e00\u4e2a\u51fd\u6570\u6620\u5c04\u8868\uff0c\u6ce8\u518c\u7ed9JVM\u865a\u62df\u673a\uff0c\u8fd9\u6837JVM\u5c31\u53ef\u4ee5\u7528\u51fd\u6570\u6620\u5c04\u8868\u6765\u8c03\u7528\u76f8\u5e94\u7684\u51fd\u6570\uff0c\u5c31\u4e0d\u5fc5\u901a\u8fc7\u51fd\u6570\u540d\u6765\u67e5\u627e\u9700\u8981\u8c03\u7528\u7684\u51fd\u6570\u3002</p> <p>\u51fd\u6570\u6620\u5c04\u8868\uff0cJNI.h\u4e2d\u5df2\u7ecf\u5b9a\u4e49\u597d\u4e86</p> <pre><code>typedef struct {\n    const char* name; // \u5bf9\u5e94\u4ea4\u4e92java \u7c7b\u5bf9\u5e94\u7684\u65b9\u6cd5\u540d\n    const char* signature;  //\u5bf9\u5e94\u4ea4\u4e92\u65b9\u6cd5\u7684\u51fd\u6570\u7b7e\u540d \uff08\u53c2\u8003\u672c\u65871.4.3\uff09\n    void*       fnPtr;  //\u5bf9\u5e94\u4ea4\u4e92cpp\u65b9\u6cd5\u7684 \u6307\u9488\u51fd\u6570 \uff08\u6307\u5411\u5bf9\u5e94\u51fd\u6570\uff09\n} JNINativeMethod;\n</code></pre> <p>\u5177\u4f53\u5b9e\u73b0\u6d41\u7a0b\uff1a</p> <p>1.\u521b\u5efa\u540eJava\u548cC++\u7684\u65b9\u6cd5\u6620\u5c04\u8868</p> <p>2.\u5c06\u6620\u5c04\u8868\u901a\u8fc7RegisterNatives\u6ce8\u518c\u7ed9JVM</p> <p>3.Java\u5728System.loadLibrary\u52a0\u8f7dJNI\u5e93\u65f6\uff0c\u4f1a\u5728\u5e93\u4e2d\u67e5JNI_OnLoad\u51fd\u6570</p> <p>4.\u901a\u8fc7findClass\u627e\u5230\u76f8\u5e94\u7684\u7c7b\uff0c\u901a\u8fc7\u6620\u5c04\u8868\u627e\u5230\u76f8\u5e94\u7684\u65b9\u6cd5\u3002</p> <p>1.\u521b\u5efaJava\u65b9\u6cd5\u548cC++\u65b9\u6cd5</p> <pre><code>public class NativeJavaMain {\n    {\n        System.loadLibrary(\"jniLib\");\n    }\n    public native String sayHello();\n\n    public native String sayHelloByDynamic();//\u65b0\u589e\n}\n//C++\njstring  sayHelloByDynamic(JNIEnv *env, jobject clazz){\n    string hello = \"hello, I am from \u52a8\u6001\u6ce8\u518c\";\n    return env-&gt;NewStringUTF(hello.c_str());\n}\n</code></pre> <p>2.\u521b\u5efa\u6620\u5c04\u8868</p> <pre><code>static const JNINativeMethod getMethods[] = {{\n    \"sayHelloByDynamic\", //\u5bf9\u5e94java\u4ea4\u4e92\u7c7b\u7684\u65b9\u6cd5\u540d\n    \"()Ljava/lang/String;\", //\u5bf9\u5e94\u65b9\u6cd5\u540d\u7684\u51fd\u6570\u7b7e\u540d\n    (jstring *) sayHelloByDynamic\n}};\n</code></pre> <p>3.\u5b9e\u73b0JNI_OnLoad()\u65b9\u6cd5</p> <pre><code>JNIEXPORT jint JNI_OnLoad(JavaVM *vm,void *reserved){\n    JNIEnv *env = NULL;\n     if(vm-&gt;GetEnv((void **)&amp;env,JNI_VERSION_1_4) != JNI_OK)\n         return -1;\n     jclass clazz = env-&gt;FindClass(\"com/example/androiddemo/nativeJava/NativeJavaMain\");\n     if(!clazz){\n         return -1;\n     }\n    if(env-&gt;RegisterNatives(clazz,getMethods,sizeof(getMethods)/sizeof(getMethods[0]))){\n        return -1;\n    }\n    return JNI_VERSION_1_4;\n}\n</code></pre> <p>4.\u8c03\u7528Java native\u65b9\u6cd5</p> <pre><code>new NativeJavaMain().sayHelloByDynamic()\n</code></pre> <p></p>"},{"location":"Android/27%20JNI%20%E5%92%8C.SO%E5%85%A5%E9%97%A8/#android-studio-native","title":"Android Studio \u8c03\u8bd5Native\u4ee3\u7801","text":"<p>\u5f53\u524dAndroid Studio \u65b0\u7248\u672c\u5df2\u7ecf\u4e3b\u52a8\u9ed8\u8ba4\u6709LLDB,\u4e0d\u9700\u8981\u5b89\u88c5\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u4fee\u6539Edit Configuration\u5373\u53ef</p> <p></p> <p>\u82e5\u6ca1\u6709Debugger\u9009\u9879\uff0c\u8bf7\u5728Pluggin \u4e2d\u5f00\u542f<code>Android NDK Support</code></p> <p></p>"},{"location":"Android/28%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%96%B9%E6%A1%88%E5%A4%84%E7%90%86/","title":"29 \u5185\u5b58\u6cc4\u6f0f\u65b9\u6848\u5904\u7406","text":""},{"location":"Android/28%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%96%B9%E6%A1%88%E5%A4%84%E7%90%86/#_1","title":"\u5185\u5b58\u6cc4\u6f0f\u67e5\u627e\u5de5\u5177","text":""},{"location":"Android/28%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%96%B9%E6%A1%88%E5%A4%84%E7%90%86/#1profiler","title":"1.Profiler","text":"<p>Android Studio \u63d0\u4f9b\u7684\u68c0\u67e5\u5185\u5b58\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u9884\u6d4b\u54ea\u4e2a\u7c7b\u53d1\u751f\u4e86\u5185\u5b58\u6cc4\u6f0f\u3002</p> <p>\u4e3b\u8981\u4f18\u52bf\uff1a</p> <p>1.\u53ef\u4ee5\u67e5\u770b\u5185\u5b58\u5206\u914d</p> <p>2.capture heap dump </p> <p>\u53ef\u4ee5\u901a\u8fc7 <code>android_sdk/platform-tools/</code> \u76ee\u5f55\u4e2d\u63d0\u4f9b\u7684 <code>hprof-conv</code> \u5de5\u5177\u5c06 HPROF \u6587\u4ef6\u4ece Android \u683c\u5f0f\u8f6c\u6362\u4e3a Java SE HPROF \u683c\u5f0f</p> <p>hprof-conv heap-original.hprof heap-converted.hprof</p> <p>3.\u5206\u6790\u5185\u5b58\u5206\u914d\uff1a\u4e3b\u8981\u662f\u9488\u5bf9Activity\u548cFragment</p> <p>\u52a3\u52bf\uff1a</p> <p>\u53ea\u80fd\u9488\u5bf9debug\u6a21\u5f0f\u7684Apk\uff0c\u5e76\u5728\u5206\u6790\u548c\u83b7\u53d6\u65f6\u5360\u7528\u66f4\u591a\u7684\u5185\u5b58\u3002</p> <p>\u65e0\u6cd5\u67e5\u627e\u5185\u5b58\u6cc4\u6f0f\u94fe\u3002</p>"},{"location":"Android/28%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%96%B9%E6%A1%88%E5%A4%84%E7%90%86/#2leakcanary","title":"2.LeakCanary","text":"<p>\u5206\u6790\u5185\u5b58\u7684\u5904\u7406\u6d41\u7a0b\uff1a</p> <p>1.capture heap dump </p> <p>2.\u7136\u540e\u5206\u6790.hprof\u6587\u4ef6\uff0c\u627e\u5230\u5185\u5b58\u6cc4\u6f0f\u548cGC.root\u7684\u5f15\u7528\u94fe</p>"},{"location":"Android/28%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%96%B9%E6%A1%88%E5%A4%84%E7%90%86/#android-leakcannary","title":"\u5728Android \u624b\u673a\u4e0a\u4f7f\u7528LeakCannary","text":"<p>\u5728\u5bf9\u5e94\u6a21\u5757build.gradle\u6dfb\u52a0</p> <pre><code>dependencies {\n  // debugImplementation because LeakCanary should only run in debug builds.\n  debugImplementation 'com.squareup.leakcanary:leakcanary-android:2.12'\n}\n</code></pre> <p>\u6253debug\u540e\uff0c\u5b89\u88c5\u5728\u624b\u673a\u4e0a\uff0c\u4f1a\u6709\u4e00\u4e2aLeak\u7684App\u8fdb\u884c\u68c0\u6d4b\u3002</p> <ul> <li>\u53ef\u4ee5\u662f\u5728\u4f60\u5237App\u7684\u65f6\u5019\uff0cLeak\u81ea\u52a8\u6536\u96c6\u5185\u5b58\u6cc4\u6f0f</li> <li>\u6216\u8005Dump Heap Now\uff0c\u63a5\u7740\u4f1a\u5206\u6790\u5185\u5b58\u5feb\u7167\u4e2d\u7684\u5185\u5b58\u6cc4\u6f0f</li> </ul>"},{"location":"Android/28%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%96%B9%E6%A1%88%E5%A4%84%E7%90%86/#pcshark","title":"PC\u4e0a\u76f4\u63a5\u5206\u6790\u5185\u5b58\u6cc4\u6f0f\u2014\u2014Shark","text":"<p>\u4f7f\u7528Shark-Cli\u6765\u5206\u6790\u5f53\u524d\u624b\u673a\u4e0aApp\u8fdb\u7a0b\u7684\u5185\u5b58\u6cc4\u6f0f</p> <p>Analyze the heap of debuggable apps installed on an Android device connected to your desktop. The output is similar to the output of LeakCanary, except you don\u2019t have to add the LeakCanary dependency to your app.</p> <pre><code>shark-cli --device \u8bbe\u5907id --process \u5305\u540d analyze\nshark-cli -d \u8bbe\u5907id -p \u5305\u540d -m \u6df7\u6dc6\u6587\u4ef6 analyze\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5bfc\u51fa\u5185\u5b58\u5feb\u7167capture heap dump \uff0c\u7136\u540e\u5206\u6790\u5176\u4e2d\u7684.hprof</p> <pre><code>#adb \u5bfc\u51fa\u5185\u5b58\u5feb\u7167\nadb shell am dumpheap \u5305\u540d /data/local/tmp/test_demo.hprof\n#adb \u5c06\u5feb\u7167\u5bfc\u5230PC\nadb pull /data/local/tmp/test_demo.hprof /Users/zhangqian20/Desktop/hropfFile\n</code></pre> <p>\u4f7f\u7528Shark-Cli\u5206\u6790 hropf\u6587\u4ef6</p> <pre><code>./shark-cli.sh -h /Users/zhangqian20/Desktop/hropfFile/test_demo.hprof  analyze\n</code></pre> <pre><code>$ shark-cli\n\nOptions:\n  -p, --process TEXT              Full or partial name of a process, e.g.\n                                  \"example\" would match \"com.example.app\"\n  -d, --device ID                 device/emulator id\n  -m, --obfuscation-mapping PATH  path to obfuscation mapping file\n  --verbose / --no-verbose        provide additional details as to what\n                                  shark-cli is doing\n  -h, --hprof FILE                path to a .hprof file\n  --help                          Show this message and exit\n\nCommands:\n  interactive   Explore a heap dump.\n  analyze       Analyze a heap dump.\n  dump-process  Dump the heap and pull the hprof file.\n  strip-hprof   Replace all primitive arrays from the provided heap dump with\n                arrays of zeroes and generate a new \"-stripped.hprof\" file.\n</code></pre>"},{"location":"Android/28%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%96%B9%E6%A1%88%E5%A4%84%E7%90%86/#3mat","title":"3.MAT","text":""},{"location":"Android/28%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%96%B9%E6%A1%88%E5%A4%84%E7%90%86/#leakcanary","title":"LeakCanary \u5206\u6790\u5185\u5b58\u6cc4\u6f0f\u539f\u7406","text":"<p>https://juejin.cn/post/6936452012058312740</p> <p>\u4e3b\u8981\u662f\u76d1\u89c6\u6240\u6709\u7684Activity\u548cFragment\u7684onDestory(),\u5c06\u5176\u653e\u5728\u5f31\u5f15\u7528\u4e2d\uff0c\u82e5\u5176\u88abGC\u56de\u6536\uff0c\u5219\u5f31\u5f15\u7528\u5bf9\u8c61\u4f1a\u653e\u5728\u6307\u5b9a\u7684queue\u4e2d\uff0c\u82e5queue.poll()\u662f\u5f31\u5f15\u7528\u5bf9\u8c61\uff0c\u5219\u8ba4\u4e3a\u88ab\u56de\u6536\u4e86\uff0c\u82e5\u662fnull\uff0c\u5219\u6ca1\u6709\u88ab\u56de\u6536\uff0c\u8ba4\u4e3a\u4ea7\u751f\u4e86\u5185\u5b58\u6cc4\u6f0f\u3002</p> <p>\u5224\u65ad\u662f\u5426\u5b58\u5728\u5185\u5b58\u6cc4\u6f0f\u7684\u65b9\u6848\uff1a</p> <pre><code>//obj \u5f3a\u5f15\u7528\u5bf9\u8c61\nObject obj=new Object();\nReferenceQueue queue = new ReferenceQueue();\n//\u4f7f\u7528\u5f31\u5f15\u7528\u5c01\u88c5 \u5e76\u6307\u5b9a\u5f15\u7528 queue\nWeakReference&lt;Object&gt; objectWeakReference = new WeakReference&lt;&gt;(obj,queue);\n//\u65ad\u5f00Gc Roots\u94fe\nobj = null;\nRuntime.getRuntime().gc();\nSystem.runFinalization();\nLog.e(\"test\", \"onCreate: queue----\"+queue.poll());\n</code></pre> <p>\u5de5\u7a0b\u4e2d\u4f7f\u7528:</p> <p>res/build.gradle \u4e0b\u589e\u52a0 implementation 'com.squareup.leakcanary:leakcanary-android:2.12' implementation 'com.squareup.curtains:curtains:1.2.4' implementation 'com.squareup.leakcanary:leakcanary-object-watcher-android:2.12' implementation 'com.squareup.leakcanary:plumber-android:2.12' implementation 'com.squareup.leakcanary:leakcanary-android-core:2.12'</p>"},{"location":"Android/29%20Room%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"29 Room\u6570\u636e\u5e93\u7684\u4f7f\u7528","text":"<p>Android Room\u4f7f\u7528\u5b98\u7f51</p>"},{"location":"Android/29%20Room%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#1room","title":"1.Room\u6570\u636e\u5e93\u4f7f\u7528\u57fa\u672c\u6982\u5ff5","text":""},{"location":"Android/29%20Room%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#_1","title":"\u4e3b\u8981\u7ec4\u4ef6","text":"<ul> <li>\u6570\u636e\u5e93\u7c7b \uff1a\u7528\u4e8e\u4fdd\u5b58\u6570\u636e\u5e93\u5e76\u4f5c\u4e3a\u5e94\u7528\u6301\u4e45\u6027\u6570\u636e\u5e95\u5c42\u8fde\u63a5\u7684\u4e3b\u8981\u8bbf\u95ee\u70b9\u3002</li> </ul> <p><code>kotlin   @Database(entities = [User::class], version = 1)   abstract class AppDatabase : RoomDatabase() {       abstract fun userDao(): UserDao   }</code></p> <ul> <li>\u6570\u636e\u5b9e\u4f53 \uff1a \u7528\u4e8e\u8868\u793a\u5e94\u7528\u7684\u6570\u636e\u5e93\u4e2d\u7684\u8868</li> </ul> <p><code>kotlin   @Entity   data class User(       @PrimaryKey val uid: Int,       @ColumnInfo(name = \"first_name\") val firstName: String?,       @ColumnInfo(name = \"last_name\") val lastName: String?   )</code></p> <ul> <li>\u6570\u636e\u8bbf\u95ee\u5bf9\u8c61\uff1a \u63d0\u4f9b\u60a8\u7684\u5e94\u7528\u53ef\u7528\u4e8e\u67e5\u8be2\u3001\u66f4\u65b0\u3001\u63d2\u5165\u548c\u5220\u9664\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u7684\u65b9\u6cd5\u3002</li> </ul> <p>```kotlin   @Dao   interface UserDao {       @Query(\"SELECT * FROM user\")       fun getAll(): List <pre><code>  @Query(\"SELECT * FROM user WHERE uid IN (:userIds)\")\n  fun loadAllByIds(userIds: IntArray): List&lt;User&gt;\n\n  @Query(\"SELECT * FROM user WHERE first_name LIKE :first AND \" +\n         \"last_name LIKE :last LIMIT 1\")\n  fun findByName(first: String, last: String): User\n\n  @Insert\n  fun insertAll(vararg users: User)\n\n  @Delete\n  fun delete(user: User)\n</code></pre> <p>}   ```</p> <p>\u200b       \u6b63\u5e38\u7684\u4f7f\u7528\u96be\u70b9\u5728\u4e8e\u6570\u636e\u8bbf\u95ee\u5bf9\u8c61\uff0c@Query\u53ef\u4ee5\u901a\u8fc7sql\u8bed\u53e5\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u67e5\u8be2\u529f\u80fd\u3002</p> <p>\u5177\u4f53\u4f7f\u7528\uff1a</p> <pre><code>val db = Room.databaseBuilder(\n            applicationContext,\n            AppDatabase::class.java, \"database-name\"\n        ).build()\nval userDao = db.userDao()\nval users: List&lt;User&gt; = userDao.getAll()\n</code></pre> <p>\u6ce8\u610f\uff1a</p> <p>1.\u5728\u4f7f\u7528kotlin\u65f6\uff0c\u9700\u8981\u4f7f\u7528kapt\u5f15\u7528room-compiler\u3002</p> <pre><code>val room_version = \"2.5.0\"\n  implementation(\"androidx.room:room-runtime:$room_version\")\n   // To use Kotlin annotation processing tool (kapt)\n  kapt(\"androidx.room:room-compiler:$room_version\")\n</code></pre> <p>\u540c\u65f6\u53ef\u80fd\u4f7f\u5176\u4ed6\u4f7f\u7528 annotationProcessor \u5f15\u7528\u7684\u4f9d\u8d56\u4e0d\u80fd\u4f7f\u7528\uff0c\u6bd4\u5982router,\u53ef\u4ee5\u5c06\u5176\u4e5f\u6362\u4e3akapt\u5f15\u5165\u3002</p>"},{"location":"Android/29%20Room%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#2room","title":"2.Room\u6570\u636e\u5e93\u5347\u7ea7","text":"<p>Room\u6570\u636e\u5e93\u5347\u7ea7\u9700\u8981\u4f7f\u7528\u5230Migration\u3002</p> <pre><code>static final Migration MIGRATION_1_2 = new Migration(1, 2) {\n    @Override\n    public void migrate(SupportSQLiteDatabase database) {\n        // \u56e0\u4e3a\u6ca1\u6709\u53d8\u5316\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u7a7a\u5b9e\u73b0\n        //\u5982\u679c\u6709\u53d8\u5316\uff0c\u9700\u8981\u6dfb\u52a0\u6539\u53d8\u6570\u636e\u5e93\u7ed3\u6784\u7684Sql\u8bed\u53e5\n    }\n};\n//\u6dfb\u52a0\u5230\u6570\u636e\u5e93\u4e2d\nval db = Room.databaseBuilder(\n            applicationContext,\n            AppDatabase::class.java, \"database-name\"\n        ).addMigrations(MIGRATION_1_2)\n            .build()\n</code></pre> <p>\u6ce8\u610f\uff1a</p> <p>1.\u5f53\u4ece0\u5347\u7ea7\u52301\u7684\u65f6\u5019\uff0c\u56e0\u4e3a\u672c\u5730\u662f\u6ca1\u6709\u65e7\u6570\u636e\u5e93\u7684\uff0c\u56e0\u6b64\u4ece0\u52301\u65f6addMigrations()\u4e0d\u8d77\u4f5c\u7528\u3002</p> <p>2.\u6bcf\u6b21\u53d1\u751f\u6539\u53d8\u9700\u8981\u8fdb\u884c\u6570\u636e\u5e93\u5347\u7ea7\uff0c\u5426\u5219\u4f1a\u62a5\u4ee5\u4e0b\u7c7b\u4f3cCrash</p> <pre><code>java.lang.IllegalStateException: Room cannot verify the data integrity. Looks like you've changed schema but forgot to update the version number. You can simply fix this by increasing the version number.\n</code></pre> <p>3.\u5347\u7ea7\u65f6Migration\u9700\u8981\u586b\u5199\u6b63\u786e\uff0c\u5426\u5219\u4f1a\u62a5\u7c7b\u4f3c\u4ee5\u4e0bCrash</p> <pre><code> java.lang.IllegalStateException: Migration didn't properly handle: testNewTable(com.example.demopractice.room.testNewTable).\n</code></pre> <p>4.\u4ece2.4.0\u4e4b\u540e\u63d0\u4f9b\u4e86\u81ea\u52a8\u8fc1\u79fb,\u4e3b\u8981\u4e3a\u4ee5\u4e0b\u63d0\u4f9b\u4e86\u89c4\u8303</p> <ul> <li>\u5220\u9664\u6216\u91cd\u547d\u540d\u8868\u3002</li> <li>\u5220\u9664\u6216\u91cd\u547d\u540d\u5217\u3002</li> </ul>"},{"location":"Android/29%20Room%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#3sqliteroom","title":"3.\u4eceSqlite\u8fc1\u79fb\u5230Room\u6570\u636e\u5e93","text":"<p>1.\u6211\u91c7\u7528\u7684\u65b9\u5f0f\u662f\u5728sqlite\u5347\u7ea7\u7684\u65f6\u5019\uff0c\u5c06\u6570\u636e\u8fc1\u79fb\u5230Room\u6570\u636e\u5e93\u3002</p> <p>\"sinaweibo://qa/detail?object_id=1022:2310684917667189620819&amp;cip=61.135.152.143&amp;ua=OPPO-PEEM00__weibo__13.6.1__android__android12\"</p> <p>sinaweibo://qa/detail?object_id=1022:2310684917667189620819&amp;cip=61.135.152.143&amp;ua=OPPO-PEEM00__weibo__13.6.1__android__android12</p>"},{"location":"Android/29%20Room%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#sqlite","title":"SQLite\u77e5\u8bc6\u70b9\u603b\u7ed3","text":""},{"location":"Android/29%20Room%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#enablewriteaheadlogging","title":"enableWriteAheadLogging","text":"<p>\u5e76\u884c\u8bfb\u5199\u5f00\u5173\uff0c\u5f00\u542f\u4ee5\u540e\u8c03\u7528\u4e8b\u52a1\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528beginTransactionNonExclusive()</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/","title":"Android \u5927\u7eb2","text":"<p>\u8fd9\u662f\u6211\u7ed3\u5408\u535a\u5ba2\u548c\u300a\u75af\u72c2\u7684Android\u8bb2\u4e49\u300b\u6240\u505a\u7684\u5b66\u4e60\u7b14\u8bb0\uff0c\u5927\u5bb6\u53ef\u4ee5\u505a\u4e2a\u8d44\u6599\u67e5\u8be2\uff0c\u8fd9\u91cc\u9762\u53ea\u662f\u666e\u8bc6\u6027\u7684\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\u4f1a\u5728\u522b\u7684\u7b14\u8bb0\u4e2d\uff0c\u505a\u8be6\u7ec6\u7684\u5b66\u4e60\u3002</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#_1","title":"\u56db\u5927\u7ec4\u4ef6","text":""},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#1activity","title":"1\u3001Activity","text":"<ul> <li> <p>\u4e00\u4e2aActivity\u901a\u5e38\u5c31\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u5c4f\u5e55\uff08\u7a97\u53e3\uff09\u3002</p> </li> <li> <p>Activity\u4e4b\u95f4\u901a\u8fc7Intent\u8fdb\u884c\u901a\u4fe1\u3002</p> </li> <li> <p>android\u5e94\u7528\u4e2d\u6bcf\u4e00\u4e2aActivity\u90fd\u5fc5\u987b\u8981\u5728AndroidManifest.xml\u914d\u7f6e\u6587\u4ef6\u4e2d\u58f0\u660e\uff0c\u5426\u5219\u7cfb\u7edf\u5c06\u4e0d\u8bc6\u522b\u4e5f\u4e0d\u6267\u884c\u8be5Activity\u3002</p> </li> <li> <p>\u751f\u547d\u5468\u671f</p> </li> </ul> <p></p> <ul> <li> <p>OnCreate()</p> <p>\u5728\u7b2c\u4e00\u6b21\u521b\u5efa\u6d3b\u52a8\u65f6\u8c03\u7528 \u8fd9\u662f\u4f60\u5e94\u8be5\u5b8c\u6210\u6240\u6709\u5e38\u89c4\u9759\u6001\u8bbe\u7f6e\u7684\u4f4d\u7f6e\uff1a\u521b\u5efa\u89c6\u56fe\uff0c\u5c06\u6570\u636e\u7ed1\u5b9a\u5230\u5217\u8868\u7b49\u3002\u6b64\u65b9\u6cd5\u8fd8\u4f1a\u4e3a\u4f60\u63d0\u4f9b\u4e00\u4e2a\u5305\u542bActivity\u5148\u524d\u4fdd\u5b58\u9875\u9762\u72b6\u6001\u7684Bundle\u5bf9\u8c61\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\uff0c\u540e\u9762\u603b\u662f\u8ddf\u7740onStart\uff08\uff09\u65b9\u6cd5\u3002</p> </li> <li> <p>onStart()</p> <p>\u5f53Activity\u5bf9\u7528\u6237\u53d8\u5f97\u53ef\u89c1\u7684\u65f6\u5019\u8c03\u7528\u3002\u5982\u679c\u6d3b\u52a8\u8fdb\u5165\u524d\u53f0\uff0c\u5219\u8ddf\u968f\u6267\u884conResume\uff08\uff09\u65b9\u6cd5\uff0c\u5982\u679c\u9690\u85cf\uff0c\u5219\u6267\u884conStop\uff08\uff09\u3002 \u6b64\u65f6\uff0cActivity\u5b9e\u9645\u4e0a\u5c31\u5df2\u7ecf\u53ef\u89c1\u4e86\uff0c\u4f46\u662f\u8fd8\u6ca1\u6709\u51fa\u73b0\u5728\u524d\u53f0\uff0c\u65e0\u6cd5\u548c\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\u3002</p> </li> <li> <p>onResume()</p> <p>\u6b64\u65f6\uff0cActivity\u5df2\u7ecf\u53ef\u89c1\uff0c\u5e76\u4e14\u51fa\u73b0\u5728\u524d\u53f0\u5e76\u5f00\u59cb\u6d3b\u52a8\u3002</p> </li> <li> <p>onPause()</p> <p>\u8be5\u65b9\u6cd5\u540e\u5904\u4e8e\u540e\u53f0\u8fd0\u884c\uff0c\u53ef\u4ee5\u5bf9\u672a\u4fdd\u5b58\u7684\u6570\u636e\u8fdb\u884c\u4fdd\u5b58\uff0c\u505c\u6b62\u6d88\u8017\u8d44\u6e90\u7684\u884c\u4e3a\uff0c\u5bf9\u7528\u6237\u90e8\u5206\u53ef\u89c1\u3002</p> <p>onPause()\u65b9\u6cd5\u5728\u7cfb\u7edf\u5373\u5c06\u5f00\u59cb\u663e\u793a\u4e4b\u524d\u7684\u754c\u9762\u65f6\u8c03\u7528\u3002 \u8fd9\u901a\u5e38\u7528\u4e8e\u5c06\u672a\u4fdd\u5b58\u7684\u66f4\u6539\u8fdb\u884c\u4fdd\u5b58\uff0c\u5e76\u4fdd\u5b58\u4e3a\u6301\u4e45\u5316\u6570\u636e\uff0c\u5e76\u4e14\u4f1a\u6267\u884c\u4f8b\u5982\u505c\u6b62\u52a8\u753b\u548c\u5176\u4ed6\u53ef\u80fd\u6d88\u8017CPU\u7684\u5185\u5bb9\u7b49\u3002\u6b64\u65b9\u6cd5\u7684\u5b9e\u73b0\u5fc5\u987b\u975e\u5e38\u5feb\u901f\uff0c\u56e0\u4e3a\u5728\u6b64\u65b9\u6cd5\u8fd4\u56de\u4e4b\u524d\uff0c\u4e0b\u4e00\u4e2a\u754c\u9762\u4e0d\u4f1a\u663e\u793a\u3002 \u5982\u679c\u754c\u9762\u8fd4\u56de\u5230\u524d\u53f0\uff0c\u5219\u8ddf\u968fonResume\uff08\uff09;\u5982\u679c\u5bf9\u7528\u6237\u4e0d\u53ef\u89c1\uff0c\u5219\u4f7f\u7528onStop\uff08\uff09\u3002</p> </li> <li> <p>onStop()</p> <p>onStop()\u65b9\u6cd5\u4f1a\u5728\u5f53\u754c\u9762\u5bf9\u7528\u6237\u4e0d\u518d\u53ef\u89c1\u65f6\u8c03\u7528\uff0c\u56e0\u4e3a\u53e6\u4e00\u9879\u754c\u9762\u6b63\u5728\u663e\u793a\u5e76\u8981\u53bb\u8986\u76d6\u8fd9\u4e2a\u754c\u9762\u3002 \u8fd9\u53ef\u80fd\u662f\u56e0\u4e3a\u4e00\u9879\u65b0\u7684\u754c\u9762\u6b63\u5728\u5f00\u59cb\uff0c\u5176\u4ed6\u7684\u754c\u9762\u4f1a\u88ab\u663e\u793a\u4e3a\u524d\u53f0\u754c\u9762\uff0c\u6216\u8005\u8fd9\u4e2a\u754c\u9762\u6b63\u5728\u88ab\u6467\u6bc1\u3002\u5982\u679c\u8fd9\u4e2a\u754c\u9762\u5feb\u901f\u7684\u56de\u663e\u4e0e\u7528\u6237\u4ea4\u4e92\u7d27\u63a5\u7740onRestart\uff08\uff09\u4f1a\u88ab\u6267\u884c\uff0c\u5426\u5219\uff0c\u8fd9\u4e2a\u754c\u9762\u4f1a\u8c03\u7528\u9500\u6bc1onDestroy\uff08\uff09\u65b9\u6cd5\u4f1a\u88ab\u6267\u884c\u3002</p> </li> <li> <p>onDestory()</p> <p>\u5728\u4f60\u7684\u754c\u9762\u88ab\u9500\u6bc1\u524d\u6700\u540e\u8c03\u7528\u7684\u65b9\u6cd5\u3002 \u8fd9\u53ef\u80fd\u662f\u56e0\u4e3a\u754c\u9762\u6b63\u5728\u7ed3\u675f\uff08\u6709\u4eba\u5728\u5176\u4e2d\u8c03\u7528finish\uff08\uff09\u65b9\u6cd5\u56e0\u4e3a\u7cfb\u7edf\u4f1a\u6682\u65f6\u9500\u6bc1\u6b64Activity\u754c\u9762\u7684\u5b9e\u4f8b\u4ee5\u8282\u7701\u7a7a\u95f4\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528isFinishing\uff08\uff09\u65b9\u6cd5\u533a\u5206\u5185\u5b58\u7a7a\u95f4\u662f\u5426\u8282\u7701\u8d44\u6e90\u7684\u8fd9\u4e24\u79cd\u60c5\u51b5\uff09\u3002</p> </li> <li> <p>onRestart()</p> <p>\u5728\u4f60\u7684\u754c\u9762\u505c\u6b62\u540e\u8c03\u7528\uff0c\u7136\u540e\u518d\u6b21\u542f\u52a8\u3002 \u540e\u9762\u603b\u662f\u8ddf\u7740onStart\uff08\uff09</p> <p>onCreat\u548conDestroy \u5206\u522b\u8868\u793aActivity\u7684\u521b\u5efa\u548c\u9500\u6bc1,\u53ea\u4f1a\u8c03\u7528\u4e00\u6b21. onStart\u548conStop \u8868\u793aActivity\u662f\u5426\u53ef\u89c1,\u6b64\u65f6\u662f\u540e\u53f0\u53ef\u89c1;\u53ef\u4ee5\u8c03\u7528\u5f88\u591a\u6b21,\u968f\u7740\u7528\u6237\u64cd\u63a7\u5c4f\u5e55\u70b9\u4eae\u7184\u706d\u4f1a\u88ab\u8c03\u7528; onResume \u548conPause \u8868\u793aActivity\u662f\u5426\u4f4d\u4e8e\u524d\u53f0 \u53ef\u4ee5\u8c03\u7528\u5f88\u591a\u6b21</p> <p>\u6ce8\u610f\uff1a\u6a2a\u5c4f\u548c\u7ad6\u5c4f\u5207\u6362\u65f6\u4f1a\u5148\u9500\u6bc1\u518d\u91cd\u5efa</p> </li> <li> <p>OnSaveInstanceState() \u65b9\u6cd5\u662f\u4e3a\u4e86\u5f53\u7528\u6237\u6682\u65f6\u4ece\u60a8\u7684\u5e94\u7528\u5207\u6362\u5230\u5176\u4ed6\u5e94\u7528\uff0c\u5e76\u5728\u7a0d\u540e\u8fd4\u56de\u60a8\u7684\u5e94\u7528\uff0c\u4ed6\u4eec\u5e0c\u671b\u754c\u9762\u72b6\u6001\u4fdd\u6301\u4e0d\u53d8\u3002\u5f53Activity\u56e0\u7cfb\u7edf\u9650\u5236\u800c\u88ab\u9500\u6bc1\u65f6\uff0c\u8be5\u65b9\u6cd5\u548cViewModel()\u65b9\u6cd5\u6765\u4fdd\u7559\u7528\u6237\u7684\u77ac\u65f6\u754c\u9762\u72b6\u6001\u3002</p> </li> <li> <p>\u542f\u52a8\u6a21\u5f0f</p> </li> <li> <p>standard:\u6807\u51c6\u6a21\u5f0f</p> <ul> <li>\u4f1a\u521b\u5efa\u65b0\u7684Activity\u5b9e\u4f8b\uff0c\u5e76\u5c06\u8be5\u5b9e\u4f8b\u6dfb\u52a0\u5230\u5f53\u524dTask\u5185\u3002</li> </ul> </li> <li>singleTop:Task\u6808\u9876\u5355\u4f8b\u6a21\u5f0f<ul> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u5b9e\u4f8b\uff0c\u5df2\u7ecf\u4f4d\u4e8e\u6808\u9876\uff0c\u5c06\u4e0d\u4f1a\u521b\u5efa</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u5b9e\u4f8b\uff0c\u6ca1\u6709\u4f4d\u4e8e\u6808\u9876\uff0c\u5c06\u4f1a\u521b\u5efa\u65b0\u7684\u5b9e\u4f8b\uff0c\u5e76\u628a\u5b83\u52a0\u8f7d\u5230\u6808\u9876</li> </ul> </li> <li>singleTask:Task\u5185\u5355\u4f8b\u6a21\u5f0f<ul> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u5728\u65b0\u7684Task\u4e2d\u521b\u5efa\u65b0\u7684Activity\u5b9e\u4f8b\uff0c\u5e76\u5c06\u5b83\u653e\u5165\u6808\u9876</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u5b58\u5728\u4e14\u5728\u6808\u9876\uff0c\u5219\u4e0d\u4f1a\u521b\u5efa</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u5b58\u5728\u4e14\u4e0d\u5728\u6808\u9876\uff0c\u5219\u4f1a\u5c06\u4e4b\u4e0a\u7684Activity\u6e05\u9664\uff0c\u4f7f\u5176\u4f4d\u4e8e\u6808\u9876</li> </ul> </li> <li> <p>singleInstance\uff1a\u5168\u5c40\u5355\u4f8b\u6a21\u5f0f</p> <ul> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u5728\u65b0\u7684Task\u521b\u5efa\u65b0\u7684Activity\u5b9e\u4f8b\uff0c\u5e76\u5c06\u5b83\u653e\u5165\u6808\u9876</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u5b58\u5728\uff0c\u5219\u4f1a\u76f4\u63a5\u628aActivity\u8f6c\u5230\u6808\u9876\uff0c\u4e14\u8be5Task\u53ea\u4f1a\u6709\u8fd9\u4e2aActivity\u3002</li> </ul> </li> <li> <p>Activity \u5c5e\u6027</p> </li> <li> <p>WindowSoftInputMode \uff1a\u8f6f\u952e\u76d8\u7684\u8f93\u5165</p> <ul> <li>\u4e24\u7c7b\u5c5e\u6027</li> </ul> \u7c7b\u578b Value\u503c \u542b\u4e49 \u663e\u793a\u4e0e\u9690\u85cf stateUnspecified \u8f6f\u952e\u76d8\u7684\u72b6\u6001\u5e76\u6ca1\u6709\u6307\u5b9a\uff0c\u7cfb\u7edf\u5c06\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684\u72b6\u6001\u6216\u4f9d\u8d56\u4e8e\u4e3b\u9898\u7684\u8bbe\u7f6e stateUnchanged \u5f53\u8fd9\u4e2aactivity\u51fa\u73b0\u65f6\uff0c\u8f6f\u952e\u76d8\u5c06\u4e00\u76f4\u4fdd\u6301\u5728\u4e0a\u4e00\u4e2aactivity\u91cc\u7684\u72b6\u6001\uff0c\u65e0\u8bba\u662f\u9690\u85cf\u8fd8\u662f\u663e\u793a stateHidden \u7528\u6237\u9009\u62e9activity\u65f6\uff0c\u8f6f\u952e\u76d8\u603b\u662f\u88ab\u9690\u85cf stateAlwaysHidden \u5f53\u8be5Activity\u4e3b\u7a97\u53e3\u83b7\u53d6\u7126\u70b9\u65f6\uff0c\u8f6f\u952e\u76d8\u4e5f\u603b\u662f\u88ab\u9690\u85cf\u7684 stateVisible \u8f6f\u952e\u76d8\u901a\u5e38\u662f\u53ef\u89c1\u7684 \u8c03\u6574\u5c4f\u5e55 adjustUnspecified \u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u901a\u5e38\u7531\u7cfb\u7edf\u81ea\u884c\u51b3\u5b9a\u662f\u9690\u85cf\u8fd8\u662f\u663e\u793a adjustResize \u8be5Activity\u603b\u662f\u8c03\u6574\u5c4f\u5e55\u7684\u5927\u5c0f\u4ee5\u4fbf\u7559\u51fa\u8f6f\u952e\u76d8\u7684\u7a7a\u95f4 adjustPan \u5f53\u524d\u7a97\u53e3\u7684\u5185\u5bb9\u5c06\u81ea\u52a8\u79fb\u52a8\u4ee5\u4fbf\u5f53\u524d\u7126\u70b9\u4ece\u4e0d\u88ab\u952e\u76d8\u8986\u76d6\u548c\u7528\u6237\u80fd\u603b\u662f\u770b\u5230\u8f93\u5165\u5185\u5bb9\u7684\u90e8\u5206 </li> <li> <p>configChanges</p> <p>\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u63a5\u53d7\u4e00\u7cfb\u5217\u7684\u914d\u7f6e\u503c\uff0c\u7528\u6765\u544a\u8bc9\u7cfb\u7edf\u5728\u7279\u5b9a\u914d\u7f6e\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4e0d\u8981\u9500\u6bc1\u548c\u91cd\u65b0\u521b\u5efa\u5f53\u524d\u6d3b\u52a8\uff0c\u800c\u662f\u7531\u5e94\u7528\u7a0b\u5e8f\u81ea\u5df1\u6765\u5904\u7406\u8fd9\u4e9b\u53d8\u5316\u3002</p> \u503c \u8bf4\u660e orientation \u5c4f\u5e55\u65b9\u5411\u6539\u53d8\uff0c\u6bd4\u5982\u4ece\u7ad6\u5c4f\u5207\u6362\u5230\u6a2a\u5c4f\u6216\u8005\u53cd\u4e4b keyboardHidden \u952e\u76d8\u7684\u53ef\u89c1\u6027\u6539\u53d8\uff0c\u6bd4\u5982\u952e\u76d8\u5f39\u51fa\u6216\u6536\u8d77 screenSize \u5c4f\u5e55\u5c3a\u5bf8\u6539\u53d8\uff0c\u6bd4\u5982\u5e73\u677f\u7535\u8111\u6216\u624b\u673a\u6a2a\u7ad6\u5c4f\u4e4b\u95f4\u7684\u5207\u6362 smallestScreenSize \u6700\u5c0f\u5c4f\u5e55\u5c3a\u5bf8\u6539\u53d8\uff0c\u6307\u7684\u662f\u5c4f\u5e55\u7684\u53ef\u7528\u6700\u5c0f\u5c3a\u5bf8\uff0c\u4f8b\u5982\u5728\u591a\u7a97\u53e3\u6a21\u5f0f\u4e0b\u8c03\u6574\u7a97\u53e3\u5927\u5c0f screenLayout \u5c4f\u5e55\u5e03\u5c40\u6539\u53d8\uff0c\u6bd4\u5982\u5c4f\u5e55\u5927\u5c0f\u3001\u5206\u8fa8\u7387\u7b49\u53d8\u5316 uiMode UI \u6a21\u5f0f\u6539\u53d8\uff0c\u6bd4\u5982\u591c\u95f4\u6a21\u5f0f\u5207\u6362 </li> <li> <p>\u751f\u547d\u5468\u671f\u53d8\u5316</p> </li> <li> <p>\u573a\u666f\u4e00\uff1a\u754c\u9762A \u65b0\u5f00\u4e00\u4e2a\u754c\u9762\uff0c\u7136\u540e\u8fd4\u56de\u5230\u539f\u6765\u7684\u754c\u9762A</p> <p><code>java //\u65b0\u5f00 A onPause() //\u5173\u95ed A onResume()</code></p> </li> <li> <p>onCreateView()\u65b9\u6cd5</p> </li> </ul> <p>\u4f1a\u5728onCreate()\u65f6\u53bb\u6e32\u67d3\u6bcf\u4e2aview,\u6bcf\u4e2aview\u5b8c\u6210\u540e\u4f1a\u8fdb\u884c\u8fd9\u4e2a\u65b9\u6cd5\u7684\u56de\u8c03</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#2boradcast-receiver","title":"2\u3001Boradcast Receiver","text":"<p>1\u3001\u5b9a\u4e49:</p> <p>\u5373\u5e7f\u64ad\u63a5\u6536\u5668\uff0c\u7528\u4e8e\u76d1\u542c/\u63a5\u6536Android\u5e94\u7528\u5206\u53d1\u7684\u5404\u7c7b\u5e7f\u64ad\u5e76\u505a\u51fa\u76f8\u5e94\u7684\u54cd\u5e94\u3002</p> <p>2\u3001\u5e94\u7528\u573a\u666f</p> <ol> <li>\u76d1\u542c\u7cfb\u7edf\u4e8b\u4ef6\uff1a\u5982\u5f00\u673a\u5e7f\u64ad\uff0c\u7f51\u7edc\u8fde\u63a5\u4e0e\u65ad\u5f00\uff0c\u5c4f\u5e55\u5f00\u542f\u4e0e\u5173\u95ed\u7b49</li> <li>\u4e0d\u540c\u7ec4\u4ef6\u95f4\u901a\u4fe1\uff08\u591a\u4e2aActivity/service\uff0c\u5305\u62ec\u4e0d\u540c\u5e94\u7528\u95f4\uff09</li> <li>\u591a\u7ebf\u7a0b\u901a\u4fe1</li> </ol> <p>3\u3001\u5e7f\u64ad\u7c7b\u578b\uff1a\u65e0\u5e8f\u5e7f\u64ad\u3001\u6709\u5e8f\u5e7f\u64ad\u548c\u7c98\u6027\u5e7f\u64ad\uff08\u8d85\u51fa10s\uff09</p> <p>4\u3001\u751f\u547d\u5468\u671f\uff1a\u4ece\u8c03\u7528\u5f00\u59cb\u5230onReceiver()\u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\u7ed3\u675f\u3002\uff08\u4e00\u822c\u4e0d\u8d85\u8fc710s,\u4f1a\u51fa\u73b0ANR\uff09</p> <p>5\u3001\u5b9e\u73b0\u539f\u7406\uff1a\u89c2\u5bdf\u8005\u6a21\u5f0f\uff08\u57fa\u4e8e\u6d88\u606f\u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f\u7684\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\uff09</p> <p>\u200b   \u5e7f\u64ad\u6a21\u578b\u4e2d\u5305\u542b\u4e09\u4e2a\u89d2\u8272\uff1a</p> <ol> <li>\u6d88\u606f\u53d1\u5e03\u8005\uff08\u5e7f\u64ad\u53d1\u5e03\u8005\uff09</li> <li>\u6d88\u606f\u4e2d\u5fc3\uff08AMS\uff0c\u5373Activity Manager Service\uff09</li> <li>\u6d88\u606f\u8ba2\u9605\u8005\uff08\u5e7f\u64ad\u63a5\u6536\u8005\uff09</li> </ol> <p>\u6d41\u7a0b\uff1a</p> <p>1.\u5e7f\u64ad\u63a5\u53d7\u8005\u901a\u8fc7Binder\u673a\u5236\u5728AMS\u4e2d\u6ce8\u518c\u76d1\u542c</p> <p>2.\u5e7f\u64ad\u53d1\u5e03\u8005\u901a\u8fc7Binder\u673a\u5236\u5411AMS\u53d1\u9001\u5e7f\u64ad 3.AMS\u6839\u636e\u53d1\u9001\u8005\u7684\u9700\u6c42\uff0c\u5728\u5df2\u6ce8\u518c\u8868\u4e2d\u83b7\u53d6\u5230\u5408\u9002\u7684\u5e7f\u64ad\u63a5\u53d7\u8005\uff08\u6839\u636eIntent-filter\uff0cPermission\uff09 4.AMS\u5c06\u5e7f\u64ad\u53d1\u9001\u7ed9\u5408\u9002\u7684\u5e7f\u64ad\u63a5\u53d7\u8005\u7684\u6d88\u606f\u5faa\u73af\u961f\u5217\u4e2d 5.\u5e7f\u64ad\u63a5\u53d7\u8005\u901a\u8fc7\u6d88\u606f\u5faa\u73af\u83b7\u53d6\u5230\u5e7f\u64ad\u5e76\u56de\u8c03onReceive()</p> <p>6\u3001\u4f7f\u7528\u6d41\u7a0b</p> <ul> <li> <p>\u63a5\u6536\u5e7f\u64ad \uff08\u6ce8\u518c\u5e7f\u64ad\u63a5\u6536\u8005\uff09</p> </li> <li> <p>\u9759\u6001\u6ce8\u518c</p> <ul> <li>\u65b0\u5efa\u4e00\u4e2aBroadcast Receiver\u5b50\u7c7b\uff0c\u4fee\u6539\u5176\u51fd\u6570</li> <li>\u5728AndroidManifest.xml\u4e2d\u901a\u8fc7\u6807\u7b7e\u8fdb\u884c\u7533\u660e <li> <p>\u52a8\u6001\u6ce8\u518c</p> <ul> <li>\u5728\u4ee3\u7801\u4e2d\u901a\u8fc7registerReceiver(BroadcastReceiver receiver, IntentFilter filter)\u6765\u52a8\u6001\u6ce8\u518c\u5e7f\u64ad</li> </ul> </li> <li> <p>\u63a5\u53d7\u7279\u5b9a\u7684\u5e7f\u64ad</p> <ul> <li>\u9996\u5148\uff0c\u5728AndroidManifest.xml\u4e2d\u5b9a\u4e49\u65b0\u7684\u6743\u9650SEND_XXX\uff0c\u4f8b\u5982\uff1a</li> </ul> <p><code>xml   &lt;permission android:name=\"com.android.SEND_XXX\"               android:protectionLevel=\"normal\"/&gt;    //\u5b9a\u4e49\u6743\u9650\u89c4\u5219\uff1a\u6743\u9650\u7684\u540d\u79f0\u5fc5\u987b\u9075\u5faa \u5305\u540d+.+\u5b57\u7b26\u4e32 \u7684\u89c4\u5219\uff0c\u8be6\u7ec6\u5c5e\u6027\u89c1\u4e0b\u56fe</code></p> <p></p> <p>\u7136\u540e\uff0c\u5728\u63a5\u53d7\u8005app\u7684Androidmanifest.xml\u4e2d\u7684 tag\u91cc\u6dfb\u52a0\u6743\u9650SEND_XXX\u7684\u58f0\u660e <p>```xml    </p> <p>           android:permission=\"com.android.permission.SEND_XXX\"&gt;      ```</p> <p>\u53d1\u9001\u8005\u4e5f\u5728Androidmanifest.xml\u4e2d\u58f0\u660e\u6743\u9650\u3002</p> <li> <p>\u53d1\u9001\u5e7f\u64ad \uff08\u5e7f\u64ad\u53d1\u5e03\u8005\uff09</p> </li> <li> <p>sendBroadcast(),sendOrderedBroadcast()\u548csendStickyBroadcast()</p> <p><code>java Intent intent = new Intent();   intent.setAction(\"com.itlao5.broadcast\");   intent.putExtra(\"data\", \"data\");   sendBroadcast(intent);</code></p> </li> <li> <p>\u53d1\u9001\u7ed9\u7279\u5b9a\u7684\u5e7f\u64ad</p> <p>\u5728AndroidManifest.xml\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u914d\u7f6e</p> <p>  \u7136\u540e\u5728\u53d1\u9001\u5e7f\u64ad\u65f6</p> <p>sendBroadcast(\"com.android.XXX_ACTION\", \"com.android.permission.XXX\"); \u6b64\u65f6\uff0c\u5c31\u53ea\u6709\u5728\u5e7f\u64ad\u63a5\u6536\u7684\u5e94\u7528\u4e2d\u5728AndroidManifest.xml\u4e2d\u6dfb\u52a0\u5bf9\u5e94\u7684XXX\u6743\u9650\uff0c\u624d\u80fd\u6b63\u5e38\u63a5\u6536\u5230\u8be5\u5e7f\u64ad\u3002</p> <p>&gt; </p> </li> <p>7\u3001\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u52a8\u6001\u6ce8\u518c\u7684\u5e7f\u64ad\u5728\u4e0d\u9700\u8981\u65f6\uff0c\u5fc5\u987b\u9500\u6bc1\uff0c\u4e00\u822c\u5728\u6d3b\u52a8\u9500\u6bc1\u65f6\u8fdb\u884c</li> <li>\u4e0d\u8981\u5728\u5e7f\u64ad\u63a5\u6536\u8005\u4e2d\u8fdb\u884c\u8017\u65f6\u64cd\u4f5c</li> <li>\u4e0d\u8981\u5728\u5e7f\u64ad\u63a5\u6536\u5668onReceiver\u4e2d\u5f00\u542f\u5f02\u6b65\u4efb\u52a1</li> </ul> <p>8\u3001\u5e7f\u64ad\u63a5\u6536\u8005\u52a8\u6001\u6ce8\u518c\u548c\u9759\u6001\u6ce8\u518c\u7684\u533a\u522b</p> \u52a8\u6001\u6ce8\u518c \u9759\u6001\u6ce8\u518c \u5728\u7a0b\u5e8f\u4e2d\u8fdb\u884c \u5728AndroidManifest.xml\u4e2d\u5b9a\u4e49 \u6d3b\u52a8\u9500\u6bc1\u65f6\uff0c\u5e7f\u64ad\u63a5\u6536\u5668\u4e5f\u8981unRegisterReceiver() \u4e3a\u5e38\u9a7b\u5e7f\u64ad\uff0c\u5373\u4f7f\u5e94\u7528\u5904\u4e8e\u975e\u8fd0\u884c\u72b6\u6001\uff0c\u4e5f\u53ef\u63a5\u6536 \u4f18\u5148\u7ea7\u8f83\u9ad8\uff0c\u4e14\u53ef\u4ee5\u63a7\u5236\u6ce8\u518c\u4e0e\u6ce8\u9500\uff0c\u5f00\u9500\u66f4\u5c0f\uff0c\u751f\u547d\u5468\u671f\u53ef\u63a7 \u751f\u547d\u5468\u671f\u4e0d\u6613\u63a7\u5236 \u652f\u6301\u9690\u5f0fintent\u548c\u663e\u5f0fintent Android 8 \u4e4b\u540e\u9690\u5f0fintent\u4e0d\u652f\u6301sendboardCast,\u652f\u6301\u663e\u5f0fintent <p>9\u3001\u663e\u5f0f\u5e7f\u64ad\u548c\u9690\u5f0f\u5e7f\u64ad</p> <p>\u52a8\u6001\u6ce8\u518c\u652f\u6301\u9690\u5f0f\u548c\u663e\u5f0f\uff0c\u6ca1\u6709\u4ec0\u4e48\u533a\u522b</p> <p>\u9759\u6001\u6ce8\u518cAndroid8 \u4e4b\u540e\u4e0d\u652f\u6301\u9690\u5f0f\uff0c\u82e5\u8981\u652f\u6301\u9690\u5f0f\u9700\u8981+Flag,\u6216\u8005\u52a0\u4e0a\u5305\u540d</p> <pre><code>public static final int FLAG_RECEIVER_INCLUDE_BACKGROUND = 0x01000000;\nintent.addFlags(0x01000000);\nintent.setPackage(getPackageName());\n</code></pre> <pre><code>//\u9759\u6001\u6ce8\u518c\n//\u663e\u5f0f\u5e7f\u64ad\ntry {\n  Intent intent = new Intent(MainActivity.this, Class.forName(\"com.example.androiddemo.BroadcastReceiver.testReceiver\"));\n  //intent.setAction(\"staticFilter\");\n  intent.putExtra(\"data\", \"test BoardCast\");\n  sendBroadcast(intent);\n} catch (ClassNotFoundException e){\n  e.printStackTrace();\n}\n//\u9690\u5f0f\u5e7f\u64ad\nIntent intent = new Intent();\nintent.setAction(\"staticFilter\");\nintent.putExtra(\"data\", \"test BoardCast\");\nintent.addFlags(0x01000000);\nsendBroadcast(intent)\uff1b\n</code></pre> <p>10\u3001onReceive \u53c2\u6570  context</p> <p>\u5982\u679c\u662f\u9759\u6001\u6ce8\u518c\u7684Broadcast\uff0ccontext.toString()\u8f93\u51fa\u4e3a\uff1aandroid.app.ReceiverRestrictedContext@e5d8f65</p> <p>\u5982\u679c\u662f\u52a8\u6001\u6ce8\u518c\u7684Broadcast\uff0ccontext.toString()\u8f93\u51fa\u4e3a\uff1acom.example.test.MainActivity@84dfef5</p> <p>\u9759\u6001\u4e0e\u52a8\u6001\u6ce8\u518c\u7684\u7684Broadcast\uff0ccontext.getPackageName()\u8f93\u51fa\u90fd\u4e3a\uff1acom.example.test</p> <p>\u65e0\u8bba\u9759\u6001\u8fd8\u662f\u52a8\u6001\u6ce8\u518c\u7684Broadcast\uff0c\u90fd\u8dd1\u5728\u5e7f\u64ad\u6240\u5728app\u7684\u8fdb\u7a0b</p> <p>11\u3001\u5e7f\u64ad\u7684\u4f18\u5148\u7ea7</p> <ul> <li>\u6dfb\u52a0\u65b9\u5f0f</li> </ul> <p><code>java   //\u9759\u6001\u6ce8\u518c    &lt;intent-filter android:priority=\"1000\"&gt;&lt;/intent-filter&gt;   //\u52a8\u6001\u6ce8\u518c    intentFilter.setPriority(10);</code></p> <p>Android \u5bf9\u4e8e\u5e7f\u64ad\u7684\u4f18\u5148\u7ea7\u5b9a\u4e49\u4e3a\u4f18\u5148\u7ea7\u6570\u503c\u8d8a\u5927\uff0c\u5219\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u5b9e\u9645\u4e0a\u6709\u4ee5\u4e0b\u6548\u679c\uff0c\u4f7f\u7528\u4f18\u5148\u7ea7\u4e00\u822c\u662f\u6709\u5e8f\u5e7f\u64ad\uff0c\u6709\u5e8f\u5e7f\u64ad\u662f\u540c\u6b65\u8fdb\u884c\u7684\u3002</p> <ul> <li>\u53d1\u9001\u6709\u5e8f\u5e7f\u64ad</li> </ul> \u5e7f\u64ad\u6ce8\u518c\u7c7b\u578b \u5b9e\u9645\u6548\u679c \u5168\u90e8\u662f\u9759\u6001\u6ce8\u518c\u5e7f\u64ad \u6570\u503c\u8d8a\u5927\uff0c\u4f18\u5148\u7ea7\u8d8a\u4f4e \u5168\u90e8\u662f\u52a8\u6001\u6ce8\u518c\u5e7f\u64ad \u6570\u503c\u8d8a\u5927\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u4f18\u5148\u7ea7\u76f8\u540c\u7684\u5df2\u5148\u6ce8\u518c\u7684\u4f18\u5148 \u65e2\u6709\u52a8\u6001\u6ce8\u518c\u5e7f\u64ad\u53c8\u6709\u9759\u6001\u6ce8\u518c\u5e7f\u64ad \u5f53\u53ea\u6709\u4e00\u4e2a\u52a8\u6001\u6ce8\u518c\u7684\u5e7f\u64ad\u65f6\uff0c\u52a8\u6001\u6ce8\u518c\u7684\u5e7f\u64ad\u4f18\u5148\u7ea7\u6c38\u8fdc\u9ad8\u4e8e\u9759\u6001\u6ce8\u518c\u7684\u5e7f\u64ad\uff0c\u4e14\u9759\u6001\u6ce8\u518c\u7684\u5e7f\u64ad\u662f\u6570\u503c\u8d8a\u5927\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u5f53\u6709\u591a\u4e2a\u52a8\u6001\u6ce8\u518c\u7684\u5e7f\u64ad\u65f6\uff0c\u5e94\u8be5\u662f\u6709\u7b97\u6cd5\u8fdb\u884c\u6574\u5408\uff0c\u4fdd\u8bc1\u4e86\u9759\u6001\u548c\u52a8\u6001\u90fd\u6709\u4e00\u4e2a\u6570\u503c\u6700\u5927\u7684\u4e3a\u7b2c\u4e00\u7b2c\u4e8c\u4f4d <ul> <li>\u53d1\u9001\u65e0\u5e8f\u5e7f\u64ad</li> </ul> <p>\u5e7f\u64ad\u662f\u65e0\u5e8f\u7684\uff0c\u662f\u4e0d\u8003\u8651\u4f18\u5148\u7ea7\u7684\uff0c\u56e0\u4e3a\u6267\u884c\u987a\u5e8f\u4e0d\u786e\u5b9a\uff0c\u4e5f\u65e0\u6cd5\u4f7f\u7528setResult\u7cfb\u5217\u3001getResult\u7cfb\u5217\u53caabort\uff08\u4e2d\u6b62\uff09\u7cfb\u5217API\u3002</p> <p>12.\u672a\u542f\u52a8\u7684App\u5982\u4f55\u6536\u5230\u5e7f\u64ad</p> <p>Android 3.1\u4ee5\u540e\u65b0\u589eStopped\u673a\u5236\uff0c\u5982\u679cApp\u672a\u542f\u52a8\u5728\u7cfb\u7edf\u4e2d\u8bb0\u5f55\u4e3a\u4ee5\u4e0b\u5f62\u5f0f\uff0c\u662fStopped\u72b6\u6001</p> <p></p> <p>\u7cfb\u7edf\u5e7f\u64ad\u4e2d\u6dfb\u52a0\u4e86FLAG_EXCLUDE_STOPPED_PACKAGES\uff0c\u56e0\u6b64\u5728stopped\u72b6\u6001\u4e0b\u65e0\u6cd5\u6536\u5230\u5e7f\u64ad\u3002</p> <p>\u770b\u4e00\u4e0b\u8fd9\u4e24\u4e2aFlag:</p> <pre><code>/**\n * If set, this intent will not match any components in packages that\n * are currently stopped.  If this is not set, then the default behavior\n * is to include such applications in the result.\n */\npublic static final int FLAG_EXCLUDE_STOPPED_PACKAGES = 0x00000010;\n/**\n * If set, this intent will always match any components in packages that\n * are currently stopped.  This is the default behavior when\n * {@link #FLAG_EXCLUDE_STOPPED_PACKAGES} is not set.  If both of these\n * flags are set, this one wins (it allows overriding of exclude for\n * places where the framework may automatically set the exclude flag).\n */\npublic static final int FLAG_INCLUDE_STOPPED_PACKAGES = 0x00000020;\n</code></pre> <p>\u7b80\u5355\u5730\u8bf4\uff0c\u5e26\u6709<code>FLAG_EXCLUDE_STOPPED_PACKAGES</code>\u7684\u5e7f\u64ad\u4e0d\u4f1a\u88ab\u53d1\u9001\u7ed9stopped\u72b6\u6001\u7684app\uff0c\u800c\u4e24\u8005\u90fd\u6709\u7684\u60c5\u51b5\u4e0b\u4ee5<code>FLAG_INCLUDE_STOPPED_PACKAGES</code>\u4e3a\u51c6\u3002\u8fd9\u5c31\u662fstopped\u673a\u5236\uff0c\u80fd\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u9632\u8303\u6d41\u6c13\u8f6f\u4ef6\u6076\u610f\u76d1\u542c\u7cfb\u7edf\u5e7f\u64ad\uff0c\u800c<code>FLAG_INCLUDE_STOPPED_PACKAGES</code>\u5219\u76f8\u5f53\u4e8e\u7559\u7ed9\u5f00\u53d1\u8005\u7528\u4e8e\u81ea\u5b9a\u4e49\u5e7f\u64ad\u7684\u540e\u95e8\u4e86\u3002</p> <p>\u56e0\u6b64\uff0c\u53d1\u9001\u5e7f\u64ad\u65f6\uff0c\u5e94\u52a0\u4e0aFLAG_INCLUDE_STOPPED_PACKAGES</p> <pre><code>// By default broadcasts do not go to stopped apps.\nintent.addFlags(Intent.FLAG_EXCLUDE_STOPPED_PACKAGES);\n</code></pre>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#3application","title":"3\u3001Application","text":"<p>1\u3001\u5b9a\u4e49</p> <pre><code>   Application\u548cActivity,Service\u4e00\u6837,\u662fandroid\u6846\u67b6\u7684\u4e00\u4e2a\u7cfb\u7edf\u7ec4\u4ef6\uff0c\u5f53android\u7a0b\u5e8f\u542f\u52a8\u65f6\u7cfb\u7edf\u4f1a\u521b\u5efa\u4e00\u4e2a application\u5bf9\u8c61\uff0c\u7528\u6765\u5b58\u50a8\u7cfb\u7edf\u7684\u4e00\u4e9b\u4fe1\u606f\u3002\u901a\u5e38\u6211\u4eec\u662f\u4e0d\u9700\u8981\u6307\u5b9a\u4e00\u4e2aApplication\u7684\uff0c\u8fd9\u65f6\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u521b\u5efa\uff0c\u5982\u679c\u9700\u8981\u521b\u5efa\u81ea\u5df1 \u7684Application\uff0c\u4e5f\u5f88\u7b80\u5355\u521b\u5efa\u4e00\u4e2a\u7c7b\u7ee7\u627f Application\u5e76\u5728manifest\u7684application\u6807\u7b7e\u4e2d\u8fdb\u884c\u6ce8\u518c(\u53ea\u9700\u8981\u7ed9Application\u6807\u7b7e\u589e\u52a0\u4e2aname\u5c5e\u6027\u628a\u81ea\u5df1\u7684 Application\u7684\u540d\u5b57\u5b9a\u5165\u5373\u53ef)\u3002\n</code></pre> <p>2\u3001\u4f5c\u7528</p> <ul> <li> <p>\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf</p> </li> <li> <p>\u901a\u8fc7Application\u4f20\u9012\u6570\u636e</p> </li> <li>Application\u6570\u636e\u7f13\u5b58</li> <li>pitfalls</li> <li>MemoryLeak</li> </ul> <p>3\u3001\u751f\u547d\u5468\u671f</p> <ul> <li> <p>Application\u7684onCreate()\u662fApp\u7684\u7b2c\u4e00\u4e2a\u5165\u53e3</p> </li> <li> <p></p> </li> <li> <p>onCreate() :Application\u521b\u5efa\u7684\u65f6\u5019\u8c03\u7528</p> <ul> <li>\u7b80\u5355\u521d\u59cb\u5316\uff0c\u4e0d\u8981\u6267\u884c\u8017\u65f6\u64cd\u4f5c\uff0c\u5426\u5219\u4f1a\u62d6\u6162APP\u542f\u52a8\u901f\u5ea6</li> <li>\u5b9a\u4e49\u5168\u5c40\u5e38\u91cf\u6216\u53d8\u91cf\uff0c\u8981\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\uff08\u53ef\u4ee5\u7528\u666e\u901a\u5355\u4f8b\u5b9e\u73b0\u6765\u4ee3\u66ff\uff09</li> <li>\u5b9a\u4e49\u5168\u5c40\u9759\u6001\u65b9\u6cd5\uff08\u53ef\u4ee5\u7528\u666e\u901a\u7c7b\u5b9e\u73b0\u6765\u4ee3\u66ff\uff09</li> </ul> </li> <li> <p>onConfigurationChanged():\u5f53\u914d\u7f6e\u4fe1\u606f\u6539\u53d8\u7684\u65f6\u5019\u4f1a\u8c03\u7528\uff0c\u5982\u5c4f\u5e55\u65cb\u8f6c\u3001\u8bed\u8a00\u5207\u6362\u7b49\u3002</p> </li> <li> <p>onLowMemory():\u5f53\u5185\u5b58\u8f83\u4f4e\u65f6\uff0c\u6e05\u7406\u5185\u5b58\u6216\u63d0\u9192\u7528\u6237\uff0c\u6765\u4fdd\u8bc1\u5185\u5b58\u8db3\u591f\u4f7f\u7528</p> </li> <li> <p>onTrimMemory():\u7528\u4e8e\u53d6\u4ee3onLowmemory();</p> </li> <li> <p>onTerminate():Application\u7ed3\u675f\u7684\u65f6\u5019\u4f1a\u8c03\u7528\uff0c\u7531\u7cfb\u7edf\u51b3\u5b9a\u8c03\u7528\u7684\u65f6\u673a\u3002</p> <p>Application \u88ab\u6740\u6b7b\u7684\u60c5\u51b5\u5206\u6790\uff1a \u4e3a\u4e86\u51b3\u5b9a\u5728\u5185\u5b58\u8f83\u4f4e\u7684\u65f6\u5019\u6740\u6389\u54ea\u4e2a\u8fdb\u7a0b, Android\u4f1a\u6839\u636e\u8fd0\u884c\u5728\u8fd9\u4e9b\u8fdb\u7a0b\u5185\u7684\u7ec4\u4ef6\u53ca\u4ed6\u4eec\u7684\u72b6\u6001\u628a\u8fdb\u7a0b\u5212\u5206\u6210\u4e00\u4e2a\u201d\u91cd\u8981\u7a0b\u5ea6\u5c42\u6b21\u201d. \u5176\u91cd\u8981\u7684\u7a0b\u5ea6\u6309\u4ee5\u4e0b\u89c4\u5219\u6392\u5e8f:</p> <p></p> <p>Activity Process \u6d3b\u52a8\u8fdb\u7a0b\uff0c\u4e5f\u53eb\u524d\u53f0\u8fdb\u7a0b\u3002Android\u4f1a\u5c1d\u8bd5\u901a\u8fc7\u56de\u6536\u5404\u79cd\u8d44\u6e90\u6765\u4fdd\u8bc1\u5176\u8fd0\u884c\u72b6\u6001\u3002\u6b64\u7c7b\u8fdb\u7a0b\u6570\u91cf\u5c11\uff0c\u901a\u5e38\u662f\u6700\u540e\u88ab\u7ed3\u675f\u6389\u7684\u3002\u6d3b\u52a8\u8fdb\u7a0b\u5305\u542b\u4e0b\u9762\u51e0\u79cd\u60c5\u51b5\uff1a \u2014 \u8fdb\u7a0b\u6301\u6709\u4e00\u4e2a\u6b63\u5728\u4e0e\u7528\u6237\u4ea4\u4e92\u7684Activity(\u8fd9\u4e2aActivity\u7684onResume()\u65b9\u6cd5\u88ab\u8c03\u7528)\u3002 \u2014 \u8fdb\u7a0b\u6301\u6709\u4e00\u4e2aService\uff0c\u8fd9\u4e2aService\u5904\u4e8e\u8fd9\u51e0\u79cd\u72b6\u6001:\u2460Service\u4e0e\u7528\u6237\u6b63\u5728\u4ea4\u4e92\u7684Activity\u7ed1\u5b9a\u3002\u2461Service\u662f\u5728\u524d\u53f0\u8fd0\u884c\u7684\uff0c\u5373\u5b83\u8c03\u7528\u4e86 startForeground()\u3002\u2462Service\u6b63\u5728\u6267\u884c\u5b83\u7684\u751f\u547d\u5468\u671f\u56de\u8c03\u51fd\u6570\uff08onCreate(), onStart(), or onDestroy()\uff09\u3002 \u2014 \u8fdb\u7a0b\u6301\u6709\u4e00\u4e2aBroadcastReceiver\uff0c\u8fd9\u4e2aBroadcastReceiver\u6b63\u5728\u6267\u884c\u5b83\u7684 onReceive() \u65b9\u6cd5\u3002</p> <p>Visible Process \u53ef\u89c1\u8fdb\u7a0b\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u4e0d\u542b\u6709\u4efb\u4f55\u524d\u53f0\u6d3b\u52a8\u7684\u7ec4\u4ef6\uff0c\u4e0d\u53ef\u4e0e\u7528\u6237\u4ea4\u4e92\uff0c\u4f46\u4ecd\u5728\u5c4f\u5e55\u4e0a\u53ef\u89c1\u3002\u53ef\u89c1\u8fdb\u7a0b\u5305\u542b\u4e0b\u9762\u51e0\u79cd\u60c5\u51b5\uff1a \u2014\u8fdb\u7a0b\u6301\u6709\u4e00\u4e2aActivity\uff0c\u8fd9\u4e2aActivity\u4e0d\u5728\u524d\u53f0\uff0c\u4f46\u662f\u4ecd\u7136\u88ab\u7528\u6237\u53ef\u89c1\uff08\u5904\u4e8eonPause()\u8c03\u7528\u540e\u53c8\u6ca1\u6709\u8c03\u7528onStop()\u7684\u72b6\u6001\uff09\u3002 \u2014\u8fdb\u7a0b\u6301\u6709\u4e00\u4e2aService\uff0c\u8fd9\u4e2aService\u548c\u4e00\u4e2a\u53ef\u89c1\u7684\u6216\u8005\u6d3b\u52a8\u7684Activity\u7ed1\u5b9a\u3002</p> <p>Started Service Process \u542f\u52a8\u540e\u7684\u670d\u52a1\u8fdb\u7a0b\uff0c\u8be5\u670d\u52a1\u8fdb\u7a0b\u5728\u6ca1\u6709\u53ef\u89c6\u5316\u754c\u9762\u7684\u60c5\u51b5\u4e0b\u6301\u7eed\u8fd0\u884c\u65f6\u3002</p> <p>Background Process \u540e\u53f0\u8fdb\u7a0b\uff0c\u6301\u6709\u4e00\u4e2a\u7528\u6237\u4e0d\u53ef\u89c1\u7684Activity\uff08Activity\u7684onStop()\u88ab\u8c03\u7528\uff0c\u4f46\u662fonDestroy()\u6ca1\u6709\u8c03\u7528\uff09\u7684\u72b6\u6001\u3002\u901a\u5e38\u6709\u5f88\u591a\u540e\u53f0\u8fdb\u7a0b\u5728\u8fd0\u884c\u3002\u5b83\u4eec\u88ab\u4fdd\u5b58\u5728\u4e00\u4e2aLRU(\u6700\u8fd1\u6700\u5c11\u4f7f\u7528)\u5217\u8868\u4e2d\u6765\u786e\u4fdd\u62e5\u6709\u6700\u8fd1\u521a\u88ab\u770b\u5230\u7684Activity\u7684\u8fdb\u7a0b\u6700\u540e\u88ab\u6740\u6b7b\u3002</p> <p>Empty Process \u7a7a\u8fdb\u7a0b\uff0c\u4e0d\u62e5\u6709\u5165\u4f55\u6d3b\u52a8\u7ec4\u4ef6\u7684\u8fdb\u7a0b\u3002\u4e3a\u4e86\u6539\u5584\u6574\u4e2a\u7cfb\u7edf\u7684\u6027\u80fd\uff0cAndroid\u4f1a\u5728\u5185\u5b58\u4e2d\u4fdd\u7559\u5df2\u7ecf\u7ed3\u675f\u751f\u547d\u5468\u671f\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ee5\u4fbf\u8fd9\u4e9bApp\u80fd\u591f\u5feb\u901f\u542f\u52a8\u3002</p> </li> </ul>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#4service","title":"4\u3001Service","text":"<p>1\u3001\u5b9a\u4e49  Android\u7684\u7ec4\u4ef6\uff0c\u5206\u4e3a\u672c\u5730\u670d\u52a1\u548c\u8fdc\u7aef\u670d\u52a1\uff0c\u662f\u4e00\u79cd\u673a\u5236\uff0c\u8fd0\u884c\u5728main\u7ebf\u7a0b\u4e0a\u3002</p> <p>2\u3001\u521b\u5efa\u914d\u7f6eService</p> <p>\u548cActivity\u7684\u521b\u5efa\u548c\u914d\u7f6e\u4e00\u6837</p> <p>3\u3001\u542f\u52a8\u548c\u505c\u6b62Service</p> <ul> <li>Service.startService(Intent intent) \u901a\u8fc7intent\u6307\u5b9aService</li> </ul> <p>\u4f1a\u8c03\u7528Service\u7684onCreate()\u548conStartCommend()</p> <ul> <li>Service.stopService(Intent intent) \u901a\u8fc7intent\u6307\u5b9aService</li> </ul> <p>\u4f1a\u8c03\u7528Service\u7684onDestory()</p> <p>4\u3001\u7ed1\u5b9aService</p> <ul> <li> <p>Service.bindService(Intent,ServiceConnection,flags)</p> </li> <li> <p>intent  \u6307\u5b9aService</p> </li> <li>\u7528\u4e8e\u76d1\u542c\u8bbf\u95ee\u8005\u4e0eService\u4e4b\u95f4\u7684\u8fde\u63a5\u60c5\u51b5\uff0c\u6b63\u5e38\u89e3\u7ed1\u4e0d\u4f1a\u901a\u77e5<ul> <li>onServiceConnected     \u901a\u77e5\u8fde\u63a5</li> <li>onServiceDisconnected  \u901a\u77e5\u65ad\u5f00</li> </ul> </li> <li>flags<ul> <li>0   \u4e0d\u81ea\u52a8\u521b\u5efa</li> <li>BIND_AUTO_CREATE  \u81ea\u52a8\u521b\u5efa</li> </ul> </li> </ul> <p>\u4f1a\u8c03\u7528onCreate()  onBind()</p> <ul> <li>Service.unbindService(ServiceConnection)</li> </ul> <p>\u4f1a\u8c03\u7528unBind()\u3001onDestory()</p> <ul> <li>Service\u7c7b\u63d0\u4f9bIBinder onBinder()\u63d0\u4f9bBinder\u5bf9\u8c61\uff0c\u5728ServiceConnection\u4e2d\u83b7\u53d6Binder\uff0c\u8bbf\u95ee\u8005\u901a\u8fc7Binder\u548cService\u8fdb\u884c\u901a\u4fe1\u3002</li> </ul> <p>5\u3001\u751f\u547d\u5468\u671f</p> <p></p> <p>6\u3001IntentService</p> <p>\u5b9a\u4e49\uff1a\u7531\u4e8eService\u4e0d\u4f1a\u4e13\u95e8\u542f\u52a8\u4e00\u4e2a\u5355\u72ec\u7684\u7ebf\u7a0b\uff0c\u4f9d\u8d56\u4e8emain\u7ebf\u7a0b\uff0c\u56e0\u6b64\u4e0d\u5e94\u8be5\u5728Service\u4e2d\u76f4\u63a5\u5904\u7406\u8017\u65f6\u7684\u4efb\u52a1\u3002</p> <p>\u7279\u5f81\uff1a</p> <ul> <li>IntentService\u4f1a\u521b\u5efa\u5355\u72ec\u7684worker\u7ebf\u7a0b\u6765\u5904\u7406\u6240\u6709\u7684Intent\u8bf7\u6c42\u3002</li> <li>IntentService\u4f1a\u521b\u5efa\u5355\u72ec\u7684worder\u7ebf\u7a0b\u6765\u5904\u7406onHandleIntent()\u65b9\u6cd5\u5b9e\u73b0\u7684\u4ee3\u7801\u3002</li> <li>IntentService\u4f1a\u5c06Intent\u8bf7\u6c42\u6dfb\u52a0\u5230\u961f\u5217\u4e2d\uff0cworker\u7ebf\u7a0b\u4f9d\u6b21\u5904\u7406\u3002</li> <li>\u5f53\u6240\u6709\u8bf7\u6c42\u5904\u7406\u5b8c\u6210\u540e\uff0cIntentService\u4f1a\u81ea\u52a8\u505c\u6b62\uff0c\u65e0\u9700\u5f00\u53d1\u8005\u8c03\u7528\u65b9\u6cd5\u6765\u505c\u6b62Service\u3002</li> <li>\u4e3aService\u7684onBind()\u3001onStartComment()\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u7684\u5b9e\u73b0\uff0c\u65e0\u9700\u91cd\u5199\u3002</li> </ul> <p>7\u3001\u542f\u52a8\u53e6\u4e00\u4e2aApp\u4e2d\u7684Service</p> <p>\u5fc5\u987b\u4fdd\u8bc1\u53e6\u4e00\u4e2aApp\u662f\u542f\u52a8\u7684\u3002</p> <ul> <li>\u6253\u5f00\u53e6\u4e00\u4e2aApp\u6e90\u7801</li> </ul> <pre><code> Intent it =  getBaseContext().getPackageManager().getLaunchIntentForPackage(\"\u53e6\u4e00\u4e2aApp\u5305\u540d\");\n        if(it !=null) {\n            it.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            getBaseContext().startActivity(it);\n        }\n</code></pre> <ul> <li> <p>\u6253\u5f00\u53e6\u4e00App\u4e2d\u670d\u52a1\u7684\u6e90\u7801\uff08\u663e\u5f0f\u542f\u52a8\uff09</p> </li> <li> <p>\u901a\u8fc7\u5305\u540d\u548c\u5168\u8def\u5f84\u540d</p> </li> </ul> <p><code>java   Intent i  = new Intent();   i.setClassName(\"com.example.firstservice\",\"com.example.firstservice.MyService\");   startService(i);</code></p> <p>\u8bbe\u7f6eservice\u7684Android:exported=\"true\";</p> <ul> <li> <p>\u901a\u8fc7ComponentName\u7c7b</p> </li> <li> <p>\u542f\u52a8\u3001\u505c\u6b62\u3001\u7ed1\u5b9a\u548c\u89e3\u7ed1\u7684\u65b9\u5f0f\u4e00\u6837\uff0c\u901a\u8fc7Intent\u663e\u5f0f\u8c03\u7528\u53e6\u4e00\u4e2aapp\u7684Service</p> </li> </ul> <p>8\u3001\u901a\u8fc7AIDL\u8fdb\u884c\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1</p> <ul> <li> <p>AIDL\u4e2d\u53ef\u4ee5\u5b9a\u4e49\u63a5\u53e3\uff0c\u5728IAppServiceRemoteBinder.Stub()\u7c7b\u4e2d\u8fdb\u884c\u5b9e\u73b0\u3002</p> </li> <li> <p>\u5728onServiceConnected()\u4e2d\u8fdb\u884c\u5bf9Service\u4e2d\u6570\u636e\u548c\u64cd\u4f5c\u8fdb\u884c\u7ed1\u5b9a</p> </li> </ul> <p><code>java    public void onServiceConnected(ComponentName name, IBinder service) {               System.out.println(\"Connected Success\");               System.out.println(service);               //\u83b7\u53d6\u8fdc\u7a0bServise\u7684onBind()\u6240\u8fd4\u56de\u5bf9\u8c61\u7684\u4ee3\u7406               IBinder = IAppServiceRemoteBinder.Stub.asInterface(service);//\u867d\u7136\u7c7b\u540d\u76f8\u540c\uff0c\u4f46\u4e0d\u662f\u540c\u4e00\u4e2a\u7c7b\uff0c\u56e0\u6b64\u9700\u8981\u8fd9\u6837\u8f6c\u6362           }</code></p> <ul> <li>\u901a\u8fc7AIDL\u5b9a\u4e49\u7684\u63a5\u53e3</li> </ul> <p><code>java   private IAppServiceRemoteBinder IBinder = null;</code></p> <p>\u5373\u53ef\u5b9e\u73b0\u5728\u670d\u52a1\u4e0e\u8bbf\u95ee\u8005\u4e4b\u95f4\u8fdb\u884c\u901a\u4fe1\u3002</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#5contentprovider","title":"5\u3001ContentProvider","text":"<p>1.\u5b9a\u4e49   \u6570\u636e\u5171\u4eab\u6807\u51c6\uff0cAndroid\u56db\u5927\u7ec4\u4ef6\u4e4b\u4e00</p> <p>2.ContentProvider\u6ce8\u518c</p> <ul> <li>\u65b0\u5efaContentProvider\u5b50\u7c7b</li> <li>\u5728Android\u4e2d\u6ce8\u518cContentProvider</li> <li>authorities  \u76f8\u5f53\u4e8eContentProvider\u7684\u57df\u540d</li> <li>name \u5b9e\u73b0\u7c7b\u7684\u7c7b\u540d</li> <li>exported:\u662f\u5426\u88ab\u5141\u8bb8\u88ab\u5176\u4ed6\u5e94\u7528\u8c03\u7528</li> <li>readPermission:\u6307\u5b9a\u8bfb\u53d6\u8be5ContentProvider\u7684\u6743\u9650\u3002</li> <li>writePermission:\u6307\u5b9a\u5199\u5165\u8be5ContentProvider\u7684\u6743\u9650\u3002</li> <li>permission\uff1a\u914d\u7f6e\u4e86\u8bfb\u53d6\u548c\u5199\u5165\u7684\u6743\u9650</li> </ul> <p>3.ContentProvider\u65b9\u6cd5</p> <ul> <li> <p>```java   &lt;-- 4\u4e2a\u6838\u5fc3\u65b9\u6cd5 --&gt;     public Uri insert(Uri uri, ContentValues values)      // \u5916\u90e8\u8fdb\u7a0b\u5411 ContentProvider \u4e2d\u6dfb\u52a0\u6570\u636e</p> <p>public int delete(Uri uri, String selection, String[] selectionArgs)  // \u5916\u90e8\u8fdb\u7a0b \u5220\u9664 ContentProvider \u4e2d\u7684\u6570\u636e</p> <p>public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) // \u5916\u90e8\u8fdb\u7a0b\u66f4\u65b0 ContentProvider \u4e2d\u7684\u6570\u636e</p> <p>public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs,  String sortOrder)\u3000  // \u5916\u90e8\u5e94\u7528 \u83b7\u53d6 ContentProvider \u4e2d\u7684\u6570\u636e</p> </li> </ul> <p>// \u6ce8\uff1a     // 1. \u4e0a\u8ff04\u4e2a\u65b9\u6cd5\u7531\u5916\u90e8\u8fdb\u7a0b\u56de\u8c03\uff0c\u5e76\u8fd0\u884c\u5728ContentProvider\u8fdb\u7a0b\u7684Binder\u7ebf\u7a0b\u6c60\u4e2d\uff08\u4e0d\u662f\u4e3b\u7ebf\u7a0b\uff09    // 2. \u5b58\u5728\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bbf\u95ee\uff0c\u9700\u8981\u5b9e\u73b0\u7ebf\u7a0b\u540c\u6b65      // a. \u82e5ContentProvider\u7684\u6570\u636e\u5b58\u50a8\u65b9\u5f0f\u662f\u4f7f\u7528SQLite &amp; \u4e00\u4e2a\uff0c\u5219\u4e0d\u9700\u8981\uff0c\u56e0\u4e3aSQLite\u5185\u90e8\u5b9e\u73b0\u597d\u4e86\u7ebf\u7a0b\u540c\u6b65\uff0c\u82e5\u662f\u591a\u4e2aSQLite\u5219\u9700\u8981\uff0c\u56e0\u4e3aSQL\u5bf9\u8c61\u4e4b\u95f4\u65e0\u6cd5\u8fdb\u884c\u7ebf\u7a0b\u540c\u6b65     // b. \u82e5ContentProvider\u7684\u6570\u636e\u5b58\u50a8\u65b9\u5f0f\u662f\u5185\u5b58\uff0c\u5219\u9700\u8981\u81ea\u5df1\u5b9e\u73b0\u7ebf\u7a0b\u540c\u6b65</p> <p>&lt;-- 2\u4e2a\u5176\u4ed6\u65b9\u6cd5 --&gt;   public boolean onCreate()    // ContentProvider\u521b\u5efa\u540e \u6216 \u6253\u5f00\u7cfb\u7edf\u540e\u5176\u5b83\u8fdb\u7a0b\u7b2c\u4e00\u6b21\u8bbf\u95ee\u8be5ContentProvider\u65f6 \u7531\u7cfb\u7edf\u8fdb\u884c\u8c03\u7528   // \u6ce8\uff1a\u8fd0\u884c\u5728ContentProvider\u8fdb\u7a0b\u7684\u4e3b\u7ebf\u7a0b\uff0c\u6545\u4e0d\u80fd\u505a\u8017\u65f6\u64cd\u4f5c</p> <p>public String getType(Uri uri)   // \u5f97\u5230\u6570\u636e\u7c7b\u578b\uff0c\u5373\u8fd4\u56de\u5f53\u524d Url \u6240\u4ee3\u8868\u6570\u636e\u7684MIME\u7c7b\u578b   //\u6a21\u7cca\u67e5\u8be2\u65f6\uff0c\u5c06'%'\u653e\u5230\u53c2\u6570\u91cc\uff0c\u800c\u4e0d\u662f\u653e\u5728Where\u4e2d   ```</p> <p>4.Uri</p> <p></p> <ul> <li> <p>\u534f\u8bae\u540d\uff1a content://</p> </li> <li> <p>ContentProvider\u7684authorities</p> </li> <li> <p>\u8d44\u6e90\u90e8\u5206\uff1a/User/1</p> </li> </ul> <p>\u7531\u4e8e\u6570\u636e\u53ef\u4ee5\u6765\u6e90\u4e8e\u8868\u683c\u3001xml\u3001\u7f51\u683c\u7b49\uff0c\u6240\u4ee5\u8d44\u6e90\u90e8\u5206\u5199\u6cd5\u4e0d\u7edf\u4e00</p> <p>5.ContentResolve</p> <p>ContentResolve\u662f\u64cd\u7eb5\u6570\u636e\u7684\uff0c\u800cContentProvider\u662f\u8d1f\u8d23\u63a5\u6536\u5904\u7406\u6570\u636e\u7684\uff0c\u56e0\u800c\u4e24\u8005\u65b9\u6cd5\u76f8\u540c\u3002</p> <ul> <li>getContextResolve() \u83b7\u53d6ContextResolve\u7684\u5bf9\u8c61</li> <li>insert(Uri,ContentValues)</li> <li>delete(Uri,String where,String[] selectionArgs)</li> <li>update(Uri,ContentValues values,String Where,String[] selectionArgs)</li> <li>query()</li> </ul> <p>6.ContentProvider\u3001ContentResolve\u548cUri\u7684\u5173\u7cfb\u548c\u4f7f\u7528\u89c4\u5219</p> <p></p> <p>\u56e0\u6b64\uff0cContentResolve\u6839\u636eUri\u95f4\u63a5\u8c03\u7528ContenProvider.</p> <p>7.UriMatcher\u5de5\u5177\u7c7b</p> <ul> <li>void addURI(String authority,string path,int code) \u7ed9UriMatcher\u6ce8\u518c\u6807\u8bc6\u7801</li> <li>int match(Uri uri)  \u8fd4\u56de\u6807\u8bc6\u7801</li> </ul> <p>8.ContentUris\u5de5\u5177\u7c7b</p> <ul> <li>withAppendedId(uri,id):\u7528\u4e8e\u4e3a\u8def\u5f84\u52a0\u4e0aid\u90e8\u5206</li> <li>parseId(uri):\u7528\u4e8e\u4ece\u6307\u5b9aUri\u4e2d\u89e3\u6790\u51fa\u6240\u5305\u542b\u7684ID\u503c</li> </ul> <p>9.ContentObserver\u7c7b</p> <p>\u5f53<code>ContentProvider</code> \u4e2d\u7684\u6570\u636e\u53d1\u751f\u53d8\u5316\uff08\u589e\u3001\u5220 &amp; \u6539\uff09\u65f6\uff0c\u5c31\u4f1a\u89e6\u53d1\u8be5 <code>ContentObserver</code>\u7c7b</p> <p>10\u3001MIME\u6570\u636e\u7c7b\u578b</p> <p>\u4f5c\u7528\uff1a\u6307\u5b9a\u67d0\u4e2a\u6269\u5c55\u540d\u7684\u6587\u4ef6\u7528\u67d0\u79cd\u5e94\u7528\u7a0b\u5e8f\u6765\u6253\u5f00</p> <p>MIME\u6709\u4e24\u79cd\u5f62\u5f0f</p> <pre><code>// \u5f62\u5f0f1\uff1a\u5355\u6761\u8bb0\u5f55  \nvnd.android.cursor.item/\u81ea\u5b9a\u4e49\n// \u5f62\u5f0f2\uff1a\u591a\u6761\u8bb0\u5f55\uff08\u96c6\u5408\uff09\nvnd.android.cursor.dir/\u81ea\u5b9a\u4e49 \n</code></pre> <p>11\u3001ContentProvider\u7684\u542f\u52a8\u6d41\u7a0b</p> <p></p> <p>12\u3001ContentProvider \u8bf7\u6c42\u6d41\u7a0b</p> <p>\u4e3b\u8981\u5206\u4e09\u7ea7\uff1a\u672c\u5730-\u300bAMS-\u300b\u542b\u6709\u8be5ContentProvider\u7684\u8fdb\u7a0b</p> <p></p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#6context","title":"6\u3001Context\u5bf9\u8c61","text":"<p>8.1 \u5b9a\u4e49\uff1a\u4e0a\u4e0b\u6587</p> <p></p> <ul> <li>\u5b83\u63cf\u8ff0\u7684\u662f\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u73af\u5883\u7684\u4fe1\u606f\uff0c\u5373\u4e0a\u4e0b\u6587\u3002</li> <li>\u8be5\u7c7b\u662f\u4e00\u4e2a\u62bd\u8c61(abstract class)\u7c7b\uff0cAndroid\u63d0\u4f9b\u4e86\u8be5\u62bd\u8c61\u7c7b\u7684\u5177\u4f53\u5b9e\u73b0\u7c7b(\u540e\u9762\u6211\u4eec\u4f1a\u8bb2\u5230\u662fContextIml\u7c7b)\u3002</li> <li>ContextWrapper Context\u5c01\u88c5\u7c7b ContextImpl  Context\u5b9e\u73b0\u7c7b</li> <li>\u7531\u7ee7\u627f\u7ed3\u6784\u53ef\u77e5:Context\u5206\u4e3a\u4e09\u7c7b\uff1aApplication\u3001Service\u548cActivity</li> <li>Context\u6570\u91cf:Service\u6570\u91cf+Activity\u6570\u91cf+1\uff1b</li> <li>\u901a\u8fc7\u5b83\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6\u5e94\u7528\u7a0b\u5e8f\u7684\u8d44\u6e90\u548c\u7c7b\uff0c\u4e5f\u5305\u62ec\u4e00\u4e9b\u5e94\u7528\u7ea7\u522b\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a\u542f\u52a8\u4e00\u4e2aActivity\uff0c\u53d1\u9001\u5e7f\u64ad\uff0c\u63a5\u53d7Intent</li> </ul> <p>\u4fe1\u606f\u7b49\u3002</p> <p>8.2 \u4e00\u4e9b\u65b9\u6cd5</p> <p>\u5206\u6790\u6e90\u7801\uff1a</p> <p>ContextWraaper\u4f7f\u7528\u7684\u5bf9\u8c61mBase\u662f\u4e00\u4e2aContextImpl\u5bf9\u8c61\uff0c\u56e0\u6b64\uff1a</p> <p></p> <p>\u8981\u5148 Create()\uff0c\u624d\u80fd\u4f7f\u7528ContextWraaper\u7684\u65b9\u6cd5.</p> <p>8.3 \u5177\u4f53\u521b\u5efaApplication\u7684\u65f6\u673a</p> <p>\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5728\u7b2c\u4e00\u6b21\u542f\u52a8\u65f6\uff0c\u90fd\u4f1a\u9996\u5148\u521b\u5efaApplication\u5bf9\u8c61\u3002\u5982\u679c\u5bf9\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u4e00\u4e2aActivity(startActivity)\u6d41\u7a0b\u6bd4\u8f83\u6e05\u695a\u7684\u8bdd\uff0c\u521b\u5efaApplication\u7684\u65f6\u673a\u5728\u521b\u5efahandleBindApplication()\u65b9\u6cd5\u4e2d\uff0c\u8be5\u51fd\u6570\u4f4d\u4e8e ActivityThread.java\u7c7b\u4e2d  8.4 \u521b\u5efaActivity\u5bf9\u8c61\u7684\u65f6\u673a</p> <p>\u901a\u8fc7startActivity()\u6216startActivityForResult()\u8bf7\u6c42\u542f\u52a8\u4e00\u4e2aActivity\u65f6\uff0c\u5982\u679c\u7cfb\u7edf\u68c0\u6d4b\u9700\u8981\u65b0\u5efa\u4e00\u4e2aActivity\u5bf9\u8c61\u65f6\uff0c\u5c31\u4f1a\u56de\u8c03handleLaunchActivity()\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u7ee7\u800c\u8c03\u7528performLaunchActivity()\u65b9\u6cd5\uff0c\u53bb\u521b\u5efa\u4e00\u4e2aActivity\u5b9e\u4f8b\uff0c\u5e76\u4e14\u56de\u8c03onCreate()\uff0conStart()\u65b9\u6cd5\u7b49\uff0c \u51fd\u6570\u90fd\u4f4d\u4e8e ActivityThread.java\u7c7b\u3002</p> <p>8.5 \u5177\u4f53\u521b\u5efa Service\u5bf9\u8c61\u7684\u65f6\u673a</p> <p>\u901a\u8fc7startService\u6216\u8005bindService\u65f6\uff0c\u5982\u679c\u7cfb\u7edf\u68c0\u6d4b\u5230\u9700\u8981\u65b0\u521b\u5efa\u4e00\u4e2aService\u5b9e\u4f8b\uff0c\u5c31\u4f1a\u56de\u8c03handleCreateService()\u65b9\u6cd5\uff0c\u5b8c\u6210\u76f8\u5173\u6570\u636e\u64cd\u4f5c\u3002handleCreateService()\u51fd\u6570\u4f4d\u4e8e ActivityThread.java\u7c7b</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#7intent","title":"7\u3001Intent","text":"<p>1\u3001\u5b9a\u4e49</p> <p>\u200b       Android\u7684\u5e94\u7528\u7a0b\u5e8f\u5305\u542b\u7684\u4e09\u79cd\u7ec4\u4ef6\uff1aAcitivity\u3001Boradcast Receiver\u548cService\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7Intent\u542f\u52a8\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u5229\u7528Intent\u8fdb\u884c\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\u3002</p> <ul> <li>\u6784\u9020\u51fd\u6570\uff1a</li> </ul> <p>Intent(String action)</p> <p>Intent(String action, Uri uri)</p> <p>Intent(Context packageContext, Class&lt;?&gt; cls)</p> <p>Intent(String action, Uri uri,Context packageContext, Class&lt;?&gt; cls) </p> <p>2\u3001\u5c5e\u6027</p> <ul> <li> <p>Component\u5c5e\u6027\u53ca\u5176\u914d\u7f6e</p> </li> <li> <p>\u6784\u9020\u51fd\u6570</p> <ul> <li>ComponentName(String pkg,String cls)\uff1a\u521b\u5efapkg\u5305\u4e0b\u7684cls\u7c7b\u6240\u5bf9\u5e94\u7684\u7ec4\u4ef6</li> <li>ComponentName(Context pkg,String cls):\u521b\u5efapkg\u6240\u5bf9\u5e94\u7684\u5305\u4e0bcls\u7c7b\u6240\u5bf9\u7528\u5e94\u7684\u7ec4\u4ef6\u3002</li> <li>ComponentName(Context pkg,Class&lt;?&gt; cls):\u521b\u5efapkg\u6240\u5bf9\u5e94\u7684\u5305\u4e0bcls\u7c7b\u6240\u5bf9\u7528\u5e94\u7684\u7ec4\u4ef6</li> </ul> </li> <li>\u65b9\u6cd5<ul> <li>setClass(Context packageContext,Class&lt;?&gt; cls):\u8bbe\u7f6e\u8be5Intent\u5c06\u8981\u542f\u52a8\u7684\u7ec4\u4ef6\u6240\u5bf9\u5e94\u7684\u7c7b\u540d</li> <li>setClassName(Context packageContext,string className):\u8bbe\u7f6e\u8be5Intent\u5c06\u8981\u542f\u52a8\u7684\u7ec4\u4ef6\u6240\u5bf9\u5e94\u7684\u7c7b\u540d</li> <li>setClassName(String packageContext,string className):\u8bbe\u7f6e\u8be5Intent\u5c06\u8981\u542f\u52a8\u7684\u7ec4\u4ef6\u6240\u5bf9\u5e94\u7684\u7c7b\u540d</li> </ul> </li> <li>\u51e0\u4e4e\u4e0d\u9700\u8981Intent-filter\u7684\u914d\u7f6e</li> <li> <p>setClassName()\u548cComPonentName\u7684\u6e90\u7801\u662f\u4e00\u6837\u7684\u3002</p> </li> <li> <p>Action Category\u5c5e\u6027\u53ca\u5176\u914d\u7f6e</p> </li> <li> <p>Action \u4ee3\u8868Intent\u6240\u5bf9\u8981\u5b8c\u6210\u7684\u4e00\u4e2a\u62bd\u8c61\u52a8\u4f5c\uff0cCategory\u662f\u4e3aAction\u589e\u52a0\u989d\u5916\u7684\u9644\u52a0\u7c7b\u522b\u4fe1\u606f\u3002</p> </li> <li> <p>\u53ef\u4ee5\u67090-N\u4e2aAction\u548cCategory,\u4f46\u662fIntent\u5bf9\u8c61\u6700\u591a\u53ea\u80fd\u6709\u4e00\u4e2aaction,Category\u4ecd\u7136\u53ef\u4ee5\u6709\u591a\u4e2a <li> <p>\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u6307\u5b9aanroid:name\u5c5e\u6027\u5373\u53ef</p> </li> <li> <p>Action\u548ccategory\u5c5e\u6027\u63d0\u4f9b\u4e86\u5927\u91cf\u6807\u51c6\u7684\u5e38\u91cf\uff0c\u65b9\u4fbf\u6211\u4eec\u6253\u5f00\u4e00\u4e9b\u6570\u636e\u548c\u6267\u884c\u4e00\u4e9b\u64cd\u4f5c\uff0c\u5177\u4f53\u7684\u53ef\u4ee5\u5728\u5b98\u7f51\u4e0a\u67e5\u3002</p> <ul> <li>\u6807\u51c6\u7684\u5e38\u91cf\u65b9\u4fbf\u6211\u4eec\u76f4\u63a5\u8bbf\u95ee\u4e00\u4e9b\u624b\u673a\u5185\u7684\u8bbe\u7f6e\u4fe1\u606f</li> </ul> <p>```java   //\u67e5\u8be2\u8054\u7cfb\u4eba\u65b9\u5f0f\u7684demo   Intent intent = new Intent();   intent.setAction(Intent.ACTION_PICK);  //Pick an item from the data, returning what was selected.   intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);//\u8054\u7cfb\u4eba\u7c7b\u578b</p> <p>```</p> </li> <li> <p>Data Type \u5c5e\u6027\u53ca\u914d\u7f6e</p> </li> <li>Data \u548cType\u5c5e\u6027\u4f1a\u76f8\u4e92\u8986\u76d6\uff0c\u540e\u8bbe\u7f6e\u7684\u4f1a\u8986\u76d6\u524d\u8bbe\u7f6e\u7684\uff0c\u82e5\u60f3\u4e24\u8005\u90fd\u8bbe\u7f6esetDataAndType()\u65b9\u6cd5\u3002</li> <li>Date\u5c5e\u6027\u63a5\u53d7\u4e00\u4e2aUri\u5bf9\u8c61\u3002Type\u5c5e\u6027\u7528\u4e8e\u6307\u5b9aData\u5c5e\u6027\u6240\u5bf9\u5e94\u7684MIME\u7c7b\u578b\u3002</li> <li>\u5728interfilter\u4e2d\u4e00\u822c\u67090-1\u4e2aData\u5c5e\u6027\u3002</li> <li>Data\u652f\u6301\u7684\u5c5e\u6027<ul> <li>mimeType Data\u7684Type\u5c5e\u6027</li> <li>scheme</li> <li>host</li> <li>port</li> <li>path </li> <li>pathPrefix   path\u524d\u7f00</li> <li>pathPattern path\u5b57\u7b26\u4e32\u6a21\u677f</li> </ul> </li> <li>Data\u7684\u5339\u914d\u89c4\u5219\uff08port\u548cpath\u53ef\u6709\u53ef\u65e0\uff0c\u56e0\u6b64\u5339\u914d\u65f6\u6ce8\u610f\uff09<ul> <li>Type\u5c5e\u6027\u548cmimiType\u4e00\u81f4\u624d\u80fd\u542f\u52a8</li> <li>\u82e5\u53ea\u6307\u5b9a\u4e86scheme,Data\u7684\u6570\u636escheme\u4fdd\u6301\u4e00\u81f4\u5373\u53ef\u542f\u52a8</li> <li>\u82e5\u53ea\u6307\u5b9a\u4e86scheme\u3001host,Data\u7684\u6570\u636escheme\u3001host\u4fdd\u6301\u4e00\u81f4\u5373\u53ef\u542f\u52a8</li> <li>\u82e5\u53ea\u6307\u5b9a\u4e86scheme\u3001host\u3001port,Data\u7684\u6570\u636escheme\u3001host\u3001port\u4fdd\u6301\u4e00\u81f4\u5373\u53ef\u542f\u52a8</li> <li>\u82e5\u53ea\u6307\u5b9a\u4e86scheme\u3001host\u3001path,Data\u7684\u6570\u636escheme\u3001host\u3001path\u4fdd\u6301\u4e00\u81f4\u5373\u53ef\u542f\u52a8</li> <li>\u82e5\u53ea\u6307\u5b9a\u4e86scheme\u3001host\u3001port\u3001path,Data\u7684\u6570\u636escheme\u3001host\u3001port\u3001path\u4fdd\u6301\u4e00\u81f4\u5373\u53ef\u542f\u52a8</li> </ul> </li> <li>Extra\u5c5e\u6027   \u662f\u4e00\u4e2aBundle\u5bf9\u8c61</li> <li> <p>Flag\u5c5e\u6027  \u5177\u6709\u72ec\u7279\u529f\u80fd  \u67e5\u770b\u6587\u6863</p> </li> <li> <p>\u547c\u8d77\u53e6\u4e00\u4e2aApp</p> </li> <li> <p>\u901a\u8fc7\u5305\u540d\u548c\u7c7b\u540d</p> <p><code>java Intent intent = new Intent(); ComponentName cn = new    //packageName className   ComponentName(\"com.example.moudlesipc\",\"com.example.moudlesipc.MainActivity\"); intent.setComponent(cn); intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); startActivity(intent);</code></p> </li> <li> <p>\u901a\u8fc7Activon</p> <p><code>java Intent intent = new Intent(); //\u81ea\u5b9a\u4e49com.example.moudle intent.setAction(\"com.example.moudle\"); intent.addCategory(Intent.CATEGORY_DEFAULT); intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); startActivity(intent);</code></p> <p>\u6ce8:\u81ea\u5b9a\u4e49Action\u548c<code>android.intent.action.VIEW</code>\uff0c\u4e0d\u80fd\u4e00\u8d77\u4f7f\u7528\uff0c\u4e0d\u652f\u6301\uff0c\u539f\u56e0\u672a\u77e5</p> </li> <li> <p>\u901a\u8fc7Scheme</p> <p><code>java Intent intent = new Intent(); intent.setData(Uri.parse(\"arouter://m.aliyun.com\")); intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); startActivity(intent);</code></p> <p>\u6ce8\uff1a\u547c\u8d77Scheme \u9700\u8981<code>android.intent.action.VIEW</code>\uff0c\u5426\u5219\u4e0d\u652f\u6301\u5c55\u793a\u3002</p> </li> <li> <p>\u7ec4\u4ef6\u66b4\u9732\u5c5e\u6027\uff1a<code>android:exported</code></p> <ul> <li>\u5b9a\u4e49\uff1a\u5f53\u524d\u7ec4\u4ef6\u80fd\u5426\u88ab\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u7ec4\u4ef6\u8c03\u7528\u6216\u8ddf\u5b83\u4ea4\u4e92\u3002\u56db\u5927\u7ec4\u95f4\u7686\u6709\u8be5\u5c5e\u6027</li> <li>True\uff1a\u53ef\u4ee5\u88ab\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u7ec4\u4ef6\u8c03\u7528\u6216\u8ddf\u5b83\u4ea4\u4e92\u3002</li> <li> <p>false:\u53ea\u6709\u540c\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u7ec4\u4ef6\u6216\u5e26\u6709\u76f8\u540c\u7528\u6237ID\u7684\u5e94\u7528\u7a0b\u5e8f\u624d\u80fd\u542f\u52a8\u6216\u7ed1\u5b9a\u8be5\u670d\u52a1\u3002</p> </li> <li> <p>Activity\u3001Service\u3001Boardcast Receiver:</p> </li> <li> <p>\u65e0intent filter:\u9ed8\u8ba4False;</p> </li> <li> <p>\u81f3\u5c11\u4e00\u4e2aintent filter: \u9ed8\u8ba4true</p> </li> <li> <p>\u53ef\u4ee5\u4f7f\u7528permission\u6765\u9650\u5236\u5916\u90e8\u5b9e\u4f53\u5524\u9192\u5f53\u524d\u7ec4\u4ef6</p> <p><code>xml android:permission=\"@string/app_name\"</code></p> </li> <li> <p>Content Provider:</p> </li> <li> <p>Android sdk &gt; 16 \u9ed8\u8ba4false</p> </li> <li>Android sdk &lt;= 16 \u9ed8\u8ba4true</li> <li>\u53ef\u4ee5\u4f7f\u7528permission\u6765\u9650\u5236\u5916\u90e8\u5b9e\u4f53\u5524\u9192\u5f53\u524dProvider</li> </ul> </li>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#8buddle","title":"8\u3001Buddle\u7684\u4f7f\u7528","text":""},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#9onsaveinstancestateonrestoreinstancestate","title":"9\u3001OnSaveInstanceState()&amp;&amp;OnRestoreInstanceState()","text":"<p>\u5f53\u4e00\u4e2aActivity\u88abkill\u4e4b\u524d\uff0c\u4f1a\u8c03\u7528onSaveInstanceState()\u6765\u4fdd\u5b58\u5f53\u524dactivity\u7684\u72b6\u6001\u6570\u636e\u3002\u7136\u540eActivity\u91cd\u65b0\u6253\u5f00\u65f6\uff0c\u7528\u6765\u4fdd\u5b58\u72b6\u6001\u4fe1\u606f\u7684Bundle\u4f1a\u540c\u65f6\u4f20\u7ed9\u4e24\u4e2a\u65b9\u6cd5,\u5373onRestoreInstanceState() and onCreate()\u3002</p> <ul> <li>\u4e00\u822c\u65f6\u673a\u4e3a\u7cfb\u7edf\u5f02\u5e38\u9000\u51fa\u65f6\uff0c\u4f1a\u8c03\u7528onSaveInstanceState()\u3002</li> <li>\u8d44\u6e90\u76f8\u5173\u7684\u7cfb\u7edf\u914d\u7f6e\u53d1\u751f\u6539\u53d8\u5bfc\u81f4Activity\u88ab\u6740\u6b7b\u5e76\u91cd\u65b0\u6784\u5efa</li> <li>\u56e0\u4e3a\u7cfb\u7edf\u5185\u5b58\u4e0d\u8db3\u6740\u6b7b\u67d0\u4e9b\u4f4e\u4f18\u5148\u7ea7\u7684Activity\u800c\u540e\u91cd\u65b0\u6784\u5efa</li> <li>\u7f51\u4e0a\u8bf4\u65f6\u673a\u6709\uff1a\u6a2a\u7ad6\u5c4f\u5207\u6362\u3001Home\u952e\u3001\u8df3\u8f6c\u5230\u7b2c\u4e09\u65b9\u5e94\u7528\u65f6\uff0c\u4f1a\u8c03\u7528\uff0c\u4f46\u662f\u6211\u6682\u65f6\u6ca1\u9a8c\u8bc1\u51fa\u6765\u3002</li> </ul> <p>onSavedInstanceState()\u5c31\u662f\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u4e3a\u6211\u4eec\u4fdd\u5b58\u5f53\u524dActivity\u7684\u89c6\u56fe\u7ed3\u6784\uff0c\u5982\u6587\u672c\u6846\u7528\u6237\u8f93\u5165\u7684\u6570\u636e\uff0cListView\u6eda\u52a8\u7684\u4f4d\u7f6e\u7b49\uff0c\u8fd9\u4e9bView\u76f8\u5173\u7684\u72b6\u6001\u90fd\u4f1a\u4e3a\u6211\u4eec\u4fdd\u5b58\uff0c\u5176\u4e2d\u7684\u6570\u636e\u4ee5Bundle\u6570\u636e\u5f62\u5f0f\u8fdb\u884c\u5b58\u50a8\uff0c\u8c03\u7528\u65f6\u673a\u5728onStop()\u4e4b\u524d\u3002</p> <p>OnRestoreInstanceState() \u548c OnSaveInstanceState()\u5e76\u4e0d\u5728\u751f\u547d\u5468\u671f\u4e2d\u3002 OnRestoreInstanceState()\u5728onStart()\u65b9\u6cd5\u53ea\u6709\u8c03\u7528\uff0c\u5c06OnSaveInstanceState\u4fdd\u5b58\u7684\u6570\u636e\u6062\u590d\u3002</p> <p></p> <p>Activity\u4e2d:OnSaveInstanceState\u4fdd\u5b58\u7684\u6570\u636e\u4f1a\u5728onCreate()\u4e2d\u83b7\u53d6\uff0c\u5728onCreate()\u4e2d\u83b7\u53d6\u9700\u8981\u5224\u65adBundle\u662f\u5426\u4e3a\u7a7a\u3002</p> <p>Fragment\u4e2d\uff1a\u6ca1\u6709OnRestoreInstanceState\u65b9\u6cd5\uff0c\u4fdd\u5b58\u6570\u636e\u4ecd\u7136\u5728OnSaveInstanceState(),\u56e0\u6b64\u6062\u590d\u6570\u636e\u5e94\u8be5\u653e\u5728onCreateView()\u548conActivityCreated()\u4e2d\u3002</p> <p>\u4f46\u662f\u6709\u4e00\u79cd\u60c5\u51b5\u662f\u4e0d\u4f1a\u8d70\u5230OnSaveInstanceState()\u4e2d\uff0cFragmentA \u6253\u5f00\uff0c\u7136\u540e\u6253\u5f00FragmentB\uff0c\u63a5\u7740\u8fd4\u56deA\u3002</p> <p>\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528Fragment#arguments()\u5728OnDestoryView\u4e2d\u53bb\u4fdd\u5b58\u6570\u636e\u3002</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#10onnewintent-activity","title":"10.onNewIntent()  \u2014\u2014Activity","text":"<p>\u5982\u679c\u5728 AndroidManifest.xml \u4e2d\uff0c\u5c06 Activity \u7684 launchMode \u8bbe\u7f6e\u6210\u4e86 \"singleTop\" \u6a21\u5f0f\uff0c\u6216\u8005\u5728\u8c03\u7528 startActivity(Intent) \u65f6\uff0c\u8bbe\u7f6e\u4e86FLAG_ACTIVITY_SINGLE_TOP \u6807\u8bc6\uff0c\u90a3\u4e48\uff0c\u5f53\u8be5 Activity \u518d\u6b21\u88ab\u542f\u52a8\u65f6\uff0c\u5982\u679c\u5b83\u4f9d\u7136\u5b58\u5728\u4e8e Activity \u6808\u4e2d\uff0c\u5e76\u4e14\u521a\u597d\u5904\u4e8e\u6808\u7684\u6700\u9876\u5c42\u65f6\uff0c\u90a3\u4e48\u5b83\u5c06\u4e0d\u4f1a\u88ab\u91cd\u65b0\u521b\u5efa\uff0c\u800c\u662f\u76f4\u63a5\u4f7f\u7528\u539f\u6765\u7684\u5b9e\u4f8b.</p> <p>\u5177\u4f53\u548c\u542f\u52a8\u6a21\u5f0f\u7684\u5173\u7cfb\u5982\u4e0b\uff1a</p> <ul> <li>SingleTop</li> </ul> <p>\u5982\u679c\u5f53\u524d\u4efb\u52a1\u7684\u9876\u90e8\u5df2\u5b58\u5728 Activity \u7684\u5b9e\u4f8b\uff0c\u5219\u7cfb\u7edf\u4f1a\u901a\u8fc7\u8c03\u7528\u5176 <code>onNewIntent()</code> \u65b9\u6cd5\u6765\u5c06 intent \u8f6c\u9001\u7ed9\u8be5\u5b9e\u4f8b\uff0c\u800c\u4e0d\u662f\u521b\u5efa Activity \u7684\u65b0\u5b9e\u4f8b\u3002</p> <ul> <li>SingleTask</li> </ul> <p>\u5982\u679c\u53e6\u5916\u7684\u4efb\u52a1\u4e2d\u5df2\u5b58\u5728\u8be5 Activity \u7684\u5b9e\u4f8b\uff0c\u5219\u7cfb\u7edf\u4f1a\u901a\u8fc7\u8c03\u7528\u5176 <code>onNewIntent()</code> \u65b9\u6cd5\u5c06 intent \u8f6c\u9001\u5230\u8be5\u73b0\u6709\u5b9e\u4f8b\uff0c\u800c\u4e0d\u662f\u521b\u5efa\u65b0\u5b9e\u4f8b\u3002Activity \u4e00\u6b21\u53ea\u80fd\u6709\u4e00\u4e2a\u5b9e\u4f8b\u5b58\u5728\u3002</p> <ul> <li>SingleInstance</li> </ul> <p>\u548cSingleTask\u76f8\u4f3c\u3002</p> <p>\u5176\u6b21\u5728\u4f7f\u7528StartActivity()\u4e2dIntent.addFlags(FLAG_ACTIVITY_SINGLE_TOP),\u4f1a\u8c03\u7528onNewIntent()\u65b9\u6cd5\u3002</p> <p>\u5728TabActivity+Activity +Fragment\u4e2d\uff0conRestrat()\u65b9\u6cd5\u6bcf\u6b21\u70ed\u542f\u52a8\u90fd\u4f1a\u8d70\u5230\uff0c\u4f46\u662fonNewIntent()\u6ca1\u6709\u8d70\u5230,\u5373\u70ed\u542f\u52a8\u4e0d\u4f1a\u8d70onNewIntent()\u3002</p> <p>\u5728TabActivity + Fragment\u4e2d\uff0conRestrat()\u65b9\u6cd5\u6bcf\u6b21\u70ed\u542f\u52a8\u90fd\u4f1a\u8d70\u5230\uff0c\u4f46\u662fonNewIntent()\u6ca1\u6709\u8d70\u5230,\u5373\u70ed\u542f\u52a8\u4e0d\u4f1a\u8d70onNewIntent()\u3002</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#11onacitivityresult-activityfragment","title":"11.onAcitivityResult --Activity&amp;&amp;Fragment","text":"<p>1.Activity\u548cFragment StartActvityResult()\u540e\uff0c\u662f\u5206\u5f00\u7684\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p>Fragment.startActivityResult(intent,requestCode), Fragment#onAcitivityResult()\u4f1a\u6536\u5230\u6b63\u786e\u7684requestcode,\u800cActivity\u4f1a\u6536\u5230RequestCode\uff0c\u4f46\u662f\u7ed3\u679c\u4e0d\u5bf9\u3002</p> <p>Activity.startActivityResult(intent,requestCode), Activity#onAcitivityResult()\u4f1a\u6536\u5230\u6b63\u786e\u7684requestcode,\u800cFragment\u4e0d\u4f1a\u6536\u5230RequestCode\u3002</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#ui","title":"UI","text":""},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#1fragement","title":"1\u3001Fragement \u751f\u547d\u5468\u671f","text":"<p>\u7531\u4e8eFragement \u662f\u5d4c\u5165\u5728Activity\u5f53\u4e2d\u7684UI\u7247\u6bb5\uff0c\u5176\u751f\u547d\u5468\u671f\u548cActivity\u975e\u5e38\u76f8\u4f3c\uff0c\u4f46\u662f\u53c8\u590d\u6742\u3002</p> <ul> <li>onAttach() Frement\u548cActivity\u76f8\u5173\u8054\u65f6\u8c03\u7528\uff0c\u53ef\u4ee5\u901a\u8fc7\u8be5\u65b9\u6cd5\u83b7\u53d6Activity\u5f15\u7528\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7getArguments()\u83b7\u53d6\u53c2\u6570\u3002</li> <li>onCreate():Frement\u88ab\u521b\u5efa\u65f6\u8c03\u7528\u3002</li> <li>onCreateView():\u521b\u5efaFragment\u7684\u5e03\u5c40\u3002</li> <li>onActivtyCreated():\u5f53Activity\u5b8c\u6210\u521b\u5efa\u65f6\u8c03\u7528\u3002</li> <li>onStart():\u5f53Fragment\u53ef\u89c1\u65f6\u8c03\u7528\u3002</li> <li>onResume():\u5f53Fragment\u53ef\u4ea4\u4e92\u65f6\u8c03\u7528\u3002</li> <li>onPause():\u5f53Fragment\u4e0d\u53ef\u4ea4\u4e92\u4f46\u53ef\u89c1\u65f6\u8c03\u7528\u3002</li> <li>onStop():\u5f53Fragment\u4e0d\u53ef\u89c1\u65f6\u8c03\u7528</li> <li>onDestoryView():\u5f53Fragment\u7684UI\u4ece\u89c6\u56fe\u7ed3\u6784\u4e2d\u79fb\u9664\u65f6\u8c03\u7528\u3002</li> <li>onDestory():\u5f53Fragment\u9500\u6bc1\u65f6\u8c03\u7528</li> <li>onDetah():\u5f53Fragment\u548cActivity\u63a5\u89e6\u5173\u7cfb\u65f6\u8c03\u7528\u3002</li> </ul> <p>\u5f53\u4e00\u4e2afragment\u88ab\u521b\u5efa\u7684\u65f6\u5019\uff0c\u9700\u8c03\u7528\u4ee5\u4e0b\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff1aonAttach(),  onCreate(),  onCreateView(),  onActivityCreated()</p> <p>\u5f53\u8fd9\u4e2afragment\u5bf9\u7528\u6237\u53ef\u89c1\u7684\u65f6\u5019\uff0c\u9700\u8c03\u7528\uff1aonStart() ,onResume()</p> <p>\u5f53\u8fd9\u4e2afragment\u8fdb\u5165\u540e\u53f0\u6a21\u5f0f\u9700\u8c03\u7528\uff1aonPause(),onStop()</p> <p>\u5f53\u8fd9\u4e2afragment\u88ab\u9500\u6bc1\u6216\u8005\u662f\u6301\u6709\u5b83\u7684Activity\u88ab\u9500\u6bc1\u4e86\uff0c\u8c03\u7528\uff1aonPause() ,onStop(), onDestroyView(),  onDestroy() onDetach()</p> <p>\u5c06Fragment\u6dfb\u52a0\u5230Activity\u7684\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <p>1\u3001\u9759\u6001\u6dfb\u52a0\uff1a\u4ee5\u6807\u7b7e\u7684\u5f62\u5f0f\u6dfb\u52a0\u5230Activity\u7684\u5e03\u5c40\u4e2d\u3002 <p>2\u3001\u52a8\u6001\u6dfb\u52a0\uff1a</p> <p>FragmentManager\uff1a\u7528\u6765\u7ba1\u7406Activity\u4e2d\u7684fragment,app\u5305\u4e2d\u4f7f\u7528getFragmentManager()   v4\u5305\u4e2dgetSupportFragmentManager</p> <p>FragmentTransaction:\u4e8b\u52a1,\u7528\u6765\u6dfb\u52a0\uff0c\u79fb\u9664\uff0c\u66ff\u6362fragment,FragmentTransaction transaction = fm.benginTransatcion();//\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1</p> <p>transaction.add() :\u5f80Activity\u4e2d\u6dfb\u52a0\u4e00\u4e2aFragment</p> <p>transaction.remove() :\u4eceActivity\u4e2d\u79fb\u9664\u4e00\u4e2aFragment\uff0c\u5982\u679c\u88ab\u79fb\u9664\u7684Fragment\u6ca1\u6709\u6dfb\u52a0\u5230\u56de\u9000\u6808\uff0c\u8fd9\u4e2aFragment\u5b9e\u4f8b\u5c06\u4f1a\u88ab\u9500\u6bc1\u3002</p> <p>transaction.replace():\u4f7f\u7528\u53e6\u4e00\u4e2aFragment\u66ff\u6362\u5f53\u524d\u7684\uff0c\u5b9e\u9645\u4e0a\u5c31\u662fremove()\u7136\u540eadd()\u7684\u5408\u4f53~</p> <p>transaction.hide()\uff1a\u9690\u85cf\u5f53\u524d\u7684Fragment\uff0c\u4ec5\u4ec5\u662f\u8bbe\u4e3a\u4e0d\u53ef\u89c1\uff0c\u5e76\u4e0d\u4f1a\u9500\u6bc1</p> <p>transaction.show()\uff1a\u663e\u793a\u4e4b\u524d\u9690\u85cf\u7684Fragment</p> <p>transaction.commit():\u63d0\u4ea4\u4e00\u4e2a\u4e8b\u52a1</p> <p>detach()\uff1a\u4f1a\u5c06view\u4eceUI\u4e2d\u79fb\u9664,\u548cremove()\u4e0d\u540c,\u6b64\u65f6fragment\u7684\u72b6\u6001\u4f9d\u7136\u7531FragmentManager\u7ef4\u62a4\u3002</p> <p>\u6ce8\u610f\uff1a\u5728\u7528fragment\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u7ecf\u5e38\u9047\u5230\u8fd9\u6837Activity\u72b6\u6001\u4e0d\u4e00\u81f4\uff1aState loss\u8fd9\u6837\u7684\u9519\u8bef\u3002\u4e3b\u8981\u662f\u56e0\u4e3a\uff1acommit\u65b9\u6cd5\u4e00\u5b9a\u8981\u5728Activity.onSaveInstance()\u4e4b\u524d\u8c03\u7528\u3002</p> <p>\u4e0a\u8ff0\uff0c\u57fa\u672c\u662f\u64cd\u4f5cFragment\u7684\u6240\u6709\u7684\u65b9\u5f0f\u4e86\uff0c\u5728\u4e00\u4e2a\u4e8b\u52a1\u5f00\u542f\u5230\u63d0\u4ea4\u53ef\u4ee5\u8fdb\u884c\u591a\u4e2a\u7684\u6dfb\u52a0\u3001\u79fb\u9664\u3001\u66ff\u6362\u7b49\u64cd\u4f5c\u3002</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff1a\u5982\u679c\u4f60\u559c\u6b22\u4f7f\u7528Fragment\uff0c\u4e00\u5b9a\u8981\u6e05\u695a\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u54ea\u4e2a\u4f1a\u9500\u6bc1\u89c6\u56fe\uff0c\u54ea\u4e2a\u4f1a\u9500\u6bc1\u5b9e\u4f8b\uff0c\u54ea\u4e2a\u4ec5\u4ec5\u53ea\u662f\u9690\u85cf\uff0c\u8fd9\u6837\u624d\u80fd\u66f4\u597d\u7684\u4f7f\u7528\u5b83\u4eec\u3002</p> <p>Fragment\u7684\u751f\u547d\u5468\u671f\u548cActivity\u7684\u751f\u547d\u5468\u671f\u7684\u8054\u7cfb\uff0c\u6b64\u65f6\u662f\u52a0\u4e86addToBackStack()</p> <p>\u7b2c\u4e00\u6b21\u542f\u52a8\uff1a</p> <p>A\uff1aonCreate()</p> <p>F1:onAttach()</p> <p>F1:onCreate()</p> <p>F1:onCreateView()</p> <p>F1:onActivityCreated()</p> <p>F1:onStart()</p> <p>A:onStart()</p> <p>A:onResume()</p> <p>F1:onResume()</p> <p>\u66ff\u6362\u7247\u6bb5\uff1a</p> <p>F2:onAttach\uff08\uff09</p> <p>F2:onCreate\uff08\uff09</p> <p>F1:onPause()</p> <p>F1:onStop\uff08\uff09</p> <p>F1\uff1aonDestoryView()</p> <p>F2:onCreateview()</p> <p>F2\uff1aonActivityCreated()</p> <p>F2:onStart()</p> <p>F2:onResume()</p> <p>\u6309\u8fd4\u56de\u952e\uff1a</p> <p>F2:onPause()</p> <p>F2:onStop()</p> <p>F2:onDestoryView()</p> <p>F2:onDestory()</p> <p>F2:onDetach()</p> <p>F1:CreateView()</p> <p>F1:onActivityCreated()</p> <p>F1:onStart\uff08\uff09</p> <p>F1\uff1aonResume()</p> <p>\u9000\u5230\u540e\u53f0\uff1a</p> <p>A:onPause\uff08\uff09</p> <p>F1\uff1aonPause()</p> <p>A:onStop()</p> <p>F1:onStop()</p> <p>\u91cd\u65b0\u542f\u52a8\uff1a</p> <p>A:Restart()</p> <p>F1:onStart()</p> <p>A:onStart()</p> <p>A:onResume()</p> <p>F1:onResume()</p> <p>\u8054\u7cfb\u4e0e\u533a\u522b\uff1a</p> Activity Fragment \u8054\u7cfb\uff1a \u90fd\u6709OnCreate\u5230OnDestory\u7684\u6d3b\u52a8\u72b6\u6001 \u533a\u522b\uff1a Create\u65f6\u53ea\u6709OnCreate Create\u65f6\u6709\uff1aonAttach()\u3001onCreate()\u3001onCreateView()\u3001onActivityCreated() Destory\u65f6\u53ea\u6709onDestory Destory\u65f6\u6709\uff1aonDestoryView()\u3001onDestory()\u3001onDetach() \u5b58\u5728onRestart() \u6ca1\u6709onRestart(),\u5728Activity Restart\u540e\u76f4\u63a5onStart() Activtity  onCreate()\u662f\u6700\u65e9\u7684 \u5176\u6b21onAttach()\u3001onCreate()\u3001onCreateView()\u3001onActivityCreated() Fragement\u7684onStart\u6d3b\u52a8\u5728ActivityOnStart()\u4e4b\u524d Fragement\u7684onResume\u3001onPause\u3001onStop\u6d3b\u52a8\u5728Activity\u4e4b\u540e"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#2view","title":"2\u3001View","text":"<p>1\u3001\u5b9a\u4e49</p> <p>\u5177\u4f53\u8868\u73b0\u4e3a\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\u7684\u5404\u79cd\u89c6\u56fe\u63a7\u4ef6\uff0c\u5982TextView\u3001LinearLayout\u7b49</p> <p>2\u3001\u89c6\u56fe\u7ed3\u6784</p> <p></p> <p>\u81ea\u4e0a\u800c\u4e0b\uff0c\u6811\u5f62\u9012\u5f52</p> <p>3\u3001\u7ed8\u5236\u6d41\u7a0b</p> <p></p> <p>activity\u754c\u9762\u663e\u793a\u6d41\u7a0b:activity\u542f\u52a8\u540e\uff0c\u4e0d\u4f1a\u7acb\u9a6c\u53bb\u663e\u793a\u754c\u9762\u4e0a\u7684view\uff0c\u800c\u662f\u7b49\u5230onResume\u7684\u65f6\u5019\u624d\u4f1a\u771f\u6b63\u663e\u793aview\u7684\u65f6\u673a\uff0c\u9996\u5148\u4f1a\u89e6\u53d1windowManager.addView\u65b9\u6cd5\uff0c\u5728\u8be5\u65b9\u6cd5\u4e2d\u89e6\u53d1\u4ee3\u7406\u5bf9\u8c61WindowManagerGlobal\u7684addView\u65b9\u6cd5\uff0c\u4ee3\u7406\u5bf9\u8c61\u7684addView\u65b9\u6cd5\u4e2d\u521b\u5efa\u4e86viewRootImpl\uff0c\u5c06setContentView\u4e2d\u521b\u5efa\u7684decorView\u901a\u8fc7viewRootImpl\u7684setView\u65b9\u6cd5\u653e\u5230\u4e86viewRootImpl\u4e2d\uff0c\u6700\u7ec8\u7ecf\u8fc7viewRootImpl\u4e00\u7cfb\u5217\u7684\u65b9\u6cd5\u6700\u7ec8\u8c03\u7528performTraversals\u65b9\u6cd5\u3002</p> <p>Activity\u4e2d\u5305\u542b\u4e86\u4e00\u4e2aWindow\uff0cWindow\u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0cPhonewindow\u662fwindow\u7684\u5b9e\u73b0\uff0cPhoneWindow\u5bf9\u5e94\u4e00\u4e2aDecorView\u548cViewRootImpl\uff0cDecorView\u662f\u4e00\u4e2a\u5e94\u7528\u7a97\u53e3\u7684\u6839\u5bb9\u5668\uff0c\u5b83\u672c\u8d28\u4e0a\u662f\u4e00\u4e2aFrameLayout,\u662f\u6700\u9876\u5c42\u7684View\uff0c\u5305\u542b\u4e24\u4e2a\u5b50\u5143\u7d20\uff0cTitleView\u548cContentView\u3002</p> <ul> <li> <p>View\u7ed8\u5236\u7684\u8d77\u70b9\uff1aView\u7684\u7ed8\u5236\u662f\u7531ViewRoot\u6765\u8d1f\u8d23\u7684\u3002\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7a97\u53e3\u7684decorView\u90fd\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5173\u8054\u7684ViewRoot\u5bf9\u8c61\uff0c\u8fd9\u79cd\u5173\u8054\u5173\u7cfb\u662f\u7531WindowManager\u6765\u7ef4\u62a4\u7684\u3002</p> </li> <li> <p>\u7ed8\u5236\u7684\u4e09\u4e2a\u9636\u6bb5\uff1a</p> </li> <li> <p>measure: \u5224\u65ad\u662f\u5426\u9700\u8981\u91cd\u65b0\u8ba1\u7b97View\u7684\u5927\u5c0f\uff0c\u9700\u8981\u7684\u8bdd\u5219\u8ba1\u7b97\uff1b</p> </li> <li> <p>layout: \u5224\u65ad\u662f\u5426\u9700\u8981\u91cd\u65b0\u8ba1\u7b97View\u7684\u4f4d\u7f6e\uff0c\u9700\u8981\u7684\u8bdd\u5219\u8ba1\u7b97\uff1b</p> </li> <li> <p>draw: \u5224\u65ad\u662f\u5426\u9700\u8981\u91cd\u65b0\u7ed8\u5236View\uff0c\u9700\u8981\u7684\u8bdd\u5219\u91cd\u7ed8\u5236\u3002</p> <p></p> <p>measure\u9636\u6bb5\uff1a\u8ba1\u7b97\u51fa\u63a7\u4ef6\u6811\u4e2d\u7684\u5404\u4e2a\u63a7\u4ef6\u8981\u663e\u793a\u5176\u5185\u5bb9\u7684\u8bdd\uff0c\u9700\u8981\u7684\u5c3a\u5bf8\u3002</p> <p>\u200b       measurespeac\uff1aMeasureSpec \u5c01\u88c5\u4e86\u4ece\u7236View \u4f20\u9012\u7ed9\u5230\u5b50View\u7684\u5e03\u5c40\u9700\u6c42\u3002\u6bcf\u4e2aMeasureSpec\u4ee3\u8868\u5bbd\u5ea6\u6216\u9ad8\u5ea6\u7684\u8981\u6c42\u3002\u6bcf\u4e2aMeasureSpec\u90fd\u5305\u542b\u4e86size\uff08\u5927\u5c0f\uff09\u548cmode\uff08\u6a21\u5f0f\uff09\u3002</p> <p>\u200b        Mode\u7684\u53d6\u503c\u4e3a\u4ee5\u4e0b\u4e09\u79cd\uff1a</p> <p>\u200b           EXACTLY: \u5bf9\u5b50View\u63d0\u51fa\u4e86\u4e00\u4e2a\u786e\u5207\u7684\u5efa\u8bae\u5c3a\u5bf8\uff08SpecSize\uff09\uff1b</p> <p>\u200b           AT_MOST: \u5b50View\u7684\u5927\u5c0f\u4e0d\u5f97\u8d85\u8fc7SpecSize\uff1b</p> <p>\u200b           UNSPECIFIED: \u5bf9\u5b50View\u7684\u5c3a\u5bf8\u4e0d\u4f5c\u9650\u5236\uff0c\u901a\u5e38\u7528\u4e8e\u7cfb\u7edf\u5185\u90e8\u3002</p> <p>View \u7684 MeasureSpec \u5e76\u4e0d\u662f\u7236 View \u72ec\u81ea\u51b3\u5b9a\uff0c\u5b83\u662f\u6839\u636e\u7236 view \u7684MeasureSpec\u52a0\u4e0a\u5b50 View \u7684\u81ea\u5df1\u7684 LayoutParams\uff0c\u901a\u8fc7\u76f8\u5e94\u7684\u89c4\u5219\u8f6c\u5316\u3002</p> <p>\u200b    onMeasure\u65b9\u6cd5\u662fMeasure\u9636\u6bb5\u6700\u4e3b\u8981\u7684\u65b9\u6cd5\uff0c\u5176\u6d41\u7a0b\u662f\uff1a\u5148\u8c03\u7528measureChildWithMargins()\u65b9\u6cd5\u5bf9\u6240\u6709\u5b50View\u8fdb\u884c\u4e86\u4e00\u904d\u6d4b\u91cf\uff0c\u5e76\u8ba1\u7b97\u51fa\u6240\u6709\u5b50View\u7684\u6700\u5927\u5bbd\u5ea6\u548c\u6700\u5927\u9ad8\u5ea6\u3002\u800c\u540e\u5c06\u5f97\u5230\u7684\u6700\u5927\u9ad8\u5ea6\u548c\u5bbd\u5ea6\u52a0\u4e0apadding\uff0c\u8fd9\u91cc\u7684padding\u5305\u62ec\u4e86\u7236View\u7684padding\u548c\u524d\u666f\u533a\u57df\u7684padding\u3002\u7136\u540e\u4f1a\u68c0\u67e5\u662f\u5426\u8bbe\u7f6e\u4e86\u6700\u5c0f\u5bbd\u9ad8\uff0c\u5e76\u4e0e\u5176\u6bd4\u8f83\uff0c\u5c06\u4e24\u8005\u4e2d\u8f83\u5927\u7684\u8bbe\u4e3a\u6700\u7ec8\u7684\u6700\u5927\u5bbd\u9ad8\u3002\u6700\u540e\uff0c\u82e5\u8bbe\u7f6e\u4e86\u524d\u666f\u56fe\u50cf\uff0c\u6211\u4eec\u8fd8\u8981\u68c0\u67e5\u524d\u666f\u56fe\u50cf\u7684\u6700\u5c0f\u5bbd\u9ad8\u3002</p> <p>layout\u9636\u6bb5\uff1a\u57fa\u672c\u601d\u60f3\u4e5f\u662f\u7531\u6839View\u5f00\u59cb\uff0c\u9012\u5f52\u5730\u5b8c\u6210\u6574\u4e2a\u63a7\u4ef6\u6811\u7684\u5e03\u5c40\uff08layout\uff09\u5de5\u4f5c\uff0c\u4e3b\u8981\u662fViewgroup.onlayout()\u65b9\u6cd5</p> <p>\u5176\u6d41\u7a0b\u662f\uff1a\u9996\u5148setFrame()\u4f1a\u5224\u65ad\u5b50View\u7684\u4f4d\u7f6e\u662f\u5426\u53d1\u751f\u53d8\u5316\uff0c\u82e5\u53d8\u5316\u4e86\uff0c\u786e\u5b9aView\u7684\u4f4d\u7f6e\uff0c\u4f7f\u7528for\u5faa\u73af\u5b8c\u6210\u5e03\u5c40\u3002\u4e3b\u8981\u5c31\u662f\u6839\u636e\u4e0a\u4e00\u9636\u6bb5\u5f97\u5230\u7684View\u7684\u6d4b\u91cf\u5bbd\u9ad8\u6765\u786e\u5b9aView\u7684\u6700\u7ec8\u663e\u793a\u4f4d\u7f6e\u3002</p> <p>Draw\u9636\u6bb5\uff1a</p> <p></p> <p>\u7b2c\u4e00\u6b65\uff1adrawBackground(canvas)\uff1a \u4f5c\u7528\u5c31\u662f\u7ed8\u5236 View \u7684\u80cc\u666f\u3002</p> <p>\u7b2c\u4e8c\u6b65\uff1aonDraw(canvas) \uff1a\u7ed8\u5236 View \u7684\u5185\u5bb9\u3002View \u7684\u5185\u5bb9\u662f\u6839\u636e\u81ea\u5df1\u9700\u6c42\u81ea\u5df1\u7ed8\u5236\u7684\uff0c\u6240\u4ee5\u65b9\u6cd5\u662f\u4e00\u4e2a\u7a7a\u65b9\u6cd5\uff0cView\u7684\u7ee7\u627f\u7c7b\u81ea\u5df1\u590d\u5199\u5b9e\u73b0\u7ed8\u5236\u5185\u5bb9\u3002</p> <p>\u7b2c\u4e09\u6b65\uff1adispatchDraw\uff08canvas\uff09\uff1a\u904d\u5386\u5b50View\u8fdb\u884c\u7ed8\u5236\u5185\u5bb9\u3002\u5728 View \u91cc\u9762\u662f\u4e00\u4e2a\u7a7a\u5b9e\u73b0\uff0cViewGroup \u91cc\u9762\u624d\u4f1a\u6709\u5b9e\u73b0\u3002\u5728\u81ea\u5b9a\u4e49 ViewGroup \u4e00\u822c\u4e0d\u7528\u590d\u5199\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u5728\u91cc\u9762\u7684\u5b9e\u73b0\u5e2e\u6211\u4eec\u5b9e\u73b0\u4e86\u5b50 View \u7684\u7ed8\u5236\u8fc7\u7a0b\uff0c\u57fa\u672c\u6ee1\u8db3\u9700\u6c42\u3002</p> <p>\u7b2c\u56db\u6b65\uff1aonDrawForeground(canvas)\uff1a\u5bf9\u524d\u666f\u8272\u8ddf\u6eda\u52a8\u6761\u8fdb\u884c\u7ed8\u5236\u3002</p> <p>\u7b2c\u4e94\u6b65\uff1adrawDefaultFocusHighlight(canvas)\uff1a\u7ed8\u5236\u9ed8\u8ba4\u7126\u70b9\u9ad8\u4eae</p> </li> </ul> <p>4.requestLayout \u548c Invalidate\u7684\u533a\u522b</p> <p>\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4e24\u8005\u90fd\u8981\u4e00\u8d77\u4f7f\u7528\u3002</p> <p>requestLayout\u4f1a\u76f4\u63a5\u9012\u5f52\u8c03\u7528\u7236\u7a97\u53e3\u7684requestLayout\uff0c\u76f4\u5230ViewRootImpl,\u7136\u540e\u89e6\u53d1peformTraversals\uff0c\u7531\u4e8emLayoutRequested\u4e3atrue\uff0c\u4f1a\u5bfc\u81f4onMeasure\u548conLayout\u88ab\u8c03\u7528\u3002\u4e0d\u4e00\u5b9a\u4f1a\u89e6\u53d1OnDraw requestLayout\u89e6\u53d1onDraw\u53ef\u80fd\u662f\u56e0\u4e3a\u5728\u5728layout\u8fc7\u7a0b\u4e2d\u53d1\u73b0l,t,r,b\u548c\u4ee5\u524d\u4e0d\u4e00\u6837\uff0c\u90a3\u5c31\u4f1a\u89e6\u53d1\u4e00\u6b21invalidate\uff0c\u6240\u4ee5\u89e6\u53d1\u4e86onDraw\uff0c\u4e5f\u53ef\u80fd\u662f\u56e0\u4e3a\u522b\u7684\u539f\u56e0\u5bfc\u81f4mDirty\u975e\u7a7a\uff08\u6bd4\u5982\u5728\u8dd1\u52a8\u753b\uff09 view\u7684invalidate\u4e0d\u4f1a\u5bfc\u81f4ViewRootImpl\u7684invalidate\u88ab\u8c03\u7528\uff0c\u800c\u662f\u9012\u5f52\u8c03\u7528\u7236view\u7684invalidateChildInParent\uff0c\u76f4\u5230ViewRootImpl\u7684invalidateChildInParent\uff0c\u7136\u540e\u89e6\u53d1peformTraversals\uff0c\u4f1a\u5bfc\u81f4\u5f53\u524dview\u88ab\u91cd\u7ed8\uff0c\u7531\u4e8emLayoutRequested\u4e3afalse\uff0c\u4e0d\u4f1a\u5bfc\u81f4onMeasure\u548conLayout\u88ab\u8c03\u7528\uff0c\u800cOnDraw\u4f1a\u88ab\u8c03\u7528 \u5f53\u5bbd\u9ad8\u53d1\u751f\u6539\u53d8\u7684\u65f6\u5019\u8c03\u7528requestLayout()</p> <p>4\u3001\u5750\u6807\u7cfb</p> <p></p> <p>\u89c6\u56fe\u7684\u4f4d\u7f6e\u662f\u76f8\u5bf9\u4e8e\u7236\u63a7\u4ef6\u800c\u8a00\u7684\uff0c\u56db\u4e2a\u9876\u70b9\u7684\u4f4d\u7f6e\u63cf\u8ff0\u5206\u522b\u7531\u56db\u4e2a\u4e0e\u7236\u63a7\u4ef6\u76f8\u5173\u7684\u503c\u51b3\u5b9a\uff1a</p> <ul> <li>\u9876\u90e8(Top)\uff1a\u89c6\u56fe\u4e0a\u8fb9\u754c\u5230\u7236\u63a7\u4ef6\u4e0a\u8fb9\u754c\u7684\u8ddd\u79bb\uff1b</li> <li>\u5de6\u8fb9(Left)\uff1a\u89c6\u56fe\u5de6\u8fb9\u754c\u5230\u7236\u63a7\u4ef6\u5de6\u8fb9\u754c\u7684\u8ddd\u79bb\uff1b</li> <li>\u53f3\u8fb9(Right)\uff1a\u89c6\u56fe\u53f3\u8fb9\u754c\u5230\u7236\u63a7\u4ef6\u5de6\u8fb9\u754c\u7684\u8ddd\u79bb\uff1b</li> <li>\u5e95\u90e8(Bottom)\uff1a\u89c6\u56fe\u4e0b\u8fb9\u754c\u5230\u7236\u63a7\u4ef6\u4e0a\u8fb9\u754c\u7684\u8ddd\u79bb\u3002</li> </ul> <p>\u83b7\u53d6\u5750\u6807\u63cf\u8ff0\u7684\u65b9\u5f0f\uff1a</p> <ul> <li>View.get (Top\u3001Left\u3001Right\u3001Bottom)</li> <li>\u4e0eMotionEvent\u4e2d <code>get()</code>\u548c<code>getRaw()</code>\u7684\u533a\u522b</li> </ul> <pre><code>//get() \uff1a\u89e6\u6478\u70b9\u76f8\u5bf9\u4e8e\u5176\u6240\u5728\u7ec4\u4ef6\u5750\u6807\u7cfb\u7684\u5750\u6807\n event.getX();       \n event.getY();\n\n//getRaw() \uff1a\u89e6\u6478\u70b9\u76f8\u5bf9\u4e8e\u5c4f\u5e55\u9ed8\u8ba4\u5750\u6807\u7cfb\u7684\u5750\u6807\n event.getRawX();    \n event.getRawY();\n</code></pre> <p></p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#3xmlns","title":"3\u3001xmlns","text":"<p> XML namespace</p> <p>XML \u547d\u540d\u7a7a\u95f4\u5b9a\u4e49\u8bed\u6cd5\u4e3a<code>xmlns:namespace-prefix=\"namespaceURI\"</code>\uff0c\u4e00\u5171\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a</p> <ul> <li><code>xmlns</code>\uff1a\u58f0\u660e\u547d\u540d\u7a7a\u95f4\u7684\u4fdd\u7559\u5b57\uff0c\u5176\u5b9e\u5c31\u662fXML\u4e2d\u5143\u7d20\u7684\u4e00\u4e2a\u5c5e\u6027\uff1b</li> <li><code>namespace-prefix</code>\uff1a\u547d\u540d\u7a7a\u95f4\u7684\u524d\u7f00\uff0c\u8fd9\u4e2a\u524d\u7f00\u4e0e\u67d0\u4e2a\u547d\u540d\u7a7a\u95f4\u76f8\u5173\u8054\uff1b</li> <li><code>namespaceURI</code>\uff1a\u547d\u540d\u7a7a\u95f4\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u4e00\u822c\u5c31\u662f\u4e00\u4e2aURI\u5f15\u7528\u3002</li> </ul> <p>\u662f\u4e3a\u4e86\u89e3\u51b3\u547d\u540d\u51b2\u7a81\u800c\u8bbe\u7f6e\u7684\u3002</p> <p>Android \u4e2d\u5e38\u89c1\u7684\u4e09\u79cdxmlns:</p> <pre><code>xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\n</code></pre> <ul> <li>android</li> </ul> <p>\u547d\u540d\u7a7a\u95f4<code>android</code>\u7528\u4e8e Android \u7cfb\u7edf\u5b9a\u4e49\u7684\u4e00\u4e9b\u5c5e\u6027\u3002</p> <ul> <li>app</li> </ul> <p>\u547d\u540d\u7a7a\u95f4<code>app</code>\u7528\u4e8e\u6211\u4eec\u5e94\u7528\u81ea\u5b9a\u4e49\u7684\u4e00\u4e9b\u5c5e\u6027\uff0c\u8fd9\u4e2a\u4e0e Android \u81ea\u5b9a\u4e49\u5c5e\u6027\u548c\u7cfb\u7edf\u63a7\u4ef6\u6269\u5c55\u5e94\u8be5\u6709\u5173\u7cfb\uff0c\u5927\u5bb6\u53ef\u4ee5\u518d\u7ee7\u7eed\u7814\u7a76\u4e00\u4e0b\u3002</p> <ul> <li>tools</li> </ul> <p>\u6839\u636e\u5b98\u65b9\u5b9a\u4e49\uff0c<code>tools</code>\u547d\u540d\u7a7a\u95f4\u7528\u4e8e\u5728 XML \u6587\u6863\u8bb0\u5f55\uff0c\u5f53\u5e94\u7528\u6253\u5305\u7684\u65f6\u5019\uff0c\u4f1a\u628a\u8fd9\u90e8\u5206\u4fe1\u606f\u7ed9\u8fc7\u6ee4\u6389\uff0c\u4e0d\u4f1a\u589e\u52a0\u5e94\u7528\u7684 size\uff0c\u8bf4\u76f4\u767d\u70b9\uff0c\u8fd9\u4e9b\u5c5e\u6027\u662f\u4e3aIDE\u63d0\u4f9b\u76f8\u5173\u4fe1\u606f\u3002</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#4android-values","title":"4\u3001Android Values\u6587\u4ef6","text":"<ul> <li> <p>Dimes.xml  \u5c4f\u5e55\u9002\u914d</p> </li> <li> <p>thems.xml Andriod\u6837\u5f0f\u548c\u4e3b\u9898</p> </li> <li> <p>\u662f\u4e00\u4e2a\u5305\u542b\u4e00\u79cd \u6216\u8005 \u591a\u79cd\u683c\u5f0f\u5316 \u5c5e\u6027 \u7684\u96c6\u5408  \uff0c\u5e76\u4e14 style\u548ctheme\u90fd\u662f\u8d44\u6e90\uff0c\u5b58\u653e\u5728res/values \u6587\u4ef6\u5939\u4e0b </p> </li> <li> <p>Style \u5728Activity\u4e2d\u5e03\u5c40\u4f7f\u7528</p> </li> <li> <p>Theme \u5e94\u7528\u7ea7\u522b\uff0c\u5728AndroidManifest.xml\u4e2d\u4e2d\u4f7f\u7528\u3002 <li> <p>\u201c@ \u201d|| \u201c?\u201d \u7684\u533a\u522b</p> <ul> <li>\u201c@ \u201d \u8868\u660e \u6211\u4eec\u5f15\u7528\u7684\u8d44\u6e90\u662f\u524d\u8fb9\u5b9a\u4e49\u8fc7\u7684(\u6216\u8005\u5728\u524d\u4e00\u4e2a\u9879\u76ee\u4e2d\u6216\u8005\u5728Android \u6846\u67b6\u4e2d)</li> </ul> <p>@\u5b9a\u4e49\u7684\u989c\u8272\u662f\u4e0d\u53d8\u7684</p> <ul> <li>\u201c?\u201d \u8868\u660e \u6211\u4eec\u5f15\u7528\u7684\u8d44\u6e90\u7684\u503c\u5728 \u5f53\u524d\u7684 \u4e3b\u9898\u5f53\u4e2d\u5b9a\u4e49\u8fc7   </li> </ul> <p>\uff1f \u662f\u4f1a\u968f\u7740\u4e3b\u9898\u7684\u989c\u8272\u6539\u53d8\u7684\uff0c\u6bd4\u5982\u6df1\u8272\u4e3b\u9898</p> <p><code>java   ?attr/...    \u662f\u6307\u81ea\u5df1\u5b9a\u4e49\u7684\u4e3b\u9898\u7684\u6837\u5f0f   ?android:attr/..   \u662fAndroid\u5b9a\u4e49\u7684\u4e3b\u9898\u7684\u6837\u5f0f</code></p> </li> <li> <p>\u4e3b\u9898\u989c\u8272\u548c\u5c5e\u6027</p> <ul> <li>colorPrimary  ActionBar\u7684\u989c\u8272\uff0c\u901a\u5e38\u4e5f\u662f\u4e3b\u9898\u989c\u8272</li> <li>colorPrimaryDark  \u72b6\u6001\u680f\u80cc\u666f\u8272</li> <li>colorAccent  \u9009\u4e2d\u72b6\u6001\u6216\u83b7\u53d6\u7126\u70b9\u72b6\u6001</li> <li>CheckBox\uff1achecked \u72b6\u6001</li> <li>RadioButton\uff1achecked \u72b6\u6001</li> <li>SwitchCompat\uff1achecked \u72b6\u6001</li> <li>EditText\uff1a\u83b7\u53d6\u7126\u70b9\u65f6\u7684 underline \u548c cursor \u989c\u8272</li> <li>TextInputLayout\uff1a\u60ac\u6d6e label \u5b57\u4f53\u989c\u8272</li> <li>android:navigationBarColor  navigation bar \u80cc\u666f\u8272</li> <li>colorControlNormal    \u67d0\u4e9b Views \u201cnormal\u201d \u72b6\u6001\u4e0b\u7684\u989c\u8272\uff0c\u5e38\u89c1\u5982\uff1aunselected CheckBox \u548c RadioButton\uff0c\u5931\u53bb\u7126\u70b9\u65f6\u7684 EditText\uff0cToolbar \u6ea2\u51fa\u6309\u94ae\u989c\u8272\uff0c\u7b49\u7b49</li> <li>colorControlActivated  \u67d0\u79cd\u7a0b\u5ea6\u4e0a\uff0c\u662f colorAccent \u7684\u66ff\u4ee3\u8005\uff0c\u6bd4\u5982\u5bf9\u4e8e CheckBox \u548c RadioButton \u7684 checked \u72b6\u6001\uff0ccolorControlActivated \u5c5e\u6027\u4f1a\u8986\u76d6 colorAccent \u5c5e\u6027\u7684\u5bf9\u5e94\u989c\u8272\u3002</li> <li>colorControlHighlight \u6240\u6709\u53ef\u70b9\u51fb Views \u89e6\u6478\u72b6\u6001\u4e0b\u7684 Ripple\uff08\u6d9f\u6f2a\uff09\u6548\u679c\u3002\u4ec5\u4f5c\u7528\u4e8e Lollipop \u53ca\u66f4\u9ad8\u7248\u672c\u3002</li> <li>colorButtonNormal.  Button normal \u72b6\u6001\u4e0b\u7684\u80cc\u666f\u8272\u3002\u6ce8\u610f\uff0c\u8fd9\u79cd\u8bbe\u7f6e\u4e0e Button \u7684 android:background \u5c5e\u6027\u6539\u53d8\u80cc\u666f\u8272\u4e0d\u540c\u7684\u662f\uff0c\u524d\u8005\u5728 Lollipop \u53ca\u66f4\u9ad8\u7248\u672c\u4e0a\u4f1a\u8ba9 Button \u4f9d\u65e7\u4fdd\u6301\u9634\u5f71\u548c Ripple \u89e6\u6478\u6548\u679c\u3002</li> <li>android:windowBackground \u7a97\u53e3\u80cc\u666f\u8272\uff0c\u8bf8\u5982\u6b64\u7c7b\u7684\u8fd8\u6709\uff1aandroid:background\uff0candroid:colorBackground \u7b49\u3002</li> <li>android:textColorPrimary</li> <li>navigationIcon</li> </ul> </li> <p></p> <ul> <li> <p>\u5e38\u89c1\u7684\u4e3b\u9898\u98ce\u683c\uff1a</p> <ul> <li>android:theme=\"@android:style/Theme.Dialog\"   \u5c06\u4e00\u4e2aActivity\u663e\u793a\u4e3a\u80fd\u8bdd\u6846\u6a21\u5f0f   android:theme=\"@android:style/Theme.NoTitleBar\"  \u4e0d\u663e\u793a\u5e94\u7528\u7a0b\u5e8f\u6807\u9898\u680f   android:theme=\"@android:style/Theme.NoTitleBar.Fullscreen\"  \u4e0d\u663e\u793a\u5e94\u7528\u7a0b\u5e8f\u6807\u9898\u680f\uff0c\u5e76\u5168\u5c4f   android:theme=\"Theme.Light\"  \u80cc\u666f\u4e3a\u767d\u8272   android:theme=\"Theme.Light.NoTitleBar\"  \u767d\u8272\u80cc\u666f\u5e76\u65e0\u6807\u9898\u680f    android:theme=\"Theme.Light.NoTitleBar.Fullscreen\"  \u767d\u8272\u80cc\u666f\uff0c\u65e0\u6807\u9898\u680f\uff0c\u5168\u5c4f   android:theme=\"Theme.Black\"  \u80cc\u666f\u9ed1\u8272   android:theme=\"Theme.Black.NoTitleBar\"  \u9ed1\u8272\u80cc\u666f\u5e76\u65e0\u6807\u9898\u680f   android:theme=\"Theme.Black.NoTitleBar.Fullscreen\"    \u9ed1\u8272\u80cc\u666f\uff0c\u65e0\u6807\u9898\u680f\uff0c\u5168\u5c4f   android:theme=\"Theme.Wallpaper\"  \u7528\u7cfb\u7edf\u684c\u9762\u4e3a\u5e94\u7528\u7a0b\u5e8f\u80cc\u666f   android:theme=\"Theme.Wallpaper.NoTitleBar\"  \u7528\u7cfb\u7edf\u684c\u9762\u4e3a\u5e94\u7528\u7a0b\u5e8f\u80cc\u666f\uff0c\u4e14\u65e0\u6807\u9898\u680f   android:theme=\"Theme.Wallpaper.NoTitleBar.Fullscreen\"  \u7528\u7cfb\u7edf\u684c\u9762\u4e3a\u5e94\u7528\u7a0b\u5e8f\u80cc\u666f\uff0c\u65e0\u6807\u9898\u680f\uff0c\u5168\u5c4f   android:theme=\"Translucent\"  \u534a\u900f\u660e   android:theme=\"Theme.Translucent.NoTitleBar\" \u534a\u900f\u660e\u3001\u65e0\u6807\u9898\u680f   android:theme=\"Theme.Translucent.NoTitleBar.Fullscreen\" \u534a\u900f\u660e\u3001\u65e0\u6807\u9898\u680f\u3001\u5168\u5c4f   android:theme=\"Theme.Panel\"   android:theme=\"Theme.Light.Panel\"  </li> </ul> </li> <li> <p>ThemeOverlay  \u7ee7\u627f\u5168\u5c40\u6837\u5f0f\uff0c\u4f46\u53ef\u4ee5\u4fee\u6539\u81ea\u5df1\u7684\u6837\u5f0f</p> </li> <li> <p>\u81ea\u5b9a\u4e49\u6837\u5f0f</p> <ul> <li>\u9996\u5148\u5728attrs.xml \u5b9a\u4e49\u5c5e\u6027\u540d\u79f0</li> </ul> <p>```xml</p> <p>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;       ```</p> <ul> <li>\u5728style.xml\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027</li> </ul> <p><code>xml   &lt;style name=\"AppTheme.NoActionBar\"&gt;           &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;           &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;           &lt;item name=\"baseTitleTextColor\"&gt;#2a2a2a&lt;/item&gt;           &lt;item name=\"titleDividerLine\"&gt;1dp&lt;/item&gt;           &lt;item name=\"titleDividerColor\"&gt;@android:color/transparent&lt;/item&gt;   &lt;/style&gt;</code></p> <ul> <li>\u5728\u5e03\u5c40\u4e2d\u5f15\u7528\u6837\u5f0f</li> </ul> <p><code>xml   &lt;View               android:id=\"@+id/view_divider\"               android:layout_width=\"match_parent\"               android:layout_height=\"?attr/titleDividerLine\"               android:background=\"?attr/titleDividerColor\"/&gt;</code></p> </li> </ul>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#_2","title":"\u4e8b\u4ef6\u673a\u5236","text":""},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#1","title":"1\u3001\u4e8b\u4ef6\u5206\u53d1","text":"<p>1\u3001\u5b9a\u4e49\uff1a\u5c06\u70b9\u51fb\u4e8b\u4ef6\u4f20\u9012\u5230\u67d0\u4e2a\u5177\u4f53\u7684View\u548c\u5904\u7406\u7684\u8fc7\u7a0b\u3002</p> <p>\u200b               \u7531\u54ea\u4e2a\u5bf9\u8c61\u53d1\u51fa\uff0c\u7ecf\u8fc7\u54ea\u4e9b\u5bf9\u8c61\u548c\u6700\u7ec8\u8fbe\u5230\u7684\u5bf9\u8c61\u548c\u5904\u7406</p> <p>\u4e3a\u4ec0\u4e48\u4f1a\u6709\u4e8b\u4ef6\u5206\u53d1\u8fd9\u4e2a\u5904\u7406\uff1f</p> <p>\u539f\u56e0\uff1a1.View\u8981\u5904\u7406\u7684Touch\u4e8b\u4ef6\u6bd4\u8f83\u591a\uff0c\u6bd4\u5982Touch\u4e8b\u4ef6,\u957f\u6309\u4e8b\u4ef6\u548c\u70b9\u51fb\u4e8b\u4ef6 </p> <p>\u200b             2.View\u662f\u6811\u578b\u7ed3\u6784\u7684</p> <p>2\u3001\u4e8b\u4ef6\u5206\u53d1\u987a\u5e8f\uff1aActivity-&gt;ViewGroup-&gt;View</p> <p>3\u3001\u4e8b\u4ef6\u5206\u53d1\u673a\u5236\uff1a</p> <ul> <li>Activity</li> </ul> <p></p> <p>\u9996\u5148\u4f1a\u8c03\u7528Activity#dispatchTouchEvent(),\u8fdb\u884c\u4e8b\u4ef6\u5206\u53d1\uff0c\u7531Activity\u7684\u7ed3\u6784\u53ef\u77e5\uff0c\u4f1a\u6709\u4e00\u4e2aWindow\uff0c\u5b9e\u9645\u4e0a\u5c31\u662fPhoneWindow,\u8c03\u7528Window#superDispatch\uff0c\u901a\u8fc7\u6e90\u7801\u53ef\u77e5\u8c03\u7528\u7684\u662fDecorView.superDispatchTouchEvent(),DecorView\u662fActivity\u4e2d\u7684\u7b2c\u4e00\u4e2aViewGroup\uff0c\u5b83\u7684\u7236\u7c7b\u662fViewGroup\uff0c\u5c06Activity\u7684\u4e8b\u4ef6\u4f20\u9012\u5230ViewGroup\u3002\u82e5\u4f20\u9012\u540e\u88ab\u6d88\u8d39\uff0c\u5219\u7ed3\u675f\uff0c\u82e5\u672a\u88ab\u6d88\u8d39\uff0c\u4f1a\u8c03\u7528Activity#onTouchEvent()\u65b9\u6cd5\uff0c\u5f53\u524dActivity\u8fdb\u884c\u6d88\u8d39\uff0c\u4f1a\u6709\u4e00\u4e2a\u5224\u65ad\u662f\u5426\u5728\u8fb9\u754c\u5185\uff0c\u82e5\u5728\uff0c\u4e0d\u88ab\u6d88\u8d39\uff0c\u82e5\u4e0d\u5728\u88ab\u6d88\u8d39\u3002</p> <ul> <li>GroupView</li> </ul> <p></p> <p>\u4e8b\u4ef6\u5206\u53d1\u5230GroupView\u7684DispatchTouchEvent()\u65b9\u6cd5\uff0c\u901a\u8fc7InterceptTonchEvent()\u65b9\u6cd5\u5224\u65ad\u662f\u5426\u88ab\u62e6\u622a\uff0c\u82e5\u672a\u88ab\u62e6\u622a\uff0c\u6267\u884cfor\u5faa\u73af\u67e5\u627e\u8981\u5206\u53d1\u7684view\uff0c\u82e5\u67e5\u5230\uff0c\u6267\u884cview\u7684dispatchTouchEvent()\u65b9\u6cd5\uff0c\u82e5\u672a\u67e5\u5230\uff0c\u5219\u5230View\u7684DispatchTouchEvent()\u65b9\u6cd5\uff0c\u548c\u88ab\u62e6\u622a\u7684\u5904\u7406\u65b9\u5f0f\u4e00\u6837\uff0c\u6267\u884cGroupView\u7684onTouch()\u65b9\u6cd5\u3001onTouchevent()\u3001onPerformClick()\u3001onClick()\u81ea\u5df1\u8fdb\u884c\u5904\u7406\u3002</p> <ul> <li>View</li> </ul> <p></p> <p>\u4e8b\u4ef6\u5206\u53d1\u5230View\u7684DispatchTouch()\u65b9\u6cd5\uff0c\u5224\u65ad\u8be5View\u662f\u5426\u88ab\u76d1\u542c\u3001\u662f\u5426Enable\u3001\u662f\u5426onTouch()\u8fd4\u56deTrue\uff0c\u82e5\u662f\uff0c\u5219\u88ab\u6d88\u8d39\u6389\u3002\u82e5\u4e0d\u540c\u65f6\u6ee1\u8db3\uff0c\u4ea4\u7ed9View\u7684OnTouchEvent()\u65b9\u6cd5\u89e3\u51b3\uff0c\u5224\u65ad\u662f\u5426\u662f\u70b9\u51fb\u548c\u957f\u6309\uff0c\u82e5\u662f\u6d88\u8017\u6389\u3002</p> <p>\u4e8b\u4ef6\u5206\u53d1\u7684\u4e3b\u8981\u65b9\u6cd5</p> \u65b9\u6cd5\u540d\u79f0 \u4f5c\u7528 dispatchTouchEvent() \u5206\u53d1\u70b9\u51fb\u4e8b\u4ef6 onTouchEvent() \u70b9\u51fb\u4e8b\u4ef6 onInterceptTouchEvent() \u62e6\u622a\u4e8b\u4ef6\uff08\u53ea\u5728GroupView\uff09 onTouch() View\u4e2dOnTouchListener\u63a5\u53e3\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5(GroupView\u548cView) <p>\u6ce8\u610f\uff1a\u5b50View\u4e2d\u7684\u76d1\u542c\u4e8b\u4ef6\u4f18\u5148\u7ea7\uff1a OnTouchListener----&gt;OnTouchEvent----&gt;OnCLickListener</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#2handler","title":"2\u3001Handler\u6d88\u606f\u4f20\u9012\u673a\u5236","text":"<p>1\u3001handler\u673a\u5236\u7684\u4f5c\u7528\uff1a\u4e3a\u4e86\u89e3\u51b3Android\u7684\u591a\u7ebf\u7a0b\u95ee\u9898\u2014\u2014Android\u53ea\u5141\u8bb8UI\u7ebf\u7a0b\u4fee\u6539Activity\u7684UI\u7ec4\u4ef6\u3002\u4e3b\u7ebf\u7a0b\u901a\u5e38\u88ab\u79f0\u4f5cUI\u7ebf\u7a0b\u3002</p> <p>2\u3001Handler\u7c7b\u7684\u4e3b\u8981\u4f5c\u7528\u6709\u4e24\u4e2a\uff1a</p> <ul> <li>\u5728\u65b0\u542f\u52a8\u7684\u7ebf\u7a0b\u4e2d\u53d1\u9001\u4fe1\u606f</li> <li>\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u83b7\u53d6\u3001\u5904\u7406\u4fe1\u606f</li> </ul> <p>3\u3001handler\u673a\u5236\u7684\u5de5\u4f5c\u539f\u7406\u6838\u5fc3\u90e8\u5206\uff1ahandler\u3001Message\u3001MessageQueue\u3001Looper</p> <p>4\u3001Message</p> <ul> <li> <p>Message.class\u4f4d\u4e8eandroid.os.\u5305\u4e2d\u3002Message\u7684\u6784\u9020\u51fd\u6570\u4e3a\u65e0\u53c2\u6784\u9020\u65b9\u6cd5\uff0c\u4e14\u53ea\u6709\u4e00\u4e2a\u6784\u9020\u65b9\u6cd5\uff1b</p> </li> <li> <p>Message\u67098\u4e2a\u9759\u6001\u65b9\u6cd5\u53ef\u4ee5\u521b\u5efaMessage\u5b9e\u4f8b   Message\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u6210\u5458\u53d8\u91cf\uff0c\u5206\u522b\u4e3atarget \u548ccallback\uff0c\u4e00\u4e2a\u662fHandler\uff0c\u4e00\u4e2a\u662fRunnable\u3002   Message\u67094\u4e2a\u516c\u5f00\u53d8\u91cfwhat\u3001arg1\u3001arg2\u3001obj \u53ef\u4ee5\u5b58\u50a8\u6d88\u606f\u8fdb\u884c\u4f20\u9012   Message\u8fd8\u6709\u4e00\u4e2a\u5305\u95f4\u6210\u5458\u53d8\u91cfnext\uff0c\u5b83\u662fMessage\u7c7b\u578b\uff0c\u540e\u9762\u4f1a\u4f7f\u7528\u5230\uff0c\u77e5\u9053\u6709\u8fd9\u4e2anext\u5c31\u884c</p> </li> </ul> <p>5\u3001Handler\u7c7b</p> <ul> <li> <p>handleMessage(Message msg):\u5904\u7406\u6d88\u606f\u7684\u65b9\u6cd5</p> </li> <li> <p>hasMessage(int what):\u68c0\u67e5\u6d88\u606f\u961f\u5217\u4e2d\u662f\u5426\u6709What\u7684\u6d88\u606f</p> </li> <li> <p>hasMessage(int What,Object object):\u68c0\u67e5\u6d88\u606f\u961f\u5217\u4e2d\u662f\u5426\u6709What\u4e14\u662fobject \u7684\u6d88\u606f</p> </li> <li> <p>\u591a\u4e2a\u91cd\u8f7d\u7684obtainMessage():\u83b7\u53d6\u6d88\u606f</p> </li> <li> <p>sendEmptyMessage(int what):\u53d1\u9001\u7a7a\u6d88\u606f\u3002</p> </li> <li> <p>sendEmptyMessageDelayd(int what,long delayMillis):\u6307\u5b9a\u591a\u5c11ms\u540e\u53d1\u9001\u6d88\u606f</p> </li> <li> <p>sendMessageDelayed(Message msg ,long delayMillis):\u6307\u5b9a\u591a\u5c11ms\u540e\u53d1\u9001\u6d88\u606f</p> </li> </ul> <p></p> <p>Handler dispatchMessage\uff08\uff09\u65b9\u6cd5:\u6d88\u606f\u5206\u53d1</p> <p>1\u3001\u9996\u5148\u4f1a\u5224\u65adMessage\u7684callback\u662f\u5426\u4e3a\u7a7a\uff0c\u6b64\u5904\u7684callback\u5c31\u662f\u524d\u9762\u6211\u4eec\u5728Message\u4e2d\u8bf4\u5230\u7684\uff0c\u5728\u9759\u6001\u65b9\u6cd5\u521b\u5efaMessage\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u7684callback\uff0c\u82e5\u4e0d\u4e3a\u7a7a\uff0c\u5219\u5c06\u7ed3\u679c\u56de\u8c03\u5230callback\u4e2d\uff1b   2\u3001\u82e5Handler\u7684mCallback \u4e0d\u4e3a\u7a7a\uff0c\u4e5f\u4e00\u6837\u7684\u9053\u7406\u3002   3\u3001\u5e73\u65f6\u6211\u4eec\u90fd\u6ca1\u6709\u4f20\u5165\u8fd9\u4e2acallback\uff0c\u800c\u662f\u76f4\u63a5\u5b9e\u73b0handleMessage\uff08\uff09\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u5904\u7406\u66f4\u65b0UI\u4efb\u52a1\u3002</p> <p>6\u3001MessageQueue</p> <p>\u6d88\u606f\u961f\u5217\uff0c\u91c7\u7528\u5148\u8fdb\u5148\u51fa\u7684\u65b9\u5f0f\u6765\u7ba1\u7406Message\uff0c\u662f\u7531looper\u8d1f\u8d23\u7ba1\u7406\u7684\uff0cLooper\u521b\u5efa\u65f6\u4f1a\u521b\u5efa\u6d88\u606f\u961f\u5217\u3002</p> <p>7\u3001Looper</p> <p>\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u53ef\u4ee5\u4e14\u53ea\u80fd\u7ed1\u5b9a\u4e00\u4e2aLooper,\u7ebf\u7a0b\u521b\u5efa\u65f6\u5fc5\u987b\u5148\u521d\u59cb\u5316Looper()\u3002</p> <p>\u4f7f\u7528loop()\u65b9\u6cd5\u5faa\u73af\u8bfb\u53d6MessageQueue\u4e2d\u7684\u6d88\u606f\uff0c\u7136\u540e\u5206\u53d1\u3002</p> <ul> <li>\u4e3b\u7ebf\u7a0b\uff08UI\u7ebf\u7a0b\uff09\uff0c\u7cfb\u7edf\u5df2\u7ecf\u521d\u59cb\u5316\u4e86\u4e00\u4e2aLooper\uff0c\u53ef\u4ee5\u76f4\u63a5\u521b\u5efahandler</li> <li>\u65b0\u7ebf\u7a0b\u9700\u8981\u81ea\u5df1\u521b\u5efaLooper\uff0c\u901a\u8fc7Looper\u7684prepare()\u7684\u65b9\u6cd5\u3002</li> </ul>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#_3","title":"\u6570\u636e\u5b58\u50a8","text":""},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#1sharepreference","title":"1\u3001Sharepreference","text":"<p>8.1 Android\u6570\u636e\u5b58\u50a8\u7684\u65b9\u5f0f</p> <ol> <li> <p>SharedPreferences\uff1a\u4ee5Map\u5f62\u5f0f\u5b58\u653e\u7b80\u5355\u7684\u914d\u7f6e\u53c2\u6570\uff1b</p> </li> <li> <p>ContentProvider\uff1a\u5c06\u5e94\u7528\u7684\u79c1\u6709\u6570\u636e\u63d0\u4f9b\u7ed9\u5176\u4ed6\u5e94\u7528\u4f7f\u7528\uff1b</p> </li> <li>\u6587\u4ef6\u5b58\u50a8\uff1a\u4ee5IO\u6d41\u5f62\u5f0f\u5b58\u653e\uff0c\u53ef\u5206\u4e3a\u624b\u673a\u5185\u90e8\u548c\u624b\u673a\u5916\u90e8\uff08sd\u5361\u7b49\uff09\u5b58\u50a8\uff0c\u53ef\u5b58\u653e\u8f83\u5927\u6570\u636e\uff1b</li> <li>SQLite\uff1a\u8f7b\u91cf\u7ea7\u3001\u8de8\u5e73\u53f0\u6570\u636e\u5e93\uff0c\u5c06\u6240\u6709\u6570\u636e\u90fd\u662f\u5b58\u653e\u5728\u624b\u673a\u4e0a\u7684\u5355\u4e00\u6587\u4ef6\u5185\uff0c\u5360\u7528\u5185\u5b58\u5c0f\uff1b</li> <li>\u7f51\u7edc\u5b58\u50a8 \uff1a\u6570\u636e\u5b58\u50a8\u5728\u670d\u52a1\u5668\u4e0a\uff0c\u901a\u8fc7\u8fde\u63a5\u7f51\u7edc\u83b7\u53d6\u6570\u636e\uff1b</li> </ol> <p>8.2 \u83b7\u53d6Shareprefreference\u7684\u65b9\u6cd5</p> <p>\u200b       1. context.getSharedPreferences()\u65b9\u6cd5 </p> <ul> <li> <p>String  name ;   \u6587\u4ef6\u540d\u79f0</p> </li> <li> <p>int Mode; \u6267\u884c\u7c7b\u578b</p> </li> </ul> <p><code>Context.MODE_PRIVATE: \u6307\u5b9a\u8be5SharedPreferences\u6570\u636e\u53ea\u80fd\u88ab\u672c\u5e94\u7528\u7a0b\u5e8f\u8bfb\u3001\u5199\uff1b   Context.MODE_WORLD_READABLE:  \u6307\u5b9a\u8be5SharedPreferences\u6570\u636e\u80fd\u88ab\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u8bfb\uff0c\u4f46\u4e0d\u80fd\u5199\uff1b   Context.MODE_WORLD_WRITEABLE:  \u6307\u5b9a\u8be5SharedPreferences\u6570\u636e\u80fd\u88ab\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u8bfb\uff1b   Context.MODE_APPEND\uff1a\u8be5\u6a21\u5f0f\u4f1a\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c\u5b58\u5728\u5c31\u5f80\u6587\u4ef6\u8ffd\u52a0\u5185\u5bb9\uff0c\u5426\u5219\u5c31\u521b\u5efa\u65b0\u6587\u4ef6\uff1b</code></p> <ol> <li>Activity\u7c7b\u4e2d\u7684getPreferences()\u65b9\u6cd5<ul> <li>Mode \u53c2\u6570\uff1b\u6587\u4ef6\u540d\u4ee5\u5f53\u524d\u6d3b\u52a8\u7684\u7c7b\u540d\u4e3a\u9ed8\u8ba4\u6587\u4ef6\u540d</li> </ul> </li> <li>PreferenceManager \u7c7b\u4e2d\u7684 getDefaultSharedPreferences()\u65b9\u6cd5<ul> <li>Context\u53c2\u6570\uff1b\u6587\u4ef6\u540d\u4ee5\u5f53\u524d\u7684\u5305\u540d\u4e3a\u6587\u4ef6\u540d</li> </ul> </li> </ol> <p>8.3 \u8bfb\u53d6\u6570\u636e\u7684\u65b9\u6cd5</p> <p>\u200b   SharedPreference\u63a5\u53e3\u662f\u4e3b\u8981\u8d1f\u8d23\u8bfb\u53d6sp\u6570\u636e\u7684\u4e3b\u8981\u63a5\u53e3\uff0c\u6570\u636e\u4e3b\u8981\u4e3akey-value\uff1b</p> <ul> <li> <p>boolean contains(String key)</p> </li> <li> <p>MapgetAll()  \u83b7\u53d6\u6240\u6709\u6570\u636e <li> <p>getXxx(String key,xxx defValue );\u83b7\u53d6\u57fa\u672c\u7c7b\u578b\u7684\u6570\u636e\uff0c\u6ca1\u6709\u5219\u8fd4\u56de\u9ed8\u8ba4\u503cdefValue\u3002</p> </li> <p><code>java     SharedPreferences Pref = getSharedPreferences(\"data\",MODE_PRIVATE);                   String Name = Pref.getString(\"name\",\"\"); //Key\u503c \u627e\u4e0d\u5230\u65f6\u7684\u8fd4\u56de\u503c                   int Age = Pref.getInt(\"age\",-1);                   boolean sex = Pref.getBoolean(\"sex\",false);</code></p> <p>8.4 \u5199\u5165\u6570\u636e\u7684\u65b9\u6cd5</p> <p>SharedPreference.Editor\u8d1f\u8d23\u5199\u5165sp\u6570\u636e\u3002</p> <ul> <li> <p>clear()    \u6e05\u9664\u6240\u6709\u6570\u636e</p> </li> <li> <p>putXxx(key,Value) \u63d2\u5165</p> </li> <li> <p>remove(key) \u5220\u9664</p> </li> <li> <p>apply()\u63d0\u4ea4\u4fee\u6539\uff0c\u5728\u540e\u53f0\u5f02\u6b65\u8fdb\u884c</p> </li> </ul> <p><code>java      SharedPreferences.Editor editor = getSharedPreferences(\"data\",MODE_PRIVATE).edit();                   editor.putString(\"name\",\"Tome\");                   editor.putInt(\"age\",26);                   editor.putBoolean(\"sex\",true);                   editor.apply();</code></p> <p>8.5 commit() \u548capply()\u7684\u533a\u522b</p> Commit() apply() \u6709\u8fd4\u56de\u503c\uff0c\u77e5\u9053\u662f\u5426\u63d0\u4ea4\u6210\u529f \u65e0\u8fd4\u56de\u503c\uff0c\u4e0d\u77e5\u9053\u662f\u5426\u63d0\u4ea4\u6210\u529f \u76f4\u63a5\u63d0\u4ea4\u5230\u786c\u76d8 \u5148\u7f13\u5b58\uff0c\u518d\u5f02\u6b65\u540e\u53f0\u63d0\u4ea4 \u540c\u6b65\u5199\u5165\u64cd\u4f5c\uff0c\u8981\u8003\u8651ANR \u5f02\u6b65\u5199\u5165\u64cd\u4f5c <p>8.7 \u6ce8\u610f\u4e8b\u9879</p> <ol> <li>\u5728UI\u7ebf\u7a0b\u4e2d\u8c03\u7528getXXX\u53ef\u80fd\u4f1a\u5bfc\u81f4ANR\u3002</li> <li>\u6211\u4eec\u5728\u521d\u59cb\u5316SharedPreferencesImpl\u5bf9\u8c61\u65f6\u4f1a\u52a0SharedPreferencesImpl\u5bf9\u5e94\u7684xml\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u6570\u636e\u90fd\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5982\u679cxml\u6587\u4ef6\u5f88\u5927\uff0c\u5c06\u4f1a\u5360\u7528\u5927\u91cf\u7684\u5185\u5b58\uff0c\u6211\u4eec\u53ea\u60f3\u8bfb\u53d6xml\u6587\u4ef6\u4e2d\u67d0\u4e2akey\u7684\u503c\uff0c\u4f46\u6211\u4eec\u83b7\u53d6\u5b83\u7684\u65f6\u5019\u662f\u4f1a\u52a0\u8f7d\u6574\u4e2a\u6587\u4ef6\u3002</li> <li>\u6bcf\u6dfb\u52a0\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u90fd\u4f1a\u91cd\u65b0\u5199\u5165\u6574\u4e2a\u6587\u4ef6\u7684\u6570\u636e\uff0c\u4e0d\u662f\u589e\u91cf\u5199\u5165\uff1b</li> </ol> <p>8.6 \u67e5\u770bxml\u6587\u4ef6\u7684\u65b9\u6cd5</p> <p>\u83b7\u53d6root\u6743\u9650\u540e\uff0c\u5728data\u4e2d\u67e5\u770b</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#2","title":"2\u3001\u6587\u4ef6\u8bfb\u5199\u548c\u5b58\u50a8","text":"<ul> <li>\u5b58\u50a8\u5728\u76f8\u5bf9\u8def\u5f84\u4e0b\uff0c\u4f7f\u7528FileOutputStream\u7c7b\u83b7\u53d6\u6587\u4ef6\uff0cBufferedWriter\u7c7b\u5199\u5165\u3002\uff08\u4ee5\u9500\u6bc1\u65f6\u5b58\u6237\u6570\u636e\u4e3a\u4f8b\uff09</li> </ul> <p><code>Java   private void save(String str) {       FileOutputStream out = null;       BufferedWriter writer = null;       try {           out = openFileOutput(\"data\", Context.MODE_PRIVATE);           writer = new BufferedWriter(new OutputStreamWriter(out));           writer.write(str);       } catch (IOException e) {           e.printStackTrace();       } finally {           try {               if (writer != null) {                   writer.close();               }           } catch (IOException e) {               e.printStackTrace();           }       }   }</code></p> <p>\u200b       </p> <ul> <li>\u8bfb\u53d6\u76f8\u5bf9\u8def\u5f84\u4e0b\u7684\u6570\u636e\uff0c\u4f7f\u7528FileInputStream\u7c7b\u83b7\u53d6\u6587\u4ef6\uff0cBufferedReader\u8bfb\u53d6\u6587\u4ef6\u3002</li> </ul> <p><code>java    private String LoadData(){           FileInputStream in = null;           BufferedReader reader = null;           StringBuilder content = new StringBuilder();           try {               in = openFileInput(\"data\");               reader =  new BufferedReader(new InputStreamReader(in));               String line = \"\";               //\u8bfb\u53d6\u6bcf\u4e00\u884c               while((line = reader.readLine())!=null)               {                     content.append(line);               }           }catch (IOException e){               e.printStackTrace();           }           finally {               try{                   if(reader != null)                   {                       reader.close();                   }               }               catch (IOException e)               {                   e.printStackTrace();               }           }           return content.toString();       }</code></p> <ul> <li>\u6587\u4ef6\u76ee\u5f55</li> </ul> <p></p> <p></p> <ul> <li> <p>App\u516c\u5171\u76ee\u5f55\uff1a\u5373\u6240\u6709App\u90fd\u53ef\u4ee5\u5171\u4eab\u7684\u6587\u4ef6</p> <p>\u6b63\u5e38\u7684\u4f7f\u7528\uff1a<code>Environment.getExternalStorageDirectory()</code>,\u7136\u540e\u81ea\u5df1\u547d\u540d\u5b50\u76ee\u5f55.\u5df2\u8fc7\u671f</p> <p><code>java File sdCard = Environment.getExternalStorageDirectory(); File directory_pictures = new File(sdCard, \"Pictures\"); Log.i(TAG,\"publicfile: \"+directory_pictures.getpath()); //publicfile: /storage/emulated/0/Pictures</code></p> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528App\u72ec\u7acb\u6587\u4ef6\u4e2d\u63d0\u4f9b\u7684\u5df2\u6709\u76ee\u5f55:<code>Environment.getExternalStoragePublicDirectory()</code></p> <p><code>java File publicfile = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES); Log.d(TAG, \"publicfile: \"+ publicfile.getPath()); //publicfile: /storage/emulated/0/Pictures</code></p> <p>\u5b9e\u9645\u8def\u5f84\u4e3a\uff1a/sdcard/Pictures</p> <p>\u4f46\u662f\u4ee5\u4e0a\u5df2\u7ecf\u8fc7\u65f6\uff0c\u4e0d\u80fd\u4f7f\u7528\u6587\u4ef6\u8def\u5f84\u8bfb\u53d6\u5171\u6709\u76ee\u5f55\uff0c\u5efa\u8bae\u91c7\u7528ContentProvider+ContentResolver+uri</p> <p>Media\u548cSAF(Storage Access Framework)\u83b7\u53d6Uri,\u7136\u540e\u5199\u5165\u6587\u4ef6\u3002</p> <p><code>java //\u901a\u8fc7Uri\u83b7\u53d6\u6587\u4ef6\u8f93\u5165\u6d41\u3001\u8f93\u51fa\u6d41\u7684\u65b9\u5f0f  OutputStream fs = getContentResolver().openOutputStream(uri);  InputStream is = getContentResolver().inputStream(uri);</code></p> <ul> <li>\u7cfb\u7edf\u7684\u5171\u6709\u76ee\u5f55\uff1a\u5efa\u8bae\u91c7\u7528MediaStore\u63d0\u4f9b\u7684Uri\u6765\u5b9e\u73b0</li> </ul> <p>\u7cfb\u7edf\u5171\u6709\u76ee\u5f55\u7684\u8bbf\u95ee\u6743\u9650\uff1a\u8bfb\u5199\u5171\u4eab\u76ee\u5f55\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6\u65f6\u4e0d\u9700\u8981\u6743\u9650</p> Uri\u7c7b\u578b \u65e0\u6743\u9650 READ_EXTERNAL Audio \u53ef\u8bfb\u5199APP\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6\uff0c\u4f46\u4e0d\u53ef\u76f4\u63a5\u4f7f\u7528\u8def\u5f84\u8bbf\u95ee \u53ef\u4ee5\u8bfb\u53d6\u5176\u4ed6APP\u521b\u5efa\u7684\u5a92\u4f53\u7c7b\u6587\u4ef6\uff0c\u5220\u9664\u548c\u4fee\u6539\u64cd\u4f5c\u9700\u8981\u7528\u6237\u6388\u6743\u3002 Image \u53ef\u8bfb\u5199APP\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6\uff0c\u4f46\u4e0d\u53ef\u76f4\u63a5\u4f7f\u7528\u8def\u5f84\u8bbf\u95ee \u53ef\u4ee5\u8bfb\u5176\u4ed6APP\u521b\u5efa\u7684\u5a92\u4f53\u7c7b\u6587\u4ef6\uff0c\u5220\u6539\u64cd\u4f5c\u9700\u8981\u7528\u6237\u6388\u6743 File \u53ef\u8bfb\u5199APP\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6\uff0c\u4f46\u4e0d\u53ef\u76f4\u63a5\u4f7f\u7528\u8def\u5f84\u8bbf\u95ee \u4e0d\u53ef\u8bfb\u5199\u5176\u4ed6APP\u521b\u5efa\u7684\u975e\u5a92\u4f53\u7c7b\u6587\u4ef6 Downloads \u53ef\u8bfb\u5199APP\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6\uff0c\u4f46\u4e0d\u53ef\u76f4\u63a5\u4f7f\u7528\u8def\u5f84\u8bbf\u95ee \u4e0d\u53ef\u8bfb\u5199\u5176\u4ed6APP\u521b\u5efa\u7684\u975e\u5a92\u4f53\u7c7b\u6587\u4ef6 <p>uri\u7531MeidaStore \u63d0\u4f9b\uff0c\u56e0\u4e3a\u662f\u7cfb\u7edf\u539f\u6709\u7684\u76ee\u5f55\uff0c\u56e0\u800c\u5df2\u7ecf\u6709\u73b0\u6210\u7684Uri\u4f7f\u7528,\u4ee5\u4e0b\u4e3a\u51e0\u4e2a\u73b0\u6210\u7684\u4f8b\u5b50\u3002</p> \u7c7b\u578b MediaStore API Uri \u76ee\u5f55 Audio MediaStore.Audio.Media.EXTERNAL_CONTENT_URI content://media/external/Audio/media Music Images MediaStore.Images.Media.EXTERNAL_CONTENT_URI content://media/external/images/media Pictures Vedio MediaStore.Video.Media.EXTERNAL_CONTENT_URI content://media/external/Vedio/media Movies Downloads MediaStore.Downloads.EXTERNAL_CONTENT_URI content://media/external/downloads Download <p>\u5728\u7cfb\u7edf\u539f\u6709\u7684\u76ee\u5f55\u4e0b\u65b0\u5efaDemo\uff0c\u53ef\u4ee5\u91c7\u7528\u5728ContentValues\u4e2d\uff0c\u6dfb\u52a0\u76f8\u5bf9\u8def\u5f84</p> <p><code>java //\u4fdd\u8bc1\u6839\u76ee\u5f55\u548cUri\u4e00\u81f4\u5373\u53ef contentValues.put(MediaStore.Images.Media.RELATIVE_PATH, Environment.DIRECTORY_PICTURES + File.separator + \"demo\");</code></p> <ul> <li>\u5176\u4ed6\u5e94\u7528\u521b\u5efa\u7684\u5171\u6709\u76ee\u5f55\uff1a\u5efa\u8bae\u91c7\u7528<code>Storage Access Framework</code>\uff0c\u539f\u56e0\uff1aMediaStore\u6ca1\u6709\u63d0\u4f9b\u73b0\u6210\u7684Uri</li> </ul> <p>Uri \u548c path\u7684\u8f6c\u6362</p> <ul> <li>Uri\u8f6cPath</li> </ul> <p>1.MediaStore\u63d0\u4f9b\u7684Uri,\u4ee5Host\u4e3a<code>content:</code>,\u90fd\u5b58\u5728\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u6570\u636e\u5e93\u5b58\u50a8\u7684\u6587\u4ef6\u8def\u5f84</p> <p><code>java   public void getFilePathFromUri() {           Cursor cur = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, null, MediaStore.Images.ImageColumns.DISPLAY_NAME + \" = ?\", new String[]{picname+\".jpg\"}, null);           int i = cur.getCount();           if(cur.moveToFirst()){               int index = cur.getColumnIndex(MediaStore.Images.ImageColumns.DATA);               String filepath = cur.getString(index);           }       }</code></p> <ol> <li>File uri \u662f\u6587\u4ef6\u751f\u6210\u7684Uri ,\u4ee5Host\u4e3a<code>file:</code></li> </ol> <p><code>java   //\u751f\u6210\u65b9\u5f0f   Uri uri = Uri.fromFile(File file)   //Uri\u8f6cpath   String filepath = Uri.getpath();</code></p> <ul> <li> <p>Path \u8f6c Uri</p> </li> <li> <p>File Path To Media Uri</p> <p><code>java  //\u4e00\u822c\u4e0d\u4f1a\u7528\u5230  \u5148\u83b7\u53d6Media Uri,\u518d\u6839\u636efilepath\u83b7\u53d6Media._ID,\u6700\u540e\u62fc\u63a5\u8d77\u6765\u7684Uri.</code></p> </li> <li> <p>File Path To Uri</p> </li> </ul> <p><code>java   Uri uri = Uri.fromFile(File file\uff09</code></p> </li> <li> <p>App\u4e13\u5c5e\u6587\u4ef6(\u79c1\u6709\u76ee\u5f55)\uff1a\u53ea\u6709\u8be5App\u53ef\u4ee5\u8bfb\u53d6\u7684\u6587\u4ef6</p> <p>Android 10\u4e4b\u540e\uff0c\u8bfb\u5199App\u4e13\u5c5e\u6587\u4ef6\u5c06\u4e0d\u518d\u9700\u8981\u6743\u9650\uff0c\u4f46\u662f\u65e0\u6cd5\u8bbf\u95ee\u548c\u4fee\u6539\u5176\u4ed6App\u7684\u79c1\u6709\u76ee\u5f55\u3002</p> <ul> <li>Internal Storage</li> </ul> <p><code>java   //\u5728Activity\u6216Fragment\u4e2d   File priinnerfile = getFilesDir();   Log.d(TAG, \"private internal file:\"+priinnerfile.getPath());   //\u9664\u6b64\u4e4b\u5916 \u8fd8\u6709Api:   //getDataDir()   //getCacheDir()   //getDir(String,int)</code></p> <p><code>java   //Android \u8def\u5f84   private internal file:/data/user/0/com.example.androiddemo/files     //\u5b9e\u9645\u8def\u5f84    /data/data/\u5305\u540d/files</code></p> <ul> <li>External Storage</li> </ul> <p><code>xml   #\u6743\u9650\u6dfb\u52a0 \u8be5\u6743\u9650\u5728Android 10\u5df2\u8fc7\u65f6\uff0c\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u53ef\u4ee5\u4e0d\u7528\u7533\u8bf7\u6743\u9650   &lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/&gt;   #\u53ef\u4ee5\u8bfb\u53d6\u522b\u7684\u5e94\u7528\u4fdd\u5b58\u5728\u5171\u6709\u76ee\u5f55\u7684\u6587\u4ef6   &lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"/&gt;</code></p> <ul> <li> <p>getExternalFilesDir(String type)</p> <ul> <li>Type= null ,\u6307\u9ed8\u8ba4\u8def\u5f84files\u6587\u4ef6\u5939</li> </ul> <p><code>java String privatefile = getExternalFilesDir(null).toString(); Log.d(TAG, \"private External file: \"+privatefile);</code></p> <p><code>java  private External file: /storage/emulated/0/Android/data/com.example.androiddemo/files    //\u5b9e\u9645\u8def\u5f84    /sdcard/Android/data/\u5305\u540d/files</code></p> <ul> <li>Type \u53ef\u4ee5\u6307\u5b9afiles\u7684\u5b50\u6587\u4ef6\u5939\uff0c\u5982<code>Caches</code></li> </ul> <p><code>java String privatefile = getExternalFilesDir(\"Caches\").toString(); Log.d(TAG, \"private External file: \"+privatefile);</code></p> <p><code>java  private External file: /storage/emulated/0/Android/data/com.example.androiddemo/files/Caches    //\u5b9e\u9645\u8def\u5f84 /sdcard/Android/data/\u5305\u540d/files/Caches</code></p> </li> </ul> </li> </ul> <p>Android10,\u4e4b\u540e\uff0c\u4e3a\u4e86\u907f\u514d\u5e94\u7528\u5728\u5171\u4eab\u76ee\u5f55\u4e2d\u4efb\u610f\u4e71\u5199\u6587\u4ef6\uff0c\u4e8e\u662f\u63d0\u51fa\u4e86<code>Scoped Storage</code>\uff0c\u5373\u4f5c\u7528\u57df\u5b58\u50a8\u3001\u5206\u533a\u5b58\u50a8\u6216\u6c99\u76d2\u5b58\u50a8\uff0c\u57fa\u672c\u539f\u5219\u5982\u4e0b\uff1a</p> <ol> <li>App\u79c1\u6709\u6587\u4ef6\u4e0d\u9700\u8981\u4efb\u4f55\u6743\u9650</li> <li>\u5171\u6709\u76ee\u5f55,\u5373App\u72ec\u7acb\u6587\u4ef6\u65e0\u6cd5\u901a\u8fc7\u8def\u5f84\u76f4\u63a5\u8bbf\u95ee\uff0c\u4e0d\u80fd\u65b0\u5efa\u3001\u5220\u9664\u548c\u4fee\u6539\u76ee\u5f55/\u6587\u4ef6\u7b49</li> <li>\u5171\u6709\u76ee\u5f55\uff0c\u5373App\u72ec\u7acb\u6587\u4ef6\u7684\u8bbf\u95ee\uff0c\u9700\u8981\u901a\u8fc7Uri\u8bbf\u95ee</li> </ol> <pre><code>//\u5728Application\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027\u53ef\u4ee5\u7d27\u81f4\u5206\u533a\u5b58\u50a8\uff0c\u4f46Android 11\u4f1a\u5f3a\u5236\u5f00\u542f\nandroid:requestLegacyExternalStorage=\"true\" \n</code></pre> <ul> <li>Android 11 \u4e3a\u4ec0\u4e48\u53ea\u80fd\u901a\u8fc7Uri,\u800c\u4e0d\u80fd\u901a\u8fc7\u6587\u4ef6\u8def\u5f84\u8bbf\u95ee</li> <li>\u6587\u4ef6\u7684\u5b58\u50a8\u548c\u8bfb\u53d6,\u4e3b\u8981\u662f\u901a\u8fc7<code>FileInputStream</code>\u548c<code>FileOutputStream</code>\u6765\u5b9e\u73b0\u7684\uff0c\u770b\u5176\u6587\u4ef6\u5b58\u50a8\u7684\u6e90\u7801\u53ef\u77e5,\u5728\u6784\u5efa<code>FileDescriptor fd = IoBridge.open(name, O_RDONLY)</code>\u65f6,\u629b\u51fa\u4e86\u6743\u9650\u5f02\u5e38</li> <li>\u800c\u901a\u8fc7Uri\u6784\u9020\u7684InputStream\u5219\u53ef\u4ee5\u6784<code>FileDescriptor</code>,\u56e0\u6b64\u9002\u7528\u4e8eUri\u8bfb\u53d6\u6587\u4ef6</li> </ul> <p>\u6ce8\uff1aDevices file explorer\u5237\u65b0\u9700\u8981\u901a\u8fc7\u5237\u65b0\u624b\u673a\u5217\u8868</p> <ul> <li>\u6743\u9650\u603b\u7ed3</li> </ul> <p>App\u8bfb\u5199\u81ea\u5df1\u65b0\u5efa\u7684\u6587\u4ef6\u65f6\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u6743\u9650</p> <p>App\u8bfb\u5199\u4ed6\u4eba\u65b0\u5efa\u7684\u6587\u4ef6\u65f6\uff0c\u6743\u9650\u533a\u5206\u5982\u4e0b\uff1a</p> \u7c7b\u578b \u6743\u9650 Internal Storage \u4e0d\u53ef\u8bbf\u95ee External Storage \u9700\u8981\u6388\u6743\u624d\u53ef\u4ee5\u8bbf\u95ee,\u53ef\u4ee5\u91c7\u7528File Provider \u7cfb\u7edf\u5171\u6709\u76ee\u5f55 \u53ef\u8bbf\u95ee\u5a92\u4f53\u6587\u4ef6\uff0c\u4f46\u4fee\u6539\u9700\u8981\u6388\u6743\uff0c\u975e\u5a92\u4f53\u6587\u4ef6\u4e0d\u53ef\u8bbf\u95ee\uff0c\u4e0d\u53ef\u6388\u6743 \u5e94\u7528\u5728sdcard\u65b0\u5efa\u7684\u5176\u4ed6\u6587\u4ef6 \u540c\u4e0a"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#3sqlite","title":"3\u3001SQLite\u6570\u636e\u5e93\u7684\u4f7f\u7528","text":"<ul> <li> <p>SQLite\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u6570\u636e\u5e93\u3002</p> </li> <li> <p>\u5185\u7f6e\u7684SQLiteOpenHelper\u7c7b\u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u82e5\u60f3\u4f7f\u7528\u5b83\uff0c\u5fc5\u987b\u7ee7\u627f\u4f7f\u7528\u5b83\uff0c\u501f\u52a9\u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u521b\u5efa</p> </li> </ul> \u65b9\u6cd5\u6216\u5b9e\u4f8b \u4f5c\u7528 DatabaseHelper\uff08\uff09 \u6784\u9020\u51fd\u6570\u3002\u56db\u4e2a\u53c2\u6570(Context context, String name, CursorFactory factory, int version\uff09 onCreate() \u521b\u5efa\u6570\u636e\u5e93 onUpgrade() \u5347\u7ea7\u6570\u636e\u5e93 getReadableDatabase() \u521b\u5efa\u6216\u6253\u5f00\u4e00\u4e2a\u5df2\u6709\u7684\u6570\u636e\u5e93\uff0c\u8fd4\u56de\u5bf9\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u5bf9\u8c61SQLiteDatabase\uff0c\u78c1\u76d8\u6ee1\u65f6\uff0c\u8fd4\u56de\u53ea\u8bfb getWritableDatabase() \u521b\u5efa\u6216\u6253\u5f00\u4e00\u4e2a\u5df2\u6709\u7684\u6570\u636e\u5e93\uff0c\u8fd4\u56de\u5bf9\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u5bf9\u8c61\uff0c\u78c1\u76d8\u6ee1\u65f6\uff0c\u51fa\u73b0\u5f02\u5e38 <p>\u53ef\u89c6\u5316\u6570\u636e\u5e93\u63d2\u4ef6\u540d\u79f0\uff1aDatabase Navigator</p> <p><code>java     DBhelper =new MyDataOpenHelper(this,\"Library.dp\",null,1);     DBhelper.getWritableDatabase();</code></p> <ul> <li>SQlitedatabse\u5bf9\u8c61\u7684\u65b9\u6cd5</li> </ul> \u65b9\u6cd5\u540d\u79f0 \u53c2\u6570 \u65b9\u6cd5\u8bf4\u660e insert() (Table\uff0cnull,ContentValue) \u6dfb\u52a0\u6570\u636e update() (Table,ContentValue,WhereClause) \u4fee\u6539\u6570\u636e delete() (Table,WhereClause) \u5220\u9664\u6570\u636e query() (Table,columns,selection,selection Args,Group By\uff0chaving,order by) \u67e5\u8be2\u6570\u636e <p><code>java   //insert  SQLiteDatabse\u64cd\u4f5c   SQLiteDatabase database =   DBhelper.getReadableDatabase();   ContentValues values = new ContentValues();   //\u5f00\u59cb\u6dfb\u52a0\u4e00\u7ec4\u6570\u636e   values.put(\"name\",\"Android Base\");   values.put(\"author\",\"Harry\");   values.put(\"pages\",123);   values.put(\"price\",16.32);   database.insert(\"Book\",null,values);   values.clear();   values.put(\"name\",\"Base Android \");   values.put(\"author\",\"Harry\");   values.put(\"pages\",123);   values.put(\"price\",16.32);   database.insert(\"Book\",null,values);   //SQLiteOpenHelper   db.execSQL(\"insert into person (name,number) values(?,?)\",new Object[]{name,number});</code></p> <p>```java   //\u4fee\u6539\u6570\u636e   SQLiteDatabase \u64cd\u4f5c   SQLiteDatabase database = DBhelper.getReadableDatabase();                   ContentValues values = new ContentValues();                   values.put(\"price\",10.00);                   database.update(\"Book\",values,\"id =?\",new String[]{\"1\"});   //SQLiteOpenHelper</p> <p>```</p> <p>```java   //\u4fee\u6539\u6570\u636e    SQLiteDatabase database = DBhelper.getWritableDatabase();                   database.delete(\"Book\",\"id=?\",new String[]{\"2\"});                   database.close();</p> <p>```</p> <p><code>java    //\u67e5\u8be2\u6570\u636e    SQLiteDatabase database = DBhelper.getWritableDatabase();                   Cursor  cursor = database.query(\"Book\",null,null,null,null,null,null);                   if(cursor.moveToFirst()){                       do{                           String name =  cursor.getString(cursor.getColumnIndex(\"name\"));                           Log.d(TAG, \"Name is \"+name);                       }while (cursor.moveToNext());                   }</code></p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#_4","title":"\u6846\u67b6","text":""},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#1mvcmvpmvvm","title":"1\u3001mvc\u3001mvp\u548cmvvm\u7684\u533a\u522b","text":"<p>1\u3001MVC</p> <p></p> <p>Model\uff1a\u4ee3\u8868\u6211\u4eec\u7684\u6570\u636e\u6a21\u578b\uff0c\u7ba1\u7406\u6570\u636e\u72b6\u6001\uff0c\u6bd4\u5982Android\u9879\u76ee\u4e2dJava Bean\u3002 View\uff1a\u89c6\u56fe\uff0c\u5373\u5448\u73b0\u7ed9\u7528\u6237\u7684UI\uff0c\u6bd4\u5982Android\u9879\u76ee\u4e2d\u7684layout.xml\u6587\u4ef6\u3001Activity\u548cFragment\u3002 Controller\uff1a\u63a7\u5236\u8005\uff0c\u8d1f\u8d23\u5904\u7406\u7528\u6237\u4e0eapp\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u5305\u542b\u4e1a\u52a1\u903b\u8f91\u3002\u6240\u4ee5Controller\u662fModel\u4e0eView\u7684\u4e2d\u4ecb\uff0c\u6bd4\u5982Android\u9879\u76ee\u4e2dActivity\u548cFragment\u3002</p> <p>\u7f3a\u70b9\uff1a</p> <p>1.View\u4e0eModel\u4e4b\u95f4\u8fd8\u5b58\u5728\u4f9d\u8d56\u5173\u7cfb\uff0cController\u5f88\u91cd\u5f88\u590d\u6742\u3002</p> <p>2.\u5728Android\u4e2dActivity\u5373\u662fView\u53c8\u662fController\uff0c\u6240\u4ee5\u4f1a\u5f88\u590d\u6742\u3002</p> <p>2\u3001MVP</p> <p>Model\uff1a\u4ee3\u8868\u6211\u4eec\u7684\u6570\u636e\u6a21\u578b\uff0c\u7ba1\u7406\u6570\u636e\u72b6\u6001\u3002 View\uff1a\u89c6\u56fe\uff0c\u5373\u5448\u73b0\u7ed9\u7528\u6237\u7684UI\uff0c\u5e76\u4e14\u8d1f\u8d23\u4e0e\u5ba2\u6237\u8fdb\u884c\u4ea4\u4e92\u3002\u6bd4\u5982\u6211\u4eec\u7684XML/Activity/Fragment\u3002 Presenter\uff1a\u4e3b\u6301\u8005\uff0cPresenter\u901a\u8fc7View\u63a5\u6536\u7528\u6237\u7684\u8f93\u5165\uff0c\u7136\u540e\u5728Model\u7684\u5e2e\u52a9\u4e0b\u5904\u7406\u7528\u6237\u7684\u6570\u636e\u5e76\u5c06\u7ed3\u679c\u4f20\u9012\u56deView\u3002Presenter\u901a\u8fc7\u63a5\u53e3\u4e0eView\u8fdb\u884c\u901a\u4fe1\u3002\u63a5\u53e3\u5728presenter\u7c7b\u4e2d\u5b9a\u4e49\uff0c\u5b83\u4f20\u9012\u6240\u9700\u7684\u6570\u636e\u3002Activity/Fragment \u53ca\u5176\u4ed6View\u89c6\u56fe\u7ec4\u4ef6\u5b9e\u73b0\u6b64\u63a5\u53e3\u83b7\u5f97\u4ed6\u4eec\u60f3\u8981\u7684\u6570\u636e\u5e76\u5448\u73b0\u6570\u636e\u3002\u4f18\u70b9\uff1a</p> <ol> <li>\u5c06View\u4e0eModel\u89e3\u8026\uff0c\u65b9\u4fbf\u8fdb\u884c\u5355\u5143\u6d4b\u8bd5\u3002</li> <li>Presenter\u5c42\u53ef\u901a\u8fc7\u5b9e\u73b0\u63a5\u53e3\u4e0eView\u5c42\u901a\u4fe1\u4ece\u800c\u907f\u514dPresenter\u5c42\u4e0eView\u5c42\u8026\u5408\u3002</li> <li>activity\u548cfragment\u4e0d\u518d\u662fcontroller\u5c42\uff0c\u800c\u662f\u7eaf\u7cb9\u7684view\u5c42\u3002</li> </ol> <p>3\u3001MVVM</p> <p></p> <p>Model\uff1a\u4ee3\u8868\u6211\u4eec\u7684\u6570\u636e\u6a21\u578b\uff0c\u7ba1\u7406\u6570\u636e\u72b6\u6001\u3002 View\uff1a\u89c6\u56fe\uff0c\u5373\u5448\u73b0\u7ed9\u7528\u6237\u7684UI\uff0c\u5e76\u4e14\u8d1f\u8d23\u4e0e\u5ba2\u6237\u8fdb\u884c\u4ea4\u4e92\u3002\u6bd4\u5982\u6211\u4eec\u7684XML/Activity/Fragment\u3002 ViewModel\uff1a\u5982\u4e0a\u56fe\u6240\u793a\uff0cViewModel\u4e0ePresenter\u7684\u533a\u522b\uff0c\u5728MVVM\u4e2d\uff0cView\u5f15\u7528\u6301\u6709ViewModel\uff0c\u4f46ViewModel\u5f97\u4e0d\u5230\u4efb\u4f55\u5173\u4e8eView\u7684\u4fe1\u606f\u3002\u6240\u4ee5View\u4e0eViewModel\u4e4b\u95f4\u5b58\u5728\u7740\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u4e00\u4e2aView\u53ef\u4ee5\u6301\u6709\u591a\u4e2aViewModel\u3002</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#_5","title":"\u5185\u5b58","text":""},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#1_1","title":"1\u3001\u5185\u5b58\u6cc4\u6f0f","text":"<p>1\u3001\u5b9a\u4e49</p> <p>\u7528\u52a8\u6001\u5b58\u50a8\u5206\u914d\u51fd\u6570\u52a8\u6001\u5f00\u8f9f\u7684\u7a7a\u95f4\uff0c\u5728\u4f7f\u7528\u5b8c\u6bd5\u540e\u672a\u91ca\u653e\uff0c\u7ed3\u679c\u5bfc\u81f4\u4e00\u76f4\u5360\u636e\u8be5\u5185\u5b58\u5355\u5143\u3002\u76f4\u5230\u7a0b\u5e8f\u7ed3\u675f\u3002\u5373\u6240\u8c13\u7684\u5185\u5b58\u6cc4\u6f0f\u3002 <code>\u5176\u5b9e\u8bf4\u767d\u4e86\u5c31\u662f\u8be5\u5185\u5b58\u7a7a\u95f4\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u672a\u56de\u6536</code></p> <p>2\u3001\u9020\u6210\u5185\u5b58\u6cc4\u9732\u7684\u539f\u56e0\u53ca\u89e3\u51b3\u65b9\u6848</p> <ul> <li> <p>Handler \u5f15\u8d77\u7684\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>Handler\u3001Message\u3001MessageQueue\u662f\u76f8\u4e92\u5173\u8054\u5728\u4e00\u8d77\u7684\uff0cHandler\u901a\u8fc7\u53d1\u9001\u6d88\u606fMessage\u4e0e\u4e3b\u7ebf\u7a0b\u8fdb\u884c\u4ea4\u4e92\uff0c\u5982\u679cHandler\u53d1\u9001\u7684\u6d88\u606fMessage\u5c1a\u672a\u88ab\u5904\u7406\uff0c\u8be5Message\u53ca\u53d1\u9001\u5b83\u7684Handler\u5bf9\u8c61\u5c06\u88abMessageQueue\u4e00\u76f4\u6301\u6709\uff0c\u8fd9\u6837\u5c31\u53ef\u80fd\u4f1a\u5bfc\u81f4Handler\u65e0\u6cd5\u88ab\u56de\u6536\u3002</p> <p></p> <p><code>SecondActivity\u4ee3\u7801\u4e2d\u6709\u4e00\u4e2a\u5ef6\u8fdf1\u79d2\u6267\u884c\u7684\u6d88\u606fMessage\uff0c\u5f53\u754c\u9762\u4eceSecondActivity\u8df3\u8f6c\u5230ThirdActivity\u65f6\uff0cSecondActivity\u81ea\u52a8\u8fdb\u5165\u540e\u53f0\uff0c\u6b64\u65f6\u5982\u679c\u7cfb\u7edf\u8d44\u6e90\u7d27\u5f20\uff08\u6216\u8005\u6253\u5f00\u8bbe\u7f6e\u91cc\u9762\u7684\u201c\u4e0d\u4fdd\u7559\u6d3b\u52a8\u201d\u9009\u9879\uff09\uff0cSecondActivity\u5c06\u4f1a\u88abfinish\u3002\u4f46\u95ee\u9898\u6765\u4e86\uff0c\u7531\u4e8eSecondActivity\u7684Handler\u5bf9\u8c61mHandler\u4e3a\u975e\u9759\u6001\u533f\u540d\u5185\u90e8\u7c7b\u5bf9\u8c61\uff0c\u5b83\u4f1a\u81ea\u52a8\u6301\u6709\u5916\u90e8\u7c7bSecondActivity\u7684\u5f15\u7528\uff0c\u4ece\u800c\u5bfc\u81f4SecondActivity\u65e0\u6cd5\u88ab\u56de\u6536\uff0c\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u3002</code></p> </li> <li> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5c06Handler\u58f0\u660e\u4e3a\u9759\u6001\u5185\u90e8\u7c7b\uff0c\u5c31\u4e0d\u4f1a\u6301\u6709\u5916\u90e8\u7c7bSecondActivity\u7684\u5f15\u7528\uff0c\u5176\u751f\u547d\u5468\u671f\u5c31\u548c\u5916\u90e8\u7c7b\u65e0\u5173\uff0c\u5982\u679cHandler\u91cc\u9762\u9700\u8981context\u7684\u8bdd\uff0c\u53ef\u4ee5\u901a\u8fc7\u5f31\u5f15\u7528\u65b9\u5f0f\u5f15\u7528\u5916\u90e8\u7c7b\u3002\uff08\u53c2\u8003\u5982\u4e0b\uff09\uff0c\u82e5\u8fd8\u6709\u672a\u5904\u7406\u7684\u4fe1\u606f\uff0c\u5728Activity\u7684onDestory()\u65b9\u6cd5\u4e2d</p> <p>\u79fb\u9664\u6d88\u606f\u961f\u5217\u4e2d\u7684\u5f85\u5904\u7406\u6d88\u606f\u3002</p> <p></p> <p></p> </li> <li> <p>\u5355\u4f8b\u6a21\u5f0f\u5f15\u8d77\u7684\u6cc4\u6f0f</p> </li> <li> <p>\u5355\u4f8b\u7684\u751f\u547d\u5468\u671f\u957f\u4e8eActivity\uff0c\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\uff0c\u5c06\u5bfc\u81f4Activity\u65e0\u6cd5\u56de\u6536\uff0c\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u3002</p> <p></p> <p>\u7531\u56fe\u4e2d\u53ef\u77e5\uff0c\u4f20\u5165\u7684Context\u5982\u679c\u662fActivity,\u4e8eContext\u4f1a\u88ab\u521b\u5efa\u7684\u5b9e\u4f8b\u4e00\u76f4\u6301\u6709\uff0c\u5f53Activity\u8fdb\u5165\u540e\u53f0\u6216\u8005\u5f00\u542f\u8bbe\u7f6e\u91cc\u9762\u7684\u4e0d\u4fdd\u7559\u6d3b\u52a8\u65f6\uff0cActivity\u4f1a\u88ab\u9500\u6bc1\uff0c\u4f46\u662f\u5355\u4f8b\u6301\u6709\u5b83\u7684Context\u5f15\u7528\uff0cActivity\u53c8\u6ca1\u6cd5\u9500\u6bc1\uff0c\u5bfc\u81f4\u4e86\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u4e0d\u6301\u6709Activity\u7684\u5f15\u7528\uff0c\u800c\u662f\u6301\u6709Application\u7684Context\u5f15\u7528\u3002</p> <p></p> </li> <li> <p>\u975e\u9759\u6001\u5185\u90e8\u7c7b\u521b\u5efa\u9759\u6001\u5b9e\u4f8b\u5f15\u8d77\u7684\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>\u975e\u9759\u6001\u5185\u90e8\u7c7b\u521b\u5efa\u9759\u6001\u5b9e\u4f8b\u540e\u4f1a\u6301\u6709\u5916\u90e8\u7c7b\u7684\u5f15\u7528\uff0c\u7531\u4e8e\u9759\u6001\u5b9e\u4f8b\u7684\u751f\u547d\u5468\u671f\u548capp\u4e00\u6837\uff0c\u56e0\u6b64\u9020\u6210\u5916\u90e8\u7c7b\u65e0\u6cd5\u56de\u6536\u3002</p> <p></p> <p><code>SecondActivity2\u5305\u542b\u4e00\u4e2a\u5185\u90e8\u7c7bInnerClass\uff0c\u5e76\u4e14\u5728onCreate\u4ee3\u7801\u4e2d\u521b\u5efa\u4e86InnerClass\u7684\u9759\u6001\u5b9e\u4f8bmInner\uff0c\u8be5\u5b9e\u4f8b\u548capp\u7684\u751f\u547d\u5468\u671f\u662f\u4e00\u81f4\u7684\u3002\u5728\u67d0\u4e9b\u573a\u666f\uff0c\u5982Activity\u9700\u8981\u9891\u7e41\u5207\u6362\uff0c\u9700\u8981\u4e0d\u65ad\u52a0\u8f7d\u5927\u91cf\u56fe\u7247\u7684\u573a\u5408\uff0c\u662f\u4f1a\u51fa\u73b0\u4e0a\u8ff0\u4ee3\u7801\u7684\uff0c\u6bcf\u6b21Activity\u542f\u52a8\u4e4b\u540e\u90fd\u4f1a\u4f7f\u7528\u8be5\u5355\u4f8b\uff0c\u907f\u514d\u91cd\u590d\u4e00\u4e9b\u6709\u538b\u529b\u7684\u64cd\u4f5c\u3002\u4f46\u662f\u8fd9\u6837\u4f1a\u5f15\u8d77\u5185\u5b58\u6cc4\u6f0f\uff0c\u56e0\u4e3a\u975e\u9759\u6001\u7684\u5185\u90e8\u7c7bInnerClass\u4f1a\u81ea\u52a8\u6301\u6709\u5916\u90e8\u7c7bSecondActivity2\u7684\u5f15\u7528\uff0c\u521b\u5efa\u7684\u9759\u6001\u5b9e\u4f8bmInner\u5c31\u4f1a\u4e00\u76f4\u6301\u6709SecondActivity2\u7684\u5f15\u7528\uff0c\u5bfc\u81f4SecondActivity2\u9700\u8981\u9500\u6bc1\u7684\u65f6\u5019\u6ca1\u6cd5\u6b63\u5e38\u9500\u6bc1\u3002</code></p> </li> <li> <p>\u89e3\u51b3\u65b9\u6848\uff0c\u5c06\u5185\u90e8\u7c7b\u4fee\u6539\u4e3a\u9759\u6001\u7684\u53ef\u4ee5\u907f\u514d\u5185\u90e8\u6cc4\u6f0f\uff0c\u6216\u8005\u5c06\u5176\u5199\u6210\u5355\u4f8b\u6a21\u5f0f\u5b8c\u6210\u540c\u6837\u7684\u529f\u80fd\u3002</p> </li> <li> <p>\u975e\u9759\u6001\u533f\u540d\u5185\u90e8\u7c7b\u5f15\u8d77\u7684\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>\u533f\u540d\u5185\u90e8\u7c7b\u88ab\u5f02\u6b65\u7ebf\u7a0b\u4f7f\u7528\uff0c\u53ef\u80fd\u4f1a\u5f15\u8d77\u5185\u5b58\u6cc4\u6f0f\u3002</p> <p></p> <p><code>mRunnable \u662f\u975e\u9759\u6001\u533f\u540d\u5185\u90e8\u7c7b\uff0c\u4f1a\u81ea\u52a8\u6301\u6709\u5916\u90e8\u7c7bSecondActivity3\u7684\u5f15\u7528\uff0c\u4f46\u662fmRunnable\u88ab\u5f02\u6b65\u7ebf\u7a0bThread\u4f7f\u7528\uff0c\u8fd9\u6837\u5c31\u4f1a\u5bfc\u81f4SecondActivity3\u5728\u9500\u6bc1\u7684\u65f6\u5019\u6ca1\u6cd5\u6b63\u5e38\u9500\u6bc1\uff0c\u4ece\u800c\u5f15\u8d77\u5185\u5b58\u6cc4\u6f0f\u3002</code></p> </li> <li> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5c06\u533f\u540d\u5185\u90e8\u7c7b\u8bbe\u7f6e\u6210\u9759\u6001\u7684\u3002</p> </li> <li> <p>\u6ce8\u518c/\u53cd\u6ce8\u518c\u672a\u6210\u5bf9\u4f7f\u7528\u5f15\u8d77\u7684\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>\u6211\u4eec\u7ecf\u5e38\u4f1a\u5728Activity\u7684onCreate\u4e2d\u6ce8\u518c\u5e7f\u64ad\u63a5\u53d7\u5668\u3001EventBus\u7b49\uff0c\u5982\u679c\u5fd8\u8bb0\u6210\u5bf9\u7684\u4f7f\u7528\u53cd\u6ce8\u518c\uff0c\u53ef\u80fd\u4f1a\u5f15\u8d77\u5185\u5b58\u6cc4\u6f0f\u3002</p> </li> <li> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u8981\u8bb0\u5f97\u76f8\u5e94\u7684\u5728onDestroy\u6216onPause\u4e2d\u53cd\u6ce8\u518c\u3002</p> </li> <li> <p>\u8d44\u6e90\u5bf9\u8c61\u6ca1\u6709\u5173\u95ed\u5f15\u8d77\u7684\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>\u6e90\u6027\u5bf9\u8c61\u6bd4\u5982Cursor\u3001File\u3001Bitmap\u3001\u89c6\u9891\u7b49\uff0c\u7cfb\u7edf\u90fd\u7528\u4e86\u4e00\u4e9b\u7f13\u51b2\u6280\u672f\uff0c\u5728\u4f7f\u7528\u8fd9\u4e9b\u8d44\u6e90\u7684\u65f6\u5019\uff0c\u5982\u679c\u6211\u4eec\u786e\u4fdd\u81ea\u5df1\u4e0d\u518d\u4f7f\u7528\u8fd9\u4e9b\u8d44\u6e90\u4e86\uff0c\u8981\u53ca\u65f6\u5173\u95ed\uff0c\u5426\u5219\u53ef\u80fd\u5f15\u8d77\u5185\u5b58\u6cc4\u6f0f\u3002</p> </li> <li> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u4f7f\u7528\u5b8c\u540e\u8bb0\u5f97\u53ca\u65f6\u5173\u95ed\u8fd9\u4e9b\u8d44\u6e90\u3002</p> </li> <li> <p>\u96c6\u5408\u5bf9\u8c61\u6ca1\u6709\u53ca\u65f6\u6e05\u7406\u5f15\u8d77\u7684\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>\u5982\u679c\u96c6\u5408\u662fstatic\u3001\u4e0d\u65ad\u7684\u5f80\u91cc\u9762\u6dfb\u52a0\u4e1c\u897f\u3001\u53c8\u5fd8\u8bb0\u53bb\u6e05\u7406\uff0c\u80af\u5b9a\u4f1a\u5f15\u8d77\u5185\u5b58\u6cc4\u6f0f\u3002</p> </li> <li> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5f53\u4e0d\u4f7f\u7528\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u8bb0\u5f97\u53ca\u65f6\u6e05\u7406\u96c6\u5408\uff0c\u8ba9\u76f8\u5173\u5bf9\u8c61\u4e0d\u518d\u88ab\u5f15\u7528\u3002</p> </li> <li> <p>\u54c8\u5e0c\u503c\u4fee\u6539\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>\u5c5e\u6027\u52a8\u753b</p> </li> <li> <p>as y ncTask</p> </li> <li> <p>finalize</p> </li> <li> <p>Wevview </p> </li> </ul> <p>3\u3001\u68c0\u67e5Android\u6cc4\u9732\u7684\u5de5\u5177LeakCanary</p> <p>4\u3001\u603b\u7ed3\u9884\u9632\u5185\u5b58\u6cc4\u6f0f</p> <pre><code>1\u3001Handler\u6301\u6709\u7684\u5f15\u7528\u6700\u597d\u4f7f\u7528\u5f31\u5f15\u7528\uff0c\u5728Activity\u88ab\u91ca\u653e\u7684\u65f6\u5019\u8981\u8bb0\u5f97\u6e05\u7a7aMessage\uff0c\u53d6\u6d88Handler\u5bf9\u8c61\u7684Runnable\uff1b\n2\u3001\u975e\u9759\u6001\u5185\u90e8\u7c7b\u3001\u975e\u9759\u6001\u533f\u540d\u5185\u90e8\u7c7b\u4f1a\u81ea\u52a8\u6301\u6709\u5916\u90e8\u7c7b\u7684\u5f15\u7528\uff0c\u4e3a\u907f\u514d\u5185\u5b58\u6cc4\u9732\uff0c\u53ef\u4ee5\u8003\u8651\u628a\u5185\u90e8\u7c7b\u58f0\u660e\u4e3a\u9759\u6001\u7684\uff1b\n3\u3001\u5bf9\u4e8e\u751f\u547d\u5468\u671f\u6bd4Activity\u957f\u7684\u5bf9\u8c61\uff0c\u8981\u907f\u514d\u76f4\u63a5\u5f15\u7528Activity\u7684context\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528ApplicationContext\uff1b\n4\u3001\u5e7f\u64ad\u63a5\u6536\u5668\u3001EventBus\u7b49\u7684\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u6ce8\u518c/\u53cd\u6ce8\u518c\u5e94\u8be5\u6210\u5bf9\u4f7f\u7528\uff1b\n5\u3001\u4e0d\u518d\u4f7f\u7528\u7684\u8d44\u6e90\u5bf9\u8c61Cursor\u3001File\u3001Bitmap\u7b49\u8981\u8bb0\u4f4f\u6b63\u786e\u5173\u95ed\uff1b\n6\u3001\u96c6\u5408\u91cc\u9762\u7684\u4e1c\u897f\u3001\u6709\u52a0\u5165\u5c31\u5e94\u8be5\u5bf9\u5e94\u6709\u76f8\u5e94\u7684\u5220\u9664\u3002\n</code></pre>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#2_1","title":"2\u3001\u5185\u5b58\u6ea2\u51fa","text":"<p>1\u3001\u5b9a\u4e49\uff1a\u7cfb\u7edf\u4f1a\u7ed9\u6bcf\u4e2aAPP\u5206\u914d\u5185\u5b58\u4e5f\u5c31\u662fHeap Size\u503c\u3002\u5f53APP\u5360\u7528\u7684\u5185\u5b58\u52a0\u4e0a\u6211\u4eec\u7533\u8bf7\u7684\u5185\u5b58\u8d44\u6e90\u8d85\u8fc7\u4e86Dalvik\u865a\u62df\u673a\u7684\u6700\u5927\u5185\u5b58\u65f6\u5c31\u4f1a\u629b\u51fa\u7684Out Of Memory\u5f02\u5e38\u3002</p> <p>2\u3001\u9020\u6210\u5185\u5b58\u6ea2\u51fa\u7684\u539f\u56e0\uff1a</p> <ul> <li>\u5185\u5b58\u6cc4\u6f0f\u5bfc\u81f4</li> <li>\u5360\u7528\u5185\u5b58\u8f83\u591a\u7684\u5bf9\u8c61</li> </ul> <p>3\u3001\u76f8\u5173\u6982\u5ff5</p> <ul> <li> <p>\u6808(stack)\uff1a\u662f\u7b80\u5355\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7a0b\u5e8f\u8fd0\u884c\u65f6\u7cfb\u7edf\u81ea\u52a8\u5206\u914d\uff0c\u4f7f\u7528\u5b8c\u6bd5\u540e\u81ea\u52a8\u91ca\u653e\u3002\u4f18\u70b9\uff1a\u901f\u5ea6\u5feb\u3002</p> </li> <li> <p>\u5806(heap)\uff1a\u7528\u4e8e\u5b58\u653e\u7531new\u521b\u5efa\u7684\u5bf9\u8c61\u548c\u6570\u7ec4\u3002\u5728\u5806\u4e2d\u5206\u914d\u7684\u5185\u5b58\uff0c\u4e00\u65b9\u9762\u7531java\u865a\u62df\u673a\u81ea\u52a8\u5783\u573e\u56de\u6536\u5668\u6765\u7ba1\u7406\uff0c\u53e6\u4e00\u65b9\u9762\u8fd8\u9700\u8981\u7a0b\u5e8f\u5458\u63d0\u4f9b\u56de\u6536\uff0c\u9632\u6b62\u5185\u5b58\u6cc4\u9732\u95ee\u9898\u3002</p> </li> <li> <p>\u65b9\u6cd5\u533a(method)\uff1a\u53c8\u53eb\u9759\u6001\u533a\uff0c\u8ddf\u5806\u4e00\u6837\uff0c\u88ab\u6240\u6709\u7684\u7ebf\u7a0b\u5171\u4eab\u3002\u65b9\u6cd5\u533a\u5305\u542b\u6240\u6709\u7684class\u548cstatic\u53d8\u91cf\u3002</p> </li> <li>\u5185\u5b58\u6296\u52a8\uff1a\u5185\u5b58\u6296\u52a8\u662f\u6307\u5728\u77ed\u65f6\u95f4\u5185\u6709\u5927\u91cf\u7684\u5bf9\u8c61\u88ab\u521b\u5efa\u6216\u8005\u88ab\u56de\u6536\u7684\u73b0\u8c61\uff0c\u4e3b\u8981\u662f\u5faa\u73af\u4e2d\u5927\u91cf\u521b\u5efa\u3001\u56de\u6536\u5bf9\u8c61\u3002\u8fd9\u79cd\u60c5\u51b5\u5e94\u5f53\u5c3d\u91cf\u907f\u514d\u3002    \u5b83\u4eec\u4e09\u8005\u7684\u91cd\u8981\u7b49\u7ea7\u5206\u522b\uff1a\u5185\u5b58\u6ea2\u51fa &gt; \u5185\u5b58\u6cc4\u9732 &gt; \u5185\u5b58\u6296\u52a8\u3002    \u5185\u5b58\u6ea2\u51fa\u5bf9\u6211\u4eec\u7684App\u6765\u8bf4\uff0c\u5f71\u54cd\u662f\u975e\u5e38\u5927\u7684\u3002\u6709\u53ef\u80fd\u5bfc\u81f4\u7a0b\u5e8f\u95ea\u9000\uff0c\u65e0\u54cd\u5e94\u7b49\u73b0\u8c61\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u4e00\u5b9a\u8981\u4f18\u5148\u89e3\u51b3OOM\u7684\u95ee\u9898\u3002</li> <li>\u5f3a\u5f15\u7528\uff1a\u5f3a\u5f15\u7528\u662f\u4f7f\u7528\u6700\u666e\u904d\u7684\u5f15\u7528\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u5177\u6709\u5f3a\u5f15\u7528\uff0c\u90a3\u5783\u573e\u56de\u6536\u5668\u7edd\u4e0d\u4f1a\u56de\u6536\u5b83\u3002 \u5f53\u5185\u5b58\u7a7a\u95f4\u4e0d\u8db3\uff0cJava\u865a\u62df\u673a\u5b81\u613f\u629b\u51faOutOfMemoryError\u9519\u8bef\uff0c\u4f7f\u7a0b\u5e8f\u5f02\u5e38\u7ec8\u6b62\uff0c\u4e5f\u4e0d\u4f1a\u9760\u968f\u610f\u56de\u6536\u5177\u6709\u5f3a\u5f15\u7528\u7684\u5bf9\u8c61\u6765\u89e3\u51b3\u5185\u5b58\u4e0d\u8db3\u7684\u95ee\u9898\u3002</li> <li>\u8f6f\u5f15\u7528\uff1a\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u53ea\u5177\u6709\u8f6f\u5f15\u7528\uff0c\u4f46\u5185\u5b58\u7a7a\u95f4\u8db3\u591f\u65f6\uff0c\u5783\u573e\u56de\u6536\u5668\u5c31\u4e0d\u4f1a\u56de\u6536\u5b83;\u76f4\u5230\u865a\u62df\u673a\u62a5\u544a\u5185\u5b58\u4e0d\u591f\u65f6\u624d\u4f1a\u56de\u6536\uff0c \u53ea\u8981\u5783\u573e\u56de\u6536\u5668\u6ca1\u6709\u56de\u6536\u5b83\uff0c\u8be5\u5bf9\u8c61\u5c31\u53ef\u4ee5\u88ab\u7a0b\u5e8f\u4f7f\u7528\u3002\u8f6f\u5f15\u7528\u53ef\u7528\u6765\u5b9e\u73b0\u5185\u5b58\u654f\u611f\u7684\u9ad8\u901f\u7f13\u5b58\u3002 \u8f6f\u5f15\u7528\u53ef\u4ee5\u548c\u4e00\u4e2a\u5f15\u7528\u961f\u5217(ReferenceQueue)\u8054\u5408\u4f7f\u7528\uff0c\u5982\u679c\u8f6f\u5f15\u7528\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536\u5668\u56de\u6536\uff0cJava\u865a\u62df\u673a\u5c31\u4f1a\u628a\u8fd9\u4e2a\u8f6f\u5f15\u7528\u52a0\u5165\u5230\u4e0e\u4e4b\u5173\u8054\u7684\u5f15\u7528\u961f\u5217\u4e2d\u3002</li> <li>\u5f31\u5f15\u7528\uff1a\u53ea\u5177\u6709\u5f31\u5f15\u7528\u7684\u5bf9\u8c61\u62e5\u6709\u66f4\u77ed\u6682\u7684\u751f\u547d\u5468\u671f\u3002\u5728\u5783\u573e\u56de\u6536\u5668\u7ebf\u7a0b\u626b\u63cf\u5b83\u6240\u7ba1\u8f96\u7684\u5185\u5b58\u533a\u57df\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u65e6\u53d1\u73b0\u4e86\u53ea\u5177\u6709\u5f31\u5f15\u7528\u7684\u5bf9\u8c61\uff0c\u4e0d\u7ba1\u5f53\u524d\u5185\u5b58\u7a7a\u95f4\u662f\u5426\u8db3\u591f\uff0c\u90fd\u4f1a\u56de\u6536\u5b83\u7684\u5185\u5b58\u3002 \u4e0d\u8fc7\uff0c\u7531\u4e8e\u5783\u573e\u56de\u6536\u5668\u662f\u4e00\u4e2a\u4f18\u5148\u7ea7\u5f88\u4f4e\u7684\u7ebf\u7a0b\uff0c\u56e0\u6b64\u4e0d\u4e00\u5b9a\u4f1a\u5f88\u5feb\u53d1\u73b0\u90a3\u4e9b\u53ea\u5177\u6709\u5f31\u5f15\u7528\u7684\u5bf9\u8c61\u3002 \u5f31\u5f15\u7528\u53ef\u4ee5\u548c\u4e00\u4e2a\u5f15\u7528\u961f\u5217(ReferenceQueue)\u8054\u5408\u4f7f\u7528\uff0c\u5982\u679c\u5f31\u5f15\u7528\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536\uff0cJava\u865a\u62df\u673a\u5c31\u4f1a\u628a\u8fd9\u4e2a\u5f31\u5f15\u7528\u52a0\u5165\u5230\u4e0e\u4e4b\u5173\u8054\u7684\u5f15\u7528\u961f\u5217\u4e2d\u3002</li> <li>\u865a\u5f15\u7528\uff1a\u865a\u5f15\u7528\u53ef\u4ee5\u7406\u89e3\u4e3a\u865a\u8bbe\u7684\u5f15\u7528\uff0c\u4e0e\u5176\u4ed6\u51e0\u79cd\u5f15\u7528\u90fd\u4e0d\u540c\uff0c\u865a\u5f15\u7528\u5e76\u4e0d\u4f1a\u51b3\u5b9a\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u4ec5\u6301\u6709\u865a\u5f15\u7528\uff0c\u90a3\u4e48\u5b83\u5c31\u548c\u6ca1\u6709\u4efb\u4f55\u5f15\u7528\u4e00\u6837\uff0c\u5728\u4efb\u4f55\u65f6\u5019\u90fd\u53ef\u80fd\u88ab\u5783\u573e\u56de\u6536\u5668\u56de\u6536\u3002 \u865a\u5f15\u7528\u4e3b\u8981\u7528\u6765\u8ddf\u8e2a\u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536\u5668\u56de\u6536\u7684\u6d3b\u52a8\u3002    \u865a\u5f15\u7528\u4e0e\u8f6f\u5f15\u7528\u548c\u5f31\u5f15\u7528\u7684\u4e00\u4e2a\u533a\u522b\u5728\u4e8e\uff1a\u865a\u5f15\u7528\u5fc5\u987b\u548c\u5f15\u7528\u961f\u5217 (ReferenceQueue)\u8054\u5408\u4f7f\u7528\u3002 \u5f53\u5783\u573e\u56de\u6536\u5668\u51c6\u5907\u56de\u6536\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u5b83\u8fd8\u6709\u865a\u5f15\u7528\uff0c\u5c31\u4f1a\u5728\u56de\u6536\u5bf9\u8c61\u7684\u5185\u5b58\u4e4b\u524d\uff0c\u628a\u8fd9\u4e2a\u865a\u5f15\u7528\u52a0\u5165\u5230\u4e0e\u4e4b \u5173\u8054\u7684\u5f15\u7528\u961f\u5217\u4e2d\u3002 \u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u5224\u65ad\u5f15\u7528\u961f\u5217\u4e2d\u662f\u5426\u5df2\u7ecf\u52a0\u5165\u4e86\u865a\u5f15\u7528\uff0c\u6765\u4e86\u89e3\u88ab\u5f15\u7528\u7684\u5bf9\u8c61\u662f\u5426\u5c06\u8981\u88ab\u5783\u573e\u56de\u6536\u3002 \u5982\u679c\u7a0b\u5e8f\u53d1\u73b0\u67d0\u4e2a\u865a\u5f15\u7528\u5df2\u7ecf\u88ab\u52a0\u5165\u5230\u5f15\u7528\u961f\u5217\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5728\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u7684\u5185\u5b58\u88ab\u56de\u6536\u4e4b\u524d\u91c7\u53d6\u5fc5\u8981\u7684\u884c\u52a8\u3002</li> </ul> <p>4\u3001\u5185\u5b58\u6ea2\u51fa\u7684\u9884\u9632</p> <ul> <li>\u56fe\u7247</li> <li>\u5185\u5b58\u4e2d\u52a0\u8f7d\u56fe\u7247\u76f4\u63a5\u5728\u5185\u5b58\u4e2d\u505a\u5904\u7406\uff08\u5982\u8fb9\u754c\u538b\u7f29\uff09</li> <li>\u51cf\u5c11Bitmap\u5bf9\u8c61\u7684\u5185\u5b58\u5360\u7528</li> <li>\u4e34\u65f6Bitmap\u7684\u53ca\u65f6\u56de\u6536</li> <li>\u5bf9\u8c61</li> <li>\u52a8\u6001\u56de\u6536\u5185\u5b58</li> <li>\u5185\u5b58\u5f15\u7528\u4e0a\u505a\u4e00\u4e9b\u5904\u7406</li> <li>\u6ce8\u610f\u5bf9\u8c61\u7684\u590d\u7528</li> <li>\u6ce8\u610f\u5355\u4f8b\u6a21\u5f0f\u7684\u4e0d\u5408\u7406\u6301\u6709</li> <li>\u6ce8\u610f\u76d1\u542c\u5668\u53ca\u65f6\u6ce8\u9500</li> <li>\u907f\u514d\u4f7f\u7528\u679a\u4e3e</li> <li>\u4f7f\u7528\u66f4\u52a0\u8f7b\u91cf\u7684\u6570\u636e\u7ed3\u6784</li> <li>\u9875\u9762</li> <li>\u4f18\u5316\u5e03\u5c40\u5c42\u6b21\uff0c\u51cf\u5c11\u5f00\u9500</li> <li>Activity\u907f\u514d\u88ab\u5f3a\u5f15\u7528</li> <li>Webview\u7684\u6cc4\u6f0f</li> <li>\u7cfb\u7edf</li> <li>\u81ea\u5b9a\u4e49\u5806\u5185\u5b58\u5927\u5c0f</li> <li>\u4f18\u5316Delivk\u865a\u62df\u673a\u7684\u5806\u5185\u5b58\u5206\u914d</li> <li>\u7533\u8bf7\u5927\u5185\u5b58large heap</li> <li>Services \u7528\u5b8c\u53ca\u65f6\u505c\u6b62</li> <li>\u8c28\u614e\u4f7f\u7528\u591a\u8fdb\u7a0b</li> </ul>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#3android","title":"3\u3001Android\u8fdb\u7a0b\u95f4\u901a\u4fe1","text":"<p>\u5206\u51e0\u4e2a\u5927\u7c7b</p> <p>1.\u8fdb\u7a0b\u5171\u4eab \u5f00\u542f:process=remote\uff0c\u4f7f\u5f97\u6240\u6709\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a\u8fdb\u7a0b</p> <p>2.\u5e7f\u64ad</p> <p>3.Binder\u673a\u5236\uff1a AIDL,intent,Messager</p> <p>4.Socket</p> <p>5.\u5171\u4eab\u5185\u5b58 ContentProvider file </p> <ul> <li>Intent </li> <li> <p>Activity\uff0cService\uff0cReceiver \u90fd\u652f\u6301\u5728 Intent \u4e2d\u4f20\u9012 Bundle \u6570\u636e\uff0c\u800c Bundle \u5b9e\u73b0\u4e86 Parcelable \u63a5\u53e3\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u8fdb\u7a0b\u95f4\u8fdb\u884c\u4f20\u8f93\u3002</p> </li> <li> <p>\u6587\u4ef6\u5171\u4eab</p> </li> <li> <p>Android \u57fa\u4e8eLinux\uff0c\u53ef\u4ee5\u5e76\u53d1\u8bfb\u53d6\u6587\u4ef6</p> </li> <li> <p>sharedPreference\u662f\u4e2a\u7279\u4f8b\uff0c\u7cfb\u7edf\u5bf9\u5b83\u7684\u8bfb\u5199\u6709\u4e00\u5b9a\u7684\u7f13\u5b58\u7b56\u7565\u3002IPC\u4e0d\u8003\u8651\u5b83</p> </li> <li> <p>Messenger</p> </li> <li> <p>Messenger \u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u7684 IPC \u65b9\u6848\uff0c\u5b83\u7684\u5e95\u5c42\u5b9e\u73b0\u662f AIDL \uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u8fdb\u7a0b\u4e2d\u4f20\u9012 Message \u5bf9\u8c61\uff0c\u5b83\u4e00\u6b21\u53ea\u5904\u7406\u4e00\u4e2a\u8bf7\u6c42\uff0c\u5728\u670d\u52a1\u7aef\u4e0d\u9700\u8981\u8003\u8651\u7ebf\u7a0b\u540c\u6b65\u7684\u95ee\u9898\uff0c\u670d\u52a1\u7aef\u4e0d\u5b58\u5728\u5e76\u53d1\u6267\u884c\u7684\u60c5\u5f62\u3002</p> </li> <li> <p>\u670d\u52a1\u7aef\u8fdb\u7a0b\uff1a\u670d\u52a1\u7aef\u521b\u5efa\u4e00\u4e2a Service \u6765\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u540c\u65f6\u901a\u8fc7\u4e00\u4e2a Handler \u5bf9\u8c61\u6765\u5b9e\u4f8b\u5316\u4e00\u4e2a Messenger \u5bf9\u8c61\uff0c\u7136\u540e\u5728 Service \u7684 onBind \u4e2d\u8fd4\u56de\u8fd9\u4e2a Messenger \u5bf9\u8c61\u5e95\u5c42\u7684 Binder \u5373\u53ef\u3002</p> </li> <li> <p>\u5ba2\u6237\u7aef\u8fdb\u7a0b\uff1a\u9996\u5148\u7ed1\u5b9a\u670d\u52a1\u7aef Service \uff0c\u7ed1\u5b9a\u6210\u529f\u4e4b\u540e\u7528\u670d\u52a1\u7aef\u7684 IBinder \u5bf9\u8c61\u521b\u5efa\u4e00\u4e2a Messenger \uff0c\u901a\u8fc7\u8fd9\u4e2a Messenger \u5c31\u53ef\u4ee5\u5411\u670d\u52a1\u7aef\u53d1\u9001\u6d88\u606f\u4e86\uff0c\u6d88\u606f\u7c7b\u578b\u662f Message \u3002\u5982\u679c\u9700\u8981\u670d\u52a1\u7aef\u54cd\u5e94\uff0c\u5219\u9700\u8981\u521b\u5efa\u4e00\u4e2a Handler \u5e76\u901a\u8fc7\u5b83\u6765\u521b\u5efa\u4e00\u4e2a Messenger\uff08\u548c\u670d\u52a1\u7aef\u4e00\u6837\uff09\uff0c\u5e76\u901a\u8fc7 Message \u7684 replyTo \u53c2\u6570\u4f20\u9012\u7ed9\u670d\u52a1\u7aef\u3002\u670d\u52a1\u7aef\u901a\u8fc7 Message \u7684 replyTo \u53c2\u6570\u5c31\u53ef\u4ee5\u56de\u5e94\u5ba2\u6237\u7aef\u4e86\u3002</p> </li> <li> <p>\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u662f\u901a\u8fc7\u62ff\u5230\u5bf9\u65b9\u7684 Messenger \u6765\u53d1\u9001 Message \u7684\u3002\u53ea\u4e0d\u8fc7\u5ba2\u6237\u7aef\u901a\u8fc7 bindService onServiceConnected \u800c\u670d\u52a1\u7aef\u901a\u8fc7 message.replyTo \u6765\u83b7\u5f97\u5bf9\u65b9\u7684 Messenger \u3002Messenger \u4e2d\u6709\u4e00\u4e2a Hanlder \u4ee5\u4e32\u884c\u7684\u65b9\u5f0f\u5904\u7406\u961f\u5217\u4e2d\u7684\u6d88\u606f\u3002\u4e0d\u5b58\u5728\u5e76\u53d1\u6267\u884c\uff0c\u56e0\u6b64\u6211\u4eec\u4e0d\u7528\u8003\u8651\u7ebf\u7a0b\u540c\u6b65\u7684\u95ee\u9898\u3002</p> </li> <li> <p>AIDL</p> </li> <li> <p>Messenger \u662f\u4ee5\u4e32\u884c\u7684\u65b9\u5f0f\u5904\u7406\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u6d88\u606f\uff0c\u5982\u679c\u5927\u91cf\u6d88\u606f\u540c\u65f6\u53d1\u9001\u5230\u670d\u52a1\u7aef\uff0c\u670d\u52a1\u7aef\u53ea\u80fd\u4e00\u4e2a\u4e00\u4e2a\u5904\u7406\uff0c\u6240\u4ee5\u5927\u91cf\u5e76\u53d1\u8bf7\u6c42\u5c31\u4e0d\u9002\u5408\u7528 Messenger \uff0c\u800c\u4e14 Messenger \u53ea\u9002\u5408\u4f20\u9012\u6d88\u606f\uff0c\u4e0d\u80fd\u8de8\u8fdb\u7a0b\u8c03\u7528\u670d\u52a1\u7aef\u7684\u65b9\u6cd5\u3002AIDL \u53ef\u4ee5\u89e3\u51b3\u5e76\u53d1\u548c\u8de8\u8fdb\u7a0b\u8c03\u7528\u65b9\u6cd5\u7684\u95ee\u9898\uff0c\u8981\u77e5\u9053 Messenger \u672c\u8d28\u4e0a\u4e5f\u662f AIDL \uff0c\u53ea\u4e0d\u8fc7\u7cfb\u7edf\u505a\u4e86\u5c01\u88c5\u65b9\u4fbf\u4e0a\u5c42\u7684\u8c03\u7528\u800c\u5df2\u3002</p> </li> <li>\u652f\u6301\u7684\u57fa\u672c\u7c7b\u578b\uff1aString\u3001List\u3001Map\u3001CharSequence</li> <li>\u670d\u52a1\u7aef\u521b\u5efa\u4e00\u4e2a Service \u7528\u6765\u76d1\u542c\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u7136\u540e\u521b\u5efa\u4e00\u4e2a AIDL \u6587\u4ef6\uff0c\u5c06\u66b4\u9732\u7ed9\u5ba2\u6237\u7aef\u7684\u63a5\u53e3\u5728\u8fd9\u4e2a AIDL \u6587\u4ef6\u4e2d\u58f0\u660e\uff0c\u6700\u540e\u5728 Service \u4e2d\u5b9e\u73b0\u8fd9\u4e2a AIDL \u63a5\u53e3\u5373\u53ef\u3002'</li> <li> <p>\u5ba2\u6237\u7aef \u7ed1\u5b9a\u670d\u52a1\u7aef\u7684 Service \uff0c\u7ed1\u5b9a\u6210\u529f\u540e\uff0c\u5c06\u670d\u52a1\u7aef\u8fd4\u56de\u7684 Binder \u5bf9\u8c61\u8f6c\u6210 AIDL \u63a5\u53e3\u6240\u5c5e\u7684\u7c7b\u578b\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u8c03\u7528 AIDL \u4e2d\u7684\u65b9\u6cd5\u4e86\u3002\u5ba2\u6237\u7aef\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1\u7684\u65b9\u6cd5\uff0c\u88ab\u8c03\u7528\u7684\u65b9\u6cd5\u8fd0\u884c\u5728\u670d\u52a1\u7aef\u7684 Binder \u7ebf\u7a0b\u6c60\u4e2d\uff0c\u540c\u65f6\u5ba2\u6237\u7aef\u7684\u7ebf\u7a0b\u4f1a\u88ab\u6302\u8d77\uff0c\u5982\u679c\u670d\u52a1\u7aef\u65b9\u6cd5\u6267\u884c\u6bd4\u8f83\u8017\u65f6\uff0c\u5c31\u4f1a\u5bfc\u81f4\u5ba2\u6237\u7aef\u7ebf\u7a0b\u957f\u65f6\u95f4\u963b\u585e\uff0c\u5bfc\u81f4 ANR \u3002\u5ba2\u6237\u7aef\u7684 onServiceConnected \u548c onServiceDisconnected \u65b9\u6cd5\u90fd\u5728 UI \u7ebf\u7a0b\u4e2d\u3002</p> </li> <li> <p>ContentProvider</p> </li> <li> <p>\u7528\u4e8e\u4e0d\u540c\u5e94\u7528\u95f4\u6570\u636e\u5171\u4eab\uff0c\u548c Messenger \u5e95\u5c42\u5b9e\u73b0\u540c\u6837\u662f Binder \u548c AIDL\uff0c\u7cfb\u7edf\u505a\u4e86\u5c01\u88c5\uff0c\u4f7f\u7528\u7b80\u5355\u3002 \u7cfb\u7edf\u9884\u7f6e\u4e86\u8bb8\u591a ContentProvider \uff0c\u5982\u901a\u8baf\u5f55\u3001\u65e5\u7a0b\u8868\uff0c\u9700\u8981\u8de8\u8fdb\u7a0b\u8bbf\u95ee\u3002</p> </li> <li>\u4f7f\u7528\u65b9\u6cd5\uff1a\u7ee7\u627f ContentProvider \u7c7b\u5b9e\u73b0 6 \u4e2a\u62bd\u8c61\u65b9\u6cd5\uff0c\u8fd9\u516d\u4e2a\u65b9\u6cd5\u5747\u8fd0\u884c\u5728 ContentProvider \u8fdb\u7a0b\u4e2d\uff0c\u9664 onCreate \u8fd0\u884c\u5728\u4e3b\u7ebf\u7a0b\u91cc\uff0c\u5176\u4ed6\u4e94\u4e2a\u65b9\u6cd5\u5747\u7531\u5916\u754c\u56de\u8c03\u8fd0\u884c\u5728 Binder \u7ebf\u7a0b\u6c60\u4e2d\u3002</li> <li> <p>ContentProvider \u7684\u5e95\u5c42\u6570\u636e\uff0c\u53ef\u4ee5\u662f SQLite \u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u662f\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u662f\u5185\u5b58\u4e2d\u7684\u6570\u636e\u3002</p> </li> <li> <p>socket</p> </li> <li> <p>Socket\u8d77\u6e90\u4e8e Unix\uff0c\u53ef\u4ee5\u7528\u201c\u6253\u5f00 open \u2013\u8bfb\u5199 write/read \u2013\u5173\u95ed close \u201d\u6a21\u5f0f\u6765\u64cd\u4f5c\u3002</p> </li> <li> <p>\u7c7b\u578b</p> <ul> <li>\u6d41\u5f0fSoceket(SOCK_STREAM)   \u9762\u5411\u8fde\u63a5\u7684Socket</li> <li>\u6570\u636e\u62a5\u5f0f(SOCK_DGRAM)   \u9762\u5411\u65e0\u8fde\u63a5\u7684</li> </ul> </li> <li> <p>Binder</p> </li> <li> <p>\u4e00\u6b21\u62f7\u8d1d</p> </li> <li>\u5206\u914dpid  \u5b89\u5168\u6027\u9ad8</li> <li>\u91c7\u7528C/S\u7684\u901a\u4fe1\u6a21\u5f0f</li> <li>\u5e7f\u64ad</li> </ul>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#_6","title":"\u52a8\u753b","text":""},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#1_2","title":"1\u3001\u52a8\u753b\u6982\u5ff5","text":"<ul> <li>\u5c5e\u6027\u52a8\u753b\u8d44\u6e90(Property)</li> <li>Animator\u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u5b50\u7c7b\u5b9e\u73b0\u7c7b\u4e3aAnimatorSet\u3001ValueAnimator\u3001ObjectAnimator\u3001TimeAnimator<ul> <li>                                  \u662f\u7236\u5143\u7d20\uff0c\u5305\u542b\u4ee5\u4e0b\u7684\uff0c\u6240\u5bf9\u5e94\u7684\u7c7b\u662fAnimatorSet</li> <li>           \u7528\u4e8e\u5b9a\u4e49ObjectAnimator</li> <li>                      \u7528\u4e8e\u5b9a\u4e49ValueAnimator</li> </ul> </li> <li>\u52a8\u753b\u6a21\u5f0f</li> <li>\u8865\u95f4(Tween)\u52a8\u753b</li> <li>\u9010\u5e27(Frame)\u52a8\u753b<ul> <li>\u5728\u5143\u7d20\u4e2d\u4f7f\u7528\u5b50\u5143\u7d20\u5b9a\u4e49\u52a8\u753b\u7684\u5168\u90e8\u5e27\uff0c\u5e76\u6307\u5b9a\u5e27\u7684\u4e8b\u4ef6</li> <li>\u4f7f\u7528AnimationDrawable\u7c7b\u6765\u83b7\u53d6\u52a8\u753b\uff0c\u9ed8\u8ba4\u662f\u4e0d\u64ad\u653e\u7684</li> <li>strat(): \u5f00\u59cb\u52a8\u753b</li> <li>stop(): \u505c\u6b62\u52a8\u753b</li> </ul> </li> <li>Animator\u6846\u67b6</li> <li>\u63d0\u4f9b\u7684\u5173\u952e\u63a5\u53e3<ul> <li>ofFloat()</li> </ul> </li> <li>Animotion \u6982\u8ff0\u548c\u6267\u884c\u539f\u7406</li> <li>Animotion \u6267\u884c\u65b9\u6cd5</li> <li>\u4ee3\u7801\u7c7b</li> <li>xml\u6587\u4ef6  \u5229\u7528 AnimationUtils loadAnimation\uff08\uff09\u52a0\u8f7dxml\u6587\u4ef6\uff0c\u53ef\u4ee5\u89e3\u6790\u751f\u6210\u5bf9\u5e94\u52a8\u753b\u3002</li> <li>xml \u5c5e\u6027</li> <li>fillAfter     \u663e\u793a\u6700\u7ec8\u7684\u52a8\u753b\u5f62\u5f0f</li> <li>fillBefore</li> </ul>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#2tween","title":"2\u3001\u8865\u95f4(Tween)\u52a8\u753b","text":"<p>\u786e\u5b9a\u4e86view\u7684\u5f00\u59cb\u7684\u89c6\u56fe\u6837\u5f0f\u548c\u7ed3\u675f\u7684\u89c6\u56fe\u6837\u5f0f\uff0c\u52a8\u753b\u8fc7\u7a0b\u4e2d\u7cfb\u7edf\u4f1a\u8865\u5168\u53d8\u5316\u4e2d\u7684\u72b6\u6001\uff0c\u6700\u7ec8\u5c31\u5b9e\u73b0\u4e86\u52a8\u753b\u6548\u679c\u3002</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#animation","title":"Animation\u5b50\u7c7b","text":"<ul> <li>translate (\u5e73\u79fb\u52a8\u753b) \u2014 TranslateAnimation</li> <li>alpha \uff08 \u900f\u660e\u5ea6\u52a8\u753b\uff09 \u2014 AlphaAnimation \u7c7b</li> <li>scale (\u7f29\u653e\u52a8\u753b) \u2014 ScaleAnimation</li> <li>rotate \uff08\u65cb\u8f6c\u52a8\u753b\uff09 \u2014 RotateAnimation\u7c7b</li> </ul>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#translateanimation","title":"TranslateAnimation   \u5e73\u79fb\u52a8\u753b","text":"<ul> <li>\u6784\u9020\u51fd\u6570</li> </ul> <p><code>java   TranslateAnimation(Context context, AttributeSet attrs) //\u4f7f\u7528xml\u6587\u4ef6           TranslateAnimation(float fromXDelta, float toXDelta, float fromYDelta, float toYDelta)   TranslateAnimation(int fromXType, float fromXValue, int toXType, float toXValue, int fromYType, float fromYValue, int toYType, float toYValue)</code></p> <ul> <li>\u51fd\u6570\u53c2\u6570\u8bf4\u660e</li> </ul> <p></p> <ul> <li> <p>Type\u7c7b\u578b</p> <ul> <li>ABSOLUT E                  \u5177\u4f53\u503c                 0</li> <li>RELATIVE_TO_SELF    \u76f8\u5bf9\u4e8e\u81ea\u5df1          0%</li> <li>RELATIVE_TO_PARENT \u76f8\u5bf9\u4e8e\u7236\u5e03\u5c40   0%p</li> </ul> </li> <li> <p>\u52a8\u753b\u5750\u6807\u7684\u539f\u70b9\u90fd\u662fView\u7684\u5de6\u4e0a\u89d2(0,0)\uff0c\u56e0\u6b64\u82e5\u4e3a\u8d1f\uff0c\u5219\u51fa\u73b0\u5728\u5176\u5de6\u4e0a\u89d2</p> </li> <li> <p>demo \u7ec3\u4e60</p> </li> </ul> <p><code>java   //Java \u7c7b\u5b9e\u73b0   TranslateAnimation translateAnimation = new TranslateAnimation(0, 400, 0, 200);   translateAnimation.setDuration(3000);   translateAnimation.setFillAfter(true);   mTVDemo.startAnimation(translateAnimation);</code></p> <p><code>xml   //0 xml\u5b9e\u73b0   ?xml version=\"1.0\" encoding=\"utf-8\"?&gt;   &lt;translate xmlns:android=\"http://schemas.android.com/apk/res/android\"       android:fromXDelta=\"0\"       android:toXDelta=\"400\"       android:fromYDelta=\"0\"       android:toYDelta=\"200\"       android:duration=\"3000\"       android:fillAfter=\"true\"&gt;   &lt;/translate&gt;   // 0% xml\u5b9e\u73b0   ?xml version=\"1.0\" encoding=\"utf-8\"?&gt;   &lt;translate xmlns:android=\"http://schemas.android.com/apk/res/android\"       android:fromXDelta=\"0\"       android:toXDelta=\"100%\"       android:fromYDelta=\"0\"       android:toYDelta=\"100%\"       android:duration=\"3000\"       android:fillAfter=\"true\"&gt;   &lt;/translate&gt;   //0%p xml\u5b9e\u73b0   &lt;translate xmlns:android=\"http://schemas.android.com/apk/res/android\"       android:fromXDelta=\"0\"       android:toXDelta=\"50%p\"       android:fromYDelta=\"0\"       android:toYDelta=\"50%p\"       android:duration=\"3000\"       android:fillAfter=\"true\"&gt;   &lt;/translate&gt;   //java \u4ee3\u7801   mTVDemo.startAnimation(AnimationUtils.loadAnimation(this, R.anim.half_view_enter_bottom));</code></p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#alphaanimation","title":"AlphaAnimation","text":"<ul> <li>\u6784\u9020\u53c2\u6570</li> </ul> <p>AlphaAnimation(Context context, AttributeSet attrs)       //\u8bfb\u53d6xml\u6587\u4ef6\u751f\u6210   AlphaAnimation(float fromAlpha, float toAlpha)    </p> <ul> <li>\u53c2\u6570\u8bf4\u660e</li> </ul> <p><code>fromAlpha: Starting alpha value for the animation, where 1.0 means fully opaque and 0.0 means fully transparent. //\u5f00\u59cb\u65f6\u7684\u900f\u660e\u5ea6   toAlpha:  Ending alpha value for the animation.//\u7b80\u5355\u65f6\u7684\u900f\u660e\u5ea6</code></p> <ul> <li>demo\u7ec3\u4e60</li> </ul> <p><code>Java   //Java\u5b9e\u73b0   AlphaAnimation alphaAnimation = new AlphaAnimation(0.1f, 1.0f);   alphaAnimation.setDuration(3000);   alphaAnimation.setFillBefore(true);   mTVDemo.startAnimation(alphaAnimation);</code></p> <p>```xml   </p> <p>    mTVDemo.startAnimation(AnimationUtils.loadAnimation(this, Animal\u7684xml\u6587\u4ef6ID));   ```</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#scaleanimation","title":"ScaleAnimation \u7f29\u653e\u52a8\u753b","text":"<ul> <li>\u6784\u9020\u51fd\u6570</li> </ul> <pre><code>ScaleAnimation(Context context, AttributeSet attrs)//\u5229\u7528xml\u6587\u4ef6\u751f\u6210\u5bf9\u8c61\nScaleAnimation(float fromX, float toX, float fromY, float toY)\nScaleAnimation(float fromX, float toX, float fromY, float toY, float pivotX, float pivotY)\nScaleAnimation(float fromX, float toX, float fromY, float toY, int pivotXType, float pivotXValue, int pivotYType, float pivotYValue)\n</code></pre> <ul> <li>\u53c2\u6570\u4ecb\u7ecd</li> <li>privotXType\u4e3a\u7f29\u653e\u539f\u70b9\u7684X\u8f74\u5750\u6807\uff0c\u76f8\u5bf9\u4e8eX\u8f74\u7684\u65b9\u5411\u7684\u504f\u79fb\u91cf</li> <li>privotYType\u4e3a\u7f29\u653e\u539f\u70b9\u7684X\u8f74\u5750\u6807\uff0c\u76f8\u5bf9\u4e8eY\u8f74\u7684\u65b9\u5411\u7684\u504f\u79fb\u91cf</li> </ul> <ul> <li>demo\u7ec3\u4e60</li> </ul> <p><code>java   caleAnimation scaleAnimation = new ScaleAnimation(0.0f, 2.0f, 0.0f, 2.0f);   scaleAnimation.setDuration(3000);   scaleAnimation.setFillAfter(true);   mTVDemo.startAnimation(scaleAnimation);</code></p> <pre><code>//xml\u5b9e\u73b0\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;scale xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:fromXScale=\"0.0\"\n    android:toXScale=\"2.0\"\n    android:fromYScale=\"0.0\"\n    android:toYScale=\"2.0\"\n    android:pivotX=\"50%p\"\n    android:pivotY=\"50%p\"\n    android:duration=\"3000\"\n    android:fillAfter=\"true\"/&gt;\n      mTVDemo.startAnimation(AnimationUtils.loadAnimation(this, Animal\u7684xml\u6587\u4ef6ID));//Java\n</code></pre>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#rotateanimation","title":"RotateAnimation","text":"<ul> <li>\u6784\u9020\u51fd\u6570</li> </ul> <p><code>java   RotateAnimation(Context context, AttributeSet attrs)   RotateAnimation(float fromDegrees, float toDegrees)   RotateAnimation(float fromDegrees, float toDegrees, float pivotX, float pivotY)   RotateAnimation(float fromDegrees, float toDegrees, int pivotXType, float pivotXValue, int pivotYType, float pivotYValue)</code></p> <ul> <li>\u53c2\u6570\u8bf4\u660e</li> </ul> <p></p> <ul> <li>Demo\u7ec3\u4e60</li> </ul> <p><code>java   //Java \u5b9e\u73b0 \u7ed5View\u4e2d\u5fc3\u65cb\u8f6c270\u5ea6   RotateAnimation rotateAnimation = new RotateAnimation(0.0f, 270f, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);   rotateAnimation.setDuration(3000);   rotateAnimation.setFillAfter(true);   mTVDemo.startAnimation(rotateAnimation);</code></p> <p>```xml   </p> <p>     mTVDemo.startAnimation(AnimationUtils.loadAnimation(this, Animal\u7684xml\u6587\u4ef6ID));//Java   ```</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#animationset","title":"AnimationSet  \u8054\u5408\u52a8\u753b","text":"<p>\u6ce8\uff1a\u9002\u5408\u5355\u4e2aView \u540c\u65f6\u5b9e\u73b0\u591a\u4e2a\u52a8\u753b</p> <p>animationSet\u7ee7\u627f\u81eaAnimation\u6ca1\u6709\u81ea\u5df1\u7684\u5c5e\u6027\u5b8c\u5168\u7ee7\u627f\u7236\u7c7b\uff0c\u4f46\u662f\u6709\u4e9b\u5c5e\u6027\u5bf9\u5b83\u65e0\u6548\uff0c\u4f46\u6709\u4e9b\u5c5e\u6027\u4e5f\u53ea\u6709\u5b83\u53ef\u4ee5\u7528\uff0c\u548cAnimation\u4f7f\u7528\u5c5e\u6027\u7684\u533a\u522b</p> <ol> <li> <p>duration, repeatMode, fillBefore, fillAfter: \u8fd9\u4e9b\u5c5e\u6027\u8bbe\u7f6e\u7ed9\u4e86AnimationSet\u4f1a\u4f5c\u7528\u4e8e\u5b83\u5185\u90e8\u7684Animation\u5bf9\u8c61.</p> </li> <li> <p>repeatCount, fillEnabled: \u8fd9\u4e9b\u5c5e\u6027\u5bf9AnimationSet\u65e0\u6548\uff0c\u5c06\u88ab\u5ffd\u7565.</p> </li> <li> <p>startOffset, shareInterpolator: \u8fd9\u4e9b\u5c5e\u6027\u53ea\u4f5c\u7528\u4e8eAnimationSet.</p> </li> <li> <p>\u6784\u9020\u51fd\u6570</p> </li> </ol> <pre><code>AnimationSet(Context context, AttributeSet attrs)\nAnimationSet(boolean shareInterpolator) \n</code></pre> <ul> <li>\u53c2\u6570\u4ecb\u7ecd</li> </ul> <p>shareInterpolator :shareInterpolator\u53d6\u503c\u4e3atrue\u65f6\uff0c\u6307\u5728AnimationSet\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u63d2\u503c\u5668\uff08interpolater\uff09\uff0c\u5b83\u4e0b\u9762\u7684\u6240\u6709\u52a8\u753b\u5171\u540c\u4f7f\u7528\uff0c\u4e3afalse\uff0c\u5219\u5404\u81ea\u5b9a\u4e49\u63d2\u503c\u5668\u3002</p> <ul> <li>\u5e38\u7528\u65b9\u6cd5</li> </ul> <p>public void addAnimation (Animation a)  \u6dfb\u52a0\u52a8\u753b</p> <ul> <li>Demo\u5b9e\u73b0</li> </ul> <p><code>java   //Java \u5b9e\u73b0   AnimationSet animationSet = new AnimationSet(true);   animationSet.addAnimation(alphaAnimation);   animationSet.addAnimation(scaleAnimation);   animationSet.addAnimation(rotateAnimation);   mTVDemo.startAnimation(animationSet);</code></p> <p>```xml    <pre><code>  &lt;scale\n      android:fromXScale=\"0.0\"\n      android:fromYScale=\"0.0\"\n      android:pivotX=\"50%\"\n      android:pivotY=\"50%\"\n      android:toXScale=\"2.0\"\n      android:toYScale=\"2.0\" /&gt;\n  &lt;rotate\n      android:fromDegrees=\"0\"\n      android:pivotX=\"50%\"\n      android:pivotY=\"50%\"\n      android:toDegrees=\"-270\" /&gt;\n</code></pre> <p>   ```</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#3frame","title":"3\u3001\u9010\u5e27(Frame)\u52a8\u753b","text":"<p>\u9010\u5e27\u52a8\u753b\u7684\u539f\u7406\u662f\u4e00\u5f20\u4e00\u5f20\u7684\u64ad\u653e\u56fe\u7247\u8d44\u6e90\uff08drawable\u8d44\u6e90\uff09\uff0c\u7136\u540e\u51fa\u73b0\u52a8\u753b\u6548\u679c\u3002</p> <ul> <li>AnimationDrawable</li> </ul> <p>\u628a\u9010\u5e27\u52a8\u753b\u4f5c\u4e3aview\u7684\u80cc\u666f\uff0c\u7136\u540e\u83b7\u53d6\u52a8\u753b\uff0c\u5f00\u542f\u52a8\u753b\u3002</p> <ul> <li>\u6784\u9020\u51fd\u6570</li> </ul> <p>AnimationDrawable()</p> <ul> <li> <p>\u5e38\u7528\u5c5e\u6027\u8bf4\u660e</p> </li> <li> <p>oneshot:\u662f\u5426\u53ea\u64ad\u653e\u4e00\u6b21\uff0c\u53d6\u503ctrue\uff0cfalse\uff0c\u9ed8\u8ba4\u4e3afalse\uff0c\u7528\u4e8eanimation-list</p> </li> <li>duration\uff1a\u6bcf\u4e2aitem\uff08\u6bcf\u4e00\u5e27\u52a8\u753b\uff09\u64ad\u653e\u65f6\u957f</li> <li>drawable: \u6bcf\u4e00\u5e27\u7684drawable\u8d44\u6e90</li> <li>visible:drawable\u8d44\u6e90\u662f\u5426\u53ef\u89c1\uff0c\u9ed8\u8ba4\u4e0d\u53ef\u89c1</li> <li> <p>variablePadding:\u5982\u679c\u662fTrue,drawable\u8d44\u6e90\u7684Padding\u4f1a\u968f\u7740\u5f53\u524d\u7684\u72b6\u6001\u53d1\u751f\u6539\u53d8</p> </li> <li> <p>\u4e3b\u8981\u51fd\u6570\u8bf4\u660e</p> </li> <li> <p>addFrame(Drawable frame, int duration)\u6dfb\u52a0drawable</p> </li> <li>frame:\u6bcf\u4e00\u5e27\u7684\u56fe\u7247\u8d44\u6e90</li> <li>duration\uff1a\u6bcf\u4e00\u5e27\u7684\u6301\u7eed\u52a8\u753b</li> <li>start()\uff1a\u5f00\u59cb\u52a8\u753b</li> <li>stop(): \u7ed3\u675f\u52a8\u753b</li> <li>isRunning()\uff1a\u662f\u5426\u6b63\u5728\u6267\u884c</li> <li>setOneShot(boolean oneShot)\uff1a\u8bbe\u7f6e\u662f\u5426\u53ea\u64ad\u653e\u4e00\u6b21</li> <li> <p>getNumberOfFrames() \uff1a\u83b7\u53d6\u5e27\u7684\u52a8\u753b\u6570</p> </li> <li> <p>\u4f7f\u7528\u65b9\u5f0f</p> </li> <li> <p>\u5355\u5e27\u5b9e\u73b0</p> <p><code>java //java \u4ee3\u7801\u5b9e\u73b0 AnimationDrawable animationDrawable = new AnimationDrawable(); animationDrawable.setOneShot(false); animationDrawable.addFrame(getResources().getDrawable(R.drawable.compositedst1),1000); animationDrawable.addFrame(getResources().getDrawable(R.drawable.compositedst2),1000); animationDrawable.addFrame(getResources().getDrawable(R.drawable.compositedst3),1000); animationDrawable.addFrame(getResources().getDrawable(R.drawable.compositedst4),1000); imageView.setImageDrawable(animationDrawable); animationDrawable.start();</code></p> </li> <li> <p>\u591a\u5e27\u5b9e\u73b0 \\ <p><code>xml &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; &lt;animation-list xmlns:android=\"http://schemas.android.com/apk/res/android\"     android:oneshot=\"false\"&gt; &lt;item android:drawable=\"@drawable/compositedst1\" android:duration=\"500\"&gt;&lt;/item&gt; &lt;item android:drawable=\"@drawable/compositedst2\" android:duration=\"500\"&gt;&lt;/item&gt; &lt;item android:drawable=\"@drawable/compositedst3\" android:duration=\"500\"&gt;&lt;/item&gt; &lt;item android:drawable=\"@drawable/compositedst4\" android:duration=\"500\"&gt;&lt;/item&gt; &lt;/animation-list&gt;</code></p> <p><code>java imageView = findViewById(R.id.imageview); imageView.setImageResource(R.drawable.animationlist); AnimationDrawable animationDrawable = (AnimationDrawable) imageView.getDrawable(); animationDrawable.start();</code></p> <li> <p>\u8bbe\u7f6e\u52a8\u753b\u7684\u65b9\u5f0f</p> <ul> <li>\u7ed9View\u8bbe\u7f6e\u52a8\u753b</li> </ul> <p><code>java   // \u8bbe\u7f6e\u52a8\u753b   imageView.setImageResource(R.drawable.frameanimation);   // \u83b7\u53d6\u52a8\u753b\u5bf9\u8c61   animationDrawable = (AnimationDrawable)imageView.getDrawable();   animationDrawable.start();</code></p> <ul> <li>\u7ed9View \u80cc\u666f\u8bbe\u7f6e\u52a8\u753b</li> </ul> <p><code>java   imageView.setBackgroundResource(R.drawable.frameanimation);   animationDrawable = (AnimationDrawable) imageView.getBackground();   animationDrawable.start();</code></p> <ul> <li>View\u76f4\u63a5\u83b7\u53d6\u52a8\u753b</li> </ul> <p><code>java   animationDrawable = (AnimationDrawable) getResources().getDrawable(   R.drawable.frameanimation);   imageView.setBackground(animationDrawable)</code></p> </li>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#4","title":"4\u3001\u63d2\u503c\u5668\u7b80\u4ecb\u548c\u5e94\u7528","text":"<p>\u63d2\u503c\u5668\uff08Interpolator\uff09\u662f\u8bbe\u7f6e\u52a8\u753b\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7684\u53d8\u5316\u89c4\u5f8b\uff0c\u7c7b\u4f3c\u5300\u901f\u53d8\u5316\uff0c\u52a0\u901f\u53d8\u5316\uff0c\u56de\u5f39\u7b49\u3002\u5b9e\u9645\u4f7f\u7528\u52a8\u753b\u8fc7\u7a0b\u4e2d\uff0c\u6709\u65f6\u53ef\u80fd\u4e0d\u5b8c\u5168\u90fd\u662f\u8981\u6c42\u52a8\u753b\u5300\u901f\u8fd0\u52a8\uff0c\u7c7b\u4f3c\u52a0\u901f\u8fd0\u52a8\uff0c\u4eff\u629b\u7269\u7ebf\u8fd0\u52a8\u7b49\uff0c\u90fd\u9700\u8981\u63d2\u503c\u5668\u7684\u914d\u5408\u3002</p> <ul> <li>\u8bbe\u7f6e\u63d2\u503c\u5668\u7684\u4e24\u4e2a\u51fd\u6570</li> </ul> <p>public void setInterpolator(Context context, @AnimRes @InterpolatorRes int resID) \uff1b   public void setInterpolator(Interpolator i) \uff1b</p> <ul> <li>xml\u5c5e\u6027\u914d\u7f6e</li> </ul> <p>android:interpolator=\"@android:anim/linear_interpolator\"</p> <ul> <li> <p>\u7cfb\u7edf\u63d0\u4f9b\u7684\u9ed8\u8ba4\u63d2\u503c\u5668\uff0810\u79cd\uff09</p> </li> <li> <p>@android:anim/linear_interpolator \u5bf9\u5e94 LinearInterpolator</p> <p>\u4f5c\u7528\uff1a\u5300\u901f\u52a8\u753b</p> </li> <li> <p>@android:anim/decelerate_interpolator \u5bf9\u5e94 DecelerateInterpolator</p> <p>\u4f5c\u7528\uff1a\u52a0\u901f\u5ea6\u53d8\u5c0f\u7684\u8fd0\u52a8</p> </li> <li> <p>@android:anim/accelerate_interpolator \u5bf9\u5e94 AccelerateInterpolator</p> <p>\u4f5c\u7528\uff1a\u52a0\u901f\u5ea6\u53d8\u5927\u7684\u8fd0\u52a8</p> </li> <li> <p>@android:anim/accelerate_decelerate_interpolator \u5bf9\u5e94AccelerateDecelerateInterpolator</p> <p>\u4f5c\u7528\uff1a\u5148\u4ece0 \u52a0\u901f\u5230\u4e00\u4e2a\u6700\u5927\u503c\uff0c\u7136\u540e\u4ece\u6700\u5927\u503c\u51cf\u901f\u52300</p> </li> <li> <p>@android:anim/anticipate_interpolator \u5bf9\u5e94 AnticipateInterpolator</p> <p>\u4f5c\u7528\uff1a\u5148\u540e\u9000\u518d\u52a0\u901f\uff0c\u7c7b\u4f3c\u6295\u63b7\u6807\u67aa\uff0c\u5148\u5f80\u540e\u84c4\u529b\u518d\u52a0\u901f\u5411\u524d</p> </li> <li> <p>@android:anim/anticipate_overshoot_interpolator \u5bf9\u5e94AnticipateOvershootInterpolator</p> <p>\u4f5c\u7528\uff1a\u5148\u540e\u9000\u518d\u52a0\u901f\u5230\u8d85\u8fc7\u7ec8\u70b9\uff0c\u518d\u8fd4\u56de\u7ec8\u70b9</p> </li> <li> <p>@android:anim/bounce_interpolator \u5bf9\u5e94 BounceInterpolator</p> <p>\u4f5c\u7528\uff1a\u6700\u540e\u9636\u6bb5\u5f39\u7403\u6548\u679c\uff0c\u5c31\u662f\u4f1a\u5728\u5230\u8fbe\u7ec8\u70b9\u540e\uff0c\u7c7b\u4f3c\u5f39\u7403\u56de\u5f39\u51e0\u6b21\u3002</p> </li> <li> <p>@android:anim/cycle_interpolator \u5bf9\u5e94CycleInterpolator</p> <p>\u4f5c\u7528\uff1a\u5468\u671f\u8fd0\u52a8\uff0c\u53c2\u6570\u4e3aFloat ,1.0f\u4e3a\u4ece\u539f\u59cb\u72b6\u6001\u5230\u6700\u7ec8\u72b6\u6001\uff0c\u82e5\u4e3a0.Xf\u72b6\u6001\uff0c\u5219\u6700\u540e\u4e3a\u4e2d\u95f4\u72b6\u6001\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u591a\u6b21</p> </li> <li> <p>@android:anim/overshoot_interpolator \u5bf9\u5e94 OvershootInterpolator</p> <p>\u4f5c\u7528\uff1a\u5feb\u901f\u5b8c\u6210\u52a8\u753b\uff0c\u4f1a\u8d85\u51fa\u4e00\u70b9\u7136\u540e\u518d\u56de\u5230\u7ec8\u70b9</p> </li> <li> <p>android:anim/path_interpolator \u5bf9\u5e94 PathInterpolator</p> <p>\u4f5c\u7528\uff1a\u6839\u636e\u8def\u5f84\u6765\u63a7\u5236\u52a8\u753b\u7684\u6267\u884c\u5feb\u6162\uff0c\u8def\u5f84\u53ef\u4ee5\u662f\u8d1d\u585e\u5c14\u66f2\u7ebf\uff0c\u4e5f\u53ef\u4ee5\u662f\u666e\u901aPath\u3002</p> </li> </ul> <p>\u5229\u7528\u8d1d\u585e\u5c14\u66f2\u7ebf\u63cf\u8ff0\u8fd0\u52a8\u8fc7\u7a0b\u7684\u4e09\u4e2a\u65b0\u7684\u63d2\u503c\u5668</p> <ul> <li> <p>FastOutLinearInInterpolator</p> <p>\u4f5c\u7528\uff1a\u52a0\u901f\u5ea6\u53d8\u5927\u7684\u8fd0\u52a8\uff0c\u548cAccelerateInterpolator\u7c7b\u4f3c\uff0c\u4f46\u662f\u521a\u5f00\u59cb\u7684\u52a0\u901f\u5ea6\u66f4\u5927</p> </li> <li> <p>FastOutSlowInInterpolator</p> <p>\u4f5c\u7528\uff1a\u5148\u52a0\u901f\u540e\u51cf\u901f\u8fd0\u52a8\uff0c\u548cAccelerateDecelerateInterpolator\u7c7b\u4f3c\uff0c\u4f46\u662f\u524d\u671f\u521d\u59cb\u901f\u5ea6\u66f4\u5927</p> </li> <li> <p>LinearOutSlowInInterpolator</p> <p>\u4f5c\u7528\uff1a\u52a0\u901f\u5ea6\u53d8\u5c0f\u7684\u8fd0\u52a8\uff0c\u548cDecelerateInterpolator\u6548\u679c\u7c7b\u4f3c</p> </li> <li> <p>\u63d2\u503c\u5668\u4f7f\u7528Demo</p> </li> </ul> <p>```xml   //xml\u4f7f\u7528demo   </p> <p>    ```</p> <p><code>java   //Java\u4ee3\u7801\u4f7f\u7528   mTranslateAnimation.setInterpolator(new AccelerateInterpolator());//\u8fd9\u91cc\u6dfb\u52a0\u5404\u4e2a\u63d2\u503c\u5668                   imageView.startAnimation(mTranslateAnimation);</code></p> <ul> <li>\u8def\u5f84\u63d2\u503c\u5668\u8be6\u89e3</li> </ul> <p>\u666e\u901a\u8def\u5f84\u4e3e\u4f8b</p> <p><code>java     Path path = new Path();           path.lineTo(0.25f, 0.25f);//\u7ec8\u70b9\u5f62\u72b6           path.moveTo(0.25f, 0.5f);//\u5f00\u59cb\u5f62\u72b6           path.lineTo(1f, 1f);//\u7ec8\u70b9\u5f62\u72b6</code></p> <p>\u52a0\u8f7d\u52a8\u753b\u66f2\u7ebf\uff1a</p> <p></p> <p>\u8d1d\u585e\u5c14\u8def\u5f84\uff0c\u4e3a\u9ed8\u8ba4\u7684\u8def\u5f84\u66f2\u7ebf\uff0c\u901a\u8fc7PathInterpolator\u7684\u6784\u9020\u51fd\u6570\u5b9e\u73b0\uff1a</p> <p><code>java   PathInterpolator pathInterpolator = new PathInterpolator(0.9f, 0.1f);   mTranslateAnimation.setInterpolator(pathInterpolator);   imageView.startAnimation(mTranslateAnimation);</code></p> <p>\u52a0\u8f7d\u52a8\u753b\u66f2\u7ebf\uff1a</p> <p></p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#intdef","title":"@IntDef \u6ce8\u89e3\uff0c\u51cf\u7f13\u679a\u4e3e\u7684\u4f7f\u7528","text":"<ul> <li> <p>\u679a\u4e3e\u5728\u6027\u80fd\u4e0a\uff0c\u4f1a\u6d88\u8017\u66f4\u5927\u7684\u5185\u5b58\uff0c\u4f1a\u66f4\u8017\u65f6\uff0c\u539f\u56e0\u662f\uff1a\u679a\u4e3e\u5728\u7ecf\u8fc7\u7f16\u8bd1\u5668\u4e4b\u540e\uff0c\u53d8\u6210\u4e86\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u5b83\u7ee7\u627f\u4e86 <code>java.lang.Enum</code>\uff0c\u4e3a\u5176\u5b9a\u4e49\u7684\u679a\u4e3e\u5e38\u91cf\u5219\u4f1a\u53d8\u6210\u76f8\u5e94\u7684\u5185\u90e8\u7c7b\u3002</p> </li> <li> <p>\u800c\u4f7f\u7528\u9759\u6001\u53d8\u91cf\u5b9e\u73b0\u65b9\u5f0f\u66f4\u8f7b\u7ea7\uff0c\u5e76\u4e14Android\u63d0\u4f9b\u4e86\u6ce8\u91ca<code>@IntDef</code>\uff08\u5b9e\u73b0 String \u7c7b\u578b\u7684\u6548\u679c\u65f6\u7528 <code>@StringDef</code>\uff0c\u8fd8\u6709 <code>LongDef</code> \uff09</p> </li> <li> <p>flag    : \u5b9a\u4e49\u5e38\u91cf\u662f\u5426\u53ef\u7528\u4f5c\u6807\u5fd7\uff0c\u6216\u4ec5\u7528\u4f5c\u679a\u4e3e\uff08\u9ed8\u8ba4\uff09\uff1a\u5927\u6982\u662f\u53ef\u4ee5\u901a\u8fc7 \uff5c &amp; \u7b49\u64cd\u4f5c\u5bf9\u5e38\u91cf\u8fdb\u884c\u7ec4\u5408</p> </li> <li>open: \u662f\u5426\u5141\u8bb8\u4efb\u4f55\u5176\u4ed6\u503c\u3002\u901a\u5e38\u60c5\u51b5\u5e76\u975e\u5982\u6b64\uff0c\u4f46\u8fd9\u5141\u8bb8\u60a8\u6307\u5b9a\u4e00\u7ec4\u9884\u671f\u7684\u5e38\u91cf\uff0c\u8fd9\u6709\u52a9\u4e8e IDE \u4e2d\u7684\u4ee3\u7801\u5b8c\u6210\u548c\u6587\u6863\u751f\u6210\u7b49\uff0c\u4f46\u5982\u679c\u6307\u5b9a\u4e86\u5176\u4ed6\u503c\uff0c\u5219\u4e0d\u4f1a\u6807\u8bb0\u7f16\u8bd1\u8b66\u544a\u3002</li> <li> <p>value: \u5b9a\u4e49\u6b64\u5143\u7d20\u5141\u8bb8\u7684\u5e38\u91cf\u3002</p> </li> <li> <p>\u4f7f\u7528\u65b9\u5f0f\uff1a</p> </li> </ul> <p><code>java    @Retention(SOURCE)//\u6307\u5b9a\u6ce8\u89e3\u7684\u4fdd\u7559\u7b56\u7565\uff0cRetentionPolicy.SOURCE\u8868\u793a\u53ea\u4fdd\u7559\u6e90\u7801\u4e2d\uff0c\u7f16\u8bd1\u65f6\u5220\u9664\u3002\u8fd8\u6709CLASS\u548cRUNTIME      @IntDef({NAVIGATION_MODE_STANDARD, NAVIGATION_MODE_LIST, NAVIGATION_MODE_TABS})//\u4ee5\u6ce8\u89e3\u7684\u5c06\u51e0\u4e2a\u6574\u5f62\u503c\u96c6\u5408\u8d77\u6765\uff0c\u8f6c\u6362\u4e3a\u7c7b\u4f3c\u679a\u4e3e\u7684\u4e1c\u897f\uff0cflag\u9ed8\u8ba4\u4e3afalse      public @interface NavigationMode {} //\u58f0\u660e\u81ea\u5df1\u521b\u5efa\u7684\u6ce8\u89e3\u540d      //\u9759\u6001\u53d8\u91cf      public static final int NAVIGATION_MODE_STANDARD = 0;      public static final int NAVIGATION_MODE_LIST = 1;      public static final int NAVIGATION_MODE_TABS = 2;</code></p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#android","title":"Android \u7f51\u7edc","text":""},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#1tcp","title":"1\u3001TCP \u8fde\u63a5","text":"<ul> <li>\u4e09\u6b21\u63e1\u624b</li> </ul> <ul> <li>\u56db\u6b21\u6325\u624b</li> </ul> <ul> <li>TLS\\SSL \u52a0\u5bc6\u8fc7\u7a0b</li> </ul> <p>\u52a0\u5bc6\u7c7b\u578b\uff1a</p> <ul> <li>\u5bf9\u79f0\u52a0\u5bc6\uff1a\u52a0\u5bc6\u89e3\u5bc6\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u94a5</li> <li>\u975e\u5bf9\u79f0\u52a0\u5bc6\uff1a\u52a0\u5bc6\u89e3\u5bc6\u4f7f\u7528\u4e0d\u540c\u7684\u5bc6\u94a5\uff0c\u6bd4\u5982\u7528\u516c\u94a5\u52a0\u5bc6\uff0c\u4f7f\u7528\u79c1\u94a5\u89e3\u5bc6</li> </ul> <p>TLS/SSL\u540c\u65f6\u4f7f\u7528\u4e86\u975e\u5bf9\u79f0\u52a0\u5bc6\u548c\u5bf9\u79f0\u52a0\u5bc6\uff0c\u539f\u56e0\u662f\u5bf9\u79f0\u52a0\u5bc6\u6709\u5229\u4e8e\u83b7\u5f97\u8f83\u4f18\u7684\u901a\u8bdd\u6027\u80fd\uff0c\u800c\u975e\u5bf9\u79f0\u52a0\u5bc6\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u5bc6\u94a5\u4f20\u8f93\u65b9\u6cd5\u3002</p> <ul> <li>TLS/SSL\u52a0\u5bc6\u8fc7\u7a0b\u7684\u901a\u4fd7\u7406\u89e3<ul> <li>1\u3001\u5f53\u6d4f\u89c8\u5668\u5411\u670d\u52a1\u5668\u8bf7\u6c42\u4e00\u4e2a\u5b89\u5168\u7684\u7f51\u9875(\u901a\u5e38\u662f https://)\uff0c\u987a\u4fbf\u53d1\u9001\u53ef\u4ee5\u4f7f\u7528\u7684\u52a0\u5bc6\u534f\u8bae</li> <li>2\u3001\u670d\u52a1\u5668\u5c31\u628a\u5b83\u7684\u8bc1\u4e66\u548c\u516c\u94a5\u53d1\u56de\u6765\uff0c\u4ee5\u53ca\u9009\u62e9\u4f60\u53ef\u4ee5\u4f7f\u7528\u7684\u52a0\u5bc6\u534f\u8baeA</li> <li>3\u3001\u6d4f\u89c8\u5668\u68c0\u67e5\u8bc1\u4e66\u662f\u4e0d\u662f\u7531\u4fe1\u8d56\u7684\u673a\u6784\u9881\u53d1\u7684\uff0c\u786e\u8ba4\u8bc1\u4e66\u6709\u6548\u548c\u6b64\u8bc1\u4e66\u662f\u6b64\u7f51\u7ad9\u7684</li> <li>4\u3001\u4f7f\u7528\u516c\u94a5\u52a0\u5bc6\u4e86\u4e00\u4e2a\u968f\u673a\u5bf9\u79f0\u5bc6\u94a5\uff0c\u5305\u62ec\u52a0\u5bc6\u7684Url\u4e00\u8d77\u53d1\u9001\u7ed9\u670d\u52a1\u5668</li> <li>5\u3001\u670d\u52a1\u5668\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u89e3\u5bc6\u4e86\u4f60\u53d1\u9001\u7684\u5bc6\u94a5\uff0c\u5e76\u7528\u8fd9\u4e2a\u968f\u673a\u5bf9\u6210\u7684\u5bc6\u94a5\u7ed9\u6d4f\u89c8\u5668\u8bf7\u6c42\u7684Url\u89e3\u5bc6</li> <li>6\u3001\u7136\u540e\u670d\u52a1\u5668\u7528\u6d4f\u89c8\u5668\u53d1\u7684\u5bf9\u79f0\u5bc6\u94a5\u7ed9\u6d4f\u89c8\u5668\u8bf7\u6c42\u7684\u7f51\u9875\u52a0\u5bc6\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668</li> <li>7\u3001\u6d4f\u89c8\u5668\u7528\u5bf9\u79f0\u5bc6\u94a5\u8fdb\u884c\u89e3\u5bc6\u9605\u8bfb\uff0c\u4e4b\u540e\u90fd\u7528\u5bf9\u79f0\u5bc6\u94a5\u52a0\u89e3\u5bc6</li> </ul> </li> </ul> \u6d4f\u89c8\u5668 \u670d\u52a1\u5668 \u53d1\u8d77 \u2014&gt; 1.\u6d4f\u89c8\u5668\u901a\u77e5\u670d\u52a1\u5668\u6d4f\u89c8\u5668\u6240\u652f\u6301\u7684\u52a0\u5bc6\u534f\u8bae \u63a5\u6536 \u63a5\u6536 &lt;\u2014 2.\u670d\u52a1\u5668\u901a\u77e5\u6d4f\u89c8\u5668\u4ece1\u4e2d\u9009\u7528\u7684\u52a0\u5bc6\u534f\u8bae,\u5e76\u7ed9\u4e88\u8bc1\u4e66 \u53d1\u8d77 3.\u7528CA\u7684\u516c\u94a5\u9274\u522b\u670d\u52a1\u5668\u7684\u8bc1\u4e66\u662f\u5426\u6709\u6548,\u6709\u6548\u5219\u751f\u6210\u4e00\u4e2a\u968f\u673a\u6570(\u79d8\u5bc6\u6570),\u79d8\u5bc6\u6570\u52a0\u4e0a2\u786e\u5b9a\u7684\u52a0\u5bc6\u534f\u8bae\u4ea7\u751f\u4f1a\u8bdd\u5bc6\u94a5 \u53d1\u8d77 \u2014&gt; 4.\u6d4f\u89c8\u5668\u7528\u670d\u52a1\u5668\u7684\u516c\u94a5\u52a0\u5bc6\u79d8\u5bc6\u6570\u53d1\u7ed9\u670d\u52a1\u5668 \u63a5\u6536 5.\u670d\u52a1\u5668\u7528\u79c1\u94a5\u5bf94\u89e3\u5bc6\u83b7\u5f97\u79d8\u5bc6\u6570\u518d\u52a0\u4e0a2\u786e\u5b9a\u7684\u52a0\u5bc6\u534f\u8bae\u4ea7\u751f\u4f1a\u8bdd\u5bc6\u94a5 &lt;\u2014 \u63e1\u624b\u7ed3\u675f,\u4f7f\u7528\u76f8\u540c\u7684\u4f1a\u8bdd\u5bc6\u94a5\u52a0\u5bc6\u4f20\u8f93\u7684\u6570\u636e(\u5bf9\u79f0\u52a0\u5bc6) \u2014&gt; <ul> <li>Socket\u901a\u4fe1</li> </ul> <p>Socket Java\u5b9e\u73b0\u901a\u4fe1</p>"},{"location":"Android/2Android%E5%A4%A7%E7%BA%B2/#2httpurlconnection","title":"2\u3001\u7f51\u7edc\u8bf7\u6c42\u4e4b\u2014\u2014HttpUrlConnection","text":"<p>HttpURLconnection\u662f\u57fa\u4e8ehttp\u534f\u8bae\u7684\uff0c\u652f\u6301get\uff0cpost\uff0cput\uff0cdelete\u7b49\u5404\u79cd\u8bf7\u6c42\u65b9\u5f0f\uff0c\u662f\u6807\u51c6\u7684java\u63a5\u53e3\u3002</p> <ul> <li>\u8bf7\u6c42\u65b9\u6cd5     setRequestMethod(Method)</li> <li>GET</li> <li>POST</li> <li> <p>\u5ef6\u8fdf\u65f6\u95f4    setConnectTimeout(mills)</p> </li> <li> <p>\u8bf7\u6c42\u5934\u53c2\u6570 \u7b49\u540c\u4e8eHttp\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u8fd9\u91cc\u53ea\u8bb0\u5f55\u4e3b\u8981\u7684\u8bf7\u6c42\u53c2\u6570\u548c\u4e3b\u8981\u8c03\u7528\u65b9\u6cd5</p> </li> </ul> <p>\u8bf7\u6c42\u5934\u53c2\u6570\u4e00\u5f8b\u4f7f\u7528setRequestProperty(Key,Value)</p> <ul> <li> <p>User-Agent\uff1a\u4ea7\u751f\u8bf7\u6c42\u7684\u6d4f\u89c8\u5668\u7c7b\u578b\u3002</p> <p><code>xml User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:5.0) Gecko/20100101 Firefox/5.0</code></p> </li> <li> <p>Accept\uff1a\u5ba2\u6237\u7aef\u53ef\u8bc6\u522b\u7684\u5185\u5bb9\u7c7b\u578b\u5217\u8868\u3002</p> <p><code>xml Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</code></p> </li> <li> <p>accept-language\uff1a\u53ef\u4ee5\u8bc6\u522b\u7684\u8bed\u8a00</p> <p><code>xml Accept-Language: zh-cn,zh;q=0.5</code></p> </li> <li> <p>Content-Type\uff1a\u5185\u5bb9\u7c7b\u578b</p> <p><code>xml Content-Type: application/x-www-form-urlencoded; charset=utf-8</code></p> </li> <li> <p>\u8bf7\u6c42</p> </li> </ul> <p><code>java   //1\u3001\u521b\u5efaURl \u5bf9\u8c61   URL url = new URL(furl);   //2\u3001\u521b\u5efahttpUrlConnection   HttpURLConnection connection = (HttpURLConnection) url.openConnection();   //3\u3001\u8bbe\u7f6e\u8bf7\u6c42\u5934   connection.setRequestMethod(\"POST\");   connection.setConnectTimeout(6 * 1000);   connection.setRequestProperty(\"Accept-Language\", \"zh-CN,zh;q=0.8\");   connection.setRequestProperty(\"Accept\", \"*/*\");   connection.setRequestProperty(\"Content-Type\", \"application/x-www-form-urlencoded; charset=utf-8\");   //4\u3001\u8fde\u63a5   connection.connect();   //5\u3001\u8bbe\u7f6e\u54cd\u5e94   if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {     result = strread(connection.getInputStream());   }   //6\u3001\u5173\u95ed\u8fde\u63a5   connection.disconnect();</code></p> <ul> <li>\u8bfb\u53d6\u54cd\u5e94\u7684\u7ed3\u679c</li> </ul> <p>```java   //\u89e3\u6790inputStream   private static String strread(InputStream inputStream) throws IOException {     StringBuilder builder = new StringBuilder();     byte[] buffer = new byte[1024];     int len = 0;     while ((len = inputStream.read(buffer)) != -1) {       builder.append(new String(buffer, 0, len, \"UTF-8\"));     }     inputStream.close();     return builder.toString();   }</p> <p>//\u53ef\u4ee5\u7528\u6765\u89e3\u6790\u56fe\u7247\u7b49\u8d44\u6e90   private static byte[] byteread(InputStream inputStream) throws IOException {     ByteArrayOutputStream outputStream = new ByteArrayOutputStream();     byte[] buffer = new byte[1024];     int len = 0;     while ((len = inputStream.read(buffer)) != -1) {       outputStream.write(buffer, 0, len);     }     inputStream.close();     return outputStream.toByteArray();   }   ```</p>"},{"location":"Android/30.%E7%BD%91%E7%BB%9C%E6%95%B4%E7%90%86/","title":"30.\u7f51\u7edc\u6574\u7406","text":"<p>Java\u76f8\u5173\u7684\u7f51\u7edc\u77e5\u8bc6</p>"},{"location":"Android/30.%E7%BD%91%E7%BB%9C%E6%95%B4%E7%90%86/#okhttp","title":"OkHttp\u76f8\u5173\u6e90\u7801\u6574\u7406","text":""},{"location":"Android/30.%E7%BD%91%E7%BB%9C%E6%95%B4%E7%90%86/#_1","title":"\u8fde\u63a5\u6c60\u6e90\u7801\u6574\u7406","text":"<p>\u53c2\u8003\u94fe\u63a5\uff1ahttps://juejin.cn/post/7222507980444827707</p>"},{"location":"Android/30.%E7%BD%91%E7%BB%9C%E6%95%B4%E7%90%86/#socket-has-closed","title":"Socket has closed\u95ee\u9898\u6392\u67e5","text":"<p>\u539f\u56e0\uff1aConnect\u8fde\u63a5\u672a\u53ca\u65f6\u65ad\u5f00\uff0c\u5bfc\u81f4\u6587\u4ef6\u6570\u4e00\u76f4\u589e\u52a0\uff0c\u6700\u7ec8\u8d85\u8fc7FdCount\u3002</p> <p>\u67e5\u8be2\u8fc7\u7a0b\uff1a</p> <ul> <li>adb shell ps</li> </ul> <p>\u901a\u8fc7\u5305\u540d\u67e5\u627eApp\u5bf9\u5e94\u7684\u8fdb\u7a0b11501</p> <ul> <li>adb shell cat /proc/[11501]/limits</li> </ul> <p>\u200b       \u901a\u8fc7\u4e0a\u9762\u67e5\u627e\u5230\u7684\u5bf9\u5e94\u7684\u6700\u5927\u6587\u4ef6\u6253\u5f00\u6570</p> <p></p> <ul> <li>java\u4ee3\u7801\u67e5\u8be2\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6\u6570\u548cSocket\u8fde\u63a5\u6570</li> </ul> <p><code>java   //\u6253\u5f00\u6587\u4ef6\u6570\u548c\u6587\u4ef6\u76ee\u5f55   File[] as= new File(\"/proc/\" + android.os.Process.myPid() + \"/fd/\").listFiles();   LogUtil.e(TAG, \"fd num:\"+ as.length);   for (int i = 0; i &lt; as.length; i++) {     try {       LogUtil.e(TAG, Os.readlink(as[i].getAbsolutePath()));     } catch (Exception e) {       LogUtil.e(TAG, e.getMessage());     }   }    ConnectionPool connectionPool = client.connectionPool();    LogUtil.e(TAG,\"\u5f53\u524d\u6d3b\u52a8\u8fde\u63a5\u6570: \"+ connectionPool.connectionCount());    LogUtil.e(TAG,\"\u5f53\u524d\u7a7a\u95f2\u8fde\u63a5\u6570: \"+ connectionPool.idleConnectionCount());</code></p> <p>\u5904\u7406\u65b9\u6848\uff1a</p> <p></p> <p>\u6839\u636e\u95ee\u9898\u539f\u56e0\uff0c\u67e5\u5230\u6ca1\u6709\u8bfb\u53d6\u5199\u5165\u6570\u636e\uff0c\u9020\u6210\u6ca1\u6709\u5173\u95ed\u8fde\u63a5\u3002</p> <pre><code>private class BlackHoleSink implements Sink {\n\n  @Override\n  public void write(Buffer source, long byteCount) throws IOException {\n    source.skip(byteCount);\n  }\n\n  @Override\n  public void flush() throws IOException {\n\n  }\n\n  @Override\n  public Timeout timeout() {\n    return null;\n  }\n\n  @Override\n  public void close() throws IOException {\n\n  }\n}\nCall call = client.newCall(request);\ntry {\n  Response resp = call.execute();\n  resp.body().source().readAll(new BlackHoleSink());\n} catch (Exception e) {\n  LogUtil.e(TAG,e.getMessage());\n}\n</code></pre> <p>\u6ce8\u610f\uff1a okhttp\u4f1a\u5904\u7406\u6ca1\u6709\u8bfb\u6d41\u7684connection\uff0c\u4f46\u662f\u4f9d\u8d56\u4e8eGC,\u5177\u4f53\u770bpruneAndGetAllocationCount()</p>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/","title":"31.\u9e3f\u8499\u5f00\u53d1","text":"<p>1.\u9e3f\u8499\u8fdb\u5316\u53f2</p> <p>2012-&gt;2016-&gt;2019-&gt;2020</p> <p>2.ArkTS\u7684\u4f7f\u7528</p> <p>3.openHo</p> <ul> <li>\u7f51\u7edc\u5f15\u64ce\uff1aAxios</li> <li>\u6570\u636e\u6301\u4e45\u5316\uff1a</li> </ul>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#_1","title":"\u9e3f\u8499\u5de5\u7a0b\u7ed3\u6784","text":"<p>\u4e3b\u8981\u8bb0\u5f55Stage\u6a21\u578b</p> <ul> <li> <p>AppScope &gt; app.json5\uff1a\u5e94\u7528\u7684\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u3002</p> </li> <li> <p>entry\uff1a</p> </li> </ul> <p>\u5e94\u7528/\u670d\u52a1\u6a21\u5757\uff0c\u7f16\u8bd1\u6784\u5efa\u751f\u6210\u4e00\u4e2aHAP\u3002</p> <ul> <li> <p>src &gt; main &gt; ets\uff1a\u7528\u4e8e\u5b58\u653eArkTS\u6e90\u7801\u3002</p> </li> <li> <p>src &gt; main &gt; ets &gt; entryability\uff1a\u5e94\u7528/\u670d\u52a1\u7684\u5165\u53e3\u3002</p> </li> <li> <p>src &gt; main &gt; ets &gt; pages\uff1a\u5e94\u7528/\u670d\u52a1\u5305\u542b\u7684\u9875\u9762\u3002</p> </li> <li> <p>src &gt; main &gt; resources\uff1a</p> <p>\u7528\u4e8e\u5b58\u653e\u5e94\u7528/\u670d\u52a1\u6a21\u5757\u6240\u7528\u5230\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u5982\u56fe\u5f62\u3001\u591a\u5a92\u4f53\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c40\u6587\u4ef6\u7b49\u3002\u5173\u4e8e\u8d44\u6e90\u6587\u4ef6\u7684\u8be6\u7ec6\u8bf4\u660e\u8bf7\u53c2\u8003</p> <p>\u8d44\u6e90\u6587\u4ef6\u7684\u5206\u7c7b</p> <p>\u3002</p> \u8d44\u6e90\u76ee\u5f55 \u8d44\u6e90\u6587\u4ef6\u8bf4\u660e base&gt;element \u5305\u62ec\u5b57\u7b26\u4e32\u3001\u6574\u578b\u3001\u989c\u8272\u3001\u6837\u5f0f\u7b49\u8d44\u6e90\u7684json\u6587\u4ef6\u3002\u6bcf\u4e2a\u8d44\u6e90\u5747\u7531json\u683c\u5f0f\u8fdb\u884c\u5b9a\u4e49\uff0c\u4f8b\u5982\uff1aboolean.json\uff1a\u5e03\u5c14\u578bcolor.json\uff1a\u989c\u8272float.json\uff1a\u6d6e\u70b9\u578bintarray.json\uff1a\u6574\u578b\u6570\u7ec4integer.json\uff1a\u6574\u578bpattern.json\uff1a\u6837\u5f0fplural.json\uff1a\u590d\u6570\u5f62\u5f0fstrarray.json\uff1a\u5b57\u7b26\u4e32\u6570\u7ec4string.json\uff1a\u5b57\u7b26\u4e32\u503c base&gt;media \u591a\u5a92\u4f53\u6587\u4ef6\uff0c\u5982\u56fe\u5f62\u3001\u89c6\u9891\u3001\u97f3\u9891\u7b49\u6587\u4ef6\uff0c\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f\u5305\u62ec\uff1a.png\u3001.gif\u3001.mp3\u3001.mp4\u7b49\u3002 rawfile \u7528\u4e8e\u5b58\u50a8\u4efb\u610f\u683c\u5f0f\u7684\u539f\u59cb\u8d44\u6e90\u6587\u4ef6\u3002rawfile\u4e0d\u4f1a\u6839\u636e\u8bbe\u5907\u7684\u72b6\u6001\u53bb\u5339\u914d\u4e0d\u540c\u7684\u8d44\u6e90\uff0c\u9700\u8981\u6307\u5b9a\u6587\u4ef6\u8def\u5f84\u548c\u6587\u4ef6\u540d\u8fdb\u884c\u5f15\u7528\u3002 </li> <li> <p>src &gt; main &gt; module.json5\uff1aStage\u6a21\u578b\u6a21\u5757\u914d\u7f6e\u6587\u4ef6\uff0c\u4e3b\u8981\u5305\u542bHAP\u7684\u914d\u7f6e\u4fe1\u606f\u3001\u5e94\u7528\u5728\u5177\u4f53\u8bbe\u5907\u4e0a\u7684\u914d\u7f6e\u4fe1\u606f\u4ee5\u53ca\u5e94\u7528\u7684\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u3002</p> </li> <li> <p>build-profile.json5\uff1a\u5f53\u524d\u7684\u6a21\u5757\u4fe1\u606f\u3001\u7f16\u8bd1\u4fe1\u606f\u914d\u7f6e\u9879\uff0c\u5305\u62ecbuildOption\u3001targets\u914d\u7f6e\u7b49\u3002</p> </li> <li> <p>hvigorfile.ts\uff1a\u6a21\u5757\u7ea7\u7f16\u8bd1\u6784\u5efa\u4efb\u52a1\u811a\u672c\u3002</p> </li> <li> <p>oh-package.json5\uff1a\u914d\u7f6e\u4e09\u65b9\u5305\u58f0\u660e\u6587\u4ef6\u7684\u5165\u53e3\u53ca\u5305\u540d\u3002</p> </li> <li> <p>oh_modules\uff1a\u7528\u4e8e\u5b58\u653e\u4e09\u65b9\u5e93\u4f9d\u8d56\u4fe1\u606f\uff0c\u5305\u542b\u5e94\u7528/\u670d\u52a1\u6240\u4f9d\u8d56\u7684\u7b2c\u4e09\u65b9\u5e93\u6587\u4ef6\u3002\u5173\u4e8e\u539fnpm\u5de5\u7a0b\u9002\u914dohpm\u64cd\u4f5c\uff0c\u8bf7\u53c2\u8003\u5386\u53f2\u5de5\u7a0b\u9002\u914dOHPM\u5305\u7ba1\u7406\u3002</p> </li> <li> <p>build-profile.json5\uff1a\u5e94\u7528\u7ea7\u914d\u7f6e\u4fe1\u606f\uff0c\u5305\u62ec\u7b7e\u540d\u3001\u4ea7\u54c1\u914d\u7f6e\u7b49\u3002</p> </li> <li> <p>hvigorfile.ts\uff1a\u5e94\u7528\u7ea7\u7f16\u8bd1\u6784\u5efa\u4efb\u52a1\u811a\u672c\u3002</p> </li> </ul>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#arkts","title":"ArkTs\u8bed\u6cd5\u5b66\u4e60","text":""},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#_2","title":"\u72b6\u6001\u7ba1\u7406","text":"<p>\u7528\u6765\u88c5\u9970\u7c7b\u3001\u7ed3\u6784\u4f53\u3001\u65b9\u6cd5\u4ee5\u53ca\u53d8\u91cf\uff0c\u8d4b\u4e88\u5176\u7279\u6b8a\u7684\u542b\u4e49\uff0c\u5982\u4e0a\u8ff0\u793a\u4f8b\u4e2d @Entry \u3001 @Component \u3001 @State \u90fd\u662f\u88c5\u9970\u5668\u3002\u5177\u4f53\u800c\u8a00\uff0c @Component \u8868\u793a\u8fd9\u662f\u4e2a\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff1b @Entry \u5219\u8868\u793a\u8fd9\u662f\u4e2a\u5165\u53e3\u7ec4\u4ef6\uff1b @State \u8868\u793a\u7ec4\u4ef6\u4e2d\u7684\u72b6\u6001\u53d8\u91cf\uff0c\u6b64\u72b6\u6001\u53d8\u5316\u4f1a\u5f15\u8d77 UI \u53d8\u66f4\u3002</p> <p>@State</p>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#_3","title":"\u81ea\u5b9a\u4e49\u7ec4\u4ef6","text":"<p>\u53ef\u590d\u7528\u7684 UI \u5355\u5143\uff0c\u53ef\u7ec4\u5408\u5176\u5b83\u7ec4\u4ef6\uff0c\u5982\u4e0a\u8ff0\u88ab @Component \u88c5\u9970\u7684 struct Hello\u3002</p> <ul> <li> <p>\u53ef\u7ec4\u5408\uff1a\u5141\u8bb8\u5f00\u53d1\u8005\u7ec4\u5408\u4f7f\u7528\u7cfb\u7edf\u7ec4\u4ef6\u3001\u53ca\u5176\u5c5e\u6027\u548c\u65b9\u6cd5\u3002    </p> </li> <li> <p>\u53ef\u91cd\u7528\uff1a\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u53ef\u4ee5\u88ab\u5176\u4ed6\u7ec4\u4ef6\u91cd\u7528\uff0c\u5e76\u4f5c\u4e3a\u4e0d\u540c\u7684\u5b9e\u4f8b\u5728\u4e0d\u540c\u7684\u7236\u7ec4\u4ef6\u6216\u5bb9\u5668\u4e2d\u4f7f\u7528\u3002</p> </li> <li> <p>\u6570\u636e\u9a71\u52a8UI\u66f4\u65b0\uff1a\u901a\u8fc7\u72b6\u6001\u53d8\u91cf\u7684\u6539\u53d8\uff0c\u6765\u9a71\u52a8UI\u7684\u5237\u65b0\u3002</p> </li> </ul> <p>\u6210\u5458\u51fd\u6570/\u53d8\u91cf</p> <ul> <li>\u4e0d\u652f\u6301\u9759\u6001\u51fd\u6570\u3002</li> <li>\u6210\u5458\u51fd\u6570\u7684\u8bbf\u95ee\u59cb\u7ec8\u662f\u79c1\u6709\u7684\u3002</li> </ul> <p>Build()\u51fd\u6570</p> <ul> <li>@Entry\u88c5\u9970\u7684\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff0c\u5176build()\u51fd\u6570\u4e0b\u7684\u6839\u8282\u70b9\u552f\u4e00\u4e14\u5fc5\u8981\uff0c\u4e14\u5fc5\u987b\u4e3a\u5bb9\u5668\u7ec4\u4ef6\uff0c\u5176\u4e2dForEach\u7981\u6b62\u4f5c\u4e3a\u6839\u8282\u70b9\u3002</li> </ul> <p>@Component\u88c5\u9970\u7684\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff0c\u5176build()\u51fd\u6570\u4e0b\u7684\u6839\u8282\u70b9\u552f\u4e00\u4e14\u5fc5\u8981\uff0c\u53ef\u4ee5\u4e3a\u975e\u5bb9\u5668\u7ec4\u4ef6\uff0c\u5176\u4e2dForEach\u7981\u6b62\u4f5c\u4e3a\u6839\u8282\u70b9\u3002</p> <ul> <li>\u4e0d\u5141\u8bb8\u58f0\u660e\u672c\u5730\u53d8\u91cf</li> <li> <p>\u4e0d\u5141\u8bb8\u5728UI\u63cf\u8ff0\u91cc\u76f4\u63a5\u4f7f\u7528console.info\uff0c\u4f46\u5141\u8bb8\u5728\u65b9\u6cd5\u6216\u8005\u51fd\u6570\u91cc\u4f7f\u7528\uff0c</p> </li> <li> <p>\u4e0d\u5141\u8bb8\u521b\u5efa\u672c\u5730\u7684\u4f5c\u7528\u57df</p> </li> <li> <p>\u4e0d\u5141\u8bb8\u8c03\u7528\u9664\u4e86\u88ab@Builder\u88c5\u9970\u4ee5\u5916\u7684\u65b9\u6cd5\uff0c\u5141\u8bb8\u7cfb\u7edf\u7ec4\u4ef6\u7684\u53c2\u6570\u662fTS\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> </li> </ul> <p>```typescript   @Component   struct ParentComponent {     doSomeCalculations() {     }</p> <pre><code>calcTextValue(): string {\n  return 'Hello World';\n}\n\n@Builder doSomeRender() {\n  Text(`Hello World`)\n}\n\nbuild() {\n  Column() {\n    // \u53cd\u4f8b\uff1a\u4e0d\u80fd\u8c03\u7528\u6ca1\u6709\u7528@Builder\u88c5\u9970\u7684\u65b9\u6cd5\n    this.doSomeCalculations();\n    // \u6b63\u4f8b\uff1a\u53ef\u4ee5\u8c03\u7528\n    this.doSomeRender();\n    // \u6b63\u4f8b\uff1a\u53c2\u6570\u53ef\u4ee5\u4e3a\u8c03\u7528TS\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\n    Text(this.calcTextValue())\n  }\n}\n</code></pre> <p>}   ```</p> <ul> <li> <p>\u4e0d\u5141\u8bb8switch\u8bed\u6cd5\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u6761\u4ef6\u5224\u65ad\uff0c\u8bf7\u4f7f\u7528if\u3002</p> </li> <li> <p>\u4e0d\u5141\u8bb8\u4f7f\u7528\u8868\u8fbe\u5f0f</p> </li> </ul> <p><code>typescript   build() {     Column() {       // \u53cd\u4f8b\uff1a\u4e0d\u5141\u8bb8\u4f7f\u7528\u8868\u8fbe\u5f0f       (this.aVar &gt; 10) ? Text('...') : Image('...')     }   }</code></p>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#_4","title":"\u9875\u9762\u548c\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u751f\u547d\u5468\u671f","text":"<p>\u9875\u9762\u751f\u547d\u5468\u671f\uff0c\u5373\u88ab@Entry\u88c5\u9970\u7684\u7ec4\u4ef6\u751f\u547d\u5468\u671f\uff0c\u63d0\u4f9b\u4ee5\u4e0b\u751f\u547d\u5468\u671f\u63a5\u53e3\uff1a</p> <ul> <li>onPageShow\uff1a\u9875\u9762\u6bcf\u6b21\u663e\u793a\u65f6\u89e6\u53d1\u3002</li> <li>onPageHide\uff1a\u9875\u9762\u6bcf\u6b21\u9690\u85cf\u65f6\u89e6\u53d1\u4e00\u6b21\u3002</li> <li>onBackPress\uff1a\u5f53\u7528\u6237\u70b9\u51fb\u8fd4\u56de\u6309\u94ae\u65f6\u89e6\u53d1\u3002</li> </ul> <p>\u7ec4\u4ef6\u751f\u547d\u5468\u671f\uff0c\u5373\u4e00\u822c\u7528@Component\u88c5\u9970\u7684\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u63d0\u4f9b\u4ee5\u4e0b\u751f\u547d\u5468\u671f\u63a5\u53e3\uff1a</p> <ul> <li>aboutToAppear\uff1a\u7ec4\u4ef6\u5373\u5c06\u51fa\u73b0\u65f6\u56de\u8c03\u8be5\u63a5\u53e3\uff0c\u5177\u4f53\u65f6\u673a\u4e3a\u5728\u521b\u5efa\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u65b0\u5b9e\u4f8b\u540e\uff0c\u5728\u6267\u884c\u5176build()\u51fd\u6570\u4e4b\u524d\u6267\u884c\u3002</li> <li>aboutToDisappear\uff1a\u5728\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u5373\u5c06\u6790\u6784\u9500\u6bc1\u65f6\u6267\u884c\u3002</li> </ul> <p></p>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#_5","title":"\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u521b\u5efa\u548c\u6e32\u67d3\u6d41\u7a0b","text":"<ol> <li>\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u521b\u5efa\uff1a\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u7531ArkUI\u6846\u67b6\u521b\u5efa\u3002</li> <li>\u521d\u59cb\u5316\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u6210\u5458\u53d8\u91cf\uff1a\u901a\u8fc7\u672c\u5730\u9ed8\u8ba4\u503c\u6216\u8005\u6784\u9020\u65b9\u6cd5\u4f20\u9012\u53c2\u6570\u6765\u521d\u59cb\u5316\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u6210\u5458\u53d8\u91cf\uff0c\u521d\u59cb\u5316\u987a\u5e8f\u4e3a\u6210\u5458\u53d8\u91cf\u7684\u5b9a\u4e49\u987a\u5e8f\u3002</li> <li>\u5982\u679c\u5f00\u53d1\u8005\u5b9a\u4e49\u4e86aboutToAppear\uff0c\u5219\u6267\u884caboutToAppear\u65b9\u6cd5\u3002</li> <li>\u5728\u9996\u6b21\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u6267\u884cbuild\u65b9\u6cd5\u6e32\u67d3\u7cfb\u7edf\u7ec4\u4ef6\uff0c\u5982\u679c\u5b50\u7ec4\u4ef6\u4e3a\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff0c\u5219\u521b\u5efa\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u3002\u5728\u6267\u884cbuild()\u51fd\u6570\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6846\u67b6\u4f1a\u89c2\u5bdf\u6bcf\u4e2a\u72b6\u6001\u53d8\u91cf\u7684\u8bfb\u53d6\u72b6\u6001\uff0c\u5c06\u4fdd\u5b58\u4e24\u4e2amap\uff1a</li> <li>\u72b6\u6001\u53d8\u91cf -&gt; UI\u7ec4\u4ef6\uff08\u5305\u62ecForEach\u548cif\uff09\u3002</li> <li>UI\u7ec4\u4ef6 -&gt; \u6b64\u7ec4\u4ef6\u7684\u66f4\u65b0\u51fd\u6570\uff0c\u5373\u4e00\u4e2alambda\u65b9\u6cd5\uff0c\u4f5c\u4e3abuild()\u51fd\u6570\u7684\u5b50\u96c6\uff0c\u521b\u5efa\u5bf9\u5e94\u7684UI\u7ec4\u4ef6\u5e76\u6267\u884c\u5176\u5c5e\u6027\u65b9\u6cd5\uff0c\u793a\u610f\u5982\u4e0b\u3002</li> <li>\u5f53\u72b6\u6001\u53d8\u91cf\u6216\u8005LocalStorage / AppStorage\u4e2d\u7684\u5c5e\u6027\u66f4\u6539\u65f6\uff0c\u4f1a\u91cd\u65b0\u6e32\u67d3</li> <li>\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u5728\u6e32\u67d3\u65f6\u4f1a\u81ea\u52a8\u5220\u9664\uff0c\u56e0\u6b64\u4e0d\u8981\u5728aboutToDisapper\u4e2d\u505a\u5f02\u6b65\u7b49\u5f85(asyc wait)\u64cd\u4f5c\u3002</li> </ol>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#builder","title":"@Builder","text":"<p>\u81ea\u5b9a\u4e49\u6784\u9020\u51fd\u6570</p> <p>\u9002\u7528\u4e8e\u5728\u7ec4\u4ef6\u7684build()\u65b9\u6cd5\u548c\u5176\u4ed6\u81ea\u5b9a\u4e49\u6784\u5efa\u51fd\u6570\u4e2d\u3002</p> <p>\u81ea\u5b9a\u4e49\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u5206\u4e3a\u5f15\u7528\u4f20\u9012\u548c\u503c\u4f20\u9012\u3002</p> <ul> <li>\u5168\u5c40\u81ea\u5b9a\u4e49\u6784\u9020\u51fd\u6570</li> </ul> <p>\u5b9a\u4e49\u7684\u8bed\u6cd5\uff1a</p> <p><code>@Builder function MyGlobalBuilderFunction({ ... })</code></p> <p>\u4f7f\u7528\u65b9\u6cd5\uff1a</p> <p><code>MyGlobalBuilderFunction()</code></p> <ul> <li>\u5168\u5c40\u7684\u81ea\u5b9a\u4e49\u6784\u5efa\u51fd\u6570\u53ef\u4ee5\u88ab\u6574\u4e2a\u5e94\u7528\u83b7\u53d6\uff0c\u4e0d\u5141\u8bb8\u4f7f\u7528this\u548cbind\u65b9\u6cd5\u3002</li> <li> <p>\u5982\u679c\u4e0d\u6d89\u53ca\u7ec4\u4ef6\u72b6\u6001\u53d8\u5316\uff0c\u5efa\u8bae\u4f7f\u7528\u5168\u5c40\u7684\u81ea\u5b9a\u4e49\u6784\u5efa\u65b9\u6cd5\u3002</p> </li> <li> <p>\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u6784\u9020\u51fd\u6570</p> </li> </ul> <p>\u5b9a\u4e49\u7684\u8bed\u6cd5\uff1a</p> <p><code>@Builder MyBuilderFunction({ ... })</code></p> <p>\u4f7f\u7528\u65b9\u6cd5\uff1a</p> <p><code>this.MyBuilderFunction({ ... })</code></p> <ul> <li>\u5141\u8bb8\u5728\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u5185\u5b9a\u4e49\u4e00\u4e2a\u6216\u591a\u4e2a\u81ea\u5b9a\u4e49\u6784\u5efa\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u88ab\u8ba4\u4e3a\u662f\u8be5\u7ec4\u4ef6\u7684\u79c1\u6709\u3001\u7279\u6b8a\u7c7b\u578b\u7684\u6210\u5458\u51fd\u6570\u3002</li> <li>\u81ea\u5b9a\u4e49\u6784\u5efa\u51fd\u6570\u53ef\u4ee5\u5728\u6240\u5c5e\u7ec4\u4ef6\u7684build\u65b9\u6cd5\u548c\u5176\u4ed6\u81ea\u5b9a\u4e49\u6784\u5efa\u51fd\u6570\u4e2d\u8c03\u7528\uff0c\u4f46\u4e0d\u5141\u8bb8\u5728\u7ec4\u4ef6\u5916\u8c03\u7528\u3002</li> <li>\u5728\u81ea\u5b9a\u4e49\u51fd\u6570\u4f53\u4e2d\uff0cthis\u6307\u4ee3\u5f53\u524d\u6240\u5c5e\u7ec4\u4ef6\uff0c\u7ec4\u4ef6\u7684\u72b6\u6001\u53d8\u91cf\u53ef\u4ee5\u5728\u81ea\u5b9a\u4e49\u6784\u5efa\u51fd\u6570\u5185\u8bbf\u95ee\u3002\u5efa\u8bae\u901a\u8fc7this\u8bbf\u95ee\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u72b6\u6001\u53d8\u91cf\u800c\u4e0d\u662f\u53c2\u6570\u4f20\u9012\u3002</li> </ul>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#builderparam","title":"@BuilderParam","text":"<p>\u5f53\u5f00\u53d1\u8005\u521b\u5efa\u4e86\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff0c\u5e76\u60f3\u5bf9\u8be5\u7ec4\u4ef6\u6dfb\u52a0\u7279\u5b9a\u529f\u80fd\u65f6\uff0c\u4f8b\u5982\u5728\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u70b9\u51fb\u8df3\u8f6c\u64cd\u4f5c\u3002\u82e5\u76f4\u63a5\u5728\u7ec4\u4ef6\u5185\u5d4c\u5165\u4e8b\u4ef6\u65b9\u6cd5\uff0c\u5c06\u4f1a\u5bfc\u81f4\u6240\u6709\u5f15\u5165\u8be5\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684\u5730\u65b9\u5747\u589e\u52a0\u4e86\u8be5\u529f\u80fd\u3002\u4e3a\u89e3\u51b3\u6b64\u95ee\u9898\uff0cArkUI\u5f15\u5165\u4e86@BuilderParam\u88c5\u9970\u5668\uff0c@BuilderParam\u7528\u6765\u88c5\u9970\u6307\u5411@Builder\u65b9\u6cd5\u7684\u53d8\u91cf\uff0c\u5f00\u53d1\u8005\u53ef\u5728\u521d\u59cb\u5316\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u65f6\u5bf9\u6b64\u5c5e\u6027\u8fdb\u884c\u8d4b\u503c\uff0c\u4e3a\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u589e\u52a0\u7279\u5b9a\u7684\u529f\u80fd\u3002\u8be5\u88c5\u9970\u5668\u7528\u4e8e\u58f0\u660e\u4efb\u610fUI\u63cf\u8ff0\u7684\u4e00\u4e2a\u5143\u7d20\uff0c\u7c7b\u4f3cslot\u5360\u4f4d\u7b26\u3002</p> <p>\u4e3b\u8981\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u53c2\u6570\u521d\u59cb\u5316\u7ec4\u4ef6</li> </ul> <p>\u4fdd\u8bc1@BuilderParam\u88c5\u9970\u5668 \u88c5\u9970\u7684\u53d8\u91cf\u53c2\u6570\u548c@Builder\u7684\u81ea\u5b9a\u4e49\u6784\u9020\u51fd\u6570\u53d8\u91cf\u662f\u76f8\u5bf9\u5e94\u7684</p> <ul> <li>\u5c3e\u968f\u95ed\u5305\u521d\u59cb\u5316\u7ec4\u4ef6</li> </ul> <p>\u5982\u4e0b\u4ee3\u7801\u53ef\u770b\u51fa\uff0c\u5c3e\u968f\u95ed\u5305\u7684\u4ee3\u7801\u53ef\u4ee5\u5f53\u4f5c\u81ea\u5b9a\u4e49\u6784\u9020\u51fd\u6570\u4f20\u9012\u7ed9BuilderParam\u7684\u53d8\u91cf</p> <pre><code>// xxx.ets\n@Component\nstruct CustomContainer {\n  @Prop header: string;\n  @BuilderParam closer: () =&gt; void\n\n  build() {\n    Column() {\n      Text(this.header)\n        .fontSize(30)\n      this.closer()\n    }\n  }\n}\n\n@Builder function specificParam(label1: string, label2: string) {\n  Column() {\n    Text(label1)\n      .fontSize(30)\n    Text(label2)\n      .fontSize(30)\n  }\n}\n\n@Entry\n@Component\nstruct CustomContainerUser {\n  @State text: string = 'header';\n\n  build() {\n    Column() {\n      // \u521b\u5efaCustomContainer\uff0c\u5728\u521b\u5efaCustomContainer\u65f6\uff0c\u901a\u8fc7\u5176\u540e\u7d27\u8ddf\u4e00\u4e2a\u5927\u62ec\u53f7\u201c{}\u201d\u5f62\u6210\u5c3e\u968f\u95ed\u5305\n      // \u4f5c\u4e3a\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6CustomContainer @BuilderParam closer: () =&gt; void\u7684\u53c2\u6570\n      CustomContainer({ header: this.text }) {\n        Column() {\n          specificParam('testA', 'testB')\n        }.backgroundColor(Color.Yellow)\n        .onClick(() =&gt; {\n          this.text = 'changeHeader';\n        })\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#styles","title":"@Styles\u88c5\u9970\u5668","text":"<p>\u5b9a\u4e49\u7ec4\u4ef6\u91cd\u7528\u6837\u5f0f</p>"},{"location":"Android/31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/#extend","title":"@Extend\u88c5\u9970\u5668","text":"<p>\u6269\u5c55\u7ec4\u4ef6\u6837\u5f0f</p> <p>@StateStyle:</p> <p>\u591a\u6001\u6837\u5f0f</p> <ul> <li>UI \u63cf\u8ff0</li> </ul> <p>\u58f0\u660e\u5f0f\u7684\u65b9\u5f0f\u6765\u63cf\u8ff0 UI \u7684\u7ed3\u6784\uff0c\u5982\u4e0a\u8ff0 build() \u65b9\u6cd5\u5185\u90e8\u7684\u4ee3\u7801\u5757\u3002</p> <ul> <li>\u5185\u7f6e\u7ec4\u4ef6</li> </ul> <p>\u6846\u67b6\u4e2d\u9ed8\u8ba4\u5185\u7f6e\u7684\u57fa\u7840\u548c\u5e03\u5c40\u7ec4\u4ef6\uff0c\u53ef\u76f4\u63a5\u88ab\u5f00\u53d1\u8005\u8c03\u7528\uff0c\u6bd4\u5982\u793a\u4f8b\u4e2d\u7684 Column\u3001Text\u3001Divider\u3001Button\u3002</p> <ul> <li>\u4e8b\u4ef6\u65b9\u6cd5</li> </ul> <p>\u7528\u4e8e\u6dfb\u52a0\u7ec4\u4ef6\u5bf9\u4e8b\u4ef6\u7684\u54cd\u5e94\u903b\u8f91\uff0c\u7edf\u4e00\u901a\u8fc7\u4e8b\u4ef6\u65b9\u6cd5\u8fdb\u884c\u8bbe\u7f6e\uff0c\u5982\u8ddf\u968f\u5728Button\u540e\u9762\u7684onClick()\u3002</p> <ul> <li>\u5c5e\u6027\u65b9\u6cd5</li> </ul> <p>\u7528\u4e8e\u7ec4\u4ef6\u5c5e\u6027\u7684\u914d\u7f6e\uff0c\u7edf\u4e00\u901a\u8fc7\u5c5e\u6027\u65b9\u6cd5\u8fdb\u884c\u8bbe\u7f6e\uff0c\u5982fontSize()\u3001width()\u3001height()\u3001color() \u7b49\uff0c\u53ef\u901a\u8fc7\u94fe\u5f0f\u8c03\u7528\u7684\u65b9\u5f0f\u8bbe\u7f6e\u591a\u9879\u5c5e\u6027\u3002</p>"},{"location":"Android/33%20res%E8%B5%84%E6%BA%90/","title":"Android \u8d44\u6e90","text":""},{"location":"Android/33%20res%E8%B5%84%E6%BA%90/#_1","title":"\u4e3b\u9898\u548c\u6837\u5f0f\u8d44\u6e90\uff1a","text":""},{"location":"Android/33%20res%E8%B5%84%E6%BA%90/#_2","title":"\u7cfb\u7edf\u4e3b\u9898","text":"<p>\u5199\u6cd5\uff1a@android:style/Theme.Black.NoTitleBar.Fullscreen</p> <p>\u4e5f\u53ef\u7b80\u5199\u6210\uff1aandroid:style/Theme.Black.NoTitleBar.Fullscreen</p> <p>\u200b                       android:Theme.Black.NoTitleBar.Fullscreen</p> <p>\u5c3d\u91cf\u4f7f\u7528\u5b98\u65b9\u63a8\u8350\u5199\u6cd5</p>"},{"location":"Android/33%20res%E8%B5%84%E6%BA%90/#material-design","title":"Material Design \u4e3b\u9898\u5e94\u7528","text":"<p>\u5199\u6cd5\uff1a</p> <p>Theme.Appcompat.XXX</p> <p>\u6765\u6e90\uff1aandroidx.appcompat\u5e93\u4e2d</p>"},{"location":"Android/33%20res%E8%B5%84%E6%BA%90/#_3","title":"\u4e3b\u9898\u7ee7\u627f\u5173\u7cfb","text":"<p>\u53ef\u4ee5\u4f7f\u7528parent</p> <pre><code>&lt;resources&gt;\n    &lt;style name=\"GreenText\" parent=\"TextAppearance.AppCompat\"&gt;\n        &lt;item name=\"android:textColor\"&gt;#00FF00&lt;/item&gt;\n    &lt;/style&gt;\n&lt;/resources&gt;\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528.\u7ee7\u627f,\u800c\u975eParent\u5c5e\u6027\uff0c</p> <pre><code>&lt;style name=\"GreenText.Large\"&gt;\n    &lt;item name=\"android:textSize\"&gt;22dp&lt;/item&gt;\n&lt;/style&gt;\n</code></pre> <p>Theme R.styleable \u6765\u67e5\u8be2\u6709\u54ea\u4e9b\u5c5e\u6027\u6709\u6548</p> <p>Style  R.attr\u6765\u67e5\u8be2\u54ea\u4e9b\u5c5e\u6027\u6709\u6548</p>"},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/","title":"3 Android \u5927\u7eb22-View\u63a7\u4ef6","text":""},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#view","title":"View\u63a7\u4ef6","text":""},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#autocompletetext","title":"AutoCompleteText","text":"<ul> <li>Android:imeOptions  \u8f6f\u4ef6\u76d8\u54cd\u5e94\u4e8b\u4ef6</li> <li> <p>actionDone \u4f7f\u7528\u8f6f\u4ef6\u76d8\u5b8c\u6210\u4e0b\u4e00\u6b65</p> </li> <li> <p>\u5b9e\u73b0\u4e0b\u62c9\u5217\u8868</p> </li> </ul>"},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#toolbar","title":"Toolbar","text":"<ul> <li>\u5bfc\u822a\u6309\u94ae</li> </ul> <p><code>xml   app:navigationIcon=\"@drawable/icon_back_32px\"</code></p> <p><code>java   mToolbar.setNavigationOnClickListener(new View.OnClickListener() {     @Override     public void onClick(View v) {       getActivity().finish();     }   });</code></p> <ul> <li>title</li> </ul> <p><code>xml   app:title=\"\u8fd9\u662f\u6e38\u5ba2\u754c\u9762\"</code></p> <ul> <li>PopMenu</li> </ul> <p>```xml //\u4f7f\u7528\u4e3b\u9898\u7684\u65b9\u5f0f\u5b9e\u73b0  app:popupTheme=\"@style/OverflowMenuStyle\"</p> <p>```</p> <p>\u4f46\u662f\u597d\u591a\u5c5e\u6027\u65e0\u6cd5\u5b9e\u73b0\u3002</p>"},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#listview","title":"ListView","text":"<ul> <li> <p>\u4f18\u5316\u6027\u80fd</p> </li> <li> <p>\u5728ListView\u7684Adapter\u4e2d\u590d\u7528getView\u65b9\u6cd5\u4e2d\u7684convertView</p> </li> <li> <p>\u4f7f\u7528\u9759\u6001\u5185\u90e8\u7c7bViewHolder,\u7528\u4e8e\u5bf9\u63a7\u4ef6\u7684\u5b9e\u4f8b\u5b58\u50a8\u8fdb\u884c\u7f13\u5b58\uff0c\u51cf\u5c11findViewById\u7684\u8c03\u7528\u6b21\u6570</p> </li> <li> <p>\u5e38\u7528\u5c5e\u6027</p> </li> </ul> <p>```xml   android:divider=\"#00000000\" //\u6216\u8005\u5728javaCode\u4e2d\u5982\u4e0b\u5b9a\u4e49\uff1alistView.setDividerHeight(0);   android:divider=\"@drawable/list_driver\" //\u8bbe\u7f6e\u5206\u5272\u7ebf\u7684\u56fe\u7247\u8d44\u6e90   android:divider=\"@drawable/@null\" //\u4e0d\u60f3\u663e\u793a\u5206\u5272\u7ebf</p> <p>android:scrollbars=\"none\"//\u9690\u85cflistView\u7684\u6eda\u52a8\u6761   \u5728javaCode\u4e2d\u5982\u4e0b\u5b9a\u4e49   setVerticalScrollBarEnabled(true);   android:fadeScrollbars=\"true\" //\u8bbe\u7f6e\u4e3atrue\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6eda\u52a8\u6761\u7684\u81ea\u52a8\u9690\u85cf\u548c\u663e\u793a</p> <p>android:fadingEdge=\"none\" //\u53bb\u6389\u4e0a\u8fb9\u548c\u4e0b\u8fb9\u9ed1\u8272\u7684\u9634\u5f71</p> <p>android:fastScrollEnabled=\"true\"    //\u5728javaCode\u4e2d\u5982\u4e0b\u5b9a\u4e49\uff1a   mListView.setFastScrollEnabled(true); //\u6765\u63a7\u5236\u542f\u7528\uff0c\u53c2\u6570false\u4e3a\u9690\u85cf\u3002 </p> <p>android:stackFromBottom=\"true\"  //\u8be5\u5c5e\u6027\u9ed8\u8ba4\u4e3afalse\uff0c\u8bbe\u7f6e\u4e3atrue\u540e\uff0c\u4f60\u7684\u5217\u8868\u663e\u793a\u6700\u540e\u4e00\u9879   ```</p> <ul> <li>ListView\u5b9e\u73b0\u9009\u4e2d\u6bcf\u4e00\u884c\u9ad8\u4eae</li> </ul>"},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#floatingactionbutton","title":"FloatingActionButton","text":"<ul> <li>\u9700\u8981CoordinatorLayout\u7684\u914d\u5408</li> <li>\u6240\u6709\u7684\u5b50View\u4f1a\u9ed8\u8ba4\u663e\u793a\u5728\u5de6\u4e0a\u89d2</li> <li> <p>\u4f7f\u7528\u65b9\u5f0f</p> <ol> <li>\u4f5c\u4e3a\u9876\u5c42\u5e03\u5c40</li> <li>\u4f5c\u4e3a\u4e0e\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50 View \u4ea4\u4e92\u7684\u5bb9\u5668</li> </ol> </li> <li> <p>\u5c5e\u6027</p> </li> </ul> <p><code>xml   android:src             //\u8bbe\u7f6e\u56fe\u6807(24dp)   app:backgroundTint      //\u8bbe\u7f6e\u56fe\u6807\u80cc\u666f\u989c\u8272\u3002     app:rippleColor         //\u8bbe\u7f6e\u70b9\u51fb\u65f6\u6c34\u6ce2\u7eb9\u989c\u8272     app:elevation           //\u8bbe\u7f6e\u9634\u5f71\u5927\u5c0f    app:fabSize             //\u8bbe\u7f6e\u5927\u5c0f  mini auto normal   app:pressedTranslationZ //\u6309\u4e0b\u65f6\u8ddd\u79bbZ\u8f74\u7684\u8ddd\u79bb  \u4e00\u822c\u5927\u4e8eelevation   app:layout_anchor       //\u8bbe\u7f6e\u951a\u70b9     app:layout_anchorGravity//\u8bbe\u7f6e\u76f8\u5bf9\u951a\u70b9\u7684\u4f4d\u7f6e   app:layout_gravity       //\u8bbe\u7f6e\u76f8\u5bf9\u4f4d\u7f6e   app:borderWidth=\"0dp\"    //\u8fb9\u6846\u5bbd\u5ea6</code></p> <ul> <li> <p>Java\u4ee3\u7801\u5b9e\u73b0 \u540c\u5c5e\u6027</p> </li> <li> <p>\u5b9e\u73b0</p> </li> </ul> <p>```xml        <pre><code>          &lt;ListView\n              android:id=\"@+id/schemelist\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\"\n              android:cacheColorHint=\"#00000000\"\n              android:fadeScrollbars=\"true\"\n              android:paddingLeft=\"10dp\"\n              android:paddingRight=\"10dp\"\n              android:stackFromBottom=\"false\" /&gt;\n\n          &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n              android:id=\"@+id/add_scheme\"\n              android:layout_width=\"wrap_content\"\n              android:layout_height=\"wrap_content\"\n              android:layout_gravity=\"bottom|end\"\n              android:layout_margin=\"20dp\"\n              android:src=\"@drawable/icon_back_32px\"\n              app:backgroundTint=\"@color/teal_200\"\n              app:borderWidth=\"0dp\"\n              app:elevation=\"8dp\"\n              app:fabSize=\"normal\"\n              app:pressedTranslationZ=\"16dp\"\n              app:rippleColor=\"#e7d16b\" /&gt;\n\n      &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre> <p>```</p>"},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#checkbox","title":"checkbox","text":"<ul> <li>\u4fee\u6539\u8fb9\u6846\u989c\u8272</li> </ul> <p><code>xml    android:buttonTint=\"@color/colorAccent\"</code></p> <ul> <li>\u4fee\u6539\u8fb9\u6846\u5927\u5c0f</li> </ul> <p><code>xml   android:scaleX=\"0.8\"   android:scaleY=\"0.8\"</code></p> <ul> <li>\u6dfb\u52a0\u6587\u5b57 \u53ef\u4ee5\u4f7f\u7528text\u6dfb\u52a0\u6587\u5b57</li> </ul>"},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#imageview","title":"ImageView","text":""},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#glide","title":"Glide:\u52a0\u8f7d\u56fe\u7247\u7684\u6846\u67b6","text":"<ul> <li>\u57fa\u672c\u4f7f\u7528</li> </ul> <p>\u5bfc\u5165\u5e93</p> <p><code>bash   implementation 'com.github.bumptech.glide:glide:4.12.0'   annotationProcessor 'com.github.bumptech.glide:compiler:4.12.0'</code></p> <p>\u6dfb\u52a0\u6743\u9650</p> <p><code>xml   #\u8bfb\u53d6\u5916\u90e8\u5b58\u50a8\u6743\u9650   &lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;   #\u7f51\u7edc\u8bbf\u95ee\u6743\u9650   &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;</code></p> <p>Glide\u7684into()\u4f7f\u7528\u53ea\u80fd\u5728\u4e3b\u7ebf\u7a0b</p> <ul> <li>\u52a0\u8f7d\u7f51\u7edc\u56fe\u7247</li> </ul> <p><code>java   Glide.with(context).load(internetUrl).into(targetImageView);</code></p> <ul> <li>\u4ece\u6587\u4ef6\u52a0\u8f7d\u56fe\u7247</li> </ul> <p><code>java   //\u770b\u4e00\u4e0b\u6587\u4ef6\u7684\u5171\u6709\u76ee\u5f55\u548c\u79c1\u6709\u76ee\u5f55\u7684\u533a\u522b   File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),\"Test.jpg\");   Glide.with(context).load(file).into(imageViewFile);</code></p> <ul> <li>\u4ece\u8d44\u6e90id\u52a0\u8f7d\u56fe\u7247</li> </ul> <p><code>xml   int resourceId = R.mipmap.ic_launcher;   Glide.with(context).load(resourceId).into(imageViewResource);</code></p> <ul> <li>\u64ad\u653e\u672c\u5730mp4</li> </ul> <p><code>xml   String filePath = \"/storage/emulated/0/Pictures/example_video.mp4\";   Glide.with( context ).load( Uri.fromFile( **new **File( filePath ) ) ).into( imageViewGifAsBitmap );</code></p> <ul> <li>\u52a0\u8f7dGif\u56fe\u7247</li> </ul> <p><code>java   String gifUrl = \"xxxxx\";   Glide.with( context ).load( gifUrl ).into( imageViewGif );</code></p> <ul> <li>\u4f7f\u7528bitmap\u64ad\u653eGif</li> </ul> <p><code>java   Glide.with( context ).load( gifUrl ).asBitmap().into( imageViewGifAsBitmap );</code></p> <ul> <li>\u53d6\u6d88\u52a0\u8f7d</li> </ul> <p><code>java   Glide.with(fragment).clear(imageView);</code></p> <ul> <li>Target</li> </ul> <p>\u200b        \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u662f\u901a\u8fc7into(),\u5c06Glide\u52a0\u8f7d\u7684\u56fe\u7247\u653e\u5165ImageView\uff0c\u4f46\u662f\u6709\u7684\u65f6\u5019\u6211\u4eec\u4e0d\u9700\u8981Glide\u5904\u7406\u7684\u56fe\u7247\uff0c\u800c\u662f\u56fe\u7247\u7684\u539f\u56fe\u65f6\uff0c\u6211\u4eec\u5c06\u4f1a\u7528\u5230Target,\u5f53\u7136\u8fd8\u6709\u5176\u4ed6\u529f\u80fd\uff0c\u4ee5\u540e\u6162\u6162\u8865\u5145,target\u6709\u5f88\u591a\u79cd\u3002</p> <p>\u200b       .into(ImageView view)\u6839\u636e\u6e90\u7801\u4f1a<code>buildTarget</code>\uff0cGlide\u4f1a\u8ddf\u8e2a\u8fd9\u4e2aTarget,\u5728\u83b7\u5f97\u56fe\u7247\u8d44\u6e90\u4e4b\u540e\uff0c\u901a\u77e5Target\u6765\u66f4\u65b0\u5185\u90e8\u6301\u6709\u7684\u5f15\u7528\uff0c\u5373\u76f8\u5f53\u4e8e\u4e00\u4e2a\u7f51\u7edc\u8bf7\u6c42\u540e\u7684UI\u56de\u8c03\u3002</p> <p>\u200b       .into(ImageView view) \u9ed8\u8ba4\u4f7f\u7528\u7684Target\u4e3a<code>ViewTarget</code>,\u9ed8\u8ba4\u4e3a\u4ee5\u4e0b\u4e24\u4e2a:<code>BitmapImageViewTarget</code>\u548c<code>DrawableImageViewTarget</code></p> <p><code>java   if (Bitmap.class.equals(clazz)) {     return (ViewTarget&lt;ImageView, Z&gt;) new BitmapImageViewTarget(view);   } else if (Drawable.class.isAssignableFrom(clazz)) {     return (ViewTarget&lt;ImageView, Z&gt;) new DrawableImageViewTarget(view);   } else {     throw new IllegalArgumentException(       \"Unhandled class: \" + clazz + \", try .as*(Class).transcode(ResourceTranscoder)\");   }</code></p> <ul> <li> <p>SimpleTarget:<code>AppWidgetTarget</code>\u3001<code>PreloadTatget</code>\u3001<code>NotificationTarget</code></p> <p>```java private SimpleTarget target = new SimpleTarget(width,height) {     @Override     public void onResourceReady(Bitmap bitmap, GlideAnimation glideAnimation) {         // do something with the bitmap         // for demonstration purposes, let's just set it to an ImageView         imageView1.setImageBitmap( bitmap );     } }; <p>private void loadImageSimpleTarget() {     Glide         .with( context ) // could be an issue!         .load(uri )         .asBitmap()         .into( target ); } ```</p> <p>\u200b        SimpleTarget\u53ef\u4ee5\u83b7\u53d6\u539f\u59cb\u56fe\u7247\u7684\u5927\u5c0f\uff0cAndroid \u63a8\u8350\u4f7f\u7528ViewTarget\u53ca\u5176\u5b50\u7c7b\uff0c\u82e5\u4f7f\u7528SimpleTarget,\u5c3d\u91cf\u63d0\u4f9b\u5bbd\u9ad8,\u4f7f\u7528 Target.SIZE_ORIGINAL \u662f\u4e0d\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u5bfc\u81f4 Glide \u5c06\u975e\u5e38\u5927\u7684\u56fe\u50cf\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u4ece\u800c\u9020\u6210OOM\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u70b9\uff1a</p> <ul> <li>Target\u7684\u5bf9\u8c61\u7684\u5b57\u6bb5\u8bf4\u660e\uff0c\u4ece\u6280\u672f\u4e0a\u6765\u8bf4\uff0cJava/Android \u4f1a\u5141\u8bb8\u4f60\u5728 .into() \u65b9\u6cd5\u4e2d\u53bb\u58f0\u660e target \u7684\u533f\u540d\u5185\u90e8\u7c7b\u3002\u7136\u800c\uff0c\u8fd9\u5927\u5927\u589e\u52a0\u4e86\u8fd9\u6837\u4e00\u4e2a\u53ef\u80fd\u6027\uff1a\u5373\u5728 Glide \u505a\u5b8c\u56fe\u7247\u8bf7\u6c42\u4e4b\u524d\uff0c Android \u5783\u573e\u56de\u6536\u79fb\u9664\u4e86\u8fd9\u4e2a\u533f\u540d\u5185\u90e8\u7c7b\u5bf9\u8c61\u3002\u6700\u7ec8\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u60c5\u51b5\uff0c\u5f53\u56fe\u50cf\u52a0\u8f7d\u5b8c\u6210\u4e86\uff0c\u4f46\u662f\u56de\u8c03\u518d\u4e5f\u4e0d\u4f1a\u88ab\u8c03\u7528\u3002\u6240\u8bf7\u786e\u4fdd\u4f60\u6240\u58f0\u660e\u7684\u56de\u8c03\u5bf9\u8c61\u662f\u4f5c\u4e3a\u4e00\u4e2a\u5b57\u6bb5\u5bf9\u8c61\u7684\uff0c\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u4fdd\u62a4\u5b83\u907f\u514d\u88ab\u90aa\u6076\u7684 Android \u5783\u573e\u56de\u6536\u673a\u5236\u56de\u6536 \uff0c\u56e0\u6b64\u6700\u597d\u5728.into()\u4e4b\u5916\u58f0\u660eTarget\u3002</li> <li> <p>.with(context),\u4e3a\u4e86\u5b89\u5168\u8bf7\u4f7f\u7528applicationContext\u3002</p> </li> <li> <p>ViewTarget</p> </li> </ul> <p><code>SimpleTarget</code>\u53ea\u80fd\u83b7\u53d6\u6700\u7ec8\u7684<code>bitmap</code>,\u800c\u65e0\u6cd5\u83b7\u53d6\u6301\u6709<code>View</code>\u7684\u5168\u5c40\u5bf9\u8c61\uff0c\u5f53\u4f7f\u7528\u81ea\u5b9a\u4e49View\u7684\u65f6\u5019\uff0c\u65e0\u6cd5\u5c06\u76f8\u5e94\u7684\u56fe\u7247\u653e\u5728View\u4e2d\uff0c\u5e76\u4e14<code>Glide</code>\u65e0\u6cd5\u6839\u636e<code>View</code>\u7684\u5927\u5c0f\u6765\u7f13\u5b58\u56fe\u7247\u7684\u5927\u5c0f\u3002</p> <p><code>ViewTarget</code>\u89e3\u51b3\u4e86\u4ee5\u4e0a\u7684\u95ee\u9898\uff0c\u5728\u6784\u9020\u51fd\u6570\u4f20\u5165\u6301\u6709<code>View</code>\u7684\u5168\u5c40\u5bf9\u8c61\uff0c\u5e76\u901a\u8fc7\u5185\u90e8\u7684<code>SizeDeterminer</code>\u8ba1\u7b97<code>View</code>\u7684\u5bbd\u9ad8\u6765\u63d0\u4f9b\u7ed9<code>Glide</code>\u4f5c\u4e3a\u53c2\u8003\uff0c\u4e0d\u4f1a\u9020\u6210OOM\u3002</p> <p>```java   //CustomView\u4e3a\u81ea\u5b9a\u4e49View   public void loadViewTarget(View view) {     CustomView customView = (CustomView) findViewById(R.id.cv_result);     MyViewTarget myViewTarget = new MyViewTarget(customView);     Glide.with(this)       .load(R.drawable.book_url)       .into(myViewTarget);   }</p> <p>private class MyViewTarget extends ViewTarget { <pre><code>public MyViewTarget(CustomView customView) {\n  super(customView);\n}\n\n@Override\npublic void onResourceReady(GlideDrawable resource, GlideAnimation&lt;? super GlideDrawable&gt; glideAnimation) {\n  view.setResult(resource.getCurrent());\n}\n</code></pre> <p>}   ```</p> <ul> <li> <p>GlideDrawableImageViewTarget - \u9ed8\u8ba4\u7684Target\uff0c\u7528\u4e8e\u6b63\u5e38\u7684\u52a0\u8f7d\u548casGif()\u3002(\u91cd\u5199onResourceReady \u65b9\u6cd5\u540e .asGif() \u53ef\u7701\u7565 )</p> </li> <li> <p>BitmapImageViewTarget - \u5f53\u4f7f\u7528asBitmap()\u52a0\u8f7d\u65f6\uff0c\u4f7f\u7528\u7684\u9ed8\u8ba4Target\u3002</p> </li> </ul> <p>Target\u76f8\u5173\u56de\u8c03\u65b9\u6cd5</p> <ul> <li>void onLoadCleared(Drawable placeholder) </li> </ul> <p>\u52a0\u8f7d\u65f6\u8c03\u7528\u751f\u547d\u5468\u671f\u56de\u8c03,\u53d6\u6d88\u4e86\u548c\u5b83\u7684\u8d44\u6e90\u91ca\u653e\u3002\u4e00\u822c\u60c5\u51b5\u4e0d\u9700\u8981\u6211\u4eec\u64cd\u4f5c\u3002</p> <ul> <li>void onLoadFailed(Exception e, Drawable errorDrawable) </li> </ul> <p>\u52a0\u8f7d\u5931\u8d25\u56de\u8c03\uff0c\u6839\u636e\u9700\u6c42\uff0c\u53ef\u5728\u5f53\u524d\u65b9\u6cd5\u4e2d\u8fdb\u884c\u56fe\u7247\u52a0\u8f7d\u5931\u8d25\u7684\u540e\u7eed\u64cd\u4f5c\u3002</p> <ul> <li>void onLoadStarted(Drawable placeholder) </li> </ul> <p>\u5f00\u59cb\u52a0\u8f7d\u56fe\u7247\uff0c\u53ef\u5728\u5f53\u524d\u65b9\u6cd5\u4e2d\u8fdb\u884c\u52a0\u8f7d\u56fe\u7247\u7684\u521d\u59cb\u64cd\u4f5c\u3002\u6bd4\u5982\uff0c\u663e\u793a\u52a0\u8f7d\u8fdb\u5ea6\u6761\u3002</p> <ul> <li>void onResourceReady(Z resource, GlideAnimation&lt;? super Z&gt; glideAnimation) </li> </ul> <p>\u5f53\u524d\u65b9\u6cd5\u8868\u793a\u56fe\u7247\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210\u3002</p> <ul> <li>Drawable getCurrentDrawable()</li> </ul> <p>\u200b        \u83b7\u53d6\u5f53\u524d\u663e\u793a\u7684 Drawable </p> <ul> <li>void setDrawable(Drawable drawable) </li> </ul> <p>\u8bbe\u7f6e drawable \u663e\u793a\u5728\u5f53\u524d ImageView </p>"},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#scaletype","title":"ScaleType\u5c5e\u6027","text":"\u5c5e\u6027\u503c \u4f5c\u7528 MATRIX \u4f7f\u7528setImageMatrix(Matrix),\u5141\u8bb8\u7528\u6237\u81ea\u5b9a\u4e49\u7f29\u653e\u3001\u5e73\u79fb\u3001\u900f\u89c6\u6765\u53d8\u5f62 FIT_XY \u7f29\u5c0f\u6216\u653e\u5927\u56fe\u7247\uff0c\u5145\u6ee1\u63a7\u4ef6\uff0c\u4e0d\u88c1\u526a\uff0c\u53ef\u80fd\u4f1a\u6539\u53d8\u56fe\u7247\u7eb5\u6a2a\u6bd4 FIT_START \u7f29\u5c0f\u6216\u653e\u5927\u56fe\u7247\uff0c\u672a\u5145\u6ee1\u63a7\u4ef6\uff0c\u4fdd\u8bc1\u7eb5\u6a2a\u6bd4\uff0c\u4ece\u539f\u70b9\u5f00\u59cb\uff0c\u4fdd\u8bc1\u957f\u5bbd\u6709\u4e00\u4e2a\u662f\u5b8c\u6574\u7684 FIT_CENTER \u7f29\u5c0f\u6216\u653e\u5927\u56fe\u7247\uff0c\u672a\u5145\u6ee1\u63a7\u4ef6\uff0c\u4fdd\u8bc1\u7eb5\u6a2a\u6bd4\uff0c\u4fdd\u8bc1\u957f\u5bbd\u6709\u4e00\u4e2a\u662f\u5b8c\u6574\u7684\uff0c\u663e\u793a\u5728\u4e2d\u95f4 FIT_END \u7f29\u5c0f\u6216\u653e\u5927\u56fe\u7247\uff0c\u672a\u5145\u6ee1\u63a7\u4ef6\uff0c\u4fdd\u8bc1\u7eb5\u6a2a\u6bd4\uff0c\u4ece\u5e95\u90e8\u53f3\u8fb9\u5f00\u59cb\uff0c\u4fdd\u8bc1\u957f\u5bbd\u6709\u4e00\u4e2a\u662f\u5b8c\u6574 CENTER \u4e0d\u7f29\u653e\uff0c\u5145\u6ee1\u63a7\u4ef6\uff0c\u4f1a\u88c1\u526a\uff0c\u4fdd\u8bc1\u7eb5\u6a2a\u6bd4\uff0c\u663e\u793a\u5728\u4e2d\u592e CENTER_CROP \u7f29\u653e\u56fe\u7247\uff0c\u4fdd\u8bc1\u7eb5\u6a2a\u6bd4\uff0c\u4f7f\u957f\u5bbd\u7b49\u4e8e\u6216\u5927\u4e8e\u89c6\u56fe\u7684\u5c3a\u5bf8\uff0c\u663e\u793a\u5728\u4e2d\u592e\uff0c\u4f1a\u526a\u88c1 CENTER_INSIDE \u7f29\u653e\u56fe\u7247\uff0c\u4fdd\u8bc1\u7eb5\u6a2a\u6bd4\uff0c\uff0c\u4f7f\u957f\u5bbd\u7b49\u4e8e\u6216\u5c0f\u4e8e\u89c6\u56fe\u7684\u5c3a\u5bf8\uff0c\u663e\u793a\u5728\u4e2d\u592e <ul> <li>MATRIX </li> </ul> <p><code>MATRIX</code>\u662f\u4e00\u4e2a\u77e9\u9635\u7c7b\uff0c\u662f\u7528\u6765\u5bf9\u56fe\u7247\u8fdb\u884c\u7f29\u653e\u3001\u5e73\u79fb\u3001\u65cb\u8f6c\u7b49\u64cd\u4f5c\uff0c\u4e3b\u8981\u6709\uff1a</p> <ul> <li> <p>translate \u5e73\u79fb</p> <p><code>java mMaritx.setTranslate\uff08float dx,float dy\uff09</code></p> </li> <li> <p>Rotate \u65cb\u8f6c</p> <p><code>java mMaritx.setRotate(float degrees, float px, float py)//\u65cb\u8f6c\u89d2\u5ea6\uff0c\u65cb\u8f6c\u4e2d\u5fc3</code></p> </li> <li> <p>scale \u7f29\u653e</p> <p><code>java mMartix.setScale(float sx, float sy,float px,float py) //</code></p> </li> <li> <p>skew \u503e\u659c</p> <p><code>java mMartix.setSkew(float sx, float sy,float px,float py) //</code></p> </li> </ul> <p>\u200b    \u77e9\u9635\u7684\u4e58\u6cd5\u662f\u53ea\u6709\u5de6\u4e58\u7684\u6982\u5ff5\uff0c\u9700\u8981<code>(m*n)*(n*m)</code>,\u4f46\u662f\u7531\u4e8emMartix\u662f\u4e00\u4e2a3*3\u7684\u77e9\u9635\uff0c\u56e0\u6b64\u53ef\u4ee5\u5de6\u4e58\u548c\u53f3\u4e58\uff0c\u8fd9\u79cd\u6982\u5ff5\u6beb\u65e0\u7528\u5904\uff0c\u53ea\u662f\u56e0\u4e3a\u5b83\u63d0\u4f9b\u7684Api\u4e2d\u6709<code>post</code>\u548c<code>pre</code>\uff0c<code>post</code>\u662f\u6307\u5f53\u524d\u77e9\u9635\u5de6\u4e58\u53c2\u6570\u77e9\u9635\uff0c<code>pre</code>\u662f\u6307\u53c2\u6570\u77e9\u9635\u4e58\u4ee5\u5f53\u524d\u77e9\u9635\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u7684\u53d8\u5316\u662f\u8fde\u7eed\u7684\uff0c\u9700\u8981\u5206\u6e05\u5148\u540e\u987a\u5e8f\u3002</p> <pre><code>//\u6e90\u7801\u89e3\u6790\nif (ScaleType.MATRIX == mScaleType) {\n  // Use the specified matrix as-is.\n  if (mMatrix.isIdentity()) {\n    mDrawMatrix = null;\n  } else {\n    mDrawMatrix = mMatrix;\n  }\n</code></pre> <p>\u7531\u6b64\u53ef\u4ee5\u89c1\u5230\uff0c\u5176\u662f\u5c06\u53c2\u6570\u77e9\u9635<code>mMatrix</code>\u7ed9\u4e86<code>mDrawMatrix</code>,\u7136\u540e\u5728<code>Draw()</code>\u65f6\u8c03\u7528<code>mDrawMatrix</code>.</p> <p>\u4f7f\u7528\u65f6\uff0c\u9700\u8981\u5148\u5c06\u77e9\u9635\u586b\u5165\uff0c\u518d\u4f7f\u7528\u7c7b\u578b</p> <pre><code>setImageMatrix(mMatrix);\nsetScaleType(ScaleType.MATRIX);\n</code></pre> <p>setScaleType\u65f6\u4f1a\u91cd\u65b0\u5237\u65b0\u3002</p> <ul> <li> <p>FIT_XY     </p> </li> <li> <p>FIT_START</p> </li> <li> <p>FIT_CENTER</p> </li> <li> <p>FIT_END</p> </li> </ul> <p>\u4ee5\u4e0a\u65b9\u6cd5\u65f6\uff0c\u4f7f\u7528\u4e86JNI\uff0c\u6ca1\u6709\u67e5\u5230\u6e90\u7801</p> <ul> <li>CENTER </li> </ul> <p><code>java   //vwidth \u63a7\u4ef6\u5bbd  vheight \u63a7\u4ef6\u9ad8 //dwidth \u56fe\u7247\u5bbd //dheight \u56fe\u7247\u9ad8   if (ScaleType.CENTER == mScaleType) {                   // Center bitmap in view, no scaling.                   mDrawMatrix = mMatrix;                   mDrawMatrix.setTranslate(Math.round((vwidth - dwidth) * 0.5f),                                            Math.round((vheight - dheight) * 0.5f));</code></p> <p>\u7531\u6e90\u7801\u53ef\u77e5\uff0c\u53ea\u662f\u5c06\u5176\u8fdb\u884c\u4e86\u5e73\u79fb\uff0c\u79fb\u52a8\u5230\u63a7\u4ef6\u7684\u4e2d\u95f4\u3002</p> <ul> <li>CENTER_CROP</li> </ul> <p>\u8fd9\u4e2a\u6211\u7406\u89e3\u4e86\u5f88\u4e45\uff0c\u4f7f\u7528\u4ee3\u6570\u6cd5\u8fdb\u884c\u4e86\u4e00\u6ce2\u5b9e\u9a8c\uff0c\u4fdd\u8bc1\u6709\u4e00\u8fb9\u662f\u53ef\u4ee5\u5b8c\u5168\u5c55\u793a\u51fa\u6765\u7684\uff0c\u53e6\u4e00\u8fb9\u662f\u8d85\u8fc7\u63a7\u4ef6\u5927\u5c0f\u7684\uff0c\u6700\u540e\u518d\u5e73\u79fb\u5230\u63a7\u4ef6\u4e2d\u95f4\uff0c\u4f46\u662f\u5b83\u5bf9\u4e8e\u88c1\u8fb9\u7684\u5904\u7406\uff0c\u662f\u901a\u8fc7\u56fe\u7247\u5bbd\u9ad8\u6bd4\u548c\u63a7\u4ef6\u7684\u5bbd\u9ad8\u6bd4\u8fdb\u884c\u6bd4\u8f83\uff0c\u5f97\u5230\u5e94\u8be5\u54ea\u8fb9\u5b8c\u5168\u5c55\u793a\u51fa\u6765\u3002</p> <p><code>java   //vwidth \u63a7\u4ef6\u5bbd  vheight \u63a7\u4ef6\u9ad8 //dwidth \u56fe\u7247\u5bbd //dheight \u56fe\u7247\u9ad8   if (ScaleType.CENTER_CROP == mScaleType) {     mDrawMatrix = mMatrix;     float scale;     float dx = 0, dy = 0;     if (dwidth * vheight &gt; vwidth * dheight) {       scale = (float) vheight / (float) dheight;       dx = (vwidth - dwidth * scale) * 0.5f;     } else {       scale = (float) vwidth / (float) dwidth;       dy = (vheight - dheight * scale) * 0.5f;     }     mDrawMatrix.setScale(scale, scale);     mDrawMatrix.postTranslate(Math.round(dx), Math.round(dy));</code></p> <p>\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\uff0c\u56fe\u7247\u5bbd\u9ad8\u6bd4&gt;\u63a7\u4ef6\u5bbd\u9ad8\u6bd4\uff0c\u56fe\u7247\u9ad8\u5ea6\u662f\u53ef\u4ee5\u4fdd\u8bc1\u901a\u8fc7\u7f29\u653e\u5b8c\u5168\u663e\u793a\uff0c\u5bbd\u8fb9\u4f1a\u8d85\u8fc7\u63a7\u4ef6\u5bbd\u5ea6\uff0c\u53cd\u4e4b\u5219\u662f\u56fe\u7247\u5bbd\u5ea6\u662f\u53ef\u4ee5\u4fdd\u8bc1\u901a\u8fc7\u7f29\u653e\u5b8c\u5168\u663e\u793a\uff0c\u9ad8\u5ea6\u4f1a\u8d85\u8fc7\u63a7\u4ef6\u9ad8\u5ea6\u3002</p> <ul> <li> <p>CENTER_INSIDE</p> </li> <li> <p>\u5f53\u56fe\u7247\u5bbd\u9ad8\u90fd\u5c0f\u4e8e\u63a7\u4ef6\u7684\u5bbd\u9ad8\u65f6\uff0c\u5219\u4e0d\u4f1a\u7f29\u653e</p> </li> <li>\u5f53\u56fe\u7247\u5bbd\u9ad8\u6709\u4e00\u8fb9\u5927\u4e8e\u63a7\u4ef6\u7684\u5bbd\u9ad8\u65f6\uff0c\u5219\u4f1a\u9009\u62e9\u957f\u8fb9\u7684\u7f29\u653e\u6bd4\u4f8b\uff0c\u4fdd\u8bc1\u957f\u8fb9\u5145\u6ee1\u63a7\u4ef6\uff0c\u800c\u77ed\u8fb9\u5b8c\u5168\u663e\u793a\u5374\u4e0d\u5145\u6ee1\u63a7\u4ef6</li> <li>\u6700\u540e\u5e73\u79fb\u5230\u4e2d\u95f4</li> </ul> <p>```java   if (ScaleType.CENTER_INSIDE == mScaleType) {     mDrawMatrix = mMatrix;     float scale;     float dx;     float dy;</p> <pre><code>if (dwidth &lt;= vwidth &amp;&amp; dheight &lt;= vheight) {\n  scale = 1.0f;\n} else {\n  scale = Math.min((float) vwidth / (float) dwidth,\n                   (float) vheight / (float) dheight);\n}\n\ndx = Math.round((vwidth - dwidth * scale) * 0.5f);\ndy = Math.round((vheight - dheight * scale) * 0.5f);\n\nmDrawMatrix.setScale(scale, scale);\nmDrawMatrix.postTranslate(dx, dy);\n</code></pre> <p>```</p>"},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#view-ui","title":"View UI \u5e03\u5c40","text":""},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#scrollview","title":"ScrollView","text":"<p>\u7528\u4e8e\u5904\u7406\u7ec4\u6210\u754c\u9762\u4e0d\u89c4\u5219\u7684\u3001\u7ad6\u76f4\u65b9\u5411\u957f\u5ea6\u4e0d\u591f\u7684\u754c\u9762\uff0c\u533a\u522b\u4e0eListView\u53ea\u5904\u7406\u89c4\u5219\u7ec4\u6210\u7684\u754c\u9762\u3002</p> <p>1\u3001ScrollView\u7684\u76f4\u63a5\u5b50View\u53ea\u80fd\u6709\u4e00\u4e2a\u3002</p> <p>2\u3001\u4f7f\u7528<code>layout_width</code>\u548c<code>layout_height</code>\u7ed9<code>ScrollView</code>\u6307\u5b9a\u5927\u5c0f\u3002</p> <p>3\u3001ScrollView\u53ea\u7528\u6765\u5904\u7406\u9700\u8981\u6eda\u52a8\u7684\u4e0d\u89c4\u5219\u89c6\u56fe\u7684\u7ec4\u5408\u3002\u5927\u6279\u91cf\u7684\u5217\u8868\u6570\u636e\u5c55\u793a\u53ef\u4ee5\u4f7f\u7528ListView\u3001GridView\u6216\u8005RecyclerView\u3002</p> <p>4\u3001ScrollView\u548cListView\u4e4b\u7c7b\u7684\u5d4c\u5957\u4f7f\u7528\u65f6\u4f1a\u6709\u6ed1\u52a8\u51b2\u7a81\u3002\u4e0d\u5230\u4e0d\u5f97\u5df2\u4e0d\u8981\u4f7f\u7528\u3002</p> <p>5\u3001\u6c34\u5e73\u6ed1\u52a8\u4f7f\u7528<code>HorizontalScrollView</code>\u3002</p> <ul> <li>android:fillViewport     \u662f\u5426\u53ef\u4ee5\u62c9\u4f38\u5176\u5185\u5bb9\u586b\u6ee1Viewport</li> </ul>"},{"location":"Android/3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/#view_1","title":"View\u52a0\u8f7d\u6d41\u7a0b","text":""},{"location":"Android/4%E5%A4%9A%E5%AA%92%E4%BD%93/","title":"3 Android \u5927\u7eb22-\u591a\u5a92\u4f53","text":""},{"location":"Android/4%E5%A4%9A%E5%AA%92%E4%BD%93/#gestures","title":"\u624b\u52bfGestures","text":"<ul> <li>Android \u63d0\u4f9b\u624b\u52bf\u68c0\u6d4b\uff0c\u63d0\u4f9b\u76f8\u5e94\u7684\u76d1\u89c6\u5668</li> <li>Android \u63d0\u4f9bApi\u6dfb\u52a0\u76f8\u5e94\u7684\u624b\u52bf\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u76f8\u5e94\u7684Api\u6765\u8bc6\u522b\u76f8\u5e94\u7684\u624b\u52bf</li> </ul>"},{"location":"Android/4%E5%A4%9A%E5%AA%92%E4%BD%93/#_1","title":"\u624b\u52bf\u68c0\u6d4b","text":"<ul> <li>\u5173\u952e\u7c7b</li> <li>MotionEvent\uff1a\u5c01\u88c5\u624b\u52bf\u52a8\u4f5c</li> <li>GestureDetector:\u8bc6\u522b\u5404\u79cd\u624b\u52bf</li> <li> <p>OnGestureListener:\u624b\u52bf\u7684\u76d1\u542c\uff0c\u6839\u636e<code>GestureDetector</code>\u533a\u5206\u7684\u884c\u4e3a\uff0c\u63d0\u4f9b\u624b\u52bf\u4ea4\u4e92</p> </li> <li> <p>\u624b\u52bf\u68c0\u6d4b\u6267\u884c\u987a\u5e8f</p> </li> <li> <p>\u624b\u6307\u89e6\u78b0\u5c4f\u5e55\u65f6\uff0c\u89e6\u53d1MotionEvent\u4e8b\u4ef6\uff01</p> </li> <li> <p>\u8be5\u4e8b\u4ef6\u88abOnTouchListener\u76d1\u542c\uff0c\u53ef\u5728\u5b83\u7684onTouch()\u65b9\u6cd5\u4e2d\u83b7\u5f97\u8be5MotionEvent\u5bf9\u8c61</p> </li> <li>\u901a\u8fc7GestureDetector\u8f6c\u53d1MotionEvent\u5bf9\u8c61\u7ed9OnGestureListener</li> <li> <p>\u901a\u8fc7OnGestureListener\u83b7\u53d6\u76f8\u5e94\u7684\u884c\u4e3a\uff0c\u53ef\u4ee5\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406</p> </li> <li> <p>GestureListener\u63a5\u53e3\u4e2d\u7684\u51fd\u6570</p> </li> </ul> <p>\u6309\u4e0b\uff08onDown\uff09\uff1a \u521a\u521a\u624b\u6307\u63a5\u89e6\u5230\u89e6\u6478\u5c4f\u7684\u90a3\u4e00\u5239\u90a3\uff0c\u5c31\u662f\u89e6\u7684\u90a3\u4e00\u4e0b\u3002</p> <p>\u629b\u63b7\uff08onFling\uff09\uff1a \u624b\u6307\u5728\u89e6\u6478\u5c4f\u4e0a\u8fc5\u901f\u79fb\u52a8\uff0c\u5e76\u677e\u5f00\u7684\u52a8\u4f5c\u3002</p> <p>\u957f\u6309\uff08onLongPress\uff09\uff1a \u624b\u6307\u6309\u5728\u6301\u7eed\u4e00\u6bb5\u65f6\u95f4\uff0c\u5e76\u4e14\u6ca1\u6709\u677e\u5f00\u3002</p> <p>\u6eda\u52a8\uff08onScroll\uff09\uff1a \u624b\u6307\u5728\u89e6\u6478\u5c4f\u4e0a\u6ed1\u52a8\u3002</p> <p>\u6309\u4f4f\uff08onShowPress\uff09\uff1a \u624b\u6307\u6309\u5728\u89e6\u6478\u5c4f\u4e0a\uff0c\u5b83\u7684\u65f6\u95f4\u8303\u56f4\u5728\u6309\u4e0b\u8d77\u6548\uff0c\u5728\u957f\u6309\u4e4b\u524d\u3002</p> <p>\u62ac\u8d77\uff08onSingleTapUp\uff09\uff1a\u624b\u6307\u79bb\u5f00\u89e6\u6478\u5c4f\u7684\u90a3\u4e00\u5239\u90a3\u3002</p> <p><code>java   //\u539f\u59cb\u7684\u76d1\u542c\u63a5\u53e3   GestureDetector.OnGestureListener   //\u5b9e\u73b0\u4e86\u63a5\u53e3\u65b9\u4fbf\u6211\u4eec\u64cd\u4f5c   GestureDetector.SimpleOnGestureListener</code></p> <ul> <li>\u7b80\u5355\u5b9e\u73b0</li> </ul> <p>```java   public class GestureActivity extends AppCompatActivity {</p> <pre><code>  private static final String TAG = \"MyGesture\";\n  private static  final int MIN_MOVE = 200;\n\n  private MyGestureListener myGestureListener;\n  private MySimpleGestureListener mySimpleGestureListener;\n  private GestureDetector mDetector;\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n      super.onCreate(savedInstanceState);\n      setContentView(R.layout.activity_gesture);\n      myGestureListener = new MyGestureListener();\n      mySimpleGestureListener = new MySimpleGestureListener();\n      mDetector = new GestureDetector(this,mySimpleGestureListener);\n  }\n\n  @Override\n  public boolean onTouchEvent(MotionEvent event) {\n      return mDetector.onTouchEvent(event);\n  }\n\n  private class  MyGestureListener implements GestureDetector.OnGestureListener{\n\n      @Override\n      public boolean onDown(MotionEvent e) {\n          //Toast.makeText(getApplicationContext(),\"on down,\u624b\u6307\u89e6\u6478\u5230\u89e6\u6478\u5c4f\",Toast.LENGTH_SHORT).show();\n          Log.d(TAG, \"onDown:,\u624b\u6307\u89e6\u6478\u5230\u89e6\u6478\u5c4f \");\n          return false;\n      }\n\n      @Override\n      public void onShowPress(MotionEvent e) {\n          Log.d(TAG, \"onShowPress: \u5728\u957f\u6309\u4e4b\u524d\");\n      }\n\n      @Override\n      public boolean onSingleTapUp(MotionEvent e) {\n          Log.d(TAG, \"onSingleTapUp: \u624b\u6307\u79bb\u5f00\u89e6\u6478\u5c4f\");\n          return false;\n      }\n\n      @Override\n      public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {\n          Log.d(TAG, \"onScroll: \u5728\u89e6\u6478\u5c4f\u5c4f\u4e0a\u6ed1\u52a8\");\n          return false;\n      }\n\n      @Override\n      public void onLongPress(MotionEvent e) {\n          Log.d(TAG, \"onLongPress:  \u957f\u6848\u4e14\u6ca1\u6709\u677e\u5f00\");\n      }\n\n      @Override\n      public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {\n          Log.d(TAG, \"onFling: \u8fc5\u901f\u6ed1\u52a8\uff0c\u5e76\u677e\u5f00\");\n          return false;\n      }\n  }\n\n  //SimpleOnGestureListener\u7684\u4f7f\u7528\u53ef\u4ee5\u65b9\u4fbf\u6211\u4eec \u53ea\u60f3\u4f7f\u7528\u7684\u64cd\u4f5c\n  private class MySimpleGestureListener extends GestureDetector.SimpleOnGestureListener{\n\n      @Override\n      public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {\n          if(e1.getY() - e2.getY() &gt; MIN_MOVE){\n              Toast.makeText(getApplicationContext(),\"\u5411\u4e0a\u6ed1\u52a8\uff0c\u6253\u5f00\u767b\u5f55\u7684Activity\",Toast.LENGTH_SHORT).show();\n              Intent intent = new Intent();\n              intent.setData(Uri.parse(\"fangweibo://login\"));\n              startActivity(intent);\n          } else if(e2.getY() - e1.getY() &gt; MIN_MOVE){\n              Toast.makeText(getApplicationContext(),\"\u5411\u4e0b\u6ed1\u52a8\uff0c\u5173\u95edActivity\",Toast.LENGTH_SHORT).show();\n              finish();\n          }\n          return true;\n      }\n  }\n</code></pre> <p>}   ```</p>"},{"location":"Android/4%E5%A4%9A%E5%AA%92%E4%BD%93/#_2","title":"\u624b\u52bf\u6dfb\u52a0\u548c\u8bc6\u522b","text":"<p>Andorid \u63d0\u4f9b\u4e86\u76f8\u5e94\u7684Api,\u63d0\u4f9b\u4e86\u624b\u52bf\u5e93\u548c\u5bf9\u624b\u52bf\u7684\u8bc6\u522bApi.</p> <ul> <li> <p>\u76f8\u5173\u7c7b</p> </li> <li> <p>GestureLibrary\uff1a\u624b\u52bf\u5e93</p> </li> <li> <p>GestureLibraries:\u624b\u52bf\u52a0\u8f7d\u7684\u5de5\u5177\u7c7b</p> </li> <li> <p>\u76f8\u5173\u65b9\u6cd5</p> </li> <li> <p>\u52a0\u8f7d\u624b\u52bf\u5e93\u7684\u65b9\u6cd5GestureLibraries</p> <ul> <li>GestureLibraries.fromFile(File path)</li> <li>GestureLibraries.fromFile(String filepath)</li> <li>GestureLibraries.fromPrivateFile(Context context, String name)</li> <li>fromFileDescriptor(ParcelFileDescriptor pfd)</li> <li>fromRawResource(Context context, int resourceId)</li> </ul> </li> <li> <p><code>public void addGesture(String entryName, Gesture gesture)</code>\uff1a\u6dfb\u52a0\u4e00\u4e2a\u540d\u4e3aentryName\u7684\u624b\u52bf</p> <p><code>public Set&lt;String&gt; getGestureEntries ()</code>\uff1a\u83b7\u5f97\u624b\u52bf\u5e93\u4e2d\u6240\u6709\u624b\u52bf\u7684\u540d\u79f0</p> <p><code>public ArrayList&lt;Gesture&gt; getGestures (String entryName)</code>\uff1a\u83b7\u5f97entryName\u540d\u79f0\u5bf9\u5e94\u7684\u5168\u90e8\u624b\u52bf</p> <p><code>public ArrayList&lt;Prediction&gt; recognize (Gesture gesture)</code>: \u4ece\u5f53\u524d\u624b\u52bf\u5e93\u4e2d\u8bc6\u522b\u4e0egesture\u5339\u914d\u7684\u5168\u90e8\u624b\u52bf  <code>public void removeEntry (String entryName)</code>\uff1a\u5220\u9664\u624b\u52bf\u5e93\u4e2dentryName\u540d\u79f0\u5bf9\u5e94\u7684\u624b\u52bf</p> <p><code>public void removeGesture (String entryName, Gesture gesture)</code>\uff1a\u5220\u9664\u624b\u52bf\u5e93\u4e2dentryName\u548cgesture\u90fd\u5339\u914d\u7684\u624b\u52bf</p> <p><code>public abstract boolean save ()</code>\uff1a\u60f3\u624b\u52bf\u5e93\u4e2d\u6dfb\u52a0\u624b\u52bf\u6216\u4ece\u4e2d\u5220\u9664\u624b\u52bf\u540e\u8c03\u7528\u8be5\u65b9\u6cd5\u4fdd\u5b58\u624b\u52bf\u5e93</p> <p><code>public abstract boolean load()</code> Android10 \u5b58\u50a8\u6539\u53d8\u4e4b\u540e\uff0c\u65e0\u6cd5\u5728\u7528</p> </li> <li> <p>GestureOverlayView\uff1a\u624b\u52bf\u753b\u56fe\u7684View\u63a7\u4ef6</p> </li> </ul> <p><code>xml   android:gestureColor=\"@color/red\" //\u624b\u52bf\u989c\u8272   android:gestureStrokeWidth=\"5\" //\u5bbd\u5ea6   android:gestureStrokeType=\"multiple\" //\u662f\u5426\u4e00\u7b14\u5b8c\u6210</code></p> <p><code>java   //\u76d1\u542c   OnGesturePerformedListener     OnGestureListener     OnGesturingListener</code></p> <p>\u5b9e\u4f8b\uff1a</p> <pre><code>//activity_gesture.xml\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    android:gravity=\"center_horizontal\"\n    tools:context=\".GestureActivity\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"\u4e0a\u6ed1\u542f\u52a8Activity,\u4e0b\u6ed1\u5173\u95edActivity\"\n        android:textSize=\"20sp\" /&gt;\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"\u5728\u4e0b\u65b9\u753b\u51fa\u4f60\u8981\u4fdd\u5b58\u7684\u624b\u52bf\"\n        android:textSize=\"20sp\" /&gt;\n    &lt;android.gesture.GestureOverlayView\n        android:background=\"@drawable/gesture_back\"\n        android:id=\"@+id/gesture_view\"\n        android:layout_width=\"300dp\"\n        android:layout_height=\"300dp\"\n        android:gestureColor=\"@color/red\"\n        android:gestureStrokeWidth=\"5\"\n        android:gestureStrokeType=\"multiple\"/&gt;\n    &lt;android.gesture.GestureOverlayView\n        android:layout_marginTop=\"10dp\"\n        android:background=\"@drawable/gesture_back\"\n        android:id=\"@+id/gesturecomp_view\"\n        android:layout_width=\"300dp\"\n        android:layout_height=\"300dp\"\n        android:gestureColor=\"@color/red\"\n        android:gestureStrokeWidth=\"5\"\n        android:gestureStrokeType=\"multiple\"/&gt;\n&lt;/LinearLayout&gt;\n//dialog\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"50dp\"\n        android:orientation=\"horizontal\"&gt;\n        &lt;TextView\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"match_parent\"\n            android:layout_marginLeft=\"10dp\"\n            android:gravity=\"center\"\n            android:text=\"\u624b\u52bf\u540d\u79f0\uff1a\"\n            android:textSize=\"20dp\" /&gt;\n        &lt;EditText\n            android:id=\"@+id/gesture_name\"\n            android:layout_width=\"200dp\"\n            android:layout_height=\"match_parent\"\n            android:textSize=\"20dp\" /&gt;\n    &lt;/LinearLayout&gt;\n    &lt;ImageView\n        android:id=\"@+id/img_gesture\"\n        android:layout_width=\"300dp\"\n        android:layout_height=\"300dp\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre> <pre><code>package com.example.androiddemo;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.app.AlertDialog;\nimport android.app.Dialog;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.gesture.Gesture;\nimport android.gesture.GestureLibraries;\nimport android.gesture.GestureLibrary;\nimport android.gesture.GestureOverlayView;\nimport android.gesture.Prediction;\nimport android.graphics.Bitmap;\nimport android.graphics.Color;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.GestureDetector;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.view.ViewDebug;\nimport android.view.ViewGroup;\nimport android.widget.ArrayAdapter;\nimport android.widget.EditText;\nimport android.widget.ImageView;\nimport android.widget.Toast;\n\nimport com.alibaba.android.arouter.facade.annotation.Route;\nimport com.example.androiddemo.helper.Constants;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.ArrayList;\nimport java.util.zip.Inflater;\n\n@Route(path = Constants.GESTURE)\npublic class GestureActivity extends AppCompatActivity {\n\n    private static final String TAG = \"MyGesture\";\n    private static final int MIN_MOVE = 200;\n\n    private MyGestureListener myGestureListener;\n    private MySimpleGestureListener mySimpleGestureListener;\n    private GestureDetector mDetector;\n    private GestureOverlayView gestureView,gestureCompView;\n    private GestureLibrary gestureLibrary;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_gesture);\n        initView();\n    }\n\n    private void initView() {\n        myGestureListener = new MyGestureListener();\n        mySimpleGestureListener = new MySimpleGestureListener();\n        mDetector = new GestureDetector(this, mySimpleGestureListener);\n        gestureLibrary = GestureLibraries.fromFile(getPrivateFilepath());\n//        if(gestureLibrary.load()){\n//            Toast.makeText(GestureActivity.this,\"\u624b\u52bf\u5e93\u52a0\u8f7d\u6210\u529f\",Toast.LENGTH_SHORT).show();\n//        } else {\n//            Toast.makeText(GestureActivity.this,\"\u624b\u52bf\u5e93\u52a0\u8f7d\u5931\u8d25\",Toast.LENGTH_SHORT).show();\n //       }\n        gestureView = findViewById(R.id.gesture_view);\n        gestureView.addOnGesturePerformedListener(new GestureOverlayView.OnGesturePerformedListener() {\n            @Override\n            public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {\n                View view = getLayoutInflater().inflate(R.layout.dialog_save_gesture,null, false);\n                ImageView gesture_img = view.findViewById(R.id.img_gesture);\n                EditText  gesture_name = view.findViewById(R.id.gesture_name);\n                Bitmap bitmap = gesture.toBitmap(128,128,10, Color.RED);\n                gesture_img.setImageBitmap(bitmap);\n                AlertDialog dialog = new AlertDialog.Builder(GestureActivity.this)\n                        .setView(view)\n                        .setPositiveButton(\"\u4fdd\u5b58\", new DialogInterface.OnClickListener() {\n                            @Override\n                            public void onClick(DialogInterface dialog, int which) {\n                                gestureLibrary.addGesture(gesture_name.getText().toString(),gesture);\n                                gestureLibrary.save();\n                            }\n                        })\n                        .setCancelable(true)\n                        .setNegativeButton(\"\u53d6\u6d88\",null)\n                        .show();\n            }\n        });\n        gestureCompView = findViewById(R.id.gesturecomp_view);\n        gestureCompView.addOnGesturePerformedListener(new GestureOverlayView.OnGesturePerformedListener() {\n            @Override\n            public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {\n                ArrayList&lt;Prediction&gt; predictions = gestureLibrary.recognize(gesture);\n                ArrayList&lt;String&gt; result = new ArrayList&lt;String&gt;();\n                for(Prediction prd : predictions){\n                    if(prd.score &gt; 2){\n                        result.add(\"\u4e0e\u624b\u52bf\u3010\"+prd.name+\"\u3011\u5339\u914d\u5ea6\u4e3a\"+prd.score+\"%\");\n                    }\n                }\n                ArrayAdapter&lt;Object&gt; adapter = new ArrayAdapter&lt;Object&gt;(GestureActivity.this, android.R.layout.simple_dropdown_item_1line,result.toArray());\n                new AlertDialog.Builder(GestureActivity.this).setAdapter(adapter,null)\n                        .setPositiveButton(\"Ok\",null).show();\n            }\n        });\n    }\n\n    private String getPrivateFilepath(){\n        String privatefile = getExternalFilesDir(\"Caches\").toString() +\"/mygestures\";\n        File file = new File(privatefile);\n        if(!file.exists()){\n            file.mkdir();\n        }\n        return privatefile;\n    }\n\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        return mDetector.onTouchEvent(event);\n    }\n\n    private class MyGestureListener implements GestureDetector.OnGestureListener {\n\n        @Override\n        public boolean onDown(MotionEvent e) {\n            //Toast.makeText(getApplicationContext(),\"on down,\u624b\u6307\u89e6\u6478\u5230\u89e6\u6478\u5c4f\",Toast.LENGTH_SHORT).show();\n            Log.d(TAG, \"onDown:,\u624b\u6307\u89e6\u6478\u5230\u89e6\u6478\u5c4f \");\n            return false;\n        }\n\n        @Override\n        public void onShowPress(MotionEvent e) {\n            Log.d(TAG, \"onShowPress: \u5728\u957f\u6309\u4e4b\u524d\");\n        }\n\n        @Override\n        public boolean onSingleTapUp(MotionEvent e) {\n            Log.d(TAG, \"onSingleTapUp: \u624b\u6307\u79bb\u5f00\u89e6\u6478\u5c4f\");\n            return false;\n        }\n\n        @Override\n        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {\n            Log.d(TAG, \"onScroll: \u5728\u89e6\u6478\u5c4f\u5c4f\u4e0a\u6ed1\u52a8\");\n            return false;\n        }\n\n        @Override\n        public void onLongPress(MotionEvent e) {\n            Log.d(TAG, \"onLongPress:  \u957f\u6848\u4e14\u6ca1\u6709\u677e\u5f00\");\n        }\n\n        @Override\n        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {\n            Log.d(TAG, \"onFling: \u8fc5\u901f\u6ed1\u52a8\uff0c\u5e76\u677e\u5f00\");\n            return false;\n        }\n    }\n\n    //SimpleOnGestureListener\u7684\u4f7f\u7528\u53ef\u4ee5\u65b9\u4fbf\u6211\u4eec \u53ea\u60f3\u4f7f\u7528\u7684\u64cd\u4f5c\n    private class MySimpleGestureListener extends GestureDetector.SimpleOnGestureListener {\n\n        @Override\n        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {\n            if (e1.getY() - e2.getY() &gt; MIN_MOVE) {\n                Toast.makeText(getApplicationContext(), \"\u5411\u4e0a\u6ed1\u52a8\uff0c\u6253\u5f00\u767b\u5f55\u7684Activity\", Toast.LENGTH_SHORT).show();\n                Intent intent = new Intent();\n                intent.setData(Uri.parse(\"fangweibo://login\"));\n                startActivity(intent);\n            } else if (e2.getY() - e1.getY() &gt; MIN_MOVE) {\n                Toast.makeText(getApplicationContext(), \"\u5411\u4e0b\u6ed1\u52a8\uff0c\u5173\u95edActivity\", Toast.LENGTH_SHORT).show();\n                finish();\n            }\n            return true;\n        }\n    }\n}\n</code></pre>"},{"location":"Android/4%E5%A4%9A%E5%AA%92%E4%BD%93/#_3","title":"\u97f3\u9891","text":""},{"location":"Android/4%E5%A4%9A%E5%AA%92%E4%BD%93/#_4","title":"\u5f55\u97f3","text":"<ul> <li>MediaRecorder</li> </ul> <p>\u76f8\u6bd4\u8f83AudioRecord,\u662f\u4e00\u4e2a\u66f4\u4e0a\u5c42\u7684API,\u53ef\u4ee5\u76f4\u63a5\u628a\u624b\u673a\u9ea6\u514b\u98ce\u5f55\u5165\u7684\u97f3\u9891\u6570\u636e\u8fdb\u884c\u7f16\u7801\u538b\u7f29\uff08\u5982AMR\u3001MP3\u7b49\uff09\u5e76\u5b58\u6210\u6587\u4ef6\u3002</p> <p><code>java   //\u9700\u8981\u7533\u8bf7\u6743\u9650&lt;uses-permission android:name=\"android.permission.RECORD_AUDIO\" /&gt;   if (ActivityCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO)       != PackageManager.PERMISSION_GRANTED) {     if(shouldShowRequestPermissionRationale(\"\u9700\u8981\u5f55\u97f3\u6743\u9650\")){       requestPermissions(new String[]{Manifest.permission.RECORD_AUDIO},PERMISSION_REQUEST_RECORDAUDIO);     } else{       requestPermissions(new String[]{Manifest.permission.RECORD_AUDIO},PERMISSION_REQUEST_RECORDAUDIO);     }   }   @Override   public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {     switch (requestCode){       case PERMISSION_REQUEST_RECORDAUDIO:         if(grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED){           Log.d(TAG, \"onRequestPermissionsResult: android.permission.RECORD_AUDIO \u83b7\u53d6\u6210\u529f\");         } else {           Log.d(TAG, \"onRequestPermissionsResult: android.permission.RECORD_AUDIO \u83b7\u53d6\u5931\u8d25\");           this.finish();         }         break;       default:         break;     }   }   //\u5f00\u59cb\u5f55\u5236     public void onMediaPlayerStart(){           mMediaRecorder = new MediaRecorder();           audiofile = new File(getExternalFilesDir(null).toString()+File.separator+\"sound.amr\");           //\u8bbe\u7f6e\u58f0\u97f3\u6765\u6e90===\u624b\u673a\u9ea6\u514b\u98ce           mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);           //\u8bbe\u7f6e\u5f55\u97f3\u8f93\u51fa\u7684\u97f3\u9891\u6587\u4ef6\u683c\u5f0f  \u8bbe\u7f6e\u58f0\u97f3\u6765\u6e90\u548c\u8bbe\u7f6e\u97f3\u9891\u683c\u5f0f\u987a\u5e8f\u4e0d\u80fd\u53cd\uff0c\u56e0\u4e3a\u6709\u4e0d\u540c\u7684\u72b6\u6001           mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);           //\u8bbe\u7f6e\u58f0\u97f3\u7f16\u7801\u683c\u5f0f           mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);           mMediaRecorder.setAudioEncodingBitRate(100);           mMediaRecorder.setAudioSamplingRate(16);           if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {               mMediaRecorder.setOutputFile(audiofile.getAbsoluteFile());           }           try {               mMediaRecorder.prepare();           } catch (IOException e) {               e.printStackTrace();           }           //\u5f00\u59cb\u5f55\u97f3           mMediaRecorder.start();       }   //\u7ed3\u675f\u5f55\u5236    if(mMediaRecorder!=null &amp;&amp; audiofile != null &amp;&amp; audiofile.exists()){               mMediaRecorder.stop();               mMediaRecorder.release();               mMediaRecorder = null;           }</code></p> <ul> <li>AudioRecord</li> </ul> <p>\u66f4\u63a5\u8fd1\u5e95\u5c42\uff0c\u80fd\u591f\u66f4\u52a0\u81ea\u7531\u7075\u6d3b\u5730\u63a7\u5236\uff0c\u53ef\u4ee5\u5f97\u5230\u539f\u59cb\u7684\u4e00\u5e27\u5e27PCM\u97f3\u9891\u6570\u636e</p>"},{"location":"Android/4%E5%A4%9A%E5%AA%92%E4%BD%93/#_5","title":"\u64ad\u653e\u97f3\u9891","text":"<ul> <li> <p>AudioTrack</p> </li> <li> <p>MediaPlayer</p> </li> </ul> <p><code>java   //\u5f00\u59cb\u64ad\u653e prepare\u53ef\u4ee5\u653e\u5230\u5f02\u6b65   if(mMediaPlayer != null &amp;&amp; audiofile.exists()){     mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);     try {       mMediaPlayer.setDataSource(getApplicationContext(), Uri.fromFile(audiofile));       mMediaPlayer.prepare();     } catch (IOException e) {       e.printStackTrace();     }     mMediaPlayer.start();   }   //\u7ec8\u6b62\u64ad\u653e    mMediaPlayer.stop();   mMediaPlayer.release();   mMediaPlayer = null;</code></p>"},{"location":"Android/5Android%20%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6%E2%80%94%E2%80%94Handler/","title":"5\u3001Android \u7684\u6d88\u606f\u4f20\u9012\u673a\u5236\u2014\u2014Handler\u673a\u5236","text":""},{"location":"Android/5Android%20%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6%E2%80%94%E2%80%94Handler/#1","title":"1.\u6982\u8ff0","text":"<pre><code>Android\u7684\u6d88\u606f\u673a\u5236\u662f\u901a\u8fc7 Handler \u7684\u8fd0\u884c\u673a\u5236\u6765\u5b9e\u73b0\u5c06\u4e00\u4e2a\u4efb\u52a1\u5207\u6362\u5230 Handler \u6240\u5728\u7684\u7ebf\u7a0b\u4e2d\u53bb\u6267\u884c\u3002Handler\u4f5c\u4e3a\u6d88\u606f\u673a\u5236\u7684\u4e0a\u5c42\u63a5\u53e3\uff0cHandler\u5c06\u4e00\u4e2a\u4efb\u52a1\u7684\u6d88\u606f\u53d1\u9001\u5230Handler\u6240\u5728\u7684\u7ebf\u7a0b\u4e2d\u53bb\u6267\u884c\u5bf9\u6d88\u606f\u7684\u5904\u7406\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u548cHandler\u6253\u4ea4\u9053\u5c31\u53ef\u4ee5\uff0c\u4f46\u662f\u5b9e\u9645\u4e0aHandler\u9700\u8981Looper\u3001MessageQueue\u548cMessage\u6765\u652f\u6301\u3002\n</code></pre> <p>Android\u6709\u5927\u91cf\u7684\u6d88\u606f\u9a71\u52a8\u65b9\u5f0f\u6765\u8fdb\u884c\u4ea4\u4e92\uff0c\u6bd4\u5982Android\u7684\u56db\u5251\u5ba2<code>Activity</code>, <code>Service</code>, <code>Broadcast</code>, <code>ContentProvider</code>\u7684\u542f\u52a8\u8fc7\u7a0b\u7684\u4ea4\u4e92\uff0c\u90fd\u79bb\u4e0d\u5f00\u6d88\u606f\u673a\u5236\uff0cAndroid\u67d0\u79cd\u610f\u4e49\u4e0a\u4e5f\u53ef\u4ee5\u8bf4\u6210\u662f\u4e00\u4e2a\u4ee5\u6d88\u606f\u9a71\u52a8\u7684\u7cfb\u7edf\u3002</p> <p>\u6d88\u606f\u673a\u5236\u6d89\u53caMessageQueue/Message/Looper/Handler\u8fd94\u4e2a\u7c7b\u3002</p> <p>\u4e3b\u8981\u76ee\u7684:\u591a\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u66f4\u65b0UI\u7684\u540c\u65f6 \u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168</p>"},{"location":"Android/5Android%20%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6%E2%80%94%E2%80%94Handler/#2","title":"2.\u76ee\u6807","text":"<ul> <li> <p>\u4e86\u89e3Handler\u7684\u539f\u7406</p> </li> <li> <p>Handler\u662f\u5982\u4f55\u5b9e\u73b0\u7ebf\u7a0b\u5207\u6362\u7684</p> </li> <li> <p>Handler\u5982\u4f55\u4fdd\u8bc1\u591a\u7ebf\u7a0b\u5b89\u5168</p> </li> </ul> <p>\u901a\u8fc7MessageQueue\u7684enqueueMessage()\u548cnext()\u4fdd\u8bc1\u4e86\u5165\u961f\u548c\u51fa\u961f\u7684\u7ebf\u7a0b\u5b89\u5168</p> <ul> <li>Handler\u5982\u4f55\u4fdd\u8bc1\u4e3b\u7ebf\u7a0bloop()\u4e0d\u4f1a\u5728\u6b7b\u5faa\u73af\u4e2d\u5361\u6b7b\uff1f</li> </ul> <p>\u901a\u8fc7loop()\u7684\u6b7b\u5faa\u73af\u4fdd\u8bc1\u4e86\u4e3b\u7ebf\u7a0b\u4e0d\u4f1a\u9000\u51fa\uff0c\u4e0d\u662f\u7b80\u5355\u7684\u6b7b\u5faa\u73af\uff0c\u5f53\u6ca1\u6709\u6d88\u606f\u7684\u65f6\u5019\u4f1a\u4e3b\u52a8\u8fdb\u5165\u7ebf\u7a0b\u963b\u585e\uff0c\u91ca\u653eCPU</p> <p>\u53d1\u751fANR\u7684\u539f\u56e0\u662f\u56e0\u4e3a\u6ca1\u6709\u53ca\u65f6\u5904\u7406MessageQueue\u7684\u4e8b\u4ef6\u9020\u6210\u7684\uff0c\u771f\u6b63\u4f1a\u5361\u6b7b\u4e3b\u7ebf\u7a0b\u7684\u64cd\u4f5c\u662f\u5728\u56de\u8c03\u65b9\u6cd5onCreate/onStart/onResume\u7b49\u64cd\u4f5c\u65f6\u95f4\u8fc7\u957f\uff0c\u4f1a\u5bfc\u81f4\u6389\u5e27\uff0c\u751a\u81f3\u53d1\u751fANR\uff0clooper.loop\u672c\u8eab\u4e0d\u4f1a\u5bfc\u81f4\u5e94\u7528\u5361\u6b7b\u3002</p> <ul> <li>\u4e3b\u7ebf\u7a0b\u6b7b\u5faa\u73af\uff0c\u5982\u4f55\u4fdd\u8bc1\u5176\u4ed6\u4e8b\u52a1\u8fdb\u884c\u5904\u7406\u7684</li> </ul> <p>\u5728ActivityThread\u5f00\u4e86\u4e00\u4e2a\u7ebf\u7a0b\u53bb\u5904\u7406\u5176\u4ed6\u4e8b\u52a1\u3002</p>"},{"location":"Android/5Android%20%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6%E2%80%94%E2%80%94Handler/#3handler","title":"3.Handler\u6e90\u7801\u89e3\u6790","text":"<ul> <li>Message </li> </ul> <p>\u6d88\u606f\u5206\u4e3a\u786c\u4ef6\u4ea7\u751f\u7684\u6d88\u606f(\u5982\u6309\u94ae\u3001\u89e6\u6478)\u548c\u8f6f\u4ef6\u751f\u6210\u7684\u6d88\u606f,\u6d88\u606f\u673a\u5236\u4e2d\u4e3b\u8981\u4f20\u9012\u4fe1\u606f\u7684\u8f7d\u4f53\u3002</p> <ul> <li> <p>\u4e3b\u8981\u5c5e\u6027</p> <ul> <li>What,arg1,arg2,obj:\u7528\u6765\u5b58\u50a8\u4fe1\u606f</li> <li>target:\u7528\u6765\u4fdd\u5b58message\u5bf9\u5e94\u7684handler,\u6d88\u606f\u5206\u53d1\u65f6\u901a\u8fc7target\u627e\u5230\u5bf9\u5e94\u7684handler\u3002</li> <li>callback:\u7528\u6765\u5b58\u50a8runable()</li> <li>next:\u7528\u6765\u5b58\u50a8\u4e0b\u4e00\u6761\u6d88\u606f\uff0cLoop()\u5faa\u73af\u65f6\u3001\u6d88\u606f\u7f13\u5b58\u90fd\u4f1a\u4f7f\u7528\u5230\u3002</li> <li>when:\u7528\u6765\u5b58\u50a8\u6d88\u606f\u7684\u5ef6\u8fdf\u65f6\u95f4\uff0csendMessage\u65f6\u4f1a\u7ed9\u5176\u8d4b\u503c\u3002</li> </ul> </li> <li> <p>\u4e3a\u4e86\u51cf\u5c11\u6d88\u606f\u7684\u4ea7\u751f\uff0c\u63d0\u9ad8\u6d88\u606f\u7684\u5229\u7528\u7387\uff0c\u5efa\u8bae\u4f7f\u7528\u5982\u4e0b\u7684\u65b9\u5f0f\u751f\u6210\u6d88\u606f:</p> <p><code>java //Message\u65b9\u6cd5 Message.obtain()\u53ca\u5176\u91cd\u8f7d\u65b9\u6cd5  public static Message obtain() {         synchronized (sPoolSync) {             if (sPool != null) {                 Message m = sPool;                 sPool = m.next;                 m.next = null;                 m.flags = 0; // clear in-use flag                 sPoolSize--;                 return m;             }         }         return new Message();     } //handler handler#obtainMessage()\u53ca\u5176\u91cd\u8f7d\u65b9\u6cd5  public final Message obtainMessage()     {         return Message.obtain(this);     }</code></p> <p>\u4e3b\u8981\u662f\u56e0\u4e3a\u5728message#recycleUnchecked()\uff0c\u4f1a\u5728MessageQueue||Looper\u4e2d\u5c06\u4f7f\u7528\u5b8c\u7684\u6d88\u606f\u56de\u6536\u5230\u6d88\u606f\u7f13\u5b58\u4e2d\u3002</p> <p><code>java  @UnsupportedAppUsage     void recycleUnchecked() {         // Mark the message as in use while it remains in the recycled object pool.         // Clear out all other details.         flags = FLAG_IN_USE;         what = 0;         arg1 = 0;         arg2 = 0;         obj = null;         replyTo = null;         sendingUid = UID_NONE;         workSourceUid = UID_NONE;         when = 0;         target = null;         callback = null;         data = null;       //MAX_POOL_SIZE:50 \u5728\u8fd9\u91cc\u8fdb\u884c\u56de\u6536         synchronized (sPoolSync) {             if (sPoolSize &lt; MAX_POOL_SIZE) {                 next = sPool;                 sPool = this;                 sPoolSize++;             }         }     }</code></p> </li> <li> <p>Handler</p> </li> </ul> <p>\u6d88\u606f\u8f85\u52a9\u7c7b\uff0c\u4e3b\u8981\u529f\u80fd\u5411\u6d88\u606f\u6c60\u53d1\u9001\u5404\u79cd\u6d88\u606f\u4e8b\u4ef6(<code>Handler.sendMessage</code>)\u548c\u5904\u7406\u76f8\u5e94\u6d88\u606f\u4e8b\u4ef6(<code>Handler.handleMessage</code>)\uff1b4.\u4e3b\u7ebf\u7a0b\u7684handler\u3002</p> <ul> <li> <p>\u4e3b\u8981\u5c5e\u6027</p> <ul> <li>mLooper\uff0c\u901a\u8fc7ThreadLocal\u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u7684Looper</li> <li>mQueue\uff0c\u4eceLooper\u4e2d\u83b7\u53d6MessageQueue</li> <li>mCallback\uff0c\u63a5\u53e3\u56de\u8c03\uff0c\u7528\u6765\u5904\u7406Message</li> <li>mAsynchronous\uff0c\u662f\u5426\u662f\u5f02\u6b65\u6d88\u606f\uff0c\u4e3b\u8981\u662f\u540c\u6b65\u5c4f\u969c\u4f7f\u7528</li> </ul> </li> <li> <p>\u4e3b\u8981\u65b9\u6cd5</p> <ul> <li>\u53d1\u9001\u4fe1\u606f </li> </ul> <p>\u4e3b\u8981\u6709sendMessage\u548cPost\u65b9\u6cd5\uff0cpost\u662f\u5c06runable\u5b58\u5230Message\u4e2d\uff0c\u7136\u540e\u8c03\u7528sendMessage.</p> <p></p> <ul> <li>\u8fdb\u5165\u6d88\u606f\u961f\u5217</li> </ul> <p>\u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\u6240\u6709\u7684\u6d88\u606f\u6700\u540e\u90fd\u4f1a\u901a\u8fc7enqueueMessage\u8fdb\u5230\u6d88\u606f\u961f\u5217</p> <p>```java  private boolean enqueueMessage(@NonNull MessageQueue queue, @NonNull Message msg,             long uptimeMillis) {         msg.target = this;         msg.workSourceUid = ThreadLocalWorkSource.getUid();</p> <pre><code>    if (mAsynchronous) {\n        msg.setAsynchronous(true);\n    }\n    //\u6700\u540e\u4f1a\u8c03\u7528\u5230Queue\u7684equeueMessage\n    return queue.enqueueMessage(msg, uptimeMillis);\n}\n</code></pre> <p>```</p> <ul> <li>\u5904\u7406\u6d88\u606f </li> </ul> <p>\u4f18\u5148\u7ea7\uff1aMessage.callback &gt; Handler.callback &gt; Handler#handleMessage()</p> <p><code>java public void dispatchMessage(@NonNull Message msg) {         if (msg.callback != null) {             handleCallback(msg);         } else {             if (mCallback != null) {                 if (mCallback.handleMessage(msg)) {                     return;                 }             }             handleMessage(msg);         }     }</code></p> </li> <li> <p>MessageQueue</p> </li> </ul> <p>\u6d88\u606f\u961f\u5217\u7684\u4e3b\u8981\u529f\u80fd\u5411\u6d88\u606f\u6c60\u6295\u9012\u6d88\u606f(<code>MessageQueue.enqueueMessage</code>)\u548c\u53d6\u8d70\u6d88\u606f\u6c60\u7684\u6d88\u606f(<code>MessageQueue.next</code>)\uff1bMessageQueue\u662f\u6d88\u606f\u673a\u5236\u7684Java\u5c42\u548cC++\u5c42\u7684\u8fde\u63a5\u7ebd\u5e26\uff0c\u5927\u90e8\u5206\u6838\u5fc3\u65b9\u6cd5\u90fd\u4ea4\u7ed9native\u5c42\u6765\u5904\u7406\u3002</p> <ul> <li> <p>\u521b\u5efa\u6d88\u606f\u961f\u5217\u7684\u65f6\u673a\uff0cLooper\u521b\u5efa\u65f6\uff0c\u540c\u65f6\u4f1a\u521b\u5efaMessageQueue</p> </li> <li> <p>\u4e3b\u8981\u5c5e\u6027</p> <ul> <li>mQuitAllowed :\u662f\u5426\u5141\u8bb8\u6d88\u606f\u961f\u5217\u9000\u51fa,\u4e3b\u8981\u662f\u521b\u5efa\u6d88\u606f\u961f\u5217\u65f6\u4f7f\u7528\uff0cmQuitAllowed\u4e3afalse\u65f6\u53ea\u5b58\u5728\u4e3b\u7ebf\u7a0b</li> <li>mQuitting: \u662f\u5426\u53ef\u4ee5\u9000\u51fa</li> </ul> </li> <li> <p>\u4e3b\u8981\u65b9\u6cd5</p> <ul> <li>\u8fdb\u5165\u6d88\u606f\u961f\u5217 enqueuemessage() \u5173\u952e\u65b9\u6cd5</li> </ul> <p>```java  boolean enqueueMessage(Message msg, long when) {         //\u8fdb\u961f\u7684Message\u5fc5\u987b\u6301\u6709handler             if (msg.target == null) {             throw new IllegalArgumentException(\"Message must have a target.\");         }                 //\u540c\u6b65\u65b9\u6cd5 \u4fdd\u8bc1\u4e86\u591a\u7ebf\u7a0b\u4e0b\u7684\u7ebf\u7a0b\u5b89\u5168         synchronized (this) {             if (msg.isInUse()) {                 throw new IllegalStateException(msg + \" This message is already in use.\");             }                         //\u82e5\u662f\u9009\u62e9\u4e86\u9000\u51fa\uff0c\u65b0\u5efa\u7684\u6d88\u606f\u4e0d\u4f1a\u518d\u5165\u961f\uff0c\u5e76\u4e14\u4f1a\u88ab\u9500\u6bc1             if (mQuitting) {                 IllegalStateException e = new IllegalStateException(                         msg.target + \" sending message to a Handler on a dead thread\");                 Log.w(TAG, e.getMessage(), e);                 msg.recycle();                 return false;             }</p> <pre><code>        msg.markInUse();\n      //Message\u8bbe\u7f6e\u4e86\u5ef6\u8fdf\u65f6\u95f4 when\n        msg.when = when;\n        Message p = mMessages;\n        boolean needWake;\n      //\u4f1a\u6839\u636ewhen\u5c06\u6d88\u606f\u5165\u961f\u5230\u5408\u9002\u7684\u4f4d\u7f6e\n        if (p == null || when == 0 || when &lt; p.when) {\n            // New head, wake up the event queue if blocked.\n            msg.next = p;\n            mMessages = msg;\n            needWake = mBlocked; //mBlocked\uff1a\u662f\u5426\u7ebf\u7a0b\u963b\u585e\n        } else {\n            // Inserted within the middle of the queue.  Usually we don't have to wake\n            // up the event queue unless there is a barrier at the head of the queue\n            // and the message is the earliest asynchronous message in the queue.\n            needWake = mBlocked &amp;&amp; p.target == null &amp;&amp; msg.isAsynchronous();\n            Message prev;\n            for (;;) {\n                prev = p;\n                p = p.next;\n                if (p == null || when &lt; p.when) {\n                    break;\n                }\n                if (needWake &amp;&amp; p.isAsynchronous()) {\n                    needWake = false;\n                }\n            }\n            msg.next = p; // invariant: p == prev.next\n            prev.next = msg;\n        }\n\n        // We can assume mPtr != 0 because mQuitting is false.\n      //\u4f1a\u5524\u9192\u963b\u585e\u7684\u7ebf\u7a0b\n        if (needWake) {\n            nativeWake(mPtr);\n        }\n    }\n    return true;\n}\n</code></pre> <p>```</p> <ul> <li>next()</li> </ul> <p>```java Message next() {         // Return here if the message loop has already quit and been disposed.         // This can happen if the application tries to restart a looper after quit         // which is not supported. \u5f53App\u91cd\u65b0\u542f\u52a8\u5df2\u7ecf\u9000\u51fa\u7684Loop\u65f6\uff0c\u76f4\u63a5\u8fd4\u56denull         final long ptr = mPtr;         if (ptr == 0) {             return null;         }</p> <pre><code>    int pendingIdleHandlerCount = -1; // -1 only during first iteration \u7a7a\u95f2\u8fdb\u7a0b\u7684\u6e05\u7406\n    int nextPollTimeoutMillis = 0; //\u963b\u585e\u7684\u65f6\u95f4 \u662f\u5728Native\u4e2d\u8fdb\u884c\u7684\n    //for\u5faa\u73af\u62ff\u5230\u4e0b\u4e00\u4e2aMessage \u6b64\u5904\u4f1a\u963b\u585e\n    for (;;) {\n        if (nextPollTimeoutMillis != 0) {\n            Binder.flushPendingCommands();\n        }\n\n        //\u963b\u585e\u7ebf\u7a0b\n        nativePollOnce(ptr, nextPollTimeoutMillis);\n\n       //\u540c\u6b65\u65b9\u6cd5 \u548cenqueueumessage \u4fdd\u8bc1\u4e86\u7ebf\u7a0b\u5b89\u5168 \n        synchronized (this) {\n            // Try to retrieve the next message.  Return if found.\n            final long now = SystemClock.uptimeMillis();\n            Message prevMsg = null;\n            Message msg = mMessages;\n            if (msg != null &amp;&amp; msg.target == null) {\n                // Stalled by a barrier.  Find the next asynchronous message in the queue.\n              //\u5f53target\u4e3anull\u65f6\uff0c\u8bf4\u660e\u53d1\u51fa\u4e86\u6d88\u606f\u5c4f\u969c\uff0c\u4f1a\u4f18\u5148\u6267\u884c\u5f02\u6b65\u6d88\u606f\n                do {\n                    prevMsg = msg;\n                    msg = msg.next;\n                } while (msg != null &amp;&amp; !msg.isAsynchronous());\n            }\n            if (msg != null) {\n                if (now &lt; msg.when) {\n                    // Next message is not ready.  Set a timeout to wake up when it is ready.\n                    //\u5f53\u4e0b\u4e00\u4e2a\u6d88\u606f\u6ca1\u6709\u5230\u5ef6\u8fdf\u65f6\u95f4\u65f6\uff0c\u4f1a\u963b\u585e\u7ebf\u7a0b\n                    nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE);\n                } else {\n                    // Got a message.\n                    mBlocked = false;\n                    if (prevMsg != null) {\n                        prevMsg.next = msg.next;\n                    } else {\n                        mMessages = msg.next;\n                    }\n                    msg.next = null;\n                    if (DEBUG) Log.v(TAG, \"Returning message: \" + msg);\n                    msg.markInUse();\n                    return msg;\n                }\n            } else {\n                // No more messages.\n                nextPollTimeoutMillis = -1;\n            }\n\n            // Process the quit message now that all pending messages have been handled.\n          //\u82e5\u6709\u9000\u51fa\u6807\u8bb0\uff0c\u4f1a\u8fd4\u56denull\u7684message\n            if (mQuitting) {\n                dispose();\n                return null;\n            }\n\n            // If first time idle, then get the number of idlers to run.\n            // Idle handles only run if the queue is empty or if the first message\n            // in the queue (possibly a barrier) is due to be handled in the future.\n\n          //\u6700\u540e\u4f1a\u6267\u884c\u5bf9MessageQueue\u7684\u6e05\u7406\u5de5\u4f5c\n            if (pendingIdleHandlerCount &lt; 0\n                    &amp;&amp; (mMessages == null || now &lt; mMessages.when)) {\n                pendingIdleHandlerCount = mIdleHandlers.size();\n            }\n            if (pendingIdleHandlerCount &lt;= 0) {\n                // No idle handlers to run.  Loop and wait some more.\n                mBlocked = true;\n                continue;\n            }\n\n            if (mPendingIdleHandlers == null) {\n                mPendingIdleHandlers = new IdleHandler[Math.max(pendingIdleHandlerCount, 4)];\n            }\n            mPendingIdleHandlers = mIdleHandlers.toArray(mPendingIdleHandlers);\n        }\n\n        // Run the idle handlers.\n        // We only ever reach this code block during the first iteration.\n        for (int i = 0; i &lt; pendingIdleHandlerCount; i++) {\n            final IdleHandler idler = mPendingIdleHandlers[i];\n            mPendingIdleHandlers[i] = null; // release the reference to the handler\n\n            boolean keep = false;\n            try {\n                keep = idler.queueIdle();\n            } catch (Throwable t) {\n                Log.wtf(TAG, \"IdleHandler threw exception\", t);\n            }\n\n            if (!keep) {\n                synchronized (this) {\n                    mIdleHandlers.remove(idler);\n                }\n            }\n        }\n\n        // Reset the idle handler count to 0 so we do not run them again.\n        pendingIdleHandlerCount = 0;\n\n        // While calling an idle handler, a new message could have been delivered\n        // so go back and look again for a pending message without waiting.\n        nextPollTimeoutMillis = 0;\n    }\n}\n</code></pre> <p>```</p> <ul> <li>quit(boolean safe) \uff1a\u662f\u5426\u53ef\u4ee5\u9000\u51fa\uff0csafe\u4e3atrue,\u6e05\u7a7a\u5df2\u5206\u53d1\u8fc7\u6216\u8005\u963b\u585e\u7684\u6d88\u606f\uff0csafe\u4e3afalse\u5168\u90e8\u6e05\u7a7a</li> </ul> <p>```java  void quit(boolean safe) {         if (!mQuitAllowed) {             throw new IllegalStateException(\"Main thread not allowed to quit.\");         }</p> <pre><code>    synchronized (this) {\n        if (mQuitting) {\n            return;\n        }\n        mQuitting = true;\n\n        if (safe) {\n            removeAllFutureMessagesLocked();\n        } else {\n            removeAllMessagesLocked();\n        }\n\n        // We can assume mPtr != 0 because mQuitting was previously false.\n        //\u5524\u9192\u6d88\u606f\u961f\u5217\n        nativeWake(mPtr);\n    }\n}\n</code></pre> <p>```</p> </li> <li> <p>Looper</p> </li> </ul> <p>\u4e0d\u65ad\u5faa\u73af\u6267\u884c(<code>Looper.loop</code>)\uff0c\u6309\u5206\u53d1\u673a\u5236\u5c06\u6d88\u606f\u5206\u53d1\u7ed9\u76ee\u6807\u5904\u7406\u8005\u3002</p> <ul> <li>Looper\u7684\u65b0\u5efa</li> </ul> <p><code>java   //\u4e3b\u7ebf\u7a0bLooper\u7684\u5efa\u7acb    public static void prepareMainLooper() {           prepare(false);           synchronized (Looper.class) {               if (sMainLooper != null) {                   throw new IllegalStateException(\"The main Looper has already been prepared.\");               }               sMainLooper = myLooper();           }       }   //\u5176\u4ed6\u7ebf\u7a0bLooper\u7684\u5efa\u7acb Looper.prepare()   private static void prepare(boolean quitAllowed) {           if (sThreadLocal.get() != null) {               throw new RuntimeException(\"Only one Looper may be created per thread\");           }           sThreadLocal.set(new Looper(quitAllowed));       }   //\u533a\u522b\uff1a\u4e3b\u7ebf\u7a0b\u4e0d\u5141\u8bb8Looper\u9000\u51fa   //\u4f1a\u65b0\u5efaMessageQueue\uff0c\u5e76\u7ed1\u5b9a\u7ebf\u7a0b\u548cLooper    private Looper(boolean quitAllowed) {           mQueue = new MessageQueue(quitAllowed);           mThread = Thread.currentThread();       }</code></p> <ul> <li> <p>\u4e3b\u8981\u5c5e\u6027</p> <ul> <li>mQueue</li> <li>sMainLooper \u4e3b\u7ebf\u7a0b\u7684Looper</li> </ul> </li> <li> <p>\u4e3b\u8981\u65b9\u6cd5</p> <ul> <li>loop()</li> </ul> <p>```java    public static void loop() {           final Looper me = myLooper();           if (me == null) {               throw new RuntimeException(\"No Looper; Looper.prepare() wasn't called on this thread.\");           }           if (me.mInLoop) {               Slog.w(TAG, \"Loop again would have the queued messages be executed\"                       + \" before this one completed.\");           }</p> <pre><code>      me.mInLoop = true;\n      final MessageQueue queue = me.mQueue;\n\n      // Make sure the identity of this thread is that of the local process,\n      // and keep track of what that identity token actually is.\n      Binder.clearCallingIdentity();\n      final long ident = Binder.clearCallingIdentity();\n\n      // Allow overriding a threshold with a system prop. e.g.\n      // adb shell 'setprop log.looper.1000.main.slow 1 &amp;&amp; stop &amp;&amp; start'\n      final int thresholdOverride =\n              SystemProperties.getInt(\"log.looper.\"\n                      + Process.myUid() + \".\"\n                      + Thread.currentThread().getName()\n                      + \".slow\", 0);\n\n      boolean slowDeliveryDetected = false;\n\n      for (;;) {\n          Message msg = queue.next(); // might block \u8fd9\u91cc\u53ef\u80fd\u4f1a\u963b\u585e\n          //\u9000\u51fa\u540emessage\u4f1a\u4e3anull,\u6b64\u65f6Loop\u4f1a\u9000\u51fa\u5faa\u73af\n          if (msg == null) {\n              // No message indicates that the message queue is quitting.\n              return;\n          }\n\n          // This must be in a local variable, in case a UI event sets the logger\n          final Printer logging = me.mLogging;\n          if (logging != null) {\n              logging.println(\"&gt;&gt;&gt;&gt;&gt; Dispatching to \" + msg.target + \" \" +\n                      msg.callback + \": \" + msg.what);\n          }\n          // Make sure the observer won't change while processing a transaction.\n          final Observer observer = sObserver;\n\n          final long traceTag = me.mTraceTag;\n          long slowDispatchThresholdMs = me.mSlowDispatchThresholdMs;\n          long slowDeliveryThresholdMs = me.mSlowDeliveryThresholdMs;\n          if (thresholdOverride &gt; 0) {\n              slowDispatchThresholdMs = thresholdOverride;\n              slowDeliveryThresholdMs = thresholdOverride;\n          }\n          final boolean logSlowDelivery = (slowDeliveryThresholdMs &gt; 0) &amp;&amp; (msg.when &gt; 0);\n          final boolean logSlowDispatch = (slowDispatchThresholdMs &gt; 0);\n\n          final boolean needStartTime = logSlowDelivery || logSlowDispatch;\n          final boolean needEndTime = logSlowDispatch;\n\n          if (traceTag != 0 &amp;&amp; Trace.isTagEnabled(traceTag)) {\n              Trace.traceBegin(traceTag, msg.target.getTraceName(msg));\n          }\n\n          final long dispatchStart = needStartTime ? SystemClock.uptimeMillis() : 0;\n          final long dispatchEnd;\n          Object token = null;\n          if (observer != null) {\n              token = observer.messageDispatchStarting();\n          }\n          long origWorkSource = ThreadLocalWorkSource.setUid(msg.workSourceUid);\n          try {\n            //\u91cd\u70b9\u65b9\u6cd5\uff0c\u4f1a\u5206\u53d1\u5230message\u7684handler\n              msg.target.dispatchMessage(msg);\n              if (observer != null) {\n                  observer.messageDispatched(token, msg);\n              }\n              dispatchEnd = needEndTime ? SystemClock.uptimeMillis() : 0;\n          } catch (Exception exception) {\n              if (observer != null) {\n                  observer.dispatchingThrewException(token, msg, exception);\n              }\n              throw exception;\n          } finally {\n              ThreadLocalWorkSource.restore(origWorkSource);\n              if (traceTag != 0) {\n                  Trace.traceEnd(traceTag);\n              }\n          }\n          if (logSlowDelivery) {\n              if (slowDeliveryDetected) {\n                  if ((dispatchStart - msg.when) &lt;= 10) {\n                      Slog.w(TAG, \"Drained\");\n                      slowDeliveryDetected = false;\n                  }\n              } else {\n                  if (showSlowLog(slowDeliveryThresholdMs, msg.when, dispatchStart, \"delivery\",\n                          msg)) {\n                      // Once we write a slow delivery log, suppress until the queue drains.\n                      slowDeliveryDetected = true;\n                  }\n              }\n          }\n          if (logSlowDispatch) {\n              showSlowLog(slowDispatchThresholdMs, dispatchStart, dispatchEnd, \"dispatch\", msg);\n          }\n\n          if (logging != null) {\n              logging.println(\"&lt;&lt;&lt;&lt;&lt; Finished to \" + msg.target + \" \" + msg.callback);\n          }\n\n          // Make sure that during the course of dispatching the\n          // identity of the thread wasn't corrupted.\n          final long newIdent = Binder.clearCallingIdentity();\n          if (ident != newIdent) {\n              Log.wtf(TAG, \"Thread identity changed from 0x\"\n                      + Long.toHexString(ident) + \" to 0x\"\n                      + Long.toHexString(newIdent) + \" while dispatching to \"\n                      + msg.target.getClass().getName() + \" \"\n                      + msg.callback + \" what=\" + msg.what);\n          }\n\n          msg.recycleUnchecked();\n      }\n  }\n</code></pre> <p>```</p> <ul> <li>quit() &amp;&amp; quitsafely():\u4f1a\u8c03\u7528MessageQueue\u7684\u65b9\u6cd5,\u4fdd\u8bc1\u4e86\u9000\u51fa\u540e\u6d88\u606f\u961f\u5217\u4e3a\u7a7a\uff0c\u4e14next\u83b7\u53d6\u4e0d\u5230\u6d88\u606f</li> </ul> </li> <li> <p>\u56db\u8005\u5173\u7cfb</p> </li> </ul> <p>Handler :Looper:MessageQueue:Thread  1:1:1:1</p> <p>Handler:Message 1:N</p> <ul> <li>\u6d88\u606f\u673a\u5236\u8fd0\u884c\u7684\u539f\u7406</li> </ul> <p></p> <p>\u5728\u5b50\u7ebf\u7a0b\u4e2d\u751f\u6210Message,\u901a\u8fc7Looper\u5206\u53d1\u5230\u4e3b\u7ebf\u7a0b\u4e2d\u8ba9Handler\u53bb\u5904\u7406.</p> <ul> <li>Handler \u66f4\u65b0UI\u7684\u539f\u7406</li> </ul> <p>\u200b        \u73b0\u6709\u7684Handler\u4ecb\u7ecd\u4e66\u7c4d\u4e2d\u5927\u591a\u8bf4\u662f\u4e3a\u4e86\u5b9e\u73b0\u5728\u975eUI\u7ebf\u7a0b\u66f4\u65b0\u754c\u9762UI\uff0c\u4f46\u662fHandler \u5374\u4e0d\u662f\u4ec5\u4ec5\u4e13\u95e8\u7528\u6765\u66f4\u65b0UI\u7684\u3002\u770b\u4e00\u4e0b\u5de5\u4f5c\u7ebf\u7a0b\u66f4\u65b0UI\u7684\u8fc7\u7a0b\uff1a\u5728 UI \u7ebf\u7a0b\u521b\u5efa\u4e00\u4e2a <code>Handler</code> \u5bf9\u8c61\uff0c\u5728\u5b50\u7ebf\u7a0b\u4e2d\u4f7f\u7528\u8fd9\u4e2a <code>Handler</code> \u5bf9\u8c61\u5c06\u8981\u663e\u793a\u7684\u6570\u636e\u5207\u6362\u5230 <code>Handler</code> \u6240\u5728\u7684 UI \u7ebf\u7a0b\uff0c\u518d\u64cd\u4f5c UI \u63a7\u4ef6\u6765\u663e\u793a\u6570\u636e\u3002</p> <p>\u5b9e\u9645\u4e0aHandler\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u4e3a\u4e86\u5b9e\u73b0\u7ebf\u7a0b\u7684\u8c03\u5ea6\uff0c\u5207\u6362\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u4eceUI\u7ebf\u7a0b\u5207\u6362\u5230\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u4ece\u5de5\u4f5c\u7ebf\u7a0b\u5207\u6362\u5230UI\u7ebf\u7a0b\u3002</p> <p>\u200b       \u90a3\u4e48\u4e3a\u4ec0\u4e48\u5b50\u7ebf\u7a0b\u4e0d\u80fd\u66f4\u65b0UI\u5462\uff1f\u5b9e\u9645\u4e0a\u5b50\u7ebf\u7a0b\u662f\u53ef\u4ee5\u66f4\u65b0UI\u7684\uff0c\u4f46\u662f\u66f4\u65b0UI\u4f7f\u7528\u7684\u662f\u5355\u7ebf\u7a0b\u6a21\u578b\uff0c\u5373\u54ea\u4e2a\u7ebf\u7a0b\u521b\u5efa\u7684UI\uff0c\u54ea\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u4fee\u6539\uff0cAndroid \u7684 UI \u63a7\u4ef6\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u5982\u679c\u5728\u591a\u7ebf\u7a0b\u4e2d\u5e76\u53d1\u8bbf\u95ee\u53ef\u80fd\u4f1a\u5bfc\u81f4 UI \u63a7\u4ef6\u5904\u4e8e\u4e0d\u53ef\u9884\u671f\u7684\u72b6\u6001\uff1b\u800c\u5982\u679c\u5bf9 UI \u63a7\u4ef6\u7684\u8bbf\u95ee\u52a0\u4e0a\u9501\u673a\u5236\uff0c\u4f1a\u8ba9 UI \u8bbf\u95ee\u7684\u903b\u8f91\u53d8\u5f97\u590d\u6742\uff0c\u4e5f\u4f1a\u964d\u4f4e UI \u8bbf\u95ee\u7684\u6548\u7387\u3002\u800c\u6211\u4eec\u5927\u90e8\u5206\u7684UI\u64cd\u4f5c\u90fd\u662f\u5728UI\u7ebf\u7a0b\u521b\u5efa\u7684\uff0c\u56e0\u6b64\u5e38\u7528Handler\u6765\u5e2e\u52a9\u5de5\u4f5c\u7ebf\u7a0b\u4fee\u6539UI\u3002</p> <pre><code>//ViewRootImpl\nvoid checkThread() {\n    if (mThread != Thread.currentThread()) {\n        throw new CalledFromWrongThreadException(\n                \"Only the original thread that created a view hierarchy can touch its views.\");\n    }\n}\n</code></pre> <p>\u200b     \u7531<code>checkThread</code>\u65b9\u53ef\u77e5\uff0c\u66f4\u65b0UI\u5fc5\u987b\u662f\u65b0\u5efaUI\u7684\u7ebf\u7a0b\u3002</p> <ul> <li>Android Handler\u8fd0\u884c\u7684\u6d41\u7a0b</li> </ul> <p></p> <ul> <li>\u5728\u4e3b\u7ebf\u7a0b\u521b\u5efa Handler \u5bf9\u8c61 handler\uff0c\u9ed8\u8ba4\u4f7f\u7528\u7684\u662f\u4e3b\u7ebf\u7a0b\u7684 Looper \u5bf9\u8c61\u4ee5\u53ca\u5bf9\u5e94\u7684 MessageQueue \u5bf9\u8c61\uff1b</li> <li>\u5728\u5de5\u4f5c\u7ebf\u7a0b\u901a\u8fc7 Handler \u5bf9\u8c61 handler \u7684\u53d1\u9001\u6d88\u606f\u65b9\u6cd5\u53d1\u9001\u6d88\u606f\uff0c\u6700\u7ec8\u901a\u8fc7 MessageQueue \u5bf9\u8c61\u7684 enqueueMessage \u65b9\u6cd5\u628a\u6d88\u606f\u52a0\u5165\u5230\u6d88\u606f\u961f\u5217\u4e2d</li> <li>Looper.loop() \u65b9\u6cd5\u8fd0\u884c\u5728\u521b\u5efa Handler \u91cc\u7684\u7ebf\u7a0b\uff0c\u5728\u8fd9\u91cc\u5c31\u662f\u8fd0\u884c\u5728\u4e3b\u7ebf\u7a0b\uff0c Loop.loop() \u65b9\u6cd5\u4e0d\u65ad\u4ece\u6d88\u606f\u961f\u5217\u4e2d\u83b7\u53d6\u7b26\u5408\u6761\u4ef6\u7684 Message \u5bf9\u8c61\uff1b</li> <li>\u83b7\u53d6\u5230\u7b26\u5408\u6761\u4ef6\u7684 Message \u5bf9\u8c61\u540e\uff0c\u901a\u8fc7 Message \u5bf9\u8c61\u6301\u6709\u7684 target \u5b57\u6bb5\uff08\u5b9e\u9645\u5c31\u662f\u53d1\u9001\u8be5\u6d88\u606f\u7684\u90a3\u4e2a Handler \u5bf9\u8c61\uff09\u7684 dispatchMessage \u65b9\u6cd5\u628a\u6d88\u606f\u56de\u8c03\u7ed9\u53d1\u9001\u6d88\u606f\u7684\u90a3\u4e2a Handler\uff0c\u8fd9\u6837\u6d88\u606f\u5c31\u5728\u4e3b\u7ebf\u7a0b\u63a5\u6536\u5230\u4e86\u3002</li> </ul>"},{"location":"Android/5Android%20%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6%E2%80%94%E2%80%94Handler/#4handler","title":"4.Handler\u6d88\u606f\u673a\u5236\u7684\u539f\u7406\u5206\u6790","text":"<ul> <li> <p>Handler\u4f5c\u4e3a\u6d88\u606f\u673a\u5236\u7684\u4e0a\u5c42\u63a5\u53e3\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u6d88\u606f\u7684\u6240\u6709\u5904\u7406</p> </li> <li> <p>Handler\u7684\u6784\u9020\u51fd\u6570\u4e2d\uff0c\u4f1a\u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u7684Looper\u5bf9\u8c61\u3001MessageQueue\u5bf9\u8c61\uff0c<code>mcallback</code> \u548c<code>mAsynchronous</code></p> <p>```java //\u6784\u9020\u51fd\u6570\u67095\u4e2a \u4ec5\u4ee5\u5176\u4e2d\u7684\u4e00\u4e2a\u4e3a\u4f8b public Handler(@Nullable Callback callback, boolean async) {</p> <pre><code>    mLooper = Looper.myLooper();\n    if (mLooper == null) {\n        throw new RuntimeException(\n            \"Can't create handler inside thread \" + Thread.currentThread()\n                    + \" that has not called Looper.prepare()\");\n    }\n    mQueue = mLooper.mQueue;\n    mCallback = callback;\n    mAsynchronous = async;\n}\n</code></pre> <p>```</p> </li> <li> <p>\u53d1\u9001\u6d88\u606f</p> <p>\u53d1\u9001\u6d88\u606f\u6709\u4ee5\u4e0b\u51e0\u79cd,\u6700\u540e\u90fd\u4f1a\u8d70\u5230enqueueMessage</p> <p></p> <p>```java   private boolean enqueueMessage(@NonNull MessageQueue queue, @NonNull Message msg,             long uptimeMillis) {         msg.target = this;         msg.workSourceUid = ThreadLocalWorkSource.getUid();</p> <pre><code>    if (mAsynchronous) {\n        msg.setAsynchronous(true);\n    }\n    return queue.enqueueMessage(msg, uptimeMillis);\n}\n</code></pre> <p>```</p> <p>\u83b7\u53d6\u5f53\u524d\u7ebf\u7a0bUid,hanler\u5bf9\u8c61\u8d4b\u503c\u7ed9msg.target,\u7136\u540e\u8bb2\u6d88\u606f\u52a0\u5165\u5230\u6d88\u606f\u961f\u5217\u3002</p> </li> <li> <p>\u5904\u7406\u6d88\u606f</p> <p>\u5728loop()\u5faa\u73af\u65f6\uff0c\u4f1a\u5c06\u8f6e\u5230\u7684\u6d88\u606f\u5206\u53d1\u7ed9\u5404\u4e2aHandler,\u7136\u540eHandler\u8fdb\u884c\u5904\u7406</p> <p><code>java   public void dispatchMessage(@NonNull Message msg) {         if (msg.callback != null) {             handleCallback(msg);         } else {             if (mCallback != null) {                 if (mCallback.handleMessage(msg)) {                     return;                 }             }             handleMessage(msg);         }     } //Looper#loop()  msg.target.dispatchMessage(msg);</code></p> <p>\u7531\u6e90\u7801\u53ef\u77e5\uff0c\u5b9e\u9645\u4e0a\u56de\u8c03\u6709\u4e09\u79cd\u65b9\u6cd5\uff0cmessage\u7684callback,handler\u7684Callback,handleMessage(msg),\u5b9e\u9645\u4e0a\u6211\u4eec\u5e38\u7528\u7684\u53ea\u662f\u6700\u540e\u4e00\u79cd</p> </li> <li> <p>\u5c01\u88c5\u6d88\u606f</p> <p><code>Handler</code> \u5c01\u88c5\u4e86\u4e00\u7cfb\u5217\u7684 <code>obtainMessage</code> \u5de5\u5177\u65b9\u6cd5\uff0c\u65b9\u4fbf\u6211\u4eec\u62ff\u5230 <code>Message</code> \u5bf9\u8c61\u3002</p> </li> <li> <p>\u79fb\u9664\u6d88\u606f</p> <p><code>Handler</code> \u5c01\u88c5\u4e86 removeXXX \u65b9\u6cd5\uff0c\u5185\u90e8\u59d4\u6258\u7ed9 <code>MessageQueue</code> \u5bf9\u8c61\u53bb\u505a\u771f\u6b63\u7684\u5de5\u4f5c\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u6d88\u606f\u961f\u5217\u4e2d\u79fb\u9664\u6d88\u606f\u5bf9\u8c61\u3002</p> </li> <li> <p>Looper \u4f5c\u4e3a\u6d88\u606f\u673a\u5236\u4e2d\u7684\u6838\u5fc3\uff0c\u63d0\u4f9b\u4e86\u5faa\u73af\u7684\u6d41\u7a0b</p> </li> <li> <p>Looper.prepare()\u548cLooper.prepareMainLooper()\u7684\u533a\u522b</p> <p><code>java //prepare\u521b\u5efa\u4e86\u4e00\u4e2aLooper\u5bf9\u8c61\uff0c\u5e76\u521b\u5efa\u4e86\u6d88\u606f\u961f\u5217\uff0c\u83b7\u53d6\u5f53\u524d\u7ebf\u3001\u5c06\u5176\u653e\u5165 ThreadLocal&lt;Looper&gt;\u5bf9\u8c61\u4e2d public static void prepare() {         prepare(true);     } private static void prepare(boolean quitAllowed) {   if (sThreadLocal.get() != null) {     throw new RuntimeException(\"Only one Looper may be created per thread\");   }   sThreadLocal.set(new Looper(quitAllowed)); } private Looper(boolean quitAllowed) {         mQueue = new MessageQueue(quitAllowed);         mThread = Thread.currentThread();     } //prepareMainLooper \u4e5f\u521b\u5efa\u4e86Looper\u5bf9\u8c61\uff0c\u4f46\u662fquitAllowed=false\uff0c\u4e0d\u5141\u8bb8\u9000\u51fa\u6d88\u606f\u5faa\u73af public static void prepareMainLooper() {         prepare(false);         synchronized (Looper.class) {             if (sMainLooper != null) {                 throw new IllegalStateException(\"The main Looper has already been prepared.\");             }             sMainLooper = myLooper();         }     }</code></p> <p>Looper.prepare()\u521b\u5efa\u7684Looper\u662f\u5141\u8bb8loop()\u9000\u51fa\u5faa\u73af\uff0c\u5141\u8bb8\u6d88\u606f\u961f\u5217\u4e3a\u7a7a</p> <p>Looper.prepareMainLooper()\u521b\u5efa\u7684Looper\u662f\u4e0d\u5141\u8bb8loop()\u9000\u51fa\u5faa\u73af\u7684</p> </li> <li> <p>Looper.quit()\u548cLooper.quitSafely()\u7684\u533a\u522b</p> <p>\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u5b9e\u9645\u4e0a\u662f\u8c03\u7528\u4e86MessageQueue\u7684quit(boolean safe)</p> <p>Looper.quit()\u4e2dsafe= false,\u8bbe\u7f6e\u9000\u51fa\u6807\u5fd7\u4f4d\uff0c\u5e76\u79fb\u9664\u6240\u6709\u7684\u6d88\u606f</p> <p>Looper.quit()\u4e2dsafe= true,\u8bbe\u7f6e\u9000\u51fa\u6807\u5fd7\u4f4d\uff0c\u79fb\u9664\u6240\u6709\u9700\u8981\u5ef6\u65f6\u5904\u7406\u7684\u6d88\u606f</p> <p>```java  void quit(boolean safe) {         if (!mQuitAllowed) {             throw new IllegalStateException(\"Main thread not allowed to quit.\");         }</p> <pre><code>    synchronized (this) {\n        if (mQuitting) {\n            return;\n        }\n        mQuitting = true;\n\n        if (safe) {\n            removeAllFutureMessagesLocked();\n        } else {\n            removeAllMessagesLocked();\n        }\n\n        // We can assume mPtr != 0 because mQuitting was previously false.\n        nativeWake(mPtr);\n    }\n}\n</code></pre> <p>```</p> </li> </ul>"},{"location":"Android/5Android%20%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6%E2%80%94%E2%80%94Handler/#5","title":"5.\u6d88\u606f\u5c4f\u969c","text":"<p>\u4e3b\u8981\u662f\u901a\u8fc7MessageQueue#postSyncBarrier(long when)\u548cMessageQueue#removeSyncBarrier(int token)\u6765\u4ea7\u751f\u6d88\u606f\u5c4f\u969c\u548c\u6d88\u9664\u6d88\u606f\u5c4f\u969c\u3002</p> <p>\u6d88\u606f\u5c4f\u969c\u7684\u4f5c\u7528\u662f:\u5148\u5904\u7406\u5f02\u6b65\u6d88\u606f\uff0c\u8d77\u4e86\u8fc7\u6ee4\u548c\u63d0\u5347\u4f18\u5148\u7ea7\u7684\u4f5c\u7528\uff0c\u5177\u4f53\u5904\u7406\u5728MessageQueue#next()\u4e2d\uff0c\u6807\u5fd7\u662f\u6709\u4e00\u4e2atarget\u4e3anull\u7684message\u5728\u6d88\u606f\u961f\u5217\u4e2d\uff0c\u8d77\u5230\u6d88\u606f\u5c4f\u969c\u7684\u4f5c\u7528\u3002</p> <pre><code> @UnsupportedAppUsage\n    Message next() {\n        ...\n        for (;;) {\n        ...\n            synchronized (this) {\n                // Try to retrieve the next message.  Return if found.\n                final long now = SystemClock.uptimeMillis();\n                Message prevMsg = null;\n                Message msg = mMessages;\n          //\u8fd9\u91cc targat == null\u8bf4\u660e\u6709\u6d88\u606f\u5c4f\u969c\n                if (msg != null &amp;&amp; msg.target == null) {\n                    // Stalled by a barrier.  Find the next asynchronous message in the queue.\n                    do {\n                        prevMsg = msg;\n                        msg = msg.next;\n                    } while (msg != null &amp;&amp; !msg.isAsynchronous());\n                }\n                if (msg != null) {\n                  ...\n                    }\n                } else {\n                    // No more messages.\n                    nextPollTimeoutMillis = -1;\n                }\n                        ...\n            }\n                        ...\n        }\n    }\n</code></pre> <pre><code>//\u540c\u6b65\u7684\u6d88\u606f\u4e3as \u5f02\u6b65\u7684\u6d88\u606f\u4e3aa,\u6d88\u606f\u5c4f\u969c\u4e3ab\ns1-&gt;b-&gt;s2-&gt;a1-&gt;s3-&gt;a2-&gt;s4\n</code></pre> <p>\u6267\u884c\u987a\u5e8f\u4e3as1-&gt;a1-&gt;a2,\u5f53\u79fb\u9664\u6d88\u606f\u5c4f\u969c\u540e\uff0c\u624d\u4f1a\u6267\u884cs2-&gt;s3-&gt;s4.</p> <p>\u201c\u7ec8\u4e8e\u61c2\u4e86\u201d \u7cfb\u5217\uff1aAndroid\u5c4f\u5e55\u5237\u65b0\u673a\u5236\u2014VSync\u3001Choreographer \u5168\u9762\u7406\u89e3\uff01</p>"},{"location":"Android/5Android%20%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6%E2%80%94%E2%80%94Handler/#6handler","title":"6.Handler\u4f7f\u7528\u7684\u6ce8\u610f\u8981\u70b9","text":"<ul> <li>message\u7684\u751f\u6210</li> </ul> <p>Message\u4e2d\u4f1a\u6709\u4e00\u4e2a\u5927\u5c0f\u4e3a50\u7684\u6d88\u606f\u6c60\uff0c\u4f7f\u7528Message.obtain()\u53ef\u4ee5\u590d\u7528\u8fd9\u4e2a\u6d88\u606f\u6c60\u4e2d\u7684\u6d88\u606f\uff0c\u964d\u4f4e\u4e86\u5f00\u9500</p> <ul> <li>\u5185\u5b58\u6cc4\u6f0f</li> </ul> <p>\u56e0\u4e3aHandler\u53ef\u4ee5\u53d1\u9001\u5ef6\u8fdf\u6d88\u606f\uff0c\u5e76\u4e14\u5185\u90e8\u7c7b\u4f1a\u6301\u6709\u5916\u90e8\u7c7b\u7684\u5f15\u7528\uff0c\u56e0\u6b64\u5728Activity\u4e2d\u521b\u5efaHandler\u65f6\u5bb9\u6613\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u3002</p>"},{"location":"Android/5Android%20%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6%E2%80%94%E2%80%94Handler/#7handler-native","title":"7.Handler Native","text":""},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/","title":"6\u3001Android Lint \u2014\u2014\u4ee3\u7801\u4f18\u5316\u7684\u626b\u63cf\u5de5\u5177","text":""},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#_1","title":"\u6982\u8ff0","text":"<p>\u5b98\u65b9\u6587\u6863</p> <p>Android \u7528\u6237\u4f7f\u7528\u6587\u6863</p> <pre><code>Android Studio \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a lint \u7684\u4ee3\u7801\u626b\u63cf\u5de5\u5177\uff0c\u53ef\u5e2e\u52a9\u60a8\u53d1\u73b0\u5e76\u66f4\u6b63\u4ee3\u7801\u7ed3\u6784\u8d28\u91cf\u7684\u95ee\u9898\uff0c\u800c\u65e0\u9700\u60a8\u5b9e\u9645\u6267\u884c\u5e94\u7528\uff0c\u4e5f\u4e0d\u5fc5\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b\u3002\u7cfb\u7edf\u4f1a\u62a5\u544a\u8be5\u5de5\u5177\u68c0\u6d4b\u5230\u7684\u6bcf\u4e2a\u95ee\u9898\u5e76\u63d0\u4f9b\u95ee\u9898\u7684\u63cf\u8ff0\u6d88\u606f\u548c\u4e25\u91cd\u7ea7\u522b\uff0c\u4ee5\u4fbf\u60a8\u53ef\u4ee5\u5feb\u901f\u786e\u5b9a\u9700\u8981\u4f18\u5148\u8fdb\u884c\u7684\u5173\u952e\u6539\u8fdb\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u964d\u4f4e\u95ee\u9898\u7684\u4e25\u91cd\u7ea7\u522b\u4ee5\u5ffd\u7565\u4e0e\u9879\u76ee\u65e0\u5173\u7684\u95ee\u9898\uff0c\u6216\u8005\u63d0\u9ad8\u4e25\u91cd\u7ea7\u522b\u4ee5\u7a81\u51fa\u7279\u5b9a\u95ee\u9898\u3002\n</code></pre>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#_2","title":"\u539f\u7406","text":"<ul> <li>App Source files</li> </ul> <p><code>\u6e90\u6587\u4ef6\u5305\u542b\u7ec4\u6210 Android \u9879\u76ee\u7684\u6587\u4ef6\uff0c\u5305\u62ec Java\u3001Kotlin \u548c XML \u6587\u4ef6\u3001\u56fe\u6807\u4ee5\u53ca ProGuard \u914d\u7f6e\u6587\u4ef6\u3002</code></p> <ul> <li>lint.xml</li> </ul> <p><code>\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u7528\u4e8e\u6307\u5b9a\u8981\u6392\u9664\u7684\u4efb\u4f55 lint \u68c0\u67e5\u4ee5\u53ca\u81ea\u5b9a\u4e49\u95ee\u9898\u4e25\u91cd\u7ea7\u522b\u3002</code></p> <ul> <li>Lint Tool</li> </ul> <p><code>\u4e00\u4e2a\u9759\u6001\u4ee3\u7801\u626b\u63cf\u5de5\u5177\uff0c\u60a8\u53ef\u4ee5\u4ece\u547d\u4ee4\u884c\u6216\u5728 Android Studio \u4e2d\u5bf9 Android \u9879\u76ee\u8fd0\u884c\u8be5\u5de5\u5177\u3002lint \u5de5\u5177\u68c0\u67e5\u53ef\u80fd\u4f1a\u5f71\u54cd Android \u5e94\u7528\u7684\u8d28\u91cf\u548c\u6027\u80fd\u7684\u4ee3\u7801\u7ed3\u6784\u95ee\u9898\u3002\u5f3a\u70c8\u5efa\u8bae\u60a8\u5148\u66f4\u6b63 lint \u68c0\u6d4b\u5230\u7684\u6240\u6709\u9519\u8bef\uff0c\u7136\u540e\u518d\u53d1\u5e03\u60a8\u7684\u5e94\u7528\u3002</code></p> <ul> <li>lint output</li> </ul> <p><code>\u60a8\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u6216 Android Studio \u7684 Inspection Results \u7a97\u53e3\u4e2d\u67e5\u770b lint \u68c0\u67e5\u7ed3\u679c</code></p> <ul> <li> <p>\u8fd0\u884cAndroid Lint </p> </li> <li> <p>Android Studio \u8fd0\u884c:\u5728Android Studio\u4e2d\u81ea\u5e26Lint\u5de5\u5177</p> <p>Analyze &gt; Inspect Code</p> <ul> <li>\u8bbe\u7f6e\u68c0\u67e5\u8303\u56f4\u548c\u914d\u7f6e\u6587\u4ef6</li> <li>\u521b\u5efa\u548c\u4f7f\u7528\u81ea\u5b9a\u4e49\u8303\u56f4</li> <li>\u9ed8\u8ba4\u7684\u81ea\u5b9a\u4e49\u8303\u56f4<ul> <li>Project Files\uff1a\u5f53\u524d\u9879\u76ee\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u3002</li> <li>Project Production Files\uff1a\u4ec5\u9650\u5f53\u524d\u9879\u76ee\u4e2d\u7684\u751f\u4ea7\u6587\u4ef6\u3002</li> <li>Project Test Files\uff1a\u4ec5\u9650\u5f53\u524d\u9879\u76ee\u4e2d\u7684\u6d4b\u8bd5\u6587\u4ef6\u3002\u8bf7\u53c2\u9605\u6d4b\u8bd5\u7c7b\u578b\u548c\u4f4d\u7f6e\u3002</li> <li>Open Files\uff1a\u4ec5\u9650\u5f53\u524d\u9879\u76ee\u4e2d\u5df2\u6253\u5f00\u7684\u6587\u4ef6\u3002</li> <li>Module \uff1a\u4ec5\u9650\u5f53\u524d\u9879\u76ee\u4e2d\u5bf9\u5e94\u6a21\u5757\u6587\u4ef6\u5939\u4e2d\u7684\u6587\u4ef6\u3002 <li>Current File\uff1a\u4ec5\u9650\u5f53\u524d\u9879\u76ee\u4e2d\u7684\u5f53\u524d\u6587\u4ef6\u3002\u5728\u60a8\u9009\u62e9\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u540e\u663e\u793a\u3002</li> <li>Class Hierarchy\uff1a\u5982\u679c\u60a8\u9009\u62e9\u6b64\u9009\u9879\u5e76\u70b9\u51fb OK\uff0c\u4f1a\u51fa\u73b0\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u5176\u4e2d\u663e\u793a\u5f53\u524d\u9879\u76ee\u4e2d\u7684\u6240\u6709\u7c7b\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u5bf9\u8bdd\u6846\u4e2d\u7684 Search by Name \u5b57\u6bb5\u8fc7\u6ee4\u5e76\u9009\u62e9\u8981\u68c0\u67e5\u7684\u7c7b\u3002\u5982\u679c\u672a\u8fc7\u6ee4\u7c7b\u5217\u8868\uff0c\u4ee3\u7801\u68c0\u67e5\u5c06\u68c0\u67e5\u6240\u6709\u7c7b\u3002</li> <li>\u521b\u5efa\u6b65\u9aa4\uff1a\u770bhttps://developer.android.google.cn/studio/write/lint#crcs</li> <li> <p>\u547d\u4ee4\u884c\u8fd0\u884c</p> <p><code>bash ./gradlew lint</code></p> </li>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#lint-to-suppress-warning","title":"\u914d\u7f6eLint to  Suppress warning","text":"<p>\u4ee5\u4e0b\u64cd\u4f5c\u53ea\u662f\u7528\u6765\u533a\u5206\u54ea\u4e9b\u9700\u8981Lint\u9700\u8981\u68c0\u67e5\uff0c\u54ea\u4e9b\u4e0d\u9700\u8981\u68c0\u67e5</p> <ul> <li> <p>\u4f7f\u7528AS IDE\u914d\u7f6eLint</p> </li> <li> <p>\u4f9d\u6b21\u9009\u62e9 Analyze &gt; Inspect Code\u3002</p> </li> <li>\u5728 Specify Scope \u5bf9\u8bdd\u6846\u7684 Inspection Profile \u4e0b\uff0c\u70b9\u51fb More\u3002</li> </ul> <p>\u5177\u4f53\u914d\u7f6e\u89c4\u5219\u770b\uff1ahttps://developer.android.google.cn/studio/write/lint#cis</p> <ul> <li>\u53ef\u4ee5\u81ea\u5b9a\u4e49\u67e5\u8be2\u6a21\u5757</li> <li> <p>\u53ef\u4ee5\u81ea\u5b9a\u4e49\u67e5\u8be2\u7684\u7c7b\u578b</p> </li> <li> <p>\u4f7f\u7528lint\u6587\u4ef6(\u9700\u8981\u91cd\u70b9\u770b\u4e00\u4e0b)</p> </li> </ul> <p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u5728 <code>&lt;issue&gt;</code> \u6807\u8bb0\u4e2d\u8bbe\u7f6e\u4e25\u91cd\u6027\u7ea7\u522b\u5c5e\u6027\u6765\u66f4\u6539\u67d0\u4e2a\u95ee\u9898\u7684\u4e25\u91cd\u6027\u7ea7\u522b\u6216\u5bf9\u8be5\u95ee\u9898\u505c\u7528 lint \u68c0\u67e5\u3002</p> <p>```java   //\u4e3e\u4f8b\u5982\u4e0b\uff1a\u5982\u4f55\u4f7f\u7528\uff1f/   </p> <pre><code>  &lt;lint&gt;\n      &lt;!-- list of issues to configure --&gt;\n</code></pre> <p>   ```</p> <ul> <li>\u5728\u6e90\u6587\u4ef6\u4e2d\u914d\u7f6elint </li> </ul> <p>\u6ce8\u610f\uff1a\u53ef\u4ee5\u901a\u8fc7IDE \u914d\u7f6e</p> <ul> <li> <p>Java \u6e90\u6587\u4ef6</p> <p>\u6dfb\u52a0\u6ce8\u89e3<code>@SuppressLint</code></p> </li> <li> <p>xml \u6e90\u6587\u4ef6</p> <p><code>xml //\u6dfb\u52a0 namespace xmlns:tools=\"http://schemas.android.com/tools\"</code></p> </li> </ul>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#gradle-lint","title":"\u901a\u8fc7Gradle \u914d\u7f6eLint \u9009\u9879","text":"<p>\u8be5\u529f\u80fd\u540c\u4e0a\uff0c\u53ea\u662f\u914d\u7f6e\u5199\u5728 <code>build.gradle</code> \u6587\u4ef6\u3002</p> <p>\u5728\u6a21\u5757\u4e0b\u7684 <code>build.gradle</code> \u6587\u4ef6\u4e2d\u7684 <code>lint{}</code> \u4ee3\u7801\u5757\u914d\u7f6e\u67d0\u4e9b lint \u9009\u9879\u3002</p> <pre><code>  lint {\n        // Turns off checks for the issue IDs you specify.\n        disable 'TypographyFractions','TypographyQuotes'\n        // Turns on checks for the issue IDs you specify. These checks are in\n        // addition to the default lint checks.\n        enable 'RtlHardcoded','RtlCompat', 'RtlEnabled'\n        // To enable checks for only a subset of issue IDs and ignore all others,\n        // list the issue IDs with the 'check' property instead. This property overrides\n        // any issue IDs you enable or disable using the properties above.\n        checkOnly 'NewApi', 'InlinedApi'\n        // If set to true, turns off analysis progress reporting by lint.\n        quiet true\n        // If set to true (default), stops the build if errors are found.\n        abortOnError false\n        // If true, only report errors.\n        ignoreWarnings true\n        // If true, lint also checks all dependencies as part of its analysis. Recommended for\n        // projects consisting of an app with library dependencies.\n        checkDependencies true\n    }\n</code></pre>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#warnings-baseline","title":"\u521b\u5efawarnings baseLine","text":"<p>\u60a8\u53ef\u4ee5\u4e3a\u9879\u76ee\u7684\u5f53\u524d\u8b66\u544a\u96c6\u521b\u5efa\u5feb\u7167\uff0c\u7136\u540e\u5c06\u8be5\u5feb\u7167\u7528\u4f5c\u5c06\u6765\u8fd0\u884c\u68c0\u67e5\u7684\u57fa\u51c6\uff0c\u4ee5\u4fbf\u53ea\u62a5\u544a\u65b0\u95ee\u9898\u3002\u6709\u4e86\u57fa\u51c6\u5feb\u7167\uff0c\u60a8\u4fbf\u53ef\u5f00\u59cb\u4f7f\u7528 lint \u8ba9\u6784\u5efa\u5931\u8d25\uff0c\u800c\u4e0d\u5fc5\u5148\u8fd4\u56de\u5e76\u89e3\u51b3\u6240\u6709\u73b0\u6709\u95ee\u9898\u3002</p> <ul> <li>\u81ea\u5b9a\u4e49warnings baseLine</li> </ul> <p>\u4fee\u6539\u9879\u76ee\u7684<code>build.gradle</code>\u6587\u4ef6\uff0c\u6b64\u65f6\u662f\u5c06\u6240\u6709\u7684\u68c0\u67e5\u7ed3\u679c\u90fd\u653e\u5728\u4e86\u57fa\u51c6\u91cc\u9762</p> <p><code>groovy   android {       lintOptions {           baseline file(\"lint-baseline.xml\")       }   }</code></p> <p>\u9996\u6b21\u6dfb\u52a0\u6b64\u4ee3\u7801\u884c\u65f6\uff0c\u7cfb\u7edf\u4f1a\u521b\u5efa <code>lint-baseline.xml</code> \u6587\u4ef6\u4ee5\u5efa\u7acb\u57fa\u51c6\u3002\u6b64\u540e\uff0clint \u5de5\u5177\u4ec5\u901a\u8fc7\u8bfb\u53d6\u8be5\u6587\u4ef6\u6765\u786e\u5b9a\u57fa\u51c6\u3002\u5982\u679c\u8981\u521b\u5efa\u65b0\u57fa\u51c6\uff0c\u8bf7\u624b\u52a8\u5220\u9664\u8be5\u6587\u4ef6\u5e76\u518d\u6b21\u8fd0\u884c lint \u4ee5\u91cd\u65b0\u521b\u5efa\u6b64\u6587\u4ef6\u3002</p> <p>\u81ea\u5b9a\u4e49\u4e3a\u53ea\u68c0\u67e5\u8fd9\u4e9b\u95ee\u9898</p> <p><code>groovy   android {       lintOptions {           checkOnly 'NewApi', 'HandlerLeak'           baseline file(\"lint-baseline.xml\")       }   }</code></p> <ul> <li>baseLine warnings</li> </ul> <p>\u5b9e\u884c\u57fa\u51c6\u65f6\uff0c\u60a8\u4f1a\u6536\u5230\u4e00\u6761\u4fe1\u606f\u6027\u8b66\u544a\uff0c\u544a\u77e5\u60a8\u4e00\u4e2a\u6216\u591a\u4e2a\u95ee\u9898\u5df2\u88ab\u8fc7\u6ee4\u6389\uff0c\u56e0\u4e3a\u5b83\u4eec\u5df2\u5728\u57fa\u51c6\u4e2d\u5217\u51fa\u3002\u4e4b\u6240\u4ee5\u53d1\u51fa\u8fd9\u6761\u8b66\u544a\uff0c\u662f\u4e3a\u4e86\u5e2e\u60a8\u8bb0\u4f4f\u60a8\u914d\u7f6e\u4e86\u57fa\u51c6\uff0c\u56e0\u4e3a\u5728\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u60a8\u4f1a\u5e0c\u671b\u5728\u67d0\u4e2a\u65f6\u523b\u89e3\u51b3\u6240\u6709\u95ee\u9898\u3002</p>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#as-ide","title":"AS IDE\u7684\u4f7f\u7528","text":"<p>1\u3001Reports unnecessary cast expressions.  \u6e05\u9664\u6240\u6709\u7684\u8f6c\u6362</p> <p>AS-&gt;Analyze-&gt;Code Cleanup...-&gt;\u53ef\u4ee5\u81ea\u5b9a\u4e49\u9009\u62e9\u6e05\u9664\u7684\u8303\u56f4,\u7136\u540e\u70b9\u51fbOK\uff0c\u5373\u53ef\u6e05\u9664\u6240\u6709\u5982\u4e0b\u7684\u60c5\u5f62\uff1a</p> <pre><code>Button bt_testNew = (Button) findViewById(R.id.bt_testNewIntent);\n//\u4fee\u6539\u4e3a\nButton bt_testNew = findViewById(R.id.bt_testNewIntent);\n</code></pre>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#_3","title":"\u547d\u4ee4\u884c\u4f7f\u7528","text":"<p>\u547d\u4ee4\u884c\u7684\u4f7f\u7528\u4f1a\u751f\u6210\u76f8\u5e94\u7684html\u6587\u4ef6\u548cxml\u6587\u4ef6\u3002</p> <ul> <li>./gradlew lintDebug \u53ea\u5c55\u793a\u6253\u5f00\u7684\u5305</li> <li>./gradlew :app:lint --rerun-tasks \u91cd\u65b0\u68c0\u67e5</li> </ul>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#lint","title":"\u5ffd\u7565\u68c0\u67e5Lint","text":"<p>1.Code\u6e90\u6587\u4ef6</p> <p>With a <code>@SuppressLint</code> annotation in the Java code</p> <p>2.xml\u6587\u4ef6</p> <p>With a <code>tools:ignore</code> attribute in the XML file</p> <p>3.build.gradle</p> <pre><code>android {\n    lintOptions {\n        disable 'TypographyFractions','TypographyQuotes'\n    }\n}\n</code></pre> <p>3.\u7edf\u4e00\u914d\u7f6e</p> <p>With a <code>lint.xml</code> configuration file in the project</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;lint&gt;\n    &lt;!-- Ignore everything in the test source set --&gt;\n    &lt;issue id=\"all\"&gt;\n        &lt;ignore path=\"\\*/test/\\*\" /&gt;\n    &lt;/issue&gt;\n\n    &lt;!-- Disable this given check in this project --&gt;\n    &lt;issue id=\"IconMissingDensityFolder\" severity=\"ignore\" /&gt;\n\n    &lt;!-- Ignore the ObsoleteLayoutParam issue in the given files --&gt;\n    &lt;issue id=\"ObsoleteLayoutParam\"&gt;\n        &lt;ignore path=\"res/layout/activation.xml\" /&gt;\n        &lt;ignore path=\"res/layout-xlarge/activation.xml\" /&gt;\n        &lt;ignore regexp=\"(foo|bar)\\.java\" /&gt;\n    &lt;/issue&gt;\n\n    &lt;!-- Ignore the UselessLeaf issue in the given file --&gt;\n    &lt;issue id=\"UselessLeaf\"&gt;\n        &lt;ignore path=\"res/layout/main.xml\" /&gt;\n    &lt;/issue&gt;\n\n    &lt;!-- Change the severity of hardcoded strings to \"error\" --&gt;\n    &lt;issue id=\"HardcodedText\" severity=\"error\" /&gt;\n&lt;/lint&gt;\n</code></pre> <ol> <li>Lint \u547d\u4ee4\u884c</li> </ol> <pre><code>lint --ignore UnusedResources,UselessLeaf /my/project/path\n</code></pre>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#lint_1","title":"\u81ea\u5b9a\u4e49Lint\u89c4\u5219","text":"<p>Lint\u5b98\u65b9Api</p>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#client-api","title":"Client API","text":"<p>\u7528\u6765\u51b3\u5b9a\u67e5\u8be2\u54ea\u4e9b\u95ee\u9898\uff0c\u67e5\u8be2\u54ea\u4e9b\u4f5c\u7528\u57df\u7684API </p>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#detector-api","title":"Detector API","text":"<p>\u67e5\u8be2\u7684\u539f\u5219\uff1a</p> <p>1.\u4ee5\u81ea\u5df1\u8981\u67e5\u7684\u5173\u952eAST\u4e3a\u4e2d\u5fc3\uff0c\u5f80\u4e0a\u67e5\u901a\u8fc7resolve\uff0c\u5f80\u4e0b\u67e5\u901a\u8fc7\u5efa\u7acb\u65b0\u7684Visitor\u3002</p> <p>\u5206\u6790\u6e90\u7801\u548c\u62a5\u544a\u67d0\u4e00\u7c7b\u95ee\u9898\u7684API,\u4e3b\u8981\u5b66\u4e60\u8fd9\u4e2aAPI \u3002</p> <p>AST:</p> <p>\u8bed\u6cd5\u6811\uff0c\u4e5f\u5199\u4f5cUAST(Universal Abstract Syntax Tree),\u68c0\u67e5\u6e90\u4ee3\u7801\u65f6\u4f1a\u5c06\u6e90\u4ee3\u7801\u8f6c\u6362\u6210AST\u7684\u683c\u5f0f\u53bb\u68c0\u67e5\uff0c\u4e5f\u662f\u6211\u4eec\u5728\u4f7f\u7528Lint\u5206\u6790\u65f6\u7684\u4e3b\u8981\u5bf9\u8c61\u3002</p> <p>In UAST, each element is called a <code>UElement</code>, and there are a number of subclasses \u2014 <code>UFile</code> for the compilation unit, <code>UClass</code> for a class, <code>UMethod</code> for a method, <code>UExpression</code> for an expression, <code>UIfExpression</code> for an <code>if</code>-expression, and so on.</p> <p></p> <p>PSI </p> <p>Program Structure Interface ,\u662f\u8bed\u6cd5\u6811\u7684\u62bd\u8c61\u4f7f\u7528\uff0cJava\u548cKotlin\u6709\u81ea\u5df1\u7684PSI\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7AST\u83b7\u53d6PSI.</p> <p>\u9700\u8981\u4f7f\u7528PSI\u7684\u5730\u65b9\uff1a</p> <ul> <li>\u9700\u8981\u8c03\u7528\u8be5\u8282\u70b9\u7684PSI\u540d\u79f0\uff0c\u4f8b\u5982\uff0cUMethod.resolve\uff08\uff09\u8fd4\u56de\u4e00\u4e2aPsiMethod\u3002</li> <li>\u60a8\u53ef\u80fd\u9700\u8981\u4f7f\u7528PSI\u7684\u7b2c\u4e8c\u79cd\u60c5\u51b5\u662f\uff0c\u60a8\u5fc5\u987b\u505a\u4e00\u4e9bUAST\u4e2d\u6ca1\u6709\u8868\u793a\u7684\u7279\u5b9a\u8bed\u8a00\u7684\u4e8b\u60c5\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u8bd5\u56fe\u67e5\u627e\u53c2\u6570\u7684\u540d\u79f0\u6216\u9ed8\u8ba4\u503c\uff0c\u6216\u8005\u7ed9\u5b9a\u7684\u7c7b\u662f\u5426\u662f\u4f34\u968f\u5bf9\u8c61\uff0c\u90a3\u4e48\u60a8\u5c06\u9700\u8981\u67e5\u8be2Kotlin PSI\u3002 Java\u56e0\u4e3a\u6ca1\u6709\u9ed8\u8ba4\u53c2\u6570\u503c\uff0c\u6240\u4ee5\u4e0d\u7528\u8003\u8651PSI</li> </ul> <p>Resolving:\u83b7\u53d6\u8c03\u7528\u65b9\u6cd5\u6216\u8005\u5c5e\u6027\u7684\u65b9\u6cd5 </p> <p>call <code>.resolve()</code></p>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#detector","title":"Detector","text":"<p>\u662fDetectorAPI\u7684\u91cd\u8981\u7c7b\uff0c\u662f\u7528\u6765\u68c0\u67e5\u6e90\u7801\u4e2d\u7684\u95ee\u9898</p> <p>Detector\u626b\u63cf\u6587\u4ef6\u7684\u7c7b\u578b</p> Scanner \u7c7b\u578b Desc UastScanner/SourceCodeScanner \u626b\u63cf Java\u3001Kotlin \u6e90\u6587\u4ef6 XmlScanner \u626b\u63cf XML \u6587\u4ef6 ResourceFolderScanner \u626b\u63cf\u8d44\u6e90\u6587\u4ef6\u5939 ClassScanner \u626b\u63cf Class \u6587\u4ef6 BinaryResourceScanner \u626b\u63cf\u4e8c\u8fdb\u5236\u8d44\u6e90\u6587\u4ef6 GradleScanner \u626b\u63cfGradle\u811a\u672c <p>Detector\u7684\u56de\u8c03\u51fd\u6570</p>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#xmlscanner","title":"XmlScanner","text":"<ul> <li>visitElement\uff1a \u5bf9XMLTag\u6807\u7b7e\u8fdb\u884c\u58f0\u660e</li> <li>visitAttribute \uff1a\u5bf9XML\u5c5e\u6027 \u8fdb\u884c\u58f0\u660e</li> <li>visitDocument\uff1a\u5bf9\u6587\u6863\u8fdb\u884c\u904d\u5386</li> </ul>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#sourcecodescanner","title":"SourceCodeScanner","text":"<ul> <li>getApplicableMethodNames &amp;&amp; visitMethodCall</li> </ul> <p>\u5f53\u4e00\u4e2a\u65b9\u6cd5\u88ab\u8c03\u7528</p> <ul> <li>getApplicableConstructorTypes &amp;&amp; visitConstructor</li> </ul> <p>\u5f53\u4e00\u4e2a\u7ed9\u5b9a\u7c7b\u578b\u7684Class\u8fdb\u884c\u521d\u59cb\u5316\u6784\u9020</p> <ul> <li>applicableSuperClasses &amp;&amp; visitClass</li> </ul> <p>\u5f53\u6307\u5b9a\u7236\u7c7b\u548c\u63a5\u53e3\u5b9e\u73b0\u7684\u7c7b\u521b\u5efa\u65f6</p> <ul> <li>applicableAnnotations &amp;&amp; visitAnnotationUsage</li> </ul> <p>\u5f53\u4f7f\u7528\u6307\u5b9a\u7684\u6ce8\u89e3\u65f6</p> <ul> <li>getApplicableUastTypes &amp;&amp; createUastHandler</li> </ul> <p>\u5f53\u88ab\u6307\u5b9a\u7684\u8bed\u6cd5\u6811\u8282\u70b9\u51fa\u73b0\u65f6</p>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#classscanner","title":"ClassScanner","text":"<ul> <li>getApplicableCallOwners &amp;&amp; checkCall</li> </ul> <p>\u5f53\u7279\u5b9a\u7684\u6240\u6709\u8005\u8c03\u7528\u7684\u65b9\u6cd5\u65f6</p> <ul> <li>getApplicableAsmNodeTypes &amp;&amp; checkInstruction</li> </ul> <p>\u5f53\u4e00\u4e2a\u7ed9\u5b9a\u7684\u5b57\u8282\u6307\u4ee4\u51fa\u73b0\u65f6</p> <ul> <li>checkClass</li> </ul> <p>\u7c7b\u4f3cXmlScanner#visitDocument\uff0c\u5bf9 ASM\u5b57\u8282\u904d\u5386</p>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#scnner","title":"Scnner\u987a\u5e8f","text":"<ol> <li>Android Manifest</li> <li>Android resources XML files (alphabetical by folder type, so for example layouts are processed before value files like translations)</li> <li>Kotlin and Java files</li> <li>Bytecode (local <code>.class</code> files and library <code>.jar</code> files)</li> <li>Gradle files</li> <li>Other files</li> <li>ProGuard files</li> <li>Property Files</li> </ol>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#issue","title":"ISSUE\u7684\u5efa\u7acb","text":"<p>ISSUE \u662f\u6bcf\u4e00\u4e2aLint\u68c0\u67e5\u7684\u552f\u4e00\u6807\u8bc6\uff0cISSUE\u4e2d\u786e\u7acb\u4e86\u68c0\u67e5\u9519\u8bef\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p> <ul> <li>id  ISSUE\u7684id </li> <li>briefDescription \u7b80\u77ed\u7684\u63cf\u8ff0\uff0c\u662fLint\u62a5\u544a\u4e2d\u7684\u6807\u9898</li> <li>explanation  \u8be6\u7ec6\u7684\u4fee\u6b63\u63cf\u8ff0\uff0c\u662fLint\u62a5\u544a\u4e2d\u7684EXPLAIN</li> <li>moreInfo \u66f4\u591a\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u53ef\u4ee5\u7528\u7f51\u5740\u4ecb\u7ecd</li> <li>category  \u68c0\u67e5\u7684\u5206\u7ec4</li> <li>severity  \u68c0\u67e5\u7684\u72b6\u6001\uff0c\u5982Error,</li> <li>androidSpecific \u662f\u5426\u53ea\u68c0\u67e5Android</li> <li>implementation \u68c0\u67e5\u7684\u8303\u56f4</li> </ul> <pre><code> companion object Issues {\n        @JvmField\n        val ISSUE = Issue.create(\n            id = \"SdCardPath\",\n            briefDescription = \"Hardcoded reference to `/sdcard`\",\n            explanation = \"\"\"\n                Your code should not reference the `/sdcard` path directly; \\\n                instead use `Environment.getExternalStorageDirectory().getPath()`.\n\n                Similarly, do not reference the `/data/data/` path directly; it \\\n                can vary in multi-user scenarios. Instead, use \\\n                `Context.getFilesDir().getPath()`.\n                \"\"\",\n            moreInfo = \"https://developer.android.com/training/data-storage#filesExternal\",\n            category = Category.CORRECTNESS,\n            severity = Severity.WARNING,\n            androidSpecific = true,\n            implementation = Implementation(\n                SdCardDetector::class.java,\n                Scope.JAVA_FILE_SCOPE\n            )\n        )\n }\n</code></pre>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#issue_1","title":"\u6ce8\u518cISSUE","text":"<p>\u5728IssueRegistry\u4e2d\u6ce8\u518cISSUE_ID</p> <pre><code>class SampleIssueRegistry : IssueRegistry() {\n    override val issues = listOf(SdCardDetector.ISSUE) //\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7684ISSUE\n\n    override val api: Int\n        get() = CURRENT_API\n\n    // works with Studio 4.1 or later; see\n    // com.android.tools.lint.detector.api.Api / ApiKt\n    override val minApi: Int\n        get() = 8\n\n    // Requires lint API 30.0+; if you're still building for something\n    // older, just remove this property.\n    override val vendor: Vendor = Vendor(\n        vendorName = \"Android Open Source Project\",\n        feedbackUrl = \"https://com.example.lint.blah.blah\",\n        contact = \"author@com.example.lint\"\n    )\n}\n</code></pre>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#_4","title":"\u62a5\u544a\u9519\u8bef","text":"<p>\u4f7f\u7528Incident\u6765\u62a5\u544a\u9519\u8bef\uff0c\u91cd\u70b9\u662f\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>ISSUE </li> <li>message \u68c0\u67e5\u7684\u4fe1\u606f</li> <li>fix \u4fee\u590d\u65b9\u6848</li> <li>Location \u4f4d\u7f6e \u4e00\u822c\u4e3a\u5f53\u524dAST</li> </ul> <pre><code> val  incident = Incident(context, ISSUE)\n                .message(\"\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528android.util.Log\")\n                .fix(fix().name(\"\u5c06Log \u66ff\u6362\u6210 LogUtil\").replace().with(\"LogUtil\").build())\n                .at(node)\n            context.report(incident)\n</code></pre>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#detector_1","title":"Detector \u4f7f\u7528\u7b80\u5355\u5b9e\u4f8b","text":"<p>\u5b9e\u73b0\u5bf9android.util.log\u7684\u68c0\u6d4b\uff0c\u6539\u4e3aLogUtil</p> <p>1.\u521b\u5efa\u4e00\u4e2aISSUE</p> <pre><code>class LogDetector : Detector(), Detector.UastScanner {\n\n    companion object {\n        private  const val ISSUE_ID = \"LogUsage\"\n        val  ISSUE = Issue.create(\n            ISSUE_ID,\n            \"\u907f\u514d\u8c03\u7528android.util.log\",\n            \"\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528android.util.Log,\u5e94\u8be5\u4f7f\u7528\u7edf\u4e00Log\u5de5\u5177\u7c7b\",\n            category = Category.SECURITY,\n            priority = 9,\n            severity = Severity.ERROR,\n            implementation = Implementation(LogDetector::class.java, Scope.JAVA_FILE_SCOPE)\n        )\n    }\n}\n</code></pre> <p>2.\u521b\u5efaDector</p> <pre><code>\nclass LogDetector : Detector(), Detector.UastScanner {\n\n  //\u8981\u67e5\u8be2\u7684\u65b9\u6cd5\n   override fun getApplicableMethodNames(): List&lt;String&gt; {\n        return listOf(\"v\",\"d\",\"i\",\"w\",\"e\");\n    }\n\n\n    override fun visitMethodCall(context: JavaContext, node: UCallExpression, method: PsiMethod) {\n        if(context.evaluator.isMemberInClass(method,\"android.util.Log\")){\n            val  incident = Incident(context, ISSUE)\n                .message(\"\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528android.util.Log\")\n                .fix(fix().name(\"\u5c06Log \u66ff\u6362\u6210 LogUtil\").replace().with(\"LogUtil\").build())\n                .at(node)\n            context.report(incident)\n        }\n    }\n}\n\n</code></pre> <p>3.\u5b9e\u73b0IssueRegistry</p> <pre><code>class MyCustomIssueRegistry : IssueRegistry() {\n\n    init {\n        println(\"MyCustomIssueRegistry start run\")\n    }\n\n    override val issues: List&lt;Issue&gt;\n        get() = listOf(LogDetector.ISSUE)\n\n    override val minApi: Int\n        get() = 8;\n\n    override val api: Int\n        get() = CURRENT_API\n\n    override val vendor: Vendor = Vendor(\n        vendorName = \"Android Open Source Test Demo  Project\",\n        feedbackUrl = \"https://com.example.lint.blah.blah\",\n        contact = \"azhang20@com.example.lint\"\n    )\n}\n</code></pre> <p>4.\u5728build.gradlew\u5b9e\u73b0\u6ce8\u518c</p> <pre><code>dependencies {\n    compileOnly \"com.android.tools.lint:lint-api:30.0.0-alpha10\"\n    compileOnly \"com.android.tools.lint:lint-checks:30.0.0-alpha10\"\n    testImplementation \"com.android.tools.lint:lint-tests:30.0.0-alpha10\"\n}\n\njar {\n    manifest {\n        // Only use the \"-v2\" key here if your checks have been updated to the\n        // new 3.0 APIs (including UAST)\n        attributes('Lint-Registry-v2': 'com.example.lintjsonreader.MyCustomIssueRegistry')\n    }\n}\n</code></pre> <p>5.\u5f15\u5165\u5230\u4f7f\u7528\u7684\u5730\u65b9</p> <pre><code>lintChecks project(\":lintMoudle\")\n</code></pre> <p>6.Lint\u68c0\u67e5</p> <pre><code> ./gradlew :app:lint\n</code></pre>"},{"location":"Android/6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/#_5","title":"6\u3001Android Lint \u2014\u2014\u4ee3\u7801\u4f18\u5316\u7684\u626b\u63cf\u5de5\u5177","text":""},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/","title":"7.Android \u6742\u8bb0","text":""},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#imsi-imei-meid-iccid","title":"IMSI IMEI MEID ICCID\u76f8\u5173\u77e5\u8bc6","text":""},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#imei","title":"IMEI","text":"<p>IMEI(International Mobile Equipment Identity)\u662f\u79fb\u52a8\u8bbe\u5907\u56fd\u9645\u8eab\u4efd\u7801\u7684\u7f29\u5199\uff0c\u79fb\u52a8\u88c5\u5907\u56fd\u9645\u8fa8\u8bc6\u7801\uff0c\u662f\u753115\u4f4d\u6570\u5b57\u7ec4\u6210\u7684\"\u7535\u5b50\u4e32\u53f7\"\uff0c\u5b83\u4e0e\u6bcf\u53f0\u624b\u673a\u4e00\u4e00\u5bf9\u5e94\uff0c\u800c\u4e14\u8be5\u7801\u662f\u5168\u4e16\u754c\u552f\u4e00\u7684\u3002</p> <ul> <li>\u6bcf\u4e00\u90e8\u624b\u673a\u5728\u7ec4\u88c5\u5b8c\u6210\u540e\u90fd\u5c06\u88ab\u8d4b\u4e88\u4e00\u4e2a\u5168\u7403\u552f\u4e00\u7684\u4e00\u7ec4\u53f7\u7801\uff0c\u8fd9\u4e2a\u53f7\u7801\u4ece\u751f\u4ea7\u5230\u4ea4\u4ed8\u4f7f\u7528\u90fd\u5c06\u88ab\u5236\u9020\u751f\u4ea7\u7684\u5382\u5546\u6240\u8bb0\u5f55\u3002</li> <li>\u624b\u673a\u7528\u6237\u53ef\u4ee5\u5728\u624b\u673a\u4e2d\u67e5\u5230\u81ea\u5df1\u624b\u673a\u7684IMEI\u7801\u3002</li> <li>\u4f46\u662f\u6709\u4e9b\u624b\u673a\u662f\u6709\u4e24\u4e2aIMEL,\u8fd9\u662f\u56e0\u4e3a\u5728\u79fb\u52a8\u8bbe\u5907\u5f00\u53d1\u89c4\u8303\u4e2d\uff0cIMEI\u548cIMSI\u5b58\u5728\u4e00\u4e00\u5bf9\u5e94\u7684\u5173\u7cfb\uff0c\u6240\u4ee5\u5728\u53cc\u5361\u53cc\u5f85\u7684\u60c5\u51b5\u4e0b\uff0c\u4e24\u4e2aIMEL\u53f7\u76f8\u5bf9\u5b89\u5168\u3002</li> <li>\u6709\u4e9b\u53cc\u5361\u53cc\u5f85\u4e5f\u662f\u4e00\u4e2aIMEI,\u662f\u56e0\u4e3a\u624b\u673a\u7cfb\u7edf\u548c\u5165\u7f51\u65f6\u90fd\u4e0d\u67e5IMEI.</li> </ul>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#meid","title":"MEID","text":"<p>MEID \u79fb\u52a8\u8bbe\u5907\u8bc6\u522b\u7801(Mobile Equipment Identifier)\u662fCDMA\u624b\u673a\u7684\u8eab\u4efd\u8bc6\u522b\u7801\uff0c\u4e5f\u662f\u6bcf\u53f0CDMA\u624b\u673a\u6216\u901a\u8baf\u5e73\u677f\u552f\u4e00\u7684\u8bc6\u522b\u7801\u3002\u901a\u8fc7\u8fd9\u4e2a\u8bc6\u522b\u7801\uff0c\u7f51\u7edc\u7aef\u53ef\u4ee5\u5bf9\u8be5\u624b\u673a\u8fdb\u884c\u8ddf\u8e2a\u548c\u76d1\u7ba1\u3002\u7528\u4e8eCDMA\u5236\u5f0f\u7684\u624b\u673a\u3002MEID\u7684\u6570\u5b57\u8303\u56f4\u662f\u5341\u516d\u8fdb\u5236\u7684\uff0c\u548cIMEI\u7684\u683c\u5f0f\u7c7b\u4f3c\u3002</p> <ul> <li>\u73b0\u5728\u6ca1\u6709\u7535\u4fe1\u5361\u4e5f\u4f1a\u5206\u914d\u4e00\u4e2aMEID,\u662f\u56e0\u4e3a\u4e0d\u6e05\u695a\u7528\u6237\u4f1a\u4e0d\u4f1a\u7528\u7535\u4fe1\u5361\u3002</li> </ul>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#imsi","title":"IMSI","text":"<p>\u56fd\u9645\u79fb\u52a8\u7528\u6237\u8bc6\u522b\u7801\uff08IMSI\uff09 international mobile subscriber identity \u56fd\u9645\u4e0a\u4e3a\u552f\u4e00\u8bc6\u522b\u4e00\u4e2a\u79fb\u52a8\u7528\u6237\u6240\u5206\u914d\u7684\u53f7\u7801\u3002</p> <p>IMSI\u5171\u670915\u4f4d\uff0c\u5176\u7ed3\u6784\u5982\u4e0b\uff1aMCC+MNC+MSIN \uff0c\uff08MNC+MSIN=NMSI\uff09\u3000\u3000</p> <p>Mcc\uff1aMobile Country Code\uff0c\u79fb\u52a8\u56fd\u5bb6\u7801\uff0cMCC\u7684\u8d44\u6e90\u7531\u56fd\u9645\u7535\u8054\uff08ITU\uff09\u7edf\u4e00\u5206\u914d\u548c\u7ba1\u7406\uff0c\u552f\u4e00\u8bc6\u522b\u79fb\u52a8\u7528\u6237\u6240\u5c5e\u7684\u56fd\u5bb6\uff0c\u51713\u4f4d\uff0c\u4e2d\u56fd\u4e3a460;\u3000</p> <p>MNC:Mobile Network Code\uff0c\u79fb\u52a8\u7f51\u7edc\u7801\uff0c\u51712\u4f4d\uff0c\u4e2d\u56fd\u79fb\u52a8TD\u7cfb\u7edf\u4f7f\u752800\uff0c\u4e2d\u56fd\u8054\u901aGSM\u7cfb\u7edf\u4f7f\u752801\uff0c\u4e2d\u56fd\u79fb\u52a8GSM\u7cfb\u7edf\u4f7f\u752802\uff0c\u4e2d\u56fd\u7535\u4fe1CDMA\u7cfb\u7edf\u4f7f\u752803\uff0c\u4e00\u4e2a\u5178\u578b\u7684IMSI\u53f7\u7801\u4e3a460030912121001\u3002</p> <p>MSIN:Mobile Subscriber Identification Number\u5171\u670910\u4f4d\uff0c\u5176\u7ed3\u6784\u5982\u4e0b\uff1a09+M0M1M2M3+ABCD\u3000\u5176\u4e2d\u7684M0M1M2M3\u548cMDN\u53f7\u7801\u4e2d\u7684H0H1H2H3\u53ef\u5b58\u5728\u5bf9\u5e94\u5173\u7cfb\uff0cABCD\u56db\u4f4d\u4e3a\u81ea\u7531\u5206\u914d\u3002</p>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#iccid","title":"ICCID","text":"<p>Integrate circuit card identity \u96c6\u6210\u7535\u8def\u5361\u8bc6\u522b\u7801\uff08\u56fa\u5316\u5728\u624b\u673aSIM\u5361\u4e2d\uff09 ICCID\u4e3aIC\u5361\u7684\u552f\u4e00\u8bc6\u522b\u53f7\u7801\uff0c\u5171\u670920\u4f4d\u6570\u5b57\u7ec4\u6210\uff0c\u5176\u7f16\u7801\u683c\u5f0f\u4e3a\uff1aXXXXXX 0MFSS YYGXX XXXXX\u3002\u5206\u522b\u4ecb\u7ecd\u5982\u4e0b\uff1a \u524d\u516d\u4f4d\u8fd0\u8425\u5546\u4ee3\u7801\uff1a\u4e2d\u56fd\u79fb\u52a8\u7684\u4e3a\uff1a898600\uff1b\u4e2d\u56fd\u8054\u901a\u7684\u4e3a\uff1a898601\u3002</p> <p>\u5f53API&lt;29\u65f6\uff0c\u5e76\u9759\u6001\u6dfb\u52a0<code>Read_Phone_State</code>\u6743\u9650\uff0c\u540c\u65f6\u8fd0\u884c\u65f6\u6388\u6743\uff0c\u53ef\u4ee5\u8bfb\u53d6\u5230ISMI\u3001IMEI\u3001MEID\u3002</p> <p>\u73b0\u5728API&gt;=29\u65f6\uff0c\u90fd\u65e0\u6cd5\u83b7\u53d6ISMI\u3001IMEI\u3001MEID\uff0c\u770bAPI\u53ef\u77e5\uff0c\u5b83\u9700\u8981\u4ee5\u4e0b\u7684\u6743\u9650\uff1a</p> <pre><code>@RequiresPermission(android.Manifest.permission.READ_PRIVILEGED_PHONE_STATE)\n//IMSI\ntelephoneManager.getSubscriberId()\n//ICCID\ntelephoneManager.getSimSerialNumber()\n //IMEI MEID\ntelephoneManager.getDeviceID()\n</code></pre> <p>\u800c\u8fd9\u4e2a\u6743\u9650\u662f\u53ea\u6709\u7cfb\u7edf\u624d\u80fd\u83b7\u53d6\u7684\uff0c\u666e\u901a\u5e94\u7528\u65e0\u6cd5\u83b7\u53d6\uff0c\u90a3\u4e48\u5e94\u8be5\u4ee5\u600e\u6837\u7684\u65b9\u5f0f\u83b7\u53d6\u8fd9\u4e9b\u503c\u5462\uff1f</p> <ul> <li>\u83b7\u53d6MCC+MNC</li> </ul> <p><code>java   public String getNetworkOperator ()</code></p> <p>```java   //\u65e0\u9700\u6743\u9650\u5373\u53ef\u83b7\u53d6MCC+MNC   String stringNetworkOperator = telephonyManager.getNetworkOperator();   String[] stringArrayMccMnc = { \"\", \"\" };   if(TextUtils.isEmpty(stringNetworkOperator) || !isNumeric(stringNetworkOperator)){     return stringArrayMccMnc;   }</p> <p>if(!TextUtils.isEmpty(stringNetworkOperator) &amp;&amp; stringNetworkOperator.length() &gt;= 5){     stringArrayMccMnc[0] = stringNetworkOperator.substring(0, 3);     stringArrayMccMnc[1] = stringNetworkOperator.substring(3, 5);   }   return stringArrayMccMnc;   ```</p> <ul> <li>\u83b7\u53d6\u624b\u673a\u53f7</li> </ul> <p>\u9700\u8981\u4ee5\u4e0b\u6743\u9650\u7684\u4efb\u4f55\u4e00\u4e2a</p> <p><code>android.Manifest.permission.READ_PHONE_STATE,   android.Manifest.permission.READ_SMS,   android.Manifest.permission.READ_PHONE_NUMBERS</code></p> <p><code>java     //\u83b7\u53d6\u624b\u673a\u53f7   telephoneManager.getLine1Number();</code></p> <ul> <li>\u83b7\u53d6\u79fb\u52a8\u7f51\u7edc\u7c7b\u578b</li> </ul> <p><code>java   //\u9700\u8981\u6743\u9650READ_PHONE_STATE \u65e0\u6cd5\u533a\u5206\u662f\u5426\u4e3a\u65e0\u7ebf   telephoneManager.getNetworkType()   telephoneManager.getDataNetworkType();</code></p> <p>\u200b       \u6216\u8005\u8fd8\u53ef\u4ee5\u8fd9\u6837\u83b7\u53d6,\u4f46\u4e0b\u9762\u7684\u65b9\u6cd5\u5728API 29\u5df2\u88ab\u4e0a\u9762\u7684\u65b9\u6cd5\u4ee3\u66ff</p> <pre><code> //\u9700\u8981\u6743\u9650\n     ConnectivityManager connectivity = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    if (null == connManager) { // \u4e3a\u7a7a\u5219\u8ba4\u4e3a\u65e0\u7f51\u7edc\n      return NETWORK_NONE;\n    }\n    // \u83b7\u53d6\u7f51\u7edc\u7c7b\u578b\uff0c\u5982\u679c\u4e3a\u7a7a\uff0c\u8fd4\u56de\u65e0\u7f51\u7edc\n    NetworkInfo activeNetInfo = connManager.getActiveNetworkInfo();\n    if (activeNetInfo == null || !activeNetInfo.isAvailable()) {\n      return NETWORK_NONE;\n    }\n    // \u5224\u65ad\u662f\u5426\u4e3aWIFI\n    NetworkInfo wifiInfo = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n    if (null != wifiInfo) {\n      NetworkInfo.State state = wifiInfo.getState();\n      if (null != state) {\n        if (state == NetworkInfo.State.CONNECTED || state == NetworkInfo.State.CONNECTING) {\n          return NETWORK_WIFI;\n        }\n      }\n    }\n    //\u82e5\u662f\u79fb\u52a8\u7f51\u7edc\u7c7b\u578b getSubtype()\n    NetworkInfo networkInfo = connectivity.getActiveNetworkInfo();\n    if(null != networkInfo){\n      int type = networkInfo.getSubtype();\n      Log.d(TAG, \"get phone mobile type: \"+ type);\n    }\n</code></pre> <p>\u8702\u7a9d\u7f51\u7edc</p>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#cpu6432","title":"Cpu\u67b6\u6784\uff0864/32\uff09","text":""},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#android","title":"Android \u7684\u6743\u9650","text":"<p>\u5e94\u7528\u6743\u9650\u6709\u52a9\u4e8e\u4fdd\u62a4\u5bf9\u4ee5\u4e0b\u6570\u636e\u7684\u8bbf\u95ee\u548c\u5bf9\u4ee5\u4e0b\u64cd\u4f5c\u7684\u6267\u884c\uff0c\u4ece\u800c\u4e3a\u4fdd\u62a4\u7528\u6237\u9690\u79c1\u63d0\u4f9b\u652f\u6301\uff1a</p> <ul> <li>\u53d7\u9650\u6570\u636e\uff1a\u4f8b\u5982\u7cfb\u7edf\u72b6\u6001\u548c\u7528\u6237\u7684\u8054\u7cfb\u4fe1\u606f\u3002</li> <li>\u53d7\u9650\u5e94\u7528\uff1a\u4f8b\u5982\u8fde\u63a5\u5230\u5df2\u914d\u5bf9\u7684\u8bbe\u5907\u5e76\u5f55\u5236\u97f3\u9891\u3002</li> </ul>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#_1","title":"\u6743\u9650\u7684\u5de5\u4f5c\u6d41\u7a0b","text":"<p>\u5de5\u4f5c\u6d41\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p>(1) \u8bc4\u4f30\u8be5\u529f\u80fd\u662f\u5426\u4e0d\u9700\u8981\u58f0\u660e\u6743\u9650\uff0c\u82e5\u662f\uff0c\u6267\u884c(2a),\u82e5\u4e0d\u662f\u6267\u884c(2b)</p> <p>(2a) \u6267\u884c\u8be5\u529f\u80fd</p> <p>(2b) \u5728App\u7684AndroidManifest.xml\u6587\u4ef6\u4e2d\u58f0\u660e\u6743\u9650,\u63a5\u7740\u6267\u884c(3)</p> <p>(3) \u5224\u65ad\u8be5\u6743\u9650\u662f\u5426\u662f\u8fd0\u884c\u65f6\u6743\u9650\uff0c\u82e5\u662f\u6267\u884c(4),\u82e5\u4e0d\u662f\u6267\u884c(5)</p> <p>(4) \u5728\u8fd0\u884c\u65f6\u7533\u8bf7\u7528\u6237\u63d0\u4f9b\u6743\u9650\uff0c\u82e5\u7533\u8bf7\u6210\u529f\uff0c\u6267\u884c(5)</p> <p>(5)\u6267\u884c\u8be5\u529f\u80fd</p>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#_2","title":"\u6743\u9650\u7684\u7c7b\u578b","text":"<ul> <li>\u5b89\u88c5\u65f6\u6743\u9650</li> </ul> <p>\u5b89\u88c5\u65f6\u6743\u9650\u6388\u4e88\u5e94\u7528\u5bf9\u53d7\u9650\u6570\u636e\u7684\u53d7\u9650\u8bbf\u95ee\u6743\u9650\uff0c\u5e76\u5141\u8bb8\u5e94\u7528\u6267\u884c\u5bf9\u7cfb\u7edf\u6216\u5176\u4ed6\u5e94\u7528\u53ea\u6709\u6700\u4f4e\u5f71\u54cd\u7684\u53d7\u9650\u64cd\u4f5c\u3002\u5982\u679c\u60a8\u5728\u5e94\u7528\u4e2d\u58f0\u660e\u4e86\u5b89\u88c5\u65f6\u6743\u9650\uff0c\u7cfb\u7edf\u4f1a\u5728\u7528\u6237\u5b89\u88c5\u60a8\u7684\u5e94\u7528\u65f6\u81ea\u52a8\u6388\u4e88\u5e94\u7528\u76f8\u5e94\u6743\u9650\u3002\u5e94\u7528\u5546\u5e97\u4f1a\u5728\u7528\u6237\u67e5\u770b\u5e94\u7528\u8be6\u60c5\u9875\u9762\u65f6\u5411\u5176\u663e\u793a\u5b89\u88c5\u65f6\u6743\u9650\u901a\u77e5\u3002</p> <ul> <li> <p>\u666e\u901a\u6743\u9650</p> <p>\u5f71\u54cd\u8f83\u4f4e\uff0c\u7c7b\u578b\u7ea7\u522b\u4e3a\u201cnormal\u201d</p> </li> <li> <p>\u7b7e\u540d\u6743\u9650</p> <p>\u7c7b\u578b\u7ea7\u522b\u4e3a\u201csignature\u201d</p> <p>\u5f53\u5e94\u7528\u58f0\u660e\u4e86\u5176\u4ed6\u5e94\u7528\u5df2\u5b9a\u4e49\u7684\u7b7e\u540d\u6743\u9650\u65f6\uff0c\u5982\u679c\u4e24\u4e2a\u5e94\u7528\u4f7f\u7528\u540c\u4e00\u8bc1\u4e66\u8fdb\u884c\u7b7e\u540d\uff0c\u7cfb\u7edf\u4f1a\u5728\u5b89\u88c5\u65f6\u5411\u524d\u8005\u6388\u4e88\u8be5\u6743\u9650\u3002\u5426\u5219\uff0c\u7cfb\u7edf\u65e0\u6cd5\u5411\u524d\u8005\u6388\u4e88\u8be5\u6743\u9650\u3002</p> </li> </ul> <p>\u64cd\u4f5c\u6d41\u7a0b\uff1a</p> <p>\u4e00\u822c\u53ea\u9700\u8981\u58f0\u660e\u6743\u9650</p> <ul> <li>\u8fd0\u884c\u65f6\u6743\u9650</li> </ul> <p>\u5371\u9669\u6743\u9650\uff0c\u7c7b\u522b\u4e3a\u201cdangerous\u201d\u3002</p> <p>\u64cd\u4f5c\u6d41\u7a0b\uff1a</p> <p>```java   //1\u3001\u58f0\u660e\u6743\u9650          //2\u3001\u5224\u65ad\u6743\u9650\u662f\u5426\u6388\u4e88   //3\u3001\u5224\u65ad\u662f\u5426\u9700\u8981\u663e\u793a\u539f\u56e0   //4\u3001\u8bf7\u6c42\u6743\u9650             TelephonyManager manager = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);   try {     //\u5224\u65ad\u6743\u9650\u662f\u5426\u6388\u4e88     if (ActivityCompat.checkSelfPermission(this,                                            Manifest.permission.READ_SMS) != PackageManager.PERMISSION_GRANTED &amp;&amp;         ActivityCompat.checkSelfPermission(this,                                            Manifest.permission.READ_PHONE_NUMBERS) != PackageManager.PERMISSION_GRANTED &amp;&amp;         ActivityCompat.checkSelfPermission(this,                                            Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {       //\u5224\u65ad\u662f\u5426\u9700\u8981\u663e\u793a\u539f\u56e0       if(shouldShowRequestPermissionRationale(\"\u9700\u8981\u624b\u673a\u53f7\")){         //\u8bf7\u6c42\u6743\u9650         requestPermissions(new String[] { Manifest.permission.READ_PHONE_STATE },PERMISSION_REQUEST);       } else {         requestPermissions(new String[] { Manifest.permission.READ_PHONE_STATE },PERMISSION_REQUEST);       }       return;     }     //\u6267\u884c\u6743\u9650     String phone = manager.getLine1Number();     Log.d(TAG, \"get phone Number\"+ phone);     int type = manager.getDataNetworkType();     Log.d(TAG, \"get phone mobile type: \"+ type);     String imsl = manager.getSubscriberId();     Log.d(TAG, \"get phone imsl\"+ imsl);   } catch (Exception e){     Log.d(TAG, \"onStartTestIMSL: get phone fail\"+ e.toString());   }   //5\u3001\u6267\u884c\u6743\u9650\uff0c\u7528\u6237\u540c\u610f\u540e\uff0c\u56de\u8c03\u8fdb\u884c\u5904\u7406Activity#onRequestPermissionsResult       @Override       public void onRequestPermissionsResult(int requestCode, String[] permissions,                                              int[] grantResults) {           switch (requestCode){               case PERMISSION_REQUEST:                   if(grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED){                       TelephonyManager manager = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);                       try {                           Log.d(TAG, \"onRequestPermissionsResult: \");                           String phone = manager.getLine1Number();                           Log.d(TAG, \"get phone Number\"+ phone);                           int type = manager.getDataNetworkType();                           Log.d(TAG, \"get phone mobile type: \"+ type);                           String imsl = manager.getSubscriberId();                           Log.d(TAG, \"get phone imsl \"+ imsl);                       } catch (Exception e){                           Log.d(TAG, \"get read_phone_state faild;\"+ e.toString());                       }</p> <pre><code>              } else {\n                  Log.d(TAG, \"get read_phone_state faild\");\n              }\n              break;\n          default:\n              break;\n      }\n  }\n</code></pre> <p>```</p> <ul> <li>\u7279\u6b8a\u6743\u9650</li> </ul> <p>\u7cfb\u7edf\u81ea\u5b9a\u4e49\u7684\u7279\u6b8a\u6743\u9650\uff0c\u7c7b\u522b\u4e3a\u201cappop\u201d</p> <ul> <li>\u81ea\u5b9a\u4e49\u6743\u9650</li> </ul> <p>\u4e3a\u81ea\u5df1\u5e94\u7528\u7684\u6570\u636e\u6216\u64cd\u4f5c\u63d0\u4f9b\u76f8\u5e94\u7684\u81ea\u5b9a\u4e49\u6743\u9650</p>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#android_1","title":"Android \u65e0\u969c\u788d\u9002\u914d","text":"<ul> <li> <p>\u65e0\u969c\u788d\u626b\u63cf\u5668 Accessibility Scanner</p> </li> <li> <p>\u65b9\u4fbf\u6821\u5bf9\u9002\u914d\u6548\u679c</p> </li> <li> <p>\u4e0d\u7528\u6253\u5f00Talkback</p> </li> <li> <p>\u4f7f\u7528 ViewCompat#setAccessibilityDelegate(View, AccessibilityDelegateCompat) \u8fdb\u884c\u7edf\u4e00\u5904\u7406</p> </li> </ul> <p>\u5177\u4f53\u65b9\u5f0f\uff1a</p> <p><code>java   AccessibilityDelegateCompat</code></p> <p>\u5f00\u59cb\u7cbe\u786e\u5b9a\u4f4d</p> <p>WeiboLocationManager#startRealtimeFuzzyLocation</p> <p>WeiboLocationManager#startNotGmsFuzzyLocation</p>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#android_2","title":"Android \u6253\u5305\u7b7e\u540d","text":"<p>\u5c06Apk\u89e3\u538b\u6216\u4f7f\u7528Android Studio \u5206\u6790\u540e\uff0c\u4f1a\u6709\u4e09\u4e2a\u6587\u4ef6</p> <ul> <li>MANIFEST.MF</li> <li>CERT.SF</li> <li>CERT.RSA</li> </ul>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#android-studio42","title":"Android studio\u4ece4.2\u4e4b\u540e\u6362\u6210\u65b0\u7684\u547d\u540d\u65b9\u5f0f","text":""},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#_3","title":"\u4e00.\u80cc\u666f","text":"<p>\u4ee5\u4e0b Android Studio  \u7b80\u79f0 as \u4ee5\u4e0b Android Gradle Plugin  \u7b80\u79f0 AGP</p> <p>as\u5b98\u65b9\u4e0b\u8f7d\u5730\u5740</p> <p>\u6211\u521a\u5f00\u59cb\u5b66Android \u7f16\u7a0b\u7684\u65f6\u5019\uff0c\u8fd8\u5728\u7528Eclipse\uff0c\u540e\u9762\u5f00\u59cb\u7528as\uff0c\u4ece as <code>2.0</code> \u4e0d\u65ad\u5347\u7ea7\u5230 <code>4.2</code>\uff082021\u5e744\u6708\uff09\u3002\u7531\u4e8e as \u672c\u8eab\u662f\u57fa\u4e8e Intellij \u514b\u9686\u7684\uff0c\u4e3a\u4e86\u548cIntellij\u7248\u672c\u53f7\u4fdd\u6301\u4e00\u81f4\uff0c \u8c37\u6b4c\u5728 2020\u5e7411\u6708\u5bf9 as \u7248\u672c\u53f7\u7684\u53eb\u6cd5\u8fdb\u884c\u4e86\u53d8\u66f4\uff0c\u70b9\u51fb\u4e86\u89e3\u53d8\u66f4\u8bf4\u660e\u3002</p>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#202031","title":"\u4e8c.\u7b2c\u4e00\u4e2a\u65b0\u7248\u672c2020.3.1","text":"<p>\u5982\u679c\u6cbf\u7528\u4ee5\u524d\u7684\u7f16\u53f7\u53eb\u6cd5\uff0c2021\u5e748\u6708\u53d1\u5e03\u7684\u7248\u672c\u5e94\u53eb as 4.3\u3002\u4f46\u662f\uff0c\u65b0\u7248\u7f16\u53f7\u7cfb\u7edf\u5c06\u5176\u547d\u540d\u4e3a Android Studio Arctic Fox (2020.3.1)\uff0c\u6216\u7b80\u79f0\u4e3a<code>Arctic Fox</code>\uff08\u5317\u6781\u72d0\uff09\u3002</p> <p></p> <p>\u73b0\u5728\u662f2021\u5e74\uff0c\u600e\u4e48\u65b0\u7684\u7248\u672c\u7f16\u53f7\u540d\u53cd\u800c\u53eb2020.3.1\u4e86\uff0c\u662f\u4e0d\u662f\u8d8a\u66f4\u65b0\u8d8a\u65e7\uff1f\u5176\u5b9e\u4e0d\u662f\u8fd9\u6837\u7684\uff0c\u540d\u5b57\u53ea\u662f\u4e00\u4e2a\u53eb\u6cd5\uff0c\u5177\u4f53\u542b\u4e49\u5982\u4e0b\u3002</p>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#21","title":"2.1 \u65b0\u7f16\u53f7\u8bf4\u660e","text":"<ul> <li>\u7b2c1 \u548c \u7b2c2 \u7ec4\u6570\u5b57\uff1aas\u662f\u57fa\u4e8e IntelliJ  \u5e73\u53f0\u7684\u54ea\u4e2a\u7248\u672c\u8fdb\u884c\u8fed\u4ee3\u7684\u3002</li> <li>\u7b2c3\u7ec4\u6570\u5b57\uff1a as \u4e3b\u7248\u672c\u4ece 1 \u5f00\u59cb\uff0c\u6bcf\u4e2a\u4e3b\u7248\u672c\u9012\u589e 1\u3002</li> <li>\u7b2c4\u7ec4\u6570\u5b57\uff1a as \u6b21\u8981\u7248\u672c/\u8865\u4e01\u7a0b\u5e8f\u7248\u672c\uff0c\u4ece1\u5f00\u59cb\uff0c\u6bcf\u4e2a\u6b21\u8981\u7248\u672c\u9012\u589e1\u3002\u56e0\u4e3a\u662f\u7b2c\u4e00\u4e2a\u7248\u672c\uff0c\u6682\u65f6\u6ca1\u6709\u8865\u4e01\u3002\u540e\u7eed\u5982\u679cas\u5347\u7ea7\uff0c\u4f1a\u53eb\u505a\uff1a2020.3.1.1\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u8fd8\u5c06\u4e3a\u6bcf\u4e2a\u4e3b\u8981\u7248\u672c\u63d0\u4f9b\u7248\u672c\u540d\u79f0\uff0c\u5206\u522b\u4ee5A \u5230Z \u7684\u52a8\u7269\u6765\u547d\u540d\u3002\u6240\u4ee5\uff1a2020.3.1 ==  Arctic Fox\u3002</p>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#22-as","title":"2.2 \u4e3a\u5565as\u8981\u6539\u540d\uff1f","text":"<ul> <li>\u65b0\u7684\u547d\u540d\u66f4\u52a0\u7b26\u5408 IntelliJ \u7684\u547d\u540d\u89c4\u8303\uff0c\u4e0eIntellij \u7248\u672c\u53f7 \u5bf9\u9f50\u3002</li> <li>\u65b0\u547d\u540d\u7ed9\u5f00\u53d1\u8005\u5e26\u6765\u4e86\u66f4\u591a\u7684\u53ef\u89c1\u6027\uff0c\u6bd4\u5982\u6211\u4eec\u80fd\u660e\u786e\u77e5\u9053as\u7248\u672c\u662f\u57fa\u4e8e IntelliJ \u54ea\u4e2a\u7248\u672c\u5f00\u53d1\u7684\u3002</li> </ul>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#23-agp-as","title":"2.3 AGP\u7248\u672c \u4e0e as \u7248\u672c\u89e3\u8026","text":"<p>\u4ee5\u524d\u6211\u4eec\u5347\u7ea7\u4e86as\u7248\u672c\u540e\uff0c \u901a\u5e38\u4f1a\u5728\u9879\u76ee\u4e0b\u7684build.gradle \u91cc\u66f4\u65b0 AGP\u63d2\u4ef6\u7248\u672c</p> <pre><code>   dependencies {\n      classpath \"com.android.tools.build:gradle:4.2\" // \u4ee5\u524d\n     // classpath \"com.android.tools.build:gradle:7.0.0\" // \u73b0\u5728\n   }\n</code></pre> <ul> <li>\u4ee5\u524dGradle\u63d2\u4ef6\u7684\u7248\u672c\u4e00\u76f4\u4ee5\u6765\u90fd\u662f\u4e0eAS\u7684\u7248\u672c\u4fdd\u6301\u4e00\u81f4\u7684\u3002</li> <li>\u73b0\u5728AGP\u7684\u7248\u672c\u4e0eas\u7684\u7248\u672c\u53d8\u5316\u89e3\u8026\uff0cAGP \u7248\u672c\u4e0d\u518d\u8ddf\u968fAndroid Studio\u7684\u4e3b\u7248\u672c\u53d8\u5316\u548c\u53d1\u7248\u8282\u594f\u3002\u5728AGP 7.0\u4e4b\u540e\uff0cGradle\u5c06\u4f1a\u63a8\u51fa\u81ea\u5df1\u7684\u5e74\u5ea6\u4e3b\u8981\u7248\u672c\uff0c\u6bcf\u5e74\u53d1\u5e03\u4e00\u4e2a\u4e3b\u8981\u7248\u672c\u3002</li> <li>AGP 7.0 \u6700\u4f4eJDK\u7248\u672c\u8981\u6c42<code>JAVA 11</code> \uff0cAGP \u53ea\u4f1a1\u5e74\u53d1\u5e03\u4e00\u4e2a\u5927\u7248\u672c\uff0c\u6bd4\u5982 2021\u53d1\u5e03\u4e86AGP 7.0, \u540e\u7eed\u8865\u4e01\u4e5f\u662f\u57fa\u4e8e7.1.1 \uff0c7.1.2\u3002  \u4f7f\u7528\u7a33\u5b9a\u7248AGP \u7684\u9879\u76ee\u53ef\u4ee5\u4f7f\u7528\u8f83\u65b0\u7248\u672c\u7684as\u4e2d\u3002</li> </ul> <p>https://www.shouxicto.com/?url=aHR0cHM6Ly9naXRodWIuY29tL2FuZHJvaWQvY29tcG9zZS1zYW1wbGVz)</p>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#canarybeta","title":"\u4e09.Canary\u548cBeta\u533a\u522b","text":"<ul> <li>Canary \u7248\uff1a\u8fd9\u4e9b\u662f\u524d\u6cbf\u7248\u672c\uff0c\u5927\u7ea6\u6bcf\u5468\u66f4\u65b0\u4e00\u6b21\uff0c\u4e0b\u8f7d\u5730\u5740\u3002</li> </ul> <p>\u9664\u4e86\u63a5\u6536 Android Studio \u7684 Canary \u7248\u4e4b\u5916\uff0c\u60a8\u8fd8\u5c06\u6536\u5230\u5176\u4ed6 SDK \u5de5\u5177\u7684\u9884\u89c8\u7248\uff0c\u5305\u62ec Android \u6a21\u62df\u5668\u3002</p> <p>\u867d\u7136\u8fd9\u4e9b\u7248\u672c\u5b58\u5728\u8f83\u591a\u7684\u9519\u8bef\uff0c\u4f46\u5b83\u4eec\u5df2\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u6211\u4eec\u5e0c\u671b\u4e3a\u60a8\u63d0\u4f9b\u8fd9\u4e9b\u7248\u672c\uff0c\u4ee5\u4fbf\u60a8\u5c1d\u8bd5\u65b0\u529f\u80fd\u5e76\u63d0\u4f9b\u53cd\u9988\u3002\u6b64\u7248\u672c\u4e0d\u63a8\u8350\u7528\u4e8e\u751f\u4ea7\u5f00\u53d1\u3002</p> <ul> <li> <p>\u5f00\u53d1\u8005\u7248\uff1a\u8fd9\u4e9b\u662f\u7cbe\u5fc3\u6311\u9009\u7684 Canary \u7248\u672c\uff0c\u5df2\u7ecf\u8fc7\u5168\u9762\u7684\u5185\u90e8\u6d4b\u8bd5\u3002</p> </li> <li> <p>Beta \u7248\uff1a\u8fd9\u4e9b\u662f\u57fa\u4e8e\u7a33\u5b9a Canary build \u7684\u5019\u9009\u7248\u672c\uff0c\u8fd9\u7c7b\u7248\u672c\u4f1a\u5148\u6536\u96c6\u53cd\u9988\uff0c\u7136\u540e\u518d\u4f5c\u4e3a\u7a33\u5b9a\u7248\u8fdb\u884c\u53d1\u5e03\u3002</p> </li> <li> <p>\u7a33\u5b9a\u7248\uff1a\u5b98\u65b9\u7a33\u5b9a\u7248\u4e0b\u8f7d\u5730\u5740\u3002</p> </li> </ul>"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#packagemanager","title":"PackageManager","text":"<p>PackageManager\u4e3b\u8981\u662f\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u5305\uff0c\u901a\u8fc7\u5b83\u5c31\u53ef\u4ee5\u83b7\u53d6\u5e94\u7528\u7a0b\u5e8f\u4fe1\u606f</p> <p>\u83b7\u5f97\u5df2\u5b89\u88c5\u7684\u5e94\u7528\u7a0b\u5e8f\u4fe1\u606f \u3002\u53ef\u4ee5\u901a\u8fc7getPackageManager()\u65b9\u6cd5\u83b7\u5f97\u3002</p> <p>\u4e3b\u8981\u65b9\u6cd5\uff1a</p> <pre><code>public abstract PackageManager getPackageManager()  \n\u529f\u80fd\uff1a\u83b7\u5f97\u4e00\u4e2aPackageManger\u5bf9\u8c61  public abstract Drawable getApplicationIcon(String packageName)\n\u53c2\u6570\uff1a packageName \u5305\u540d\n\u529f\u80fd\uff1a\u8fd4\u56de\u7ed9\u5b9a\u5305\u540d\u7684\u56fe\u6807\uff0c\u5426\u5219\u8fd4\u56denull\n\npublic abstract ApplicationInfo   getApplicationInfo(String packageName, int flags)\n\u53c2\u6570\uff1apackagename \u5305\u540d,flags \u8be5ApplicationInfo\u662f\u6b64flags\u6807\u8bb0\uff0c\u901a\u5e38\u53ef\u4ee5\u76f4\u63a5\u8d4b\u4e88\u5e38\u65700\u5373\u53ef\n\u529f\u80fd\uff1a\u8fd4\u56de\u8be5ApplicationInfo\u5bf9\u8c61\npublic abstract List&lt;ApplicationInfo&gt;  getInstalledApplications(int flags)\n\u53c2\u6570\uff1aflag\u4e3a\u4e00\u822c\u4e3aGET_UNINSTALLED_PACKAGES\uff0c\u90a3\u4e48\u6b64\u65f6\u4f1a\u8fd4\u56de\u6240\u6709ApplicationInfo\u3002\u6211\u4eec\u53ef\u4ee5\u5bf9ApplicationInfo\n\u3000\u3000\u7684flags\u8fc7\u6ee4,\u5f97\u5230\u6211\u4eec\u9700\u8981\u7684\u3002\n\u529f\u80fd\uff1a\u8fd4\u56de\u7ed9\u5b9a\u6761\u4ef6\u7684\u6240\u6709PackageInfo\npublic abstract List&lt;PackageInfo&gt;  getInstalledPackages(int flags) \n\u53c2\u6570:flag\u4e3a\u4e00\u822c\u4e3aGET_UNINSTALLED_PACKAGES\uff0c\u90a3\u4e48\u6b64\u65f6\u4f1a\u8fd4\u56de\u6240\u6709PackageInfo\u3002\u6211\u4eec\u53ef\u4ee5\u5bf9ApplicationInfo\n\u3000\u3000\u7684flags\u8fc7\u6ee4,\u5f97\u5230\u6211\u4eec\u9700\u8981\u7684\u3002\n\u529f\u80fd\uff1a\u8fd4\u56de\u7ed9\u5b9a\u6761\u4ef6\u7684\u6240\u6709PackageInfo\npublic abstractResolveInfo  resolveActivity(Intent intent, int flags)\n\u53c2\u6570\uff1aintent\u67e5\u5bfb\u6761\u4ef6\uff0cActivity\u6240\u914d\u7f6e\u7684action\u548ccategory\n\u3000\u3000flags\uff1a MATCH_DEFAULT_ONLY  \uff1aCategory\u5fc5\u987b\u5e26\u6709CATEGORY_DEFAULT\u7684Activity\uff0c\u624d\u5339\u914d\n\u3000\u3000GET_INTENT_FILTERS   \uff1a\u5339\u914dIntent\u6761\u4ef6\u5373\u53ef\n\u3000\u3000GET_RESOLVED_FILTER  \uff1a\u5339\u914dIntent\u6761\u4ef6\u5373\u53ef\n\u529f\u80fd \uff1a\u8fd4\u56de\u7ed9\u5b9a\u6761\u4ef6\u7684ResolveInfo\u5bf9\u8c61(\u672c\u8d28\u4e0a\u662fActivity)\npublic abstract  List&lt;ResolveInfo&gt;  queryIntentActivities(Intent intent, int flags)\n\u53c2\u6570\u540c\u4e0a\n\u529f\u80fd \uff1a\u8fd4\u56de\u7ed9\u5b9a\u6761\u4ef6\u7684\u6240\u6709ResolveInfo\u5bf9\u8c61(\u672c\u8d28\u4e0a\u662fActivity)\uff0c\u96c6\u5408\u5bf9\u8c61\npublic abstract ResolveInfo  resolveService(Intent intent, int flags)\n\u53c2\u6570\u540c\u4e0a\n\u529f\u80fd \uff1a\u8fd4\u56de\u7ed9\u5b9a\u6761\u4ef6\u7684ResolveInfo\u5bf9\u8c61(\u672c\u8d28\u4e0a\u662fService)\npublic abstract List&lt;ResolveInfo&gt; queryIntentServices(Intent intent, int flags)\n\u53c2\u6570\u540c\u4e0a\n\u529f\u80fd \uff1a\u8fd4\u56de\u7ed9\u5b9a\u6761\u4ef6\u7684\u6240\u6709ResolveInfo\u5bf9\u8c61(\u672c\u8d28\u4e0a\u662fService)\uff0c\u96c6\u5408\u5bf9\u8c61\n</code></pre> <ul> <li>PackageInfo </li> </ul> <p>\u8bf4\u660e\uff1a\u624b\u52a8\u83b7\u53d6AndroidManifest.xml\u6587\u4ef6\u7684\u4fe1\u606f \u3002</p> <p>\u5e38\u7528\u5b57\u6bb5\uff1a</p> <p>public String  packageName          \u5305\u540d</p> <p>public ActivityInfo[]   activities          \u6240\u6709\u8282\u70b9\u4fe1\u606f <p>public ApplicationInfo applicationInfo    \u8282\u70b9\u4fe1\u606f\uff0c\u53ea\u6709\u4e00\u4e2a <p>public ActivityInfo[]  receivers         \u6240\u6709\u8282\u70b9\u4fe1\u606f\uff0c\u591a\u4e2a <p>public ServiceInfo[]  services         \u6240\u6709\u8282\u70b9\u4fe1\u606f \uff0c\u591a\u4e2a <ul> <li>ResoveInfo</li> </ul> <p>\u8bf4\u660e\uff1a\u6839\u636e\u8282\u70b9\u6765\u83b7\u53d6\u5176\u4e0a\u4e00\u5c42\u76ee\u5f55\u7684\u4fe1\u606f\uff0c\u901a\u5e38\u662f\u3001\u3001\u8282\u70b9\u4fe1\u606f\u3002 <ul> <li>PackageItemInfo</li> </ul> <p>\u8bf4\u660e\uff1a AndroidManifest.xml\u6587\u4ef6\u4e2d\u6240\u6709\u8282\u70b9\u7684\u57fa\u7c7b\uff0c\u63d0\u4f9b\u4e86\u8fd9\u4e9b\u8282\u70b9\u7684\u57fa\u672c\u4fe1\u606f\uff1alabel\u3001icon\u3001 meta-data\u3002\u5b83\u5e76\u4e0d</p> <p>\u76f4\u63a5\u4f7f\u7528\uff0c\u800c\u662f\u7531\u5b50\u7c7b\u7ee7\u627f\u7136\u540e\u8c03\u7528\u76f8\u5e94\u65b9\u6cd5\u3002</p> <ul> <li>ApplicationInfo</li> </ul> <p>\u8bf4\u660e\uff1a\u83b7\u53d6\u4e00\u4e2a\u7279\u5b9a\u5f15\u7528\u7a0b\u5e8f\u4e2d\u8282\u70b9\u7684\u4fe1\u606f\u3002 <p>\u5b57\u6bb5\u8bf4\u660e\uff1aflags\u5b57\u6bb5\uff1a FLAG_SYSTEM\u3000\u7cfb\u7edf\u5e94\u7528\u7a0b\u5e8f\u3001FLAG_EXTERNAL_STORAGE\u3000\u8868\u793a\u8be5\u5e94\u7528\u5b89\u88c5\u5728sdcard\u4e2d</p> <p>\u5e38\u7528\u65b9\u6cd5\u7ee7\u627f\u81f3PackageItemInfo\u7c7b\u4e2d\u7684loadIcon()\u548cloadLabel()</p> <ul> <li>ActivityInfo </li> </ul> <p>\u8bf4\u660e\uff1a \u83b7\u5f97\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6216\u8005 \u8282\u70b9\u7684\u4fe1\u606f \u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5b83\u6765\u83b7\u53d6\u6211\u4eec\u8bbe\u7f6e\u7684\u4efb\u4f55\u5c5e\u6027\uff0c\u5305\u62ectheme \u3001launchMode\u3001launchmode\u7b49.</p> <p>\u5e38\u7528\u65b9\u6cd5\u7ee7\u627f\u81f3PackageItemInfo\u7c7b\u4e2d\u7684loadIcon()\u548cloadLabel()</p> <ul> <li>ServiceInfo </li> </ul> <p>\u8bf4\u660e\uff1a \u540cActivityInfo\u7c7b\u4f3c \uff0c\u540c\u6837\u7ee7\u627f\u81ea PackageItemInfo\uff0c\u53ea\u4e0d\u8fc7\u5b83\u8868\u793a\u7684\u662f\u8282\u70b9\u4fe1\u606f\u3002"},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#activitymanager","title":"ActivityManager","text":""},{"location":"Android/7Android%20%E6%9D%82%E8%AE%B0/#anr","title":"ANR","text":"<p>ANR\u2014\u2014\u5e94\u7528\u65e0\u54cd\u5e94\uff0cActivity\u662f5\u79d2\uff0cBroadCastReceiver\u662f10\u79d2\uff0cService\u662f20\u79d2\u3002</p> <p>\u67e5\u770bANR \u7684\u4e00\u4e2a\u7b80\u5355\u65b9\u6cd5</p> <p>1.adb bugreport anrlog.zip</p> <p>Analog.zip\u662f\u6587\u4ef6\u540d\uff0c\u53ef\u4ee5\u968f\u4fbf\u5199</p> <p>2.\u6253\u5f00bugreport\u6587\u4ef6\uff0c\u67e5\u627e\u6700\u8fd1\u4e00\u6b21\u7684ANR</p> <p>VM TRACES AT LAST ANR</p> <p>ANR \u4ea7\u751f\u539f\u56e0\uff1a</p> <p>1.\u8f93\u5165\u4e8b\u4ef6\u8d85\u65f6 5s,\u5305\u62ec\u6309\u952e\u548c\u89e6\u6478\u4e8b\u4ef6</p> <p>2.\u670d\u52a1\u8d85\u65f6\uff1a\u524d\u53f0\u670d\u52a1\u572820s\u5185\u672a\u6267\u884c\u5b8c\u6210\uff0c\u540e\u53f0\u670d\u52a1\u5728200s\u5185\u672a\u5b8c\u6210</p> <p>3.\u5e7f\u64ad\u7c7b\u578b\u8d85\u65f6\uff0c\u524d\u53f015s,\u540e\u53f060s</p> <p>4.ContentProvider \u5728\u8bbf\u95eeContentProvider\u53ef\u4ee5\u81ea\u5b9a\u4e49ANR\u7684\u65f6\u95f4</p> <p>\u5728onCreate()\u65f6\u5904\u7406\u8017\u65f6\u64cd\u4f5c\u4e0d\u4f1a\u9020\u6210ANR\u7684\u64cd\u4f5c\uff0c\u56e0\u4e3a\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u6267\u884c\u8017\u65f6\u64cd\u4f5c\u540e\u518d\u6b21\u70b9\u51fb\u5c4f\u5e55\u6309\u952e\u624d\u4f1a\u4ea7\u751fANR\uff0conPause()\u4e2d\u66f4\u5bb9\u6613\u4ea7\u751fANR.</p>"},{"location":"Android/8Android%E6%B7%B7%E6%B7%86%E2%80%94%E2%80%94proguard/","title":"8Android\u6df7\u6dc6\u2014\u2014proguard","text":"<p>ProGuard is a free Java class file shrinker, optimizer, obfuscator, and preverifier.</p> <p>ProGurad\u662f\u4e00\u4e2a\u514d\u8d39\u7684Java\u6587\u4ef6\u7684\u538b\u7f29\u5668\u3001\u4f18\u5316\u5668\u3001\u6df7\u6dc6\u5668\u548c\u9884\u9a8c\u8bc1\u5668\u3002</p> <ul> <li>The shrinking step detects and removes unused classes, fields, methods, and attributes.</li> <li>The optimizer step optimizes bytecode and removes unused instructions.</li> <li>The obfuscation step renames the remaining classes, fields, and methods using short meaningless names.</li> <li>The final preverification step adds preverification information to the classes, which is required for Java Micro Edition and for Java 6 and higher.\uff08Android \u4e0d\u9700\u8981\uff09</li> </ul>"},{"location":"Android/8Android%E6%B7%B7%E6%B7%86%E2%80%94%E2%80%94proguard/#_1","title":"\u5165\u53e3\u70b9","text":"<p>\u4e3a\u4e86\u4f7fProguard\u77e5\u6653\u54ea\u4e9b\u4ee3\u7801\u5e94\u8be5\u4fdd\u7559\u3001\u4e22\u5f03\u6216\u8005\u6df7\u6dc6\uff0c\u9700\u8981\u4e3a\u4ee3\u7801\u5236\u5b9a\u4e00\u4e2a\u6216\u591a\u4e2a\u5165\u53e3\u70b9.</p> <ul> <li>shrinking:\u901a\u8fc7seeds,\u9012\u5f52\u786e\u5b9a\u54ea\u4e9b\u7c7b\u3001\u7c7b\u6210\u5458\u8981\u4f7f\u7528\uff0c\u54ea\u4e9b\u8981\u5e9f\u5f03</li> <li>optimizer:\u8fdb\u4e00\u6b65\u4f18\u5316\uff0c\u4e0d\u662f\u5165\u53e3\u70b9\u7684\u7c7b\u3001\u65b9\u6cd5\u3001\u6210\u5458\u5c06\u4f1a\u8bbe\u7f6e\u6210<code>private</code>\u3001<code>static</code>\u3001<code>final</code>,\u65e0\u7528\u7684\u53c2\u6570\u4f1a\u88ab\u79fb\u9664\u6389\uff0c\u4e00\u4e9b\u65b9\u6cd5\u5c06\u4f1a\u6539\u4e3a\u5185\u8054\u51fd\u6570\u3002</li> <li>obfuscation: \u91cd\u547d\u540d\u4e0d\u662f\u5165\u53e3\u70b9\u7684\u7c7b\u548c\u7c7b\u540d\uff0c\u5165\u53e3\u70b9\u7684\u5b58\u5728\u4fdd\u8bc1\u4e86\u53ef\u4ee5\u901a\u8fc7\u539f\u59cb\u540d\u79f0\u8bbf\u95ee\u5230\u5b83\u3002</li> </ul>"},{"location":"Android/8Android%E6%B7%B7%E6%B7%86%E2%80%94%E2%80%94proguard/#proguard","title":"Proguard\u4f7f\u7528\u8bf4\u660e","text":"<p>\u5b98\u7f51\u4f7f\u7528\u624b\u518c</p>"},{"location":"Android/8Android%E6%B7%B7%E6%B7%86%E2%80%94%E2%80%94proguard/#r8","title":"R8","text":""},{"location":"Android/8Android%E6%B7%B7%E6%B7%86%E2%80%94%E2%80%94proguard/#android-proguard","title":"Android Proguard\u4f7f\u7528","text":"<p>\u91cd\u70b9\u662f\u5982\u4f55\u5c06\u914d\u7f6e\u6587\u4ef6\u90e8\u7f72\u5728Android project\uff0c\u4ee5\u53ca\u8f93\u51fa\u6587\u4ef6\u7684\u4f7f\u7528</p> <p>1.\u5f00\u542f\u6df7\u6dc6</p> <pre><code>  buildTypes {\n        debug {\n          //\u5f00\u542f\u6df7\u6dc6\u68c0\u67e5\n            minifyEnabled true\n            // Enables resource shrinking, which is performed by the\n            // Android Gradle plugin.\n            shrinkResources true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n</code></pre> <ol> <li>\u5728<code>proguard-rules.pro</code>\u6587\u4ef6\u4e2d\u6dfb\u52a0\u914d\u7f6e\u4fe1\u606f\uff0c</li> </ol> <pre><code>#\u5e38\u7528\u914d\u7f6e\n-optimizationpasses 5\n# \u6df7\u6dc6\u65f6\u4e0d\u4f7f\u7528\u5927\u5c0f\u5199\u6df7\u5408\uff0c\u6df7\u6dc6\u540e\u7684\u7c7b\u540d\u4e3a\u5c0f\u5199\n-dontusemixedcaseclassnames\n# \u6307\u5b9a\u4e0d\u53bb\u5ffd\u7565\u975e\u516c\u5171\u5e93\u7684\u7c7b\n-dontskipnonpubliclibraryclasses\n# \u6307\u5b9a\u4e0d\u53bb\u5ffd\u7565\u975e\u516c\u5171\u5e93\u7684\u6210\u5458\n-dontskipnonpubliclibraryclassmembers\n# \u6df7\u6dc6\u65f6\u4e0d\u505a\u9884\u6821\u9a8c\n-dontpreverify\n# \u6df7\u6dc6\u65f6\u4e0d\u8bb0\u5f55\u65e5\u5fd7\n-verbose\n# \u4ee3\u7801\u4f18\u5316\n-dontshrink\n# \u4e0d\u4f18\u5316\u8f93\u5165\u7684\u7c7b\u6587\u4ef6\n-dontoptimize\n# \u4fdd\u7559\u6ce8\u89e3\u4e0d\u6df7\u6dc6\n-keepattributes *Annotation*,InnerClasses\n# \u907f\u514d\u6df7\u6dc6\u6cdb\u578b\n-keepattributes Signature\n# \u4fdd\u7559\u4ee3\u7801\u884c\u53f7\uff0c\u65b9\u4fbf\u5f02\u5e38\u4fe1\u606f\u7684\u8ffd\u8e2a\n-keepattributes SourceFile,LineNumberTable\n# \u6df7\u6dc6\u91c7\u7528\u7684\u7b97\u6cd5\n-optimizations !code/simplification/cast,!field/*,!class/merging/*\n\n# dump.txt\u6587\u4ef6\u5217\u51faapk\u5305\u5185\u6240\u6709class\u7684\u5185\u90e8\u7ed3\u6784\n-dump proguard/class_files.txt\n# seeds.txt\u6587\u4ef6\u5217\u51fa\u672a\u6df7\u6dc6\u7684\u7c7b\u548c\u6210\u5458\n-printseeds proguard/seeds.txt\n# usage.txt\u6587\u4ef6\u5217\u51fa\u4eceapk\u4e2d\u5220\u9664\u7684\u4ee3\u7801\n-printusage proguard/unused.txt\n# mapping.txt\u6587\u4ef6\u5217\u51fa\u6df7\u6dc6\u524d\u540e\u7684\u6620\u5c04\n-printmapping proguard/mapping.txt\n\n# Android\u7c7b\n-keep public class * extends android.app.Activity\n-keep public class * extends android.app.Application\n-keep public class * extends android.app.Service\n-keep public class * extends android.content.BroadcastReceiver\n-keep public class * extends android.content.ContentProvider\n-keep public class * extends android.app.backup.BackupAgentHelper\n-keep public class * extends android.preference.Preference\n-keep public class * extends android.view.View\n\n# support\n-keep class android.support.** {*;}\n-keep public class * extends android.support.**\n-dontwarn android.support.**\n-keep interface android.support.** { *; }\n\n# androidx\n-keep class androidx.** {*;}\n-keep interface androidx.** {*;}\n-keep public class * extends androidx.**\n-dontwarn androidx.**\n\n# \u81ea\u5b9a\u4e49\u63a7\u4ef6\n-keep public class * extends android.view.View{\n    *** get*();\n    void set*(***);\n    public &lt;init&gt;(android.content.Context);\n    public &lt;init&gt;(android.content.Context, android.util.AttributeSet);\n    public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int);\n}\n\n# R\u6587\u4ef6\n-keep class **.R$* {\n *;\n}\n\n# webview\n-keepclassmembers class android.webkit.WebView {\n   public *;\n}\n-keepclassmembers class * extends android.webkit.WebViewClient {\n    public void *(android.webkit.WebView, java.lang.String, android.graphics.Bitmap);\n    public boolean *(android.webkit.WebView, java.lang.String);\n}\n-keepclassmembers class * extends android.webkit.WebViewClient {\n    public void *(android.webkit.WebView, *);\n}\n\n# \u6309\u952e\u7b49\u4e8b\u4ef6\n-keepclassmembers class * {\n    void *(**On*Event);\n}\n# onClick\n-keepclassmembers class * extends android.app.Activity{\n    public void *(android.view.View);\n}\n\n#\u679a\u4e3e\u7c7b\u578b\n-keepclassmembers enum * {\n    public static **[] values();\n    public static ** valueOf(java.lang.String);\n}\n\n# native\u65b9\u6cd5\n-keepclasseswithmembernames class * {\n    native &lt;methods&gt;;\n}\n# View\u6784\u9020\u65b9\u6cd5\n-keepclasseswithmembers class * {\n    public &lt;init&gt;(android.content.Context, android.util.AttributeSet);\n    public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int);\n}\n# Parcelable\n-keep class * implements android.os.Parcelable {\n  public static final android.os.Parcelable$Creator *;\n}\n# Serializable\n-keepclassmembers class * implements java.io.Serializable {\n    static final long serialVersionUID;\n    private static final java.io.ObjectStreamField[] serialPersistentFields;\n    private void writeObject(java.io.ObjectOutputStream);\n    private void readObject(java.io.ObjectInputStream);\n    java.lang.Object writeReplace();\n    java.lang.Object readResolve();\n}\n\n</code></pre> <ol> <li>\u6267\u884c./gradlew \u811a\u672c</li> </ol> <pre><code>./gradlew app:assembledebug\n./gradlew app:assembleRelease\n</code></pre> <ol> <li> <p>\u5728\u3010appMoudle\u3011-&gt;build-&gt;outputs-&gt;mappings\u4e2d\u751f\u6210\u4ee5\u4e0b\u56db\u4e2a\u6587\u4ef6</p> </li> <li> <p><code>mapping.txt</code>: \u6df7\u6dc6\u7684\u524d\u540e\u5173\u7cfb</p> </li> <li><code>seeds.txt</code>\uff1a\u5217\u51fa\u4e86\u6ca1\u6709\u88ab\u6df7\u6dc6\u7684\u7c7b\u548c\u6210\u5458</li> <li><code>usage.txt</code>\uff1a\u5217\u51fa\u4e86\u6e90\u4ee3\u7801\u4e2d\u88ab\u5220\u9664\u5728apk\u4e2d\u4e0d\u5b58\u5728\u7684\u4ee3\u7801</li> <li> <p><code>configuration.txt</code>:\u81ea\u5b9a\u4e49\u548c\u5b98\u65b9\u5b9a\u4e49\u7684\u6240\u6709proguard\u7684\u4ee3\u7801</p> </li> <li> <p>\u4f7f\u7528Android stuido-&gt;build-&gt;Apk Analyse:\u6765\u5206\u6790\u751f\u6210\u7684dex \u6587\u4ef6</p> </li> </ol> <p>\u5b98\u65b9\u6587\u6863</p>"},{"location":"Android/9%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%28%E6%B7%B1%E8%89%B2%E4%B8%BB%E9%A2%98%29%E9%80%82%E9%85%8D/","title":"9\u6697\u9ed1\u6a21\u5f0f(\u6df1\u8272\u4e3b\u9898)\u9002\u914d","text":"<p>Android 10 (API \u7ea7\u522b 29) \u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u63d0\u4f9b\u6df1\u8272\u4e3b\u9898\u80cc\u666f</p> <p>\u5b98\u65b9\u6587\u6863</p> <p>\u5728 Android 10 (API \u7ea7\u522b 29) \u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u6cd5\u542f\u7528\u6df1\u8272\u4e3b\u9898\u80cc\u666f\uff1a</p> <ul> <li>\u4f7f\u7528\u7cfb\u7edf\u8bbe\u7f6e\uff08Settings -&gt; Display -&gt; Theme\uff09\u542f\u7528\u6df1\u8272\u4e3b\u9898\u80cc\u666f\u3002</li> <li>\u4f7f\u7528\u201c\u5feb\u6377\u8bbe\u7f6e\u201d\u56fe\u5757\uff0c\u4ece\u901a\u77e5\u6258\u76d8\u4e2d\u5207\u6362\u4e3b\u9898\u80cc\u666f\uff08\u542f\u7528\u540e\uff09\u3002</li> <li>\u5728 Pixel \u8bbe\u5907\u4e0a\uff0c\u9009\u62e9\u201c\u7701\u7535\u6a21\u5f0f\u201d\u5c06\u540c\u65f6\u542f\u7528\u6df1\u8272\u4e3b\u9898\u80cc\u666f\u3002\u5176\u4ed6\u539f\u59cb\u8bbe\u5907\u5236\u9020\u5546 (OEM) \u4e0d\u4e00\u5b9a\u652f\u6301\u8fd9\u79cd\u884c\u4e3a\u3002</li> </ul>"},{"location":"Android/9%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%28%E6%B7%B1%E8%89%B2%E4%B8%BB%E9%A2%98%29%E9%80%82%E9%85%8D/#_1","title":"\u6697\u9ed1\u6a21\u5f0f\u7684\u5e94\u7528\u4e3b\u9898","text":"<p>\u53ef\u4ee5\u5c06App\u4e3b\u9898\u8bbe\u7f6e\u4e3a\u6697\u9ed1\u6a21\u5f0f</p> <pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.DayNight\"&gt;\n&lt;style name=\"AppTheme\" parent=\"Theme.MaterialComponents.DayNight\"&gt;\n  //\u53ca\u5176\u4ed6\u591c\u95f4\u6a21\u5f0f\u4e3b\u9898\n</code></pre> <p>\u5efa\u8bae\u4f7f\u7528\u4e3b\u9898\u4e0b\u7684\u5c5e\u6027\uff0c\u8fd9\u6837\u518d\u5207\u6362\u4e3b\u9898\u65f6\uff0cApp\u4f1a\u81ea\u52a8\u9002\u914d\u4e3b\u9898\u4e0b\u7684\u5c5e\u6027\uff0c\u5982\u989c\u8272</p> <pre><code>//\u4f7f\u7528\u65b9\u5f0f\u5427\n?attr/...  \u4e3b\u9898\u4e0b\u7684\u5c5e\u6027\n?android:attr/...   Android\u63d0\u4f9b\u7684\u4e3b\u9898\u5c5e\u6027\n</code></pre> <ul> <li><code>?android:attr/textColorPrimary</code> \u8fd9\u662f\u4e00\u79cd\u901a\u7528\u578b\u6587\u672c\u989c\u8272\u3002\u5b83\u5728\u6d45\u8272\u4e3b\u9898\u80cc\u666f\u4e0b\u63a5\u8fd1\u4e8e\u9ed1\u8272\uff0c\u5728\u6df1\u8272\u4e3b\u9898\u80cc\u666f\u4e0b\u63a5\u8fd1\u4e8e\u767d\u8272\u3002\u8be5\u989c\u8272\u5305\u542b\u4e00\u4e2a\u505c\u7528\u72b6\u6001\u3002</li> <li><code>?attr/colorControlNormal</code> \u4e00\u79cd\u901a\u7528\u56fe\u6807\u989c\u8272\u3002\u8be5\u989c\u8272\u5305\u542b\u4e00\u4e2a\u505c\u7528\u72b6\u6001\u3002</li> </ul> <p>\u6ce8\u610f\uff1a\u82e5\u60f3\u4f7f\u7528\u6697\u9ed1\u6a21\u5f0f\uff0c\u5fc5\u987b\u6709\u6697\u9ed1\u6a21\u5f0f\u7684\u4e3b\u9898\uff0c\u5f53\u7136\u6d45\u8272\u4e3b\u9898\u4e5f\u9700\u8981\u6709</p> <pre><code> &lt;style name=\"Theme.AndroidDemo\" parent=\"Theme.Design.Light.NoActionBar\"&gt;\n        &lt;!-- Primary brand color. --&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/purple_500&lt;/item&gt;\n        &lt;item name=\"colorPrimaryVariant\"&gt;@color/purple_700&lt;/item&gt;\n        &lt;item name=\"colorOnPrimary\"&gt;@color/white&lt;/item&gt;\n        &lt;!-- Secondary brand color. --&gt;\n        &lt;item name=\"colorSecondary\"&gt;@color/teal_200&lt;/item&gt;\n        &lt;item name=\"colorSecondaryVariant\"&gt;@color/teal_700&lt;/item&gt;\n        &lt;item name=\"colorOnSecondary\"&gt;@color/black&lt;/item&gt;\n        &lt;!-- Status bar color. --&gt;\n        &lt;item name=\"android:statusBarColor\" tools:targetApi=\"l\"&gt;?attr/colorPrimaryVariant&lt;/item&gt;\n        &lt;!-- Customize your theme here. --&gt;\n    &lt;/style&gt;\n//\u6697\u9ed1\u6a21\u5f0f\n&lt;style name=\"Theme.AndroidDemo\" parent=\"Theme.MaterialComponents.DayNight.DarkActionBar\"&gt;\n        &lt;!-- Primary brand color. --&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/purple_200&lt;/item&gt;\n        &lt;item name=\"colorPrimaryVariant\"&gt;@color/purple_700&lt;/item&gt;\n        &lt;item name=\"colorOnPrimary\"&gt;@color/black&lt;/item&gt;\n        &lt;!-- Secondary brand color. --&gt;\n        &lt;item name=\"colorSecondary\"&gt;@color/teal_200&lt;/item&gt;\n        &lt;item name=\"colorSecondaryVariant\"&gt;@color/teal_200&lt;/item&gt;\n        &lt;item name=\"colorOnSecondary\"&gt;@color/black&lt;/item&gt;\n        &lt;!-- Status bar color. --&gt;\n        &lt;item name=\"android:statusBarColor\" tools:targetApi=\"l\"&gt;?attr/colorPrimaryVariant&lt;/item&gt;\n        &lt;!-- Customize your theme here. --&gt;\n    &lt;/style&gt;\n</code></pre>"},{"location":"Android/9%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%28%E6%B7%B1%E8%89%B2%E4%B8%BB%E9%A2%98%29%E9%80%82%E9%85%8D/#force-dark","title":"Force Dark","text":"<ul> <li>\u4f7f\u7528\u65b9\u5f0f</li> </ul> <p><code>xml   //Theme\u4e3b\u9898\u4e0b \u6dfb\u52a0 Theme   &lt;item name=\"android:forceDarkAllowed\"&gt;true&lt;/item&gt;    //java\u52a8\u6001\u8c03\u7528   View.setForceDarkAllowed(true)</code></p> <ul> <li>\u4e3b\u9898\u4e0b\u4f7f\u7528<code>&lt;item name=\"android:forceDarkAllowed\"&gt;true&lt;/item&gt;</code>,\u53ef\u4ee5\u4e0d\u7528\u51c6\u5907\u4e24\u4e2a\u4e3b\u9898Theme,\u5207\u6362\u6548\u679c\u548c\u4e24\u4e2a\u4e3b\u9898\u4e00\u81f4\uff0c\u4e14\u4f1a\u5904\u7406@color.</li> </ul>"},{"location":"Android/9%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%28%E6%B7%B1%E8%89%B2%E4%B8%BB%E9%A2%98%29%E9%80%82%E9%85%8D/#_2","title":"\u5382\u5546\u6df1\u8272\u4e3b\u9898\u9002\u914d\u6587\u6863","text":"<p>\u5c0f\u7c73\u6587\u6863</p> <p>oppo\u6587\u6863</p> <p>Vivo\u6587\u6863:\u6682\u672a\u627e\u5230</p> <p>\u534e\u4e3a\u6587\u6863</p> <p>\u9e3f\u8499\u83b7\u53d6\uff1ahttps://developer.huawei.com/consumer/cn/doc/HMSCore-Guides/dark--awareness-0000001053471955</p>"},{"location":"Android/9%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%28%E6%B7%B1%E8%89%B2%E4%B8%BB%E9%A2%98%29%E9%80%82%E9%85%8D/#_3","title":"\u5168\u5c40\u53cd\u8272","text":"<p>\u9700\u8981\u4e00\u4e2a\u5168\u5c40\u53cd\u8272\u7684\u5f00\u5173</p> <p>\u5728\u53ea\u5b9e\u73b0\u4e86Light\u4e3b\u9898\uff0c\u6ca1\u6709\u5b9e\u73b0\u6697\u9ed1\u4e3b\u9898\u7684\u60c5\u51b5\u4e0b\u3002\u4e0d\u53cd\u8272\u7684\u65b9\u5f0f</p> <p>1.Theme\u8bbe\u7f6efalse  \u6216\u8005\u4e0d\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4e3aFalse.</p> <p>2.Theme\u8bbe\u7f6etrue</p> <p>View \u8bbe\u7f6e\uff1aandroid:forceDarkAllowed=\"false\"</p> <p>\u6697\u8272\u6a21\u5f0f\uff1a</p> <p>\u524d\u63d0\uff1a</p> <p>1.\u90e8\u5206\u505a\u4e86\u6697\u9ed1\u6a21\u5f0f\u7684\u9002\u914d\uff0c\u4f46\u662f\u5927\u90e8\u5206\u6ca1\u6709</p> <p>2.\u5f3a\u5236\u53cd\u8272\u4e0d\u8bbe\u7f6e\uff0c\u9020\u6210\u4e86\u6709\u7684\u673a\u578b\u4f1a\u88ab\u53cd\u8272\uff0c\u6709\u7684\u4e0d\u4f1a\u88ab\u53cd\u8272</p> <p>\u95ee\u9898\uff1a</p> <p>1.\u5fae\u535a\u76f8\u540c\u7684\u4ee3\u7801\uff1a\u6709\u7684\u88ab\u5f3a\u5236\u53cd\u8272\uff0c\u6709\u7684\u4e0d\u88ab\u5f3a\u5236\u53cd\u8272\uff0c\u539f\u56e0\u662f\u4ec0\u4e48</p> <p>\u548c\u673a\u578b\u6709\u5173\uff0c\u8981\u67e5\u76f8\u5173\u5382\u5546\u7684\u95ee\u9898</p>"},{"location":"Android/9%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%28%E6%B7%B1%E8%89%B2%E4%B8%BB%E9%A2%98%29%E9%80%82%E9%85%8D/#_4","title":"\u60f3\u8981\u7684\u7ed3\u679c\uff1a","text":"<p>1.\u5f3a\u5236\u90fd\u4e0d\u53cd\u8272</p> <p>\u6ca1\u6709\u6697\u9ed1\u4e3b\u9898\uff0cfalse</p> <p>2.\u6697\u9ed1\u6a21\u5f0f\u5f00\u5173\u662f\u6709\u7684</p> <p>\u82e5\u88ab\u53cd\u8272\u4e86\uff0c\u5c31\u9002\u914d\u6697\u9ed1\uff0c\u82e5\u6ca1\u6709\u88ab\u53cd\u8272\uff0c\u5c31\u4e0d\u9002\u914d\u6697\u9ed1\uff0c\u5373\u9700\u8981\u4e00\u4e2a\u53cd\u8272\u7684\u5f00\u5173\uff0c\u6682\u65f6\u5382\u5546\u6ca1\u6709\u63d0\u4f9b</p> <p>\u5199Demo\u7684\u7ecf\u9a8c\uff1a</p> <p>1.\u65e0\u8bba\u4ec0\u4e48\u63a7\u4ef6\uff0c\u53ea\u9002\u5408\u5199\u4e3b\u9898\u989c\u8272\uff0c\u5199\u6b63\u5e38color\u989c\u8272\u5728\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u6697\u9ed1\u4e0d\u53cd\u8272</p> <p>2.\u6697\u9ed1\u4e3b\u9898\u4f18\u5148\u7ea7&gt;force Dark\uff0c\u5728\u6709\u6697\u9ed1\u6a21\u5f0f\u7684\u60c5\u51b5\u4e0b\uff0c\u7981\u6b62\u53cd\u8272\u4e0d\u751f\u6548</p> <p>4.\u907f\u514dActivity\u91cd\u5efa\uff0c\u9700\u8981\u5bf9\u6240\u6709\u7684\u989c\u8272\u8fdb\u884c\u9002\u914d</p> <p>\u4f7f\u7528<code>setDefaultNightMode()</code>\u8bbe\u7f6e<code>\u6697\u9ed1\u6a21\u5f0f</code>\u4f1a\u5bfc\u81f4<code>Activity</code>\u9500\u6bc1\u91cd\u5efa\uff0c\u5728\u67d0\u4e9b\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4e0d\u60f3\u91cd\u5efa<code>Activity</code>\uff0c<code>Android</code>\u4e5f\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u5f0f\u6765\u8ba9<code>Activity</code>\u83b7\u53d6\u5230\u72b6\u6001\u53d8\u5316\u7684\u901a\u77e5\uff0c\u7136\u540e\u624b\u52a8\u53bb\u5904\u7406\u989c\u8272\u53d8\u5316\u3002</p> <p>\u9996\u5148\u5728<code>AndroidManifest</code>\u4e2d\u8bbe\u7f6e\u8be5<code>Activity</code>\u4e0d\u54cd\u5e94<code>uiMode</code>\u7684\u53d8\u5316\uff1a</p> <pre><code>&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"me.apqx.demo\"&gt;\n    &lt;activity android:name=\".ThemeActivity\"\n            android:configChanges=\"uiMode\"/&gt;\n&lt;/manifest&gt;\n</code></pre> <p>\u518d\u8986\u5199<code>Activity</code>\u7684<code>onConfigurationChanged()</code>\u65b9\u6cd5\u6765\u76d1\u542c<code>\u6697\u9ed1\u6a21\u5f0f</code>\u7684\u72b6\u6001\u53d8\u5316\uff1a</p> <pre><code>// \u5f53\u5728AndroigManifest\u4e2d\u914d\u7f6e\u7684\u8be5Activity\u7684\u6307\u5b9a\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u8fd9\u91cc\u4f1a\u88ab\u8c03\u7528\noverride fun onConfigurationChanged(newConfig: Configuration) {\n        super.onConfigurationChanged(newConfig)\n        // \u5f53\u524d\u7684\u6697\u9ed1\u6a21\u5f0f\n        val currentNightModeOn = isDarkModeOn(this)\n        // \u6839\u636e\u5f53\u524d\u7684\u6697\u9ed1\u6a21\u5f0f\u662f\u5426\u542f\u7528\uff0c\u624b\u52a8\u66f4\u6539\u7ec4\u4ef6\u7684\u663e\u793a\u989c\u8272\n        if (currentNightModeOn) {\n            tv_title.setTextColor(Color.WHITE)\n        } else {\n            tv_title.setTextColor(Color.BLACK)\n        }\n    }\n\n// \u68c0\u67e5\u5f53\u524dAPP\u662f\u5426\u5904\u4e8e\u6697\u9ed1\u6a21\u5f0f\uff0c\u53ef\u4ee5\u662f\u7528\u6237\u81ea\u5df1\u8bbe\u5b9a\u8fdb\u5165\u7684\u6697\u9ed1\u6a21\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u662f\u8ddf\u968f\u7cfb\u7edf\u8bbe\u7f6e\u8fdb\u5165\u7684\u6697\u9ed1\u6a21\u5f0f\nfun isDarkModeOn(context: Context): Boolean {\n    val mode = context.resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK\n    return mode == Configuration.UI_MODE_NIGHT_YES\n}\n</code></pre> <p>\u8fd9\u79cd\u65b9\u5f0f\u907f\u514d\u4e86<code>Activity</code>\u7684\u9500\u6bc1\u91cd\u5efa\u53ef\u80fd\u5f15\u8d77\u7684\u4e00\u7cfb\u5217\u751f\u547d\u5468\u671f\u95ee\u9898\uff0c\u4f46\u662f\u624b\u52a8\u8bbe\u7f6e\u6bcf\u4e2a\u7ec4\u4ef6\u7684\u989c\u8272\u663e\u7136\u4e0d\u5982\u4e00\u4e2a\u7b80\u5355\u7684<code>-night</code>\u8d44\u6e90\u9650\u5b9a\u7b26\u65b9\u4fbf\u3002</p> <p>\u95ee\u9898\uff1a</p> <p>1.\u8bbe\u7f6e\u5f53\u524dApp\u4e3a\u6df1\u8272\u6a21\u5f0f\u65f6 \uff0c\u4f1a\u8ddf\u968f\u7cfb\u7edf\u6df1\u8272\u6a21\u5f0f\u5207\u6362\u53d1\u751f\u6539\u53d8\u3002</p> <p>\u6392\u67e5\u65b9\u5411\uff1a</p> <p>1.Activity \u5df2\u7ecf\u91cd\u5efa</p> <p>2.uimode \u5df2\u7ecf\u4fee\u6539</p> <p>3.\u4e3b\u9898\u5df2\u7ecf\u91cd\u65b0\u5e94\u7528</p> <p>4.</p>"},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/","title":"Acticity\u542f\u52a8\u6d41\u7a0b\u6e90\u7801\u89e3\u6790","text":""},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#1activity","title":"1\u3001\u6839\u542f\u52a8\u7684\u6d41\u7a0b\uff1a\u4ece\u684c\u9762\u70b9\u51fb\u56fe\u6807\uff0c\u5230\u542f\u52a8Activity\u7684\u9875\u9762","text":"<ul> <li>Activity\u542f\u52a8\u4e4b\u524d</li> <li>init\u8fdb\u7a0b-&gt;Zygote\u8fdb\u7a0b-&gt;SystemService\u8fdb\u7a0b\u548cLauncher\u8fdb\u7a0b</li> <li>Launcher\u7684\u5b9a\u4e49\uff1aAndroid\u7cfb\u7edf\u542f\u52a8\u540e\uff0c\u52a0\u8f7d\u7684\u7b2c\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u662f\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u7684\u5165\u53e3\u3002\u53ef\u4ee5\u770b\u6210\u662f\u6574\u4e2a\u684c\u9762UI</li> </ul> <p>\u6ce8\uff1a\u9700\u8981\u5199\u4e00\u4e2aLauncher\u7684\u6e90\u7801\uff0c\u6765\u8fdb\u884c\u6e90\u7801\u5206\u6790</p>"},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#2activity","title":"2\u3001\u666e\u901aActivity\u7684\u542f\u52a8\u6d41\u7a0b","text":"<p>\u6ce8\uff1aAndroid\u6e90\u7801\u8bfb\u53d6\u4e0d\u5230\uff1a1)\u7f16\u8bd1\u7248\u672c\u4e0d\u5bf9  2)\u5382\u5546\u4fee\u6539\u4e86\u6e90\u7801</p> <ul> <li>\u542f\u52a8\u6a21\u5f0f\u548cIntent.Flag\u7684\u533a\u522b</li> <li>\u6808\u4e2dActivity \u7684\u53d8\u5316</li> <li>handleLaunchActivity\uff0chandleStartActivity\u548chandleResumeActivity \u8c03\u7528\u7684\u533a\u522b</li> <li>\u57fa\u4e8eAPI 30\u7684\u6e90\u7801\u89e3\u6790</li> </ul>"},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#21","title":"2.1 \u6d89\u53ca\u5230\u7684\u6982\u5ff5","text":"<ul> <li>\u8fdb\u7a0b\uff1aAndroid\u7cfb\u7edf\u4e3a\u6bcf\u4e2aAPP\u5206\u914d\u81f3\u5c11\u4e00\u4e2a\u8fdb\u7a0b</li> <li>\u7cfb\u7edf\u670d\u52a1\u8fdb\u7a0b(SystemService\u8fdb\u7a0b):Android\u4e2d\u6700\u6838\u5fc3\u7684\u670d\u52a1\uff0c\u4e3b\u8981\u8d1f\u8d23\u7cfb\u7edf\u4e2d<code>\u56db\u5927\u7ec4\u4ef6\u7684\u542f\u52a8\u3001\u5207\u6362\u3001\u8c03\u5ea6</code>\u53ca<code>\u5e94\u7528\u8fdb\u7a0b\u7684\u7ba1\u7406\u548c\u8c03\u5ea6</code>\u7b49\u5de5\u4f5c\uff0c\u5176\u804c\u8d23\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u8fdb\u7a0b\u7ba1\u7406\u548c\u8c03\u5ea6\u6a21\u5757\u76f8\u7c7b\u4f3c\uff0cAndroid 10\u4e4b\u540e\uff0c\u8be5\u670d\u52a1\u7531AMTS\u4ee3\u66ff\u3002</li> <li>IPC\uff1a\u8de8\u8fdb\u7a0b\u901a\u4fe1\uff0cAndroid\u4e2d\u91c7\u7528Binder\u673a\u5236\uff0c\u5728Activity\u542f\u52a8\u6d41\u7a0b\u4e2d\uff0c\u90fd\u662f\u91c7\u7528AIDL\u7684\u65b9\u5f0f\u8fdb\u884c\u8de8\u8fdb\u7a0b\u901a\u4fe1\u3002</li> </ul>"},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#22","title":"2.2 \u6d89\u53ca\u5230\u7684\u7c7b","text":"<ul> <li> <p>Activity:\u542f\u52a8\u7684\u5f00\u7aef</p> </li> <li> <p>Instrumentation:\u8d1f\u8d23\u8c03\u7528Activity\u548cApplication\u751f\u547d\u5468\u671f</p> </li> <li> <p>ActivityTaskManager:</p> </li> <li> <p>IActivityTaskMansger:AIDL \u63a5\u53e3\uff0c\u5b9e\u73b0\u7c7b\u662fATMS</p> </li> <li> <p>ActivityTaskMansgerService:\u5206\u62c5AMS\u7684\u529f\u80fd\uff0c\u8d1f\u8d23\u7edf\u4e00\u8c03\u5ea6\u5404\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684activity</p> </li> <li> <p>ActivityStart:\u542f\u52a8Activity\u7684\u7c7b</p> </li> <li> <p>RootWindowContainer:RootWindowContainer\u662f\u7a97\u53e3\u5bb9\u5668\uff08WindowContainer\uff09\u7684\u6839\u5bb9\u5668\uff0c\u7ba1\u7406\u4e86\u6240\u6709\u7a97\u53e3\u5bb9\u5668\uff0c\u8bbe\u5907\u4e0a\u6240\u6709\u7684\u7a97\u53e3\uff08Window\uff09\u3001\u663e\u793a\uff08Display\uff09\u90fd\u662f\u7531\u5b83\u6765\u7ba1\u7406\u7684</p> </li> <li> <p>ActivityStack:Activity\u5728AMS\u7684\u6808\u7ba1\u7406\uff0c\u4e00\u4e2aActivityStack\u5305\u542b\u4e86\u82e5\u5e72\u4e2aTaskRecord\uff0c\u6bcf\u4e2aTaskRecord\u53c8\u5305\u542b\u4e86\u82e5\u5e72\u4e2aActivityRecord\uff0c\u6bcf\u4e2aActivityRecord\u5bf9\u5e94\u4e86\u4e00\u4e2aActivity\u3002\u5728\u8fd9\u91cc\uff0cTaskRecord\u76f8\u5f53\u4e8e\u5728\u542f\u52a8\u6a21\u5f0f\u4e2d\u7684\u201c\u4efb\u52a1\u6808\u201d\uff0c\u6839\u636e\u542f\u52a8\u6a21\u5f0f\u7684\u4e0d\u540c\uff0c\u5728\u542f\u52a8Activity\u7684\u65f6\u5019\uff0c\u4f1a\u5bf9TaskRecord\u8fdb\u884c\u4e0d\u540c\u7684\u64cd\u4f5c\u3002</p> </li> </ul> <p></p> <p>Android\u7cfb\u7edf\u4e2d\u7684\u6bcf\u4e00\u4e2aActivity\u90fd\u4f4d\u4e8e\u4e00\u4e2aTask\u4e2d\u3002\u4e00\u4e2aTask\u53ef\u4ee5\u5305\u542b\u591a\u4e2aActivity\uff0c\u540c\u4e00\u4e2aActivity\u4e5f\u53ef \u80fd\u6709\u591a\u4e2a\u5b9e\u4f8b\u3002 \u5728AndroidManifest.xml\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 android:launchMode \u6765\u63a7\u5236Activity\u5728Task\u4e2d\u7684\u5b9e\u4f8b\u3002</p> <p>\u53e6\u5916\uff0c\u5728startActivity\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7 setFlag \u6765\u63a7\u5236\u542f\u52a8\u7684Activity\u5728Task\u4e2d\u7684\u5b9e\u4f8b\u3002</p> <p>Task\u7ba1\u7406\u7684\u610f\u4e49\u8fd8\u5728\u4e8e\u8fd1\u671f\u4efb\u52a1\u5217\u8868\u4ee5\u53caBack\u6808\u3002 \u5f53\u4f60\u901a\u8fc7\u591a\u4efb\u52a1\u952e\uff08\u6709\u4e9b\u8bbe\u5907\u4e0a\u662f\u957f\u6309Home\u952e\uff0c\u6709\u4e9b\u8bbe\u5907\u4e0a\u662f\u4e13\u95e8\u63d0\u4f9b\u7684\u591a\u4efb\u52a1\u952e\uff09\u8c03\u51fa\u591a\u4efb\u52a1\u65f6\uff0c\u5176\u5b9e\u5c31\u662f\u4eceActivityManagerService\u83b7\u53d6\u4e86\u6700\u8fd1\u542f\u52a8\u7684Task\u5217\u8868\u3002</p> <ul> <li> <p>ActivityRecord\uff1a\u8bb0\u5f55Activity\u7684\u6240\u6709\u4fe1\u606f\u3002</p> </li> <li> <p>ActivityStackSupervisor:\u4e3b\u8981\u4f5c\u7528\u662f\u8fdb\u884c\u5bf9ActivityStack\u7684\u7ba1\u7406\u3002</p> </li> <li> <p>ClientLifecycleManager:</p> </li> <li> <p>ClientTransaction:</p> </li> <li> <p>IApplicationThread:AIDL\u63a5\u53e3\uff0c\u5b9e\u73b0\u7c7b\u662fApplicationThread</p> </li> <li> <p>ApplicationThread:ActivityThread\u7684\u5185\u90e8\u7c7b\uff0c\u4e00\u4e2a\u5e94\u7528\u7684\u4e3b\u7ebf\u7a0b\uff08\u867d\u7136\u5b83\u4e0d\u662f\u4e00\u4e2a\u7ebf\u7a0b\uff09</p> </li> <li> <p>ActivityThread:</p> </li> <li> <p>ClientTransactionHandler:ActivityThread\u7684\u7236\u7c7b</p> </li> <li> <p>TransactionExecutor:\u5904\u7406\u4e8b\u52a1\u7684\u7c7b</p> </li> <li> <p>LaunchActivityItem:\u542f\u52a8Activity\u9009\u9879</p> </li> </ul>"},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#23","title":"2.3 \u603b\u4f53\u542f\u52a8\u6d41\u7a0b","text":"<p>\u901a\u8fc7\u8fdb\u7a0b\u7684\u53d8\u6362\u5c06\u5176\u603b\u4f53\u5206\u4e3a\u4ee5\u4e0b\u4e09\u4e2a\u8fc7\u7a0b\uff1aApp\u8fdb\u7a0b\u4e2d \u2014\u2014[\u901a\u8fc7Binder]\u2014\u2014&gt; \u7cfb\u7edf\u8fdb\u7a0b\u4e2d \u2014\u2014[\u901a\u8fc7Binder]\u2014\u2014&gt; \u56de\u5230App\u8fdb\u7a0b\u4e2d</p> <p></p> <p></p> <ul> <li> <p>Activity</p> <p>\u4e00\u822c\u901a\u8fc7Activity.startActivity(Intent)\u6765\u542f\u52a8Activity\u3002</p> <p>```java // \u65e0\u8bba\u662f\u5426\u6709Bundle\u6570\u636e\uff0c\u90fd\u6267\u884cstartActivityForResult public void startActivity(Intent intent, @Nullable Bundle options) {        ...         if (options != null) {             startActivityForResult(intent, -1, options);         } else {             startActivityForResult(intent, -1);         }     }</p> <p>public void startActivityForResult(@RequiresPermission Intent intent, int requestCode,             @Nullable Bundle options) {         //mParent\u662f\u5f53\u524dActivity\u7684\u7236\u5e03\u5c40\uff0c\u662fActivity\u7684\u7c7b\u578b         if (mParent == null) {             options = transferSpringboardActivityOptions(options);           //\u82e5\u662f\u6839\u542f\u52a8\uff0c\u5219\u5f53\u524dActivity\u6ca1\u6709mParent,\u6267\u884cexecStartActivity()             Instrumentation.ActivityResult ar =                 mInstrumentation.execStartActivity(                     this, mMainThread.getApplicationThread(), mToken, this,                     intent, requestCode, options);           ...         } else {           //\u82e5\u662f\u666e\u901a\u7684Activity\u542f\u52a8\uff0c\u5219\u4ecd\u7136\u6267\u884cexecStartActivity()             if (options != null) {                 mParent.startActivityFromChild(this, intent, requestCode, options);             } else {                  mParent.startActivityFromChild(this, intent, requestCode);             }         }     } ```</p> </li> <li> <p>Instrumentation</p> <p><code>java public ActivityResult execStartActivity(             Context who, IBinder contextThread, IBinder token, Activity target,             Intent intent, int requestCode, Bundle options) {         IApplicationThread whoThread = (IApplicationThread) contextThread;    ...         try {    ...                  //ATMS\u6765\u5904\u7406  \u6838\u5fc3\u4ee3\u7801             int result = ActivityTaskManager.getService().startActivity(whoThread,                     who.getBasePackageName(), who.getAttributionTag(), intent,                     intent.resolveTypeIfNeeded(who.getContentResolver()), token,                     target != null ? target.mEmbeddedID : null, requestCode, 0, null, options);            ...         } catch (RemoteException e) {             throw new RuntimeException(\"Failure from system\", e);         }         return null;     }</code></p> <p>\u901a\u8fc7<code>ActivityTaskManager.getService()</code>\u83b7\u53d6\u5230\u4e00\u4e2a<code>IActivityTaskManager</code>\u5bf9\u8c61\u3002\u901a\u8fc7\u5176\u83b7\u53d6\u65b9\u5f0f\uff1a</p> </li> <li> <p>ActivityTaskManager</p> <p>```java //IActivityTaskManager\u4f5c\u4e3aATMS\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u662f\u901a\u8fc7AIDL\u5b9e\u73b0\u7684 public static IActivityTaskManager getService() {         return IActivityTaskManagerSingleton.get();     }</p> <pre><code>@UnsupportedAppUsage(trackingBug = 129726065)\n</code></pre> <p>//\u91cd\u5199\u4e86Create\u65b9\u6cd5\uff0c\u521b\u5efa\u4e86\u4e00\u4e2aBinder     private static final Singleton IActivityTaskManagerSingleton =             new Singleton() {                 @Override                 protected IActivityTaskManager create() {                     final IBinder b = ServiceManager.getService(Context.ACTIVITY_TASK_SERVICE);                     return IActivityTaskManager.Stub.asInterface(b);                 }             }; //\u7531Singleton\u7684get()\u65b9\u6cd5\u77e5\uff0c\u8c03\u7528\u4e86create()\u65b9\u6cd5 public abstract class Singleton {     private T mInstance; <pre><code>protected abstract T create();\n\npublic final T get() {\n    synchronized (this) {\n        if (mInstance == null) {\n            mInstance = create();\n        }\n        return mInstance;\n    }\n}\n</code></pre> <p>} ```</p> <li> <p>IActivityTaskManager   IActivityTaskManager\u4f5c\u4e3aATMS\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u662f\u901a\u8fc7AIDL\u5b9e\u73b0\u7684</p> </li> <li> <p>ActivityTaskManagerService(ATMS) </p> </li> <li> </li> <p>AMS\u5904\u7406\u8bf7\u6c42\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p></p> <p>AMS \u5904\u7406\u8bf7\u6c42\u65f6\u51fd\u6570\u8c03\u7528\u56fe\u5982\u4e0b\uff08\u5ffd\u7565\u6682\u505c\u65f6\u7684\u8bf7\u6c42\uff0c\u53ea\u5173\u6ce8\u4e8e\u542f\u52a8\u8bf7\u6c42\uff09</p> <p></p> <ul> <li> <p>ActivityTaskManagerService</p> <p>\u5728ATMS\u4e2d\u4f9d\u6b21\u8c03\u7528startActivity(args) -&gt; startActivityAsUser(args)-&gt;startActivityAsUser(args)</p> <p>Args\u5982\u4e0b\uff1a</p> <ul> <li>IApplicationThread caller\uff1aActivity1\u6240\u5728\u7684Application </li> <li>String callingPackage\uff1a Activity1\u6240\u5728\u7684Application \u7684\u5305\u540d</li> <li>intent</li> <li>String resolvedType:  intent.resolveTypeIfNeeded(who.getContentResolver())</li> <li>IBinder resultTo: attachToApplication\u65f6\u7684mToken</li> <li>String resultWho:  target != null ? target.mEmbeddedID : null</li> <li>int requestCode: -1</li> <li>int startFlags:   0 </li> <li>ProfilerInfo profilerInfo: null</li> <li>Bundle bOptions: null(\u9ed8\u8ba4)</li> <li>int userId:   UserHandle.getCallingUserId()</li> <li>boolean validateIncomingUser: true</li> </ul> <p>```java  //\u901a\u8fc7UserId\u6267\u884cStartActivity\u64cd\u4f5c private int startActivityAsUser(IApplicationThread caller, String callingPackage,             @Nullable String callingFeatureId, Intent intent, String resolvedType,             IBinder resultTo, String resultWho, int requestCode, int startFlags,             ProfilerInfo profilerInfo, Bundle bOptions, int userId, boolean validateIncomingUser) {         assertPackageMatchesCallingUid(callingPackage);         enforceNotIsolatedCaller(\"startActivityAsUser\");        //\u68c0\u67e5\u8be5\u8c03\u7528\u8005\u662f\u5426\u6709\u6743\u5229\u6267\u884c\u8fd9\u4e00\u9879         userId = getActivityStartController().checkTargetUser(userId, validateIncomingUser,                 Binder.getCallingPid(), Binder.getCallingUid(), \"startActivityAsUser\");</p> <pre><code> // getActivityStartController().obtainStarter(intent, \"startActivityAsUser\")\u83b7\u53d6ActivityStarter\u5bf9\u8c61\n    return getActivityStartController().obtainStarter(intent, \"startActivityAsUser\")\n            .setCaller(caller)\n            .setCallingPackage(callingPackage)\n            .setCallingFeatureId(callingFeatureId)\n            .setResolvedType(resolvedType)\n            .setResultTo(resultTo)\n            .setResultWho(resultWho)\n            .setRequestCode(requestCode)\n            .setStartFlags(startFlags)\n            .setProfilerInfo(profilerInfo)\n            .setActivityOptions(bOptions)\n            .setUserId(userId)\n            .execute();\n\n}\n</code></pre> <p>```</p> </li> <li> <p>ActivityStarter</p> <p>\u987e\u540d\u601d\u4e49\uff0cActivityStarter\u7c7b\u5c31\u662f\u4e3a\u4e86\u542f\u52a8Activity\u7684\u3002  \u5728<code>execute</code>\u65b9\u6cd5\u4e2d\uff0c\u4f1a\u8c03\u7528<code>executeRequest</code>\u65b9\u6cd5\uff0c\u8fd9\u91cc\u4f1a\u5904\u7406\u542f\u52a8Activity\u7684\u8bf7\u6c42\uff0c\u5e76\u5f00\u59cb\u4e00\u4e2aActivity\u542f\u52a8\u7684\u65c5\u7a0b\uff08\u4ee3\u7801\u6ce8\u91ca\u539f\u8bdd\uff09\u3002  <code>executeRequest</code>\u65b9\u6cd5\u4f1a\u8fdb\u884c\u521d\u6b65\u7684\u68c0\u67e5\u5e76\u4e14\u786e\u8ba4\u6743\u9650\uff0c\u5e76\u4e14\u5728\u8fd9\u91cc\u7ec4\u88c5\u5bf9\u5e94Activity\u7684<code>ActivityRecord</code>\uff0c\u5176\u5305\u542b\u4e86\u5bf9\u5e94Activity\u7684\u6240\u6709\u4fe1\u606f\uff0c\u5e76\u50a8\u5b58\u5728\u4efb\u52a1\u6808\u5e27<code>TaskRecord</code>\u4e2d\u3002\u5728Activity\u7684\u542f\u52a8\u8fc7\u7a0b\u4e2d\uff0cActivity\u90fd\u662f\u901a\u8fc7ActivityRecord\u6765\u8868\u793a\u7684\u3002\u7136\u540e\uff0c\u4f1a\u8c03\u7528<code>startActivityUnchecked</code>\u65b9\u6cd5\uff0c\u63a5\u7740startActivityUnchecked\u65b9\u6cd5\u4f1a\u8c03\u7528<code>startActivityInner</code>\u65b9\u6cd5\u3002</p> <p>\u5728<code>startActivityInner</code>\u4e2d\uff0c\u4e3b\u8981\u7684\u4e00\u4ef6\u4e8b\u5c31\u662f\u5c31\u662f\u5904\u7406\u4e86Activity\u7684\u542f\u52a8\u6a21\u5f0f\uff0c\u5e76\u4e14\u5728<code>ActivityStack</code>\u4e2d\u5904\u7406\u5bf9\u5e94Activity\u5728\u4efb\u52a1\u6808\u4e2d\u7684\u76f8\u5173\u4e8b\u5b9c\uff0c\u5305\u62ec\u4f46\u4e0d\u4ec5\u9650\u4e8e\u5c06\u5bf9\u5e94\u7684ActivityRecord\u6dfb\u52a0\u5230TaskRecord\u4e2d\u3001\u5c06\u5bf9\u5e94\u7684ActivityRecord\u63d0\u5230\u6808\u4e2d\u6700\u9876\u90e8\u3002</p> <p>\u6700\u540e\uff0c\u4f1a\u8c03\u7528RootWindowContainer\u7684<code>resumeFocusedStacksTopActivities</code>\u65b9\u6cd5\u3002</p> <p>```java //\u5904\u7406\u542f\u52a8Activity\u7684\u8bf7\u6c42\uff0c\u5e76\u5f00\u59cb\u65b0\u7684Activity int execute() {         try {           ...             int res;             synchronized (mService.mGlobalLock) {                ...                                 //\u66f4\u65b0request\u7684\u503c  \u91c7\u7528\u91cd\u91cf\u7ea7\u9501                 res = resolveToHeavyWeightSwitcherIfNeeded();                 if (res != START_SUCCESS) {                     return res;                 }                //\u68c0\u67e5\u8bf7\u6c42\uff0c\u7ec4\u88c5Activity                 res = executeRequest(mRequest);</p> <pre><code>                        ...\n\n            if (globalConfigWillChange) {\n               //\u4fee\u6539\u66ff\u6362\u914d\u7f6e\u9009\u9879\n            }\n\n          ...\n        }\n    } finally {\n      //\u6267\u884c\u7ed3\u675f\u5b8c\u6210\u540e\u91cd\u65b0\u8d4b\u503c\n        onExecutionComplete();\n    }\n}\n</code></pre> <p>```</p> <p>executeRequest()\u5bf9reques\u8bf7\u6c42\u8fdb\u884c\u5904\u7406\uff0c\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a</p> <p></p> <ul> <li>request\u5728\u6784\u5efaActivityStarter\u65f6\u4f20\u5165\u6570\u503c\uff0c\u6b64\u65f6\u5bf9\u8981\u6267\u884c\u7684\u53d8\u91cf\u901a\u8fc7request\u8fdb\u884c\u8d4b\u503c</li> <li>\u5224\u65adActivity1\u7684\u7684\u8fdb\u7a0b\u662f\u5426\u8fd8\u5b58\u5728\uff0c\u82e5\u5b58\u5728\uff0c\u5219\u7ee7\u7eed\u542f\u52a8</li> <li>\u5904\u7406FLAG_ACTIVITY_FORWARD_RESULT\uff0cA\u901a\u8fc7startActivityForResult\u542f\u52a8B\uff0cB\u901a\u8fc7startActivity\u542f\u52a8C\uff0cA\u53ef\u4ee5setResult\u5230C</li> <li>\u5bf9Intent\u4fe1\u606f\u8fdb\u884c\u5339\u914d\uff0c\u82e5\u4e0d\u6b63\u786e\uff0c\u8fd4\u56de\u54cd\u5e94\u7684\u9519\u8bef\u7801</li> <li>\u8fdb\u884creview </li> <li>\u4e34\u65f6App\u662f\u5426\u5b89\u88c5</li> <li>starActivityUnchecked() \u8fdb\u884c\u542f\u52a8</li> </ul> <p>```java //\u8fdb\u884c\u521d\u6b65\u68c0\u67e5\u3001\u786e\u8ba4\u6743\u9650\u3001\u7ec4\u88c5Activity\u3001\u542f\u52a8\u6a21\u5f0f\uff0c\u5f00\u59cb\u4e00\u4e2a\u65b0\u7684Activity private int executeRequest(Request request) {</p> <pre><code>   ... //\u8d4b\u503c\n\n    int err = ActivityManager.START_SUCCESS;\n    // Pull the optional Ephemeral Installer-only bundle out of the options early.\n    final Bundle verificationBundle =\n            options != null ? options.popAppVerificationBundle() : null;\n   //\u5224\u65adCaller\u8fdb\u7a0b\u662f\u5426\u8fd8\u5b58\u5728\n    WindowProcessController callerApp = null;\n    if (caller != null) {\n        callerApp = mService.getProcessController(caller);\n        if (callerApp != null) {\n            callingPid = callerApp.getPid();\n            callingUid = callerApp.mInfo.uid;\n        } else {\n            Slog.w(TAG, \"Unable to find app for caller \" + caller + \" (pid=\" + callingPid\n                    + \") when starting: \" + intent.toString());\n            err = ActivityManager.START_PERMISSION_DENIED;\n        }\n    }\n  ...\n   //\u58f0\u660e\u4e86\u4e24\u4e2aActivityRecord\u5f15\u7528\n   //sourceRecord\u4ee3\u8868\u7740\u8c03\u7528\u8005\u7684ActivityRecord\uff0c\u901a\u8fc7\u4f20\u5165\u7684token\u6765\u5f97\u5230\u7684\uff0cActivity1\u7684Record\uff0c\n   //\u800cresultRecord\u53ea\u6709\u5728requestCode&gt;=0\u7684\u65f6\u5019\u624d\u4f1a\u88ab\u8d4b\u503c\u4e3asourceRecord\uff0c\u5426\u5219\u5c31\u662fnull\uff0c\u53ef\u4ee5\u770b\u51fa\uff0cresultRecord\u662f\u7528\u6765\u8fdb\u884c\u56de\u8c03\u7684\uff0c\u5728Activity2\u4e2d\u8bbe\u7f6e\u4e86setResult\u540e\uff0c\u4f1a\u901a\u8fc7resultRecord\u6765\u4f20\u9012result\u503c\n    ActivityRecord sourceRecord = null;\n    ActivityRecord resultRecord = null;\n    if (resultTo != null) {\n        sourceRecord = mRootWindowContainer.isInAnyStack(resultTo);\n        if (DEBUG_RESULTS) {\n            Slog.v(TAG_RESULTS, \"Will send result to \" + resultTo + \" \" + sourceRecord);\n        }\n        if (sourceRecord != null) {\n            if (requestCode &gt;= 0 &amp;&amp; !sourceRecord.finishing) {\n                resultRecord = sourceRecord;\n            }\n        }\n    }\n    //launchFlags \u4e0d\u7b49\u540c\u4e8elaunchmode\n    //\u5904\u7406FLAG_ACTIVITY_FORWARD_RESULT\u6807\u8bb0\n    //A\u901a\u8fc7startActivityForResult\u542f\u52a8B\uff0cB\u901a\u8fc7startActivity\u542f\u52a8C\uff0cC\u53ef\u4ee5\u76f4\u63a5\u8fd4\u56deA\n    final int launchFlags = intent.getFlags();\n    if ((launchFlags &amp; Intent.FLAG_ACTIVITY_FORWARD_RESULT) != 0 &amp;&amp; sourceRecord != null) {\n       //\u5982\u679crequestCode&gt;=0,\u8fd4\u56de\u9519\u8bef\uff0c\u56e0\u4e3a\u4e0d\u5141\u8bb8B\u901a\u8fc7startActivityForResult\u542f\u52a8C\n        if (requestCode &gt;= 0) {\n            SafeActivityOptions.abort(options);\n            return ActivityManager.START_FORWARD_AND_REQUEST_CONFLICT;\n        }\n      //\u5982\u679c\u662fstartActivity\u542f\u52a8\uff0c\u5c31\u8d4b\u503c\u76f8\u540c\u7684\u5305\u540d\n        resultRecord = sourceRecord.resultTo;\n        if (resultRecord != null &amp;&amp; !resultRecord.isInStackLocked()) {\n            resultRecord = null;\n        }\n        resultWho = sourceRecord.resultWho;\n        requestCode = sourceRecord.requestCode;\n        sourceRecord.resultTo = null;\n        if (resultRecord != null) {\n            resultRecord.removeResultsLocked(sourceRecord, resultWho, requestCode);\n        }\n        if (sourceRecord.launchedFromUid == callingUid) {\n            //\u5904\u4e8e\u76f8\u540c\u7684Application\u4e2d\n            callingPackage = sourceRecord.launchedFromPackage;\n            callingFeatureId = sourceRecord.launchedFromFeatureId;\n        }\n    }\n   //\u8fdb\u884c\u521d\u6b65\u68c0\u67e5\uff0c\u82e5\u6709\u9519\u8bef\uff0c\u8fd4\u56de\u76f8\u5e94\u7684\u9519\u8bef\u7801\n   ... //START_INTENT_NOT_RESOLVED,START_CLASS_NOT_FOUND,START_NOT_VOICE_COMPATIBLE\n   //\u8c03\u7528\u8005\u662f\u5426\u6709\u6743\u9650\u542f\u52a8Activity2\n     boolean abort = !mSupervisor.checkStartAnyActivityPermission(intent, aInfo, resultWho,\n            requestCode, callingPid, callingUid, callingPackage, callingFeatureId,\n            request.ignoreTargetSecurity, inTask != null, callerApp, resultRecord, resultStack);\n   //\u82e5\u6709\uff0c\u7ee7\u7eed\n   //\u82e5\u6ca1\u6709\uff0c\u8fd4\u56de\u9519\u8bef\u7801START_ABORTED\n  //\u662f\u5426\u6709\u62e6\u622a\uff0c\u82e5\u6709\u5219\u91cd\u7f6e\u4e3a\u62e6\u622a\u7684\u4fe1\u606f\n  mInterceptor.setStates(userId, realCallingPid, realCallingUid, startFlags, callingPackage,\n            callingFeatureId);\n   ...\n   //\u8fdb\u884c\u6743\u9650\u5ba1\u67e5\n  if (aInfo != null) {\n    ...\n  }\n  //\u8981\u542f\u52a8\u7684Activity\u662f\u5426\u5b89\u88c5\n  ...\n        //\u521b\u5efa\u8981\u8c03\u7528\u7684Activity2\u7684Recored\n    final ActivityRecord r = new ActivityRecord(mService, callerApp, callingPid, callingUid,\n            callingPackage, callingFeatureId, intent, resolvedType, aInfo,\n            mService.getGlobalConfiguration(), resultRecord, resultWho, requestCode,\n            request.componentSpecified, voiceSession != null, mSupervisor, checkedOptions,\n            sourceRecord);\n    mLastStartActivityRecord = r;\n\n ...\n    final ActivityStack stack = mRootWindowContainer.getTopDisplayFocusedStack();\n  //\u5f53\u524d\u5904\u4e8eResume\u72b6\u6001\u7684Activity\u662f\u5426\u4e3anull\uff0c\u6216\u8005\u5f53\u524dResume\u72b6\u6001\u7684Activity\u7684uid\u548c\u8c03\u7528\u8005\u7684UID\u662f\u5426\u76f8\u540c\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u4e0d\u76f8\u540c\u7684\u8bdd\uff0c\u90a3\u4e48\u8fd4\u56de\u9519\u8bef\u7801START_SWITCHES_CANCELED\n  if (voiceSession == null &amp;&amp; stack != null &amp;&amp; (stack.getResumedActivity() == null\n            || stack.getResumedActivity().info.applicationInfo.uid != realCallingUid)) {\n    ...\n  }\n ...  \n  //startActivityUnchecked() \u542f\u52a8Activity\n    mLastStartActivityResult = startActivityUnchecked(r, sourceRecord, voiceSession,\n            request.voiceInteractor, startFlags, true /* doResume */, checkedOptions, inTask,\n            restrictedBgActivity, intentGrants);\n\n    if (request.outActivity != null) {\n        request.outActivity[0] = mLastStartActivityRecord;\n    }\n\n    return mLastStartActivityResult;\n}\n</code></pre> <p>```</p> <p>startActivityUnchecked,\u542f\u52a8Activity,\u82e5\u542f\u52a8\u6210\u529f\uff0c\u6267\u884cstartActivityInner(),\u82e5\u5931\u8d25\uff0c\u79fb\u9664\u8981\u542f\u52a8\u7684Activity\u3002startActivityInner()\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p></p> <p>```java  //\u5728\u521d\u6b65\u68c0\u67e5\u540e\uff0c\u5f00\u59cb\u542f\u52a8Activity  //\u82e5\u542f\u52a8\u5931\u8d25\uff0c\u79fb\u9664\u8981\u542f\u52a8\u7684Activity   private int startActivityUnchecked(final ActivityRecord r, ActivityRecord sourceRecord,                 IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor,                 int startFlags, boolean doResume, ActivityOptions options, Task inTask,                 boolean restrictedBgActivity, NeededUriGrants intentGrants) {         int result = START_CANCELED;         final ActivityStack startedActivityStack;         try {             mService.deferWindowLayout();             Trace.traceBegin(Trace.TRACE_TAG_WINDOW_MANAGER, \"startActivityInner\");           //\u5904\u7406Activity\u7684\u542f\u52a8\u6a21\u5f0f\uff0c\u5e76\u4e14\u5728ActivityStack\u4e2d\u5904\u7406\u5bf9\u5e94Activity\u5728\u4efb\u52a1\u6808\u4e2d\u7684\u76f8\u5173\u4e8b\u5b9c\uff0c\u5305\u62ec\u4f46\u4e0d\u4ec5\u9650\u4e8e\u5c06\u5bf9\u5e94\u7684ActivityRecord\u6dfb\u52a0\u5230TaskRecord\u4e2d\u3001\u5c06\u5bf9\u5e94\u7684ActivityRecord\u63d0\u5230\u6808\u4e2d\u6700\u9876\u90e8             result = startActivityInner(r, sourceRecord, voiceSession, voiceInteractor,                     startFlags, doResume, options, inTask, restrictedBgActivity, intentGrants);         } finally {             Trace.traceEnd(Trace.TRACE_TAG_WINDOW_MANAGER);             startedActivityStack = handleStartResult(r, result);             mService.continueWindowLayout();         }         postStartActivityProcessing(r, result, startedActivityStack);         return result;     }</p> <p>//\u5904\u7406Activity\u7684\u542f\u52a8\u6a21\u5f0f,\u5904\u7406Activity\u548cTask\u4e4b\u95f4\u7684\u5173\u7cfb  int startActivityInner(final ActivityRecord r, ActivityRecord sourceRecord,             IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor,             int startFlags, boolean doResume, ActivityOptions options, Task inTask,             boolean restrictedBgActivity, NeededUriGrants intentGrants) {         //\u8bbe\u7f6e\u53d8\u91cf\u521d\u59cb\u5316\u72b6\u6001         setInitialState(r, options, inTask, doResume, startFlags, sourceRecord, voiceSession,                 voiceInteractor, restrictedBgActivity);          //\u8c03\u6574\u542f\u52a8\u6807\u8bc6         computeLaunchingTaskFlags();         //\u83b7\u53d6SourceRecord\u7684ActivityStack         computeSourceStack();         mIntent.setFlags(mLaunchFlags);        ...         //\u5904\u7406\u548cWMS\u7684\u4ea4\u4e92         mTargetStack.startActivityLocked(mStartActivity, topStack.getTopNonFinishingActivity(),                 newTask, mKeepCurTransition, mOptions);         if (mDoResume) {             final ActivityRecord topTaskActivity =                     mStartActivity.getTask().topRunningActivityLocked();             if (!mTargetStack.isTopActivityFocusable()                     || (topTaskActivity != null &amp;&amp; topTaskActivity.isTaskOverlay()                     &amp;&amp; mStartActivity != topTaskActivity)) {               //\u663e\u793a\u53ef\u89c1                 mTargetStack.ensureActivitiesVisible(null / starting /,                         0 / configChanges /, !PRESERVE_WINDOWS);                 mTargetStack.getDisplay().mDisplayContent.executeAppTransition();             } else {                 if (mTargetStack.isTopActivityFocusable()                         &amp;&amp; !mRootWindowContainer.isTopDisplayFocusedStack(mTargetStack)) {                     mTargetStack.moveToFront(\"startActivityInner\");                 }               //\u6062\u590d\u5bf9\u5e94\u4efb\u52a1\u6808\u9876\u90e8\u7684Activity                 mRootWindowContainer.resumeFocusedStacksTopActivities(                         mTargetStack, mStartActivity, mOptions);             }         }         mRootWindowContainer.updateUserStack(mStartActivity.mUserId, mTargetStack);</p> <pre><code>    // Update the recent tasks list immediately when the activity starts\n    mSupervisor.mRecentTasks.add(mStartActivity.getTask());\n    mSupervisor.handleNonResizableTaskIfNeeded(mStartActivity.getTask(),\n            mPreferredWindowingMode, mPreferredTaskDisplayArea, mTargetStack);\n\n    return START_SUCCESS;\n}\n</code></pre> <p>```</p> </li> <li> <p>RootWindowContainer</p> <p><code>java    boolean resumeFocusedStacksTopActivities(             ActivityStack targetStack, ActivityRecord target, ActivityOptions targetOptions) {         ...         boolean result = false;         if (targetStack != null &amp;&amp; (targetStack.isTopStackInDisplayArea()                 || getTopDisplayFocusedStack() == targetStack)) {           //ActivityStack\u6765\u6062\u590dActivity             result = targetStack.resumeTopActivityUncheckedLocked(target, targetOptions);         }        ...         return result;     }</code></p> <p>\u5f53\u5904\u7406\u597dTask\u548cActicity\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5c06Activity\u5df2\u7ecf\u653e\u5728\u6808\u9876\uff0c\u8fdb\u884c\u542f\u52a8\u5904\u7406\uff1a</p> <p></p> </li> <li> <p>ActivityStack</p> <p>\u4e00\u4e2aActivityStack\u5305\u542b\u4e86\u82e5\u5e72\u4e2aTaskRecord\uff0c\u6bcf\u4e2aTaskRecord\u53c8\u5305\u542b\u4e86\u82e5\u5e72\u4e2aActivityRecord\uff0c\u6bcf\u4e2aActivityRecord\u5bf9\u5e94\u4e86\u4e00\u4e2aActivity\u3002\u5728\u8fd9\u91cc\uff0cTaskRecord\u76f8\u5f53\u4e8e\u5728\u542f\u52a8\u6a21\u5f0f\u4e2d\u7684\u201c\u4efb\u52a1\u6808\u201d\uff0c\u6839\u636e\u542f\u52a8\u6a21\u5f0f\u7684\u4e0d\u540c\uff0c\u5728\u542f\u52a8Activity\u7684\u65f6\u5019\uff0c\u4f1a\u5bf9TaskRecord\u8fdb\u884c\u4e0d\u540c\u7684\u64cd\u4f5c\u3002\u5728\u4e4b\u524d\u7684\u64cd\u4f5c\u4e2d\uff0c\u5df2\u7ecf\u5c06\u8981\u53ef\u89c1\u7684Activity\u653e\u5728\u4e86\u6808\u9876\uff0c\u53ea\u9700\u8981\u663e\u793a\u5373\u53ef\u3002</p> <p>```java  boolean resumeTopActivityUncheckedLocked(ActivityRecord prev, ActivityOptions options) {         if (mInResumeTopActivity) {             // Don't even start recursing.             return false;         }         boolean result = false;         try {             mInResumeTopActivity = true;           //resumeTopActivityInnerLocked()\u5b9e\u73b0             result = resumeTopActivityInnerLocked(prev, options);             ...         } finally {             mInResumeTopActivity = false;         }</p> <pre><code>    return result;\n}\n</code></pre> <p>//\u786e\u4fdd\u5f85\u542f\u52a8\u7684Activity\u53ef\u89c1\u6027\uff0c\u9884\u5b9aActivity\u7684\u5207\u6362\u52a8\u753b     private boolean resumeTopActivityInnerLocked(ActivityRecord prev, ActivityOptions options) {         if (!mAtmService.isBooting() &amp;&amp; !mAtmService.isBooted()) {             // Not ready yet!             return false;         }       //\u5224\u65ad\u662f\u5426\u9700\u8981\u505c\u6b62Activity1         boolean pausing = taskDisplayArea.pauseBackStacks(userLeaving, next);         if (mResumedActivity != null) {             if (DEBUG_STATES) Slog.d(TAG_STATES,                     \"resumeTopActivityLocked: Pausing \" + mResumedActivity);           //\u82e5\u505c\u6b62Activity1 \u5219\u8fd4\u56detrue             pausing |= startPausingLocked(userLeaving, false / uiSleeping /, next);         }       //\u5982\u679c\u8fdb\u7a0b\u5b58\u5728\u4e14\u5df2\u7ecf\u542f\u52a8\uff0c\u53d1\u9001ResumeActivityItem\u8bf7\u6c42\u5230App\u8fdb\u7a0b\u8fdb\u884cResume       transaction.setLifecycleStateRequest(       ResumeActivityItem.obtain(next.app.getReportedProcState(),dc.isNextTransitionForward()));       mAtmService.getLifecycleManager().scheduleTransaction(transaction);             ...         } else {             ...             mStackSupervisor.startSpecificActivity(next, true, true);         }</p> <pre><code>    return true;\n}\n</code></pre> <p>```</p> </li> <li> <p>ActivityStackSupervisor</p> </li> </ul> <p>\u200b      \u5728ActivityStackSupervisor\u7684<code>startSpecificActivity</code>\u65b9\u6cd5\u4e2d\uff0c\u5bf9\u4e8e\u5df2\u7ecf\u542f\u52a8\u8fdb\u7a0b\u7684Activity\uff0c\u4f1a\u8c03\u7528<code>realStartActivityLocked</code>\u65b9\u6cd5\uff0c\u770b\u540d\u5b57\u5c31\u77e5\u9053\u8fd9\u662f\u771f\u6b63\u7684\u542f\u52a8Activity\u4e86\uff08\u82e5\u5bf9\u5e94Activity\u7684\u8fdb\u7a0b\u5c1a\u672a\u542f\u52a8\uff0c\u5219\u4f1a\u901a\u8fc7ATMS\u7684<code>startProcessAsync</code>\u65b9\u6cd5\u542f\u52a8\u8fdb\u7a0b\uff0c\u8fd9\u5c31\u662f\u53e6\u4e00\u4e2a\u6d41\u7a0b\u4e86\uff09\u3002</p> <p><code>java   void startSpecificActivityLocked(ActivityRecord r,           boolean andResume, boolean checkConfig) {       // Is this activity's application already running?       // \u67e5\u627e\u76ee\u6807Activity\u5bf9\u5e94\u7684\u8fdb\u7a0b\u4fe1\u606f       ProcessRecord app = mService.getProcessRecordLocked(r.processName,               r.info.applicationInfo.uid, true);       getLaunchTimeTracker().setLaunchTime(r);       // \u5224\u65ad\u76ee\u6807\u8fdb\u7a0b\u662f\u5426\u5b58\u5728\u4e14\u6709\u6548       if (app != null &amp;&amp; app.thread != null) {           try {               if ((r.info.flags&amp;ActivityInfo.FLAG_MULTIPROCESS) == 0                       || !\"android\".equals(r.info.packageName)) {                   app.addPackage(r.info.packageName, r.info.applicationInfo.longVersionCode,                           mService.mProcessStats);               }             //\u771f\u6b63\u7684\u542f\u52a8Activity               realStartActivityLocked(r, app, andResume, checkConfig);               return;           } catch (RemoteException e) {               Slog.w(TAG, \"Exception when starting activity \"                       + r.intent.getComponent().flattenToShortString(), e);           }       }       // \u542f\u52a8\u76ee\u6807\u8fdb\u7a0b       mService.startProcessLocked(r.processName, r.info.applicationInfo, true, 0,               \"activity\", r.intent.getComponent(), false, false, true);   }      //\u901a\u8fc7\u4e8b\u52a1\u8fdb\u884c\u8fdb\u7a0b\u5207\u6362      boolean realStartActivityLocked(ActivityRecord r, WindowProcessController proc,               boolean andResume, boolean checkConfig) throws RemoteException {            final ClientTransaction clientTransaction = ClientTransaction.obtain(proc.getThread(), r.appToken);           clientTransaction.addCallback(LaunchActivityItem.obtain(...));         // Set desired final state.           clientTransaction.setLifecycleStateRequest(ResumeActivityItem.obtain(...));           mService.getLifecycleManager().scheduleTransaction(clientTransaction);      }</code></p> <p><code>mService</code>\u5bf9\u5e94\u7684\u5c31\u662fActivityTaskManagerService\uff0c\u5373ATMS\uff1b\u800c<code>getLifecycleManager</code>\u5bf9\u5e94\u7684\u7c7b\u662f<code>ClientLifecycleManager</code>\uff0c\u901a\u8fc7\u5176<code>scheduleTransaction</code>\u65b9\u6cd5\u5c06\u5bf9\u5e94\u4e8b\u52a1\u53d1\u9001\u5230App\u8fdb\u7a0b\u3002    \u5728\u8fd9\u91cc\uff0c<code>obtain</code>\u65b9\u6cd5\u4f20\u5165\u7684<code>proc.getThread()</code>\uff0c\u5373\u662f\u8054\u7cfb\u5f85\u542f\u52a8Activity\u8fdb\u7a0b\u7684Binder\u5bf9\u8c61\uff0c\u4e4b\u540e\u4f1a\u4e8e\u7cfb\u7edf\u670d\u52a1\u8fdb\u7a0b\u548cApp\u8fdb\u7a0b\u7684\u8de8\u8fdb\u7a0b\u901a\u4fe1\u3002   </p> <ul> <li>ClientLifecycleManager. ClientTransaction</li> </ul> <p>```java      // ClientLifecycleManager.scheduleTransaction        void scheduleTransaction(ClientTransaction transaction) throws RemoteException {           final IApplicationThread client = transaction.getClient();           transaction.schedule();          ...       }</p> <pre><code>  // ClientTransaction.schedule\n  public void schedule() throws RemoteException {\n      mClient.scheduleTransaction(this);\n  }\n</code></pre> <p>```</p> <p>mClient\u5bf9\u5e94\u7684\u7c7b\u662fIApplicationThread\u8fd9\u4e2aAIDL\u63a5\u53e3,\u5177\u4f53\u5b9e\u73b0\u7c7b\u662fActivityThread.ApplicationThread\u3002</p> <p>\u7cfb\u7edf\u670d\u52a1\u8fdb\u7a0bATMS\u5c06\u4e8b\u52a1\u8f6c\u53d1\u7ed9\u4e86App\u8fdb\u7a0b\u3002</p> <ul> <li> <p>IApplicationThread ApplicationThread  ActivityThread</p> <p><code>java   public void scheduleTransaction(ClientTransaction transaction) throws RemoteException {             ActivityThread.this.scheduleTransaction(transaction);         }</code></p> <p>ApplicationThread\u662fActivityThread\u7684\u5185\u90e8\u7c7b\uff0c\u5176\u5b9e\u73b0\u7684\u662fIApplicationThread\u4e2d\u7684\u65b9\u6cd5</p> </li> <li> </li> </ul> <p>\u5176\u542f\u52a8\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p></p> <p></p> <ul> <li> <p>ActivityThread\u3001ClientTransactionHandler</p> <p>ActivityThread\u4e2d\u6ca1\u6709\u8be5\u65b9\u6cd5scheduleTransaction()\uff0c\u5728\u5176\u7236\u7c7bClientTransactionHandler\u4e2d\u5b9e\u73b0</p> <p><code>java  /** Prepare and schedule transaction for execution. */     void scheduleTransaction(ClientTransaction transaction) {         transaction.preExecute(this);         sendMessage(ActivityThread.H.EXECUTE_TRANSACTION, transaction);     }</code></p> <p>sendMessage()\u65b9\u6cd5\u7684\u5b9e\u73b0\u5728ActivityThread,\u7531\u5b9e\u73b0\u53ef\u77e5\uff1amH\u53d1\u9001\u6d88\u606fEXECUTE_TRANSACTION,mH\u7684handleMessage()\u5904\u7406\u8fd9\u4e2a\u6d88\u606f\u3002mH\u7684\u7c7bH\u662f\u4e00\u4e2aActivityThread\u5185\u90e8\u7c7b\uff0c\u5b83\u662f\u4e00\u4e2aHandler\u3002</p> <p><code>java  public void handleMessage(Message msg) {             switch (msg.what) {                ...                 case EXECUTE_TRANSACTION:                     final ClientTransaction transaction = (ClientTransaction) msg.obj;                    //mTransactionExecutor\u662f\u7ba1\u7406\u4e8b\u52a1\u6267\u884c\u987a\u5e8f\u7684\u7c7bTransactionExecutor                     mTransactionExecutor.execute(transaction);                     if (isSystem()) {                         // Client transactions inside system process are recycled on the client side                         // instead of ClientLifecycleManager to avoid being cleared before this                         // message is handled.                         transaction.recycle();                     }                     // TODO(lifecycler): Recycle locally scheduled transactions.                     break;                 ...             }                             ...         }     }</code></p> </li> <li> <p>TransactionExecutor  \u7ba1\u7406\u4e8b\u52a1\u6267\u884c\u987a\u5e8f</p> <p>\u9996\u5148\uff0c\u6240\u6709\u56de\u8c03\u987a\u5e8f\u6309\u7167\u4ed6\u95e8\u51fa\u73b0\u5728\u5217\u8868\u4e2d\u7684\u987a\u5e8f\u6267\u884c\uff0c\u5176\u6b21\uff0c\u5982\u679c\u53ef\u4ee5\u652f\u6301\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u5faa\u73af\u5230\u6700\u7ec8\u7684\u751f\u547d\u5468\u671f</p> <p><code>java  public void execute(ClientTransaction transaction) {         ...        //\u6267\u884c\u56de\u8c03\u63d0\u4ea4\u7684\u4e8b\u52a1         executeCallbacks(transaction);        //\u6267\u884cActivity\u7684\u751f\u547d\u5468\u671f         executeLifecycleState(transaction);         mPendingActions.clear();         if (DEBUG_RESOLVER) Slog.d(TAG, tId(transaction) + \"End resolving transaction\");     }  /** Cycle through all states requested by callbacks and execute them at proper times. */\u3001     @VisibleForTesting     public void executeCallbacks(ClientTransaction transaction) {         ...         for (int i = 0; i &lt; size; ++i) {             ...             //item\u7684execute()\u662f\u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6,\u4f20\u5165\u7684LaunchActivityItem             item.execute(mTransactionHandler, token, mPendingActions);             item.postExecute(mTransactionHandler, token, mPendingActions);             ...         }     }</code></p> </li> <li> <p>LaunchActivityItem </p> <p><code>java     public void execute(ClientTransactionHandler client, IBinder token,             PendingTransactionActions pendingActions) {         Trace.traceBegin(TRACE_TAG_ACTIVITY_MANAGER, \"activityStart\");         ActivityClientRecord r = new ActivityClientRecord(token, mIntent, mIdent, mInfo,                 mOverrideConfig, mCompatInfo, mReferrer, mVoiceInteractor, mState, mPersistentState,                 mPendingResults, mPendingNewIntents, mIsForward,                 mProfilerInfo, client, mAssistToken, mFixedRotationAdjustments);            //\u627e\u5230\u4e86\u5177\u4f53\u542f\u52a8\u7684\u5b9e\u73b0\u4ee3\u7801          client.handleLaunchActivity(r, pendingActions, null /* customIntent */);         Trace.traceEnd(TRACE_TAG_ACTIVITY_MANAGER);     }</code></p> <p>client\u662fClientTransactionHandler\u7684\u5bf9\u8c61\uff0c\u5728\u4e0a\u9762\u6211\u4eec\u77e5\u9053ActivityThread\u5b9e\u73b0\u4e86ClientTransactionHandler\u7c7b</p> </li> <li> <p>ActivityThread</p> <p>```java //Activity\u542f\u52a8\u7684\u6269\u5c55\u5b9e\u73b0\uff1b\u5f53\u9700\u8981launch\u6216relaunch\u4e2d\u4f7f\u7528     public Activity handleLaunchActivity(ActivityClientRecord r,             PendingTransactionActions pendingActions, Intent customIntent) {        ...         //\u5728\u8fd9\u91cc\u521b\u5efa\u4e86Activity         final Activity a = performLaunchActivity(r, customIntent);        ...         return a;     } //\u542f\u52a8Acticity\u7684\u5177\u4f53\u5b9e\u73b0\u7c7b private Activity performLaunchActivity(ActivityClientRecord r, Intent customIntent) {    ...         ContextImpl appContext = createBaseContextForActivity(r);         Activity activity = null;         try {             java.lang.ClassLoader cl = appContext.getClassLoader();             //\u521b\u5efaActivity2\u5b9e\u4f8b             activity = mInstrumentation.newActivity(                     cl, component.getClassName(), r.intent);             StrictMode.incrementExpectedActivityCount(activity.getClass());             r.intent.setExtrasClassLoader(cl);             r.intent.prepareToEnterProcess();             if (r.state != null) {                 r.state.setClassLoader(cl);             }         } catch (Exception e) {             if (!mInstrumentation.onException(activity, e)) {                 throw new RuntimeException(                     \"Unable to instantiate activity \" + component                     + \": \" + e.toString(), e);             }         }</p> <pre><code>    try {\n        Application app = r.packageInfo.makeApplication(false, mInstrumentation);\n           ...\n            appContext.getResources().addLoaders(\n                    app.getResources().getLoaders().toArray(new ResourcesLoader[0]));\n\n            appContext.setOuterContext(activity);\n            //Activity\u7ed1\u5b9a\u5728Application\u4e2d\n            activity.attach(appContext, this, getInstrumentation(), r.token,\n                    r.ident, app, r.intent, r.activityInfo, title, r.parent,\n                    r.embeddedID, r.lastNonConfigurationInstances, config,\n                    r.referrer, r.voiceInteractor, window, r.configCallback,\n                    r.assistToken);\n            ...\n            if (r.isPersistable()) {\n                mInstrumentation.callActivityOnCreate(activity, r.state, r.persistentState);\n            } else {\n                //\u8c03\u7528Activity\u542f\u52a8\n                mInstrumentation.callActivityOnCreate(activity, r.state);\n            }\n         ...\n\n    return activity;\n</code></pre> <p>} ```</p> </li> <li> <p>Instrumentation</p> <p>\u5c31\u4f1a\u8c03\u7528Activity\u7684performCreate()\u65b9\u6cd5\u3002</p> <p><code>Java public void callActivityOnCreate(Activity activity, Bundle icicle) {     prePerformCreate(activity);     activity.performCreate(icicle);     postPerformCreate(activity); }</code></p> </li> <li> <p>Activity</p> <p><code>java     @UnsupportedAppUsage     final void performCreate(Bundle icicle, PersistableBundle persistentState) {        ...         if (persistentState != null) {             onCreate(icicle, persistentState);         } else {             onCreate(icicle);         }       ...     }</code></p> <p>\u6700\u540e\u8c03\u7528Activity2 \u91cd\u5199\u7684onCreate()\u65b9\u6cd5\u3002\u81f3\u6b64\u542f\u52a8\u5b8c\u6210\u3002 </p> </li> <li> <p>\u6ce8\uff1aTransactionExecutor</p> <p>```java private void executeLifecycleState(ClientTransaction transaction) {     // \u6b64\u65f6\u7684lifecycleItem\u4e3aResumeActivityItem     final ActivityLifecycleItem lifecycleItem = transaction.getLifecycleStateRequest();     if (lifecycleItem == null) {         // No lifecycle request, return early.         return;     }     log(\"Resolving lifecycle state: \" + lifecycleItem);</p> <pre><code>final IBinder token = transaction.getActivityToken();\n// \u6839\u636etoken\u53d6\u51fa\u7f13\u5b58\u7684ActivityClientRecord\nfinal ActivityClientRecord r = mTransactionHandler.getActivityClient(token);\n\nif (r == null) {\n    // Ignore requests for non-existent client records for now.\n    return;\n}\n\n// Cycle to the state right before the final requested state.\n// \u8be5\u65b9\u6cd5\u4e2d\u4f1a\u6309\u751f\u547d\u5468\u671f\u987a\u5e8f\u8865\u5145\u6267\u884c\u5bf9\u5e94\u751f\u547d\u5468\u671f\u9636\u6bb5\u7684\u65b9\u6cd5\ncycleToPath(r, lifecycleItem.getTargetState(), true /* excludeLastState */);\n\n// Execute the final transition with proper parameters.\nlifecycleItem.execute(mTransactionHandler, token, mPendingActions);\nlifecycleItem.postExecute(mTransactionHandler, token, mPendingActions);\n</code></pre> <p>} ```</p> <ul> <li>cycleToPath() \u6267\u884c\u5230\u8bf7\u6c42\u72b6\u6001\u4e4b\u524d\u7684\u72b6\u6001,\u6b64\u72b6\u6001\u5728realStartActivityLocked\u4e2d\u63d0\u4f9b</li> </ul> <p><code>java   // Set desired final state.   final ActivityLifecycleItem lifecycleItem;   if (andResume) {     lifecycleItem = ResumeActivityItem.obtain(dc.isNextTransitionForward());   } else {     lifecycleItem = PauseActivityItem.obtain();   }   clientTransaction.setLifecycleStateRequest(lifecycleItem);</code></p> <ul> <li>\u901a\u8fc7\u5408\u9002\u7684\u53c2\u6570\u6267\u884c\u5230\u6700\u540e\u7684\u72b6\u6001</li> </ul> <p><code>java   lifecycleItem.execute(mTransactionHandler, token, mPendingActions);   lifecycleItem.postExecute(mTransactionHandler, token, mPendingActions);</code></p> </li> </ul>"},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#appams","title":"App\u8fdb\u7a0b\u8bf7\u6c42AMS\u7684\u8fc7\u7a0b","text":""},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#ams","title":"AMS\u5904\u7406\u8bf7\u6c42","text":""},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#appactivity","title":"App\u8fdb\u7a0b\u542f\u52a8Activity\u7684\u8fc7\u7a0b","text":""},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#24-activity","title":"2.4 \u5bf9Activity\u542f\u52a8\u6d41\u7a0b\u7684\u603b\u7ed3","text":"<ul> <li>App\u8fdb\u7a0b\u548c\u7cfb\u7edf\u670d\u52a1\u8fdb\u7a0b\u662f\u901a\u8fc7IBinder\u8fdb\u884c\u8fdb\u7a0b\u95f4\u901a\u4fe1</li> </ul>"},{"location":"Android/Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#3activity","title":"3\u3001Activity\u7684\u542f\u52a8\u6a21\u5f0f","text":"<ul> <li>standard:\u6807\u51c6\u6a21\u5f0f</li> <li>\u4f1a\u521b\u5efa\u65b0\u7684Activity\u5b9e\u4f8b\uff0c\u5e76\u5c06\u8be5\u5b9e\u4f8b\u6dfb\u52a0\u5230\u5f53\u524dTask\u5185\u3002</li> <li>singleTop:Task\u6808\u9876\u590d\u7528\u6a21\u5f0f</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u5b9e\u4f8b\uff0c\u5df2\u7ecf\u4f4d\u4e8e\u6808\u9876\uff0c\u5c06\u4e0d\u4f1a\u521b\u5efa,\u4f1a\u8c03\u7528<code>onNewIntent()</code>\u65b9\u6cd5</li> <li>\u5176\u4f59\u548cstandard\u6a21\u5f0f\u662f\u4e00\u6837\u7684\u3002</li> <li>singleTask:Task\u5185\u5355\u4f8b\u6a21\u5f0f\u3002\u76ee\u7684\uff1a\u5728Task\u4e2d\u53ea\u5b58\u5728\u4e00\u4e2a\u5b9e\u4f8b</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u521b\u5efa\u65b0\u7684Activity\u5b9e\u4f8b\uff0c\u5e76\u5c06\u5b83\u653e\u5165\u6808\u9876</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u5b58\u5728\u4e14\u5728\u6808\u9876\uff0c\u5219\u4e0d\u4f1a\u521b\u5efa</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u5b58\u5728\u5728\u8be5\u4efb\u52a1\u6808\u4e14\u4e0d\u5728\u6808\u9876\uff0c\u5219\u4f1a\u5c06\u5df2\u5b58\u5728\u7684Activity\u4e4b\u4e0a\u7684\u6240\u6709Activity\u51fa\u6808\uff0c\u4f7fActivity\u4f4d\u4e8e\u6808\u9876</li> <li>\u82e5\u8bbe\u7f6e\u4e86<code>taskAffinity</code>,\u4f1a\u5148\u5224\u65adActivity\u662f\u5426\u5728\u8be5\u5c5e\u6027\u503c<code>taskAffinity</code>\u7684\u4efb\u52a1\u6808,\u82e5\u5b58\u5728\uff0c\u6309\u4ee5\u4e0a\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u82e5\u4e0d\u5728\uff0c\u5219\u4f1a\u65b0\u5f00\u4e00\u4e2a\u4efb\u52a1\u6808\u65b0\u5efaActivity\u3002</li> <li>singleInstance\uff1a\u5168\u5c40\u5355\u4f8b\u6a21\u5f0f</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u5728\u65b0\u7684Task\u521b\u5efa\u65b0\u7684Activity\u5b9e\u4f8b\uff0c\u5e76\u5c06\u5b83\u653e\u5165\u6808\u9876\uff0c\u8be5Task\u53ea\u4f1a\u5b58\u5728\u8be5Activity</li> <li>\u82e5\u8981\u542f\u52a8\u7684Activity\u5b58\u5728\uff0c\u5219\u4f1a\u628aActivity\u8f6c\u5230\u6808\u9876\uff0c\u4e14\u8be5Task\u53ea\u4f1a\u6709\u8fd9\u4e2aActivity\u3002</li> </ul> <p>3.1 \u542f\u52a8\u6a21\u5f0f\u7684\u539f\u7406</p> <ul> <li> <p>ActivityStarter#startActivityInner() \u542f\u52a8\u6a21\u5f0f\u7684\u5165\u53e3</p> </li> <li> <p>setInitialState()     \u521d\u59cb\u5316mLaunchFlags\u503c</p> </li> <li>computeLaunchingTaskFlags()  \u8c03\u6574\u542f\u52a8\u6807\u8bc6</li> <li>getReusableTask() \u6839\u636e\u542f\u52a8\u6807\u8bc6\u83b7\u53d6\u8981\u83b7\u53d6\u7684\u6808</li> <li>recycleTask()   \u6e05\u9664Activity</li> <li> <p>deliverToCurrentTopIfNeeded()  \u5728\u6808\u9876\u662f\u5426\u9700\u8981\u65b0\u5efa\u5b9e\u4f8b</p> </li> <li> <p>computeLaunchingTaskFlags()</p> </li> </ul> <p>\u5f53\u8c03\u7528Activity\u542f\u52a8\u7684\u4e0d\u662f\u6765\u81ea\u4e8e\u53e6\u4e00\u4e2aActivity,\u7ed9\u4e86\u660e\u786e\u6808\uff0c\u91cd\u65b0\u8bbe\u7f6eActivity Flags\u548cIntent</p> <p>\u5f53\u6765\u81ea\u4e8e\u53e6\u4e00\u4e2aActivity\u65f6\uff0c\u7ed9SingleInstance\u548cSingleTask\u6a21\u5f0f\uff0c\u6dfb\u52a0FLAG_ACTIVITY_NEW_TASK</p> <p>```java   private void computeLaunchingTaskFlags() {           // \u5f53\u8c03\u7528Activity\u542f\u52a8\u7684\u4e0d\u662f\u6765\u81ea\u4e8e\u53e6\u4e00\u4e2aActivity,\u7ed9\u4e86\u660e\u786e\u6808           if (mSourceRecord == null &amp;&amp; mInTask != null &amp;&amp; mInTask.getStack() != null) {               final Intent baseIntent = mInTask.getBaseIntent();               final ActivityRecord root = mInTask.getRootActivity();               if (baseIntent == null) {                   ActivityOptions.abort(mOptions);                   throw new IllegalArgumentException(\"Launching into task without base intent: \"                           + mInTask);               }               // If this task is empty, then we are adding the first activity -- it               // determines the root, and must be launching as a NEW_TASK.               //\u5f53\u6808\u4e3a\u7a7a\u65f6\uff0c\u5f53\u4f5c\u65b0\u5efa\u6808\u8fdb\u884c\u5904\u7406\uff0c\u6839root\u5fc5\u987b\u4e3a\u7a7a               if (isLaunchModeOneOf(LAUNCH_SINGLE_INSTANCE, LAUNCH_SINGLE_TASK)) {                   if (!baseIntent.getComponent().equals(mStartActivity.intent.getComponent())) {                       ActivityOptions.abort(mOptions);                       throw new IllegalArgumentException(\"Trying to launch singleInstance/Task \"                               + mStartActivity + \" into different task \" + mInTask);                   }                   if (root != null) {                       ActivityOptions.abort(mOptions);                       throw new IllegalArgumentException(\"Caller with mInTask \" + mInTask                               + \" has root \" + root + \" but target is singleInstance/Task\");                   }               }</p> <pre><code>          // If task is empty, then adopt the interesting intent launch flags in to the\n          // activity being started.\n          if (root == null) {\n              final int flagsOfInterest = FLAG_ACTIVITY_NEW_TASK | FLAG_ACTIVITY_MULTIPLE_TASK\n                      | FLAG_ACTIVITY_NEW_DOCUMENT | FLAG_ACTIVITY_RETAIN_IN_RECENTS;\n              mLaunchFlags = (mLaunchFlags &amp; ~flagsOfInterest)\n                      | (baseIntent.getFlags() &amp; flagsOfInterest);\n              mIntent.setFlags(mLaunchFlags);\n              mInTask.setIntent(mStartActivity);\n              mAddingToTask = true;\n\n              // If the task is not empty and the caller is asking to start it as the root of\n              // a new task, then we don't actually want to start this on the task. We will\n              // bring the task to the front, and possibly give it a new intent.\n          } else if ((mLaunchFlags &amp; FLAG_ACTIVITY_NEW_TASK) != 0) {\n              mAddingToTask = false;\n\n          } else {\n              mAddingToTask = true;\n          }\n\n          mReuseTask = mInTask;\n      } else {\n          mInTask = null;\n          // Launch ResolverActivity in the source task, so that it stays in the task bounds\n          // when in freeform workspace.\n          // Also put noDisplay activities in the source task. These by itself can be placed\n          // in any task/stack, however it could launch other activities like ResolverActivity,\n          // and we want those to stay in the original task.\n          if ((mStartActivity.isResolverOrDelegateActivity() || mStartActivity.noDisplay)\n                  &amp;&amp; mSourceRecord != null &amp;&amp; mSourceRecord.inFreeformWindowingMode()) {\n              mAddingToTask = true;\n          }\n      }\n      //\u5f53\u6765\u81ea\u4e8e\u53e6\u4e00\u4e2aActivity\u65f6\uff0c\u53c8\u6ca1\u6709\u6307\u5b9a\u6808\uff0c\u5bf9\u4ee5\u4e0b\u60c5\u51b5\u6dfb\u52a0FLAG_ACTIVITY_NEW_TASK\n            //\u6e90Activity\u4e3a\u7a7a\n            //\u6e90Activity\u542f\u52a8\u6a21\u5f0f\u4e3aLAUNCH_SINGLE_INSTANCE\n            //\u8981\u542f\u52a8\u7684Activity\u542f\u52a8\u6a21\u5f0f\u4e3aLAUNCH_SINGLE_INSTANCE, LAUNCH_SINGLE_TASK\n      if (mInTask == null) {\n          if (mSourceRecord == null) {\n              if ((mLaunchFlags &amp; FLAG_ACTIVITY_NEW_TASK) == 0 &amp;&amp; mInTask == null) {\n                  Slog.w(TAG, \"startActivity called from non-Activity context; forcing \" +\n                          \"Intent.FLAG_ACTIVITY_NEW_TASK for: \" + mIntent);\n                  mLaunchFlags |= FLAG_ACTIVITY_NEW_TASK;\n              }\n          } else if (mSourceRecord.launchMode == LAUNCH_SINGLE_INSTANCE) {\n              // The original activity who is starting us is running as a single\n              // instance...  this new activity it is starting must go on its\n              // own task.\n              mLaunchFlags |= FLAG_ACTIVITY_NEW_TASK;\n          } else if (isLaunchModeOneOf(LAUNCH_SINGLE_INSTANCE, LAUNCH_SINGLE_TASK)) {\n              // The activity being started is a single instance...  it always\n              // gets launched into its own task.\n              mLaunchFlags |= FLAG_ACTIVITY_NEW_TASK;\n          }\n      }\n  }\n</code></pre> <p>```</p> <ul> <li>startActivityInner</li> </ul> <p>```java    int startActivityInner(final ActivityRecord r, ActivityRecord sourceRecord,               IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor,               int startFlags, boolean doResume, ActivityOptions options, Task inTask,               boolean restrictedBgActivity, NeededUriGrants intentGrants) {           //\u8bbe\u7f6e\u53d8\u91cf\u521d\u59cb\u5316\u72b6\u6001 mLaunchMode\u4e3a\u542f\u52a8\u6a21\u5f0f\u53d8\u91cf           setInitialState(r, options, inTask, doResume, startFlags, sourceRecord, voiceSession,                   voiceInteractor, restrictedBgActivity);          //\u4e0d\u540c\u7684\u542f\u52a8\u6a21\u5f0f\u8bbe\u7f6elaunchFlag\uff0c\u4e3b\u8981\u662f\u7ed9singleTask\uff5c\uff5csingleInstance\u6dfb\u52a0FLAG_NEW_TASK\u6807\u7b7e           computeLaunchingTaskFlags();          //\u8d4b\u503cActivityStack           computeSourceStack();</p> <pre><code>      mIntent.setFlags(mLaunchFlags);\n      //\u83b7\u53d6\u8981\u6dfb\u52a0Activiity\u7684\u6808\n      final Task reusedTask = getReusableTask();\n\n      // If requested, freeze the task list\n      if (mOptions != null &amp;&amp; mOptions.freezeRecentTasksReordering()\n              &amp;&amp; mSupervisor.mRecentTasks.isCallerRecents(r.launchedFromUid)\n              &amp;&amp; !mSupervisor.mRecentTasks.isFreezeTaskListReorderingSet()) {\n          mFrozeTaskList = true;\n          mSupervisor.mRecentTasks.setFreezeTaskListReordering();\n      }\n\n      // Compute if there is an existing task that should be used for.\n      final Task targetTask = reusedTask != null ? reusedTask : computeTargetTask();\n      final boolean newTask = targetTask == null;\n      mTargetTask = targetTask;\n\n      computeLaunchParams(r, sourceRecord, targetTask);\n      //\u68c0\u67e5\u5728\u6808\u4e2d\u662f\u5426\u53ef\u4ee5\u542f\u52a8\n      // Check if starting activity on given task or on a new task is allowed.\n      int startResult = isAllowedToStart(r, newTask, targetTask);\n      if (startResult != START_SUCCESS) {\n          return startResult;\n      }\n\n      final ActivityRecord targetTaskTop = newTask\n              ? null : targetTask.getTopNonFinishingActivity();\n      //\u82e5\u4e0d\u9700\u8981\u65b0\u5f00\u6808\n      if (targetTaskTop != null) {\n          // \u6839\u636e\u542f\u52a8\u6807\u8bc6\u548c\u542f\u52a8\u6a21\u5f0f\u6e05\u7406\u4efb\u52a1\u6808\n          startResult = recycleTask(targetTask, targetTaskTop, reusedTask, intentGrants);\n          if (startResult != START_SUCCESS) {\n              return startResult;\n          }\n      } else {\n          mAddingToTask = true;\n      }\n\n      //\u5224\u65ad\u5728\u6808\u9876\u7684\u65f6\u5019\u662f\u5426\u9700\u8981\u91cd\u5efaActivity\u5b9e\u4f8b\n      final ActivityStack topStack = mRootWindowContainer.getTopDisplayFocusedStack();\n      if (topStack != null) {\n          startResult = deliverToCurrentTopIfNeeded(topStack, intentGrants);\n          if (startResult != START_SUCCESS) {\n              return startResult;\n          }\n      }\n\n      if (mTargetStack == null) {\n          mTargetStack = getLaunchStack(mStartActivity, mLaunchFlags, targetTask, mOptions);\n      }\n     //\u82e5\u9700\u8981\u65b0\u5efa\u6808\n      if (newTask) {\n          final Task taskToAffiliate = (mLaunchTaskBehind &amp;&amp; mSourceRecord != null)\n                  ? mSourceRecord.getTask() : null;\n          setNewTask(taskToAffiliate);\n          if (mService.getLockTaskController().isLockTaskModeViolation(\n                  mStartActivity.getTask())) {\n              Slog.e(TAG, \"Attempted Lock Task Mode violation mStartActivity=\" + mStartActivity);\n              return START_RETURN_LOCK_TASK_MODE_VIOLATION;\n          }\n      } else if (mAddingToTask) {\n          addOrReparentStartingActivity(targetTask, \"adding to task\");\n      }\n\n      if (!mAvoidMoveToFront &amp;&amp; mDoResume) {\n          mTargetStack.getStack().moveToFront(\"reuseOrNewTask\", targetTask);\n          if (mOptions != null) {\n              if (mOptions.getTaskAlwaysOnTop()) {\n                  mTargetStack.setAlwaysOnTop(true);\n              }\n          }\n          if (!mTargetStack.isTopStackInDisplayArea() &amp;&amp; mService.mInternal.isDreaming()) {\n              // Launching underneath dream activity (fullscreen, always-on-top). Run the launch-\n              // -behind transition so the Activity gets created and starts in visible state.\n              mLaunchTaskBehind = true;\n              r.mLaunchTaskBehind = true;\n          }\n      }\n\n      mService.mUgmInternal.grantUriPermissionUncheckedFromIntent(intentGrants,\n              mStartActivity.getUriPermissionsLocked());\n      if (mStartActivity.resultTo != null &amp;&amp; mStartActivity.resultTo.info != null) {\n          // we need to resolve resultTo to a uid as grantImplicitAccess deals explicitly in UIDs\n          final PackageManagerInternal pmInternal =\n                  mService.getPackageManagerInternalLocked();\n          final int resultToUid = pmInternal.getPackageUidInternal(\n                          mStartActivity.resultTo.info.packageName, 0, mStartActivity.mUserId);\n          pmInternal.grantImplicitAccess(mStartActivity.mUserId, mIntent,\n                  UserHandle.getAppId(mStartActivity.info.applicationInfo.uid) /*recipient*/,\n                  resultToUid /*visible*/, true /*direct*/);\n      }\n      if (newTask) {\n          EventLogTags.writeWmCreateTask(mStartActivity.mUserId,\n                  mStartActivity.getTask().mTaskId);\n      }\n      mStartActivity.logStartActivity(\n              EventLogTags.WM_CREATE_ACTIVITY, mStartActivity.getTask());\n\n      mTargetStack.mLastPausedActivity = null;\n\n      mRootWindowContainer.sendPowerHintForLaunchStartIfNeeded(\n              false /* forceSend */, mStartActivity);\n     // \u8fdb\u884cTaskRecord\u3001APP Window Token\u3001\u52a8\u753b\u3001\u7a97\u53e3\u590d\u7528\u7b49\u76f8\u5173\u68c0\u67e5\u548c\u914d\u7f6e\n      mTargetStack.startActivityLocked(mStartActivity, topStack.getTopNonFinishingActivity(),\n              newTask, mKeepCurTransition, mOptions);\n      if (mDoResume) {\n          final ActivityRecord topTaskActivity =\n                  mStartActivity.getTask().topRunningActivityLocked();\n          if (!mTargetStack.isTopActivityFocusable()\n                  || (topTaskActivity != null &amp;&amp; topTaskActivity.isTaskOverlay()\n                  &amp;&amp; mStartActivity != topTaskActivity)) {\n              // If the activity is not focusable, we can't resume it, but still would like to\n              // make sure it becomes visible as it starts (this will also trigger entry\n              // animation). An example of this are PIP activities.\n              // Also, we don't want to resume activities in a task that currently has an overlay\n              // as the starting activity just needs to be in the visible paused state until the\n              // over is removed.\n              // Passing {@code null} as the start parameter ensures all activities are made\n              // visible.\n              mTargetStack.ensureActivitiesVisible(null /* starting */,\n                      0 /* configChanges */, !PRESERVE_WINDOWS);\n              // Go ahead and tell window manager to execute app transition for this activity\n              // since the app transition will not be triggered through the resume channel.\n              mTargetStack.getDisplay().mDisplayContent.executeAppTransition();\n          } else {\n              // If the target stack was not previously focusable (previous top running activity\n              // on that stack was not visible) then any prior calls to move the stack to the\n              // will not update the focused stack.  If starting the new activity now allows the\n              // task stack to be focusable, then ensure that we now update the focused stack\n              // accordingly.\n              if (mTargetStack.isTopActivityFocusable()\n                      &amp;&amp; !mRootWindowContainer.isTopDisplayFocusedStack(mTargetStack)) {\n                  mTargetStack.moveToFront(\"startActivityInner\");\n              }\n              mRootWindowContainer.resumeFocusedStacksTopActivities(\n                      mTargetStack, mStartActivity, mOptions);\n          }\n      }\n      mRootWindowContainer.updateUserStack(mStartActivity.mUserId, mTargetStack);\n\n      // Update the recent tasks list immediately when the activity starts\n      mSupervisor.mRecentTasks.add(mStartActivity.getTask());\n      mSupervisor.handleNonResizableTaskIfNeeded(mStartActivity.getTask(),\n              mPreferredWindowingMode, mPreferredTaskDisplayArea, mTargetStack);\n\n      return START_SUCCESS;\n  }\n</code></pre> <p>```</p> <ul> <li>\u5bf9Activity\u542f\u52a8\u7684\u6808\u8fdb\u884c\u9009\u62e9</li> </ul> <p>```java</p> <pre><code>//\u9009\u62e9\u8981\u653e\u5165\u7684\u6808\nprivate Task getReusableTask() {\n      //\u5982\u679c\u76ee\u6807\u6808\u88ab\u6307\u5b9a\u4e86\uff0c\u5c3d\u91cf\u4f7f\u7528\u5b83\n      if (mOptions != null &amp;&amp; mOptions.getLaunchTaskId() != INVALID_TASK_ID) {\n          Task launchTask = mRootWindowContainer.anyTaskForId(mOptions.getLaunchTaskId());\n          if (launchTask != null) {\n              return launchTask;\n          }\n          return null;\n      }\n     //SingleTask or singleInstance  \u653e\u5165\u5df2\u6709\u7684\u6808\n    // multi task, always doc mode, or being asked to \u65b0\u5efa\u6808\n      boolean putIntoExistingTask = ((mLaunchFlags &amp; FLAG_ACTIVITY_NEW_TASK) != 0 &amp;&amp;\n              (mLaunchFlags &amp; FLAG_ACTIVITY_MULTIPLE_TASK) == 0)\n              || isLaunchModeOneOf(LAUNCH_SINGLE_INSTANCE, LAUNCH_SINGLE_TASK);\n      putIntoExistingTask &amp;= mInTask == null &amp;&amp; mStartActivity.resultTo == null;\n      ActivityRecord intentActivity = null;\n      if (putIntoExistingTask) {\n          if (LAUNCH_SINGLE_INSTANCE == mLaunchMode) {\n              //\u67e5\u627eSingleInstance\u5df2\u6709\u7684\u5b9e\u4f8b,\u4fdd\u8bc1\u6808\u7684\u552f\u4e00\n              intentActivity = mRootWindowContainer.findActivity(mIntent, mStartActivity.info,\n                     mStartActivity.isActivityTypeHome());\n          } else if ((mLaunchFlags &amp; FLAG_ACTIVITY_LAUNCH_ADJACENT) != 0) {\n              intentActivity = mRootWindowContainer.findActivity(mIntent, mStartActivity.info,\n                      !(LAUNCH_SINGLE_TASK == mLaunchMode));\n          } else {\n              // Otherwise find the best task to put the activity in.\n            //\u627e\u5230\u6700\u5408\u9002\u7684\u6808\u653e\u5165Activity\n              intentActivity =\n                      mRootWindowContainer.findTask(mStartActivity, mPreferredTaskDisplayArea);\n          }\n      }\n\n      if (intentActivity != null\n              &amp;&amp; (mStartActivity.isActivityTypeHome() || intentActivity.isActivityTypeHome())\n              &amp;&amp; intentActivity.getDisplayArea() != mPreferredTaskDisplayArea) {\n          // Do not reuse home activity on other display areas.\n          intentActivity = null;\n      }\n\n      return intentActivity != null ? intentActivity.getTask() : null;\n  }\n</code></pre> <p>```</p> <ul> <li>\u5224\u65ad\u5f53\u5728\u6808\u9876\u65f6\u662f\u5426\u9700\u8981\u521b\u5efaActivity\u5b9e\u4f8b</li> </ul> <p>```java   //\u5224\u65ad\u5728\u6808\u9876\u7684\u65f6\u5019\u662f\u5426\u9700\u8981\u91cd\u5efa\u5b9e\u4f8b       private int deliverToCurrentTopIfNeeded(ActivityStack topStack, NeededUriGrants intentGrants) {           final ActivityRecord top = topStack.topRunningNonDelayedActivityLocked(mNotTop);           final boolean dontStart = top != null &amp;&amp; mStartActivity.resultTo == null                   &amp;&amp; top.mActivityComponent.equals(mStartActivity.mActivityComponent)                   &amp;&amp; top.mUserId == mStartActivity.mUserId                   &amp;&amp; top.attachedToProcess()                   &amp;&amp; ((mLaunchFlags &amp; FLAG_ACTIVITY_SINGLE_TOP) != 0                   || isLaunchModeOneOf(LAUNCH_SINGLE_TOP, LAUNCH_SINGLE_TASK))                   &amp;&amp; (!top.isActivityTypeHome() || top.getDisplayArea() == mPreferredTaskDisplayArea);           //\u4e3afalse\u65f6\u9700\u8981\u91cd\u5efa         if (!dontStart) {               return START_SUCCESS;           }          //\u4e0d\u9700\u8981\u91cd\u5efa           // For paranoia, make sure we have correctly resumed the top activity.           topStack.mLastPausedActivity = null;           if (mDoResume) {               mRootWindowContainer.resumeFocusedStacksTopActivities();           }           ActivityOptions.abort(mOptions);           if ((mStartFlags &amp; START_FLAG_ONLY_IF_NEEDED) != 0) {               // We don't need to start a new activity, and the client said not to do anything if               // that is the case, so this is it!               return START_RETURN_INTENT_TO_CALLER;           }</p> <pre><code>      deliverNewIntent(top, intentGrants);\n\n      // Don't use mStartActivity.task to show the toast. We're not starting a new activity but\n      // reusing 'top'. Fields in mStartActivity may not be fully initialized.\n      mSupervisor.handleNonResizableTaskIfNeeded(top.getTask(),\n              mLaunchParams.mWindowingMode, mPreferredTaskDisplayArea, topStack);\n\n      return START_DELIVERED_TO_TOP;\n  }\n</code></pre> <p>```</p> <ul> <li>\u56de\u6536\u6808</li> </ul> <p>```java   //* \u51c6\u5907\u8981\u4e3a\u672c\u6b21\u542f\u52a8\u91cd\u7528\u7684\u76ee\u6807\u4efb\u52a1\uff0c\u5176\u4e2d\u5305\u62ec\uff1a         * - \u5c06\u76ee\u6807\u4efb\u52a1\u5b9a\u4f4d\u5728\u9996\u9009\u663e\u793a\u7684\u6709\u6548\u5806\u6808\u4e0a\u3002         * - \u9075\u5b88\u6307\u5b9a\u7684\u6d3b\u52a8\u542f\u52a8\u6807\u5fd7         * - \u786e\u5b9a\u662f\u5426\u9700\u8981\u5728\u9876\u90e8\u6dfb\u52a0\u65b0\u6d3b\u52a8\u6216\u53ea\u662f\u5c06\u4efb\u52a1\u653e\u5728\u524d\u9762\u3002    int recycleTask(Task targetTask, ActivityRecord targetTaskTop, Task reusedTask,               NeededUriGrants intentGrants) {           // Should not recycle task which is from a different user, just adding the starting           // activity to the task.           if (targetTask.mUserId != mStartActivity.mUserId) {               mTargetStack = targetTask.getStack();               mAddingToTask = true;               return START_SUCCESS;           }</p> <pre><code>      boolean clearTaskForReuse = false;\n      if (reusedTask != null) {\n          if (mStartActivity.getTask() == null) {\n              mStartActivity.setTaskForReuse(reusedTask);\n              clearTaskForReuse = true;\n          }\n\n          if (targetTask.intent == null) {\n              // This task was started because of movement of the activity based on\n              // affinity...\n              // Now that we are actually launching it, we can assign the base intent.\n              targetTask.setIntent(mStartActivity);\n          } else {\n              final boolean taskOnHome =\n                      (mStartActivity.intent.getFlags() &amp; FLAG_ACTIVITY_TASK_ON_HOME) != 0;\n              if (taskOnHome) {\n                  targetTask.intent.addFlags(FLAG_ACTIVITY_TASK_ON_HOME);\n              } else {\n                  targetTask.intent.removeFlags(FLAG_ACTIVITY_TASK_ON_HOME);\n              }\n          }\n      }\n\n      mRootWindowContainer.sendPowerHintForLaunchStartIfNeeded(false /* forceSend */,\n              targetTaskTop);\n\n      setTargetStackIfNeeded(targetTaskTop);\n\n      // When there is a reused activity and the current result is a trampoline activity,\n      // set the reused activity as the result.\n      if (mLastStartActivityRecord != null\n              &amp;&amp; (mLastStartActivityRecord.finishing || mLastStartActivityRecord.noDisplay)) {\n          mLastStartActivityRecord = targetTaskTop;\n      }\n\n      if ((mStartFlags &amp; START_FLAG_ONLY_IF_NEEDED) != 0) {\n          // We don't need to start a new activity, and the client said not to do anything\n          // if that is the case, so this is it!  And for paranoia, make sure we have\n          // correctly resumed the top activity.\n          if (!mMovedToFront &amp;&amp; mDoResume) {\n              if (DEBUG_TASKS) {\n                  Slog.d(TAG_TASKS, \"Bring to front target: \" + mTargetStack\n                          + \" from \" + targetTaskTop);\n              }\n              mTargetStack.moveToFront(\"intentActivityFound\");\n          }\n          resumeTargetStackIfNeeded();\n          return START_RETURN_INTENT_TO_CALLER;\n      }\n\n      complyActivityFlags(targetTask,\n              reusedTask != null ? reusedTask.getTopNonFinishingActivity() : null, intentGrants);\n\n      if (clearTaskForReuse) {\n          // Clear task for re-use so later code to methods\n          // {@link #setTaskFromReuseOrCreateNewTask}, {@link #setTaskFromSourceRecord}, or\n          // {@link #setTaskFromInTask} can parent it to the task.\n          mStartActivity.setTaskForReuse(null);\n      }\n\n      if (mAddingToTask) {\n          return START_SUCCESS;\n      }\n\n      // At this point we are certain we want the task moved to the front. If we need to dismiss\n      // any other always-on-top stacks, now is the time to do it.\n      if (targetTaskTop.canTurnScreenOn() &amp;&amp; mService.mInternal.isDreaming()) {\n          targetTaskTop.mStackSupervisor.wakeUp(\"recycleTask#turnScreenOnFlag\");\n      }\n\n      if (mMovedToFront) {\n          // We moved the task to front, use starting window to hide initial drawn delay.\n          targetTaskTop.showStartingWindow(null /* prev */, false /* newTask */,\n                  true /* taskSwitch */);\n      } else if (mDoResume) {\n          // Make sure the stack and its belonging display are moved to topmost.\n          mTargetStack.moveToFront(\"intentActivityFound\");\n      }\n      // We didn't do anything...  but it was needed (a.k.a., client don't use that intent!)\n      // And for paranoia, make sure we have correctly resumed the top activity.\n      resumeTargetStackIfNeeded();\n      // The reusedActivity could be finishing, for example of starting an activity with\n      // FLAG_ACTIVITY_CLEAR_TOP flag. In that case, return the top running activity in the\n      // task instead.\n      mLastStartActivityRecord =\n              targetTaskTop.finishing ? targetTask.getTopNonFinishingActivity() : targetTaskTop;\n      return mMovedToFront ? START_TASK_TO_FRONT : START_DELIVERED_TO_TOP;\n  }\n</code></pre> <p>```</p> <ul> <li>\u5c06\u542f\u52a8\u7684Flags\u6dfb\u52a0\u7ed9\u6808\uff0c\u5728\u8fd9\u4f1a\u5bf9\u4e00\u4e9b\u6216\u6240\u6709\u7684Activity\u8fdb\u884c\u51fa\u6808\u64cd\u4f5c</li> </ul> <p>```java    //\u5c06\u542f\u52a8\u6807\u5fd7\u6dfb\u52a0\u7ed9\u6808 \u4f1a\u5728\u6808\u4e2d\u6e05\u7a7a\u4e00\u4e2a\u6216\u6240\u6709\u7684Activity       private void complyActivityFlags(Task targetTask, ActivityRecord reusedActivity,               NeededUriGrants intentGrants) {           ActivityRecord targetTaskTop = targetTask.getTopNonFinishingActivity();           final boolean resetTask =                   reusedActivity != null &amp;&amp; (mLaunchFlags &amp; FLAG_ACTIVITY_RESET_TASK_IF_NEEDED) != 0;           if (resetTask) {               targetTaskTop = mTargetStack.resetTaskIfNeeded(targetTaskTop, mStartActivity);           }</p> <pre><code>      if ((mLaunchFlags &amp; (FLAG_ACTIVITY_NEW_TASK | FLAG_ACTIVITY_CLEAR_TASK))\n              == (FLAG_ACTIVITY_NEW_TASK | FLAG_ACTIVITY_CLEAR_TASK)) {\n          // The caller has requested to completely replace any existing task with its new\n          // activity. Well that should not be too hard...\n          // Note: we must persist the {@link Task} first as intentActivity could be\n          // removed from calling performClearTaskLocked (For example, if it is being brought out\n          // of history or if it is finished immediately), thus disassociating the task. Also note\n          // that mReuseTask is reset as a result of {@link Task#performClearTaskLocked}\n          // launching another activity.\n          // TODO(b/36119896):  We shouldn't trigger activity launches in this path since we are\n          // already launching one.\n          targetTask.performClearTaskLocked();\n          targetTask.setIntent(mStartActivity);\n          mAddingToTask = true;\n      } else if ((mLaunchFlags &amp; FLAG_ACTIVITY_CLEAR_TOP) != 0\n              || isDocumentLaunchesIntoExisting(mLaunchFlags)\n              || isLaunchModeOneOf(LAUNCH_SINGLE_INSTANCE, LAUNCH_SINGLE_TASK)) {\n          // In this situation we want to remove all activities from the task up to the one\n          // being started. In most cases this means we are resetting the task to its initial\n          // state.\n          final ActivityRecord top = targetTask.performClearTaskForReuseLocked(mStartActivity,\n                  mLaunchFlags);\n\n          // The above code can remove {@code reusedActivity} from the task, leading to the\n          // {@code ActivityRecord} removing its reference to the {@code Task}. The task\n          // reference is needed in the call below to {@link setTargetStackAndMoveToFrontIfNeeded}\n          if (targetTaskTop.getTask() == null) {\n              targetTask.addChild(targetTaskTop);\n          }\n\n          if (top != null) {\n              if (top.isRootOfTask()) {\n                  // Activity aliases may mean we use different intents for the top activity,\n                  // so make sure the task now has the identity of the new intent.\n                  top.getTask().setIntent(mStartActivity);\n              }\n              deliverNewIntent(top, intentGrants);\n          } else {\n              // A special case: we need to start the activity because it is not currently\n              // running, and the caller has asked to clear the current task to have this\n              // activity at the top.\n              mAddingToTask = true;\n              if (targetTask.getStack() == null) {\n                  // Target stack got cleared when we all activities were removed above.\n                  // Go ahead and reset it.\n                  mTargetStack =\n                          getLaunchStack(mStartActivity, mLaunchFlags, null /* task */, mOptions);\n                  mTargetStack.addChild(targetTask, !mLaunchTaskBehind /* toTop */,\n                          (mStartActivity.info.flags &amp; FLAG_SHOW_FOR_ALL_USERS) != 0);\n              }\n          }\n      } else if ((mLaunchFlags &amp; FLAG_ACTIVITY_CLEAR_TOP) == 0 &amp;&amp; !mAddingToTask\n              &amp;&amp; (mLaunchFlags &amp; FLAG_ACTIVITY_REORDER_TO_FRONT) != 0) {\n          // In this case, we are launching an activity in our own task that may\n          // already be running somewhere in the history, and we want to shuffle it to\n          // the front of the stack if so.\n          final ActivityRecord act =\n                  targetTask.findActivityInHistory(mStartActivity.mActivityComponent);\n          if (act != null) {\n              final Task task = act.getTask();\n              task.moveActivityToFrontLocked(act);\n              act.updateOptionsLocked(mOptions);\n              deliverNewIntent(act, intentGrants);\n              mTargetStack.mLastPausedActivity = null;\n          } else {\n              mAddingToTask = true;\n          }\n      } else if (mStartActivity.mActivityComponent.equals(targetTask.realActivity)) {\n          if (targetTask == mInTask) {\n              // In this case we are bringing up an existing activity from a recent task. We\n              // don't need to add a new activity instance on top.\n          } else if (((mLaunchFlags &amp; FLAG_ACTIVITY_SINGLE_TOP) != 0\n                          || LAUNCH_SINGLE_TOP == mLaunchMode)\n                  &amp;&amp; targetTaskTop.mActivityComponent.equals(mStartActivity.mActivityComponent)\n                  &amp;&amp; mStartActivity.resultTo == null) {\n              // In this case the top activity on the task is the same as the one being launched,\n              // so we take that as a request to bring the task to the foreground. If the top\n              // activity in the task is the root activity, deliver this new intent to it if it\n              // desires.\n              if (targetTaskTop.isRootOfTask()) {\n                  targetTaskTop.getTask().setIntent(mStartActivity);\n              }\n              deliverNewIntent(targetTaskTop, intentGrants);\n          } else if (!targetTask.isSameIntentFilter(mStartActivity)) {\n              // In this case we are launching the root activity of the task, but with a\n              // different intent. We should start a new instance on top.\n              mAddingToTask = true;\n          } else if (reusedActivity == null) {\n              mAddingToTask = true;\n          }\n      } else if (!resetTask) {\n          // In this case an activity is being launched in to an existing task, without\n          // resetting that task. This is typically the situation of launching an activity\n          // from a notification or shortcut. We want to place the new activity on top of the\n          // current task.\n          mAddingToTask = true;\n      } else if (!targetTask.rootWasReset) {\n          // In this case we are launching into an existing task that has not yet been started\n          // from its front door. The current task has been brought to the front. Ideally,\n          // we'd probably like to place this new task at the bottom of its stack, but that's\n          // a little hard to do with the current organization of the code so for now we'll\n          // just drop it.\n          targetTask.setIntent(mStartActivity);\n      }\n  }\n</code></pre> <p>```</p> <p>3.2 \u9002\u5408\u7684\u573a\u666f</p> \u542f\u52a8\u6a21\u5f0f \u9002\u5408\u573a\u666f standard \u5f53\u9700\u8981\u6bcf\u6b21\u8bf7\u6c42\u90fd\u65b0\u5f00\u4e00\u4e2a\u5b9e\u4f8b\u7684\u65f6\u5019\uff0c\u6bd4\u5982\uff0c\u6d4f\u89c8\u5668\u5f00\u591a\u4e2a\u6d4f\u89c8\u7a97\u53e3\u3002 SingleTop \u9002\u5408\u4f5c\u4e3a\u63a5\u53d7\u901a\u77e5\u7684\u542f\u52a8\u754c\u9762\uff0c\u6bd4\u5982\uff0c\u53d1\u9001\u5341\u6761\u901a\u77e5\uff0c\u53ea\u6253\u5f00\u4e00\u6b21\u5c31\u591f\u4e86\uff0c\u9002\u7528\u4e8eChildActivity SingleTask \u9002\u5408\u4f5c\u4e3a\u7a0b\u5e8f\u7684\u5165\u53e3\uff0c\u4e0d\u7ba1\u5176\u4ed6\u7a0b\u5e8f\u6253\u5f00\u8be5\u754c\u9762\u591a\u5c11\u6b21\uff0c\u90fd\u53ea\u4f1a\u5728\u4efb\u52a1\u6808\u4e2d\u5b58\u5728\u4e00\u4efd\uff0c\u6bd4\u5982\u6d4f\u89c8\u5668\u7684\u542f\u52a8\u754c\u9762\u3002\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u5355\u72ec\u7684<code>taskAffinity</code>,\u5728\u65b0\u7684\u4efb\u52a1\u6808\u4e2d\u6253\u5f00 SingleInstance \u9002\u5408\u6c38\u8fdc\u90fd\u4e0d\u4f1a\u53d8\u5316\u7684\u754c\u9762\uff0c\u6bd4\u5982\u95f9\u949f\u7684\u63d0\u9192\u754c\u9762\uff0c\u5728\u6bd4\u5982\u62e8\u53f7\u7a0b\u5e8f\u7684\u547c\u53eb\u754c\u9762\u3002 <ul> <li>App\u8fdb\u7a0b \u4e3a\u4ec0\u4e48\u8981\u5206\u6210\u4e24\u90e8\u8d70</li> <li>Provider \u4e5f\u53ef\u4ee5\u542f\u52a8app</li> <li>app\u51b7\u542f\u52a8\u65f6\u9664\u4e86\u4f1a\u542f\u52a8Activity,\u8fd8\u4f1a\u542f\u52a8Service BoardCast</li> <li>app\u51b7\u542f\u52a8\u7684\u65f6\u95f4\u7684\u5165\u53e3\u548c\u51fa\u53e3\uff0c\u5305\u542bApplication\u542f\u52a8\u7684\u65f6\u95f4+Activity\u7684\u542f\u52a8\u65f6\u95f4</li> <li>\u5982\u4f55\u53ef\u4ee5\u63a7\u5236\u51b7\u542f\u52a8\u7684\u5165\u53e3\u4ee3\u7801</li> </ul>"},{"location":"Android/Android%20Demo%20%20200/","title":"Android Demo  200","text":""},{"location":"Android/Android%20Demo%20%20200/#1","title":"1\u3001\u62bd\u5c49\u5f0f\u516c\u544a","text":"<ul> <li> <p>\u8bbe\u7f6eSlidingDrawer\u63a7\u4ef6</p> </li> <li> <p>\u8bbe\u7f6e\u62bd\u5c49\u5f15\u5bfc\u6309\u94ae</p> </li> <li> <p>\u8bbe\u7f6e\u62bd\u5c49\u663e\u793a\u5185\u5bb9</p> </li> <li> <p>\u5b9e\u73b0\u5168\u5c4f\u62bd\u5c49\u5f0f\u5e7f\u544a</p> </li> </ul> <p><code>xml   android:content=\"@id/show_content\"  //SlidingDraw \u663e\u793a\u5185\u5bb9   android:handle=\"@id/ly_1\" //\u6253\u5f00\u62bd\u5c49\u5f0f\u516c\u544a\u7684\u6309\u94ae</code></p>"},{"location":"Android/Android%20Demo%20%20200/#2","title":"2\u3001\u6ed1\u52a8\u83dc\u5355","text":"<ul> <li>\u7ed8\u5236\u9690\u85cf\u83dc\u5355\u754c\u9762</li> <li>\u65b0\u5efa\u4e00\u4e2aHorizontalScrollView\u7684\u5b50\u7c7bView\uff0c\u7528\u6765\u8bbe\u7f6e\u6eda\u52a8</li> <li>\u5728View \u4e2d\u91cd\u5199onMeasure()\u3001onLayout()\u3001onTouchEvent()\u65b9\u6cd5</li> <li>\u7ed8\u5236\u4e3b\u754c\u9762\uff0c\u5c06View\u6dfb\u52a0\u8fdb\u53bb</li> <li>\u9047\u5230\u7684\u95ee\u9898</li> <li>\u56e0\u4e3a\u603b\u4f53\u4e3b\u9898\u5e03\u5c40\uff0cButton\u7684\u989c\u8272\u4e0d\u53d8<ul> <li>MainActivity \u7ee7\u627fActivity</li> <li>\u4fee\u6539\u4e3b\u9898</li> </ul> </li> </ul>"},{"location":"Android/Android%20Demo%20%20200/#3","title":"3\u3001\u9000\u51fa\u5bf9\u8bdd\u6846","text":"<ul> <li> <p>\u5b9e\u73b0\u4e3b\u754c\u9762\u5e03\u5c40</p> </li> <li> <p>\u5b9e\u73b0Dialog\u5e03\u5c40</p> </li> <li> <p>\u65b0\u5efa\u52a8\u753b\u81ea\u5b9a\u4e49\u6837\u5f0f</p> </li> <li> <p>\u65b0\u5efa\u4e00\u4e2aDialog\u7ee7\u627fDialog\uff0c\u7ed8\u5236\u5e03\u5c40</p> </li> <li> <p>\u5728\u4e3b\u5e03\u5c40\u4e2d\u5b9e\u73b0onKeyDown()\u51fd\u6570</p> </li> </ul> <p><code>java     @Override       public boolean onKeyDown(int keyCode, KeyEvent event) {           //\u5982\u679c\u5355\u51fb\u4e86\u8fd4\u56de\u6309\u94ae           if(keyCode == KeyEvent.KEYCODE_BACK){               dlg = new Dialog(this);               dlg.setCancelable(false);//\u70b9\u51fb\u7a7a\u767d\u5904\u4e0d\u6d88\u5931               Window window = dlg.getWindow();               window.setContentView(R.layout.dialog_layout);               window.setWindowAnimations(R.style.myStyle);               Bt_Ensure = (Button)window.findViewById(R.id.Ensure);               Bt_Cancle =(Button)window.findViewById(R.id.Cancle);               initEvent();               dlg.show(); //\u663e\u793a\u5bf9\u8bdd\u6846   }</code></p>"},{"location":"Android/Android%20Demo%20%20200/#4","title":"4\u3001\u6d88\u606f\u901a\u77e5","text":"<ul> <li> <p>\u521b\u5efa\u4e3b\u5e03\u5c40\u548c\u6d88\u606f\u8fd4\u56de\u7684\u5e03\u5c40</p> </li> <li> <p>\u53d1\u9001\u6d88\u606f\uff08\u5728Android8.0\u4e4b\u540e\uff0c\u5fc5\u987b\u8981\u6dfb\u52a0\u901a\u77e5\u6e20\u9053\uff09</p> </li> <li> <p>\u83b7\u53d6\u901a\u77e5\u670d\u52a1\u7ba1\u7406</p> </li> <li> <p>\u521b\u5efa\u901a\u77e5\u6e20\u9053</p> </li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u542f\u52a8\u5176\u4ed6Activity\u7684Intent (PendingIntent)</p> </li> <li> <p>\u521b\u5efa\u6d88\u606f\u901a\u77e5\u7c7b</p> </li> <li> <p>\u53d1\u9001\u901a\u77e5</p> <p>```java       //\u83b7\u53d6\u901a\u77e5\u670d\u52a1\u7ba1\u7406         NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</p> <pre><code>    //\u521b\u5efa\u4e00\u4e2a\u542f\u52a8\u5176\u4ed6\u6d88\u606f\u7684Intent\n    Intent intent = new Intent(MainActivity.this, Message.class);\n    PendingIntent Pi = PendingIntent.getActivity(this, 0, intent, 0);\n</code></pre> <p>//\u521b\u5efa\u901a\u77e5\u6e20\u9053         NotificationChannel channel1 = new NotificationChannel(CHANNEL_1, \"\u70ed\u70b9\u4fe1\u606f\", NotificationManager.IMPORTANCE_HIGH);         channel1.setDescription(\"\u901a\u77e5\u6e20\u9053\u63cf\u8ff0\");          notificationManager.createNotificationChannel(channel1);</p> <pre><code>    //\u521b\u5efa\u6d88\u606f\u901a\u77e5\u7c7b\n    Notification notification = new Notification.Builder(MainActivity.this)\n            .setChannelId(CHANNEL_1)  //\u8bbe\u7f6e\u6d88\u606f\u901a\u9053\u6e20\u9053\n            .setAutoCancel(true)    //\u8bbe\u7f6e\u6253\u5f00\u6d88\u606f\u901a\u77e5\u540e\u8be5\u901a\u77e5\u81ea\u52a8\u6d88\u5931\n            .setTicker(\"\u7b2c\u4e00\u6761\u901a\u77e5\u53d1\u9001\u4e86\")\n            .setLargeIcon(BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher)) //\u8bbe\u7f6e\u4e0b\u62c9\u5217\u8868\u4e2d\u7684\u5927\u56fe\n            .setContentTitle(\"\u6211\u662f\u6807\u9898\")  //\u8bbe\u7f6e\u6807\u9898\n            .setContentText(\"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5\")\n            .setWhen(System.currentTimeMillis()) //\u8bbe\u7f6e\u5f53\u524d\u65f6\u95f4\u4e3a\u53d1\u9001\u65f6\u95f4\n            //\u8bbe\u7f6e\u6807\u9898\u84dd\u6d88\u606f\u901a\u77e5\u5c0f\u56fe\u6807\n            .setSmallIcon(R.mipmap.ic_launcher)\n            .setContentIntent(Pi)\n            .build();\n\n    //\u53d1\u9001\u901a\u77e5\n    notificationManager.notify(NOTIFYID, notification);\n</code></pre> <p>```</p> </li> </ul>"},{"location":"Android/Android%20Demo%20%20200/#5","title":"5\u3001\u82f9\u679c\u9000\u51fa\u5bf9\u8bdd\u6846","text":"<ul> <li> <p>\u5efa\u7acb\u9000\u51fa\u5bf9\u8bdd\u6846\u7684Activity</p> </li> <li> <p>\u521b\u5efa\u5bf9\u8bdd\u6846\u5e03\u5c40\u548c\u6837\u5f0f</p> </li> </ul> <p>```xml   </p> <p> <p> </p> <pre><code>  &lt;View\n      android:layout_width=\"@dimen/layout_width\"\n      android:layout_height=\"1dp\"\n      android:background=\"@color/grey\"\n      android:layout_below=\"@+id/layout_title\"\n      android:layout_marginBottom=\"10dp\"/&gt;\n</code></pre> <pre><code>  &lt;RelativeLayout\n      android:id=\"@+id/bottomBtn\"\n      android:layout_width=\"@dimen/layout_width\"\n      android:layout_height=\"wrap_content\"\n      android:layout_below=\"@+id/layout_title\"&gt;\n      &lt;LinearLayout\n          android:layout_width=\"@dimen/layout_width\"\n          android:layout_height=\"wrap_content\"\n          android:orientation=\"horizontal\"&gt;\n</code></pre> <pre><code>          &lt;Button\n              android:id=\"@+id/btn_cancle\"\n              android:layout_width=\"0dp\"\n              android:layout_weight=\"1\"\n              android:layout_height=\"wrap_content\"\n              android:text=\"@string/text_cancel\"\n              android:textColor=\"@color/blue\"\n              android:paddingTop=\"10dp\"\n              android:paddingBottom=\"10dp\"/&gt;\n          &lt;View\n              android:layout_width=\"1dp\"\n              android:layout_height=\"match_parent\"\n              android:background=\"@color/grey\"/&gt;\n          &lt;Button\n              android:id=\"@+id/btn_exit\"\n              android:layout_width=\"0dp\"\n              android:layout_weight=\"1\"\n              android:layout_height=\"wrap_content\"\n              android:text=\"@string/text_exit\"\n              android:textColor=\"@color/blue\"\n              android:paddingTop=\"10dp\"\n              android:paddingBottom=\"10dp\"/&gt;\n      &lt;/LinearLayout&gt;\n  &lt;/RelativeLayout&gt;\n</code></pre> <p>   ```</p> <ul> <li>\u65b0\u5efaMdialog \u7ee7\u627f\u4e8eDialog\uff0c\u6dfb\u52a0\u6837\u5f0f\u548c\u5e03\u5c40</li> </ul> <p><code>java    super(context,R.style.mdialog);    //\u7ed8\u5236\u80cc\u666f    View view = LayoutInflater.from(getContext()).inflate(R.layout.activity_mdialog,null);</code></p> <ul> <li>\u5728Activity\u4e2d\u663e\u793a\u5bf9\u8bdd\u6846\uff0c\u5e76\u5bf9\u53d6\u6d88\u548c\u786e\u5b9a\u9000\u51fa\u6309\u94ae\u6dfb\u52a0\u70b9\u51fb\u4e8b\u4ef6</li> </ul>"},{"location":"Android/Android%20Demo%20%20200/#6","title":"6\u3001\u5e95\u90e8\u5bfc\u822a\u680f\u7684\u5b9e\u73b0\u65b9\u5f0f","text":""},{"location":"Android/Android%20Demo%20%20200/#tablayout-fragement","title":"\u65b9\u5f0f\u4e00\uff1aTabLayout + Fragement","text":"<ul> <li>xml : \u4f7f\u7528TabLayout\u63a7\u4ef6</li> </ul> <p><code>xml   &lt;com.google.android.material.tabs.TabLayout               android:id=\"@+id/visitor_tab\"               android:layout_width=\"match_parent\"               android:layout_height=\"50dp\"               app:tabTextColor=\"@color/black\"               app:tabIndicatorHeight=\"0dp\"               app:tabSelectedTextColor=\"@color/purple_700\"/&gt;</code></p> <ul> <li> <p>Java\u6587\u4ef6</p> </li> <li> <p>\u521d\u59cb\u5316\u6570\u636e</p> </li> <li> <p>\u6dfb\u52a0Tab\u76d1\u542c</p> <p>```java mTablayout.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {   @Override   public void onTabSelected(TabLayout.Tab tab) {     onTabItemSelected(tab.getPosition());     //\u6539\u53d8Tab\u72b6\u6001     for(int i= 0;i&lt;mTablayout.getTabCount();i++){       if(i == tab.getPosition()){                 mTablayout.getTabAt(i).setIcon(getResources().getDrawable(DataGenerator.mTabResPressed[i]));       }else{  mTablayout.getTabAt(i).setIcon(getResources().getDrawable(DataGenerator.mTabRes[i]));       }     }   }</p> <p>@Override   public void onTabUnselected(TabLayout.Tab tab) {</p> <p>}</p> <p>@Override   public void onTabReselected(TabLayout.Tab tab) {</p> <p>} }); ```</p> <p>\u91cd\u70b9\u5b9e\u73b0onTabSelected\u51fd\u6570</p> <ul> <li>Fragment\u7684\u66ff\u6362</li> <li>\u56fe\u6807\u7684\u66ff\u6362</li> </ul> </li> <li> <p>\u6dfb\u52a0Tab\u9009\u9879</p> <p><code>java mTablayout.addTab(mTablayout.newTab().setIcon(getResources().getDrawable(R.drawable.tab_home_selector)).setText(DataGenerator.mTabTitle[0]),true);</code></p> </li> </ul> <p>\u6ce8\u610f\uff1a\u6dfb\u52a0Tab\u9009\u9879\u8981\u5728Tab\u76d1\u542c\u4e4b\u540e</p> <p>\u200b           \u53ef\u4ee5\u4f7f\u7528setCustomView\u5b9e\u73b0Tab\u7684\u81ea\u5b9a\u4e49\u5e03\u5c40</p> <p>\u4f18\u70b9\uff1aTabLayout\u63d0\u4f9b\u4e86\u73b0\u6210\u7684\u63a7\u4ef6\u548c\u65b9\u6cd5\uff0c\u4e86\u89e3\u4e86\u5176\u5c5e\u6027\u548cAPI\u540e\uff0c\u80fd\u5feb\u901f\u7684\u5b9e\u73b0\u5e95\u90e8\u5bfc\u822a\u680f</p> <p>\u7f3a\u70b9\uff1a\u53ef\u6269\u5c55\u6027\u8f83\u5dee\uff0c\u53ea\u80fd\u4f7f\u7528\u56fa\u5b9a\u7684Api\u3002</p>"},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/","title":"Android \u5220\u9664\u65e0\u7528\u8d44\u6e90","text":""},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#res","title":"Res\u8d44\u6e90\u7c7b\u578b\u6574\u7406","text":"\u8d44\u6e90 type \u76ee\u5f55 \u8bf4\u660e anim anim res/anim/.xml \u8865\u95f4\u52a8\u753b animator animator res/animator/.xml \u5c5e\u6027\u52a8\u753b color color res/color/.xml \u989c\u8272\u72b6\u6001\u5217\u8868 drawable drawable res/drawable/ \u4f4d\u56fe\u6587\u4ef6 drawablecolor drawable res/values/color.xml \u4f7f\u7528drawable\u751f\u6210\u7684color\u6587\u4ef6\uff0c\u662f\u53ef\u7ed8\u5236\u8d44\u6e90\u7684\u4e00\u79cd\uff0c\u4e13\u95e8\u62bd\u51fa\u662f\u56e0\u4e3aReasource\u6709\u5355\u72ec\u5904\u7406 mipmap mipmap res/mipmap \u9002\u7528\u4e8e\u4e0d\u540c\u542f\u52a8\u5668\u56fe\u6807\u5bc6\u5ea6\u7684\u53ef\u7ed8\u5236\u5bf9\u8c61\u6587 layout layout res/layout/.xml \u5b9a\u4e49\u754c\u9762\u5e03\u5c40 menu menu res/menu/.xml \u7528\u4e8e\u5b9a\u4e49\u5e94\u7528\u83dc\u5355\u7684xml\u6587\u4ef6 raw raw res/raw \u9700\u4ee5\u539f\u59cb\u5f62\u5f0f\u4fdd\u5b58\u7684\u4efb\u610f\u6587\u4ef6 \u6bd4\u5982.mp4 array array res/value/arrays.xml \u7528\u4e8e\u8d44\u6e90\u6570\u7ec4\uff08\u7c7b\u578b\u5316\u6570\u7ec4\uff09 color color res/value/colors.xml \u7528\u4e8e\u989c\u8272\u503c dimen dimen res/value/dimens.xml <code>dimens.xml</code> \u7528\u4e8e\u7ef4\u5ea6\u503c string string res/value/strings.xml <code>strings.xml</code> \u7528\u4e8e\u5b57\u7b26\u4e32\u503c style stylestyleable res/value/styles.xml <code>styles.xml</code> \u7528\u4e8e\u6837\u5f0f xml xml res/xml/.xml \u53ef\u5728\u8fd0\u884c\u65f6\u901a\u8fc7\u8c03\u7528 <code>Resources.getXML()</code> \u8bfb\u53d6\u7684\u4efb\u610f XML \u6587\u4ef6\u3002 font font res/font \u5e26\u6709\u6269\u5c55\u540d\u7684\u5b57\u4f53\u6587\u4ef6\uff08\u4f8b\u5982 TTF\u3001OTF \u6216 TTC\uff09"},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#asset","title":"Asset\u8d44\u6e90","text":"<p>\u53ef\u4ee5\u62ff\u5230\u539f\u59cb\u7684\u8d44\u6e90\u540d\u79f0\u548c\u8d44\u6e90\u76ee\u5f55</p>"},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#_1","title":"\u65b9\u6848\u539f\u7406","text":""},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#_rtxt","title":"\u6240\u6709\u8d44\u6e90\u7684\u7d22\u5f15\u6587\u4ef6_R.txt\uff1a","text":"<pre><code>/app/build/intermediates/runtime_symbol_list/debug/R.txt\n</code></pre> <p>\u683c\u5f0f\u4e3a\uff1a\u6570\u636e\u7c7b\u578b \u8d44\u6e90\u5206\u7c7b \u8d44\u6e90\u540d\u79f0 \u8d44\u6e90id</p> <pre><code>&lt;!--\u4e3e\u4f8b--&gt;\nint anim abc_fade_in 0x7f010000\n</code></pre>"},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#processres-task-ap_","title":"processRes Task \u7684\u4ea7\u7269AP_ \u6587\u4ef6:","text":"<p>AP_ \u6587\u4ef6 \u662fprocessDResources \u547d\u4ee4\u4e0b\u7684\u4ea7\u7269</p> <p>\u89e3\u538b\u540e\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e09\u4e2a\u6587\u4ef6\uff1a</p> <ol> <li><code>AndroidManifest.xml</code>:\u5408\u5e76\u7684AndroidManifest\u6587\u4ef6</li> <li><code>res/*</code> \uff1a\u5408\u5e76\u540e\u7684\u6240\u6709res\u6587\u4ef6</li> <li><code>resources.arsc</code>:resources.arsc\u662fAndroid\u7f16\u8bd1\u540e\u751f\u6210\u7684\u4ea7\u7269\uff0c\u4e3b\u8981\u662f\u7528\u6765\u5efa\u7acb\u8d44\u6e90\u6620\u5c04\u5173\u7cfb</li> </ol> <p>\u8be6\u7ec6\u4ecb\u7ecd</p> <p>merge.xml\uff1a</p> <pre><code>/intermediates/incremental/debug/mergeDebugResources/merger.xml\n</code></pre>"},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#hookgetresourcesgetidentifier","title":"\u901a\u8fc7\u63d2\u6869hookgetResources().getIdentifier()","text":""},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#_2","title":"\u65b9\u6848","text":""},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#_3","title":"\u65b9\u6848\u6d41\u7a0b","text":"<p>1.\u901a\u8fc7R.txt\u6587\u4ef6\u83b7\u53d6\u6240\u6709\u7684\u8d44\u6e90</p> <p>2.\u5728AndroidManifest.xml\u67e5\u627e\u5f15\u7528\u7684\u8d44\u6e90</p> <p>3.web.jar \u901a\u8fc7R.java\u6587\u4ef6\u548cresources.arsc \u67e5\u627e\u5230Java\u6587\u4ef6\u4e2d\u5f15\u7528\u7684\u8d44\u6e90</p> <ul> <li>\u82e5\u662flayout, array,style\u7b49\uff0c\u4f1a\u63a5\u7740\u5728xml\u627e\u4f7f\u7528\u5230\u7684\u8d44\u6e90</li> </ul> <p>4.1\u51cf\u53bb2\uff0c3\u6b65\u4e2d\u4f7f\u7528\u5230\u7684\u8d44\u6e90\uff0c\u5c31\u662f\u65e0\u7528\u8d44\u6e90\uff0c\u751f\u6210app/build/unuse_res.txt\u6587\u4ef6\u4e2d</p> <p>5.\u6839\u636emerge.xml\u62ff\u5230\u5404\u4e2aaar\u4e2d\u7684res\u8d44\u6e90\uff0c\u5224\u65adres\u8d44\u6e90\u662f\u5426\u5728\u65e0\u7528\u8d44\u6e90\u4e2d\uff0c\u6700\u540e\u5f97\u5230\u9700\u8981\u5220\u9664\u7684\u65e0\u7528\u8d44\u6e90</p> <p>6.\u751f\u6210\u65e0\u7528\u8d44\u6e90\u5220\u9664\u62a5\u544a</p> <p>7.\u901a\u8fc7python\u811a\u672c\u5220\u9664\u626b\u63cf\u51fa\u6765\u7684\u65e0\u7528\u8d44\u6e90</p> <p>8.\u901a\u8fc7\u63d2\u6869getResources().getIdentifier() ,\u6765hook\u901a\u8fc7\u8d44\u6e90name\u5b57\u7b26\u4e32\u6765\u83b7\u53d6id\u7684\u60c5\u51b5\uff0c\u4e0a\u7ebf\u89c2\u5bdf</p>"},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#_4","title":"\u65b9\u6848\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u4e0b\u8f7d\u5730\u5740\uff1ahttps://gitlab.weibo.cn/zhangqian20/unres</p> <p>CheckResUnuse2File.groovy</p> <p>1.\u811a\u672c\u4f7f\u7528\u65b9\u5f0f\uff1a</p> <p>\u9700\u8981groovy\u8fd0\u884c\u73af\u5883</p> <ul> <li>\u9996\u5148\u5148\u5728\u672c\u5730\u5207\u5230dev\u5206\u652f\u7f16\u8bd1\u5fae\u535a\u6e90\u7801</li> </ul> <p>./gradlew clean app:assembleDebug</p> <ul> <li> <p>\u4fee\u6539source_moudle \u4e2d\u6dfb\u52a0\u6253\u5f00\u7684\u6a21\u5757\uff1a\u5982: Arrays.asList(\"allmodules:sdk\", \"allmodules:main\")</p> </li> <li> <p>\u8fd0\u884cCheckResUnuse2File.groovy</p> </li> </ul> <p>./groovy CheckResUnuse2File.groovy [\u5fae\u535a\u5de5\u7a0b\u76ee\u5f55]  [\u62a5\u544a\u751f\u6210\u6587\u4ef6]</p> <p><code>java   ./groovy CheckResUnuse2File.groovy Android/Weibo/Weibo_Project  GroovyTest/src/result.html</code></p> <p>2.\u5220\u9664\u811a\u672c\u4f7f\u7528\u65b9\u5f0f</p> <p>\u9700\u8981python\u8fd0\u884c\u73af\u5883</p> <p>python3 -m delete_res_in_weibo.py--file_path /Users/zhangqian20/Project/JAVA/GroovyTest/public/unuseres --res_path /Users/zhangqian20/Project/Android/Weibo/Weibo_Project --delete true</p> <p>3.\u4e0a\u7ebf\u8fd0\u884c</p> <p>\u5c06\u5220\u9664\u7684\u8d44\u6e90\u505a\u4e00\u4e2a\u515c\u5e95\uff0c\u7136\u540e\u4e0a\u7ebf\u9a8c\u8bc1\u662f\u5426\u6709\u901a\u8fc7\u5b57\u7b26\u4e32\u62fc\u63a5name\u83b7\u53d6id\u3002</p>"},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#_5","title":"\u6ce8\u610f","text":"<p>1.getResources().getIdentifier()  \u62fc\u63a5\u7684id,\u4e0d\u662fname\u7684\u5168\u540d\u2014\u2014hook\u4f4f</p> <p>2.layout \u4e2did\u8d44\u6e90\u5e76\u6ca1\u6709\u6392\u51fa\u2014\u2014 \u7f16\u8bd1\u65f6\u53ef\u4ee5\u68c0\u67e5\u51fa\u6765</p> <p>3.Tool:text \u4e2d\u5f15\u7528\u7684\u8d44\u6e90\u672a\u626b\u63cf\u5230 \u2014\u2014\u4e0d\u6253\u8fdb\u5305\u91cc</p> <p>4.Widget\u4e2d\u7684\u8d44\u6e90\u4f1a\u653e\u5728assert\u7684json\u8d44\u6e90\u4e0b\u2014\u2014\u4e0d\u4f1a\u5f15\u8d77\u5d29\u6e83</p> <p>5.ci \u81ea\u52a8\u5316\u6d4b\u8bd5\u4e2d\u9700\u8981\u4f7f\u7528\u7684\u8d44\u6e90</p> <p>6.Assert \u4e2d\u5f15\u7528\u7684\u8d44\u6e90\uff0c\u4f1a\u653e\u5728json\u6587\u4ef6\u4e2d</p>"},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#hook","title":"\u65e0\u7528\u8d44\u6e90\u5220\u9664\u9700\u8981Hook\u7684\u767d\u540d\u5355","text":""},{"location":"Android/Android%20%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90/#photoalbumextlib_uiwboxgame","title":"photoalbum,extlib_ui,wboxgame\u8bef\u5220\u8d44\u6e90\uff1a","text":"<p>drawable_weixin_brush_pic</p> <p>\u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d:Weibo_Project/mediaproducer/assets/photoalbum/local_graffiti.json</p>"},{"location":"Android/Android%20%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/","title":"Android \u95ee\u9898\u603b\u7ed3","text":""},{"location":"Android/Android%20%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#android-resource-linking-failed","title":"Android resource linking failed","text":""},{"location":"Android/Android%20%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_1","title":"\u9519\u8bef\u539f\u56e0","text":"<p>\u8981\u89e3\u51b3\u9519\u8bef\u8981\u5148\u660e\u767d\u9519\u8bef\u7684\u539f\u56e0\u662f\u4ec0\u4e48\u3002\u4ece\u8fd9\u4e2a\u9519\u8bef\u7684\u63cf\u8ff0\u53ef\u4ee5\u77e5\u9053\u8fd9\u4e2a\u9519\u8bef\u662f\u56e0\u4e3a\u8d44\u6e90\u94fe\u63a5\u9519\u8bef\u3002\u6700\u660e\u663e\u7684\u539f\u56e0\u5c31\u662f\u4f60\u7684xml\u786e\u5b9e\u6709\u95ee\u9898\uff0c\u9519\u8bef\u76f4\u63a5\u6307\u5411\u4f60\u51fa\u9519\u7684\u5730\u65b9\uff0c\u8fd9\u79cd\u60c5\u51b5\u975e\u5e38\u7b80\u5355\uff0c\u4fee\u6539\u9519\u8bef\u7684\u5730\u65b9\u5c31\u884c\u3002\u5982\u4e0b\u9762\u7684\u9519\u8bef\uff0c\u76f4\u63a5\u6307\u5411\u7279\u5b9a\u7684xml\uff0c\u800c\u4e14\u8fd9\u4e2a\u6587\u4ef6\u662f\u6211\u5199\u7684\uff0cxml\u91cc\u9762\u76f4\u63a5\u7ea2\u7ebf\u9519\u8bef\uff0c\u76f4\u63a5\u4fee\u6539\u5c31\u884c\u3002</p> <p>\u4f46\u51fa\u73b0\u8fd9\u4e2a\u9519\u8bef\u7684\u5927\u90e8\u5206\u60c5\u51b5\u90fd\u662f\u4e0d\u77e5\u9053\u662f\u4ec0\u4e48\u539f\u56e0\uff0c\u8fd9\u662f\u8fd9\u4e2a\u9519\u8bef\u6700\u8ba9\u4eba\u5934\u75bc\u7684\u5730\u65b9\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u9519\u8bef\u3002\u4e0b\u9762\u7684\u4fe1\u606f\u6709\u4e24\u70b9\u662f\u6709\u7528\u7684\uff0c\u4e00\u662f\u8def\u5f84\u662f\u672c\u5730gradle\uff08\u4e0d\u662fAS\u7684\u91cc\u9762.gradle\uff09\u7684\u7f13\u5b58\u8def\u5f84./gradle/caches\u3002\u81f3\u4e8etransforms-2\u8fd9\u4e2a\u76ee\u5f55\u53ef\u4ee5\u4e0d\u592a\u5173\u5fc3\uff0c\u6709\u65f6\u53ef\u80fd\u62a5\u522b\u7684\u76ee\u5f55\u3002\u8fd8\u6709\u4e00\u4e2a\u6709\u7528\u7684\u4fe1\u606f\u662fcore-1.7.0\u3002\u8fd9\u4e2a\u5305\u662fandroix\u7684\u6838\u5fc3\u5305\uff0c\u8fd9\u4e2a\u4fe1\u606f\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u9519\u8bef\u662f\u53d1\u751f\u5728androidx\u4e0a\u9762\uff0c\u8fd9\u5df2\u7ecf\u5e2e\u6211\u4eec\u5927\u5927\u7f29\u5c0f\u8303\u56f4\u3002</p> <p>\u4f7f\u7528\u4ee3\u7801\u83b7\u53d6\u8be6\u7ec6\u4fe1\u606f\uff1a</p> <p>\u4e0a\u56fe\u7684\u4fe1\u606f\u53ef\u80fd\u4e0d\u591f\u5168\u9762\uff0c\u800c\u4e14\u4e0d\u597d\u590d\u5236\u7c98\u8d34\u9519\u8bef\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u83b7\u53d6\u8be6\u7ec6\u4fe1\u606f\uff1a</p> <p>./gradlew build --stacktrace  </p> <p>\u53ef\u4ee5\u5206\u6790\u9519\u8bef\u4fe1\u606f\u83b7\u53d6\u6709\u7528\u7684\u4fe1\u606f\u3002</p>"},{"location":"Android/Android%20%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#1cache","title":"1.\u901a\u5e38\uff08\u901a\u7528\uff09\u89e3\u51b3\u65b9\u6848\uff1a\u5220\u9664cache","text":"<p>\u8fd9\u4e2a\u9519\u8bef\u6709\u53ef\u80fd\u7531\u4e8e\u7f13\u5b58\u7684\u539f\u56e0\u9020\u6210\u5947\u602a\u7684\u9519\u8bef\u3002\u4e0b\u9762\u7684\u9519\u8bef\u4fe1\u606f\u662f\u4e0d\u56fa\u5b9a\u7684\uff0c\u62a5\u7684\u8def\u5f84\u662f.gradle/caches/transforms-2\uff0c\u62a5\u54ea\u4e2a\u8def\u5f84\u5c31\u5220\u54ea\u4e2a\u3002\u628aAS\u7684build\u548cAS\u7684.gradle\u540c\u65f6\u5220\u9664\uff0c\u7136\u540einvaild and restart\u3002\u6709\u53ef\u80fd\u5c31\u53ef\u4ee5\u89e3\u51b3\u9519\u8bef\u3002</p> <p>\u5982\u679c\u8fd9\u79cd\u65b9\u5f0f\u6ca1\u6709\u6548\u679c\uff0c\u90a3\u4e48\u5c31\u8981\u8003\u8651\u4e0b\u9762\u5177\u4f53\u7684\u95ee\u9898\u3002</p>"},{"location":"Android/Android%20%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#2sdk","title":"2.\u5177\u4f53\u4e00\uff1aSDK\u95ee\u9898","text":"<p>compileSdkVersion\u548cbuildToolsVersion\u7684\u5927\u7248\u672c\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u4f8b\u5982compileSdkVersion\u662f28\uff0c\u90a3\u4e48buildToolsVersion\u4e00\u5b9a\u8981\u662f28.xx.xx\u3002\u4e0d\u4e00\u81f4\u4f1a\u62a5\u8fd9\u4e2a\u9519\u8bef\u3002</p> <p>compileSdkVersion 28 buildToolsVersion \"28.0.3\"</p>"},{"location":"Android/Android%20%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#3appcompat","title":"3.\u5177\u4f53\u4e8c\uff1aappcompat\u5bfc\u81f4\u7684\u95ee\u9898\uff08\u7248\u672c\u95ee\u9898\uff09","text":"<p>\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u9519\u8bef\u3002\u7531\u4e8e\u5e93\u7684\u7248\u672c\u95ee\u9898\u5bfc\u81f4\u7684\u9519\u8bef\u3002</p> <p>\u867d\u7136\u6211\u4eec\u53ef\u4ee5\u5206\u6790\u51facore-1.7.0\u662fandroidx\u7684\u6838\u5fc3\u5e93\u3002\u4f46\u8fd8\u662f\u4e0d\u77e5\u9053\u5177\u4f53\u662f\u4ec0\u4e48\u539f\u56e0\u3002\u8fd9\u662f\u6211\u5b9e\u9645\u9047\u5230\u7684\uff0c\u6700\u540e\u53d1\u73b0\u662fappcompat\u7684\u7248\u672c\u95ee\u9898\u5bfc\u81f4\u7684\u3002\u539f\u6765\u4f7f\u7528\u7684\u662f1.4.1\u7248\u672c\uff0c\u8fd9\u4e2a\u7248\u672c\u592a\u9ad8\u4e86\uff0c\u6362\u62101.2.0\u5c31\u53ef\u4ee5\u4e86\u3002constraintlayout\u867d\u7136\u4e0d\u662f\u8fd9\u4e2a\u95ee\u9898\u7684\u539f\u56e0\uff0c\u4f46\u662f\u8fd9\u4e2a\u7248\u672c\u592a\u9ad8\u4f1a\u5bfc\u81f4\u9884\u89c8\u6ca1\u6709\u6548\u679c\u3002</p> <p>implementation 'androidx.appcompat:appcompat:1.2.0' implementation 'androidx.constraintlayout:constraintlayout:2.0.4'</p> <p>\u7248\u672c\u56de\u8c03\u6280\u5de7\uff1a \u5148\u56de\u8c03\u5927\u7248\u672c\u518d\u8c03\u5c0f\u7248\u672c\u3002\u4f8b\u59822.0.0\u76f4\u63a5\u6539\u4e3a1.0.0\uff0c\u518d1.1.0\uff0c1.2.0\u8fd9\u6837\u8c03\uff0c\u5982\u679c\u662f\u7248\u672c\u95ee\u9898\uff0c\u5f88\u5feb\u5c31\u53ef\u4ee5\u89e3\u51b3\u3002</p>"},{"location":"Android/Android%20%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#4","title":"4.\u5177\u4f53\u4e09\uff1a\u4efb\u610f\u5e93\uff08\u5b9e\u9645\u65e0\u5173\uff09\u5bfc\u81f4\u7684\u95ee\u9898","text":"<p>\u89e3\u51b3\u7684\u601d\u8def\u90fd\u662f\u7c7b\u4f3c\u7684\u3002\u4ee5\u4e0b\u9762\u7684\u9519\u8bef\u4e3a\u4f8b\u5b50\u3002\u51fa\u95ee\u9898\u7684\u5e93\u662fmaterial-1.6.0\uff0c\u5728gradle\u91cc\u9762\u5f15\u7528\u4e86\u8fd9\u4e2a\u5e93\uff0c\u4f46\u6211\u5728\u4ee3\u7801\u91cc\u9762\u6ca1\u6709\u7528\u8fc7\u8fd9\u4e2a\u5e93\u76f8\u5173\u7684\u7c7b\u3002\u8fd9\u4e2a\u9519\u8bef\u5b9e\u9645\u4e0a\u662f\u83ab\u540d\u5176\u5999\u7684\uff0c\u56e0\u4e3a\u6211\u4e4b\u524d\u7528\u7684\u597d\u597d\u7684\uff0c\u91cd\u65b0\u6253\u5f00AS\u5c31\u83ab\u540d\u5176\u5999\u51fa\u95ee\u9898\u4e86\u3002\u5982\u679c\u4f60\u6ca1\u6709\u4f7f\u7528\u8fd9\u4e2a\u5e93\u7684\u7c7b\uff0c\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u628amaterial-1.6.0\u8fd9\u4e2a\u5e93\u5728gradle\u91cc\u9762\u53bb\u9664\u5f15\u7528\u3002\u522b\u7684\u9519\u8bef\u5904\u7406\u90fd\u662f\u7c7b\u4f3c\u7684\uff0c\u5173\u952e\u662f\u6839\u636e\u51fa\u95ee\u9898\u7684\u5e93\u7f29\u5c0f\u5904\u7406\u8303\u56f4\u3002</p> <p>.gradle/caches/transforms-2/files-2.1/56dee953d5284ac3fce000007c35f379/material-1.6.0/res/values-v31/values-v31.xml:3:5- \u4f46\u662f\u53bb\u9664\u5f15\u7528\u867d\u7136\u89e3\u51b3\u95ee\u9898\u4e86\uff0c\u6211\u5c31\u60f3\u7528\u8fd9\u4e2a\u5e93\u8be5\u600e\u4e48\u529e\u5462\uff1f\u5b9e\u9645\u4e0a\u8fd8\u662f\u7248\u672c\u95ee\u9898\u3002\u628a1.6.0\u6539\u62101.2.0\u7248\u672c\u5c31\u53ef\u4ee5\u89e3\u51b3\u4e86\u3002</p> <p>\u603b\u7ed3 \u9664\u4e86compileSdkVersion\u548cbuildToolsVersion\u7684\u7248\u672c\u95ee\u9898\u5916\uff0c\u7edd\u5927\u90e8\u5206\u539f\u56e0\u90fd\u662f\u5f15\u7528\u5e93\u7684\u7248\u672c\u95ee\u9898\uff0c\u6839\u636e\u51fa\u95ee\u9898\u7684\u5e93\u56de\u8c03\u7248\u672c\u5c31\u53ef\u4ee5</p>"},{"location":"Android/Android%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/","title":"Charless\u5b89\u88c5\u914d\u7f6e\u6559\u7a0b","text":"<p>1\u3001\u4e0b\u8f7d\u5b89\u88c5Charless 4.6.2</p> <p>2\u3001\u5c06charless\u8bbe\u7f6e\u76f8\u5e94\u64cd\u4f5c\u7cfb\u7edf\u7684\u4ee3\u7406</p> <p>3\u3001\u914d\u7f6eAndroid</p> <ul> <li>\u67e5\u770b\u672c\u673aIP\u5730\u5740\uff1aHelp -&gt; Local IP Addresses</li> <li>\u6253\u5f00Android \u7684\u65e0\u7ebf\u8fde\u63a5\uff0c\u548cPC\u7684\u65e0\u7ebf\u8fde\u63a5\u4fdd\u6301\u4e00\u81f4</li> <li>\u914d\u7f6e\u4ee3\u7406\uff0c\u624b\u52a8-&gt;\u586b\u5199PC\u76f8\u5e94\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7</li> <li>\u4f1a\u5411PC\u53d1\u9001\u914d\u7f6e\u8bf7\u6c42\uff0c\u70b9\u51fb\u5141\u8bb8\uff0c\u5728Proxy -&gt; Access Control Settings\u91cc\u770b\u5230\u53ef\u4ee5\u8bbf\u95ee\u6b64\u4ee3\u7406\u670d\u52a1\u5668\u5217\u8868</li> </ul>"},{"location":"Android/Android%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/#adb","title":"Adb \u547d\u4ee4\u4f7f\u7528","text":"<p>1\u3001\u5b89\u88c5</p> <p>brew install --cask android-platform-tools</p> <p>2\u3001\u67e5\u8be2\u5f53\u524d\u8fd0\u884c\u7684Activity</p> <p>adb shell dumpsys activity | grep -i run</p> <p>adb shell dumpsys activity | grep mResumedActivity</p> <p>3\u3001\u67e5\u8be2\u6b63\u5728\u8fd0\u884c\u7684Services</p> <p>adb shell dumpsys activity services | grep ServiceName</p> <pre><code>dumpsys activity services | grep schemebyService\n#\u8fd0\u884c\u7684\u4f1a\u6709\u76f8\u5173\u65e5\u5fd7\u6253\u5370\n</code></pre> <p>4\u3001\u8c03\u8d77Activity</p> <ul> <li>\u901a\u8fc7\u5305\u540d\u548c</li> </ul> <p>adb shell am start [options]  <p> = \u5305\u540d/Activity\u540d\u79f0    <p>Activity\u8fd8\u5fc5\u987b\u5305\u542b\u5c5e\u6027<code>android:exported=\"true\"</code></p> <p>Eg\uff1a adb shell am start -n com.sina.weibo/com.sina.weibo.VisitorMoreActivity</p> <p>\u5fae\u535a\u4e2d\uff0c\u5305\u540d\u90fd\u662f\u8fd9\u4e2a\uff1acom.sina.weibo</p> <ul> <li>\u901a\u8fc7Scheme \u8c03\u8d77Activity</li> </ul> <p><code>adb   adb shell am start -a [action] -d [uri] [packagename]</code></p> <p>Eg\uff1a</p> <p><code>adb   adb shell am start -a android.intent.action.VIEW -d \"sinaweibo://searchall?\"</code></p> <p>\u5982\u679cScheme \u542b\u6709\u53c2\u6570\uff0c\u5728adb shell \u547d\u4ee4\u4e0b\uff0c\u6253\u5f00Scheme.</p> <pre><code>adb shell #\u7b2c\u4e00\u6b65\nam start -a android.intent.action.VIEW  -d \"sinaweibo://searchall?containerid=100103&amp;q=%23%E8%B0%81%E6%98%AF%E5%87%B6%E6%89%8B%E5%90%91%E5%AE%8B%E8%8C%9C%E9%81%93%E6%AD%89%23&amp;isnewpage=1&amp;extparam=seat%3D1%26source%3Dranklist%26filter_type%3Drealtimehot%26pos%3D0%26pre_seqid%3D583717771%26dgr%3D0%26c_type%3D30%26mi_cid%3D100103%26flag%3D257%26cate%3D0%26display_time%3D1638955922%26pre_seqid%3D583717771\"\n</code></pre> <p>5\u3001\u67e5\u8be2\u8bbe\u5907</p> <pre><code>adb devices\n</code></pre> <p>6\u3001adb\u67e5\u8be2logcat</p> <ul> <li>\u67e5\u8be2\u5f53\u524d\u5305\u540d\u6240\u5728\u7684PID </li> </ul> <p><code>adb   adb shell dumpsys meminfo \u5305\u540d   adb logcat | grep PID</code></p> <ul> <li> <p>\u6761\u4ef6\u67e5\u8be2</p> </li> <li> <p>\u6839\u636eTag\u548c\u7ea7\u522b\u67e5\u8be2</p> <p><code>adb adb logcat -s TAG adb logcat TAG:\u7ea7\u522b *:s //*:s \u610f\u5473\u4e0d\u67e5\u770b\u5176\u4ed6\u65e5\u5fd7</code></p> </li> <li> <p>\u4ee5\u67d0\u79cd\u683c\u5f0f\u67e5\u8be2</p> <p><code>adb db logcat -b \u7f13\u51b2\u533a\u7c7b\u578b \u6ce8\uff1a\u7f13\u51b2\u533a\u7c7b\u578b\uff08radio-\u65e0\u7ebf\u7f13\u51b2\u533a\uff0cevents-\u4e8b\u4ef6\u7f13\u51b2\u533a\uff0cmain-\u4e3b\u7f13\u51b2\u533a\uff0c\u9ed8\u8ba4\uff09</code></p> </li> <li> <p>\u5199\u5230\u6587\u4ef6\u4e2d</p> </li> </ul> <p><code>adb   adb logvat -f filename \u67e5\u8be2\u6761\u4ef6</code></p> <ul> <li>\u6e05\u7406\u5df2\u7ecf\u5b58\u5728\u7684\u65e5\u5fd7</li> </ul> <p><code>adb   adb logcat -c</code></p> <ul> <li>\u5c06\u65e5\u5fd7\u663e\u793a\u5728\u63a7\u5236\u53f0\u540e\u9000\u51fa</li> </ul> <p><code>adb   adb logcat -d</code></p>"},{"location":"Android/Android%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/#ssh","title":"SSH","text":"<ul> <li>\u4fee\u6539\u5bc6\u7801</li> </ul>"},{"location":"Android/Android%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/#homebrew","title":"HomeBrew \u5b89\u88c5","text":"<ul> <li>\u5b89\u88c5\u547d\u4ee4\uff1a\uff08\u5728bash\u7684\u547d\u4ee4\u7a97\u53e3\u4e2d\uff09</li> </ul> <pre><code>/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n</code></pre> <ul> <li> <p>\u9047\u5230\u7684\u95ee\u9898</p> </li> <li> <p>\u5b89\u88c5\u6210\u529f\u4f46\u662f\u6709\u4e00\u4e2aWarning\u548cnext step\u7684\u63d0\u793a</p> <p></p> <p></p> <ul> <li> <p>\u9996\u5148\u6211\u6309\u7167\u63d0\u793a\u5728.bash_profile\u6dfb\u52a0<code>$(/opt/homebrew/bin/brew shellenv)</code>\uff0c\u4f46\u662f\u6211\u53d1\u73b0\u6240\u6709\u7684\u547d\u4ee4not commend,</p> </li> <li> <p>\u6240\u4ee5\u53ea\u80fd\u6267\u884c</p> </li> </ul> <p><code>bash   export PATH=\"/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin\"</code></p> <p>\u8fd9\u6837\u5c31\u53ef\u4ee5\u91cd\u65b0\u6253\u5f00.bash_profile\u6587\u4ef6\uff0c\u5c06\u6dfb\u52a0\u7684\u5220\u9664\u6389</p> <ul> <li> <p>\u4f46\u662f\u4ecd\u7136\u4f1a\u62a5\u9519\uff1a brew not commend</p> </li> <li> <p>\u6267\u884c\uff1a</p> </li> </ul> <p><code>bash   export PATH=$PATH:/opt/homebrew/bin</code></p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u662f\u5c06brew\u547d\u4ee4\u653e\u5728\u7ec8\u7aef\u4e2d\uff0c\u81f3\u6b64\u53ef\u4ee5\u4f7f\u7528\u3002</p> </li> <li> <p>\u73af\u5883\u53d8\u91cf\u914d\u7f6e,\u653e\u5728.bash_profile</p> <p><code>bash export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles/bottles</code></p> </li> <li> <p>\u4e00\u4e9b\u6e90\u7684\u94fe\u63a5</p> <p><code>xml //\u6e05\u534e\u6e90 https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles</code></p> </li> </ul>"},{"location":"Android/Android%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/#adb-bugreport","title":"adb  bugreport","text":"<ul> <li>\u8bfb\u53d6\u8bbe\u5907\u6240\u6709\u4fe1\u606f</li> </ul> <p><code>bash   adb bugreport &gt; bugreport.txt</code></p> <p>\u4f1a\u751f\u6210\u8be5\u8bbe\u5907\u7684\u6240\u6709\u4fe1\u606f\u5728\u538b\u7f29\u5305\u4e2d\u3002</p> <p>\u56e0\u4e3aadb bugreport\u6ca1\u6709\u4ec0\u4e48\u9009\u9879\uff0c\u662f\u901a\u8fc7dumpsys\u7b49\u547d\u4ee4\u914d\u5408\u5b8c\u6210\u7684\u3002</p> <ul> <li>\u91cd\u7f6e\u7535\u6c60\u7edf\u8ba1\u4fe1\u606f</li> </ul> <p><code>bash   adb shell dumpsys batterystats --reset</code></p> <ul> <li>.Wakelock analysis\u5168\u90e8wakelock\u4fe1\u606f</li> </ul> <p><code>bash   adb shell dumpsys batterystats --enable full-wake-history</code></p> <ul> <li>Kernel trace analysis\u5206\u6790\u5185\u6838\uff0c\u4e3b\u8981\u5206\u6790wakeup source\u548cwakelock activities\uff0c\u9996\u5148\u4f7fkernel\u5206\u6790</li> </ul> <p>```bash   #\u6682\u65f6\u8fd8\u4e0d\u77e5\u9053\u8fd9\u4e2a\u6709\u4ec0\u4e48\u7528   $ adb root   $ adb shell</p> <p># Set the events to trace.   $ echo \"power:wakeup_source_activate\" &gt;&gt; /d/tracing/set_event   $ echo \"power:wakeup_source_deactivate\" &gt;&gt; /d/tracing/set_event</p> <p># The default trace size for most devices is 1MB, which is relatively low and might cause the logs to overflow.   # 8MB to 10MB should be a decent size for 5-6 hours of logging.</p> <p>$ echo 8192 &gt; /d/tracing/buffer_size_kb</p> <p>$ echo 1 &gt; /d/tracing/tracing_on</p> <p>#\u5199\u5165\u65e5\u5fd7   $ echo 0 &gt; /d/tracing/tracing_on   $ adb pull /d/tracing/trace  <p># Take a bug report at this time.   $ adb bugreport &gt; bugreport.txt   ```</p> <p>\u83b7\u53d6bugreport\u538b\u7f29\u5305\u540e\uff0c\u4f7f\u7528battery historian\u5206\u6790\u3002</p>"},{"location":"Android/ContentProvider/","title":"ContentProvider","text":""},{"location":"Android/ContentProvider/#contentprovider_1","title":"\u76d1\u542cContentProvider","text":"<p>\u53d1\u9001\u53d8\u5316\u901a\u77e5</p> <pre><code>this.getContext().getContentResolver().notifyChange(URI,null);\n</code></pre> <p>\u6ce8\u518c\u76d1\u542c</p> <pre><code>context.getContentResolver().registerContentObserver(uri,true,new ContentObserver(new Handler()));\n</code></pre> <p>\u521b\u5efa\u5185\u90e8\u7c7b\u7ee7\u627fContentObserver\u5e76\u91cd\u5199\u4e0b\u9762\u4e24\u4e2a\u65b9\u6cd5\uff1a (1)\u5e26\u6709Handler\u7684\u6784\u9020\u51fd\u6570\uff1b (2)public void onChange(boolean selfChange); \u6b64\u51fd\u6570\u5728\u5185\u5bb9\u63d0\u4f9b\u8005\u53d1\u51fa\u6539\u53d8\u4fe1\u53f7\u65f6\u5c31\u4f1a\u88ab\u8c03\u7528 \u53c2\u6570selfChange\u4e3a\u5982\u679c\u662f\u81ea\u5df1\u6539\u53d8\u7684\u539f\u56e0\uff0c\u5219\u4e3atrue\uff1b\u5982\u679c\u4e0d\u662f\u81ea\u5df1\u6539\u53d8\u7684\uff0c\u5219\u4e3afalse\uff1b</p>"},{"location":"Android/Fragment%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/","title":"Fragment\u7684\u77e5\u8bc6\u70b9","text":""},{"location":"Android/Fragment%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/#fragment_1","title":"Fragment","text":"<ul> <li> <p>\u57fa\u672c\u6982\u5ff5</p> </li> <li> <p>Fragment\uff0c\u7b80\u79f0\u788e\u7247\uff0c\u662f\u4e00\u6bb5\u6709\u751f\u547d\u5468\u671f\u7684UI\u7247\u6bb5</p> </li> <li> <p>\u4f9d\u8d56<code>compile 'com.android.support:support-v4:24.2.1'</code>,\u8fd9\u662f\u4e00\u4e2a\u6bd4\u8f83\u8001\u7684\u5305</p> <ul> <li> <p>\u4e0d\u5f15\u4f9d\u8d56\u7684\u8bdd\uff0c\u53ef\u4ee5\u7528import androidx.fragment.app.Fragment</p> </li> <li> <p><code>java    def fragment_version = \"1.3.6\"       // Java language implementation \u6700\u65b0\u7684    implementation \"androidx.fragment:fragment:$fragment_version\"</code></p> </li> </ul> </li> <li> <p>Fragment\u662f\u4f9d\u8d56\u4e8eActivity\u7684\uff0c\u4e0d\u80fd\u72ec\u7acb\u5b58\u5728\u7684\u3002</p> <p>\u4e00\u4e2aActivity\u91cc\u53ef\u4ee5\u6709\u591a\u4e2aFragment\u3002</p> <p>\u4e00\u4e2aFragment\u53ef\u4ee5\u88ab\u591a\u4e2aActivity\u91cd\u7528\u3002</p> <p>Fragment\u6709\u81ea\u5df1\u7684\u751f\u547d\u5468\u671f\uff0c\u5e76\u80fd\u63a5\u6536\u8f93\u5165\u4e8b\u4ef6\u3002</p> <p>\u6211\u4eec\u80fd\u5728Activity\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u6dfb\u52a0\u6216\u5220\u9664Fragment\u3002</p> </li> <li> <p>\u4f18\u52bf</p> <ul> <li>\u6a21\u5757\u5316\uff08Modularity\uff09</li> <li>\u53ef\u91cd\u7528\uff08Reusability\uff09</li> <li>\u53ef\u9002\u914d\uff08Adaptability</li> </ul> </li> <li> <p>\u751f\u547d\u5468\u671f</p> </li> </ul> <p></p> <ul> <li>addToBackStack()\u65b9\u6cd5\u5f71\u54cdFragment\u7684\u751f\u547d\u5468\u671f<ul> <li>\u4e0d\u6dfb\u52a0\u8be5\u65b9\u6cd5\uff0c\u66ff\u6362Fragment\u65f6\u4f1a\u9500\u6bc1fragment\u5b9e\u4f8b</li> <li>\u6dfb\u52a0\u8be5\u65b9\u6cd5\uff0c\u66ff\u6362Fragment\u65f6\u53ea\u4f1a\u9500\u6bc1View</li> </ul> </li> <li>add(): onAttach()-&gt;\u2026-&gt;onResume()\u3002</li> <li>remove(): onPause()-&gt;\u2026-&gt;onDetach()\u3002</li> <li>replace(): \u76f8\u5f53\u4e8e\u65e7Fragment\u8c03\u7528remove()\uff0c\u65b0Fragment\u8c03\u7528add()\u3002\u548caddToBackStack()\u6709\u5173</li> <li>show(): \u4e0d\u8c03\u7528\u4efb\u4f55\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u524d\u63d0\u662f\u8981\u663e\u793a\u7684 Fragment\u5df2\u7ecf\u88ab\u6dfb\u52a0\u5230\u5bb9\u5668\uff0c\u53ea\u662f\u7eaf\u7cb9\u628aFragment UI\u7684setVisibility\u4e3atrue\u3002</li> <li>hide(): \u4e0d\u8c03\u7528\u4efb\u4f55\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u524d\u63d0\u662f\u8981\u663e\u793a\u7684Fragment\u5df2\u7ecf\u88ab\u6dfb\u52a0\u5230\u5bb9\u5668\uff0c\u53ea\u662f\u7eaf\u7cb9\u628aFragment UI\u7684setVisibility\u4e3afalse\u3002</li> <li>detach(): onPause()-&gt;onStop()-&gt;onDestroyView()\u3002UI\u4ece\u5e03\u5c40\u4e2d\u79fb\u9664\uff0c\u4f46\u662f\u4ecd\u7136\u88abFragmentManager\u7ba1\u7406\u3002</li> <li> <p>attach(): onCreateView()-&gt;onStart()-&gt;onResume()</p> </li> <li> <p>Fragment\u751f\u547d\u5468\u671f\u548cActivity\u751f\u547d\u5468\u671f\u7684\u53d8\u5316</p> <p>Fragment\u7684\u751f\u547d\u5468\u671f\u548cActivity\u7684\u751f\u547d\u5468\u671f\u7684\u8054\u7cfb\uff0c\u6b64\u65f6\u662f\u52a0\u4e86addToBackStack()</p> <p>\u7b2c\u4e00\u6b21\u542f\u52a8\uff1a</p> <p>A\uff1aonCreate()</p> <p>F1:onAttach()</p> <p>F1:onCreate()</p> <p>F1:onCreateView()</p> <p>F1:onActivityCreated()</p> <p>F1:onStart()</p> <p>A:onStart()</p> <p>A:onResume()</p> <p>F1:onResume()</p> <p>\u66ff\u6362\u7247\u6bb5\uff1a</p> <p>F2:onAttach\uff08\uff09</p> <p>F2:onCreate\uff08\uff09</p> <p>F1:onPause()</p> <p>F1:onStop\uff08\uff09</p> <p>F1\uff1aonDestoryView()</p> <p>F2:onCreateview()</p> <p>F2\uff1aonActivityCreated()</p> <p>F2:onStart()</p> <p>F2:onResume()</p> <p>\u6309\u8fd4\u56de\u952e\uff1a</p> <p>F2:onPause()</p> <p>F2:onStop()</p> <p>F2:onDestoryView()</p> <p>F2:onDestory()</p> <p>F2:onDetach()</p> <p>F1:CreateView()</p> <p>F1:onActivityCreated()</p> <p>F1:onStart\uff08\uff09</p> <p>F1\uff1aonResume()</p> <p>\u9000\u5230\u540e\u53f0\uff1a</p> <p>A:onPause\uff08\uff09</p> <p>F1\uff1aonPause()</p> <p>A:onStop()</p> <p>F1:onStop()</p> <p>\u91cd\u65b0\u542f\u52a8\uff1a</p> <p>A:Restart()</p> <p>F1:onStart()</p> <p>A:onStart()</p> <p>A:onResume()</p> <p>F1:onResume()</p> </li> <li> <p>\u4e0eActivity\u751f\u547d\u5468\u671f\u7684\u8054\u7cfb\u4e0e\u533a\u522b</p> Activity Fragment \u8054\u7cfb\uff1a \u90fd\u6709OnCreate\u5230OnDestory\u7684\u6d3b\u52a8\u72b6\u6001 \u533a\u522b\uff1a Create\u65f6\u53ea\u6709OnCreate() Create\u65f6\u6709\uff1aonAttach()\u3001onCreate()\u3001onCreateView()\u3001onActivityCreated()\u3002 Destory\u65f6\u53ea\u6709onDestory() Destory\u65f6\u6709\uff1aonDestoryView()\u3001onDestory()\u3001onDetach() \u5b58\u5728onRestart() \u6ca1\u6709onRestart(),\u5728Activity Restart\u540e\u76f4\u63a5onStart() ActivityOnCreate()\u662f\u751f\u547d\u5468\u671f\u6700\u65e9\u7684 \u5176\u6b21\u662fFragment\u7684Create Activity\u7684onResume\u3001onPause\u3001onStop\u6d3b\u52a8\u5728Fragment\u4e4b\u524d Fragement onStart()\u5728Activity OnStart()\u4e4b\u524d </li> <li> <p>\u4f7f\u7528\u65b9\u5f0f</p> </li> <li> <p>\u9759\u6001\u6dfb\u52a0</p> <p>\u4ee5\u6807\u7b7e\u7684\u5f62\u5f0f\u6dfb\u52a0\u5230Activity\u7684\u5e03\u5c40\u4e2d\u3002 <li> <p>\u52a8\u6001\u6dfb\u52a0</p> <ul> <li> <p>FragmentManager:getSupportFragmentManager() </p> </li> <li> <p>FragmentTransaction:\u4e8b\u52a1,\u7528\u6765\u6dfb\u52a0\uff0c\u79fb\u9664\uff0c\u66ff\u6362fragment,FragmentTransaction transaction = fm.benginTransatcion();//\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1</p> </li> <li> <p>transaction.add():\u5f80Activity\u4e2d\u6dfb\u52a0\u4e00\u4e2aFragment.  Arg1: \u6839\u5bb9\u5668 Arg2:Fragment\u5bf9\u8c61 Arg3:ragment\u7684tag\u540d</p> </li> </ul> <p>\u200b     \u6307\u5b9atag\u7684\u597d\u5904\u662f\u540e\u7eed\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>getSupportFragmentManager().findFragmentByTag(\"f1\")</code>\u4eceFragmentManager\u4e2d\u67e5\u627eFragment\u5bf9\u8c61\u3002 </p> <ul> <li> <p>transaction.remove():\u4eceActivity\u4e2d\u79fb\u9664\u4e00\u4e2aFragment\uff0c\u5982\u679c\u88ab\u79fb\u9664\u7684Fragment\u6ca1\u6709\u6dfb\u52a0\u5230\u56de\u9000\u6808\uff0c\u8fd9\u4e2aFragment\u5b9e\u4f8b\u5c06\u4f1a\u88ab\u9500\u6bc1\u3002</p> </li> <li> <p>transaction.replace():\u4f7f\u7528\u53e6\u4e00\u4e2aFragment\u66ff\u6362\u5f53\u524d\u7684\uff0c\u5b9e\u9645\u4e0a\u5c31\u662fremove()\u7136\u540eadd()\u7684\u5408\u4f53~</p> </li> <li> <p>transaction.hide():\u9690\u85cf\u5f53\u524d\u7684Fragment\uff0c\u4ec5\u4ec5\u662f\u8bbe\u4e3a\u4e0d\u53ef\u89c1\uff0c\u5e76\u4e0d\u4f1a\u9500\u6bc1</p> </li> <li> <p>transaction.show():\u663e\u793a\u4e4b\u524d\u9690\u85cf\u7684Fragment</p> </li> <li> <p>transaction.commit():\u63d0\u4ea4\u4e00\u4e2a\u4e8b\u52a1\u3002 \u662f\u5f02\u6b65\u64cd\u4f5c\uff0c\u5185\u90e8\u901a\u8fc7<code>mManager.enqueueAction()</code>\u52a0\u5165\u5904\u7406\u961f\u5217\u3002</p> </li> <li> <p>transaction.commitNow():commit\u7684\u540c\u6b65\u65b9\u6cd5</p> </li> <li> <p>detach():\u5c06view\u4eceUI\u4e2d\u79fb\u9664,\u548cremove()\u4e0d\u540c,\u6b64\u65f6fragment\u7684\u72b6\u6001\u4f9d\u7136\u7531FragmentManager\u7ef4\u62a4\u3002</p> </li> <li> <p>attach():\u91cd\u5efaview\u89c6\u56fe\uff0c\u9644\u52a0\u5230UI\u4e0a\u5e76\u663e\u793a\u3002</p> </li> <li> <p>addToBackStack( string name):\u53ef\u9009\u65b9\u6cd5\u3002FragmentManager\u62e5\u6709\u56de\u9000\u6808\uff08BackStack\uff09\uff0c\u7c7b\u4f3c\u4e8eActivity\u7684\u4efb\u52a1\u6808\uff0c\u5982\u679c\u6dfb\u52a0\u4e86\u8be5\u8bed\u53e5\uff0c\u5c31\u628a\u8be5\u4e8b\u52a1\u52a0\u5165\u56de\u9000\u6808\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u8fd4\u56de\u6309\u94ae\uff0c\u4f1a\u56de\u9000\u8be5\u4e8b\u52a1\uff08\u56de\u9000\u6307\u7684\u662f\u5982\u679c\u4e8b\u52a1\u662f<code>add(frag1)</code>\uff0c\u90a3\u4e48\u56de\u9000\u64cd\u4f5c\u5c31\u662f<code>remove(frag1)</code>\uff1b\u5982\u679c\u6ca1\u6dfb\u52a0\u8be5\u8bed\u53e5\uff0c\u7528\u6237\u70b9\u51fb\u8fd4\u56de\u6309\u94ae\u4f1a\u76f4\u63a5\u9500\u6bc1\u3002name\u4e3a\u6dfb\u52a0\u7684fragment\u6807\u7b7e\u540d\u79f0\u3002</p> </li> <li> <p>popBackStack(): \u4ece\u6808\u91cc\u5f39\u51faFragment\uff0c\u662f\u5f02\u6b65\u6267\u884c\u7684\uff0c\u662f\u4e22\u5230\u4e3b\u7ebf\u7a0b\u7684MessageQueue\u6267\u884c\uff0cpopBackStackImmediate()\u662f\u5176\u540c\u6b65\u65b9\u6cd5</p> </li> <li>\u65e0\u53c2  \u5c06\u56de\u9000\u6808\u7684\u6808\u9876\u5f39\u51fa\uff0c\u5e76\u56de\u9000\u8be5\u4e8b\u52a1\u3002</li> <li> <p>(String name, int flag)</p> <ul> <li>name  \u6dfb\u52a0\u65f6\u7684\u540d\u79f0\uff0c\u6307\u5b9afragment</li> <li>flag    \u56de\u9000\u6807\u5fd7:</li> <li>0                       \u53ea\u5f39\u51fa\u8be5\u5143\u7d20\u4ee5\u4e0a\u7684\u6240\u6709\u5143\u7d20</li> <li>FragmentManager.POP_BACK_STACK_INCLUSIVE     \u5f39\u51fa\u5305\u542b\u8be5\u5143\u7d20\u53ca\u4ee5\u4e0a\u7684\u6240\u6709\u5143\u7d20</li> </ul> </li> <li> <p>getSupportFragmentManager().findFragmentByTag() \u9009\u4e2d\u6307\u5b9a\u7684fragment</p> </li> </ul> <p><code>java   //\u4e0d\u4ec5\u5305\u542b\u5df2\u7ecf\u6dfb\u52a0\u7684Fragment,\u8fd8\u5305\u542b\u4e0d\u5728Activity\u4f46\u5728\u56de\u9000\u6808\u4e2d\u7684Fragment     public Fragment findFragmentByTag(@Nullable String tag) {           if (tag != null) {               // First look through added fragments.               for (int i=mAdded.size()-1; i&gt;=0; i--) {                   Fragment f = mAdded.get(i);                   if (f != null &amp;&amp; tag.equals(f.mTag)) {                       return f;                   }               }           }           if (tag != null) {               // Now for any known fragment.               for (Fragment f : mActive.values()) {                   if (f != null &amp;&amp; tag.equals(f.mTag)) {                       return f;                   }               }           }           return null;       }</code></p> </li> <li> <p>\u539f\u7406</p> </li> <p>\u4ee5Add\u548cReplace Fragment\u8bb2\u89e3\u5176\u539f\u7406\u3002</p> <p><code>java   getSupportFragmentManager().beginTransaction()       .add(R.id.container, f1, \"f1\")       .addToBackStack(\"\")       .commit();</code></p> <ul> <li> <p><code>getSupportFragmentManager().beginTransaction()</code>\u65b0\u5efa\u4e86BackStackRecord\u5bf9\u8c61\uff0c\uff0c\u8be5\u5bf9\u8c61\u8bb0\u5f55\u4e86\u8fd9\u4e2a\u4e8b\u52a1\u7684\u5168\u90e8\u64cd\u4f5c\u8f68\u8ff9\uff08\u8fd9\u91cc\u53ea\u505a\u4e86\u4e00\u6b21add\u64cd\u4f5c\uff0c\u5e76\u4e14\u52a0\u5165\u56de\u9000\u6808\uff09\uff0c\u968f\u540e\u5c06\u8be5\u5bf9\u8c61\u63d0\u4ea4\u5230FragmentManager\u7684\u6267\u884c\u961f\u5217\u4e2d\uff0c\u7b49\u5f85\u6267\u884c\u3002</p> <p><code>java     public FragmentTransaction beginTransaction() {         return new BackStackRecord(this);     }</code></p> </li> <li> <p>BackStackRecord\u7c7b\u7684\u5b9a\u4e49\u5982\u4e0b:</p> <p><code>java final class BackStackRecord extends FragmentTransaction implements         FragmentManager.BackStackEntry, FragmentManagerImpl.OpGenerator</code></p> <p>\u4ece\u5b9a\u4e49\u53ef\u4ee5\u770b\u51fa\uff0cBackStackRecord\u6709\u4e09\u91cd\u542b\u4e49\uff1a</p> <ul> <li>\u7ee7\u627f\u4e86FragmentTransaction\uff0c\u5373\u662f\u4e8b\u52a1\uff0c\u4fdd\u5b58\u4e86\u6574\u4e2a\u4e8b\u52a1\u7684\u5168\u90e8\u64cd\u4f5c\u8f68\u8ff9\u3002</li> <li>\u5b9e\u73b0\u4e86BackStackEntry\uff0c\u4f5c\u4e3a\u56de\u9000\u6808\u7684\u5143\u7d20\uff0c\u6b63\u662f\u56e0\u4e3a\u8be5\u7c7b\u62e5\u6709\u4e8b\u52a1\u5168\u90e8\u7684\u64cd\u4f5c\u8f68\u8ff9\uff0c\u56e0\u6b64\u5728popBackStack()\u65f6\u80fd\u56de\u9000\u6574\u4e2a\u4e8b\u52a1\u3002</li> <li>\u5b9e\u73b0\u4e86FragmentManagerImpl.OpGenerato\uff0c\u5373\u88ab\u653e\u5165FragmentManager\u6267\u884c\u961f\u5217\uff0c\u7b49\u5f85\u88ab\u6267\u884c\u3002</li> </ul> <p>BackStackRecord\u7c7b\u4e2d\uff0c\u6709\u4e00\u4e2a\u9759\u6001\u7c7bOp,\u7528\u6765\u5b58\u50a8\u4e8b\u52a1\u64cd\u4f5c\u7684Fragment,\u5e76\u6709\u4e00\u4e2aArratList\\mOps\u6765\u8bb0\u5f55\u4e8b\u7269\u7684\u64cd\u4f5c\u8f68\u8ff9\u3002 <p><code>java   static final class Op {         int mCmd;         Fragment mFragment;         int mEnterAnim;         int mExitAnim;         int mPopEnterAnim;         int mPopExitAnim;         Lifecycle.State mOldMaxState;         Lifecycle.State mCurrentMaxState;     ...    Op(int cmd, Fragment fragment) {             this.mCmd = cmd;             this.mFragment = fragment;             this.mOldMaxState = Lifecycle.State.RESUMED;             this.mCurrentMaxState = Lifecycle.State.RESUMED;         }     ...   }  ArrayList&lt;Op&gt; mOps = new ArrayList&lt;&gt;();</code></p> <p>\u5f53\u4f7f\u7528add()\u65f6\uff0c\u901a\u8fc7Op\u6784\u9020\u51fd\u6570\u751f\u6210Op\u5bf9\u8c61\uff0c\u5e76\u6dfb\u52a0\u5230mOps\u94fe\u8868\u4e2d\u3002</p> <p><code>java //opcmd = OP_ADD ; fragment \u4e8b\u52a1\u8981\u6dfb\u52a0\u7684Fragment addOp(new Op(opcmd, fragment));</code></p> <p>\u5f53\u4f7f\u7528replace()\u65f6\uff0c\u901a\u8fc7Op\u6784\u9020\u51fd\u6570\u751f\u6210Op\u5bf9\u8c61\uff0c\u5e76\u6dfb\u52a0\u5230mOps\u94fe\u8868\u4e2d\u3002</p> <p><code>java //opcmd = OP_REPLACE ; fragment \u4e8b\u52a1\u8981\u66ff\u6362\u7684Fragment addOp(new Op(opcmd, fragment));</code></p> <p>\u5728\u8fd9\u91cc\u770b\u4e0d\u51fa\u6765\u533a\u522b\uff0c\u53ea\u6709opcmd\u64cd\u4f5c\u7684\u503c\u4e0d\u540c\u3002</p> <p>addToBackStack()\u51fd\u6570\u4e5f\u6ca1\u6709\u4ec0\u4e48\u591a\u4f59\u64cd\u4f5c\uff0c\u53ea\u662f\u8bbe\u7f6e<code>mAddToBackStack = true;</code></p> <p>\u6240\u4ee5\u91cd\u70b9\u5e94\u8be5\u5728Commit()\u51fd\u6570\uff0cCommit\u51fd\u6570\u5185\u90e8\u6267\u884c\u65f6\u662fcommitInternal()</p> <p><code>java int commitInternal(boolean allowStateLoss) {                 ...         if (mAddToBackStack) {             mIndex = mManager.allocBackStackIndex(this);         } else {             mIndex = -1;         }         mManager.enqueueAction(this, allowStateLoss);//\u5c06\u4e8b\u52a1\u6dfb\u52a0\u8fdb\u5f85\u6267\u884c\u961f\u5217\u4e2d         return mIndex;     } //allocBackStackIndex() \u56de\u9000\u6808\u7684ArrayList if (mBackStackIndices == null) {   mBackStackIndices = new ArrayList&lt;BackStackRecord&gt;(); } mBackStackIndices.add(bse);</code></p> <p>\u5f53AddToBackStack\u4e3aTrue\u65f6\uff0c\u5c06\u5176\u6dfb\u52a0\u5230\u56de\u9000\u6808mBackStackIndices\u4e2d\uff0cmBackStackIndices\u662f\u4e00\u4e2aBackStackRecord\u5217\u8868\u3002</p> <p>\u540c\u65f6\uff0c\u5c06\u8fd9\u4e2a\u4e8b\u52a1\u64cd\u4f5cAction\u4ea4\u7ed9\u4e3b\u7ebf\u7a0b\u7684Handler\uff0c\u653e\u5728\u6d88\u606f\u961f\u5217\u4e2d\u7b49\u5f85\u5904\u7406\u3002</p> <p><code>java  void scheduleCommit() {         synchronized (this) {             //\u82e5\u6709Actiodon             boolean postponeReady =                     mPostponedTransactions != null &amp;&amp; !mPostponedTransactions.isEmpty();             boolean pendingReady = mPendingActions != null &amp;&amp; mPendingActions.size() == 1;             if (postponeReady || pendingReady) {                 mHost.getHandler().removeCallbacks(mExecCommit);               //Causes the Runnable r to be added to the message queue.                 mHost.getHandler().post(mExecCommit);                 updateOnBackPressedCallbackEnabled();             }         }     } //\u53d1\u9001\u6d88\u606f public final boolean post(@NonNull Runnable r) {   return  sendMessageDelayed(getPostMessage(r), 0); }</code></p> <p>\u56e0\u6b64\u4f1a\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u6267\u884cHandlerMessage(),\u4ece\u800c\u5904\u7406\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\uff0c\u771f\u6b63\u5bf9\u4e8b\u52a1\u7684\u64cd\u4f5c\u5f00\u59cb\u8fdb\u884c\u3002</p> <p><code>java  //BackStackRecord#expandOps for (int opNum = 0; opNum &lt; mOps.size(); opNum++) {             final Op op = mOps.get(opNum);             switch (op.mCmd) {                 case OP_ADD:                 case OP_ATTACH:                     added.add(op.mFragment);                     break;                                 ...                 case OP_REPLACE: {                     final Fragment f = op.mFragment;                     final int containerId = f.mContainerId;                     boolean alreadyAdded = false;                     for (int i = added.size() - 1; i &gt;= 0; i--) {                         final Fragment old = added.get(i);                         if (old.mContainerId == containerId) {                             if (old == f) {                                 alreadyAdded = true;                             } else {                                 // This is duplicated from above since we only make                                 // a single pass for expanding ops. Unset any outgoing primary nav.                                 if (old == oldPrimaryNav) {                                     mOps.add(opNum, new Op(OP_UNSET_PRIMARY_NAV, old));                                     opNum++;                                     oldPrimaryNav = null;                                 }                                 final Op removeOp = new Op(OP_REMOVE, old);                                 removeOp.mEnterAnim = op.mEnterAnim;                                 removeOp.mPopEnterAnim = op.mPopEnterAnim;                                 removeOp.mExitAnim = op.mExitAnim;                                 removeOp.mPopExitAnim = op.mPopExitAnim;                                 mOps.add(opNum, removeOp);                                 added.remove(old);                                 opNum++;                             }                         }                     }                     if (alreadyAdded) {                         mOps.remove(opNum);                         opNum--;                     } else {                         op.mCmd = OP_ADD;                         added.add(f);                     }                 }                 break;             ...             }         }</code></p> <p>\u7531\u6700\u5f00\u59cb\u7684\u64cd\u4f5c\u53ef\u77e5\uff0cadd()\u51fd\u6570\u4e3aOP_ADD,Replace()\u4e3aOP_REPLACE,\u7531\u6e90\u7801\u53ef\u77e5\uff0cadded\u4e3aFragment\u7c7b\u7684List,\u7528\u6765\u5b58\u50a8\u5df2\u6dfb\u52a0\u7684Fragment\uff0cadd()\u65f6\uff0c\u76f4\u63a5\u6dfb\u52a0Fragment\uff1b\u4f46\u5f53Replace\u65f6\uff0c\u5c31\u590d\u6742\u4e86\uff0c\u5148\u662f\u5faa\u73af\u5df2\u6dfb\u52a0\u7684Fragment\uff0c\u5982\u679c\u5728\u4e00\u4e2a\u5e03\u5c40\u4e0b\uff0c\u5224\u65ad\u662f\u5426\u548c\u8981\u66ff\u6362\u7684\u76f8\u540c\uff0c\u76f8\u540c\u5219\u4e0d\u9700\u8981\u6dfb\u52a0\uff0c\u4e0d\u76f8\u540c\u4f1a\u5148\u5c06\u539f\u6709\u7684Remove\uff0c\u7136\u540e\u518d\u5728added\u4e2d\u6dfb\u52a0\u8981\u66ff\u6362\u7684Fragment\u3002</p> <li> <p>Fragment\u7684\u901a\u4fe1</p> </li> <li> <p>Fragment\u5411Activity\u901a\u4fe1</p> <p><code>java //1.Interface  \u901a\u8fc7\u5b9e\u4f8b\u5316\u63a5\u53e3\u4f20\u9012\u6570\u636e     public interface ToActivityListener {         void sendMessageFromFragment(String sendMessage);     } //\u63a5\u6536 Activity\u5b9e\u4f8b\u5316\u63a5\u53e3 fragment2.settoActivityListener(new ImyFragment.ToActivityListener() {             @Override             public void sendMessageFromFragment(String sendMessage) {                 tv.setText(sendMessage);             }         }); //Fragment\u83b7\u53d6Activity\u5b9e\u4f8b\u5316\u540e\u7684\u63a5\u53e3  public void onClick(View v) {         if (v == btSend) {             mToActivityListener.sendMessageFromFragment(\"\u6765\u81eaFramgment\u7684\u5b9e\u65f6\u6570\u636e\"+data);             data++;         }     } //2.FABridge   \u4f7f\u7528\u6ce8\u89e3\uff0c\u4f46\u662f\u6211\u672a\u5b9e\u73b0</code></p> </li> <li> <p>Activity\u5411Fragment\u901a\u4fe1</p> <p><code>java //1.\u901a\u8fc7Bundle\u4f20\u9012\u4fe1\u606f   \u5728Add\u6dfb\u52a0\u540e\u901a\u4fe1\u4f1a\u62a5\u9519\uff0c\u4f46\u6211\u6ca1\u53d1\u73b0 //\u53d1\u9001 Bundle bundle = new Bundle(); bundle.putString(ARG_PARAM,str); mFragment.setArguments(bundle); //\u63a5\u6536 mParam = getArguments().getString(ARG_PARAM);  //2. \u5728Activity\u4e2d\u83b7\u53d6\u63a5\u53e3\u5b9e\u4f8b\u8c03\u7528\u65b9\u6cd5 //\u63a5\u53e3 public interface ImyFragment {     void onTypeClick(String message); } //\u53d1\u9001  Activity\u83b7\u53d6Fragment\u5b9e\u4f8b\u5316\u7684\u63a5\u53e3 if(null != mFragmentListener){   mFragmentListener.onTypeClick(\"\u6765\u81eaActivity\u7684\u5b9e\u65f6\u6570\u636e\"+tapCounts);   tapCounts++; } //\u63a5\u6536  Fragment \u5b9e\u4f8b\u5316\u63a5\u53e3   public void onTypeClick(String message) {         tv.setText(message);     } //3\u3001\u5728Activity\u4e2d\u83b7\u53d6Fragment\u7684\u5bf9\u8c61\uff0c\u8c03\u7528\u5176\u65b9\u6cd5 public void setString(String str) { //Fragment\u4e2d\u7684\u65b9\u6cd5     this.str = str; }</code></p> </li> <li> <p>Fragment\u4e4b\u95f4\u7684\u901a\u4fe1\u901a\u8fc7Activity\u4f5c\u4e3a\u5a92\u4ecb</p> </li> <li> <p>Fragment\u5e38\u89c1\u7684\u95ee\u9898</p> </li> <li> <p>Fragment\u91cd\u53e0\u95ee\u9898 </p> <ul> <li>\u539f\u56e0:Fragment\u88ab\u7cfb\u7edf\u6740\u6389\uff0c\u5e76\u91cd\u65b0\u521d\u59cb\u5316\u65f6\u518d\u6b21\u5c06fragment\u52a0\u5165activity\u3002</li> <li>\u89e3\u51b3\u65b9\u6848:\u52a0if\u8bed\u53e5\u80fd\u5224\u65ad\u6b64\u65f6\u662f\u5426\u662f\u88ab\u7cfb\u7edf\u6740\u6389\u5e76\u91cd\u65b0\u521d\u59cb\u5316\u7684\u60c5\u51b5\u3002</li> </ul> </li> <li> <p>\u51fa\u73b0state loss\u7684\u5f02\u5e38</p> <p><code>java java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState     at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1341)     at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1352)     at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)     at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:574)</code></p> <ul> <li> <p>\u539f\u56e0:<code>commit()</code>\u5728<code>onSaveInstanceState()</code>\u540e\u8c03\u7528\u3002\u9996\u5148\uff0c<code>onSaveInstanceState()</code>\u5728<code>onPause()</code>\u4e4b\u540e\uff0c<code>onStop()</code>\u4e4b\u524d\u8c03\u7528\u3002<code>onRestoreInstanceState()</code>\u5728<code>onStart()</code>\u4e4b\u540e\uff0c<code>onResume()</code>\u4e4b\u524d\u3002</p> </li> <li> <p>\u89e3\u51b3\u65b9\u6848:</p> </li> </ul> <p>\u4e0d\u8981\u628aFragment\u4e8b\u52a1\u653e\u5728\u5f02\u6b65\u7ebf\u7a0b\u7684\u56de\u8c03\u4e2d\uff0c\u6bd4\u5982\u4e0d\u8981\u628aFragment\u4e8b\u52a1\u653e\u5728AsyncTask\u7684<code>onPostExecute()</code>\uff0c\u56e0\u6b64<code>onPostExecute()</code>\u53ef\u80fd\u4f1a\u5728<code>onSaveInstanceState()</code>\u4e4b\u540e\u6267\u884c\u3002\u903c\u4e0d\u5f97\u5df2\u65f6\u4f7f\u7528<code>commitAllowingStateLoss()</code>\u3002</p> </li>"},{"location":"Android/Fragment%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/#dialogfragment","title":"DialogFragment","text":"<ul> <li>DialogFragment\u7ee7\u627f\u4e86Fragment,\u4e5f\u5b9e\u73b0\u4e86Dialoge\u7684\u63a5\u53e3<code>DialogInterface.OnCancelListener</code> <code>DialogInterface.OnDismissListener</code>\uff0c\u56e0\u6b64\u5b83\u65e2\u5177\u6709Fragment\u7684\u751f\u547d\u5468\u671f\uff0c\u4e5f\u5177\u6709Dialog\u7684\u4e00\u4e9b\u65b9\u6cd5\u3002</li> </ul> <p><code>java   public class DialogFragment extends Fragment           implements DialogInterface.OnCancelListener, DialogInterface.OnDismissListener</code></p> <ul> <li> <p>DiglogFragment\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u6709\u4e24\u4e2a\u4f7f\u7528\u65b9\u6cd5\uff0c\u4e00\u4e2a\u662f\u6309\u7167Dialog\u7684\u65b9\u6cd5\u521b\u5efa\uff0c\u4e00\u4e2a\u6309\u7167Fragment\u7684\u65b9\u6cd5\u521b\u5efa</p> </li> <li> <p>onCreateDialog() \u65b9\u6cd5\u521b\u5efa\u4e00\u4e2adialog</p> <p>```java public Dialog onCreateDialog(Bundle savedInstanceState) {   AlertDialog dialog =  new AlertDialog.Builder(getActivity())     .setTitle(\"\u795e\u706f\")     .setMessage(\"\u6765\u9009\u62e9\u4f60\u8981\u5b9e\u73b0\u7684\u4e00\u4e2a\u613f\u671b\u628a\")     .setPositiveButton(\"\u8f66\u5b50\", new DialogInterface.OnClickListener() {       @Override       public void onClick(DialogInterface dialog, int which) {</p> <pre><code>  }\n})\n.setNegativeButton(\"\u623f\u5b50\", new DialogInterface.OnClickListener() {\n  @Override\n  public void onClick(DialogInterface dialog, int which) {\n\n  }\n}).create();\n</code></pre> <p>return dialog; } ```</p> </li> <li> <p>onCreateView() \u521b\u5efa\u5e03\u5c40\uff0c\u9ed8\u8ba4\u663e\u793a\u4e3a\u5c4f\u5e55\u5c45\u4e2d\uff0c\u539f\u56e0\u662f\u5b9e\u9645\u4e0a\u5728\u7ed8\u5236\u65f6\u5b9e\u9645\u4e0a\u662f\u521b\u5efa\u4e86Dialog\u5bf9\u8c61</p> <p><code>java  public View onCreateView(@NonNull  LayoutInflater inflater, @Nullable  ViewGroup container, @Nullable Bundle savedInstanceState) {         View viewroot = inflater.inflate(R.layout.child_model_dialog,container,false);//\u4e3afalse\u662f\u9632\u6b62\u518d\u91cd\u590dattach\u5230Activity         initView(viewroot);         return viewroot;     }</code></p> </li> </ul> <p>\u7531\u4e8e\u5176\u9ed8\u8ba4\u5e03\u5c40\u662f\u5c45\u4e2d\uff0c\u4e14\u5de6\u53f3\u7559\u6709\u95f4\u8ddd\uff0c\u4e3a\u4e86\u9002\u5e94\u66f4\u591a\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5b9e\u73b0\u3002</p> <ul> <li> <p>\u4ee3\u7801\u63a7\u5236</p> <p><code>java  //\u53ef\u89c1\u4e4b\u524d\uff0cstart\uff08\uff09\u505a\u6570\u636e\u51c6\u5907    public void onStart() {         super.onStart();         Window window = getDialog().getWindow();             //\u7ed9dialog\u8bbe\u7f6e\u5f39\u51fa\u52a8\u753b                 window.setWindowAnimations(R.style.dialog_animtion_style);         window.setBackgroundDrawable(null);//\u80cc\u666f\u5f62\u72b6 //        DisplayMetrics dm = new DisplayMetrics(); //        getActivity().getWindowManager().getDefaultDisplay().getMetrics( dm );        //\u8bbe\u7f6edialog\u5927\u5c0f         WindowManager.LayoutParams params = window.getAttributes();         params.gravity = Gravity.BOTTOM;//\u653e\u5728\u54ea\u4e2a\u4f4d\u7f6e \u5c45\u4e0a\u8fd8\u662f\u5c45\u4e0b         params.width = WindowManager.LayoutParams.MATCH_PARENT;//\u5de6\u53f3\u5168\u5c4f         params.height = WindowManager.LayoutParams.WRAP_CONTENT;         window.setAttributes(params);     }</code></p> </li> <li> <p>\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6837\u5f0f\u6587\u4ef6\u5bf9\u5176\u8fdb\u884c\u4fee\u6539</p> <p>```xml </p>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/","title":"Plugin \u63d2\u4ef6\u5f00\u53d1","text":"<p>\u53c2\u8003\u6587\u6863\uff1ahttps://beansoft.github.io/jetbrains/create-java-plugin-project.html#824922cf_1383</p> <p>\u53c2\u8003\u89c6\u9891\uff1ahttps://www.bilibili.com/video/BV1rv4y147fb/?buvid=XY38DC53CDA2C3ADD8CA81AAB61D16F9B045D&amp;is_story_h5=false&amp;mid=XXE7lA8QElaF0vjTIistSg%3D%3D&amp;p=1&amp;plat_id=168&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=9ce85e45-48aa-4c1d-a491-d6bdd8db80dd&amp;share_source=WEIXIN&amp;share_tag=s_i&amp;timestamp=1690984741&amp;unique_k=VPtcLUV&amp;up_id=1794701140</p>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#1","title":"1.\u73af\u5883\u914d\u7f6e","text":"<ul> <li>IDEA  \uff08\u6211\u4f7f\u7528\u7684\u662f2023.2\uff09</li> <li>JDK 2023.2\u9700\u8981JDK 17,\u53ef\u4ee5\u4ece\u5b98\u7f51\u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528IDEA\u4e0b\u8f7dJDK </li> <li>Plugin Devkit \u63d2\u4ef6\uff0cIDEA\u9ed8\u8ba4\u81ea\u5e26</li> <li>\u5f00\u53d1\u8bed\u8a00\uff1aJAVA\u6216\u8005Kotlin</li> </ul>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#2","title":"2.\u63d2\u4ef6\u57fa\u672c\u6982\u5ff5","text":"<p>\u6784\u5efa\u5728 IntelliJ Platform \u4e0a\u7684\u4ea7\u54c1\u662f\u53ef\u7ec4\u5408\u7684\u5e94\u7528\u7a0b\u5e8f,\u5e73\u53f0\u8d1f\u8d23\u7ec4\u4ef6\u7684\u521b\u5efa,\u4ee5\u53ca\u5c06\u4f9d\u8d56\u9879\u6ce8\u5165\u7c7b\u4e2d. IntelliJ Platform \u5b8c\u5168\u652f\u6301\u63d2\u4ef6,JetBrains\u6258\u7ba1 JetBrains Marketplace ,\u53ef\u7528\u4e8e\u5206\u53d1\u652f\u6301\u4e00\u4e2a\u6216\u591a\u4e2a\u4ea7\u54c1\u7684\u63d2\u4ef6. \u4e5f\u53ef\u4ee5\u6258\u7ba1\u81ea\u5df1\u7684\u5b58\u50a8\u5e93,\u5e76\u5355\u72ec\u5206\u53d1\u63d2\u4ef6 Custom Plugin Repository.</p>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#3","title":"3.\u5f00\u53d1\u5b9e\u4f8b","text":""},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#31-java","title":"3.1 \u521b\u5efa\u4e00\u4e2aJAVA\u63d2\u4ef6","text":""},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#-","title":"\u65b0\u5efa-&gt;\u9879\u76ee","text":""},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#gradle-intellij-platform","title":"\u5411\u5bfc\u521b\u5efa\u7684 Gradle IntelliJ Platform \u63d2\u4ef6\u7ed3\u6784\ufeff","text":"<pre><code>my_plugin\n\u251c\u2500\u2500 .run\n\u2502   \u2514\u2500\u2500 Run IDE with Plugin.run.xml\n\u251c\u2500\u2500 gradle\n\u2502   \u2514\u2500\u2500 wrapper\n\u2502       \u251c\u2500\u2500 gradle-wrapper.jar\n\u2502       \u2514\u2500\u2500 gradle-wrapper.properties\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 main\n\u2502   \u2502   \u251c\u2500\u2500 java\n\u2502   \u2502   \u2514\u2500\u2500 resources\n\u2502   \u2502       \u2514\u2500\u2500 META-INF\n\u2502   \u2502           \u2514\u2500\u2500 plugin.xml\n\u2502   \u2514\u2500\u2500 test\n\u2502       \u251c\u2500\u2500 java\n\u2502       \u2514\u2500\u2500 resources\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 build.gradle.kts\n\u251c\u2500\u2500 gradlew\n\u251c\u2500\u2500 gradlew.bat\n\u2514\u2500\u2500 settings.gradle.kts\n</code></pre> <ul> <li>\u9ed8\u8ba4\u7684 IntelliJ Platform build.gradle.kts \u6587\u4ef6 (\u53c2\u8003\u4e0b\u8282).</li> <li>settings.gradle.kts \u8bbe\u7f6e\u6587\u4ef6, \u5305\u542b\u5b9a\u4e49 <code>rootProject.name</code>.</li> <li>Gradle Wrapper \u6587\u4ef6, \u5c24\u5176\u662f gradle-wrapper.properties \u6587\u4ef6, \u6307\u5b9a\u4e86\u6784\u5efa\u63d2\u4ef6\u7684 Gradle \u7248\u672c. \u9996\u6b21\u8fd0\u884c\u7684\u65f6\u5019, IntelliJ IDEA Gradle \u63d2\u4ef6\u4f1a\u4e0b\u8f7d\u6b64\u6587\u4ef6\u4e2d\u6307\u5b9a\u7248\u672c\u7684Gradle.</li> <li>META-INF \u6587\u4ef6\u5939\u4f4d\u4e8e\u9ed8\u8ba4\u7684 <code>main</code> \u6e90\u4ee3\u7801\u96c6\u5305\u542b\u4e86\u63d2\u4ef6 \u914d\u7f6e\u6587\u4ef6.</li> <li>Run Plugin \u8fd0\u884c\u914d\u7f6e.</li> </ul> <p>\u4e3b\u8981\u914d\u7f6e\u6587\u4ef6</p>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#pluginxml","title":"plugin.xml","text":"<p>\u662f\u6574\u4e2a\u5de5\u7a0b\u7684\u91cd\u70b9\uff0c\u6240\u6709\u7684\u52a8\u4f5c\u90fd\u8981\u5728\u6b64\u6ce8\u518c</p> <pre><code>&lt;!-- \u63d2\u4ef6\u914d\u7f6e\u6587\u4ef6. \u8bfb\u53d6 https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html --&gt;\n&lt;idea-plugin&gt;\n    &lt;!-- \u63d2\u4ef6\u552f\u4e00ID, \u53d1\u4e0d\u540c\u7248\u672c\u65f6\u4e0d\u80fd\u4fee\u6539. \u5efa\u8bae\u7528com.xxx.xxx\u683c\u5f0f --&gt;\n    &lt;id&gt;com.example.demo1plugin&lt;/id&gt;\n  &lt;!-- \u7248\u672c\u53f7: \u4e3b\u7248\u672c\u53f7.\u6b21\u7248\u672c\u53f7.\u4fee\u8ba2\u53f7 https://semver.org/lang/zh-CN/ --&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;!-- \u63d2\u4ef6\u540d\u5b57\u5fc5\u987b\u7528\u82f1\u6587\u4e14\u4e0d\u80fd\u6709\u6807\u70b9, \u53ef\u6709\u7a7a\u683c\u548c\u6570\u5b57\u5982 My Notes, \u4e0d\u80fd\u5305\u542b plugin \u5b57\u6837.\n         \u8be6\u7ec6\u89e3\u91ca: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name --&gt;\n    &lt;name&gt;Demo1plugin&lt;/name&gt;\n\n    &lt;!-- \u63d2\u4ef6\u9875\u663e\u793a\u7684\u5f00\u53d1\u8005\u540d\u79f0, \u90ae\u4ef6\u548c\u7f51\u5740(\u53ef\u7528GitHub). --&gt;\n    &lt;vendor email=\"support@yourcompany.com\" url=\"https://www.yourcompany.com\"&gt;YourCompany&lt;/vendor&gt;\n\n    &lt;!-- \u517c\u5bb9\u7684IDEA\u7248\u672c\u8303\u56f4, \u53d1\u7248\u524d\u8bf7\u52a1\u5fc5\u6d4b\u8bd5 --&gt;\n    &lt;idea-version since-build=\"213\" until-build=\"223.*\"/&gt;\n\n    &lt;!-- \u63d2\u4ef6\u7f51\u9875\u548c\u5f00\u53d1\u5de5\u5177\u4e2d\u7684\u63d2\u4ef6\u63cf\u8ff0\u5185\u5bb9, \u53ea\u80fd\u7528\u7b80\u5355HTML\u6807\u8bb0(\u6587\u672c\u683c\u5f0f, \u6bb5\u843d\u548c\u5217\u8868), \u4e0d\u652f\u6301CSS\u548cJS, \u4e0d\u652f\u6301iframe.\n         \u5fc5\u987b\u8981\u6709\u7b80\u77ed\u7684\u82f1\u6587\u63cf\u8ff0, \u4e4b\u540e\u53ef\u4ee5\u653e\u4e2d\u6587, \u5426\u5219\u4f1a\u5ba1\u6838\u4e0d\u901a\u8fc7.\n         \u5b8c\u6574\u5185\u5bb9: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description --&gt;\n    &lt;description&gt;&lt;![CDATA[\n    Enter short description for your theme here.&lt;br&gt;\n    &lt;em&gt;most HTML tags may be used&lt;/em&gt;\n  ]]&gt;&lt;/description&gt;\n\n    &lt;!-- \u66f4\u6539\u5907\u6ce8, \u5efa\u8bae\u6bcf\u4e2a\u7248\u672c\u66f4\u65b0, \u652f\u6301\u4e2d\u82f1\u6587 --&gt;\n    &lt;change-notes&gt;&lt;![CDATA[\n    Initial release of the theme.\n  ]]&gt;&lt;/change-notes&gt;\n\n    &lt;!-- \u4ea7\u54c1\u548c\u63d2\u4ef6\u4f9d\u8d56\u517c\u5bb9(\u8fd9\u90e8\u5206\u6bd4\u8f83\u590d\u6742).\n         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html --&gt;\n    &lt;depends&gt;com.intellij.modules.platform&lt;/depends&gt;\n\n  &lt;!-- \u6269\u5c55\u5217\u8868 --&gt;\n    &lt;extensions defaultExtensionNs=\"com.intellij\"&gt;\n    &lt;/extensions&gt;\n&lt;/idea-plugin&gt;\n</code></pre>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#buildgradlekts","title":"build.gradle.kts \u5185\u5bb9\u7b80\u4ecb\ufeff","text":"<p>\u73af\u5883\u914d\u7f6e\u7684\u4e3b\u8981\u6587\u4ef6\uff0c\u4e3b\u8981\u662f\u63d2\u4ef6\uff0cIDEA \u7248\u672c \u5305\u540d\uff0cversion</p>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#action","title":"\u65b0\u589eACTION","text":"<p>\u5728\u6587\u4ef6\u5939\u4e0b\uff0c\u6253\u5f00\uff0c\u65b0\u5efa-\u300bPlugin Devkit -\u300bAction.</p> <p></p> <p>Action\u4f1a\u5728Plugin.xml\u4e2d\u6ce8\u518c\u3002</p> <p></p> <p>\u5728Action\u4e2d\u5199\u51fa\u4f60\u8981\u5b9e\u73b0\u7684\u64cd\u4f5c\u3002</p> <pre><code>  public void actionPerformed(AnActionEvent e) {\n        Messages.showInfoMessage(\"Hi \u4f60\u597d IDEA\", \"Title\");\n    }\n</code></pre>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#_1","title":"\u8fd0\u884c\u548c\u8c03\u8bd5\u63d2\u4ef6","text":"<p>\u70b9\u51fb\u8fd0\u884c\u548c\u8c03\u8bd5\u5373\u53ef</p>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#_2","title":"\u6253\u5305\u63d2\u4ef6","text":"<p>Gradle \u5de5\u5177\u7a97\u53e3\u4e2d\u53cc\u51fb\u8fd0\u884c intellij | buildPlugin</p>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#_3","title":"\u9a8c\u8bc1\u63d2\u4ef6","text":"<p>Gradle \u5de5\u5177\u7a97\u53e3\u4e2d\u53cc\u51fb\u8fd0\u884c intellij | runPluginVerifier, \u6700\u7ec8\u62a5\u544a\u4f4d\u4e8e\u76ee\u5f55 build/reports/pluginVerifier, \u786e\u4fdd\u6ca1\u6709\u9519\u8bef\u4fe1\u606f.</p>"},{"location":"Android/Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/#_4","title":"\u53d1\u5e03\u63d2\u4ef6","text":"<p>\u6682\u65f6\u4e0d\u9700\u8981\uff0c\u4ee5\u540e\u518d\u8bf4</p> <p>3.2 \u521b\u5efa\u4e3b\u9898\u63d2\u4ef6</p> <p>4.UI \u68c0\u67e5\u5668\u7684\u4f7f\u7528</p> <p>\u5feb\u6377\u952e\uff1acontrol+option+\u70b9\u51fb</p> <p>\u9700\u6c42\uff1a</p> <p>1.\u65b0\u5efacase</p> <p>2.\u8fde\u7eed\u8fd0\u884c\u591a\u4e2acase \u751f\u6210\u4e00\u4e2ahtml</p> <p>3.\u8fde\u63a5IOS \u8bbe\u5907\uff0c\u53ef\u4ee5\u8fdb\u884c\u622a\u56fe</p> <p>4.\u8bc6\u522bpoco\u7ec4\u4ef6</p> <p>5.\u5b9a\u65f6\u6e05\u7406\u56fe\u7247\u548c\u62a5\u544a</p>"},{"location":"Android/%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E7%9A%84res%E8%B5%84%E6%BA%90/","title":"\u5220\u9664\u65e0\u7528\u7684res\u8d44\u6e90","text":"<p>https://gitlab.weibo.cn/nieyu2/abreocrd \u5220\u9664\u65e0\u7528\u8d44\u6e90</p>"},{"location":"Android/%E5%8F%8D%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%92%8C%E6%80%BB%E7%BB%93/","title":"\u53cd\u7f16\u8bd1\u5de5\u5177\u4f7f\u7528\u548c\u603b\u7ed3","text":"<p>1.ApkTools</p> <p>\u62c6\u89e3Apk\u6587\u4ef6\uff0c\u53cd\u7f16\u8bd1\u5176\u4e2d\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u5c06\u5b83\u4eec\u53cd\u7f16\u8bd1\u4e3a\u53ef\u9605\u8bfb\u7684AndroidManifest.xml\u6587\u4ef6\u548cres\u6587\u4ef6\u3002\u524d\u9762\u8bb2\u8fc7\uff0c\u76f4\u63a5\u628aApk\u6587\u4ef6\u5f53\u505azip\u89e3\u538b\uff0c\u5f97\u5230\u7684xml\u8d44\u6e90\u6587\u4ef6\uff0c\u90fd\u662f\u65e0\u6cd5\u76f4\u63a5\u7528\u6587\u672c\u7f16\u8f91\u5668\u6253\u5f00\u9605\u8bfb\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u6253\u5305\u65f6\u7ecf\u8fc7\u4e86build-tools\u7684\u5904\u7406\u3002</p> <p>\u8be5\u529f\u80fd\u53ef\u4ee5\u901a\u8fc7Android Studio\u5b9e\u73b0\uff0c\u65b9\u6cd5\u662f\u76f4\u63a5\u79fb\u52a8Apk\u5230Android Studio</p> <p>2.dex2jar\u7f16\u8bd1\u5de5\u5177\uff0c\u5c06dex\u8f6c\u6362\u4e3ajar\u5305</p> <p>enjarify</p> <p>3.JD-GUI</p> <p>\u5c06jar\u53cd\u7f16\u8bd1\u7a0b.class\u6587\u4ef6\uff0c\u65b9\u4fbf\u9605\u8bfb</p> <p>4.jadax-gui \u4f7f\u7528</p>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/","title":"\u6a21\u5757\u95f4\u901a\u4fe1","text":""},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#1","title":"1\u3001\u7ec4\u4ef6\u5316\u548c\u6a21\u5757\u5316\u7684\u533a\u522b","text":"<p>\u7ec4\u4ef6\u5316\uff1a\u57fa\u4e8e\u53ef\u91cd\u7528\u4e3a\u76ee\u7684\uff0c\u5c06\u4e00\u4e2a\u5927\u7684\u8f6f\u4ef6\u7cfb\u7edf\u6309\u7167\u5206\u79bb\u5173\u6ce8\u70b9\u7684\u5f62\u5f0f\uff0c\u62c6\u5206\u591a\u4e2a\u72ec\u7acb\u7684\u7ec4\u4ef6\uff0c\u51cf\u5c11\u8026\u5408\uff0c\u5373\u540c\u4e00\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u88ab\u591a\u4e2a\u4e1a\u52a1\u4f7f\u7528\u3002</p> <p>\u6a21\u5757\u5316\uff1a\u5c06\u4e1a\u52a1\u62c6\u5206\uff0c\u5206\u6210\u76f8\u4e92\u72ec\u7acb\u7684\u4e1a\u52a1\uff0c\u4ee5\u4fbf\u4e8e\u6bcf\u4e2a\u6a21\u5757\u53ea\u5305\u542b\u4e0e\u5176\u81ea\u8eab\u4e1a\u52a1\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u5373\u5b83\u662f\u72ec\u7acb\u7684\u4e1a\u52a1\u3002</p> <p>\u672c\u8d28\u4e0a\uff0c\u7ec4\u4ef6\u5316\u9488\u5bf9\u7684\u662f\u529f\u80fd(\u6709\u7c92\u5ea6\u533a\u5206)\uff0c\u6a21\u5757\u5316\u9488\u5bf9\u7684\u662f\u4e1a\u52a1\u3002\u5373\u5047\u5982\u4e00\u4e2a\u5de5\u7a0b\u5b58\u5728\u8ba2\u5355\u6a21\u5757\u548c\u7528\u6237\u6a21\u5757\uff0c\u800c\u5b83\u4eec\u540c\u65f6\u9700\u8981\u4e00\u4e2a\u652f\u4ed8\u7684\u7ec4\u4ef6\u6765\u5e2e\u5b83\u4eec\u5b8c\u6210\u5177\u4f53\u7684\u4e1a\u52a1\u5b9e\u73b0\u3002</p>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#2arouter","title":"2\u3001ARouter\u7684\u4f7f\u7528","text":"<p>\u5b98\u65b9\u4ecb\u7ecd\uff1a\u6211\u4eec\u6240\u4f7f\u7528\u7684\u539f\u751f\u8def\u7531\u65b9\u6848\u4e00\u822c\u662f\u901a\u8fc7\u663e\u5f0fintent\u548c\u9690\u5f0fintent\u4e24\u79cd\u65b9\u5f0f\u5b9e\u73b0\u7684\uff08\u8fd9\u91cc\u4e3b\u8981\u662f\u6307\u8df3\u8f6cActivity or Fragment\uff09\u3002\u5728\u663e\u5f0fintent\u7684\u60c5\u51b5\u4e0b\uff0c\u56e0\u4e3a\u4f1a\u5b58\u5728\u76f4\u63a5\u7684\u7c7b\u4f9d\u8d56\u7684\u95ee\u9898\uff0c\u5bfc\u81f4\u8026\u5408\u975e\u5e38\u4e25\u91cd\uff1b\u800c\u5728\u9690\u5f0fintent\u60c5\u51b5\u4e0b\uff0c\u5219\u4f1a\u51fa\u73b0\u89c4\u5219\u96c6\u4e2d\u5f0f\u7ba1\u7406\uff0c\u5bfc\u81f4\u534f\u4f5c\u53d8\u5f97\u975e\u5e38\u56f0\u96be\u3002\u4e00\u822c\u800c\u8a00\u914d\u7f6e\u89c4\u5219\u90fd\u662f\u5728Manifest\u4e2d\u7684\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u6269\u5c55\u6027\u8f83\u5dee\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u4f7f\u7528\u539f\u751f\u7684\u8def\u7531\u65b9\u6848\u4f1a\u51fa\u73b0\u8df3\u8f6c\u8fc7\u7a0b\u65e0\u6cd5\u63a7\u5236\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u4e00\u65e6\u4f7f\u7528\u4e86StartActivity()\u5c31\u65e0\u6cd5\u63d2\u624b\u5176\u4e2d\u4efb\u4f55\u73af\u8282\u4e86\uff0c\u53ea\u80fd\u4ea4\u7ed9\u7cfb\u7edf\u7ba1\u7406\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u5728\u8df3\u8f6c\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\u65e0\u6cd5\u964d\u7ea7\uff0c\u800c\u662f\u4f1a\u76f4\u63a5\u629b\u51fa\u8fd0\u8425\u7ea7\u7684\u5f02\u5e38\u3002\u8fd9\u65f6\u5019\u5982\u679c\u8003\u8651\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u8def\u7531\u7ec4\u4ef6\u5c31\u53ef\u4ee5\u89e3\u51b3\u4ee5\u4e0a\u95ee\u9898\uff0c\u6bd4\u5982\u901a\u8fc7URL\u7d22\u5f15\u5c31\u53ef\u4ee5\u89e3\u51b3\u7c7b\u4f9d\u8d56\u7684\u95ee\u9898\uff1b\u901a\u8fc7\u5206\u5e03\u5f0f\u7ba1\u7406\u9875\u9762\u914d\u7f6e\u53ef\u4ee5\u89e3\u51b3\u9690\u5f0fintent\u4e2d\u96c6\u4e2d\u5f0f\u7ba1\u7406Path\u7684\u95ee\u9898\uff1b\u81ea\u5df1\u5b9e\u73b0\u6574\u4e2a\u8def\u7531\u8fc7\u7a0b\u4e5f\u53ef\u4ee5\u62e5\u6709\u826f\u597d\u7684\u6269\u5c55\u6027\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7AOP\u7684\u65b9\u5f0f\u89e3\u51b3\u8df3\u8f6c\u8fc7\u7a0b\u65e0\u6cd5\u63a7\u5236\u7684\u95ee\u9898\uff0c\u4e0e\u6b64\u540c\u65f6\u4e5f\u80fd\u591f\u63d0\u4f9b\u975e\u5e38\u7075\u6d3b\u7684\u964d\u7ea7\u65b9\u5f0f\u3002</p> <p>\u4f7f\u7528\u7684\u539f\u56e0\uff1b</p> <p>\u200b        1\u3001\u4f7f\u7528URL \u89e3\u51b3\u8de8\u6a21\u5757\u7c7b\u4f9d\u8d56\u7684\u95ee\u9898</p> <p>\u200b       2\u3001\u5206\u5e03\u5f0f\u7ba1\u7406\u9875\u9762\u914d\u7f6e\u53ef\u4ee5\u89e3\u51b3\u9690\u5f0fintent\u4e2d\u96c6\u4e2d\u5f0f\u7ba1\u7406Path\u7684\u95ee\u9898</p> <p>\u200b       3\u3001\u901a\u8fc7AOP\u7684\u65b9\u5f0f\u63a7\u5236\u8df3\u8f6c\u8fc7\u7a0b</p> <p>\u200b       4\u3001\u81ea\u5df1\u5b9e\u73b0\u8def\u7531\u8fc7\u7a0b\uff0c\u65b9\u4fbf\u81ea\u5df1\u6269\u5c55</p>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#21","title":"2.1 \u4f7f\u7528\u65b9\u6cd5","text":"<p>ARouter\u5b98\u65b9\u5730\u5740</p>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#211","title":"2.1.1 \u6b63\u5e38\u4f7f\u7528","text":"<ol> <li>\u6dfb\u52a0\u4f9d\u8d56</li> </ol> <p>```java    android {        defaultConfig {            ...            javaCompileOptions {                annotationProcessorOptions {                    arguments = [AROUTER_MODULE_NAME: project.getName()]                }            }        }    }</p> <p>dependencies {        // \u66ff\u6362\u6210\u6700\u65b0\u7248\u672c, \u9700\u8981\u6ce8\u610f\u7684\u662fapi        // \u8981\u4e0ecompiler\u5339\u914d\u4f7f\u7528\uff0c\u5747\u4f7f\u7528\u6700\u65b0\u7248\u53ef\u4ee5\u4fdd\u8bc1\u517c\u5bb9        implementation 'com.alibaba:arouter-api:x.x.x'        annotationProcessor 'com.alibaba:arouter-compiler:x.x.x'        ...    }    ```</p> <ol> <li>\u521d\u59cb\u5316</li> </ol> <p>\u5728Application\u4e2d\u8fdb\u884c\u521d\u59cb\u5316</p> <p>```java     //ARouter \u5f00\u5173        private boolean isDebugARouter = true;</p> <pre><code>   @Override\n   public void onCreate() {\n       super.onCreate();\n       // init ARouter SDK\n       if (isDebugARouter) {\n           ARouter.openLog();\n           ARouter.openDebug();\n       }\n       ARouter.init(HomeApplication.this);\n   }\n\n   @Override\n   public void onTrimMemory(int level) {\n       super.onTrimMemory(level);\n       //ARoutter\u6ce8\u9500\n       ARouter.getInstance().destroy();\n   }\n</code></pre> <p>```</p> <ol> <li>\u521b\u5efaActivity,\u6dfb\u52a0\u6ce8\u89e3,\u6ce8\u89e3\u5fc5\u987b\u201c/XX/XX\u201d\uff0c\u5fc5\u987b\u6709\u4e24\u4e2a\u53ca\u4ee5\u4e0a<code>/</code></li> </ol> <p>```java    @Route(path = \"/test/my\")    public class MyActivity extends AppCompatActivity {</p> <p>}    ```</p> <ol> <li>\u6dfb\u52a0\u6ce8\u5165</li> </ol> <p><code>java    //\u6ce8\u5165\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528Autowired\u6ce8\u89e3    ARouter.getInstance().inject(this);</code></p> <ol> <li>\u8df3\u8f6c</li> </ol> <pre><code>//\u65e0\u53c2\u6570\u8df3\u8f6c\nARouter.getInstance().build(\"/test/my\").navigation();\n\n//\u6709\u53c2\u6570\u8df3\u8f6c\nARouter.getInstance().build(\"/test/my\")\n                .withString(\"name\",\"android\")\n                .withInt(\"age\",3)\n                .navigation();\n//\u81ea\u5b9a\u4e49group\u8df3\u8f6c\n@Route(path = \"/module/2\", group = \"m2\")\n ARouter.getInstance().build(\"/module/2\", \"m2\").navigation();\n</code></pre>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#212","title":"2.1.2 \u81ea\u52a8\u6ce8\u5165","text":"<p>\u200b   \u9996\u5148\u5728\u9700\u8981\u6ce8\u5165\u7684Activity\u4e2d\u6dfb\u52a0\uff1a</p> <pre><code> ARouter.getInstance().inject(this);\n</code></pre> <p>\u200b    \u5176\u6b21\u5728\u6ce8\u5165\u7684Activity\u4e2d\u4f7f\u7528<code>@Autowired</code>\u5173\u952e\u5b57</p> <pre><code>@Autowired\nString url;\n</code></pre> <p>\u6700\u540e\u4f7f\u7528ARouter  API \u6dfb\u52a0\u9700\u8981\u4f20\u9012\u7684\u503c\uff0c\u8be5\u503c\u4f1a\u81ea\u52a8\u6ce8\u5165\u5230\u4f60\u8f93\u5165\u7684\u503c\u4e2d\u3002</p> <pre><code>ARouter.getInstance().build(\"/test/activity1\")\n  .withString(\"name\", \"\u8001\u738b\")\n  .withInt(\"age\", 18)\n  .withBoolean(\"boy\", true)\n  .withLong(\"high\", 180)\n  .withString(\"url\", \"https://a.b.c\")\n  .withSerializable(\"ser\", testSerializable)\n  .withParcelable(\"pac\", testParcelable)\n  .withObject(\"obj\", testObj)\n  .withObject(\"objList\", objList)\n  .withObject(\"map\", map)\n  .navigation();\n</code></pre> <ul> <li>\u5355\u503c\u7684\u4f20\u9012</li> </ul> <p>\u4fdd\u8bc1\u4f20\u9012\u7684\u53c2\u6570\u7c7b\u578b\u548c\u53c2\u6570\u540d\u79f0\u76f8\u540c\u5373\u53ef</p> <ul> <li>Serializable\u7684\u4f20\u9012</li> </ul> <p>```java   //\u65b0\u5efaSerializable   public class TestSerializable implements Serializable {       public String name;       public int id;</p> <pre><code>  public TestSerializable() {\n  }\n\n  public TestSerializable(String name, int id) {\n      this.name = name;\n      this.id = id;\n  }\n</code></pre> <p>}   //\u4f20\u9012    TestSerializable testSerializable = new TestSerializable(\"serializable\",1);   .withParcelable(\"pac\", testParcelable)   //\u63a5\u6536     @Autowired     TestSerializable ser;   ```</p> <ul> <li>Parcelable \u7684\u4f20\u9012: Android\u72ec\u6709\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\uff0c\u63a8\u8350\u4f7f\u7528</li> </ul> <p>```java   //\u65b0\u5efaParcelable   public class TestParcelable  implements Parcelable {       public  String  name;       public  int     id;       //\u975e\u57fa\u672c\u6570\u636e\u7c7b\u578b</p> <pre><code>  public TestParcelable(String name,int id){//\u6784\u9020\u51fd\u6570\n      this.name = name;\n      this.id   = id;\n  }\n\n  protected TestParcelable(Parcel in) {//\u5bf9\u8c61\u53cd\u5e8f\u5217\u5316\u8bfb\u53d6\u6570\u636e\n      this.name = in.readString();\n      this.id   = in.readInt();\n  }\n\n  @Override\n  public int describeContents() { //\u5185\u5bb9\u63a5\u53e3\u63cf\u8ff0\uff0c\u9ed8\u8ba4\u8fd4\u56de0\n      return 0;\n  }\n\n  @Override\n  public void writeToParcel(Parcel dest, int flags) {//\u5c06\u5bf9\u8c61\u5e8f\u5217\u5316\u4e00\u4e2aParcel\u5bf9\u8c61\uff0c\u5c06\u5bf9\u8c61\u5b58\u5165Parcel\u4e2d\n      dest.writeString(name);\n      dest.writeInt(id);\n  }\n  public static final Creator&lt;TestParcelable&gt; CREATOR = new Creator&lt;TestParcelable&gt;() {//\u5b9e\u73b0\u751f\u6210\u63a5\u53e3\n      @Override\n      public TestParcelable createFromParcel(Parcel in) {// \u4eceParcel\u4e2d\u8bfb\u53d6\u6570\u636e\n          return new TestParcelable(in);\n      }\n\n      @Override\n      public TestParcelable[] newArray(int size) { //\u4f9b\u5916\u90e8\u7c7b\u53cd\u5e8f\u5217\u5316\u672c\u7c7b\u6570\u7ec4\u4f7f\u7528\n          return new TestParcelable[size];\n      }\n  };\n</code></pre> <p>}   //\u4f20\u9012    TestParcelable testParcelable = new TestParcelable(\"parcelable\",2);    .withParcelable(\"par\",testParcelable)   //\u63a5\u6536    @Autowired    TestParcelable par;   ```</p> <ul> <li>Object \u7684\u4f20\u9012</li> </ul> <p>\u9996\u5148\u81ea\u5b9a\u4e49\u5bf9\u8c61\u5fc5\u987b\u5b9e\u73b0<code>JsonServiceImpl</code></p> <p>```java   // \u5982\u679c\u9700\u8981\u4f20\u9012\u81ea\u5b9a\u4e49\u5bf9\u8c61\uff0c\u65b0\u5efa\u4e00\u4e2a\u7c7b\uff08\u5e76\u975e\u81ea\u5b9a\u4e49\u5bf9\u8c61\u7c7b\uff09\uff0c\u7136\u540e\u5b9e\u73b0 SerializationService,\u5e76\u4f7f\u7528@Route\u6ce8\u89e3\u6807\u6ce8(\u65b9\u4fbf\u7528\u6237\u81ea\u884c\u9009\u62e9\u5e8f\u5217\u5316\u65b9\u5f0f)\uff0c\u4f8b\u5982\uff1a   @Route(path = \"/yourservicegroupname/json\")   public class JsonServiceImpl implements SerializationService {       @Override       public void init(Context context) {</p> <pre><code>  }\n\n  @Override\n  public &lt;T&gt; T json2Object(String text, Class&lt;T&gt; clazz) {\n      return JSON.parseObject(text, clazz);\n  }\n\n  @Override\n  public String object2Json(Object instance) {\n      return JSON.toJSONString(instance);\n  }\n</code></pre> <p>}   ```</p> <p>\u7136\u540e\u518d\u65b0\u5efaObject,\u518d\u8fdb\u884c\u4f20\u9012\u548c\u63a5\u6536</p> <p>```java   //\u65b0\u5efaObject   public class TestObj {       private String name;       private int id;</p> <pre><code>  public TestObj() {\n  }\n\n  public TestObj(String name, int id) {\n      this.name = name;\n      this.id = id;\n  }\n\n  public String getName() {\n      return name;\n  }\n\n  public void setName(String name) {\n      this.name = name;\n  }\n\n  public int getId() {\n      return id;\n  }\n\n  public void setId(int id) {\n      this.id = id;\n  }\n</code></pre> <p>}   //\u4f20\u9012   TestObj testObj = new TestObj(\"Rose\", 777);   .withObject(\"obj\",testObj)      //\u63a5\u6536     @Autowired     TestObj obj;   ```</p> <ul> <li>List\u7684\u4f20\u9012</li> </ul> <p>\u548c\u81ea\u5b9a\u4e49\u5bf9\u8c61\u7684\u7c7b\u4f3c\uff0c\u53ea\u8981\u5c06Object,\u6362\u6210List\u5373\u53ef</p> <ul> <li>Map\u7684\u4f20\u9012</li> </ul> <p>\u548c\u81ea\u5b9a\u4e49\u5bf9\u8c61\u7684\u7c7b\u4f3c\uff0c\u53ea\u8981\u5c06Object,\u6362\u6210List\u5373\u53ef</p>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#213-forresult","title":"2.1.3 forResult","text":"<p>\u200b     \u76f8\u5f53\u4e8e\u4f7f\u7528startActivityForsult()</p> <pre><code>//activity A \u8df3\u8f6c\n ARouter.getInstance().build(\"/test/activity2\").navigation(this, 666);\n//Activity B \u8fd4\u56de\nsetResult(999);\n//Activity A\u63a5\u6536\n protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        switch (requestCode) {\n            case 666:\n                Log.e(\"activityResult\", String.valueOf(resultCode));\n                break;\n            default:\n                break;\n        }\n    }\n\n</code></pre>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#214-fragment","title":"2.1.4 \u8df3\u8f6c\u5230Fragment","text":"<pre><code>Fragment fragment = (Fragment) ARouter.getInstance().build(\"/test/fragment\").navigation();\n</code></pre>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#215-urlurlwebview","title":"2.1.5 \u901a\u8fc7URL\u8df3\u8f6c\uff0c\u5c06url\u4f20\u9012\u5230\u4e0b\u4e2a\u754c\u9762\uff0c\u7136\u540e\u4f7f\u7528WebView\u52a0\u8f7d\u94fe\u63a5\u754c\u9762","text":"<pre><code>ARouter.getInstance()\n  .build(\"/test/webview\")\n  .withString(\"url\", \"file:///android_asset/scheme-test.html\")\n  .navigation();\nwebview = (WebView) findViewById(R.id.webview);\nwebview.loadUrl(getIntent().getStringExtra(\"url\"));\n</code></pre>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#216","title":"2.1.6 \u62e6\u622a\u8df3\u8f6c\u8fc7\u7a0b","text":"<p>\u4f53\u73b0\u4e86\u9762\u5411\u5207\u9762\u7f16\u7a0b\u7684\u601d\u60f3\uff0c\u5b9e\u73b0\u4e86\u5bf9\u8df3\u8f6c\u8fc7\u7a0b\u7684\u5904\u7406\u3002</p> <pre><code>@Interceptor(priority = 7)\npublic class Test1Interceptor implements IInterceptor {\n    @Override\n    public void process(final Postcard postcard, final InterceptorCallback callback) {\n        if (\"/test/my\".equals(postcard.getPath())) {\n           // \u6839\u636e\u8def\u7531\u786e\u5b9a\u8981\u62e6\u622a\u7684\u8df3\u8f6c\uff0c\u5728\u6b64\u8fdb\u884c\u62e6\u622a\u7684\u5904\u7406\uff0c\u6700\u540e\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\uff0c\u7ee7\u7eed\u8df3\u8f6c\u8fc7\u7a0b\n            callback.onContinue(postcard);\n        }\n    }\n\n    // \u62e6\u622a\u5668\u7684\u521d\u59cb\u5316\uff0c\u4f1a\u5728sdk\u521d\u59cb\u5316\u7684\u65f6\u5019\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u4ec5\u4f1a\u8c03\u7528\u4e00\u6b21\n    @Override\n    public void init(Context context) {\n        Log.e(\"testService\", Test1Interceptor.class.getName() + \" has init.\");\n    }\n}\n</code></pre> <ul> <li>\u7eff\u8272\u901a\u9053\uff08\u8df3\u8fc7\u6240\u6709\u7684\u62e6\u622a\u5668\uff09</li> </ul> <pre><code>// \u4f7f\u7528\u7eff\u8272\u901a\u9053(\u8df3\u8fc7\u6240\u6709\u7684\u62e6\u622a\u5668)\nARouter.getInstance().build(\"/home/main\").greenChannel().navigation();\n</code></pre>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#217-navigationcallback","title":"2.1.7 \u4f7f\u7528<code>NavigationCallback</code>\u5b9e\u73b0\u5bf9\u8df3\u8f6c\u7ed3\u679c\u7684\u5904\u7406","text":"<pre><code>    ARouter.getInstance().build(\"/two/two\").navigation(this, new NavigationCallback() {\n            @Override\n            public void onFound(Postcard postcard) {\n                        //\u627e\u5230\u8def\u7531\u754c\u9762\n            }\n\n            @Override\n            public void onLost(Postcard postcard) {\n                        //\u672a\u627e\u5230\u8def\u7531\u754c\u9762\n            }\n\n            @Override\n            public void onArrival(Postcard postcard) {\n                        //\u8df3\u8f6c\u6210\u529f\n            }\n\n            @Override\n            public void onInterrupt(Postcard postcard) {\n                        //\u8df3\u8f6c\u8fdb\u7a0b\u88ab\u4e2d\u65ad\n            }\n        });\n</code></pre>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#218","title":"2.1.8  \u4e3a\u76ee\u6807\u9875\u9762\u5b9e\u73b0\u66f4\u591a\u7684\u4fe1\u606f\uff08\u8fd8\u4e0d\u77e5\u9053\u5b83\u7684\u4f5c\u7528\u662f\u4ec0\u4e48\uff09","text":"<pre><code>// \u6211\u4eec\u7ecf\u5e38\u9700\u8981\u5728\u76ee\u6807\u9875\u9762\u4e2d\u914d\u7f6e\u4e00\u4e9b\u5c5e\u6027\uff0c\u6bd4\u65b9\u8bf4\"\u662f\u5426\u9700\u8981\u767b\u9646\"\u4e4b\u7c7b\u7684\n// \u53ef\u4ee5\u901a\u8fc7 Route \u6ce8\u89e3\u4e2d\u7684 extras \u5c5e\u6027\u8fdb\u884c\u6269\u5c55\uff0c\u8fd9\u4e2a\u5c5e\u6027\u662f\u4e00\u4e2a int\u503c\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u5355\u4e2aint\u67094\u5b57\u8282\uff0c\u4e5f\u5c31\u662f32\u4f4d\uff0c\u53ef\u4ee5\u914d\u7f6e32\u4e2a\u5f00\u5173\n// \u5269\u4e0b\u7684\u53ef\u4ee5\u81ea\u884c\u53d1\u6325\uff0c\u901a\u8fc7\u5b57\u8282\u64cd\u4f5c\u53ef\u4ee5\u6807\u8bc632\u4e2a\u5f00\u5173\uff0c\u901a\u8fc7\u5f00\u5173\u6807\u8bb0\u76ee\u6807\u9875\u9762\u7684\u4e00\u4e9b\u5c5e\u6027\uff0c\u5728\u62e6\u622a\u5668\u4e2d\u53ef\u4ee5\u62ff\u5230\u8fd9\u4e2a\u6807\u8bb0\u8fdb\u884c\u4e1a\u52a1\u903b\u8f91\u5224\u65ad\n@Route(path = \"/test/activity\", extras = Consts.XXXX)\n</code></pre>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#219","title":"2.1.9 \u670d\u52a1\u7684\u521b\u5efa\u548c\u53d1\u73b0","text":"<p>\u670d\u52a1\u662f\u6307\uff1a\u53ef\u4ee5\u6240\u6709\u6a21\u5757\u4f7f\u7528\u7684\u670d\u52a1\uff0c\u6bcf\u4e00\u4e2a\u670d\u52a1\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u529f\u80fd\uff0c\u4f53\u73b0\u4e86\u73b0\u5728\u5fae\u670d\u52a1\u7684\u601d\u60f3\u3002</p> <ul> <li>\u521b\u5efa\u670d\u52a1</li> </ul> <p>```java   //HelloService   public interface HelloService extends IProvider {       void sayHello(String name);   }   //HelloServiceImpl   @Route(path = \"/yourservicegroupname/hello\" name = \"\u66b4\u9732\u670d\u52a1\")   public class HelloServiceImpl implements HelloService {       Context mContext;</p> <pre><code>  @Override\n  public void sayHello(String name) {\n      Toast.makeText(mContext, \"Hello \" + name, Toast.LENGTH_SHORT).show();\n  }\n\n  /**\n   * Do your init work in this method, it well be call when processor has been load.\n   *\n   * @param context ctx\n   */\n  @Override\n  public void init(Context context) {\n      mContext = context;\n      Log.e(\"testService\", HelloService.class.getName() + \" has init.\");\n  }\n</code></pre> <p>}   //\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7c7b\u6765\u66b4\u9732\u670d\u52a1   @Route(path = \"/yourservicegroupname/single\")   public class SingleService implements IProvider {</p> <pre><code>  Context mContext;\n\n  public void sayHello(String name) {\n      Toast.makeText(mContext, \"Hello \" + name, Toast.LENGTH_SHORT).show();\n  }\n\n  @Override\n  public void init(Context context) {\n      mContext = context;\n  }\n</code></pre> <p>}</p> <p>```</p> <ul> <li> <p>\u53d1\u73b0\u670d\u52a1</p> </li> <li> <p>\u4f9d\u8d56\u6ce8\u5165\u53d1\u73b0\uff08Autowired\uff09</p> <p><code>java //\u53d1\u73b0\u670d\u52a1 @Autowired HelloService helloService1;  @Autowired(name = \"/yourservicegroupname/hello\")//\u8fd9\u91cc\u7684name\u662f\u6307path HelloService helloService2; //\u4f7f\u7528\u670d\u52a1 helloService1.sayHello(\"zhangsan\");</code></p> </li> <li> <p>\u4f7f\u7528\u4f9d\u8d56\u67e5\u627e\u7684\u65b9\u5f0f\u53d1\u73b0\u670d\u52a1\uff0c\u4e3b\u52a8\u53bb\u53d1\u73b0\u670d\u52a1\u5e76\u4f7f\u7528</p> <p><code>java //\u53d1\u73b0\u670d\u52a1 //Byname  \u901a\u8fc7\u8def\u5f84\u540d\u79f0,\u8fd9\u91cc\u7684name\u662f\u6307path HelloService helloService3 =(HelloService)ARouter.getInstance().build(\"/yourservicegroupname/hello\").navigation() //ByType \u901a\u8fc7\u7c7b\u540d   HelloService helloService4 = HelloService helloService4 = (HelloService) ARouter.getInstance().navigation(HelloService.class); //\u4f7f\u7528\u670d\u52a1 helloService1.sayHello(\"zhangsan\");</code></p> </li> </ul>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#2110","title":"2.1.10 \u9884\u5904\u7406\u670d\u52a1","text":"<p>\u5728\u670d\u52a1\u53d1\u751f\u65f6\uff0c\u53ef\u4ee5\u8fdb\u884c\u9884\u5904\u7406\uff0c\u8fd4\u56defalse\uff0c\u9700\u8981\u9884\u5904\u7406\uff0c\u8fd4\u56detrue,\u4e0d\u9700\u8981\u9884\u5904\u7406\u3002</p> <pre><code>// \u5b9e\u73b0 PretreatmentService \u63a5\u53e3\uff0c\u5e76\u52a0\u4e0a\u4e00\u4e2aPath\u5185\u5bb9\u4efb\u610f\u7684\u6ce8\u89e3\u5373\u53ef\n@Route(path = \"/xxx/xxx\")\npublic class PretreatmentServiceImpl implements PretreatmentService {\n    @Override\n    public boolean onPretreatment(Context context, Postcard postcard) {\n        // \u8df3\u8f6c\u524d\u9884\u5904\u7406\uff0c\u5982\u679c\u9700\u8981\u81ea\u884c\u5904\u7406\u8df3\u8f6c\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de false \u5373\u53ef\n    }\n\n    @Override\n    public void init(Context context) {\n\n    }\n}\n</code></pre>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#2111","title":"2.1.11 \u964d\u7ea7\u7b56\u7565","text":"<p>\u200b       \u5f53\u8fdb\u884c\u9875\u9762\u8df3\u8f6c\u51fa\u73b0\u95ee\u9898\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u964d\u7ea7\u7b56\u7565\u53bb\u52a0\u8f7d\u4e00\u4e2aH5\u9875\u9762\u6216\u8005\u8df3\u8f6c\u5230\u4e00\u4e2a\u63d0\u9192\u9875\u9762\uff0c\u8fd9\u6837\u5bf9\u7528\u6237\u6765\u8bf4\u4f53\u9a8c\u5c31\u975e\u5e38\u597d\u4e86\u3002</p> <p>\u200b        \u5355\u72ec\u964d\u7ea7\u548c\u5168\u5c40\u964d\u7ea7\u4e0d\u80fd\u540c\u65f6\u4f7f\u7528\uff0c\u5982\u679c\u540c\u65f6\u4f7f\u7528\uff0c\u5355\u72ec\u964d\u7ea7\u4f1a\u8986\u76d6\u5168\u5c40\u964d\u7ea7\u3002</p> <ul> <li>\u5355\u72ec\u964d\u7ea7</li> </ul> <p>\u5355\u72ec\u964d\u7ea7\u65f6\uff0c\u4f1a\u56de\u8c03\u5230onLost\u65b9\u6cd5\uff0c\u5728onLast\u65b9\u6cd5\u4e2d\u5b9e\u73b0\u964d\u7ea7\u7b56\u7565</p> <p>```java   ARouter.getInstance().build(\"/test/test\").navigation(this, new NavigationCallback() {                   @Override                   public void onFound(Postcard postcard) {                       Log.d(TAG, \"onFound: \u627e\u5230\u4e86\");                   }</p> <pre><code>              /**\n               * \u51fa\u73b0\u95ee\u9898\u4f1a\u56de\u8c03\u8be5\u65b9\u6cd5\n               * \u4e5f\u5c31\u662f\u6211\u4eec\u964d\u7ea7\u7b56\u7565\u7684\u5904\u7406\u56de\u8c03\n               * @param postcard\n               */\n              @Override\n              public void onLost(Postcard postcard) {\n                  Log.d(TAG, \"onLost: \u6ca1\u6709\u627e\u5230\u54df\");\n              }\n\n              @Override\n              public void onArrival(Postcard postcard) {\n                  Log.d(TAG, \"onArrival: \u8df3\u8f6c\u5b8c\u4e8b\u4e86\");\n              }\n\n              @Override\n              public void onInterrupt(Postcard postcard) {\n                  Log.d(TAG, \"onInterrupt: \u88ab\u62e6\u622a\u4e86\");\n              }\n          });\n</code></pre> <p>```</p> <ul> <li>\u5168\u5c40\u964d\u7ea7</li> </ul> <p>\u901a\u8fc7\u5b9e\u73b0DegradeService\u6765\u5168\u5c40\u964d\u7ea7,\u4efb\u4f55\u4e00\u4e2a\u9875\u9762\u8df3\u8f6c\u51fa\u73b0\u95ee\u9898\u90fd\u4f1a\u6267\u884c\u5168\u5c40\u964d\u7ea7\u3002</p> <p>```java   // \u58f0\u660e\u4e00\u4e2a\u964d\u7ea7\u7b56\u7565\u670d\u52a1\u7c7b \u5b9e\u73b0\u4e86 DegradeService   // \u4f7f\u7528\u6ce8\u89e3Route \u6807\u8bc6\u8fd9\u4e2a Provider\u7c7b\u578b(Path\u5185\u5bb9\u4efb\u610f\u7684\u6ce8\u89e3\u5373\u53ef)   @Route(path = \"/degrade/test\")   public class MyDegradeService implements DegradeService {</p> <pre><code>  private static final String TAG = \"MyDegradeService\";\n  @Override\n  public void onLost(Context context, Postcard postcard) {\n      Log.d(TAG, \"onLost: \");\n  }\n\n  @Override\n  public void init(Context context) {\n      Log.d(TAG, \"init: \");\n  }\n</code></pre> <p>}   ```</p>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#2112","title":"2.1.12 \u52a8\u6001\u8def\u7531","text":"<p>\u9002\u7528\u4e8e\u90e8\u5206\u63d2\u4ef6\u5316\u67b6\u6784\u7684App\u4ee5\u53ca\u9700\u8981\u52a8\u6001\u6ce8\u518c\u8def\u7531\u4fe1\u606f\u7684\u573a\u666f\uff0c\u53ef\u4ee5\u901a\u8fc7 ARouter \u63d0\u4f9b\u7684\u63a5\u53e3\u5b9e\u73b0\u52a8\u6001\u6ce8\u518c\u3002</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8def\u7531\u4fe1\u606f\uff0c\u76ee\u6807\u9875\u9762\u548c\u670d\u52a1\u53ef\u4ee5\u4e0d\u6807\u6ce8</p> <ul> <li> <p>\u52a8\u6001\u6ce8\u518c\u8def\u7531</p> </li> <li> <p>\u9996\u5148\u65b0\u5efaActivtity</p> </li> <li> <p>\u6ce8\u518c\u8def\u7531</p> <p>\u6ce8\u610f\uff1a\u540c\u4e00\u6279\u6b21\u7684\u52a8\u6001\u6ce8\u518c\u8def\u7531\uff0cGroup\u5fc5\u987b\u76f8\u540c\u3002</p> <p><code>java ARouter.getInstance().addRouteGroup(new IRouteGroup() {   @Override   public void loadInto(Map&lt;String, RouteMeta&gt; atlas) {     atlas.put(\"/dynamic/activity\",      // path               RouteMeta.build(                 RouteType.ACTIVITY,         // \u8def\u7531\u4fe1\u606f                 TestDynamicActivity.class,  // \u76ee\u6807\u7684 Class                 \"/dynamic/activity\",        // Path                 \"dynamic\",                  // Group, \u5c3d\u91cf\u4fdd\u6301\u548c path \u7684\u7b2c\u4e00\u6bb5\u76f8\u540c                 0,                          // \u4f18\u5148\u7ea7\uff0c\u6682\u672a\u4f7f\u7528                 0                           // Extra\uff0c\u7528\u4e8e\u7ed9\u9875\u9762\u6253\u6807               )              );   } });</code></p> </li> </ul>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#22","title":"2.2 \u5b9e\u73b0\u7ec4\u4ef6\u95f4\u8df3\u8f6c\u7684\u8fc7\u7a0b","text":"<p>1\u3001\u65b0\u5efa\u4e00\u4e2a\u6a21\u5757test</p> <ul> <li> <p>\u5bfc\u5165ARouter\u7684\u4f9d\u8d56</p> </li> <li> <p>\u65b0\u5efaActivity\uff0c\u6dfb\u52a0\u6ce8\u89e3</p> </li> </ul> <p><code>java   @Route(path = \"/my/mytest\")</code></p> <ul> <li> <p>\u5728\u4e3b\u6a21\u5757app\u4e2d\uff0c\u6dfb\u52a0\u6309\u94ae\u8fdb\u884c\u5bfc\u822a\u3002</p> </li> <li> <p>\u5206\u6e05\u4e3b\u6b21\u6a21\u5757</p> </li> </ul> <p><code>//\u4e3b\u6a21\u5757   apply plugin: \u2018com.android.application\u2019   //\u4f9d\u8d56\u6a21\u5757   apply plugin: \u2018com.android.library\u2019</code></p> <p>\u901a\u8fc7\u4ee3\u7801\u52a8\u6001\u5b9e\u73b0\uff0c\u7ec4\u4ef6\u6a21\u5f0f\u548c\u96c6\u6210\u6a21\u5f0f\u7684\u8f6c\u6362</p> <p><code>java   //\u5728\u6839\u76ee\u5f55\u4e2d\u7684gradle.properties   isTestModule = false   //\u5728\u9700\u8981\u914d\u7f6e\u7684\u6a21\u5757\u4e2dbuild.gradle\u4e2d   if(isTestModule.toBoolean()){//\u5982\u679c\u662f\u7ec4\u4ef6\u6a21\u5f0f---\u53ef\u4ee5\u5355\u72ec\u8fd0\u884c       apply plugin: 'com.android.application'   }else {//\u96c6\u6210\u6a21\u5f0f\uff0c\u4e0d\u80fd\u5355\u72ec\u8fd0\u884c       apply plugin: 'com.android.library'   }</code></p> <p>\u5728\u4f9d\u8d56\u6a21\u5757\u4e2d\uff0c\u5fc5\u987b\u53d6\u6d88applicationId\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <ul> <li>\u5728\u4f9d\u8d56\u6a21\u5757\u4e2dbuild.gradle\u6dfb\u52a0ARouter\u7684\u4f9d\u8d56</li> </ul> <p>```java   android {       defaultConfig {           ...           javaCompileOptions {               annotationProcessorOptions {                   arguments = [AROUTER_MODULE_NAME: project.getName()]               }           }       }   }</p> <p>dependencies {       // \u66ff\u6362\u6210\u6700\u65b0\u7248\u672c, \u9700\u8981\u6ce8\u610f\u7684\u662fapi       // \u8981\u4e0ecompiler\u5339\u914d\u4f7f\u7528\uff0c\u5747\u4f7f\u7528\u6700\u65b0\u7248\u53ef\u4ee5\u4fdd\u8bc1\u517c\u5bb9       compile 'com.alibaba:arouter-api:x.x.x'       annotationProcessor 'com.alibaba:arouter-compiler:x.x.x'       ...   }   ```</p> <ul> <li>\u5728\u4e3b\u6a21\u5757\u4e2d\u6dfb\u52a0\u5bf9\u5404\u4e2a\u4f9d\u8d56\u6a21\u5757\u7684\u4f9d\u8d56</li> </ul> <p><code>java   implementation project(':arouter_test1')   implementation project(':arouter_test2')</code></p> <p>\u6b64\u65f6\uff0c\u53ef\u5b9e\u73b0\u6240\u6709\u6a21\u5757\u95f4\u7684\u8df3\u8f6c\u548c\u901a\u4fe1\u3002</p>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#23","title":"2.3 \u8def\u7531\u8df3\u8f6c\u7684\u539f\u7406(\u62e6\u622a\u3001\u964d\u7ea7)","text":"<p>\u539f\u7406\u4e2d\u9047\u5230\u7684\u5173\u952e\u7c7b\u8bf4\u660e\uff1a</p> <p>Postcard\uff1aA container that contains the roadmap.\u4e00\u4e2a\u5305\u542b\u8def\u7ebf\u7684\u5bb9\u5668\u3002</p> <p>RouteMeta\uff1a \u8def\u5f84\u5143\uff0c\u52a0\u8f7d\u8def\u7531\u4fe1\u606f\u7684\u57fa\u672c\u5355\u4f4d</p> <p>ARouter\u3001_ARouter\uff1aARouter\u662f\u4e00\u4e2a\u4e0e\u7528\u6237\u63a5\u89e6\u7684\u7c7b\uff0c\u662f\u5bf9_ARouter\u7684\u4e00\u4e2a\u88c5\u9970\u3002_ARouter\u5bf9\u7528\u6237\u662f\u4e0d\u53ef\u89c1\u7684\u3002\u4e3b\u8981\u529f\u80fd\u8fd8\u662f_ARouter\u5b9e\u73b0\u3002</p> <p>Warehouse\uff1a\u5b58\u50a8router\u8def\u5f84\u3001\u5206\u7ec4\u7b49\u4fe1\u606f\u3002\u5982\u9875\u9762\u8df3\u8f6c\uff0c\u5c06\u8def\u7531\u4fe1\u606f\u4fdd\u5b58\u5230\u5185\u5b58\u4e2d\u3002</p> <p>LogisticsCenter\uff1a\u521d\u59cb\u5316\u5c06\u8def\u7531\u4fe1\u606fload\u5230\u5185\u5b58\u4e2d\uff0c\u5373\u4ee5\u4e0a\u7684Warehouse\u4ed3\u5e93\u4e2d\u3002\u53e6\u5916\uff0c\u8d1f\u8d23\u521b\u5efapostcard\uff0c\u5b8c\u5584postcard\u4fe1\u606f\u7b49\u3002</p> <p>InterceptorService\uff1a\u62e6\u622a\u5668\u670d\u52a1\u7684\u63a5\u53e3</p> <p>PretreatmentService\uff1a\u9884\u5904\u7406\u670d\u52a1\u7684\u63a5\u53e3</p> <p>PretreatmentService\uff1a\u5168\u5c40\u964d\u7ea7\u7684\u63a5\u53e3</p> <p>ARouter\u8def\u7531\u5b9e\u73b0\u7684\u5927\u81f4\u6d41\u7a0b\uff08\u81ea\u5df1\u603b\u7ed3\uff09</p> <p>\u200b        \u5728\u7f16\u8bd1\u5668\uff0c\u901a\u8fc7APT\u548cjavapoet\uff0c\u5904\u7406@Route\u6ce8\u89e3\uff0c\u5c06class\u6587\u4ef6\u548cpath\u4f7f\u7528map \u4e00\u4e00\u6620\u5c04\uff0c\u5e76\u751f\u6210java\u6587\u4ef6\uff0c\u5df2\u4f9b\u8fd0\u884c\u671f\u52a0\u8f7d\u3002</p> <p>\u200b       \u5728\u8fd0\u884c\u671f\uff0c\u901a\u8fc7\u52a0\u8f7d\u7f16\u8bd1\u671f\u751f\u6210\u7684java\u6587\u4ef6\uff0c\u5c06\u5176\u8bfb\u5230\u5185\u5b58\u91cc\u4f7f\u7528map\u4fdd\u5b58\uff0c\u5f53\u9700\u8981\u8df3\u8f6c\u65f6\uff0c\u901a\u8fc7\u5728\u81ea\u5df1\u5b58\u50a8\u7684\u8def\u7531\u8868\u4e2d\u641c\u7d22\u4f20\u5165\u7684\u8def\u7531\u5730\u5740\uff0c\u627e\u5230\u76f8\u5e94\u7684.class\u6587\u4ef6\uff0c\u5e76\u53ef\u4ee5\u4f20\u53c2\uff0c\u7136\u540e\u5185\u90e8\u8c03\u7528startActivity\u8fdb\u884c\u8df3\u8f6c\uff0c\u8fd9\u6837\u4fbf\u5b9e\u73b0\u4e86\u8def\u7531\u8df3\u8f6c\u3002</p> <ul> <li>\u7f16\u8bd1\u671f</li> </ul> <p>ARouter\u7684\u8def\u7531\u3001\u53c2\u6570\u3001\u62e6\u622a\u5668\u90fd\u662f\u7528\u6ce8\u89e3\u6807\u6ce8\u7684\uff0c\u800c\u6ce8\u89e3\u53ef\u4ee5\u5206\u4e3a<code>\u7f16\u8bd1\u65f6\u6ce8\u89e3</code>\u548c<code>\u8fd0\u884c\u65f6\u6ce8\u89e3</code>\uff0c\u800c\u5728\u8fd0\u884c\u65f6\u5904\u7406\u6ce8\u89e3\u4f1a\u4f7f\u7528\u5927\u91cf\u7684\u53cd\u5c04\uff0c\u56e0\u6b64ARouter\u5904\u7406\u6ce8\u89e3\u65f6\u662f\u5728\u7f16\u8bd1\u671f\uff0c\u8d1f\u8d23<code>\u751f\u6210\u8def\u7531\u8868</code>\u7684\u662f <code>RouteProcessor</code>\uff0c\u5206\u522b\u4f1a\u751f\u6210Root\u3001Providers\u548cGroup\u3002\u8d1f\u8d23<code>\u751f\u6210\u62e6\u622a\u5668</code>\u7684\u662f <code>InterceptorProcessor</code>\uff0c\u751f\u6210<code>Interceptors</code>\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u751f\u6210\u7684java\u6587\u4ef6\u5c55\u793a\uff1a</p> <p></p> <p>\u91cd\u70b9\u8bb2\u89e3<code>RouteProcessor</code>\u5904\u7406\u5668\u5982\u751f\u6210Java\u6587\u4ef6\u7684\u3002</p> <p>1\u3001\u83b7\u53d6@Route\u6ce8\u89e3</p> <p><code>java   Set&lt;? extends Element&gt; routeElements = roundEnv.getElementsAnnotatedWith(Route.class);</code></p> <p>2\u3001\u5904\u7406@Route\u6ce8\u89e3</p> <p><code>java   this.parseRoutes(routeElements);</code></p> <p>3\u3001\u6839\u636e\u6ce8\u89e3\u751f\u6210RouteMeta</p> <p></p> <p>```java   for (Element element : routeElements) {     TypeMirror tm = element.asType();     Route route = element.getAnnotation(Route.class);     RouteMeta routeMeta;</p> <pre><code>// Activity or Fragment\nif (types.isSubtype(tm, type_Activity) || types.isSubtype(tm, fragmentTm) || types.isSubtype(tm, fragmentTmV4)) {\n  // Get all fields annotation by @Autowired\n  Map&lt;String, Integer&gt; paramsType = new HashMap&lt;&gt;();\n  Map&lt;String, Autowired&gt; injectConfig = new HashMap&lt;&gt;();\n  injectParamCollector(element, paramsType, injectConfig);\n\n  if (types.isSubtype(tm, type_Activity)) {\n    // Activity\n    logger.info(\"&gt;&gt;&gt; Found activity route: \" + tm.toString() + \" &lt;&lt;&lt;\");\n    routeMeta = new RouteMeta(route, element, RouteType.ACTIVITY, paramsType);\n  } else {\n    // Fragment\n    logger.info(\"&gt;&gt;&gt; Found fragment route: \" + tm.toString() + \" &lt;&lt;&lt;\");\n    routeMeta = new RouteMeta(route, element, RouteType.parse(FRAGMENT), paramsType);\n  }\n\n  routeMeta.setInjectConfig(injectConfig);\n} else if (types.isSubtype(tm, iProvider)) {         // IProvider\n  logger.info(\"&gt;&gt;&gt; Found provider route: \" + tm.toString() + \" &lt;&lt;&lt;\");\n  routeMeta = new RouteMeta(route, element, RouteType.PROVIDER, null);\n} else if (types.isSubtype(tm, type_Service)) {           // Service\n  logger.info(\"&gt;&gt;&gt; Found service route: \" + tm.toString() + \" &lt;&lt;&lt;\");\n  routeMeta = new RouteMeta(route, element, RouteType.parse(SERVICE), null);\n} else {\n  throw new RuntimeException(\"The @Route is marked on unsupported class, look at [\" + tm.toString() + \"].\");\n}\n//\u6309\u7167\u5206\u7ec4\u8fdb\u884c\u6392\u5e8f\ncategories(routeMeta);\n</code></pre> <p>}   ```</p> <p>4\u3001\u628a\u8def\u7531\u5143\u8fdb\u884c\u5206\u7ec4</p> <p>\u5728 RouteProcessor \u4e2d\u6709\u4e00\u4e2a groupMap\uff0c\u5728 RouteMeta \u521b\u5efa\u597d\u540e\uff0cRouteProcessor \u4f1a\u628a\u4e0d\u540c\u7684 RouteMeta \u8fdb\u884c\u5206\u7ec4\uff0c\u653e\u5165\u5230 groupMap \u4e2d\u3002</p> <p>5\u3001\u751f\u6210\u8def\u7531\u6587\u4ef6</p> <ul> <li>\u751f\u6210\u8def\u7ebf\u7ec4\u8def\u7531\u6587\u4ef6</li> <li>\u751f\u6210Provider\u8def\u7531\u6587\u4ef6</li> <li>\u751f\u6210\u6839\u8def\u7531\u6587\u4ef6</li> </ul> <p>\u200b          \u5c31\u4f1a\u7528 JavaPoet \u751f\u6210 Group\u3001Provider \u548c Root \u8def\u7531\u6587\u4ef6\uff0c\u8def\u7531\u8868\u5c31\u662f\u7531\u8fd9\u4e9b\u6587\u4ef6\u7ec4\u6210\u7684\uff0cJavaPoet \u662f Square \u5f00\u6e90\u7684\u4ee3\u7801\u751f\u6210\u6846\u67b6\u3002\u751f\u6210\u7684\u8def\u7531\u6587\u4ef6\u4f1a\u5b58\u653e\u5728disk\uff0c\u4ee5\u4f9b\u8fd0\u884c\u7684\u65f6\u5019\u8fdb\u884c\u52a0\u8f7d\uff0c\u7269\u6d41\u4e2d\u5fc3 LogisticsCenter \u9700\u8981\u7528\u8fd9\u4e9b\u6587\u4ef6\u6765\u586b\u5145\u4ed3\u5e93 Warehouse \u4e2d\u7684 routes \u548c providerIndex \u7b49\u7d22\u5f15\uff0c\u7136\u540e\u5728\u8df3\u8f6c\u65f6\u6839\u636e routes \u548c\u7d22\u5f15\u6765\u8df3\u8f6c\u3002</p> <ul> <li> <p>\u8fd0\u884c\u671f</p> </li> <li> <p>\u521d\u59cb\u5316\u52a0\u8f7d</p> <p>\u5728\u751f\u6210\u7684\u8def\u7531\u6587\u4ef6\u7684\u57fa\u7840\u4e0a\uff0c\u5728ARouter\u7684\u521d\u59cb\u5316\u65f6\uff0c<code>LogisticsCenter</code>\u4f1a\u5c06\u6240\u6709\u7f16\u8bd1\u671f\u81ea\u52a8\u751f\u6210\u7684\u8def\u7531\u6587\u4ef6class\u52a0\u8f7d\u5230RouteMap\u3002</p> <p><code>java  routerMap = ClassUtils.getFileNameByPackageName(mContext, ROUTE_ROOT_PAKCAGE);</code></p> <p>\u5c06class\u6309\u7167\u5206\u7c7b\uff08Root\uff0cInterceptors\uff0c Providers\uff09\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u628a\u8be5class\u5173\u8054\u5230WareHouse\u4e2d\uff0c\u8fd9\u6837\u5c31\u4f1a\u5c06\u6240\u6709\u7684\u6620\u5c04\u5173\u7cfb\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u4fbf\u4e8e\u540e\u7eed\u7684\u8def\u7531\u67e5\u627e\u548c\u8df3\u8f6c\u3002</p> <p><code>java for (String className : routerMap) {   if (className.startsWith(ROUTE_ROOT_PAKCAGE + DOT + SDK_NAME + SEPARATOR + SUFFIX_ROOT)) {     // This one of root elements, load root.     ((IRouteRoot) (Class.forName(className).getConstructor().newInstance())).loadInto(Warehouse.groupsIndex);   } else if (className.startsWith(ROUTE_ROOT_PAKCAGE + DOT + SDK_NAME + SEPARATOR + SUFFIX_INTERCEPTORS)) {     // Load interceptorMeta     ((IInterceptorGroup) (Class.forName(className).getConstructor().newInstance())).loadInto(Warehouse.interceptorsIndex);   } else if (className.startsWith(ROUTE_ROOT_PAKCAGE + DOT + SDK_NAME + SEPARATOR + SUFFIX_PROVIDERS)) {     // Load providerIndex     ((IProviderGroup) (Class.forName(className).getConstructor().newInstance())).loadInto(Warehouse.providersIndex);   } }</code></p> <p>\u8fd9\u65f6\u53ea\u52a0\u8f7d\u4e86Root\uff0cInterceptors\uff0c Providers\uff0c\u800c\u6ca1\u6709\u52a0\u8f7dGroup\uff0c\u662f\u56e0\u4e3aARouter\u7684\u52a0\u8f7d\u7406\u5ff5\uff1a\u5206\u7ec4\u7ba1\u7406\uff0c\u6309\u9700\u52a0\u8f7d\u3002</p> <p>\u200b        \u5047\u5982App\u7684\u9875\u9762\u8fc7\u4e8e\u591a\u7684\u65f6\u5019\uff0c\u4e00\u6b21\u6027\u52a0\u8f7d\u5b8c\u6240\u6709\u6587\u4ef6\u7684\u8def\u7531\uff0c\u65e2\u6d88\u8017\u65f6\u95f4\u53c8\u6ca1\u6709\u5fc5\u8981\uff0c\u56e0\u6b64Arouter\u63d0\u51fa\u4e86\u5206\u7ec4\u7684\u6982\u5ff5\uff0c\u5141\u8bb8\u4e00\u4e2a\u6a21\u5757\u4e0b\u6709\u591a\u4e2a\u5206\u7ec4\uff0c\u6240\u6709\u7684\u5206\u7ec4\u90fd\u4f1a\u6709\u4e00\u4e2aRoot\u8282\u70b9\u7ba1\u7406\uff0c\u6bcf\u4e2aroot\u7ed3\u70b9\u90fd\u4f1a\u7ba1\u7406\u6574\u4e2a\u6a21\u5757\u4e2d\u7684group\u8282\u70b9\uff0c\u6bcf\u4e2agroup\u7ed3\u70b9\u5219\u5305\u542b\u4e86\u8be5\u5206\u7ec4\u4e0b\u7684\u6240\u6709\u9875\u9762\uff0c\u6bcf\u4e2a\u6a21\u5757\u4e2d\u90fd\u4f1a\u6709\u4e00\u4e2a\u62e6\u622a\u5668\u8282\u70b9\u5c31\u662fInterceptor\u7ed3\u70b9\uff0c\u9664\u6b64\u4e4b\u5916\u6bcf\u4e2a\u6a21\u5757\u8fd8\u4f1a\u6709\u63a7\u5236\u62e6\u622a\u53cd\u8f6c\u7684provider\u7ed3\u70b9\u3002</p> <p></p> <p>\u4ec0\u4e48\u65f6\u5019\u52a0\u8f7dGroup\u8282\u70b9\uff1f</p> <p>\u200b        \u5f53\u67d0\u4e00\u4e2a\u5206\u7ec4\u4e0b\u7684\u67d0\u4e00\u4e2a\u9875\u9762\u7b2c\u4e00\u6b21\u88ab\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u6574\u4e2a\u5206\u7ec4\u7684\u5168\u90e8\u9875\u9762\u90fd\u4f1a\u88ab\u52a0\u8f7d\u8fdb\u53bb\uff0c\u8fd9\u5c31\u662fARouter\u7684\u6309\u9700\u52a0\u8f7d\u3002\u901a\u8fc7\u5206\u7ec4\u7ba1\u7406\uff0c\u6309\u9700\u52a0\u8f7d\uff0c\u6781\u5927\u7684\u51cf\u8f7b\u4e86\u5185\u5b58\u538b\u529b\u3002</p> <p><code>java //\u6e90\u7801\u5206\u6790 //\u7b2c\u4e00\u6b21\u52a0\u8f7d if (null == routeMeta) {   // Maybe its does't exist, or didn't load   addRouteGroupDynamic(postcard.getGroup(), null);   \u00b7\u00b7\u00b7     completion(postcard);   // Reload } public synchronized static void addRouteGroupDynamic(String groupName, IRouteGroup group) throws NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {   if (Warehouse.groupsIndex.containsKey(groupName)){     //\u5f53\u5206\u7ec4\u5728groupsIndex\u65f6\uff0c\u8bf4\u660e\u672a\u52a0\u8f7d\u8be5\u5206\u7ec4     //\u52a0\u8f7d\u8fd9\u4e2a\u5206\u7ec4\uff0c\u5c06\u5176\u4ecegroupsIndex\u4e2d\u5220\u9664  Warehouse.groupsIndex.get(groupName).getConstructor().newInstance().loadInto(Warehouse.routes);     Warehouse.groupsIndex.remove(groupName);   }   ... }</code></p> </li> <li> <p>\u8def\u7531\u8df3\u8f6c</p> <p>\u5f53\u8def\u7531\u6587\u4ef6\u751f\u6210\u5e76\u52a0\u8f7d\u65f6\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c\u8def\u7531\u8df3\u8f6c\u4e86\uff0c\u5173\u952e\u8df3\u8f6c\u8bed\u53e5\u5982\u4e0b\uff1a</p> <p><code>java  ARouter.getInstance().build(\"/test/my\").navigation();</code></p> <p>PostCard:A container that contains the roadmap.\u4e00\u4e2a\u5305\u542b\u8def\u7ebf\u7684\u5bb9\u5668\uff0c\u662f\u8def\u7531\u4fe1\u606f\u7684\u627f\u8f7d\u7c7b\u3002</p> <p>\u7531\u6e90\u7801\u53ef\u77e5<code>ARouter.getInstance().build(\"/test/my\")</code>\uff0c\u8fd4\u56de\u4e86\u4e00\u4e2a\u5305\u542b<code>path</code>\u548c<code>group</code>\u7684PostCard.</p> <p><code>java protected Postcard build(String path, String group, Boolean afterReplace) {         if (TextUtils.isEmpty(path) || TextUtils.isEmpty(group)) {             throw new HandlerException(Consts.TAG + \"Parameter is invalid!\");         } else {             if (!afterReplace) {               //PathReplaceService\u662f\u4fee\u6539path,\u5f53\u6307\u5b9agroup name\u65f6\uff0c\u4f1a\u4f7f\u7528                 PathReplaceService pService = ARouter.getInstance().navigation(PathReplaceService.class);                 if (null != pService) {                     path = pService.forString(path);                 }             }             return new Postcard(path, group);         }     }</code></p> <ul> <li>Postcard.navigation() -&gt;_Arouter.navigation()</li> </ul> <p></p> <p>1\u3001\u9884\u5904\u7406\u670d\u52a1</p> <p>\u9884\u5904\u7406\u670d\u52a1\u7684\u5b9e\u73b0\u89c1\uff1a\u89c12.1.10</p> <p>\u200b     \u9884\u5904\u7406\u670d\u52a1\u53ef\u4ee5\u8ba9\u6211\u4eec\u5728 ARouter \u8fdb\u884c\u8def\u7531\u8df3\u8f6c\u524d\uff0c\u6839\u636e PostCard \u7684\u5185\u5bb9\u5224\u65ad\u662f\u5426\u8981\u72ec\u7acb\u5730\u5bf9\u8fd9\u6b21\u8df3\u8f6c\u8fdb\u884c\u5904\u7406\uff0c\u662f\u7684\u8bdd\u5219\u5728 onPretreatment() \u4e2d\u8fd4\u56de false \u5373\u53ef,\u8fd4\u56detrue\u5219\u8bf4\u660e\u4e0d\u9700\u8981\u9884\u5904\u7406\u670d\u52a1\u3002\u6bd4\u5982\uff0c\u5728\u5206\u4eab\u4e4b\u524d\u5224\u65ad\u7528\u6237\u662f\u5426\u5df2\u7ecf\u767b\u5f55\uff0c\u767b\u5f55\u5c31\u53ef\u4ee5\u5206\u4eab\uff0c\u672a\u767b\u5f55\u5c31\u53ef\u4ee5\u4e0d\u5206\u4eab</p> <p><code>java   PretreatmentService pretreatmentService = ARouter.getInstance().navigation(PretreatmentService.class);   if (null != pretreatmentService &amp;&amp; !pretreatmentService.onPretreatment(context, postcard)) {     // Pretreatment failed, navigation canceled.     return null;   }</code></p> <p>2\u3001\u5b8c\u5584Postcard</p> <p>\u200b    \u5b8c\u5584Postcard,\u4f7f\u7528\u7684\u662f<code>LogisticsCenter</code>\u7684completion()\u65b9\u6cd5\uff0c\u5728\u8be5\u65b9\u6cd5\u4e2d\uff0c\u4f1a\u52a0\u8f7dRouteMeta\u7684\u4fe1\u606f\uff0c\u5e76\u5c06Provider\u7684\u548cFrament\u7684\u8def\u7531\u8bbe\u7f6e\u4e3a\u7eff\u8272\u901a\u9053\u3002</p> <p></p> <p>3\u3001\u964d\u7ea7\u7b56\u7565</p> <p>\u964d\u7ea7\u7b56\u7565\u7684\u5b9e\u73b0\u89c1 2.1.11</p> <p></p> <p><code>java   if (null != callback) {     callback.onLost(postcard);   } else {     // No callback for this invoke, then we use the global degrade service.     DegradeService degradeService = ARouter.getInstance().navigation(DegradeService.class);     if (null != degradeService) {       degradeService.onLost(context, postcard);     }   }</code></p> <p>\u7531\u6e90\u7801\u53ef\u77e5\uff0c\u5b8c\u5584Postcard\u5931\u8d25\uff0c\u4f1a\u6267\u884c\u56de\u8c03onLost()\uff0c\u6210\u529f\u4f1a\u6267\u884conFound()\u3002</p> <p>4\u3001\u62e6\u622a\u5668\u94fe</p> <p>\u62e6\u622a\u5668\u7684\u5b9e\u73b0\u89c1\uff1a2.1.6</p> <p></p> <p><code>java   if (!postcard.isGreenChannel()) {   // It must be run in async thread, maybe interceptor cost too mush time made ANR.     interceptorService.doInterceptions(postcard, new InterceptorCallback() {       @Override       public void onContinue(Postcard postcard) {         _navigation(postcard, requestCode, callback);       }       //\u8fdb\u7a0b\u4e2d\u65ad\uff0c\u8df3\u8f6c\u5931\u8d25       @Override       public void onInterrupt(Throwable exception) {         if (null != callback) {           callback.onInterrupt(postcard);         }       }     });   } else {     return _navigation(postcard, requestCode, callback);   }</code></p> <p>\u7531\u6e90\u7801\u53ef\u77e5\uff0c\u8df3\u8f6c\u8fdb\u7a0b\u88ab\u4e2d\u65ad\uff0c\u4f1a\u56de\u8c03onInterrupt()\u3002</p> <p>5\u3001\u6309\u7c7b\u578b\u8df3\u8f6c</p> </li> </ul> <p>\u200b          </p> <pre><code>switch (postcard.getType()) {\n  case ACTIVITY:\n    // Build intent\n    final Intent intent = new Intent(currentContext, postcard.getDestination());\n    intent.putExtras(postcard.getExtras());\n    // Set flags.\n    int flags = postcard.getFlags();\n    if (0 != flags) {\n      intent.setFlags(flags);\n    }\n    // Non activity, need FLAG_ACTIVITY_NEW_TASK\n    if (!(currentContext instanceof Activity)) {\n      intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n    }\n    // Set Actions\n    String action = postcard.getAction();\n    if (!TextUtils.isEmpty(action)) {\n      intent.setAction(action);\n    }\n    // Navigation in main looper.\n    runInMainThread(new Runnable() {\n      @Override\n      public void run() {\n        startActivity(requestCode, currentContext, intent, postcard, callback);\n      }\n    });\n    break;\n  case PROVIDER:\n    return postcard.getProvider();\n  case BOARDCAST:\n  case CONTENT_PROVIDER:\n  case FRAGMENT:\n    Class&lt;?&gt; fragmentMeta = postcard.getDestination();\n    try {\n      Object instance = fragmentMeta.getConstructor().newInstance();\n      if (instance instanceof Fragment) {\n        ((Fragment) instance).setArguments(postcard.getExtras());\n      } else if (instance instanceof android.support.v4.app.Fragment) {\n        ((android.support.v4.app.Fragment) instance).setArguments(postcard.getExtras());\n      }\n\n      return instance;\n    } catch (Exception ex) {\n      logger.error(Consts.TAG, \"Fetch fragment instance error, \" + TextUtils.formatStackTrace(ex.getStackTrace()));\n    }\n  case METHOD:\n  case SERVICE:\n  default:\n    return null;\n}\n\n</code></pre> <p>\u5230\u6b64\uff0cArouter\u7684\u8df3\u8f6c\u7ed3\u675f\uff0c\u5e76\u56de\u8c03onArrival()\u3002</p>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#24-212","title":"2.4 \u81ea\u52a8\u6ce8\u5165\u7684\u539f\u7406\uff08\u4f7f\u7528\u89c12.1.2\uff09","text":"<ul> <li>\u5728\u901a\u4fe1\u754c\u9762\u4f7f\u7528<code>with</code>\u6765\u4f20\u9012\u6570\u636e\u3002</li> </ul> <p><code>java   //Bundle.putString   public Postcard withString(@Nullable String key,                               @Nullable String value) {     mBundle.putString(key, value);     return this;   }   //Object\u662f\u4f7f\u7528Json\u5b57\u7b26\u4e32\u5b9e\u73b0\u7684   public Postcard withObject(@Nullable String key,                               @Nullable Object value) {     serializationService = ARouter.getInstance().       navigation(SerializationService.class);     mBundle.putString(key, serializationService.object2Json(value));     return this;   }</code></p> <p>\u6ce8\uff1a\u7279\u6b8a\u7684\u662f<code>withObject()</code>,\u9700\u8981\u5b9e\u73b0<code>serializationService</code>,\u6765\u5b8c\u6210json\u548cObject\u4e4b\u95f4\u7684\u8f6c\u6362\u3002</p> <p>\u539f\u7406\uff1a</p> <p>Bundle.putString(key,value)</p> <p>intent.putString(key,value)</p> <ul> <li>\u6ce8\u5165\u754c\u9762(\u63a5\u6536\u4fe1\u606f\u754c\u9762)</li> </ul> <p>1\u3001\u5728\u521d\u59cb\u5316\u7684\u5730\u65b9\u6dfb\u52a0<code>inject</code>:</p> <p><code>java    //ARouter \u6ce8\u5165,\u6ce8\u5165\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528Autowired\u6ce8\u89e3   ARouter.getInstance().inject(this);</code></p> <p>\u200b       \u539f\u7406\u662f\uff1a\u5728\u8be5\u65b9\u6cd5\u4e2d\u8c03\u7528\u4e86<code>@Autowired</code>\u6ce8\u89e3\u5728\u7f16\u8bd1\u5668\u751f\u6210\u7684\u7c7b\u7684<code>inject()</code>\u65b9\u6cd5\u3002</p> <p>\u200b       \u7531\u6e90\u7801\u5206\u6790\u53ef\u77e5\uff1aARouter.inject() -&gt; _ARouter.inject() -&gt; AutowiredServiceImpl.autowire()-&gt;AutowiredServiceImpl.doInject(instance, null)\uff1b<code>instance</code>\u6307\u6dfb\u52a0\u6ce8\u5165\u7684\u754c\u9762\u3002</p> <p></p> <pre><code> private void doInject(Object instance, Class&lt;?&gt; parent) {\n        Class&lt;?&gt; clazz = null == parent ? instance.getClass() : parent;\n\n            //\u83b7\u53d6\u6839\u636eAutowired\u751f\u6210\u7684\u7c7b\n        ISyringe syringe = getSyringe(clazz);\n        if (null != syringe) {\n         //\u8c03\u7528inject()\u65b9\u6cd5\n          syringe.inject(instance);\n        }\n\n        Class&lt;?&gt; superClazz = clazz.getSuperclass();\n        // \n        if (null != superClazz &amp;&amp; !superClazz.getName().startsWith(\"android\")) {\n            //\u5982\u679c\u8fd8\u6709\u7236\u7c7b\uff0c\u4f1a\u8c03\u7528\u7236\u7c7b\u7684inject()\u65b9\u6cd5\n            doInject(instance, superClazz);\n        }\n    }\nprivate ISyringe getSyringe(Class&lt;?&gt; clazz) {\n  String className = clazz.getName();\n\n  try {\n    if (!blackList.contains(className)) {\n      //\u5185\u5b58\u4e2d\u662f\u5426\u8be5\u7c7b\u5df2\u7ecf\u52a0\u8f7d\u8fc7\n      ISyringe syringeHelper = classCache.get(className);\n      if (null == syringeHelper) {  // No cache.\n        //\u6ca1\u6709\u7684\u8bdd\uff0c\u52a0\u8f7d\u5230\u5185\u5b58\n        syringeHelper = (ISyringe) Class.forName(clazz.getName() + SUFFIX_AUTOWIRED).getConstructor().newInstance();\n      }\n      classCache.put(className, syringeHelper);\n      return syringeHelper;\n    }\n  } catch (Exception e) {\n    blackList.add(className);    // This instance need not autowired.\n  }\n\n  return null;\n}\n</code></pre> <p>\u200b   2\u3001\u6dfb\u52a0@Autowired\u6ce8\u89e3</p> <p>\u770b\u4e00\u4e0bAutowired\u6ce8\u89e3\u7684\u6784\u6210\uff1a</p> <pre><code>public @interface Autowired {\n\n    // Mark param's name or service name.\n    String name() default \"\";\n\n    // If required, app will be crash when value is null.\n    // Primitive type wont be check!\n    boolean required() default false;\n\n    // Description of the field\n    String desc() default \"\";\n}\n</code></pre> <p>\u6709\u4e09\u4e2a\u5c5e\u6027\uff1aname\u3001required\u3001desc\u3002</p> <pre><code>@Autowired\nString name;\n</code></pre> <p>\u200b     \u539f\u7406\uff1a \u6dfb\u52a0<code>@Autowired</code>\u6ce8\u89e3\u540e\uff0cARouter\u4f1a\u5728\u7f16\u8bd1\u5668\u4f7f\u7528<code>AutowiredProcess</code>\u6ce8\u89e3\u5904\u7406\u5668\u751f\u6210class:<code>ActivityName$$ARouter$$Autowired</code></p> <p>AutowiredProcess\u505a\u4e86\u4ec0\u4e48\uff1a</p> <ul> <li>\u83b7\u53d6\u6240\u6709\u7684Arouter\u6ce8\u89e3\uff0c\u5e76\u5206\u7c7b</li> </ul> <p><code>java   if (CollectionUtils.isNotEmpty(elements)) {     for (Element element : elements) {       //\u6ce8\u89e3\u5206\u7c7b\uff0c\u6307Activity\u6216Fragment       TypeElement enclosingElement = (TypeElement) element.getEnclosingElement();       //@Autowired\u4e0d\u80fd\u4f7f\u7528private\u6ce8\u89e3       if (element.getModifiers().contains(Modifier.PRIVATE)) {         throw new IllegalAccessException(\"The inject fields CAN NOT BE 'private'!!! please check field [\"                                          + element.getSimpleName() + \"] in class [\" + enclosingElement.getQualifiedName() + \"]\");       }       //\u6309\u7167\u6ce8\u89e3\u6240\u5728\u7684Activity\u3001Fragment\u3001class\u5206\u7c7b       if (parentAndChild.containsKey(enclosingElement)) { // Has categries         parentAndChild.get(enclosingElement).add(element);       } else {         List&lt;Element&gt; childs = new ArrayList&lt;&gt;();         childs.add(element);         parentAndChild.put(enclosingElement, childs);       }     }</code></p> <ul> <li> <p>\u6839\u636e\u6ce8\u89e3\u751f\u6210\u7c7b:<code>ActivityName$$ARouter$$Autowired</code></p> </li> <li> <p>\u751f\u6210\u5b9a\u4e49\u7684\u7c7b\u7ed3\u6784\u548c<code>inject()</code>\u65b9\u6cd5</p> <p>```java // inject\u53c2\u6570 ParameterSpec objectParamSpec = ParameterSpec.builder(TypeName.OBJECT, \"target\").build(); //\u6784\u9020inject\u65b9\u6cd5 MethodSpec.Builder injectMethodBuilder = MethodSpec.methodBuilder(METHOD_INJECT)   .addAnnotation(Override.class)   .addModifiers(PUBLIC)   .addParameter(objectParamSpec);</p> <p>TypeElement parent = entry.getKey(); List childs = entry.getValue(); <p>//\u83b7\u53d6\u7c7b\u6240\u5728\u5305\u540d String qualifiedName = parent.getQualifiedName().toString(); String packageName = qualifiedName.substring(0, qualifiedName.lastIndexOf(\".\")); //\u83b7\u53d6\u751f\u6210\u7684Java\u6587\u4ef6\u540d String fileName = parent.getSimpleName() + NAME_OF_AUTOWIRED;</p> <p>logger.info(\"&gt;&gt;&gt; Start process \" + childs.size() + \" field in \" + parent.getSimpleName() + \" ... &lt;&lt;&lt;\");</p> <p>//\u6784\u5efaJava\u7c7b TypeSpec.Builder helper = TypeSpec.classBuilder(fileName)   .addJavadoc(WARNING_TIPS)   .addSuperinterface(ClassName.get(type_ISyringe))   .addModifiers(PUBLIC); //\u6784\u5efaSerializationService\u5c5e\u6027 FieldSpec jsonServiceField = FieldSpec.builder(TypeName.get(type_JsonService.asType()), \"serializationService\", Modifier.PRIVATE).build(); helper.addField(jsonServiceField);</p> <p>//\u6784\u5efainjcet()\u4e2d\uff1a //serializationService = ARouter.getInstance().navigation(SerializationService.class); //\u7c7b\u540d substitute = (\u7c7b\u540d)target; injectMethodBuilder.addStatement(\"serializationService = $T.getInstance().navigation($T.class)\", ARouterClass, ClassName.get(type_JsonService)); injectMethodBuilder.addStatement(\"$T substitute = ($T)target\", ClassName.get(parent), ClassName.get(parent)); ```</p> <p>\u4ee5\u4e0a\u751f\u6210\u7684\u6587\u4ef6\u5982\u4e0b\uff1a</p> <p>```java // \u5b9a\u4e49\u7684\u7c7b package packageName;</p> <p>import com.alibaba.android.arouter.facade.service.SerializationService;</p> <p>public class \u7c7b\u540d$$ARouter$$Autowired implement ISyringe {     private SerializationService serializationService; }</p> <p>// \u5b9a\u4e49\u7684\u65b9\u6cd5 @Override public void inject(Object target) {     serializationService = ARouter.getInstance().navigation(SerializationService.class);     \u7c7b\u540d substitute = (\u7c7b\u540d)target; } ```</p> <li> <p>\u751f\u6210<code>inject()</code>\u7684\u4e3b\u4f53</p> <p></p> <ul> <li>\u751f\u6210Provider\u7684\u6210\u5458\u5c5e\u6027</li> </ul> <p>```java   if (\"\".equals(fieldConfig.name())) {    // User has not set service path, then use byType.</p> <pre><code>// Getter\ninjectMethodBuilder.addStatement(\n  \"substitute.\" + fieldName + \" = $T.getInstance().navigation($T.class)\",\n  ARouterClass,\n  ClassName.get(element.asType())\n);\n</code></pre> <p>} else {    // use byName     // Getter     injectMethodBuilder.addStatement(       \"substitute.\" + fieldName + \" = ($T)$T.getInstance().build($S).navigation()\",       ClassName.get(element.asType()),       ARouterClass,       fieldConfig.name()     );   }</p> <p>// Validator   if (fieldConfig.required()) {     injectMethodBuilder.beginControlFlow(\"if (substitute.\" + fieldName + \" == null)\");     injectMethodBuilder.addStatement(       \"throw new RuntimeException(\\\"The field '\" + fieldName + \"' is null, in class '\\\" + $T.class.getName() + \\\"!\\\")\", ClassName.get(parent));     injectMethodBuilder.endControlFlow();   }   ```</p> <p>\u4ee5\u4e0a\u4ee3\u7801\u751f\u6210\u4ee5\u4e0b\u4e24\u79cd\u7ed3\u679c\uff1a</p> <p><code>java   //ByType   substitute.helloService = ARouter.getInstance().navigation(HelloService.class);   //ByName   substitute.helloService2 =(HelloService)ARouter.getInstance().build(\"/yourservicegroupname/hello\").navigation();</code></p> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u4f1a\u5224\u65ad\u662f\u5426\u662f\u5fc5\u987b\u7684\uff0c\u5373<code>required()</code>\u662f\u4e0d\u662f\u4e3atrue,\u82e5\u4e3aTrue\uff0c\u4f1a\u5224\u65ad\u662f\u5426\u4e3anull\u3002</p> <ul> <li>\u751f\u6210\u666e\u901a\u7c7b\u578b\u7684\u6210\u5458\u5c5e\u6027</li> </ul> <p><code>java   String originalValue = \"substitute.\" + fieldName;   String statement = \"substitute.\" + fieldName + \" = \" + buildCastCode(element) + \"substitute.\";   boolean isActivity = false;   if (types.isSubtype(parent.asType(), activityTm)) {  // Activity, then use getIntent()     isActivity = true;     statement += \"getIntent().\";   } else if (types.isSubtype(parent.asType(), fragmentTm) || types.isSubtype(parent.asType(), fragmentTmV4)) {   // Fragment, then use getArguments()     statement += \"getArguments().\";   } else {     throw new IllegalAccessException(\"The field [\" + fieldName + \"] need autowired from intent, its parent must be activity or fragment!\");   }</code></p> <p>\u5224\u65ad\u7c7b\u578b\uff1a</p> <p>\u5982\u679c\u662f<code>Activity</code>,\u4f7f\u7528<code>getIntent()</code>;\u5982\u679c\u662f<code>Fragment</code>,\u4f7f\u7528<code>getArguments</code>\u3002</p> <ul> <li> <p>\u57fa\u672c\u6570\u636e\u7c7b\u578b\u3001String\u3001Serializabl\u3001Parcelable\uff0c\u76f4\u63a5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\uff1a</p> <p><code>java   getBooleanExtra()   getByteExtra()   getShortExtra()   getIntExtra()   getLongExtra()   getCharExtra()   getFloatExtra()   getDoubleExtra()   getString()   getSerializableExtra()   getParcelableExtra()</code></p> </li> <li> <p>\u5982\u679c\u662fObject</p> <p>\u4f1a\u5c06\u5176\u8f6c\u6362\u4e3ajson\u8f6c\u6362\u4e3aobject.</p> <p><code>java if (null != serializationService) {   substitute.obj = serializationService.parseObject(substitute.getIntent().getStringExtra(\"obj\"), new com.alibaba.android.arouter.facade.model.TypeWrapper&lt;TestObj&gt;(){}.getType()); } else {   Log.e(\"ARouter::\", \"You want automatic inject the field 'obj' in class 'Test1Activity' , then you should implement 'SerializationService' to support object auto inject!\"); }</code></p> </li> <li> <p>\u5224\u65ad<code>required</code>\u662f\u4e0d\u662f\u4e3atrue,\u82e5\u4e3atrue\uff0c\u4f1a\u5224\u65ad\u662f\u5426\u4e3anull.</p> <p><code>java if (fieldConfig.required() &amp;&amp; !element.asType().getKind().isPrimitive()) {  // Primitive wont be check.   injectMethodBuilder.beginControlFlow(\"if (null == substitute.\" + fieldName + \")\");   injectMethodBuilder.addStatement(     \"$T.e(\\\"\" + Consts.TAG + \"\\\", \\\"The field '\" + fieldName + \"' is null, in class '\\\" + $T.class.getName() + \\\"!\\\")\", AndroidLog, ClassName.get(parent));   injectMethodBuilder.endControlFlow(); }</code></p> </li> </ul> </li> <li> <p>\u6700\u540e\u751f\u6210\u7c7b\u4f3c\u5982\u4e0b\u7684Java\u7c7b</p> <p>```java /*  * DO NOT EDIT THIS FILE!!! IT WAS GENERATED BY AROUTER. / public class Test1Activity$$ARouter$$Autowired implements ISyringe {   private SerializationService serializationService;</p> <p>@Override   public void inject(Object target) {     serializationService = ARouter.getInstance().navigation(SerializationService.class);     Test1Activity substitute = (Test1Activity)target;     substitute.age = substitute.getIntent().getIntExtra(\"age\", substitute.age);     substitute.height = substitute.getIntent().getIntExtra(\"height\", substitute.height);     substitute.girl = substitute.getIntent().getBooleanExtra(\"boy\", substitute.girl);     substitute.ch = substitute.getIntent().getCharExtra(\"ch\", substitute.ch);     substitute.fl = substitute.getIntent().getFloatExtra(\"fl\", substitute.fl);     substitute.dou = substitute.getIntent().getDoubleExtra(\"dou\", substitute.dou);     substitute.ser = (com.alibaba.android.arouter.demo.service.model.TestSerializable) substitute.getIntent().getSerializableExtra(\"ser\");     substitute.pac = substitute.getIntent().getParcelableExtra(\"pac\");     if (null != serializationService) {       substitute.obj = serializationService.parseObject(substitute.getIntent().getStringExtra(\"obj\"), new com.alibaba.android.arouter.facade.model.TypeWrapper(){}.getType());     } else {       Log.e(\"ARouter::\", \"You want automatic inject the field 'obj' in class 'Test1Activity' , then you should implement 'SerializationService' to support object auto inject!\");     }     if (null != serializationService) {       substitute.objList = serializationService.parseObject(substitute.getIntent().getStringExtra(\"objList\"), new com.alibaba.android.arouter.facade.model.TypeWrapper&gt;(){}.getType());     } else {       Log.e(\"ARouter::\", \"You want automatic inject the field 'objList' in class 'Test1Activity' , then you should implement 'SerializationService' to support object auto inject!\");     }     if (null != serializationService) {       substitute.map = serializationService.parseObject(substitute.getIntent().getStringExtra(\"map\"), new com.alibaba.android.arouter.facade.model.TypeWrapper&gt;&gt;(){}.getType());     } else {       Log.e(\"ARouter::\", \"You want automatic inject the field 'map' in class 'Test1Activity' , then you should implement 'SerializationService' to support object auto inject!\");     }     substitute.url = substitute.getIntent().getExtras() == null ? substitute.url : substitute.getIntent().getExtras().getString(\"url\", substitute.url);     substitute.helloService = ARouter.getInstance().navigation(HelloService.class);     substitute.helloService2 = (HelloService)ARouter.getInstance().build(\"/yourservicegroupname/hello\").navigation();   } } <p>```</p> <li> <p>\u6700\u540e\u751f\u6210\u7684Java\u6587\u4ef6\u4f1a\u5728\u521d\u59cb\u5316\u65f6<code>ARouter.getInstance().inject(this)</code>\u8fdb\u884c\u8c03\u7528</p> </li> <p>\u603b\u7ed3\u4ee5\u4e0a\u7684\u6d41\u7a0b\uff1a</p> <p></p>"},{"location":"Android/%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/#25","title":"2.5 \u8def\u7531\u540d\u79f0\u91cd\u590d\u7684\u95ee\u9898","text":"<ul> <li>\u76f8\u540c\u6a21\u5757\u4e0b\uff0cActivity/Fragment\u8def\u7531\u540d\u79f0\u76f8\u540c\uff0c\u540e\u8005\u4f1a\u8986\u76d6\u524d\u8005</li> </ul>"},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/","title":"\u81ea\u5b9a\u4e49View","text":""},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#1","title":"1\u3001\u57fa\u7840\u6982\u5ff5","text":"<p>View\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9\uff0c\u5f80\u53f3\u4e3ax+\u8f74\uff0c\u5f80\u4e0b\u4e3ay+\u8f74\u3002</p> <p></p> <ul> <li>getTop()\uff1b\u83b7\u53d6View\u5230\u5176\u7236\u5e03\u5c40\u9876\u8fb9\u7684\u8ddd\u79bb\u3002</li> <li>getLeft()\uff1b\u83b7\u53d6View\u5230\u5176\u7236\u5e03\u5c40\u5de6\u8fb9\u7684\u8ddd\u79bb\u3002</li> <li>getBottom()\uff1b\u83b7\u53d6View\u5230\u5176\u7236\u5e03\u5c40\u9876\u8fb9\u7684\u8ddd\u79bb\u3002</li> <li>getRight()\uff1b\u83b7\u53d6View\u5230\u5176\u7236\u5e03\u5c40\u5de6\u8fb9\u7684\u8ddd\u79bb\u3002</li> <li>getX();\u89e6\u6478\u70b9\u5728View\u7684X\u5750\u6807</li> <li>getY();;\u89e6\u6478\u70b9\u5728View\u7684Y\u5750\u6807</li> <li>getRawX;\u89e6\u6478\u70b9\u5728\u5c4f\u5e55\u7684X\u5750\u6807</li> <li> <p>getRawY;\u89e6\u6478\u70b9\u5728\u5c4f\u5e55\u7684Y\u5750\u6807</p> </li> <li> </li> </ul> \u7c7b\u578b \u5b9a\u4e49 \u4f7f\u7528\u573a\u666f \u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6 \u591a\u4e2a\u63a7\u4ef6\u7ec4\u5408\u6210\u4e3a\u4e00\u4e2a\u65b0\u7684\u63a7\u4ef6\uff0c\u65b9\u4fbf\u591a\u5904\u590d\u7528 \u5982TitleBar \u7ee7\u627f\u7cfb\u7edfView\u63a7\u4ef6 \u7ee7\u627f\u81eaTextView\u7b49\u7cfb\u7edf\u63a7\u4ef6\uff0c\u5728\u7cfb\u7edf\u63a7\u4ef6\u7684\u57fa\u7840\u529f\u80fd\u4e0a\u8fdb\u884c\u6269\u5c55 \u5bf9\u5e38\u7528\u7684\u7cfb\u7edf\u63a7\u4ef6\u4f5c\u81ea\u5b9a\u4e49\u6269\u5c55 \u7ee7\u627f\u7cfb\u7edfViewGroup\u63a7\u4ef6 \u7ee7\u627f\u81eaLinearLayout\u7b49\u7cfb\u7edf\u63a7\u4ef6\uff0c\u5728\u7cfb\u7edf\u63a7\u4ef6\u7684\u57fa\u7840\u529f\u80fd\u4e0a\u8fdb\u884c\u6269\u5c55 \u5bf9\u5e38\u7528\u5e03\u5c40\u8fdb\u884c\u6269\u5c55 \u76f4\u63a5\u7ee7\u627fView \u4e0d\u590d\u7528\u7cfb\u7edf\u63a7\u4ef6\uff0c\u7ee7\u627fView\u8fdb\u884c\u529f\u80fd\u5b9a\u4e49 \u81ea\u5b9a\u4e49View \u76f4\u63a5\u7ee7\u627fViewGroup \u4e0d\u590d\u7528\u7cfb\u7edf\u63a7\u4ef6\uff0c\u7ee7\u627fViewGroup\u8fdb\u884c\u65b0\u7684\u5e03\u5c40 \u81ea\u5b9a\u4e49ViewGroup <ul> <li> </li> </ul> <p><code>java   public class TestView extends View {       /**        * \u5728java\u4ee3\u7801\u91ccnew\u7684\u65f6\u5019\u4f1a\u7528\u5230        * @param context        */       public TestView(Context context) {           super(context);       }       /**        * \u5728xml\u5e03\u5c40\u6587\u4ef6\u4e2d\u4f7f\u7528\u65f6\u81ea\u52a8\u8c03\u7528        * @param context        */       public TestView(Context context, @Nullable AttributeSet attrs) {           super(context, attrs);       }       /**        * \u4e0d\u4f1a\u81ea\u52a8\u8c03\u7528\uff0c\u5982\u679c\u6709\u9ed8\u8ba4style\u65f6\uff0c\u5728\u7b2c\u4e8c\u4e2a\u6784\u9020\u51fd\u6570\u4e2d\u8c03\u7528        * @param context        * @param attrs        * @param defStyleAttr        */       public TestView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {           super(context, attrs, defStyleAttr);       }       /**        * \u53ea\u6709\u5728API\u7248\u672c&gt;21\u65f6\u624d\u4f1a\u7528\u5230        * \u4e0d\u4f1a\u81ea\u52a8\u8c03\u7528\uff0c\u5982\u679c\u6709\u9ed8\u8ba4style\u65f6\uff0c\u5728\u7b2c\u4e8c\u4e2a\u6784\u9020\u51fd\u6570\u4e2d\u8c03\u7528        * @param context        * @param attrs        * @param defStyleAttr        * @param defStyleRes        */       @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)       public TestView(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {           super(context, attrs, defStyleAttr, defStyleRes);       }   }</code></p> <p>\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u8981\u5b9e\u73b0\u6240\u6709\u7684\u6784\u9020\u51fd\u6570\u3002</p> <ul> <li>\u7b2c\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff1a\u521d\u59cb\u5316\u65f6\u4f1a\u81ea\u52a8\u8c03\u7528</li> <li>\u7b2c\u4e8c\u4e2a\u6784\u9020\u51fd\u6570\uff1axml\u81ea\u5b9a\u4e49\u65f6\u4f1a\u8c03\u7528</li> <li> <p>\u7b2c\u4e09\u4e2a\u3001\u7b2c\u56db\u4e2a\u6784\u9020\u51fd\u6570\uff1a\u4e0d\u4f1a\u81ea\u52a8\u8c03\u7528\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u7b2c\u4e8c\u4e2a\u6784\u9020\u51fd\u6570this\u8c03\u7528</p> </li> <li> </li> </ul> <p>\u81ea\u5b9a\u4e49\u5c5e\u6027\u662f\u5728\u81ea\u5b9a\u4e49View\u65f6\u5fc5\u987b\u7684\u7ec4\u6210\u6210\u5206\uff0c\u6211\u4eec\u5e73\u65f6\u6240\u5199\u7684<code>android:XXXXX</code>\u662f\u63a7\u4ef6\u81ea\u5e26\u7684\u7cfb\u7edf\u5c5e\u6027\uff0c\u672c\u8d28\u4e0a\u662f\u7cfb\u7edf\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\uff0c\u5982\u679c\u6211\u4eec\u60f3\u81ea\u5df1\u5199\u7684\u81ea\u5b9a\u4e49View\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u6837\u7684\u5f62\u5f0f\uff0c\u6dfb\u52a0\u4e00\u4e9b\u529f\u80fd\u516c\u4f11\uff0c\u81ea\u5b9a\u4e49\u5c5e\u6027\u53ef\u4ee5\u5b8c\u6210\u8fd9\u4e9b\u60f3\u6cd5\u3002</p> <p>\u81ea\u5b9a\u4e49\u5c5e\u6027\u5b9e\u73b0\u6b65\u9aa4\uff1a</p> <ul> <li>\u81ea\u5b9a\u4e49\u4e00\u4e2aView </li> <li>\u7f16\u5199values/attrs.xml\uff0c\u5728\u5176\u4e2d\u7f16\u5199styleable\u548citem\u7b49\u6807\u7b7e\u5143\u7d20</li> <li>\u5728View\u7684\u6784\u9020\u65b9\u6cd5\u4e2d\u901a\u8fc7TypedArray\u83b7\u53d6</li> <li>\u5728View\u4e2d\u5904\u7406\u83b7\u53d6\u5230\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027</li> <li>\u5728\u5e03\u5c40\u6587\u4ef6\u4e2dView\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\uff08\u6ce8\u610fnamespace\uff09</li> </ul> <p>\u5b9e\u4f8b\u8bf4\u660e\uff1a</p> <ul> <li>\u81ea\u5b9a\u4e49View</li> </ul> <p><code>java    public class MyTextView extends View</code></p> <ul> <li>\u7f16\u5199attrs.xml\u6587\u4ef6</li> </ul> <p>```java    </p> <pre><code>  &lt;resources&gt;\n      &lt;declare-styleable name=\"test\"&gt;\n          &lt;attr name=\"text\" format=\"string\" /&gt;\n          &lt;attr name=\"testAttr\" format=\"integer\" /&gt;\n      &lt;/declare-styleable&gt;\n  &lt;/resources&gt;\n</code></pre> <p>```</p> <ul> <li>\u5728View\u7684\u6784\u9020\u51fd\u6570\u83b7\u53d6\u5e76\u5904\u7406</li> </ul> <p>```java   public class MyTextView extends View {       private static final String TAG = MyTextView.class.getSimpleName();</p> <pre><code>  //\u5728View\u7684\u6784\u9020\u65b9\u6cd5\u4e2d\u901a\u8fc7TypedArray\u83b7\u53d6\n  public MyTextView(Context context, AttributeSet attrs) {\n      super(context, attrs);\n      TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.test);\n      String text = ta.getString(R.styleable.test_testAttr);\n      int textAttr = ta.getInteger(R.styleable.test_text, -1);\n      Log.e(TAG, \"text = \" + text + \" , textAttr = \" + textAttr);\n      ta.recycle();\n  }\n</code></pre> <p>}   ```</p> <ul> <li> <p>\u5728\u5e03\u5c40\u4e2d\u4f7f\u7528</p> <ul> <li>\u547d\u540d\u7a7a\u95f4\u7684\u5b9e\u73b0</li> </ul> <p><code>xml //1\u3001\u81ea\u5b9a\u4e49\u547d\u540d\u7a7a\u95f4\uff08\u6211\u81ea\u5df1\u672a\u5b9e\u73b0\uff09 xmlns:XXX=\"http://schemas.android.com/apk/res/com.example.test\" //2\u3001\u81ea\u5b9a\u4e49\u547d\u540d\u7a7a\u95f4 xmlns:XXX=\"http://schemas.android.com/apk/res-auto\" //\u4e8c\u9009\u4e00\u5373\u53ef</code></p> </li> </ul> <p>```xml    <pre><code>  &lt;com.example.test.MyTextView\n      android:layout_width=\"100dp\"\n      android:layout_height=\"200dp\"\n      app:testAttr=\"520\"\n      app:text=\"helloworld\" /&gt;\n</code></pre> <p>   ```</p> <ul> <li> <p>\u5e38\u7528\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027Format</p> <ul> <li> <p>reference:\u53c2\u8003\u67d0\u4e00\u5c5e\u6027\u7684ID</p> </li> <li> <p>color:\u989c\u8272\u503c</p> </li> <li> <p>boolean: bool\u503c</p> </li> <li> <p>dimension\uff1a\u5c3a\u5bf8\u503c</p> </li> <li> <p>float:\u6d6e\u70b9\u503c</p> </li> <li> <p>Integar:\u6574\u5f62\u503c</p> </li> <li> <p>string:\u5b57\u7b26\u4e32</p> </li> <li> <p>fraction\uff1a\u767e\u5206\u6570</p> </li> <li> <p>enum:\u679a\u4e3e \uff1a\u679a\u4e3e\u7c7b\u578b\u53ea\u80fd\u4f7f\u7528\u4e00\u4e2a\uff0c\u4e0d\u80fd\u540c\u65f6\u4f7f\u7528\u4e00\u4e2a</p> </li> </ul> <p>\u5c5e\u6027\u5b9a\u4e49\uff1a</p> <p><code>xml   &lt;declare-styleable name=\"\u540d\u79f0\"&gt;       &lt;attr name=\"orientation\"&gt;           &lt;enum name=\"horizontal\" value=\"0\" /&gt;           &lt;enum name=\"vertical\" value=\"1\" /&gt;       &lt;/attr&gt;   &lt;/declare-styleable&gt;</code></p> <p>\u5c5e\u6027\u4f7f\u7528\uff1a</p> <p><code>xml   &lt;LinearLayout         android:orientation = \"vertical\"&gt;   &lt;/LinearLayout&gt;</code></p> <ul> <li>flag\uff1a\u4f4d\u6216\u8fd0\u7b97 \uff1a\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u591a\u4e2a</li> </ul> <p>\u5c5e\u6027\u5b9a\u4e49\uff1a</p> <p><code>xml   &lt;declare-styleable name=\"\u540d\u79f0\"&gt;       &lt;attr name=\"gravity\"&gt;               &lt;flag name=\"top\" value=\"0x01\" /&gt;               &lt;flag name=\"bottom\" value=\"0x02\" /&gt;               &lt;flag name=\"left\" value=\"0x04\" /&gt;               &lt;flag name=\"right\" value=\"0x08\" /&gt;               &lt;flag name=\"center_vertical\" value=\"0x16\" /&gt;               ...       &lt;/attr&gt;   &lt;/declare-styleable&gt;</code></p> <p>\u5c5e\u6027\u4f7f\u7528\uff1a</p> <p><code>xml   &lt;TextView android:gravity=\"bottom|left\"/&gt;</code></p> <ul> <li>\u6df7\u5408\u7c7b\u578b\uff1a\u5c5e\u6027\u5b9a\u4e49\u65f6\u53ef\u4ee5\u6307\u5b9a\u591a\u79cd\u7c7b\u578b\u503c</li> </ul> <p>\u5c5e\u6027\u5b9a\u4e49\uff1a</p> <p><code>xml   &lt;declare-styleable name = \"\u540d\u79f0\"&gt;        &lt;attr name = \"background\" format = \"reference|color\" /&gt;   &lt;/declare-styleable&gt;</code></p> <p>\u5c5e\u6027\u4f7f\u7528\uff1a</p> <p><code>xml   &lt;ImageView   android:background = \"@drawable/\u56fe\u7247ID\" /&gt;   \u6216\u8005\uff1a   &lt;ImageView   android:background = \"#00FF00\" /&gt;</code></p> </li> </ul>"},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#_1","title":"\u5750\u6807\u7cfb","text":""},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#_2","title":"\u83b7\u53d6\u5750\u6807\u7cfb\u7684\u51fd\u6570","text":""},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#view_1","title":"\u81ea\u5b9a\u4e49View\u7684\u7c7b\u578b","text":""},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#_3","title":"\u6784\u9020\u51fd\u6570","text":""},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#_4","title":"\u81ea\u5b9a\u4e49\u5c5e\u6027","text":""},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#2view","title":"2\u3001View\u7684\u7ed8\u5236\u6d41\u7a0b","text":"\u51fd\u6570 \u4f5c\u7528 \u76f8\u5173\u51fd\u6570 onMeasure() \u6d4b\u91cfView\u7684\u5bbd\u9ad8 setMeasuredDimension()\u3001getDefaultSize()\u3001getSuggestedMinimumHeight() onLayout() \u8ba1\u7b97\u5f53\u524dView\u4ee5\u53ca\u5b50View\u7684\u4f4d\u7f6e layout(),onLayout(),setFrame() onDraw() \u89c6\u56fe\u7684\u7ed8\u5236\u5de5\u4f5c draw()\uff0conDraw() <ul> <li> <p>MeasureSpec:\u662f<code>View</code>\u7684\u5185\u90e8\u7c7b\uff0c\u5c01\u88c5\u4e86\u4ece\u7236\u5e03\u5c40\u4f20\u7ed9\u5b50View\u7684\u5c3a\u5bf8\uff0c\u5728onMeasure()\u4e2d\u4f1a\u6839\u636eMeasureSpec\u7684\u503c\u6765\u786e\u5b9a\u5bbd\u9ad8\u3002</p> <p>MeasureSpec\u662f\u4e00\u4e2aInt\u503c(32\u4f4d)\uff0c\u524d\u4e24\u4f4d\u662f\u6a21\u5f0fmode\uff0c\u540e\u9762\u7684\u662f\u5927\u5c0fsize\u3002</p> Mode \u4f5c\u7528 EXACTLY \u7cbe\u51c6\u6a21\u5f0f\uff0cView\u9700\u8981\u4e00\u4e2a\u7cbe\u786e\u503c\uff0c\u8fd9\u4e2a\u503c\u5373\u4e3aMeasureSpec\u5f53\u4e2d\u7684Size AT_MOST \u6700\u5927\u6a21\u5f0f\uff0cView\u7684\u5c3a\u5bf8\u6709\u4e00\u4e2a\u6700\u5927\u503c\uff0cView\u4e0d\u53ef\u4ee5\u8d85\u8fc7MeasureSpec\u5f53\u4e2d\u7684Size\u503c UNSPECIFIED \u65e0\u9650\u5236\uff0cView\u5bf9\u5c3a\u5bf8\u6ca1\u6709\u4efb\u4f55\u9650\u5236\uff0cView\u8bbe\u7f6e\u4e3a\u591a\u5927\u5c31\u5e94\u5f53\u4e3a\u591a\u5927 <p>MeasureSpec\u7684\u4f7f\u7528\u65b9\u5f0f\u548c\u6e90\u7801(\u5728ViewGroup#getChildMeasureSpec)</p> <p>```java public static int getChildMeasureSpec(int spec, int padding, int childDimension) {         int specMode = MeasureSpec.getMode(spec);         int specSize = MeasureSpec.getSize(spec);</p> <pre><code>    int size = Math.max(0, specSize - padding);\n\n    int resultSize = 0;\n    int resultMode = 0;\n\n    switch (specMode) {\n    //\u5f53\u7236View\u8981\u6c42\u4e00\u4e2a\u7cbe\u786e\u503c\u65f6\uff0c\u4e3a\u5b50View\u8d4b\u503c\n    case MeasureSpec.EXACTLY:\n        //\u5982\u679c\u5b50view\u6709\u81ea\u5df1\u7684\u5c3a\u5bf8\uff0c\u5219\u4f7f\u7528\u81ea\u5df1\u7684\u5c3a\u5bf8\n        if (childDimension &gt;= 0) {\n            resultSize = childDimension;\n            resultMode = MeasureSpec.EXACTLY;\n            //\u5f53\u5b50View\u662fmatch_parent,\u5c06\u7236View\u7684\u5927\u5c0f\u8d4b\u503c\u7ed9\u5b50View\n        } else if (childDimension == LayoutParams.MATCH_PARENT) {\n            resultSize = size;\n            resultMode = MeasureSpec.EXACTLY;\n            //\u5982\u679c\u5b50View\u662fwrap_content\uff0c\u8bbe\u7f6e\u5b50View\u7684\u6700\u5927\u5c3a\u5bf8\u4e3a\u7236View\n        } else if (childDimension == LayoutParams.WRAP_CONTENT) {\n            resultSize = size;\n            resultMode = MeasureSpec.AT_MOST;\n        }\n        break;\n\n    // \u7236\u5e03\u5c40\u7ed9\u5b50View\u4e86\u4e00\u4e2a\u6700\u5927\u754c\u9650\n    case MeasureSpec.AT_MOST:\n        if (childDimension &gt;= 0) {\n            //\u5982\u679c\u5b50view\u6709\u81ea\u5df1\u7684\u5c3a\u5bf8\uff0c\u5219\u4f7f\u7528\u81ea\u5df1\u7684\u5c3a\u5bf8\n            resultSize = childDimension;\n            resultMode = MeasureSpec.EXACTLY;\n        } else if (childDimension == LayoutParams.MATCH_PARENT) {\n            // \u7236View\u7684\u5c3a\u5bf8\u4e3a\u5b50View\u7684\u6700\u5927\u5c3a\u5bf8\n            resultSize = size;\n            resultMode = MeasureSpec.AT_MOST;\n        } else if (childDimension == LayoutParams.WRAP_CONTENT) {\n            //\u7236View\u7684\u5c3a\u5bf8\u4e3a\u5b50View\u7684\u6700\u5927\u5c3a\u5bf8\n            resultSize = size;\n            resultMode = MeasureSpec.AT_MOST;\n        }\n        break;\n\n    // \u7236\u5e03\u5c40\u5bf9\u5b50View\u6ca1\u6709\u505a\u4efb\u4f55\u9650\u5236\n    case MeasureSpec.UNSPECIFIED:\n        if (childDimension &gt;= 0) {\n        //\u5982\u679c\u5b50view\u6709\u81ea\u5df1\u7684\u5c3a\u5bf8\uff0c\u5219\u4f7f\u7528\u81ea\u5df1\u7684\u5c3a\u5bf8\n            resultSize = childDimension;\n            resultMode = MeasureSpec.EXACTLY;\n        } else if (childDimension == LayoutParams.MATCH_PARENT) {\n            //\u56e0\u7236\u5e03\u5c40\u6ca1\u6709\u5bf9\u5b50View\u505a\u51fa\u9650\u5236\uff0c\u5f53\u5b50View\u4e3aMATCH_PARENT\u65f6\u5219\u5927\u5c0f\u4e3a0\n            resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size;\n            resultMode = MeasureSpec.UNSPECIFIED;\n        } else if (childDimension == LayoutParams.WRAP_CONTENT) {\n            //\u56e0\u7236\u5e03\u5c40\u6ca1\u6709\u5bf9\u5b50View\u505a\u51fa\u9650\u5236\uff0c\u5f53\u5b50View\u4e3aWRAP_CONTENT\u65f6\u5219\u5927\u5c0f\u4e3a0\n            resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size;\n            resultMode = MeasureSpec.UNSPECIFIED;\n        }\n        break;\n    }\n\n    return MeasureSpec.makeMeasureSpec(resultSize, resultMode);\n}\n</code></pre> <p>```</p> \u7236View \u5b50View EXACTLY \u7236\u5e03\u5c40\u91c7\u7528\u7cbe\u51c6\u6a21\u5f0f\uff0c\u6709\u786e\u5207\u7684\u5927\u5c0f\uff0c\u5982\u679c\u6709\u5927\u5c0f\u5219\u76f4\u63a5\u4f7f\u7528\uff0c\u5982\u679c\u5b50View\u6ca1\u6709\u5927\u5c0f\uff0c\u5b50View\u4e0d\u5f97\u8d85\u51fa\u7236view\u7684\u5927\u5c0f\u8303\u56f4 AT_MOST \u7236\u5e03\u5c40\u91c7\u7528\u6700\u5927\u6a21\u5f0f\uff0c\u5b58\u5728\u786e\u5207\u7684\u5927\u5c0f\uff0c\u5982\u679c\u6709\u5927\u5c0f\u5219\u76f4\u63a5\u4f7f\u7528\uff0c\u5982\u679c\u5b50View\u6ca1\u6709\u5927\u5c0f\uff0c\u5b50View\u4e0d\u5f97\u8d85\u51fa\u7236view\u7684\u5927\u5c0f\u8303\u56f4 UNSPECIFIED \u7236\u5e03\u5c40\u6ca1\u6709\u505a\u51fa\u9650\u5236\uff0c\u5b50View\u6709\u81ea\u5df1\u7684\u5c3a\u5bf8\uff0c\u5219\u4f7f\u7528\uff0c\u5982\u679c\u6ca1\u6709\u5219\u4e3a0 <p>View \u7684 MeasureSpec \u5e76\u4e0d\u662f\u7236 View \u72ec\u81ea\u51b3\u5b9a\uff0c\u5b83\u662f\u6839\u636e\u7236 view \u7684MeasureSpec\u52a0\u4e0a\u5b50 View \u7684\u81ea\u5df1\u7684 LayoutParams\uff0c\u901a\u8fc7\u76f8\u5e94\u7684\u89c4\u5219\u8f6c\u5316\u3002</p> </li> <li> <p>OnMeasure()\u6e90\u7801</p> <p>```java protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {</p> <pre><code>    setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec),\n            getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));\n}\n</code></pre> <p>```</p> <p>\u4ece\u6e90\u7801\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u4f7f\u7528\u4e86\u4ee5\u4e0b\u4e09\u4e2a\u65b9\u6cd5\uff1a</p> <ul> <li>setMeasuredDimension(int measuredWidth, int measuredHeight)</li> </ul> <p>\u8be5\u65b9\u6cd5\u7528\u6765\u8bbe\u7f6eView\u7684\u5bbd\u9ad8\uff0c\u5728\u81ea\u5b9a\u4e49View\u65f6\u4f1a\u7ecf\u5e38\u7528\u5230</p> <ul> <li>getDefaultSize(int size, int measureSpec)</li> </ul> <p>\u8be5\u65b9\u6cd5\u7528\u6765\u83b7\u53d6View\u9ed8\u8ba4\u7684\u5bbd\u9ad8</p> <p><code>``java   /**   *   \u6709\u4e24\u4e2a\u53c2\u6570size\u548cmeasureSpec   *   1\u3001size\u8868\u793aView\u7684\u9ed8\u8ba4\u5927\u5c0f\uff0c\u5b83\u7684\u503c\u662f\u901a\u8fc7</code>getSuggestedMinimumWidth()\u65b9\u6cd5\u6765\u83b7\u53d6\u7684\uff0c\u4e4b\u540e\u6211\u4eec\u518d\u5206\u6790\u3002   *   2\u3001measureSpec\u5219\u662f\u6211\u4eec\u4e4b\u524d\u5206\u6790\u7684MeasureSpec\uff0c\u91cc\u9762\u5b58\u50a8\u4e86View\u7684\u6d4b\u91cf\u503c\u4ee5\u53ca\u6d4b\u91cf\u6a21\u5f0f   */   public static int getDefaultSize(int size, int measureSpec) {           int result = size;           int specMode = MeasureSpec.getMode(measureSpec);           int specSize = MeasureSpec.getSize(measureSpec);</p> <pre><code>      //\u4ece\u8fd9\u91cc\u6211\u4eec\u770b\u51fa\uff0c\u5bf9\u4e8eAT_MOST\u548cEXACTLY\u5728View\u5f53\u4e2d\u7684\u5904\u7406\u662f\u5b8c\u5168\u76f8\u540c\u7684\u3002\u6240\u4ee5\u5728\u6211\u4eec\u81ea\u5b9a\u4e49View\u65f6\u8981\u5bf9\u8fd9\u4e24\u79cd\u6a21\u5f0f\u505a\u51fa\u5904\u7406\u3002\n      switch (specMode) {\n      case MeasureSpec.UNSPECIFIED:\n          result = size;\n          break;\n      case MeasureSpec.AT_MOST:\n      case MeasureSpec.EXACTLY:\n          result = specSize;\n          break;\n      }\n      return result;\n  }\n</code></pre> <p>```</p> <ul> <li>getSuggestedMinimumWidth() \u3001getSuggestedMinimumHeight()</li> </ul> <p>\u8be5\u65b9\u6cd5\u83b7\u53d6View \u5bbd\u548c\u9ad8\u9ed8\u8ba4\u5927\u5c0f\u7684\u8f83\u5927\u503c</p> <p><code>java   //\u5f53View\u6ca1\u6709\u8bbe\u7f6e\u80cc\u666f\u65f6\uff0c\u9ed8\u8ba4\u5927\u5c0f\u5c31\u662fmMinWidth\uff0c\u8fd9\u4e2a\u503c\u5bf9\u5e94Android:minWidth\u5c5e\u6027\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u65f6\u9ed8\u8ba4\u4e3a0.   //\u5982\u679c\u6709\u8bbe\u7f6e\u80cc\u666f\uff0c\u5219\u9ed8\u8ba4\u5927\u5c0f\u4e3amMinWidth\u548cmBackground.getMinimumWidth()\u5f53\u4e2d\u7684\u8f83\u5927\u503c\u3002   protected int getSuggestedMinimumWidth() {           return (mBackground == null) ? mMinWidth : max(mMinWidth, mBackground.getMinimumWidth());       }</code></p> <p>\u540c\u65f6\uff0c\u6ce8\u610f<code>ViewGroup</code>\u548c<code>View</code>\u7684\u6d4b\u91cf\u6709\u533a\u522b\uff0cViewGroup\u672a\u91cd\u5199onMeasure()\u65b9\u6cd5\uff1a\u539f\u56e0\uff1a\u4e0d\u540c\u7684\u5e03\u5c40\u6709\u4e0d\u540c\u7684\u6d4b\u91cf\u5b50View\u7684\u65b9\u6cd5\uff0c\u65e0\u6cd5\u7edf\u4e00\u8bbe\u7f6e\u3002\u4f46\u662f\u5b83\u63d0\u4f9b\u4e86\u6d4b\u91cf\u5b50View \u7684\u65b9\u6cd5<code>measureChildren()</code>\u548c<code>measureChild()</code>\u65b9\u6cd5</p> <ul> <li>measureChildren(int widthMeasureSpec, int heightMeasureSpec)</li> </ul> <p>\u8be5\u65b9\u6cd5\u5faa\u73af\u6d4b\u91cfViewGroup\u7684\u5b50View</p> <p><code>java    protected void measureChildren(int widthMeasureSpec, int heightMeasureSpec) {           final int size = mChildrenCount;           final View[] children = mChildren;           for (int i = 0; i &lt; size; ++i) {               final View child = children[i];               //\u663e\u793a\u7684View\u5927\u5c0f\u90fd\u8fdb\u884c\u6d4b\u91cf               if ((child.mViewFlags &amp; VISIBILITY_MASK) != GONE) {                   measureChild(child, widthMeasureSpec, heightMeasureSpec);               }           }       }</code></p> <ul> <li>measureChild(View child, int parentWidthMeasureSpec,int parentHeightMeasureSpec)</li> </ul> <p>\u8be5\u65b9\u6cd5\u786e\u5b9aView\u7684\u5e03\u5c40\u540e\uff0c\u83b7\u5f97MeasureSpec,\u7136\u540e\u8c03\u7528View\u7684onMeasure()\u65b9\u6cd5\u3002</p> <p>```java   final LayoutParams lp = child.getLayoutParams();</p> <p>final int childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec,                                                         mPaddingLeft + mPaddingRight, lp.width);   final int childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec,                                                          mPaddingTop + mPaddingBottom, lp.height);</p> <p>child.measure(childWidthMeasureSpec, childHeightMeasureSpec);   ```</p> <p>OnMeasure\u4e0e\u5e03\u5c40\u7684\u7c7b\u578b\u6709\u5173\uff0cViewGroup\u5177\u4f53\u7684OnMeasure\u65b9\u6cd5\u8fd8\u8981\u770b\u5177\u4f53\u7684\u5e03\u5c40\uff0c\u5982LinearLayout</p> </li> <li> </li> </ul> <p>\u5bf9\u4e8e<code>View</code>\u6765\u8bf4\u7528\u6765\u8ba1\u7b97<code>View</code>\u7684\u4f4d\u7f6e\u53c2\u6570,\u5bf9\u4e8e<code>ViewGroup</code>\u6765\u8bf4\uff0c\u9664\u4e86\u8981\u6d4b\u91cf\u81ea\u8eab\u4f4d\u7f6e\uff0c\u8fd8\u9700\u8981\u6d4b\u91cf\u5b50<code>View</code>\u7684\u4f4d\u7f6e\u3002</p> <ul> <li> <p>layout()\u65b9\u6cd5\uff1a\u4f7f\u6574\u4e2aonLayout\u7684\u5165\u53e3</p> <p>```java /* *  \u8fd9\u91cc\u7684\u56db\u4e2a\u53c2\u6570l\u3001t\u3001r\u3001b\u5206\u522b\u4ee3\u8868View\u7684\u5de6\u3001\u4e0a\u3001\u53f3\u3001\u4e0b\u56db\u4e2a\u8fb9\u754c\u76f8\u5bf9\u4e8e\u5176\u7236View\u7684\u8ddd\u79bb\u3002 * / public void layout(int l, int t, int r, int b) {         if ((mPrivateFlags3 &amp; PFLAG3_MEASURE_NEEDED_BEFORE_LAYOUT) != 0) {             onMeasure(mOldWidthMeasureSpec, mOldHeightMeasureSpec);             mPrivateFlags3 &amp;= ~PFLAG3_MEASURE_NEEDED_BEFORE_LAYOUT;         }</p> <pre><code>    int oldL = mLeft;\n    int oldT = mTop;\n    int oldB = mBottom;\n    int oldR = mRight;\n\n    //\u8fd9\u91cc\u901a\u8fc7setFrame\u6216setOpticalFrame\u65b9\u6cd5\u786e\u5b9aView\u5728\u7236\u5bb9\u5668\u5f53\u4e2d\u7684\u4f4d\u7f6e\u3002\n    boolean changed = isLayoutModeOptical(mParent) ?\n            setOpticalFrame(l, t, r, b) : setFrame(l, t, r, b);\n\n    //\u8c03\u7528onLayout\u65b9\u6cd5\u3002onLayout\u65b9\u6cd5\u662f\u4e00\u4e2a\u7a7a\u5b9e\u73b0\uff0c\u4e0d\u540c\u7684\u5e03\u5c40\u4f1a\u6709\u4e0d\u540c\u7684\u5b9e\u73b0\u3002\n    if (changed || (mPrivateFlags &amp; PFLAG_LAYOUT_REQUIRED) == PFLAG_LAYOUT_REQUIRED) {\n        onLayout(changed, l, t, r, b);\n                    ...\n    }\n    ...\n\n}\n</code></pre> <p>```</p> <p>\u7531\u6e90\u7801\u53ef\u77e5\uff1alayout\u662f\u8ba1\u7b97\u81ea\u8eabView\u4f4d\u7f6e\u7684\u65b9\u6cd5\uff0c\u800conLayout\u662fViewGroup\u8ba1\u7b97\u5b50View \u4f4d\u7f6e\u7684\u65b9\u6cd5</p> </li> <li> <p>onLayout():\u88ab\u5404\u4e2a\u5e03\u5c40\u8fdb\u884c\u91cd\u5199,\u4f1a\u53bb\u5bf9\u5404\u4e2a\u5b50View\u8fdb\u884c\u5e03\u5c40</p> </li> <li> <p>setFrame:setFrame()\u6216setOpticalFrame()\u4f1a\u5224\u65ad\u5b50View\u7684\u4f4d\u7f6e\u662f\u5426\u53d1\u751f\u53d8\u5316</p> </li> <li> </li> </ul> <p>\u7ed8\u5236View\u7684\u5185\u5bb9\uff0c\u6839\u636e\u6e90\u7801\u6ce8\u91ca\uff0c\u5206\u4e3a\u4e03\u6b65,\u4f46\u662f\u4e00\u822c\u7b2c\u4e8c\u6b65\u548c\u7b2c\u4e94\u6b65\u4f1a\u88ab\u5ffd\u7565(\u5177\u4f53\u6e90\u7801\u770b<code>View#draw</code>)</p> <ul> <li>\u7b2c\u4e00\u6b65\uff1a\u7ed8\u5236\u80cc\u666f</li> <li>\u7b2c\u4e8c\u6b65\uff1a\u5982\u6709\u5fc5\u8981\uff0c\u4fdd\u5b58\u753b\u5e03\u7684\u56fe\u5c42\u4ee5\u51c6\u5907\u892a\u8272</li> <li>\u7b2c\u4e09\u6b65\uff1a\u7ed8\u5236\u89c6\u56fe\u7684\u5185\u5bb9(onDraw())</li> <li>\u7b2c\u56db\u6b65\uff1a\u5206\u53d1\u7ed9\u5b50View,\u8fdb\u884c\u7ed8\u5236</li> <li>\u7b2c\u4e94\u6b65\uff1a\u5982\u6709\u5fc5\u8981\uff0c\u7ed8\u5236\u6e10\u53d8\u8fb9\u7f18\u5e76\u6062\u590d\u56fe\u5c42</li> <li>\u7b2c\u516d\u6b65\uff1a \u7ed8\u5236\u88c5\u9970\uff08\u4f8b\u5982\u6eda\u52a8\u6761\u3001\u524d\u666f\u8272\uff09</li> <li>\u7b2c\u4e03\u6b65\uff1a\u5982\u6709\u5fc5\u8981\uff0c\u7ed8\u5236\u9ed8\u8ba4\u7126\u70b9\u9ad8\u4eae</li> </ul> <p></p> <ul> <li>onDraw() :\u88ab\u5404\u4e2a\u5e03\u5c40\u91cd\u5199</li> </ul>"},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#onmeasure","title":"onMeasure","text":""},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#onlayout","title":"onLayout()","text":""},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#ondraw","title":"onDraw():","text":""},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#3","title":"3\u3001\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6","text":"<ul> <li>\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6\u5c31\u662f\u5c06\u591a\u4e2a\u63a7\u4ef6\u7ec4\u5408\u6210\u4e3a\u4e00\u4e2a\u65b0\u7684\u63a7\u4ef6\uff0c\u4e3b\u8981\u89e3\u51b3\u591a\u6b21\u91cd\u590d\u4f7f\u7528\u540c\u4e00\u7c7b\u578b\u7684\u5e03\u5c40\u3002\u6bd4\u5982TitleBar\u3002</li> </ul> <p>\u63a5\u4e0b\u6765\u4ee5\u4e00\u4e2aDemo\u8bb2\u89e3\u5bf9\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6\u7684\u4f7f\u7528\u3002</p> <p>\u6b65\u9aa4\u4e00\uff1a\u65b0\u5efa\u4e00\u4e2a\u5e03\u5c40\uff0c\u5c06\u60f3\u8981\u4f7f\u7528\u7684\u7ec4\u5408\u63a7\u4ef6\u5199\u5728Xml\u5e03\u5c40\u3002</p> <p>```xml   </p> <p>    ```</p> <p>\u6b65\u9aa4\u4e8c\uff1a\u65b0\u5efa\u4e00\u4e2aJAVA\u7c7b\uff0c\u8fdb\u884c\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6\u7684\u5b9a\u4e49\u548c\u5b9e\u73b0\u3002</p> <ul> <li> <p>\u7ee7\u627f\u4e00\u4e2a\u5e03\u5c40\uff0c\u5e76\u5b9e\u73b0\u5176\u6784\u9020\u51fd\u6570</p> <p>```java public class MyTitleBar extends RelativeLayout {     public MyTitleBar(Context context) {         super(context);     }         //xml\u5b9a\u4e49\u65f6\u8c03\u7528\u8fd9\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u4eff\u7167RelativeLayout\u7684     public MyTitleBar(Context context, AttributeSet attrs) {         this(context,attrs,0);     }</p> <pre><code>public MyTitleBar(Context context, AttributeSet attrs, int defStyleAttr) {\n    this(context, attrs,0,0);\n}\n\npublic MyTitleBar(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n    super(context, attrs, defStyleAttr, defStyleRes);\n}\n</code></pre> <p>} ```</p> </li> <li> <p>\u4f7f\u7528LayoutInflater\u7c7b\u5b9e\u73b0\u5bf9\u5e03\u5c40\u63a7\u4ef6\u7684UI\uff0c\u7136\u540e\u5c06initView()\u6dfb\u52a0\u5728\u7b2c\u56db\u4e2a\u6784\u9020\u51fd\u6570\u3002</p> <p><code>java    private void initView(Context context){         View view = LayoutInflater.from(context).inflate(R.layout.header_title_view,this,true);         bt_left = (Button) view.findViewById(R.id.lb);         bt_right = (Button) view.findViewById(R.id.rb);         tv_title =(TextView) view.findViewById(R.id.tv_title);         layout_root = (RelativeLayout) view.findViewById(R.id.header);     }</code></p> </li> </ul> <p>\u6b65\u9aa4\u4e09 \uff1a\u63d0\u4f9b\u5bf9\u5916\u7684\u65b9\u6cd5\uff0c\u4ee5\u4f9b\u4f7f\u7528\u8fd9\u4e2a\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6\u7684\u503c\u53d1\u751f\u53d8\u5316</p> <p><code>java       //\u4fee\u6539Text       public void setTitle(String title){           if(!TextUtils.isEmpty(title)){               tv_title.setText(title);           }       }         //\u6dfb\u52a0\u70b9\u51fb\u76d1\u542c        public void  setLeftListener(OnClickListener onClickListener){           bt_left.setOnClickListener(onClickListener);        }        public void setRightListener(OnClickListener onClickListener){           bt_right.setOnClickListener(onClickListener);        }</code></p> <p>\u6b65\u9aa4\u56db \uff1a\u6dfb\u52a0\u5728\u8981\u4f7f\u7528\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6\u7684xml\u4e2d</p> <p><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"       xmlns:app=\"http://schemas.android.com/apk/res-auto\"       xmlns:tools=\"http://schemas.android.com/tools\"       android:layout_width=\"match_parent\"       android:layout_height=\"match_parent\"       tools:context=\".MainActivity\"&gt;   &lt;com.example.customview.View.MyTitleBar       android:id=\"@+id/ViewTitle\"       android:layout_width=\"match_parent\"       android:layout_height=\"45dp\"/&gt;   &lt;/LinearLayout&gt;</code></p> <p>\u6b65\u9aa4\u4e94\uff1a\u5728\u4f7f\u7528\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6\u7684\u5730\u65b9\u8fdb\u884c\u81ea\u5b9a\u4e49\u503c\u7684\u4f7f\u7528</p> <p><code>java     titleBar = (MyTitleBar) findViewById(R.id.ViewTitle);           titleBar.setTitle(\"\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6\u6807\u9898\");           titleBar.setLeftListener(new View.OnClickListener() {               @Override               public void onClick(View v) {                   Toast.makeText(MainActivity.this, \"\u70b9\u51fb\u4e86left\", Toast.LENGTH_SHORT).show();               }           });           titleBar.setRightListener(new View.OnClickListener() {               @Override               public void onClick(View v) {                   Toast.makeText(MainActivity.this, \"\u70b9\u51fb\u4e86Right\", Toast.LENGTH_SHORT).show();               }           });</code></p> <ul> <li>\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u81ea\u5b9a\u4e49\u5c5e\u6027\u7684Flag,\u5b9e\u73b0\u5bf9\u5404\u4e2a\u63a7\u4ef6\u7684\u663e\u793a\u548c\u9690\u85cf</li> </ul> <p>\u6b65\u9aa4\u4e00\uff1a\u65b0\u5efa\u81ea\u5b9a\u4e49\u5c5e\u6027</p> <p><code>xml       &lt;declare-styleable name=\"MyTitleBar\"&gt;           &lt;attr name =\"title_text\" format=\"string\"/&gt;           &lt;attr name = \"title_text_color\" format=\"color\"/&gt;           &lt;attr name=\"show_view\" &gt;               &lt;flag name =\"left_text\" value=\"0x01\"/&gt;               &lt;flag name = \"left_img\" value=\"0x02\"/&gt;               &lt;flag name = \"right_text\" value=\"0x04\"/&gt;               &lt;flag name = \"right_img\" value=\"0x08\"/&gt;               &lt;flag name =\"text_center\" value=\"0x10\"/&gt;               &lt;flag name = \"center_img\" value = \"0x20\"/&gt;           &lt;/attr&gt;       &lt;/declare-styleable&gt;</code></p> <p>\u6b65\u9aa4\u4e8c\uff1a \u5728\u81ea\u5b9a\u4e49\u63a7\u4ef6\u4e2d\uff0c\u83b7\u53d6\u5c5e\u6027\uff0c\u5e76\u5bf9\u5c5e\u6027\u8fdb\u884c\u64cd\u4f5c\u3002\uff08\u6700\u540e\u8bb0\u5f97\u5c06initAttrs\u6dfb\u52a0\u5230\u6784\u9020\u51fd\u6570\u4e2d\uff09</p> <p>```java     private void initAttrs(Context context, AttributeSet attrs){           TypedArray mTypedArray = context.obtainStyledAttributes(attrs,R.styleable.MyTitleBar);           //\u83b7\u53d6TitleText\u5c5e\u6027           String title = mTypedArray.getString(R.styleable.MyTitleBar_title_text);           if(!TextUtils.isEmpty(title)){               tv_title.setText(title);           }           //\u83b7\u53d6\u5b57\u4f53\u989c\u8272           tv_title.setTextColor(mTypedArray.getColor(R.styleable.MyTitleBar_title_text_color,Color.BLACK));           //\u83b7\u53d6\u663e\u793a\u5185\u5bb9           showView = mTypedArray.getInt(R.styleable.MyTitleBar_show_view,0x26);           mTypedArray.recycle();           showView(showView);       }</p> <pre><code>  private void showView(int showView){\n      //\u5c06showView\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u6570\uff0c\u6839\u636e\u4e0d\u540c\u4f4d\u7f6e\u4e0a\u7684\u503c\n      long data = Long.valueOf(Integer.toBinaryString(showView));\n      element = String.format(\"%6d\",data);\n      for(int i = 0;i&lt;element.length();i++){\n          if(i == 0);\n          if(i == 1) tv_title.setVisibility(element.substring(i,i+1).equals(\"1\")?View.VISIBLE:View.GONE);\n          if(i == 2) bt_right.setVisibility(element.substring(i,i+1).equals(\"1\")?View.VISIBLE:View.GONE);\n          if(i == 3);\n          if(i == 4) bt_left.setVisibility(element.substring(i,i+1).equals(\"1\")?View.VISIBLE:View.GONE);\n          if(i == 5);\n      }\n  }\n</code></pre> <p>```</p> <p>\u6b65\u9aa4\u4e09\uff1a\u5728\u4f7f\u7528\u81ea\u5b9a\u4e49\u7ec4\u5408\u63a7\u4ef6\u7684xml\u4e2d\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002</p> <p><code>xml   &lt;com.example.customview.View.MyTitleBar       android:id=\"@+id/ViewTitle\"       android:layout_width=\"match_parent\"       app:title_text=\"\u6362\u4e00\u4e2a\"       app:title_text_color=\"#FF0000\"       app:show_view=\"text_center|left_img\"       android:layout_height=\"45dp\"/&gt;</code></p> <p>\u6ce8\u610f\uff1aflag\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\uff0c\u518d\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\uff0c\u9ad8\u4f4d\u5728\u524d\u9762</p> <p></p>"},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#4","title":"4\u3001\u7ee7\u627f\u7cfb\u7edf\u63a7\u4ef6","text":"<p>\u7ee7\u627f\u7cfb\u7edf\u63a7\u4ef6\u662f\u6307\u7ee7\u627fView\u5b50\u7c7b(\u5982TextView\u3001Button)\u548c\u7ee7\u627fViewGroup\u7684\u5b50\u7c7b\uff08\u5982\uff1aLinearLayout\uff09,\u4e1a\u52a1\u9700\u6c42\u7684\u4e0d\u540c\uff0c\u5b9e\u73b0\u65b9\u5f0f\u6709\u6bd4\u8f83\u5927\u7684\u5dee\u5f02\u3002</p> <ul> <li>\u7ee7\u627fView\u5b50\u7c7b(TextView)</li> </ul> <p>\u4e1a\u52a1\u9700\u6c42\uff1a\u8bbe\u7f6e\u65b9\u578b\u80cc\u666f\uff0c\u5e76\u5728\u4e2d\u95f4\u52a0\u4e00\u6761\u6a2a\u7ebf</p> <p>\u6b65\u9aa4\u4e00\uff1a\u6784\u9020\u51fd\u6570 \u753b\u7b14\u521d\u59cb\u5316</p> <p>\u6b65\u9aa4\u4e8c\uff1a\u7ed8\u5236\u81ea\u5b9a\u4e49\u56fe\u5f62\uff0c\u6ce8\u610f\u5148\u7ed8\u5236\u81ea\u5b9a\u4e49\uff0c\u518d\u7ed8\u5236\u539f\u6709\u7684\u56fe\u5f62</p> <p>```java   public class LinearTextView  extends TextView {       //step 1: \u6784\u9020\u51fd\u6570 \u753b\u7b14\u521d\u59cb\u5316       private Paint mPaint;       //\u6784\u9020\u51fd\u6570       public LinearTextView(Context context) {           super(context);           init();       }       public LinearTextView(Context context, @Nullable AttributeSet attrs) {           this(context, attrs,0);       }</p> <pre><code>  public LinearTextView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {\n      this(context, attrs, defStyleAttr,0);\n  }\n\n  public LinearTextView(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n      super(context, attrs, defStyleAttr, defStyleRes);\n      init();\n  }\n\n  private void init(){\n    //\u753b\u7b14\u521d\u59cb\u5316\n     mPaint = new Paint();\n  }\n\n //step2 \u7ed8\u5236\u81ea\u5b9a\u4e49\u56fe\u5f62\uff0c\u6ce8\u610f\u5148\u7ed8\u5236\u81ea\u5b9a\u4e49\uff0c\u518d\u7ed8\u5236\u539f\u6709\u7684\u56fe\u5f62\n  @Override\n  protected void onDraw(Canvas canvas) {\n      int width = getWidth();\n      int height = getHeight();\n      mPaint.setColor(Color.WHITE);\n      //\u7ed8\u5236\u65b9\u5f62\u80cc\u666f\n      RectF rectF = new RectF(0,0,width,height);\n      canvas.drawRect(rectF,mPaint);\n      //\u7ed8\u5236\u4e2d\u5fc3\u66f2\u7ebf \u8d77\u70b9(0,Height/2) \u7ec8\u70b9\uff08width,height/2\uff09\n      mPaint.setColor(Color.RED);\n      canvas.drawLine(0,height/2,width,height/2,mPaint);\n    //\u5728\u81ea\u5b9a\u4e49\u753b\u5b8c\u4e4b\u540e\uff0c\u518d\u8ba9\u7236\u7c7b\u753b\uff0c\u8fd9\u6837\u4e0d\u5f71\u54cdTextView\u5b57\u4f53\u7684\u663e\u793a\n      super.onDraw(canvas);\n  }\n</code></pre> <p>}   ```</p> <p><code>xml   &lt;com.example.customview.View.LinearTextView       android:layout_width=\"match_parent\"       android:gravity=\"center\"       android:text=\"11111111\"       android:textColor=\"@color/black\"       android:layout_height=\"45dp\"/&gt;</code></p> <p></p> <ul> <li>\u7ee7\u627fViewGroup\u5b50\u7c7b(\u4ee5\u540e\u8865\u5145)</li> </ul>"},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#5view","title":"5\u3001\u76f4\u63a5\u7ee7\u627fView","text":"<p>\u76f4\u63a5\u7ee7\u627fView\u65f6\uff0c\u7531\u4e8eView\u6ca1\u6709\u8bbe\u7f6eAT_MOST\u548cEXACTLY\u7684\u533a\u522b\uff0c\u9664\u4e86\u9700\u8981\u91cd\u5199onDraw()\uff0c\u8fd8\u9700\u8981\u91cd\u5199onLayout()\u65b9\u6cd5\u3002</p> <p>\u4e1a\u52a1\u9700\u6c42\uff1a\u753b\u4e00\u4e2a\u77e9\u5f62\uff0c\u5e76\u8bbe\u7f6e\u80cc\u666f\u989c\u8272</p> <ul> <li>\u6b65\u9aa4\u4e00\uff1a\u6784\u9020\u51fd\u6570 \u521d\u59cb\u5316Paint</li> <li>\u6b65\u9aa4\u4e8c\uff1a\u5904\u7406AT_MOST &amp; EXACTLY\u7684\u533a\u522b</li> <li>\u6b65\u9aa4\u4e09\uff1a\u7ed8\u5236\u77e9\u5f62 \u6ce8\u610f\u8003\u8651Padding,\u4ee5\u53capadding\u548c\u7ed8\u5236\u5750\u6807\u7cfb\u7684\u5173\u7cfb</li> </ul> <pre><code>public class RectView extends View {\n    //Step 1 \u6784\u9020\u51fd\u6570 \u521d\u59cb\u5316Paint\n    private Paint mPaint;\n    public RectView(Context context) {\n        super(context);\n        init();\n    }\n\n    public RectView(Context context, @Nullable AttributeSet attrs) {\n        this(context, attrs,0);\n    }\n\n    public RectView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {\n        this(context, attrs, defStyleAttr,0);\n    }\n\n    public RectView(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        init();\n    }\n\n    private void init(){\n        mPaint = new Paint();\n    }\n    //Step 2 \u5904\u7406AT_MOST &amp; EXACTLY\u7684\u533a\u522b\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        //\u7531\u4e8eView \u6ca1\u6709\u5904\u7406AT_MOST &amp; EXACATLY\u7684\u533a\u522b\uff0c\u5728\u8fd9\u91cc\u8fdb\u884c\u5904\u7406\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\n\n        //\u5904\u7406\n        if(widthMode == MeasureSpec.AT_MOST &amp;&amp; heightMode == MeasureSpec.AT_MOST){\n            setMeasuredDimension(300,300);\n        } else if (widthMode == MeasureSpec.AT_MOST){\n            setMeasuredDimension(300,heightSize);\n        } else if(heightMode == MeasureSpec.AT_MOST){\n            setMeasuredDimension(widthSize,300);\n        }\n    }\n    //Step 3:\u7ed8\u5236\u77e9\u5f62 \u6ce8\u610f\u8003\u8651Padding,\u4ee5\u53capadding\u548c\u7ed8\u5236\u5750\u6807\u7cfb\u7684\u5173\u7cfb\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        //\u7ed8\u5236\u65f6\u9700\u8981\u8003\u8651padding\n        int paddingLeft = getPaddingLeft();\n        int paddingRight = getPaddingRight();\n        int paddingTop = getPaddingTop();\n        int paddingBottom = getPaddingBottom();\n        //\u83b7\u53d6\u7ed8\u5236\u7684View\u5bbd\u5ea6\n        int width = getWidth() -paddingLeft - paddingRight;\n        int height = getHeight() -paddingTop - paddingBottom;\n        mPaint.setColor(Color.RED);\n        //\u8003\u8651\u753b\u7684\u957f\u65b9\u5f62\u548c\u5750\u6807\u7cfb\u4e4b\u95f4\u7684\u5173\u7cfb\n        RectF rectF = new RectF(0+paddingLeft,0+paddingTop,width+paddingLeft,height+paddingTop);\n        canvas.drawRect(rectF,mPaint);\n    }\n}\n</code></pre> <pre><code>   &lt;com.example.customview.View.RectView\n        android:layout_width=\"100dp\"\n        android:layout_height=\"wrap_content\"/&gt;\n</code></pre> <p></p>"},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#6viewgroup","title":"6\u3001\u76f4\u63a5\u7ee7\u627fViewGroup","text":"<p>ViewGroup \u7684\u5b9e\u73b0\u8981\u5b9e\u73b0\u5bf9View\u7684\u6d4b\u91cfonMeasure()\u548c\u5bf9View\u3001\u5b50View\u7684\u5e03\u5c40\u5b9e\u73b0onLayout(),onDraw()\u4e00\u822c\u7531\u5b50View\u5b9e\u73b0\u3002</p> <p>\u4e1a\u52a1\u9700\u6c42\uff1a\u5b9e\u73b0\u4e00\u4e2a\u6c34\u5e73\u6eda\u52a8\u7684ViewPages\u3002</p> <p>\u6b65\u9aa4\u4e00\uff1a\u5b9e\u73b0\u6784\u9020\u51fd\u6570\u548c\u521d\u59cb\u5316</p> <p>\u6b65\u9aa4\u4e8c\uff1a\u5b9e\u73b0onMeasure(),\u4e3b\u8981\u662f\u5bf9AT_MOST&amp;EXACTLY\u7684\u5b9e\u73b0\uff0c\u4f46\u8fd8\u9700\u8981\u8003\u8651\u5b50View.</p> <p>\u6b65\u9aa4\u4e09\uff1a\u5b9e\u73b0onLayout(),\u4e3b\u8981\u662f\u5bf9\u5b50View\u7684onLayout()</p> <p>\u6b65\u9aa4\u56db\uff1a\u5219\u9700\u8981\u8003\u8651\u70b9\u51fb\u4e8b\u4ef6\u7684\u5206\u53d1\u673a\u5236</p>"},{"location":"Android/%E8%87%AA%E5%AE%9A%E4%B9%89View/#7","title":"7\u3001\u5e38\u7528\u7684\u7c7b","text":"<ul> <li> <p>Paint \u753b\u7b14\u7c7b</p> </li> <li> <p>\u5e38\u7528\u65b9\u6cd5</p> \u51fd\u6570 \u4f5c\u7528 setColor(int) \u8bbe\u7f6e\u753b\u7b14\u7684\u989c\u8272 setAlpha(int\uff09 \u8bbe\u7f6e\u753b\u7b14\u7684\u900f\u660e\u5ea6 setARGB(int a, int r, int g, int b) \u8bbe\u7f6e\u753b\u7b14\u7684\u989c\u8272\uff0c<code>a</code>\u4ee3\u8868\u900f\u660e\u5ea6\uff0c<code>r</code>\uff0c<code>g</code>\uff0c<code>b</code>\u4ee3\u8868\u989c\u8272\u503c setAntiAlias(boolean) \u8bbe\u7f6e\u662f\u5426\u4f7f\u7528\u6297\u952f\u9f7f\u529f\u80fd\uff0c\u8bbe\u7f6e\u540e\u4f1a\u5e73\u6ed1\u4e00\u4e9b setDither(boolean) \u8bbe\u5b9a\u662f\u5426\u4f7f\u7528\u56fe\u50cf\u6296\u52a8\u5904\u7406\uff0c\u8bbe\u7f6e\u540e\u56fe\u50cf\u66f4\u52a0\u6e05\u6670 setStyle(Style) \u8bbe\u7f6e\u753b\u7b14\u7684\u98ce\u683cStyle.FILL\uff0c\u5b9e\u5fc3Style.FILL_AND_STROKE\uff0c\u540c\u65f6\u663e\u793a\u5b9e\u5fc3\u548c\u7a7a\u5fc3Style.STROKE\uff0c\u7a7a\u5fc3 setStrokeWidth(int) \u8bbe\u7f6e\u7ebf\u5bbd setStrokeCap(Cap) \u8bbe\u7f6e\u7ebf\u5e3d setStrokeJoin(Join\uff09 \u8bbe\u7f6e\u8fde\u63a5 setTextSize(int) \u8bbe\u7f6e\u5b57\u4f53\u5927\u5c0f setFakeBoldText(boolean) setFakeBoldText(boolean) setUnderlineText(boolean) \u8bbe\u7f6e\u6587\u5b57\u7684\u4e0b\u5212\u7ebf setTextSkewX(float) \u8bbe\u7f6e\u659c\u4f53\u5b57\uff0c\u503c\u4e3a\u8d1f\u53f3\u503e\u503c\u4e3a\u6b63\u5de6\u503e setStrikeThruText(boolean) \u8bbe\u7f6e\u6587\u672c\u5220\u9664\u7ebf setTextScaleX(float) \u6587\u672c\u6cbfX\u8f74\u6c34\u5e73\u7f29\u653e\uff0c\u9ed8\u8ba4\u503c\u4e3a1 setLetterSpacing(float) \u8bbe\u7f6e\u884c\u7684\u95f4\u8ddd setShadowLayer(float radius, float dx, float dy, int shadowColor) \u8bbe\u7f6e\u9634\u5f71\u6548\u679c\uff0c<code>radius</code>\u4e3a\u9634\u5f71\u89d2\u5ea6\uff0c<code>dx</code>\u548c<code>dy</code>\u4e3a\u9634\u5f71\u5728x\u8f74\u548cy\u8f74\u4e0a\u7684\u8ddd\u79bb\uff0c<code>color</code>\u4e3a\u9634\u5f71\u7684\u989c\u8272 setTypeface(Typeface) \u8bbe\u7f6e\u6587\u672c\u5b57\u4f53\u6837\u5f0f setTextAlign(Paint.Align) \u8bbe\u7f6e\u5b57\u4f53\u65b9\u5411 </li> <li> <p>Canvas</p> </li> </ul> <p>Canvas\u7ed8\u56fe\u6709\u4e09\u4e2a\u57fa\u672c\u8981\u7d20\uff1aCanvas\u3001\u7ed8\u56fe\u5750\u6807\u7cfb\u4ee5\u53caPaint\u3002</p> <ul> <li> <p>\u5750\u6807\u7cfb\uff1aCanvas\u7ed8\u56fe\u4e2d\u6709\u4e24\u79cd\u5750\u6807\u7cfb</p> <ul> <li>Canvas\u5750\u6807\u7cfb</li> </ul> <p>\u8fd9\u4e2a\u548cView\u7684\u5750\u6807\u7cfb\u4e00\u6837\uff0c\u4ee5View\u7684\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9\uff0c\u5f80\u53f3\u4e3aX\u8f74\uff0c\u5f80\u4e0b\u4e3aY\u8f74\uff0c\u4e14Canvas\u5750\u6807\u7cfb\u53ea\u6709\u4e00\u4e2a\u3002</p> <ul> <li>Canvas\u7ed8\u56fe\u5750\u6807\u7cfb</li> </ul> <p>\u8be5\u5750\u6807\u7cfb\u7528\u4e8eCanvas\u7684\u753b\u56fe\uff0c\u5728drawXXX\u4e2d\u7ed8\u56fe\u662f\u4f20\u9012\u7684\u7ed8\u56fe\u5750\u6807\u7cfb\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7ed8\u56fe\u5750\u6807\u7cfb\u7b49\u4e8eCanvasz\u5750\u6807\u7cfb\uff0c\u4f46\u662f\u7ed8\u56fe\u5750\u6807\u7cfb\u53ef\u4ee5\u8fdb\u884c\u79fb\u52a8(translate)\u3001\u65cb\u8f6c(rotate)\u3001\u7f29\u653e(scale)\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u90fd\u662f\u57fa\u4e8e\u5f53\u524d\u7684\u7ed8\u56fe\u5750\u6807\u7cfb\u3002</p> <ul> <li>Canvas.translate </li> <li>Canvas.rotate</li> <li>Canvas.scale  </li> </ul> </li> <li> <p>\u5e38\u7528\u65b9\u6cd5</p> \u51fd\u6570 \u4f5c\u7528 drawARGB(a,r,g,b) \u7ed8\u5236\u753b\u5e03\u7684\u80cc\u666f\uff0ca,\u900f\u660e\u5ea6 drawText(text,x,y,paint) \u7ed8\u5236\u6587\u5b57\uff0c\u6709\u4e13\u95e8\u7684\u753b\u7b14(TextPoint) drawPoint(x,y,paint) \u7ed8\u5236\u70b9 drawRect \u7ed8\u5236\u77e9\u5f62 drawCircle \u7ed8\u5236\u5706 drawOval \u7ed8\u5236\u692d\u5706 drawArc \u7ed8\u5236\u5f27\uff1a\u5f27\u9762\u548c\u5f27\u7ebf drawPath \u7ed8\u5236path </li> </ul>"},{"location":"Computer/Coding%20Easy/","title":"Coding Easy","text":""},{"location":"Computer/Coding%20Easy/#_1","title":"\u547d\u540d\u89c4\u5219","text":"<ul> <li> <p>\u6709\u610f\u4e49\u7684\u547d\u540d,\u800c\u4e0d\u662f\u5355\u5b57\u6bcd</p> </li> <li> <p>\u7a0b\u5e8f\u662f\u53ef\u8bfb\u7684</p> </li> <li> <p>\u907f\u514d\u8bef\u5bfc</p> </li> </ul> <p>\u4e0d\u8981\u4f7f\u7528\u8bed\u8a00\u4e2d\u7684\u5173\u952e\u8bcd\u53bb\u547d\u540d\uff0c\u6bd4\u5982\u8d26\u6237\u5217\u8868\uff0c\u4e0d\u8981\u4f7f\u7528AccountList,\u56e0\u4e3aList\u662f\u6570\u636e\u7ed3\u6784</p> <ul> <li>\u505a\u6709\u610f\u4e49\u7684\u533a\u5206</li> </ul> <p>\u4e0d\u8981\u4f7f\u7528the a </p> <ul> <li> <p>\u4f7f\u7528\u8bfb\u7684\u51fa\u6765\u7684\u540d\u79f0</p> </li> <li> <p>\u4f7f\u7528\u53ef\u641c\u7d22\u7684\u540d\u79f0</p> </li> <li> <p>\u4e0d\u5f53\u7684\u7f16\u7801</p> </li> <li> <p>\u52a0\u7c7b\u578b\u524d\u7f00</p> </li> <li>\u52a0\u6210\u5458\u524d\u7f00\u5982\uff1am_</li> <li> <p>\u63a5\u53e3\u524d\u52a0\uff1aI</p> </li> <li> <p>\u907f\u514d\u601d\u7ef4\u6620\u5c04\uff0c\u4e0d\u8981\u628a\u540d\u79f0\u547d\u540d\u4e3a\u5176\u4ed6\u4eba\u5bb9\u6613\u8bef\u89e3\u7684\u547d\u540d</p> </li> <li> <p>\u7c7b\u540d\u5e94\u8be5\u662f\u540d\u8bcd\u6216\u540d\u8bcd\u77ed\u8bed</p> </li> <li> <p>\u65b9\u6cd5\u540d\u5e94\u662f\u52a8\u8bcd\u6216\u52a8\u8bcd\u77ed\u8bed</p> </li> <li> <p>\u6bcf\u4e2a\u6982\u5ff5\u5e94\u8be5\u5bf9\u5e94\u4e00\u4e2a\u8bcd</p> </li> <li> <p>\u907f\u514d\u4f7f\u7528\u53cc\u5173\u8bed \u6bd4\u5982add \u548cinsert</p> </li> <li> <p>\u4f7f\u7528\u7a0b\u5e8f\u5458\u719f\u77e5\u7684\u547d\u540d</p> </li> <li> <p>\u4f7f\u7528\u6e90\u81ea\u8bbe\u8ba1\u9886\u57df\u7684\u547d\u540d</p> </li> <li> <p>\u6dfb\u52a0\u6709\u7528\u7684\u8bed\u5883</p> </li> </ul>"},{"location":"DevTools/Easy-Moke%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA/","title":"Easy-Moke\u672c\u5730\u642d\u5efa","text":""},{"location":"DevTools/Easy-Moke%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA/#1nodejs-891","title":"1\u3001\u5b89\u88c5Node.js 8.9.1","text":"<ul> <li>\u5b89\u88c5nvm \u7ba1\u7406Node.js\u7248\u672c</li> </ul> <p>\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u2014\u2014.bash_profile</p> <p><code>bash   #Setting PATH for NVM   export NVM_DIR=\"$HOME/.nvm\"     [ -s \"/opt/homebrew/opt/nvm/nvm.sh\" ] &amp;&amp; \\. \"/opt/homebrew/opt/nvm/nvm.sh\"  # This loads nvm     [ -s \"/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm\" ] &amp;&amp; \\. \"/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm\"  # This loads nvm bash_completion</code></p> <p><code>bash   brew install nvm   nvm list #\u67e5\u770bnode\u7248\u672c   nvm use system #\u4f7f\u752816.13.0 \u8fd9\u4e2a\u662f\u6211\u7528npm\u4e0b\u8f7d\u7684   nvm use default #\u4f7f\u75288.9.1   nvm install \u7248\u672c\u53f7 \u59828.9.1</code></p>"},{"location":"DevTools/Easy-Moke%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA/#2redis","title":"2\u3001\u5b89\u88c5redis","text":"<pre><code>brew install redis \nredis-cli #\u5ba2\u6237\u7aef\nredis-server #\u670d\u52a1\u7aef\n</code></pre> <p>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6/opt/homebrew/etc/redis.conf</p> <pre><code>daemonize no#yes \u540e\u53f0\u8fd0\u884c\n</code></pre>"},{"location":"DevTools/Easy-Moke%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA/#3mongodb","title":"3\u3001\u5b89\u88c5Mongodb","text":"<ul> <li> <p>brew \u4e2d\u67e5\u4e0d\u5230Mongodb\uff0c\u8be5\u7528\u5b98\u7f51\u5b89\u88c5 </p> </li> <li> <p>\u914d\u7f6e\u73af\u5883\u53d8\u91cf</p> </li> </ul> <pre><code>#Setting PATH for MongOdb\nexport PATH=Mongodb\u5b89\u88c5\u8def\u5f84\u540d/bin:${PATH}\n</code></pre> <ul> <li>\u542f\u52a8Mongodb</li> </ul> <p>\u5728\u5b89\u88c5\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efa/data/db \u76ee\u5f55</p> <p>```bash   \u5207\u6362\u76ee\u5f55\u5230\u5b89\u88c5\u76ee\u5f55bin\u76ee\u5f55\u4e0b\uff1a   \u7ec8\u7aef1:./mongod --dbpath /Users/zhangqian20/Project/Moke/mongodb-osx-x86_64-4.0.4/data/db</p> <p>\u7ec8\u7aef2:./mongo   ```</p> <p>\u82e5\u6ca1\u6709\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u5b9d\u8fde\u63a5\u5931\u8d25\u7684\u9519\u8bef</p>"},{"location":"DevTools/Easy-Moke%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA/#4easy-mock","title":"4\u3001\u5b89\u88c5easy-mock","text":"<p>\u4ece\u5b98\u7f51\u4e0a\u4e0b\u8f7deasy-make</p> <pre><code>cd easy-mock\nnpm install #\u4e0b\u8f7d\u4f9d\u8d56\nnpm run dev  #\u8fd0\u884c\u7a0b\u5e8f\n</code></pre>"},{"location":"DevTools/Easy-Moke%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA/#5nginxnodeweb","title":"5\u3001\u5b89\u88c5nginx(\u6682\u65f6\u6ca1\u6709\u7528\u5230\uff0c\u56e0\u4e3a\u4e0d\u662f\u7eaf\u524d\u7aef\u9879\u76ee\uff0cnode\u5c31\u662f\u4e00\u4e2aWeb\u670d\u52a1\u5668)","text":"<pre><code>brew install nginx\nbrew info nginx #\u67e5\u770bnginx\u914d\u7f6e\u4fe1\u606f\nsudo nginx -s reload #\u91cd\u542fnginx\n</code></pre> <p>\u5728nginx.conf\u6587\u4ef6\u4e2d\u914d\u7f6e\u7f51\u7ad9\u4fe1\u606f</p> <pre><code>    server{\n        listen  5188; #\u81ea\u5b9a\u4e49\u7aef\u53e3\n        server_name localhost; \n        location / {\n            root /Users/zhangqian20/Project/Moke/easy-mock/dist;#\u7f51\u7ad9\u914d\u7f6e\u5730\u5740\n            index index.html index.htm;\n        }\n    }\n</code></pre>"},{"location":"DevTools/Easy-Moke%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA/#6","title":"6\u3001\u9519\u8bef\u7801\u89e3\u51b3\u65b9\u6cd5","text":"<ul> <li>\u9519\u8bef\uff1aevents.js:183 throw er; // Unhandled 'error' event\u2014\u89e3\u51b3\u529e\u6cd5</li> </ul> <pre><code>lsof -i:7300 #\u67e5\u627e\u7aef\u53e3\u53f7\u7684\u7ebf\u7a0b\nkill PI(7300\u7684\u7ebf\u7a0bID) #\u6740\u6b7b\u7ebf\u7a0b\n</code></pre>"},{"location":"DevTools/Easy-Moke%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA/#7","title":"7\u3001\u67e5\u770b\u6570\u636e\u5e93\u662f\u5426\u542f\u52a8","text":"<pre><code>lsof -i:6379   #redis\npgrep mongo -l #Mongodb\n</code></pre>"},{"location":"DevTools/Easy-Moke%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA/#easy-moke_1","title":"EASY-MOKE\u4f7f\u7528\u8bed\u6cd5","text":"<p>1\u3001\u57fa\u7840\u8bed\u6cd5</p>"},{"location":"DevTools/docker%E4%BD%BF%E7%94%A8/","title":"docker\u4f7f\u7528","text":"<pre><code>docker version #\u67e5\u770bdocker\u4fe1\u606f\ndocker info\ndocker images #\u67e5\u770b\ndocker ps #\u67e5\u770b\u5bb9\u5668\u8fdb\u7a0b\n</code></pre>"},{"location":"DevTools/docker%E4%BD%BF%E7%94%A8/#mysql","title":"\u5bb9\u5668\u5185\u6267\u884cmysql\uff1a","text":"<p>docker run -p 3306:3306 --name mysql -e MYSQL_ROOT_PASSWORD=root -d ibex/debian-mysql-server-5.7 --bind-address=0.0.0.0</p> <p>docker exec -it mysql(\u5bb9\u5668\u540d\u79f0) bash</p>"},{"location":"DevTools/docker%E4%BD%BF%E7%94%A8/#mysql-dockermysql","title":"\u5728\u672c\u5730\u901a\u8fc7Mysql \u8fde\u63a5Docker\u7684Mysql","text":"<p>1.\u67e5\u8be2\u5bbf\u4e3b\u673a\u5bb9\u5668\u7684ip\u5730\u5740</p> <p>docker inspect [\u5bb9\u5668\u540d\u79f0]|grep IPAddress</p>"},{"location":"DevTools/docker%E4%BD%BF%E7%94%A8/#pecker","title":"Pecker \u5de5\u7a0b","text":""},{"location":"DevTools/docker%E4%BD%BF%E7%94%A8/#_1","title":"\u73af\u5883\u914d\u7f6e\uff1a","text":"<p>1.\u8fde\u63a5\u9047\u5230\u8fde\u63a5\u4e0d\u5230mysql \u4fee\u6539root\u7684host='%'</p> <pre><code>UPDATE mysql.user SET host='%' WHERE user='root';\nFLUSH PRIVILEGES;\n</code></pre> <p>2.\u6570\u636e\u5e93\u7684\u6570\u636e\u662fcode First,\u4f46\u662f\u5fc5\u987b\u5efa\u7acb\u6570\u636e\u5e93</p> <pre><code>CREATE DATABASE front;\n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/","title":"Git\u6559\u7a0b\u5206\u4eab","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#1github","title":"1\u3001gitHub \u4ed3\u5e93\u65b0\u5efa\u4e0e\u5220\u9664","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#11","title":"1.1  \u65b0\u5efa\u4ed3\u5e93","text":"<p>\u70b9\u51fbNew repository,\u6309\u7167\u63d0\u793a\u7684\u5185\u5bb9\u586b\u5199\u5373\u53ef\u3002</p> <p></p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#12","title":"1.2  \u5220\u9664\u4ed3\u5e93","text":"<p>\u9009\u4e2d\u8981\u5220\u9664\u7684\u4ed3\u5e93\uff0c\u70b9\u51fbSetting,\u62c9\u5230\u6700\u4e0b\u9762\uff0c\u70b9\u51fb <code>Delete this repository</code>,\u8f93\u5165\u4ed3\u5e93\u540d\u79f0\uff0c\u786e\u8ba4\u5373\u53ef\u3002 </p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#13-git-pushtoken","title":"1.3 git push\u65f6\u9700\u8981token","text":"<pre><code>git add .\ngit commit -m \"comment\"\ngit pull origin \u5206\u652f\u540d\ngit push origin \u5206\u652f\u540d\n</code></pre> <p>\u4ece2021\u5e748\u670813\u65e5\u5f00\u59cb\uff0cgithub\u4e0d\u518d\u652f\u6301\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684push \u65b9\u5f0f\uff0c\u800c\u662f\u63a8\u8350\u4f7f\u7528token,\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u5728\u7528\u6237\u540d\u4e0b-&gt;Settings-&gt;Developer settings-&gt;Personal access tokens-&gt;generate new token,\u751f\u6210\u5b8c\u6210\u540e\uff0c\u4e00\u5b9a\u8981\u590d\u5236\u7c98\u8d34\uff0c\u56e0\u4e3atoken\u53ea\u51fa\u73b0\u4e00\u6b21\uff0c\u5c06token\u8f93\u5165\u5230\u5bc6\u7801\u8f93\u5165\u7684\u5730\u65b9\u5373\u53ef\u3002\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u7528SSH-Key\u7684\u65b9\u5f0f\uff0c\u907f\u514d\u8f93\u5165\u7684\u64cd\u4f5c\u3002 </p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#14","title":"1.4 \u4ed3\u5e93\u521d\u59cb\u5316","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#15","title":"1.5 \u4e2a\u4eba\u7f51\u7ad9\u642d\u5efa","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#2git","title":"2\u3001git \u57fa\u672c\u547d\u4ee4\u603b\u7ed3","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#21-git","title":"2.1  \u83b7\u53d6git \u5b58\u50a8\u5e93","text":"<pre><code>#1\u3001\u672c\u5730\u65b0\u5efa\u540e\u548c\u8fdc\u7a0b\u8fde\u63a5\ngit init \ngit add remote url #\u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93\n#2\u3001\u4ece\u5176\u4ed6\u5730\u65b9\u514b\u9686\ngit clone url\n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#22","title":"2.2 \u8bb0\u5f55\u6587\u4ef6\u7684\u4fee\u6539","text":"<p>\u6587\u4ef6\u7c7b\u578b\uff1atracked     untracked \uff1b\u4e0b\u56fe\u4e3a\u6587\u4ef6\u72b6\u6001\u7684\u751f\u547d\u5468\u671f</p> <p></p> <pre><code>git status #\u67e5\u770b\u6587\u4ef6\u72b6\u6001\ngit status  -uno #\u67e5\u770b\u5171\u540c\u4fee\u6539\u7684\u6587\u4ef6\ngit status -s #\u67e5\u770b\u6587\u4ef6\u72b6\u6001:\u7b80\u5199\n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#23","title":"2.3 \u67e5\u770b\u63d0\u4ea4\u5386\u53f2","text":"<p>git log \u6309\u7167\u65f6\u95f4\u5012\u5e8f \u663e\u793a</p> <pre><code>git log #\u663e\u793a\u6240\u6709\u63d0\u4ea4\u8fc7\u7684\u7248\u672c\u4fe1\u606f\ngit log --oneline #\u663e\u793a\u7b80\u4ecb\u7684log\u4fe1\u606f\ngit log --graph --oneline #\u56fe\u5f62\u5316\u663e\u793a\u5f53\u524d\u5206\u652f\u7684\u63d0\u4ea4\u65e5\u5fd7\ngit log --graph --patch #\u56fe\u5f62\u5316\u663e\u793a\u5f53\u524d\u5206\u652f\u7684\u63d0\u4ea4\u65e5\u5fd7\u53ca\u6bcf\u6b21\u4fee\u6539\u7684\u5185\u5bb9\ngit log --pretty=forgit mat #\u5c06\u65e5\u5fd7\u8f93\u51fa\u66f4\u6539\u4e3a\u9ed8\u8ba4\u683c\u5f0f\u4ee5\u5916\u7684\u683c\u5f0f\n\ngit reflog #\u663e\u793a\u6240\u6709\u5206\u652f\u7684\u64cd\u4f5c\u8bb0\u5f55\uff1a\u53ef\u4ee5\u7528\u6765\u6062\u590d\u5220\u9664\u7684commit \u64cd\u4f5c\n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#24","title":"2.4 \u63d0\u4ea4\u548c\u64a4\u9500\u63d0\u4ea4","text":"<ul> <li>\u63d0\u4ea4</li> </ul> <p><code>bash   git add .   git commit -m \"Commit\"   git pull origin \u8fdc\u7a0b\u5206\u652f   git push origin \u8fdc\u7a0b\u5206\u652f</code></p> <ul> <li> <p>git diff :\u67e5\u770b\u4fee\u6539\u7684\u6587\u4ef6\u4e0e\u4ee5\u524d\u7684\u4e0d\u540c</p> <p>```bash</p> </li> </ul> <p>\u89e3\u91ca\u4e00\u4e0b\uff1a\u5de5\u4f5c\u533a\u3001\u6682\u5b58\u533a\u548cHEAD\u7684\u6982\u5ff5\uff0c\u5de5\u4f5c\u533a\u5c31\u662f\u4f60\u53ef\u4ee5\u770b\u5230\u7684\u6587\u4ef6\u5939\uff0c\u5373\u4f60\u4fee\u6539\u7684\u5730\u65b9\uff0cgit\u63d0\u4f9b\u4e86\u6682\u5b58\u533a\u7684\u6982\u5ff5\uff0c\u5373\u5728\u5de5\u4f5c\u533a\u5411\u672c\u5730\u5206\u652f\u63d0\u4ea4\u65f6\uff0c\u6709\u4e00\u4e2a\u6682\u5b58\u533a\uff0c\u6211\u4eec\u5728git add .\u65f6\u5c06\u5de5\u4f5c\u533a\u4fee\u6539\u7684\u6587\u4ef6\u6dfb\u52a0\u5230\u64cd\u4f5c\u533a\uff0c\u7136\u540e\u901a\u8fc7git commit \u63d0\u4ea4\u5230\u672c\u5730\u5206\u652f\u5f53\u524d\u72b6\u6001\uff0c\u5c06\u5176\u79f0\u4e3aHEAD\u3002</p> <ul> <li>\u672a\u52a0\u5165\u5230\u6682\u5b58\u533a\u65f6\uff1agit restore \u6587\u4ef6\u540d</li> <li>\u52a0\u5165\u5230\u6682\u5b58\u533a\u65f6(git add .)\uff1agit restore --staged  \u6587\u4ef6\u540d</li> <li>\u63d0\u4ea4\u5230HEAD(git commit)(\u672c\u5730\u5206\u652f\u65f6)\uff1a<ul> <li>\u64a4\u9500\u672c\u6b21\u4fee\u6539\uff1agit reset HEAD^ --hard</li> <li>\u64a4\u9500\u672c\u6b21\u63d0\u4ea4\uff1agit reset HEAD^ --soft</li> </ul> </li> <li>\u56de\u6eda\u5386\u53f2\u7248\u672c ,\u9996\u5148\u9700\u8981\u77e5\u9053commit \u7684ID\uff0c\u7136\u540e\u56de\u6eda\u5230\u8be5Commit : git reset --hard CommitID<ul> <li>HEAD \u4e3a\u672c\u5730\u5206\u652f\u5f53\u524dcommit</li> <li>HEAD^ \u4e0a\u4e00\u4e2a HEAD^^\u4e0a\u4e0a\u4e2a</li> <li>HEAD\uff5e100 \u4e0a100\u4e2a</li> </ul> </li> <li>\u5f53\u672c\u5730\u56de\u6eda\u540e\uff0c\u4e3a\u4e86\u4f7f\u8fdc\u7a0b\u548c\u672c\u5730\u4fdd\u6301\u4e00\u6837\uff0c\u53ef\u4ee5git push --force origin \u4f1a\u4fee\u6539\u8fdc\u7a0b\u5206\u652f\u7684commit</li> <li>\u91cd\u505a\u63d0\u4ea4\u6216\u8005\u5fd8\u8bb0\u5176\u4ed6\u7684\u66f4\u6539</li> </ul> <p>git\u5728\u6bcf\u6b21commit\u65f6\uff0c\u4f1a\u751f\u6210\u4e00\u4e2a\u5feb\u7167\uff0c\u4f46\u6709\u65f6\u6211\u4eec\u53ea\u662f\u7a0d\u5fae\u7684\u6539\u52a8\uff0c\u4e0d\u60f3\u518d\u6dfb\u52a0\u4e00\u4e2acommit\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\uff1a</p> <p><code>bash   git commit --amend</code></p> <p>--amend \u53ef\u4ee5\u5b9e\u73b0\u4e24\u79cd\u60c5\u51b5\uff1a</p> <ul> <li> <p>\u4fee\u6539\u6216\u6dfb\u52a0\u6587\u4ef6</p> <p><code>bash git add forgotten_file git commit --amend</code>   * \u4fee\u6539Coments\u7684\u5185\u5bb9</p> </li> </ul>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#_1","title":"\u7531\u4e8e\u6587\u4ef6\u7684\u72b6\u6001\u4e0d\u540c\uff0c\u56e0\u6b64\u67e5\u770b\u7684\u65b9\u5f0f\u4e5f\u7565\u6709\u4e0d\u540c","text":"<p>git diff # \u67e5\u770bmodified \u4e0e unmodified\u7684\u533a\u522b git diff --cached # \u67e5\u770bstaged \u4e0e unmodified\u7684\u533a\u522b git diff HEAD # \u67e5\u770b\u6700\u65b0\u63d0\u4ea4\u548c\u5f53\u524d\u5de5\u4f5c\u533a\u7684\u533a\u522b HEAD\u53ef\u4ee5\u6362\u6210CommitID  ```   * git fetch  origin \u8fdc\u7a0b\u5206\u652f  \uff1a \u4e0b\u62c9\u8fdc\u7a0b\u4ee3\u7801   * git pull   origin \u8fdc\u7a0b\u5206\u652f  \u7b49\u4ef7\u4e8e</p> <ul> <li>git fetch origin \u8fdc\u7a0b\u5206\u652f</li> <li>git merge origin/\u8fdc\u7a0b\u5206\u652f</li> <li> <p>git pull --rebase  \u7b49\u4ef7\u4e8e</p> </li> <li> <p>git fetch origin \u8fdc\u7a0b\u5206\u652f</p> </li> <li>git rebase origin/\u8fdc\u7a0b\u5206\u652f</li> <li>\u64a4\u9500\uff1a\u64a4\u9500\u7684\u64cd\u4f5c\u6309\u7167Git 2.23.0 \u7248</li> </ul>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#25","title":"2.5  \u5206\u652f\u7ba1\u7406","text":"<ul> <li>\u65b0\u5efa\u5206\u652f</li> </ul> <p><code>bash   git branch \u5206\u652f\u540d\u79f0 # \u65b0\u5efa   git checkout -b  \u5206\u652f\u540d\u79f0 #\u65b0\u5efa\u5e76\u5207\u6362</code> * \u5220\u9664\u5206\u652f</p> <p><code>bash   git branch  -d \u5206\u652f\u540d\u79f0 #\u5408\u5e76\u8fc7\u7684\u5206\u652f   git branch  -D \u5206\u652f\u540d\u79f0  #\u672a\u5408\u5e76\u7684\u5206\u652f   git push --delete origin  \u5206\u652f\u540d\u79f0 #\u5220\u9664\u8fdc\u7a0b\u5206\u652f</code> * \u67e5\u770b\u5206\u652f</p> <p><code>bash   git branch --all #\u67e5\u770b\u6240\u6709\u5206\u652f   git branch -v #\u67e5\u770b\u6240\u6709\u5206\u652f\u7684\u6700\u540e\u4e00\u6b21\u63d0\u4ea4   git branch --merged #\u5408\u5e76\u5230\u672c\u5206\u652f\u7684\u5176\u4ed6\u5206\u652f   git branch --no-merged #\u672a\u5408\u5e76\u5230\u672c\u5206\u652f\u7684\u5176\u4ed6\u5206\u652f</code> * \u66f4\u6539\u5206\u652f\u540d\u79f0</p> <p><code>bash   git branch -m oldname newname</code> * \u63d0\u4ea4\u8fdc\u7aef\u5206\u652f\u5e76\u8ddf\u8e2a</p> <p><code>bash   git push origin \u5206\u652f\u540d\u79f0   git branch --set-upstream-to origin/\u5206\u652f\u540d\u79f0</code> * \u5206\u652f\u7684\u5408\u5e76</p> <p>git merge \u548crebase \u90fd\u53ef\u4ee5\u5b9e\u73b0\u5206\u652f\u7684\u5408\u5e76\uff0c\u4f46\u662f\u4e5f\u5b58\u5728\u4e0d\u540c\u3002</p> <ul> <li> <p>git merge</p> <p><code>bash git merge \u8981\u5408\u5e76\u7684\u5206\u652f\u540d</code></p> <ul> <li>\u4f18\u70b9\uff1a\u662f\u4e00\u4e2a\u5b89\u5168\u7684\u64cd\u4f5c\uff0c\u73b0\u6709\u7684\u5206\u652f\u4e0d\u4f1a\u88ab\u66f4\u6539</li> <li>\u7f3a\u70b9\uff1a\u82e5\u4e0a\u6e38\u7684\u5206\u652f\u8fc7\u4e8e\u6d3b\u8dc3\uff0c\u5bb9\u6613\u6c61\u67d3\u5206\u652f\u5386\u53f2</li> </ul> <p>   * git rebase</p> <p><code>bash git  rebase  \u8981\u5408\u5e76\u7684\u5206\u652f\u540d</code></p> <p>\u9ec4\u91d1\u6cd5\u5219\uff1a\u7edd\u4e0d\u8981\u5728\u516c\u5171\u7684\u5206\u652f\u4e0a\u4f7f\u7528\u5b83\uff01</p> <ul> <li>\u4f18\u70b9\uff1a\u4f1a\u5c06\u5386\u53f2\u5206\u652f\u590d\u5236\uff0c\u4f7f\u9879\u76ee\u5386\u53f2\u5448\u73b0\u51fa\u5b8c\u7f8e\u7684\u7ebf\u6027</li> <li>\u7f3a\u70b9\uff1a\u8fdd\u53cd\u4e86\u9ec4\u91d1\u6cd5\u5219\uff0c\u4f1a\u9020\u6210\u707e\u96be\u6027\u5f71\u54cd\uff0c\u4e14\u56e0\u4e3a\u5386\u53f2\u5206\u652f\u53d1\u751f\u6539\u53d8\uff0c\u53ef\u8ffd\u8e2a\u6027\u4f4e</li> </ul> <p><code>undefined \u4e3e\u4f8b\u5b50\u6765\u8bf4\uff0c\u6bd4\u5982\u5206\u652forigin\u8981\u5408\u5e76\u5230\u5206\u652fmywork\u4e0a - \u5148\u627e\u5230\u4e24\u4e2a\u5206\u652f\u6700\u8fd1\u7684\u5171\u540c\u7956\u5148\u8282\u70b9\uff0c\u7136\u540e\u5c06mywork\u5206\u652f\u4e0a\u4ece\u8fd9\u4e2a\u8282\u70b9\u4e4b\u540e\u7684\u6240\u6709\u63d0\u4ea4\u90fd\u63d0\u53d6\u51fa\u6765\u653e\u5230\u672c\u5730\u6587\u4ef6\u5939\u4e0b\u4f5c\u4e3a\u8865\u4e01\u6587\u4ef6\u5b58\u653e\u3002 - \u5c06\u5206\u652fmywork\u62c9\u53d6\u5230\u5206\u652forigin\u7684\u6700\u65b0\u8282\u70b9 - \u4f9d\u6b21\u5c06\u5b58\u653e\u7684\u8865\u4e01\u6587\u4ef6\u4e00\u4e2a\u4e00\u4e2a\u5e94\u7528\u5230\u5206\u652forigin\u4e0a</code></p> <p>\u4f7f\u7528\u573a\u666f\u533a\u522b</p> <ul> <li>\u5728\u53ea\u6709\u81ea\u5df1\u4f7f\u7528\u7684\u5206\u652f\u53ef\u4ee5\u4f7f\u7528git rebase</li> <li>\u5728\u516c\u5171\u5206\u652f\u4e0a\u4f7f\u7528git merge</li> <li>\u9047\u5230\u51b2\u7a81</li> </ul> <p>```bash</p> </li> <li> <p>\u57fa\u672c\u7528\u6cd5</p> <p>```bash git cherry-pick"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#merge","title":"merge","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#commit","title":"\u4fee\u6539\u5b8c\u540e\uff0c\u63d0\u4ea4commit","text":"<p>git add \u4fee\u6539\u7684\u6587\u4ef6 git commit -m \"Comments\" git push</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#rebase","title":"rebase","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#_2","title":"\u9047\u5230\u51b2\u7a81","text":"<p>git  add  \u4fee\u6539\u7684\u6587\u4ef6 git rebase --continue ```   * \u7ec8\u6b62\u5408\u5e76</p> <p><code>bash git merge --abort gir rebase --abort</code> * \u67d0\u4e2a\u5206\u652f\u7684\u90e8\u5206\u63d0\u4ea4\u2014\u2014git cherry-pick :\u53ea\u8f6c\u79fbCommit \u4e2d\u6dfb\u52a0\u7684\u90e8\u5206\uff0c\u82e5\u662f\u8fde\u7eed\u7684\uff0c\u6700\u597d\u5c06\u8fde\u7eed\u7684Commit\u8fdb\u884c\u8f6c\u79fb</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#commit_1","title":"\u591a\u4e2acommit\u4e00\u8d77\u63d0\u4ea4","text":"<p>git cherry-pick commitA..commitB   #\u8303\u56f4(A,B] git cherry-pick commitA^..commitB  #\u8303\u56f4[A,B] ```   * \u539f\u7406</p> <p></p> <p><code>bash git cherry-pick f  #\u5728master\u5206\u652f\u4e0a\u5c06f\u6dfb\u52a0\u5230Master</code></p> <p>   * <code>bash git cherry-pick \u5206\u652f\u540d\u79f0 #\u5c06\u5206\u652f\u6700\u540e\u4e00\u6b21commit\u6dfb\u52a0\u5230Master</code>   * \u8f6c\u79fb\u591a\u4e2a\u63d0\u4ea4</p> <p><code>bash git cherry-pick &lt;HashA&gt; &lt;HashB&gt;</code>   * \u7ec8\u6b62\u90e8\u5206\u63d0\u4ea4</p> <p><code>bash git cherry-pick --abort #\u56de\u5230\u64cd\u4f5c\u524d git cherry-pick --quit  #\u4e0d\u56de\u5230\u64cd\u4f5c\u524d</code>   * \u5408\u5e76\u51b2\u7a81</p> <p>```bash</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#_3","title":"\u4fee\u6539\u5b8c\u540e","text":"<p>git add . git cherry-pick --continue  ```   * \u8f6c\u79fb\u67d0\u4e2acommit \u4e2d\u90e8\u5206\u6587\u4ef6\u7684\u63d0\u4ea4</p> <p>```bash</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#-n-no-commit","title":"-n --no-commit  \u4e0d\u63d0\u4ea4\uff0c\u5c06\u6dfb\u52a0\u7684\u6587\u4ef6\u653e\u5728\u6682\u5b58\u533a","text":"<p>git cherry-pick -n"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#_4","title":"\u5c06\u4e0d\u9700\u8981\u7684\u6587\u4ef6\u64a4\u9500","text":"<p>git restore --staged \u6587\u4ef6\u540d git restore  \u6587\u4ef6\u540d</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#_5","title":"\u63d0\u4ea4\u9700\u8981\u63d0\u4ea4\u7684\u5185\u5bb9","text":"<p>git commit -m \"Comments\" git push ```</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#26-remotes","title":"2.6  \u8fdc\u7a0b\u4ed3\u5e93 Remotes","text":"<pre><code>git remote # \u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93 \u9ed8\u8ba4\u8fdc\u7a0b\u4ed3\u5e93\u4e3aorigin \ngit remote add RemoteName url # \u9ed8\u8ba4\u4e3aorigin,\u8fd9\u662fGit\u4e3a\u4f60\u514b\u9686\u7684\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u9ed8\u8ba4\u540d\u79f0\ngit remote remove \u8fdc\u7a0b\u4ed3\u5e93\u540d #\u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\ngit remote rename oleRemoteName newRemoteName #\u91cd\u547d\u540d\u8fdc\u7a0b\u4ed3\u5e93\n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#27","title":"2.7 \u6807\u7b7e","text":"<p>\u5c06\u4ed3\u5e93\u4e2d\u91cd\u8981\u7684\u7248\u672c\u6dfb\u52a0\u7279\u5b9a\u6807\u8bb0</p> <pre><code>git tag #\u663e\u793a\u6240\u6709\u7684tag\ngit tag tagname # \u6dfb\u52a0\u6807\u8bb0\ngit tag -a tagname -m Comments#\u7ed9\u6807\u8bb0\u521b\u5efa\u6ce8\u91ca\ngit push origin tagname #\u63a8\u9001\u6807\u8bb0\ngit push origin --tags #\u63a8\u9001\u6240\u6709\u6807\u8bb0\ngit checkout tagname #\u67e5\u770b\u6807\u8bb0\u6240\u5728\u7684commit \n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#28-git","title":"2.8 git \u64cd\u4f5c\u522b\u540d","text":"<p>\u53ef\u4ee5\u5bf9git\u7684\u4e00\u4e9b\u64cd\u4f5c\u8bbe\u7f6e\u522b\u540d</p> <pre><code>git config --global alias.othername \u539f\u6709\u7684\u64cd\u4f5c\u540d\u79f0\u5982checkout\ngit config --global alias.co checkout #\u6b64\u65f6\u53ef\u4ee5\u91c7\u7528co \u4ee3\u66ffcheckout\n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#29-git","title":"2.9 git\u914d\u7f6e","text":"<p>\u53ea\u8bb0\u5f55\u5ba2\u6237\u7aef\u7684\u914d\u7f6e\uff0c\u670d\u52a1\u7aef\u7684\u914d\u7f6e\u4e0d\u8fdb\u884c\u8bb0\u5f55\u3002\u901a\u8fc7\u4ee5\u4e0b\u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u4f7fgit\u81ea\u5b9a\u4e49\u7684\u8fd0\u884c</p> <ul> <li> <p>git \u4f7f\u7528\u4e00\u7cfb\u5217\u7684\u914d\u7f6e\u6587\u4ef6\u6765\u786e\u5b9a\u884c\u4e3a\uff0c\u4e3b\u8981\u5b58\u50a8\u4e8e(system,global,local),\u540e\u8005\u4f1a\u8986\u76d6\u524d\u8005\u3002</p> </li> <li> <p>--system \u5b58\u50a8\u4e8e\u6587\u4ef6<code>[path]/etc/gitconfig</code></p> </li> <li>--global  \u5b58\u50a8\u4e8e\u6587\u4ef6<code>~/.gitconfig</code> (or<code>~/.config/git/config</code>) \uff0c\u548c\u7528\u6237\u6709\u5173\u7cfb</li> <li>--local     \u5b58\u50a8\u4e8e\u6587\u4ef6<code>.git/config</code>,\u5f53\u524d\u4ed3\u5e93\u7684git config\u6587\u4ef6</li> </ul> <p><code>bash   #\u5c06\u7528\u6237\u540d\u548c\u90ae\u7bb1\u914d\u7f6e\u5728global   $ git config --global user.name \"John Doe\"   $ git config --global user.email johndoe@example.com</code></p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#210-git-stash","title":"2.10 git stash","text":"<ul> <li>git stash</li> </ul> <p>\u5c06\u6240\u6709\u672a\u63d0\u4ea4\u7684\u4fee\u6539\uff08\u8303\u56f4\u5305\u62ec\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\uff09\u4fdd\u5b58\u81f3\u5806\u6808\u4e2d\uff0c\u7528\u4e8e\u6062\u590d\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55.</p> <p><code>bash   #\u5f53\u5728\u5f00\u53d1\u5206\u652fdev\u5f00\u53d1\u4e00\u534a\u65f6\uff0c\u9700\u8981\u7d27\u6025\u5f00\u53d1\u53e6\u4e00\u4e2a\u4efb\u52a1\uff0c\u53ef\u4ee5\u5148\u5c06\u5176\u4fdd\u5b58\u8d77\u6765   dev: git stash   dev: git status      On branch master      nothing to commit, working tree clean   #\u5f53\u9700\u8981\u518d\u5f00\u53d1\u65f6\uff0c\u53ef\u4ee5pop\u51fa\u6765\uff0c\u4e14\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5206\u652f\uff0c\u4e0d\u4e00\u5b9a\u975e\u8981\u5728dev\u5206\u652f   dev: git stash pop</code></p> <ul> <li>git  stash save </li> </ul> <p>\u7b49\u540c\u4e8e<code>git stash</code>,\u4f46\u662f\u4e3a\u6bcf\u4e2a\u4fdd\u5b58\u63d0\u4f9b\u4e86\u6ce8\u91ca</p> <p><code>bash   git stash save \"test1\"</code></p> <ul> <li>git stash list</li> </ul> <p>\u67e5\u770b\u5f53\u524dstash\u7684\u5185\u5bb9</p> <p><code>bash    $ git stash list    stash@{0}: On master: test2    stash@{1}: On master: test1</code></p> <ul> <li>git stash pop</li> </ul> <p>\u5c06\u6808\u9876\u4fdd\u5b58\u7684\u4fee\u6539\u5f39\u51fa\uff0c\u5e94\u7528\u5230\u5f53\u524d\u5206\u652f\u5bf9\u5e94\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u5e76\u5c06\u5176\u4ece\u6808\u9876\u5220\u9664</p> <ul> <li>git stash apply + \u540d\u79f0</li> </ul> <p>\u5e94\u7528<code>stash@{0}</code>\u5230\u5f53\u524d\u5206\u652f\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u4e14\u4e0d\u4f1a\u5c06\u5176\u4ece\u6808\u5806\u4e2d\u5220\u9664</p> <p><code>bash   git stash apply stash@{0}</code></p> <ul> <li>git stash drop+\u540d\u79f0</li> </ul> <p>\u5c06\u6307\u5b9a\u7684\u5982<code>stash@{0}</code>\u4ece\u6808\u5806\u4e2d\u5220\u9664</p> <p><code>bash   git stash drop stash@{0}</code></p> <ul> <li>git stash clear</li> </ul> <p>\u4ece\u5806\u6808\u4e2d\u6e05\u9664\u6240\u6709\u7684stash</p> <ul> <li>git stash show</li> </ul> <p>\u67e5\u770b\u5806\u6808\u4e2d\u6700\u65b0\u4fdd\u5b58\u7684stash\u548c\u5f53\u524d\u76ee\u5f55\u7684\u5dee\u5f02</p> <p><code>bash   git stash show @stash{0} #\u67e5\u770b\u6307\u5b9a\u7684stash\u548c\u5f53\u524d\u76ee\u5f55\u5dee\u5f02\u3002   git stash show -p \u540d\u79f0  #\u67e5\u770b\u8be6\u7ec6\u7684\u4e0d\u540c</code></p> <ul> <li>git stash branch</li> </ul> <p>\u4ece\u6700\u65b0\u7684stash\u521b\u5efa\u5206\u652f\u3002</p> <p>\u5f53stash\u4e2d\u7684\u5185\u5bb9\u548c\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u6709\u51b2\u7a81\u65f6\uff0c\u53ef\u4ee5\u65b0\u5efa\u5206\u652f\u53bb\u89e3\u51b3\u51b2\u7a81\u3002</p> <ul> <li> <p>\u5e94\u7528\u573a\u666f\uff1a</p> </li> <li> <p>\u5f53\u6b63\u5728dev\u5206\u652f\u4e0a\u5f00\u53d1\u67d0\u4e2a\u9879\u76ee\uff0c\u8fd9\u65f6\u9879\u76ee\u4e2d\u51fa\u73b0\u4e00\u4e2abug\uff0c\u9700\u8981\u7d27\u6025\u4fee\u590d\uff0c\u4f46\u662f\u6b63\u5728\u5f00\u53d1\u7684\u5185\u5bb9\u53ea\u662f\u5b8c\u6210\u4e00\u534a\uff0c\u8fd8\u4e0d\u60f3\u63d0\u4ea4\uff0c\u8fd9\u65f6\u53ef\u4ee5\u7528git stash\u547d\u4ee4\u5c06\u4fee\u6539\u7684\u5185\u5bb9\u4fdd\u5b58\u81f3\u5806\u6808\u533a\uff0c\u7136\u540e\u987a\u5229\u5207\u6362\u5230hotfix\u5206\u652f\u8fdb\u884cbug\u4fee\u590d\uff0c\u4fee\u590d\u5b8c\u6210\u540e\uff0c\u518d\u6b21\u5207\u56de\u5230dev\u5206\u652f\uff0c\u4ece\u5806\u6808\u4e2d\u6062\u590d\u521a\u521a\u4fdd\u5b58\u7684\u5185\u5bb9\u3002</p> </li> <li>\u7531\u4e8e\u758f\u5ffd\uff0c\u672c\u5e94\u8be5\u5728dev\u5206\u652f\u5f00\u53d1\u7684\u5185\u5bb9\uff0c\u5374\u5728master\u4e0a\u8fdb\u884c\u4e86\u5f00\u53d1\uff0c\u9700\u8981\u91cd\u65b0\u5207\u56de\u5230dev\u5206\u652f\u4e0a\u8fdb\u884c\u5f00\u53d1\uff0c\u53ef\u4ee5\u7528git stash\u5c06\u5185\u5bb9\u4fdd\u5b58\u81f3\u5806\u6808\u4e2d\uff0c\u5207\u56de\u5230dev\u5206\u652f\u540e\uff0c\u518d\u6b21\u6062\u590d\u5185\u5bb9\u5373\u53ef\u3002</li> </ul> <p>\u603b\u7684\u6765\u8bf4\uff0cgit stash\u547d\u4ee4\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u76ee\u524d\u8fd8\u4e0d\u60f3\u63d0\u4ea4\u7684\u4f46\u662f\u5df2\u7ecf\u4fee\u6539\u7684\u5185\u5bb9\u8fdb\u884c\u4fdd\u5b58\u81f3\u5806\u6808\u4e2d\uff0c\u540e\u7eed\u53ef\u4ee5\u5728\u67d0\u4e2a\u5206\u652f\u4e0a\u6062\u590d\u51fa\u5806\u6808\u4e2d\u7684\u5185\u5bb9\u3002\u8fd9\u4e5f\u5c31\u662f\u8bf4\uff0cstash\u4e2d\u7684\u5185\u5bb9\u4e0d\u4ec5\u4ec5\u53ef\u4ee5\u6062\u590d\u5230\u539f\u5148\u5f00\u53d1\u7684\u5206\u652f\uff0c\u4e5f\u53ef\u4ee5\u6062\u590d\u5230\u5176\u4ed6\u4efb\u610f\u6307\u5b9a\u7684\u5206\u652f\u4e0a\u3002git stash\u4f5c\u7528\u7684\u8303\u56f4\u5305\u62ec\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u4e2d\u7684\u5185\u5bb9\uff0c\u4e5f\u5c31\u662f\u8bf4\u6ca1\u6709\u63d0\u4ea4\u7684\u5185\u5bb9\u90fd\u4f1a\u4fdd\u5b58\u81f3\u5806\u6808\u4e2d\u3002</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#3git","title":"3\u3001git \u7ecf\u5178\u4f7f\u7528\u573a\u666f","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#31-commitcommit-coment","title":"3.1  \u5f53\u4e0d\u60f3\u589e\u52a0commit\u65f6\uff0c\u5374\u9700\u8981\u4fee\u6539\u6587\u4ef6\u6216\u4fee\u6539Commit Coment","text":"<pre><code>git add \u4fee\u6539\u6587\u4ef6\ngit commit --amend #\u4f1a\u51fa\u73b0Vim\n</code></pre> <p>\u5728Vim\u4e2d\u91cd\u65b0\u4fee\u6539Comments\u5185\u5bb9\u3002</p> <p>\u82e5\u5df2\u7ecfpush\u5230\u8fdc\u7aef\uff0c\u9700\u8981</p> <pre><code>git push --force\n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#32-commit","title":"3.2   \u672c\u5730\u6e05\u7406\uff0c\u4f7fcommit\u5408\u5e76\u6210\u4e00\u4e2a","text":"<ul> <li>\u7b2c\u4e00\u79cd: git rebase -i</li> </ul> <p><code>bash   git rebase -i HEAD~n #n \u8868\u793a\u5408\u5e76\u7684\u5206\u652f\u6570</code></p> <p>\u6b64\u65f6\uff0c\u8fdb\u5165\u5230Vim,\u5c06\u7b2c\u4e00\u4e2a\u4fdd\u7559\u4e0d\u53d8\uff0c\u5c06\u5269\u4e0b\u7684commit \u6362\u6210\u64cd\u4f5c\u7b26  <code>s</code></p> <p></p> <p>\u9000\u51fa\u4fdd\u5b58\u540e\uff0c\u4f1a\u5c55\u73b0\u4ee5\u524d\u6240\u6709\u7684commit comment</p> <p></p> <p>\u4fee\u6539\u4e3a\u540c\u4e00\u4e2aComment</p> <p> * \u7b2c\u4e8c\u79cd\uff1agit reset \u91c7\u7528\u56de\u6eda\u64cd\u4f5c</p> <p><code>bash   #\u56de\u6eda\u5230\u8981\u5408\u5e76Commit \u6700\u5f00\u59cb\u7684\u90a3\u4e2a   git log #\u67e5\u627eCommit id   git reset --soft CommitID   git commit -m \"\u91cd\u65b0\u5199\u4e00\u4e2aComment\"   git push</code></p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#33-alpha","title":"3.3   \u5206\u652f\u5f00\u53d1\u5b8c\u540e\uff0c\u5408\u5e76\u5230\u53d1\u7248\u5206\u652f(\u4ee5\u5fae\u535a\u5408\u5e76alpha\u4e3a\u4f8b)","text":"<ul> <li>\u62c9\u53d6develop\u6700\u65b0\u4ee3\u7801</li> </ul> <p><code>bash   git checkout develop   git pull --rebase</code></p> <ul> <li>\u5bf9\u672c\u5730\u5206\u652f\u8fdb\u884cCommit \u5408\u5e76</li> </ul> <p><code>bash   git st #\u67e5\u8be2\u6709\u51e0\u4e2acommits \u6570\u91cf \u6309\u7167\u524d\u9762\u7684\u6d41\u7a0b\u6b64\u65f6\u4e3a1   #\u82e5\u8d85\u8fc7\u4e00\u4e2a \u5728git push review\u65f6\u4f1a\u81ea\u52a8\u5408\u5e76\uff0c\u5e76\u8981\u6c42\u586b\u5199\u65b0\u7684coments</code></p> <p><code>bash   git checkout local   git rebase  -i  HEAD~n  #n \u8868\u793a\u5408\u5e76\u7684\u5206\u652f\u6570 \u5177\u4f53\u6d41\u7a0b\u770b\u4e0a\u9762</code></p> <ul> <li>\u5c06develop\u5408\u5e76\u5230\u672c\u5730\u5206\u652f</li> </ul> <p><code>bash   git rebase develop    #\u82e5\u6709\u51b2\u7a81 \u89e3\u51b3\u51b2\u7a81   git add .   git rebase --continue</code></p> <ul> <li>\u6ca1\u6709\u95ee\u9898\u540e,\u5c06\u672c\u5730\u5206\u652f\u5408\u5e76\u5230develop</li> </ul> <p><code>bash   git checkout develop   git merge local</code></p> <ul> <li>\u4fee\u6539Commit \u5185\u5bb9</li> </ul> <p><code>bash   git reset HEAD^ --soft  #\u56de\u9000\u5230commit\u4e4b\u524d\uff0c\u6b64\u65f6\u53ef\u4ee5\u4fee\u6539Commit\u5185\u5bb9   #git reset HEAD^ --hard \u56de\u9000\u5230Add\u4e4b\u524d   git comment --amend #\u8fd9\u6837\u4e5f\u884c</code></p> <p>\u7136\u540e\u6309\u7167\u63d0\u4f9b\u7684\u6a21\u7248\u8fdb\u884cCommit  coments\u7684\u63d0\u4ea4</p> <p><code>Vim   [comments]\u8363\u8000\u7684\u89d2\u6807\u9002\u914d   [jira_id]WBMOBILE-8122   [version]B93</code></p> <p>\u6b64\u65f6\u4f1a\u81ea\u52a8\u751f\u6210Change-Id</p> <ul> <li> <p>push\u5230\u8fdc\u7aef</p> </li> <li> <p>\u5355\u4e2a\u4ed3\u5e93</p> <p><code>bash  git pull --rebase             ###\u5148\u66f4\u65b0\u5f53\u524d\u4ed3\u5e93\u4ee3\u7801  git push review               ###\u8fd0\u884c\u6b64\u547d\u4ee4\u5f80Gerrit\u63a8\u9001Code Review</code>   * \u591a\u4e2a\u4ed3\u5e93</p> <p>```bash</p> </li> </ul> <p>\u9047\u5230\u7684\u95ee\u9898\uff1a</p> <p></p> <p>\u51fa\u73b0\u8be5\u4e0a\u8ff0\u7684\u6587\u4ef6\uff0c\u53c8\u4e0d\u80fd\u5ffd\u7565\uff0c\u53c8\u4e0d\u80fdrestore,restore\u65f6\u4f1a\u63d0\u793a</p> <p><code>bash   error: pathspec '.DS_Store' did not match any file(s) known to git</code></p> <p>\u6700\u540e\u5904\u7406\u65b9\u6cd5\uff1a\u5c06\u6240\u6709\u4fee\u6539\u8fc7\u7684\u4ed3\u5e93\uff0c\u91cd\u65b0\u4fee\u6539pull\u4e00\u4e0b\u3002</p> <ul> <li> <p>\u82e5\u9700\u8981\u5bf9Commit\u8fdb\u884c\u4fee\u6539</p> </li> <li> <p>\u5355\u4e2a\u4ed3\u5e93</p> <p><code>bash git add file_path          (file_path\u4e3a\u4f60\u66f4\u6539\u7684\u6587\u4ef6\u8def\u5f84\u5730\u5740) git commit --amend        (\u6ce8\u610f\uff0c\u52a0\u4e0a --amend) git push review</code>   * \u591a\u4e2a\u4ed3\u5e93</p> <p>```bash</p> </li> </ul>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#_6","title":"\u5207\u6362\u5230\u4ed3\u5e93\u7684\u6700\u5916\u5c42","text":"<p>wbpush \"yourTopic\"</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#topic-topic123","title":"Topic\u5fc5\u987b\u4e3a\u5b57\u6bcd\u4e0e\u6570\u5b57\u7684\u7ec4\u5408,\u5982: topic123","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#topic_-topic123_topic45","title":"Topic\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u4e8e\u5fc5\u987b\u4ee5\u4e0b\u5212\u7ebf\u201d_\u201d\u533a\u5206,\u5982: topic123_topic45","text":"<p>```</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#_7","title":"\u5148\u66f4\u6539\u5355\u4e2a\u6587\u4ef6","text":"<p>git add file_path          (file_path\u4e3a\u4f60\u66f4\u6539\u7684\u6587\u4ef6\u8def\u5f84\u5730\u5740) git commit --amend        (\u6ce8\u610f\uff0c\u52a0\u4e0a --amend)</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#abandon-changes-changid","title":"\u82e5\u6267\u884c abandon changes \u5219\u9700\u8981\u5c06ChangID \u5220\u9664","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#abandon-changeschangid","title":"\u82e5\u672a\u6267\u884c abandon changes\uff0c\u5207\u8bb0\u4e0d\u8981\u4fee\u6539ChangID","text":""},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#push","title":"\u6b64\u65f6\uff0c\u8981\u786e\u4fdd\u662f\u6700\u65b0\u7684\u8fdc\u7aef\u4ee3\u7801\uff0c\u5728push\u591a\u4e2a\u4ed3\u5e93","text":"<p>./wbpush \"yourTopic\" --amend  ```</p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#34-commit","title":"3.4   \u5408\u5e76\u5206\u652f\u7684\u67d0\u4e2aCommit","text":"<p>\u901a\u8fc7cherry-pick\u5b9e\u73b0\u5408\u5e76\u5206\u652f\u7684\u67d0\u4e2aCommit\uff0c\u5047\u5982\u8981\u5728a\u5206\u652f\u4e0a\u5408\u5e76b\u5206\u652f\u7684\u67d0\u4e2acommit</p> <ul> <li>\u67e5\u627e\u8981\u5408\u5e76\u7684CommitId</li> </ul> <p><code>bash   git checkout b   git log</code> * \u627e\u5230CommitID\u540e\u8fdb\u884c\u5408\u5e76</p> <p>\u56e0\u4e3a\u6bcf\u4e00\u4e2acommit \u53ea\u4fdd\u5b58\u5b83\u81ea\u5df1\u7684\u589e\u91cf\uff0c\u82e5\u4e0e\u524d\u9762\u7684\u7248\u672c\u6709\u5173\uff0c\u8bf7\u52a0\u4e0a\u524d\u9762\u7684CommitID</p> <p><code>bash   git checkout a  #\u5207\u6362\u5230a\u5206\u652f   git cherry-pick &lt;commitHash&gt; #\u6dfb\u52a0\u4e00\u4e2aCommit   git cherry-pick &lt;commitHashA&gt; &lt;commitHashB&gt; #\u6dfb\u52a0commitID \u4eceA\u5230\u6240\u6709\u7684Commit</code> * \u82e5\u5b58\u5728\u51b2\u7a81\uff0c\u89e3\u51b3\u51b2\u7a81\u540e</p> <p><code>bash   git add \u4fee\u6539\u6587\u4ef6   git cherry-pick --continue</code> * \u82e5\u8981\u7ec8\u6b62\uff0c\u56de\u5230\u5408\u5e76\u524d</p> <p><code>bash   git cherry-pick --abort</code></p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#35-commit","title":"3.5  \u5408\u5e76\u67d0\u4e2a\u5206\u652f\u67d0\u4e2aCommit \u7684\u90e8\u5206\u5185\u5bb9","text":"<p>\u901a\u8fc7cherry-pick\u5b9e\u73b0\u5408\u5e76\u5206\u652f\u7684\u67d0\u4e2aCommit\u7684\u90e8\u5206\u6587\u4ef6\uff0c\u67e5\u627eCommitID\u7684\u65b9\u6cd5\u5728\u4e0a\u9762\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002</p> <ul> <li>git cherry-pick -n  \u5408\u5e76\uff0c\u4f46\u4e0d\u63d0\u4ea4\uff0c\u5c06\u6587\u4ef6\u653e\u5728\u6682\u5b58\u533a</li> </ul> <p><code>bash   git cherry-pick -n  &lt;commitHash&gt;</code> * \u5c06\u4e0d\u9700\u8981\u7684\u6587\u4ef6\u64a4\u9500</p> <p><code>bash   git restore --staged \u6587\u4ef6\u540d   git restore  \u6587\u4ef6\u540d</code> * \u63d0\u4ea4\u5269\u4e0b\u7684\u5185\u5bb9</p> <p><code>bash   git commit -m \"Comments\"   git push</code></p> <p>\u4e5f\u53ef\u4ee5\u901a\u8fc7\uff0c\u5148\u5c06\u6574\u4e2acommit \u63d0\u4ea4\uff0c\u518d\u8fd4\u56de\u5220\u9664\u7684\u65b9\u5f0f</p> <p><code>bash  git cherry-pick &lt;commitHash&gt;  git reset --soft HEAD^  git restore --staged \u6587\u4ef6\u540d  git restore  \u6587\u4ef6\u540d  git commit -m \"Comments\"  git push</code></p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#36","title":"3.6 \u7528\u6237\u540d\u7684\u4fee\u6539","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u80fd\u5728\u4e0d\u540c\u7684\u4ed3\u5e93\u62c5\u4efb\u4e0d\u540c\u7684\u89d2\u8272\uff0c\u7528\u6237\u540d\u9700\u8981\u4fee\u6539\uff0c\u53ef\u4ee5\u4fee\u6539\u4ed3\u5e93\u672c\u5730\u7684\u914d\u7f6e\uff0c\u800c\u4e0d\u5f71\u54cd\u5176\u4ed6\u4ed3\u5e93\u3002</p> <pre><code>git config --local user.name \"John Doe\"\ngit config --local user.email johndoe@example.com\n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#37-bug","title":"3.7  \u5de5\u4f5c\u4fee\u6539Bug","text":"<ul> <li>\u5728\u4fee\u6539\u7684\u7248\u672c(release)\u62c9\u51fa\u65b0\u7684\u5206\u652f</li> </ul> <p><code>bash   git checkout -b newBranch</code> * \u8fdb\u884c\u4fee\u6539 * \u5408\u5e76\u5230\u7248\u672c\u4e2d\uff0c\u6309\u7167\u5408\u5e76\u5230\u53d1\u7248\u5206\u652f\u7684\u6d41\u7a0b\u8fdb\u884c(3.3) * \u5176\u4ed6\u6b63\u5728\u4fee\u6539\u7684\u5206\u652f\u9700\u8981\u66f4\u65b0</p> <p><code>bash   git checkout release    git pull   git checkout \u4fee\u6539\u7684\u5206\u652f   git rebase  release</code></p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#38","title":"3.8 \u4ee3\u7801\u56de\u6eda\u7684\u573a\u666f","text":"<ul> <li>\u5feb\u901f\u3001\u7a33\u5065\u3001\u7d27\u5f20</li> <li>git reset  \u624b\u52a8\u56de\u6eda\u7684\u64cd\u4f5c</li> </ul> <p><code>bash   #\u67e5\u770b\u8981\u56de\u6eda\u7684\u7248\u672c   git log --oneline   #git reset \u64cd\u4f5cmaster\u5206\u652f   git reset --hard CommitID   #\u5f3a\u5236\u63a8\u9001\u5230\u8fdc\u7aef   git push --force     #\u82e5\u8981\u67e5\u627e\u56de\u6eda\u540e\u4e0d\u5b58\u5728\u7684\u7248\u672c   git reflog</code></p> <p>\u8fd9\u4e2a\u6d41\u7a0b\u662f\u6709\u98ce\u9669\u7684\uff0c\u65e0\u6cd5\u63a7\u5236,\u9002\u5408\u5728\u81ea\u5df1\u7684\u5206\u652f\uff0c\u4f46\u4e0d\u9002\u5408\u5728\u53d1\u7248\u5206\u652f</p> <p> * \u5229\u7528\u5f00\u6e90\u5de5\u5177github gitlab\u7b49 pull Request</p> <p><code>bash   git log   #\u56de\u6eda\u5230\u60f3\u56de\u6eda\u7684\u7248\u672c   git revert  CommitID   #\u82e5\u51fa\u73b0\u51b2\u7a81   git add \u4fee\u6539\u51b2\u7a81\u6587\u4ef6   git commit -m \"\u89e3\u51b3\u51b2\u7a81\"   git push</code></p> <p>\u8fd9\u4e2a\u6d41\u7a0b\u6bd4\u8f83\u5b89\u5168\uff0c\u53d1\u7248\u5206\u652f\u5efa\u8bae\u4f7f\u7528\u8fd9\u4e2a\u65b9\u5f0f</p> <p></p>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#39-git-pull","title":"3.9  git pull\u65f6\uff0c\u89e3\u51b3\u51b2\u7a81","text":"<pre><code>git status --uno #\u67e5\u770b\u51b2\u7a81\u7684\u6587\u4ef6\n#\u4fee\u6539\u540e\u6dfb\u52a0\ngit add .\ngit commit -m \"\"\ngit push\n</code></pre>"},{"location":"DevTools/Git/Git%E6%95%99%E7%A8%8B%E5%88%86%E4%BA%AB/#ssl","title":"\u5904\u7406SSL\u4ee3\u7406\u95ee\u9898\uff1a","text":"<pre><code>git config --global -e\n</code></pre> <p>1.\u82e5\u8bbe\u7f6e\u4ee3\u7406,\u5728git\u5168\u5c40\u914d\u7f6e\u4e0a\uff0c</p> <p><code>bash    #7891 \u662fvpn\u4ee3\u7406\u53f7    [http]            proxy = socks5://127.0.0.1:7891            #sslverify = false    [https]            proxy = socks5://127.0.0.1:7891            #sslverify = false</code></p> <p>2.\u82e5\u672a\u8bbe\u7f6e\u4ee3\u7406\uff0c\u8bbe\u7f6esslverify = false\u3002</p>"},{"location":"DevTools/Git/Mac%E4%BD%BF%E7%94%A8homebrew%E4%B8%8B%E8%BD%BDgit/","title":"Mac \u4f7f\u7528homebrew\u4e0b\u8f7dgit","text":"<p>1\u3001\u767b\u9646git\u5b98\u7f51\uff0c\u4f7f\u7528\u7b2c\u4e00\u79cd\u65b9\u5f0f\u5b89\u88c5</p> <p>https://git-scm.com/download/mac</p> <p>2\u3001\u70b9\u51fbhomebrew,\u9009\u62e9\u8bed\u8a00\u7248\u672c\uff0c\u590d\u5236\u4e0b\u8f7d\u8bed\u53e5</p> <p>/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"</p> <p>3\u3001\u7531\u4e8e\u6211\u7684\u662fzsh shell,\u5207\u6362\u6210bash shell.\u6253\u5f00\u7ec8\u7aef\uff0c\u8f93\u5165chsh -s /bin/bash</p> <p>4\u3001\u91cd\u542f\u7ec8\u7aef\u540e\uff0c\u5c06\u590d\u5236\u7684\u4e0b\u8f7d\u8bed\u53e5\u7c98\u8d34\u5230\u7ec8\u7aef\uff0c\u6267\u884c\uff0c\u4e00\u8def\u8f93\u5165sudo \u5bc6\u7801\u5373\u53ef\u3002</p> <p>5\u3001\u63d0\u793a\u9700\u8981\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528vi\u547d\u4ee4\u8fdb\u884c\u73af\u5883\u53d8\u91cf\u7684\u6dfb\u52a0\uff0c\u4f46\u662f\u4f1a\u51fa\u9519\u3002</p> <p>\u9047\u5230\u7684\u95ee\u9898</p> <ul> <li>\u5b89\u88c5\u6210\u529f\u4f46\u662f\u6709\u4e00\u4e2aWarning\u548cnext step\u7684\u63d0\u793a</li> </ul> <p></p> <p></p> <ul> <li> <p>\u9996\u5148\u6211\u6309\u7167\u63d0\u793a\u5728.bash_profile\u6dfb\u52a0<code>$(/opt/homebrew/bin/brew shellenv)</code>\uff0c\u4f46\u662f\u6211\u53d1\u73b0\u6240\u6709\u7684\u547d\u4ee4not commend,</p> </li> <li> <p>\u6240\u4ee5\u53ea\u80fd\u6267\u884c</p> <p><code>bash export PATH=\"/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin\"</code></p> <p>\u8fd9\u6837\u5c31\u53ef\u4ee5\u91cd\u65b0\u6253\u5f00.bash_profile\u6587\u4ef6\uff0c\u5c06\u6dfb\u52a0\u7684\u5220\u9664\u6389</p> </li> <li> <p>\u4f46\u662f\u4ecd\u7136\u4f1a\u62a5\u9519\uff1a brew not commend</p> </li> <li> <p>\u6267\u884c\uff1a</p> <p><code>bash export PATH=$PATH:/opt/homebrew/bin</code></p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u662f\u5c06brew\u547d\u4ee4\u653e\u5728\u7ec8\u7aef\u4e2d\uff0c\u81f3\u6b64\u53ef\u4ee5\u4f7f\u7528\u3002</p> </li> <li> <p>\u73af\u5883\u53d8\u91cf\u914d\u7f6e,\u653e\u5728.bash_profile</p> </li> </ul> <p><code>bash   export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles/bottles</code></p> <ul> <li>\u4e00\u4e9b\u6e90\u7684\u94fe\u63a5</li> </ul> <p><code>xml   //\u6e05\u534e\u6e90   https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles</code></p> <p>6\u3001brew install git</p> <p>7\u3001git --version \u663e\u793a\u7248\u672c\u5373\u4e3a\u6210\u529f\u3002</p>"},{"location":"Flutter/Base/","title":"Flutter\u57fa\u7840\u5165\u95e8","text":""},{"location":"Flutter/Base/#1mac","title":"1\u3001Mac \u5b89\u88c5","text":"<ul> <li>\u914d\u7f6eSDK</li> <li> <p>\u4e0b\u8f7dSDK</p> </li> <li> <p>\u914d\u7f6e\u73af\u5883\u53d8\u91cf</p> <p><code>bash  export PATH=\"$PATH:`pwd`/flutter/bin\"</code></p> </li> </ul> <p><code>pwd</code>\u4e3aflutter SDK\u7684\u89e3\u538b\u8def\u5f84</p> <ul> <li>\u68c0\u67e5\u4f9d\u8d56\u9879</li> </ul> <p><code>bash   flutter doctor</code></p> <p>\u6309\u7167\u63d0\u793a\u5c06\u6240\u6709\u7684\u9519\u8bef\u4fee\u6539\u8fc7\u6765\uff0c\u76f4\u5230\u68c0\u6d4b\u6ca1\u6709\u95ee\u9898</p> <ul> <li> <p>\u5b89\u88c5Android studio\u5c31\u53ef\u4ee5\u4f7f\u7528</p> </li> <li> <p>\u5b89\u88c5Flutter\u548cDart\u63d2\u4ef6</p> </li> <li> <p>\u914d\u7f6eVSCode</p> </li> <li> <p>\u4e0b\u8f7dFlutter\u63d2\u4ef6</p> </li> </ul>"},{"location":"Flutter/Base/#2hello-word","title":"2\u3001Hello Word \u7b2c\u4e00\u4e2a\u5b9e\u4f8b","text":"<ul> <li>\u70ed\u66f4\u65b0   \u53ef\u4ee5\u968f\u65f6\u66f4\u65b0</li> <li>Vscode  <code>o</code>\u5207\u6362\u9884\u89c8\u6a21\u5f0f \u5982Android ios mac</li> </ul>"},{"location":"Flutter/Base/#3","title":"3\u3001\u5e38\u7528\u7ec4\u4ef6","text":""},{"location":"Flutter/Base/#31-text","title":"3.1 Text\u5e38\u7528\u7ec4\u4ef6","text":"<ul> <li>TextAlign    \u6587\u672c\u5bf9\u9f50\u65b9\u5f0f</li> <li>maxLines    \u8bbe\u7f6e\u884c\u6570</li> <li>overflow    \u8bbe\u7f6e\u6587\u672c\u6ea2\u51fa</li> <li>clip     \u76f4\u63a5\u5207\u65ad</li> <li>ellipsis \u663e\u793a\u7701\u7565\u53f7</li> <li>fade    \u663e\u793a\u6e10\u53d8\u6548\u679c</li> <li>style</li> </ul>"},{"location":"Flutter/Base/#32-container","title":"3.2 Container\u7ec4\u4ef6","text":"<ul> <li>Alignment  \u5bb9\u5668\u5185child\u7684\u5bf9\u5176\u65b9\u5f0f   \u7eb5\u5411+\u6a2a\u5411</li> <li>\u5bbd\u9ad8\u548c\u989c\u8272\u5c5e\u6027  \u548c\u524d\u7aefhtml\u4e00\u81f4</li> <li>padding     \u5185\u8fb9\u8ddd</li> <li>const EdgeInsets.all(data)</li> <li>const EdgeInsets.fromLTRB(v1,v2,v3,v4)</li> <li>margin.      \u5916\u8fb9\u8ddd</li> <li>const EdgeInsets.all(data)</li> <li>const EdgeInsets.fromLTRB(v1,v2,v3,v4)</li> <li>decoration  \u88c5\u9970 \u4fee\u9970\u80cc\u666f\u548c\u8fb9\u6846</li> <li>BoxDecoration \u5b9e\u73b0\u6e10\u53d8</li> <li>border \u8fb9\u6846</li> </ul>"},{"location":"Flutter/Base/#33-image","title":"3.3 Image \u56fe\u7247\u7ec4\u4ef6\u7684\u4f7f\u7528","text":"<ul> <li>\u52a0\u8f7d\u56fe\u7247\u7684\u65b9\u5f0f</li> <li> <p>Image.asset:  \u52a0\u8f7d\u8d44\u6e90\u56fe\u7247\uff0c\u5c31\u662f\u5c06\u52a0\u8f7d\u9879\u76ee\u8d44\u6e90\u76ee\u5f55\u4e2d\u7684\u56fe\u7247\uff0c\u52a0\u5165\u56fe\u7247\u540e\u4f1a\u589e\u5927\u6253\u5305\u7684\u4f53\u79ef\uff0c\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84</p> <p>\u52a0\u8f7d\u76f8\u5bf9\u8def\u5f84\u65f6\uff0c\u9700\u8981\u5728pubsec.yaml\u4e2d\u6dfb\u52a0</p> <p><code>dart   assets:   - images/1.webp //\u76f8\u5bf9\u8def\u5f84\u7684\u8d44\u6e90</code></p> </li> <li> <p>Image.network:  \u7f51\u7edc\u8d44\u6e90\u56fe\u7247</p> </li> <li> <p>Image.file\uff1a \u52a0\u8f7d\u672c\u5730\u56fe\u7247\uff0c\u5c31\u662f\u52a0\u8f7d\u672c\u5730\u6587\u4ef6\u4e2d\u7684\u56fe\u7247\uff0c\u4e0e\u5305\u4f53\u65e0\u5173</p> </li> <li> <p>Image.memory\uff1a \u52a0\u8f7dUnit8List\u8d44\u6e90\u56fe\u7247</p> </li> <li>Fit   \u63a7\u5236\u56fe\u7247\u7684\u62c9\u4f38\u548c\u6324\u538b</li> <li>BoxFit.fill \uff1a\u5168\u56fe\u663e\u793a\uff0c\u56fe\u7247\u4f1a\u88ab\u62c9\u4f38\uff0c\u5e76\u5145\u6ee1\u7236\u5bb9\u5668</li> <li>BoxFit.contain\uff1a\u5168\u56fe\u663e\u793a\uff0c\u663e\u793a\u539f\u6bd4\u4f8b\uff0c\u53ef\u80fd\u4f1a\u6709\u7a7a\u9699</li> <li>BoxFit.cover\uff1a\u539f\u6bd4\u4f8b\u8986\u76d6\u7236\u5bb9\u5668\uff0c\u4f46\u53ef\u80fd\u4f1a\u88ab\u88c1\u51cf</li> <li>BoxFit.fitWidth\uff1a\u6a2a\u5411\u5145\u6ee1\u5bb9\u5668\uff0c\u7eb5\u5411\u53ef\u80fd\u4f1a\u88ab\u62c9\u4f38\uff0c\u53ef\u80fd\u88ab\u88c1\u51cf</li> <li>BoxFit.fitHeight\uff1a\u7eb5\u5411\u5145\u6ee1\u5bb9\u5668\uff0c\u6a2a\u5411\u53ef\u80fd\u4f1a\u88ab\u62c9\u4f38\uff0c\u53ef\u80fd\u88ab\u88c1\u51cf</li> <li>BoxFit.scaleDown\uff1a\u5168\u56fe\u663e\u793a\uff0c\u4f46\u4e0d\u5141\u8bb8\u8d85\u8fc7\u539f\u56fe\u7247\u5927\u5c0f</li> <li>colorBlendMode      \u56fe\u7247\u6df7\u5408\u6a21\u5f0f</li> <li>Color \u548c colorBlendMode\u6df7\u5408\u4f7f\u7528\uff0c\u53ef\u4ee5\u4fee\u6539\u56fe\u7247\u7684\u989c\u8272</li> <li>repeat  \u56fe\u7247\u91cd\u590d</li> <li>ImageRepeat.repeat\uff1a\u6a2a\u5411\u548c\u7eb5\u5411\u90fd\u8fdb\u884c\u91cd\u590d</li> <li>ImageRepeat.repeatX: \u6a2a\u5411\u91cd\u590d\uff0c\u7eb5\u5411\u4e0d\u91cd\u590d</li> <li>ImageRepeat.repeatY: \u7eb5\u5411\u91cd\u590d\uff0c\u6a2a\u5411\u4e0d\u91cd\u590d</li> </ul>"},{"location":"Flutter/Base/#34-listview","title":"3.4 ListView","text":"<ul> <li> <p>\u4f7f\u7528Widget \u6570\u7ec4</p> </li> <li> <p>ListTitle\u7ec4\u4ef6</p> </li> <li> <p>title:Text</p> </li> <li>subtitle:Text</li> <li> <p>leading: icon</p> </li> <li> <p>\u56fe\u7247\u5217\u8868</p> </li> </ul> <p><code>dart   body: new ListView(     children:&lt;Widget&gt;[      new Image.network(         'http://jspang.com/static/upload/20181111/G-wj-ZQuocWlYOHM6MT2Hbh5.jpg'       ),        new Image.network(         'http://jspang.com/static/upload/20181109/1bHNoNGpZjyriCNcvqdKo3s6.jpg'       ),        new Image.network(         'http://jspang.com/static/myimg/typescript_banner.jpg'       ),new Image.network(         'http://jspang.com/static/myimg/smile-vue.jpg'       )     ]   ),</code></p> <ul> <li> <p>\u6a2a\u5411\u5217\u8868</p> </li> <li> <p>scrollDirection:Axis.horizontal</p> </li> <li> <p>\u4f18\u5316\u4ee3\u7801\uff1a\u4e00\u5207\u7686\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u5c06\u7ec4\u4ef6\u7684\u5f62\u5f0f\u7528\u7c7b\u5b9e\u73b0\uff0c\u62c6\u5206\u51fa\u7ec4\u4ef6</p> </li> </ul> <p><code>dart   class MyList extends StatelessWidget{     @override     Widget build(BuildContext context){       return ListView(           scrollDirection: Axis.horizontal,           children: &lt;Widget&gt;[             new Container(               width:180.0,               color: Colors.lightBlue,             ), new Container(               width:180.0,               color: Colors.amber,             ), new Container(               width:180.0,               color: Colors.deepOrange,             ),new Container(               width:180.0,               color: Colors.deepPurpleAccent,             ),           ],       );     }   }</code></p> <ul> <li> <p>\u52a8\u6001\u5217\u8868</p> </li> <li> <p>\u4f20\u5165\u53c2\u6570</p> <p><code>dart void main () =&gt; runApp(MyApp(   items: new List&lt;String&gt;.generate(1000, (i)=&gt; \"Item $i\") ));</code></p> </li> <li> <p>\u63a5\u6536\u53c2\u6570</p> <p><code>dart  final List&lt;String&gt; items;   MyApp({Key ?key, @required this.items}):super(key:key);</code></p> </li> <li> <p>\u663e\u793a\u53c2\u6570   ListView.builder</p> <p><code>dart body: new ListView.builder(   itemCount: items.length,   itemBuilder: (context,index){     return new ListTile(       title: new Text('${items[index]}'),     );   }, ),</code></p> </li> <li> <p>\u7f51\u683c\u5217\u8868 GridView</p> </li> <li> <p>padding  \u7f51\u683c\u5185\u8fb9\u8ddd</p> </li> <li>crossAxisSpacing \u7f51\u683c\u95f4\u95f4\u8ddd</li> <li>crossAxisCount     \u7f51\u683c\u7684\u5217\u6570</li> <li>childAspectRatio    \u5bbd\u9ad8\u6bd4</li> </ul> <p><code>dart   body: GridView.count(     crossAxisCount: 3,     padding: const EdgeInsets.all(10),     crossAxisSpacing: 20.0,     children: &lt;Widget&gt;[       const Text('This is  1'),       const Text('This is  2'),       const Text('This is  3'),       const Text('This is  4'),       const Text('This is  5'),     ],   ),</code></p>"},{"location":"Flutter/Base/#35-flutteractionbutton","title":"3.5 FlutterActionButton","text":"<p>\u53ef\u4ea4\u4e92\u7684\u6d6e\u52a8\u6309\u94ae</p> <p>\u5e38\u7528\u5c5e\u6027\uff1a</p> <ul> <li>onPressed \uff1a\u70b9\u51fb\u76f8\u5e94\u4e8b\u4ef6\uff0c\u6700\u5e38\u7528\u7684\u4e00\u4e2a\u5c5e\u6027\u3002</li> <li>tooltip\uff1a\u957f\u6309\u663e\u793a\u7684\u63d0\u793a\u6587\u5b57\uff0c\u56e0\u4e3a\u4e00\u822c\u53ea\u653e\u4e00\u4e2a\u56fe\u6807\u5728\u4e0a\u9762\uff0c\u9632\u6b62\u7528\u6237\u4e0d\u77e5\u9053\uff0c\u5f53\u6211\u4eec\u70b9\u51fb\u957f\u6309\u65f6\u5c31\u4f1a\u51fa\u73b0\u4e00\u6bb5\u6587\u5b57\u6027\u89e3\u91ca\u3002\u975e\u5e38\u53cb\u597d\uff0c\u4e0d\u59a8\u788d\u6574\u4f53\u5e03\u5c40\u3002</li> <li>child \uff1a\u653e\u7f6e\u5b50\u5143\u7d20\uff0c\u4e00\u822c\u653e\u7f6eIcon Widget\u3002</li> </ul> <pre><code>floatingActionButton: FloatingActionButton(\n    onPressed: (){\n      Navigator.of(context).push(MaterialPageRoute(builder:(BuildContext context){\n        return EachView('New Page');\n      }));\n    },\n    tooltip: 'Increment',\n    child: Icon(\n      Icons.add,\n      color: Colors.white,\n    ),\n  ),\n</code></pre> <ul> <li>floatingActionButton\u7684\u4f4d\u7f6e\uff1a</li> </ul> <p><code>dart   floatingActionButtonLocation:FloatingActionButtonLocation.centerDocked</code></p>"},{"location":"Flutter/Base/#36-bottomappbar","title":"3.6 BottomAppBar","text":"<p>\u5e95\u90e8\u5bfc\u822a\u680f\u4e4b\u4e00\u3002</p> <p>\u5e38\u7528\u5c5e\u6027\uff1a</p> <ul> <li>color:\u8fd9\u4e2a\u4e0d\u7528\u591a\u8bf4\uff0c\u5e95\u90e8\u5de5\u5177\u680f\u7684\u989c\u8272\u3002</li> <li>shape\uff1a\u8bbe\u7f6e\u5e95\u680f\u7684\u5f62\u72b6\uff0c\u4e00\u822c\u4f7f\u7528\u8fd9\u4e2a\u90fd\u662f\u4e3a\u4e86\u548c<code>floatingActionButton</code>\u878d\u5408\uff0c\u6240\u4ee5\u4f7f\u7528\u7684\u503c\u90fd\u662fCircularNotchedRectangle(),\u6709\u7f3a\u53e3\u7684\u5706\u5f62\u77e9\u5f62\u3002</li> <li>child \uff1a \u91cc\u8fb9\u53ef\u4ee5\u653e\u7f6e\u5927\u90e8\u5206Widget\uff0c\u8ba9\u6211\u4eec\u968f\u5fc3\u6240\u6b32\u7684\u8bbe\u8ba1\u5e95\u680f\u3002</li> </ul>"},{"location":"Flutter/Base/#4flutter","title":"4\u3001Flutter\u7684\u5e03\u5c40","text":""},{"location":"Flutter/Base/#41-row","title":"4.1 \u6c34\u5e73\u5e03\u5c40 Row","text":"<ul> <li>\u4e0d\u7075\u6d3b\u7684\u5e03\u5c40   \u76f4\u63a5\u5c06\u63a7\u4ef6\u6dfb\u52a0\u5728Row\u4e2d</li> </ul> <p><code>dart   body: new Row(     children: &lt;Widget&gt;[       new ElevatedButton(         onPressed: () {},         style:ElevatedButton.styleFrom(           primary: Colors.white, //set background color           onPrimary: Colors.red,             fixedSize:Size.fromWidth(100.0) //set Button Width         ),         child: new Text(           '\u7ea2\u8272\u6309\u94ae',           style: TextStyle(             color: Colors.red,           ),         ),       ),       new ElevatedButton(         onPressed: () {},         child: new Text(           '\u84dd\u8272\u6309\u94ae',           style: TextStyle(             color: Colors.lightBlue,           ),         ),       ),       new ElevatedButton(         onPressed: () {},         child: new Text(           '\u9ed1\u8272\u6309\u94ae',           style: TextStyle(             color: Colors.black,           ),         ),       ),     ],   ),</code></p> <p>\u4f1a\u5728\u6700\u53f3\u8fb9\u7559\u6709\u7a7a\u9699\uff0c\u5982\u4e0b\u56fe\uff1a</p> <p></p> <ul> <li>\u7075\u6d3b\u5e03\u5c40 \u81ea\u9002\u5e94\u6269\u5c55\u5230\u6574\u884c</li> </ul> <p>\u6dfb\u52a0Expanded\u63a7\u4ef6\uff0cExpanded extends Flexible\u3002</p> <p><code>dart   Expanded(     child:new ElevatedButton(       onPressed: () {},       child: new Text(         '\u7ea2\u8272\u6309\u94ae',         style: TextStyle(           color: Colors.red,         ),       ),     ),   ),</code></p> <ul> <li>\u6309\u7167\u9700\u6c42\u5b9a\u4e49\uff0c\u5bf9\u7075\u6d3b\u548c\u4e0d\u7075\u6d3b\uff0c\u8fdb\u884c\u63a7\u5236</li> </ul> <p>\u5982\uff1a\u4e24\u8fb9\u56fa\u5b9a\uff0c\u4e2d\u95f4\u81ea\u9002\u5e94    \u4e24\u8fb9\u4e0d\u4f7f\u7528Expanded,\u4e2d\u95f4\u4f7f\u7528Expanded</p>"},{"location":"Flutter/Base/#42-column","title":"4.2 \u5782\u76f4\u5e03\u5c40  Column","text":"<ul> <li> <p>mainAxisAlignment      \u4e3b\u8f74\u7684\u5bf9\u5176\u65b9\u5f0f</p> </li> <li> <p>crossAxisAlignment      \u526f\u8f74\u7684\u5bf9\u5176\u65b9\u5f0f</p> </li> </ul> layout \u6a2a\u8f74 \u7ad6\u8f74 Row mainAxisAlignment crossAxisAlignment Column crossAxisAlignment mainAxisAlignment <ul> <li>\u4e5f\u53ef\u4ee5\u901a\u8fc7Expanded\u6765\u5b9e\u73b0\u7075\u6d3b\u5e03\u5c40</li> </ul> <p><code>dart   new Column(     crossAxisAlignment: CrossAxisAlignment.start, //\u6c34\u5e73\u5411\u5de6     mainAxisAlignment: MainAxisAlignment.center,//\u7ad6\u76f4\u5782\u76f4     children: [       const Text(\"this is  first\"),       Expanded(child: const Text(\"this is  first qqqqqq\"),),       const Text(\"this is  first\"),       const Text(\"this is  first\"),     ],       ),</code></p>"},{"location":"Flutter/Base/#43-stack","title":"4.3 \u5c42\u53e0\u5e03\u5c40  Stack","text":"<ul> <li> <p>\u5c06\u4e24\u4e2aView \u91cd\u53e0\u5728\u4e00\u8d77</p> </li> <li> <p>CircleAvater \u7ec4\u4ef6  \u5706\u5f62\u5f62\u72b6\u5bb9\u5668\uff0c\u5e38\u7528\u6765\u505a\u5934\u50cf</p> </li> <li> <p>Alignment\uff0c\u4ee5\u4e0a\u5c42\u5bb9\u5668\u7684\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9</p> </li> </ul> <p><code>dart   var  stack = new Stack(     alignment: const FractionalOffset(0.5, 0.5),     children: &lt;Widget&gt;[        new CircleAvatar(         backgroundImage: new NetworkImage('blogtouxiang.jpg'),         radius: 100.0,       ),       new Container(         decoration: new BoxDecoration(           color: Colors.lightBlue,         ),         padding:EdgeInsets.all(5.0),         child: Text('This is on Image'),       )     ],   );</code></p> <ul> <li>Positioned \u7ec4\u4ef6 \u5c42\u53e0\u5b9a\u4f4d\u7ec4\u4ef6</li> </ul> <p>\u4f7f\u7528\u7edd\u5bf9\u5b9a\u4f4d\u6765\u4f7f\u7ec4\u4ef6\u5e03\u5c40\u5728\u4e0a\u5c42\uff0c\u9002\u7528\u4e8e\u4e09\u4e2a\u53ca\u4e09\u4e2a\u4ee5\u4e0a\u7684\u7ec4\u4ef6\u3002\u539f\u70b9\u662f\u4e0a\u5c42\u5e03\u5c40\u7684\u5de6\u4e0a\u89d2</p> <ul> <li>bottom: \u8ddd\u79bb\u5c42\u53e0\u7ec4\u4ef6\u4e0b\u8fb9\u7684\u8ddd\u79bb</li> <li>left\uff1a\u8ddd\u79bb\u5c42\u53e0\u7ec4\u4ef6\u5de6\u8fb9\u7684\u8ddd\u79bb</li> <li>top\uff1a\u8ddd\u79bb\u5c42\u53e0\u7ec4\u4ef6\u4e0a\u8fb9\u7684\u8ddd\u79bb</li> <li>right\uff1a\u8ddd\u79bb\u5c42\u53e0\u7ec4\u4ef6\u53f3\u8fb9\u7684\u8ddd\u79bb</li> <li>width: \u5c42\u53e0\u5b9a\u4f4d\u7ec4\u4ef6\u7684\u5bbd\u5ea6</li> <li>height: \u5c42\u53e0\u5b9a\u4f4d\u7ec4\u4ef6\u7684\u9ad8\u5ea6</li> </ul> <p><code>dart   var stack = new Stack(     alignment: const FractionalOffset(0.5, 0.5),     children: &lt;Widget&gt;[       new CircleAvatar(         backgroundImage: new NetworkImage(           'http://jspang.com/static//myimg/blogtouxiang.jpg'),         radius: 100.0,       ),       new Positioned(         child: Text('this is first'),         left: 10.0,         top: 10.0,       ),       new Positioned(         child: Text('this is first'),         bottom: 10.0,         right: 10.0,       ),     ],   );</code></p>"},{"location":"Flutter/Base/#44-listview34","title":"4.4  ListView\u5e03\u5c40\uff08\u89c13.4\uff09","text":""},{"location":"Flutter/Base/#45-gridview-34","title":"4.5 GridView\u5e03\u5c40 \uff08\u89c13.4\uff09","text":""},{"location":"Flutter/Base/#46-card","title":"4.6 \u5361\u7247\u5e03\u5c40 card","text":"<p>\u53ea\u662f\u663e\u793a\u4e86\u4e00\u4e2a\u5361\u7247\u7684\u6837\u5f0f\u5e03\u5c40\uff0c\u6ca1\u6709\u770b\u5230\u6709\u522b\u7684\u7279\u6b8a\u4e4b\u5904\u3002</p> <pre><code>var card = new Card(\n  child: Column(\n    children: &lt;Widget&gt;[\n      ListTile(\n        title: new Text('Beijing City'),\n        subtitle: new Text('zhangsan : 111122443'),\n        leading: new Icon(Icons.account_box,color: Colors.lightBlue,),\n      ),\n      new Divider(),\n      ListTile(\n        title: new Text('Beijing City'),\n        subtitle: new Text('zhangsan : 111122443'),\n        leading: new Icon(Icons.account_box,color: Colors.lightBlue,),\n      ),\n      new Divider(),\n      ListTile(\n        title: new Text('Beijing City'),\n        subtitle: new Text('zhangsan : 111122443'),\n        leading: new Icon(Icons.account_box,color: Colors.lightBlue,),\n      ),\n    ],\n  ),\n);\n</code></pre>"},{"location":"Flutter/Base/#5","title":"5\u3001\u5bfc\u822a","text":""},{"location":"Flutter/Base/#51","title":"5.1  \u5bfc\u822a\u51fd\u6570","text":"<ul> <li> <p>Navigator</p> </li> <li> <p>push:\u5bfc\u822a\u5230\u4e0b\u4e00\u9875\uff0c\u53c2\u6570context</p> </li> <li> <p>pop:\u8fd4\u56de\u4e0a\u4e00\u9875,\u53c2\u6570context</p> </li> <li> <p>MaterialPageRoute \u5efa\u7acb\u8def\u7531</p> </li> </ul> <p><code>dart   new  MaterialPageRoute(     builder:(context) =&gt;new SecondScreen())     );</code></p> <p>Demo:</p> <pre><code>class FirstScreen extends StatelessWidget{\n   @override\n  Widget build(BuildContext context) {\n    // TODO: implement build\n    return Scaffold(\n         appBar: AppBar(title: Text('Nav 01'),),\n         body:Center(\n           child:ElevatedButton(\n             onPressed: (){\n               Navigator.push(context, MaterialPageRoute(\n                 builder: (context)=&gt;new SecondScreen()\n                 ));\n             }, \n             child: Text('View detail')\n             ),\n         ) ,\n    );\n  }\n}\nclass SecondScreen extends StatelessWidget{\n   @override\n  Widget build(BuildContext context) {\n    // TODO: implement build\n    return Scaffold(\n      appBar: AppBar(\n        title:Text('this is second'),\n      ),\n      body: Center(\n        child:ElevatedButton(onPressed: (){\n            Navigator.pop(context);\n        }, \n        child: Text('Pop'),\n        ),\n      ),\n    );\n  }\n}\n</code></pre>"},{"location":"Flutter/Base/#52","title":"5.2 \u5bfc\u822a\u53c2\u6570\u7684\u4f20\u9012\u548c\u63a5\u6536","text":"<ul> <li>\u4f20\u9012  \u4f7f\u7528Navigator\u7ec4\u4ef6\uff0cMaterialPageRoute\u4f20\u9012\u53c2\u6570</li> </ul> <p><code>dart   Navigator.push(     context,      MaterialPageRoute(       builder:(context)=&gt;new ProductDetail(product:products[index])     )   );</code></p> <ul> <li>\u63a5\u6536\u53c2\u6570</li> </ul> <p><code>dart   const ProductDetial({ Key? key ,required this.product}) : super(key: key);</code></p> <p>\u200b        \u8be5\u7c7b\u4e2d\u8981\u58f0\u660e\u8fd9\u4e2a\u53c2\u6570product</p>"},{"location":"Flutter/Base/#53","title":"5.3 \u5f02\u6b65\u7b49\u5f85\u8fd4\u56de\u51fd\u6570","text":"<ul> <li>async/await\u8bed\u6cd5</li> </ul> <p>\u8bf7\u6c42\u6570\u636e\uff0c\u5f85\u5f02\u6b65\u8fd4\u56de\u540e\uff0c\u5c06\u6570\u636e\u8fdb\u884c\u663e\u793a</p> <ul> <li>Navigator.pop(context,data)</li> </ul> <p>pop\u53ef\u4ee5\u5728\u7b2c\u4e8c\u4e2a\u53c2\u6570\u91cd\uff0c\u8fd4\u56de\u6570\u636e</p> <ul> <li>SnackBar  \u5f39\u51fa\u6846</li> </ul> <p>\u663e\u793a\u5f39\u51fa\u6846\uff1aScaffoldMessenger.of(context).showSnackBar(SnackBar)</p> <p>\u663e\u793a\u5185\u5bb9\uff1a content</p> <p>\u663e\u793a\u65f6\u95f4\uff1aduration</p> <p>\u6dfb\u52a0\u6309\u94ae\uff1aaction</p> <p><code>java   ScaffoldMessenger.of(context).showSnackBar(SnackBar(     content: Text('$result'),     duration: Duration(milliseconds: 2000),     backgroundColor: Colors.red,     action: SnackBarAction(label:'Cancle', onPressed: (){       ScaffoldMessenger.of(context).hideCurrentSnackBar();     }),   ));</code></p> <p>5.2 5.3 \u6574\u4f53\u4ee3\u7801</p> <pre><code>void main(List&lt;String&gt; args) {\n  runApp(MaterialApp(\n    title: 'this is Nav for gerArgs',\n    home: new nav2(\n      products: List.generate(\n          20, (index) =&gt; Product('\u5546\u54c1 $index', '\u8fd9\u662f\u4e00\u4e2a\u5546\u54c1\u7f16\u53f7\uff0c\u7f16\u53f7\u4e3a\uff1a$index')),\n    ),\n  ));\n}\n\nclass Product {\n  final String title;\n  final String description;\n  Product(this.title, this.description);\n}\n\nclass nav2 extends StatelessWidget {\n  final List&lt;Product&gt; products;\n  const nav2({Key? key, required this.products}) : super(key: key);\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('\u5546\u54c1\u8be6\u60c5\u9875\u9762'),\n      ),\n      body: ListView.builder(\n        itemCount: products.length,\n        itemBuilder: (context, index) {\n          return ListTile(\n            title: Text(products[index].title),\n            subtitle: Text(products[index].description),\n            onTap: () {\n              _navigateToDetail(context, index);\n            },\n          );\n        },\n      ),\n    );\n  }\n\n  _navigateToDetail(BuildContext context, index) async {\n    final result = await Navigator.push(\n        context,\n        MaterialPageRoute(\n            builder: (context) =&gt; new ProductDetial(product: products[index])));\n    ScaffoldMessenger.of(context).showSnackBar(SnackBar(\n      content: Text('$result'),\n      duration: Duration(milliseconds: 2000),\n      backgroundColor: Colors.red,\n      action: SnackBarAction(label:'Cancle', onPressed: (){\n            ScaffoldMessenger.of(context).hideCurrentSnackBar();\n      }),\n      ));\n  }\n}\n\nclass ProductDetial extends StatelessWidget {\n  const ProductDetial({Key? key, required this.product}) : super(key: key);\n  final Product product;\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n        appBar: AppBar(\n          title: Text(product.title),\n        ),\n        body: Column(\n          children: &lt;Widget&gt;[\n            Text(product.description),\n            Expanded(\n                child: ElevatedButton(\n              onPressed: () {\n                Navigator.pop(context, \"This is return data\");\n              },\n              child: Text('return data'),\n            )),\n          ],\n        ));\n  }\n}\n</code></pre> <p>6\u3001\u6253\u5305\u6559\u7a0b</p> <ul> <li>\u4f7f\u7528./gradlew \u6253\u5305(\u4ec5\u9650\u4e8eAndroid)</li> <li>./gradlew -v \u67e5\u770bgralew\u7684\u7248\u672c</li> <li>./gradlew  clean  \u6e05\u9664build\u6587\u4ef6</li> <li>./gradlew assembleDebug \u7f16\u8bd1\u5e76\u6253debug\u5305</li> <li>./gradlew assembleRelease \u7f16\u8bd1\u5e76\u6253Release\u5305</li> <li>./gradlew installDebug  Debug\u6a21\u5f0f\u6253\u5305\u5e76\u5b89\u88c5</li> <li>./gradlew installRelease Release\u6a21\u5f0f\u6253\u5305\u5e76\u5b89\u88c5</li> <li> <p>./gradlew uninstallRelease/uninstallDebug \u5378\u8f7ddebug\u6216Release\u5305</p> </li> <li> <p>\u751f\u6210KeyStore \u901a\u8fc7\u914d\u7f6e\u6253\u5305</p> </li> </ul>"},{"location":"Flutter/Base/#6","title":"6\u3001\u751f\u547d\u5468\u671f","text":"<ul> <li> <p>\u5728Flutter\u4e2d\uff0c\u4f7f\u7528Widgets\u6784\u5efaUI\uff0c\u800cWidget\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u4f46\u662f\u53ef\u4ee5\u6839\u636e\u5bf9\u5e94\u7684\u72b6\u6001\u5237\u65b0Widget,\u56e0\u6b64Widget\u6709\u4e24\u79cd\u7c7b\u578b\u3002</p> </li> <li> <p>StatelessWidget</p> </li> <li>StatefulWidget</li> </ul>"},{"location":"Flutter/Base/#statelesswidget","title":"StatelessWidget","text":"<p>\u200b       \u7531\u6e90\u7801\u53ef\u77e5\uff0cText\u3001ListTitele\u7b49\u7ec4\u4ef6\u7ee7\u627f\u4e8eStatelessWidget\uff0c\u53ef\u77e5\u8fd9\u4e9b\u7ec4\u4ef6\u6ca1\u6709\u72b6\u6001\u53ef\u4ee5\u6539\u53d8\uff0c\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u628atext widget \u521d\u59cb\u5316\uff0c\u7136\u540e\u7528properties\u6784\u5efa\u8981\u88ab\u663e\u793a\u7684\u5185\u5bb9\uff0c\u7236widget\u5b9e\u9645\u4e0a\u63a7\u5236\u7740\u8fd9\u4e9b\u7a97\u53e3\u90e8\u4ef6\u7684\u663e\u793a\u72b6\u6001\uff0c\u56e0\u6b64StatelessWidget\u662f\u65e0\u72b6\u6001\u7684\u7ec4\u4ef6\u3002\u6700\u5916\u5c42\u9700\u8981\u91c7\u7528StatlessWidget,\u56e0\u4e3a\u9700\u8981context.</p> <ul> <li>\u5e94\u7528\u573a\u666f</li> <li>\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u8fdb\u5ea6\u63a7\u4ef6\uff0c\u8fd9\u4e2a\u63a7\u4ef6\u91d1\u4f7f\u7528\u521d\u59cb\u5316\u7684\u5c5e\u6027\u6765\u5c55\u793a\u7ed9\u7528\u6237\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u6301\u6709\u4efb\u4f55\u72b6\u6001\uff0c\u56e0\u4e3a\u7236\u90e8\u4ef6\u4f1a\u63a7\u5236\u5176\u662f\u5426\u663e\u793a\uff0c\u8fd9\u6837\u7236\u90e8\u4ef6\u5c31\u7ba1\u7406\u4e86\u8fd9\u4e2awidget\u672c\u8eab\u662f\u5426\u663e\u793a\u7684\u72b6\u6001\u4e86\u3002</li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u7528\u5728\u5217\u8868\u4e2d\u7684\u5355\u9879widget\u7b49</p> </li> <li> <p>\u751f\u547d\u5468\u671f</p> </li> <li>\u6784\u9020\u51fd\u6570</li> <li>build()</li> </ul>"},{"location":"Flutter/Base/#statefulwidget","title":"StatefulWidget","text":"<p>\u200b       StatefulWidget\u662f\u75312\u4e2a\u5bf9\u8c61Widget\u548cState\u7ec4\u6210\u7684\uff0c\u4e3a\u4e86\u6027\u80fd\uff0cState\u7ba1\u7406\u72b6\u6001\uff0cWidget\u7ba1\u7406UI\uff0c\u6839\u636e\u72b6\u6001\u53d8\u5316\uff0cWidget\u4e5f\u53ef\u4ee5\u968f\u5176\u6539\u53d8\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u5176\u521d\u59cb\u5316\u65f6\u7684\u9759\u6001\u72b6\u6001\uff0c\u53ef\u4ee5\u968f\u7740\u7528\u6237\u7684\u8f93\u5165\uff0c\u5404\u79cd\u5f62\u5f0f\u7684\u5f02\u6b65\u56de\u5305\u6216\u5176\u4ed6\u5f62\u5f0f\u7684\u72b6\u6001\u53d8\u5316\u800c\u53d8\u5316\u3002</p> <p>\u200b       Image\u7ee7\u627f\u4e8e<code>StatefuiWidget</code>,\u8be5\u7ec4\u4ef6\u6301\u6709\u4ee5\u4e0b\u4e09\u4e2a\u5c5e\u6027\u7684\u5f15\u7528\uff1a</p> <pre><code>    ```dart\n    ImageStream _imageStream;\n\n    ImageInfo _imageInfo;\n\n    bool _isListeningToStream = false;\n    ```\n</code></pre> <p>\u53ef\u4ee5\u968f\u7740\u76d1\u542c\u56fe\u7247\u5f15\u7528\u7684\u53d8\u5316,\u901a\u8fc7_handleImageChanged\u65b9\u6cd5\u6765\u8c03\u7528state\u7c7b\u7684setState\u65b9\u6cd5\uff0c\u4ece\u800c\u66f4\u65b0\u56fe\u7247\uff0c\u5b83\u81ea\u5df1\u7ba1\u7406\u81ea\u5df1\u7684State,\u800c\u4e0d\u662f\u4f9d\u8d56\u4e8e\u7236\u7c7b\u3002</p> <ul> <li>\u751f\u547d\u5468\u671f</li> </ul> <p></p> <p>3\u4e2a\u9636\u6bb5\uff1a</p> <p>1\u3001\u7ec4\u4ef6\u521d\u59cb\u5316</p> <p>createState-&gt;initState-&gt;didChangeDependencies-&gt;build</p> <p>2\u3001\u72b6\u6001\u6539\u53d8</p> <p>setState: didupdateWidget-&gt;build</p> <p>3\u3001\u9500\u6bc1</p> <p>deactivate-&gt;dispose</p> <p>\u751f\u547d\u5468\u671f\uff1a</p> <p>1\u3001createState</p> <p>2\u3001initState</p> <p>3\u3001didChangeDependencies</p> <p>4\u3001build</p> <p>5\u3001addPostFrameCallback</p> <p>6\u3001didupdateWidget</p> <p>7\u3001deactivate</p> <p>8\u3001dispose</p>"},{"location":"Flutter/Base/#createstate","title":"createState","text":"<p>createState \u662f StatefulWidget \u91cc\u521b\u5efa State \u7684\u65b9\u6cd5\uff0c\u5f53\u8981\u521b\u5efa\u65b0\u7684 StatefulWidget \u7684\u65f6\u5019\uff0c\u4f1a\u7acb\u5373\u6267\u884c createState\uff0c\u800c\u4e14\u53ea\u6267\u884c\u4e00\u6b21\uff0ccreateState \u5fc5\u987b\u8981\u5b9e\u73b0\u3002</p>"},{"location":"Flutter/Base/#initstate","title":"initState","text":"<p>\u524d\u9762\u7684 createState \u662f\u5728\u521b\u5efa StatefulWidget \u7684\u65f6\u5019\u4f1a\u8c03\u7528\uff0cinitState \u662f StatefulWidget \u521b\u5efa\u5b8c\u540e\u8c03\u7528\u7684\u7b2c\u4e00\u4e2a\u65b9\u6cd5\uff0c\u800c\u4e14\u53ea\u6267\u884c\u4e00\u6b21\uff0c\u7c7b\u4f3c\u4e8e Android \u7684 onCreate()\u3001iOS \u7684 viewDidLoad()\uff0c\u6240\u4ee5\u5728\u8fd9\u91cc View \u5e76\u6ca1\u6709\u6e32\u67d3\uff0c\u4f46\u662f\u8fd9\u65f6 StatefulWidget \u5df2\u7ecf\u88ab\u52a0\u8f7d\u5230\u6e32\u67d3\u6811\u91cc\u4e86\uff0c\u8fd9\u65f6 StatefulWidget \u7684 mount\u7684\u503c\u4f1a\u53d8\u4e3a true\uff0c\u76f4\u5230 dispose\u8c03\u7528\u7684\u65f6\u5019\u624d\u4f1a\u53d8\u4e3a false\u3002\u53ef\u4ee5\u5728 initState\u91cc\u505a\u4e00\u4e9b\u521d\u59cb\u5316\u7684\u64cd\u4f5c\u3002</p> <p>\u5728 override initState\u7684\u65f6\u5019\u5fc5\u987b\u8981\u8c03\u7528 super.initState()\u3002</p>"},{"location":"Flutter/Base/#didchangedependencies","title":"didChangeDependencies","text":"<p>\u5f53 StatefulWidget \u7b2c\u4e00\u6b21\u521b\u5efa\u7684\u65f6\u5019\uff0cdidChangeDependencies\u65b9\u6cd5\u4f1a\u5728 initState\u65b9\u6cd5\u4e4b\u540e\u7acb\u5373\u8c03\u7528\uff0c\u4e4b\u540e\u5f53 StatefulWidget \u5237\u65b0\u7684\u65f6\u5019\uff0c\u5c31\u4e0d\u4f1a\u8c03\u7528\u4e86\uff0c\u9664\u975e\u4f60\u7684 StatefulWidget \u4f9d\u8d56\u7684 InheritedWidget \u53d1\u751f\u53d8\u5316\u4e4b\u540e\uff0cdidChangeDependencies\u624d\u4f1a\u8c03\u7528\uff0c\u6240\u4ee5 didChangeDependencies\u6709\u53ef\u80fd\u4f1a\u88ab\u8c03\u7528\u591a\u6b21\u3002\uff08\u8fd8\u9700\u8981\u7ee7\u7eed\u4e86\u89e3\uff0c\u81f3\u5c11\u4e0d\u662f\u6811\u7684\u4e0a\u4e00\u7ea7\u53d1\u751f\u6539\u53d8\u5b83\u6539\u53d8\uff09</p>"},{"location":"Flutter/Base/#build","title":"build","text":"<p>\u8be5\u65b9\u6cd5\u7528\u6765\u6e32\u67d3UI\uff0c\u7981\u6b62\u5728\u5176\u4e2d\u505a\u9664\u4e86\u6e32\u67d3\u4e4b\u5916\u7684\u64cd\u4f5c\u3002\u7b2c\u4e00\u6b21\u521b\u5efa\u65f6\u4f1a\u8c03\u7528\uff0cUI\u9700\u8981\u91cd\u65b0\u6e32\u67d3\u65f6\uff0c\u5982setState,\u4f1a\u88ab\u8c03\u7528\u3002</p>"},{"location":"Flutter/Base/#addpostframecallback","title":"addPostFrameCallback","text":"<p>\u5728\u6e32\u67d3\u7ed3\u675f\u540e\uff0c\u8fdb\u884c\u7684\u56de\u8c03\uff0c\u53ea\u4f1a\u88ab\u8c03\u7528\u4e00\u6b21,\u5373\u4f7f\u88ab\u5237\u65b0\u4e5f\u4e0d\u4f1a\u518d\u6b21\u88ab\u8c03\u7528\uff0c\u5e76\u4e14\u8be5\u65b9\u6cd5\u662f\u5728initState\u91cc\u6dfb\u52a0\u56de\u8c03\u3002</p> <pre><code>@override\nvoid initState() {\n  // TODO: implement initState\n  super.initState();\n  print(\"EmailStateScreen:initState\");\n  SchedulerBinding.instance!.addPostFrameCallback((_) { \n    print(\"EmailStateScreen:addPostFrameCallback\");\n  });\n}\n</code></pre>"},{"location":"Flutter/Base/#didupdatewidget","title":"didUpdateWidget","text":"<p>\u6309\u7167\u72b6\u6001\u56fe\uff0c\u5e94\u8be5\u662f\u5728setState\u65f6\u8c03\u7528\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u8c03\u7528,\u53ef\u80fd\u77e5\u8bc6\u7956\u5148\u8282\u70b9\u53d1\u751f\u6539\u53d8\uff0c\u624d\u4f1a\u6539\u53d8\u3002</p>"},{"location":"Flutter/Base/#deactivate","title":"deactivate","text":"<p>\u5f53\u8981\u5c06 State \u5bf9\u8c61\u4ece\u6e32\u67d3\u6811\u4e2d\u79fb\u9664\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u8c03\u7528 deactivate\u751f\u547d\u5468\u671f\uff0c\u8fd9\u6807\u5fd7\u7740 StatefulWidget \u5c06\u8981\u9500\u6bc1\uff0c\u4f46\u662f\u6709\u65f6\u5019 State \u4e0d\u4f1a\u88ab\u9500\u6bc1\uff0c\u800c\u662f\u91cd\u65b0\u63d2\u5165\u5230\u6e32\u67d3\u6811\u4e2d\uff0c</p>"},{"location":"Flutter/Base/#dispose","title":"dispose","text":"<p>\u5f53 View \u4e0d\u9700\u8981\u518d\u663e\u793a\uff0c\u4ece\u6e32\u67d3\u6811\u4e2d\u79fb\u9664\u7684\u65f6\u5019\uff0cState \u5c31\u4f1a\u6c38\u4e45\u7684\u4ece\u6e32\u67d3\u6811\u4e2d\u79fb\u9664\uff0c\u5c31\u4f1a\u8c03\u7528 dispose\u751f\u547d\u5468\u671f\uff0c\u8fd9\u65f6\u5019\u5c31\u53ef\u4ee5\u5728 dispose\u91cc\u505a\u4e00\u4e9b\u53d6\u6d88\u76d1\u542c\u3001\u52a8\u753b\u7684\u64cd\u4f5c\uff0c\u548c initState\u662f\u76f8\u53cd\u7684\u3002</p>"},{"location":"Flutter/Base/#app-applifecyclestate","title":"App\u751f\u547d\u5468\u671f: AppLifeCycleState","text":"<p>1\u3001resumed: \u53ef\u89c1\u5e76\u80fd\u54cd\u5e94\u7528\u6237\u7684\u8f93\u5165,\u76f8\u5f53\u4e8eonResume()</p> <p>2\u3001inactive:   \u90e8\u5206\u53ef\u89c1\uff0c\u65e0\u6cd5\u5904\u7406\u54cd\u5e94\uff0c\u76f8\u5f53\u4e8eOnPause()</p> <p>3\u3001paused:\u4e0d\u53ef\u89c1\u5e76\u4e0d\u80fd\u54cd\u5e94\u7528\u6237\u7684\u8f93\u5165\uff0c\u4f46\u662f\u5728\u540e\u53f0\u7ee7\u7eed\u6d3b\u52a8\u4e2d,\u76f8\u5f53\u4e8eonStop()</p> <p>4\u3001suspending: \u5b89\u5353\u7684\u6302\u8d77</p> <p>\u751f\u547d\u5468\u671f\u7684\u89c2\u6d4b\u9700\u8981\u4f7f\u7528\u76d1\u542c\uff1aWidgetsBindingObserver\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <p>1\u3001State\u7684\u7c7b\u6dfb\u52a0\u76d1\u542c</p> <pre><code>class _MyHomePageState extends State&lt;MyHomePage&gt; with WidgetsBindingObserver {\n    ...\n}\n</code></pre> <p>2\u3001\u5728 State \u7684 initState\u91cc\u6dfb\u52a0\u76d1\u542c\uff1a</p> <pre><code>@override\nvoid initState(){\n  super.initState();\n  WidgetsBinding.instance.addObserver(this);\n}\n</code></pre> <p>3\u3001\u5728 State \u7684 dispose\u91cc\u79fb\u9664\u76d1\u542c</p> <pre><code>@override\nvoid dispose() {\n  // TODO: implement dispose\n  super.dispose();\n  WidgetsBinding.instance.removeObserver(this);\n}\n</code></pre> <p>4\u3001\u5728State\u7684didChangeAppLifecycleState\u533a\u5206\u72b6\u6001\uff0c\u5fc5\u987b\u5b9e\u73b0\u76d1\u542c\u624d\u884c\u3002</p> <pre><code>@override\nvoid didChangeAppLifecycleState(AppLifecycleState state) {\n  super.didChangeAppLifecycleState(state);\n  if (state == AppLifecycleState.paused) {\n    // went to Background\n  }\n  if (state == AppLifecycleState.resumed) {\n    // came back to Foreground\n  }\n}\n</code></pre> <p>\u524d\u53f0\u5207\u5165\u540e\u53f0\uff1ainactive-&gt;paused</p> <p>\u540e\u53f0\u5207\u5165\u524d\u53f0\uff1aresumed</p>"},{"location":"Flutter/Base/#7","title":"7\u3001\u5b9e\u4f8b\u8fdb\u9636","text":""},{"location":"Flutter/Base/#71","title":"7.1\u3001\u5e95\u90e8\u5bfc\u822a\u680f","text":"<ul> <li>Statefulwidget \u7ec4\u4ef6</li> </ul> <p>\u5177\u6709\u53ef\u53d8\u72b6\u6001\u7684\u7a97\u53e3\u7ec4\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>Stful</code>\u5feb\u901f\u521b\u5efa</p> <ul> <li>bottomNavigationBar \u5e95\u90e8\u5bfc\u822a\u680f\u7ec4\u4ef6</li> </ul> <p>require items</p> <p>BottomNavigationBarItem \u5bfc\u822a\u680f\u6bcf\u4e2a\u9009\u9879\u7684\u7ec4\u4ef6</p> <ul> <li>List  \u521b\u5efa</li> </ul> <p><code>dart   //1\u3001\u7b2c\u4e00\u79cd   List&lt;Widget&gt; pages = [];   //2\u3001\u7b2c\u4e8c\u79cd  growable :false \u56fa\u5b9a\u957f\u5ea6 true \u53ef\u53d8\u957f\u5ea6   List&lt;Widget&gt; pagess = List.empty(growable: true);   //\u5efa\u9020\u8005\u6a21\u5f0f     pages         ..add(HomeScreen())         ..add(EmailScreen())         ..add(PagesScreen())         ..add(AirPalyScreen());</code></p> <ul> <li> <p>bottomNavigationBar \u70b9\u51fb\u4e8b\u4ef6</p> </li> <li> <p>\u5229\u7528\u7d22\u5f15\u8fdb\u884c\u5207\u6362</p> </li> </ul> <p><code>dart   currentIndex: _currentIndex,   onTap: (index){     setState(() {       _currentIndex = index;     });   },</code></p> <p>\u5173\u952e\u5b8c\u6574\u4ee3\u7801\uff1a</p> <pre><code>class _BottomNavigationWidgetState extends State&lt;BottomNavigationWidget&gt; {\n  final _BottomNavigationColor = Colors.lightBlue;\n  int _currentIndex = 0;\n  List&lt;Widget&gt; pages = [];\n  // \u6216 List&lt;Widget&gt; pagess = List.empty(growable: true);\n  @override\n  void initState() {\n\n    pages\n      ..add(HomeScreen())\n      ..add(EmailScreen())\n      ..add(PagesScreen())\n      ..add(AirPalyScreen());\n    super.initState();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: pages[_currentIndex],\n      bottomNavigationBar: BottomNavigationBar(\n        items: [\n          BottomNavigationBarItem(\n            icon: Icon(\n              Icons.home,\n              color: _BottomNavigationColor,\n            ),\n            title: Text(\n              'Home',\n              style: TextStyle(\n                color: Colors.orange,\n              ),\n            ),\n          ),\n          BottomNavigationBarItem(\n            icon: Icon(Icons.email,color: _BottomNavigationColor,),\n            title: Text(\n              'Email',\n              style: TextStyle(\n                color: Colors.orange,\n              ),\n            ),\n          ),\n          BottomNavigationBarItem(\n            icon: Icon(Icons.pages,color: _BottomNavigationColor,),\n            title: Text(\n              'Pages',\n              style: TextStyle(\n                color: Colors.orange,\n              ),\n            ),\n          ),\n          BottomNavigationBarItem(\n            icon: Icon(Icons.airplay,color: _BottomNavigationColor,),\n            title: Text(\n              'airplay',\n              style: TextStyle(\n                color: Colors.orange,\n              ),\n            ),\n          ),\n        ],\n        currentIndex: _currentIndex,\n        onTap: (index){\n          setState(() {\n            _currentIndex = index;\n          });\n        },\n      ),\n    );\n  }\n}\n</code></pre>"},{"location":"Flutter/Base/#72","title":"7.2 \u5b9e\u73b0\u5b89\u88c5\u5305\u4e0b\u8f7d\u548c\u5b89\u88c5","text":""},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/","title":"JAVA \u591a\u7ebf\u7a0b\u548c\u7ebf\u7a0b\u6c60\u8be6\u89e3","text":""},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_1","title":"\u7ebf\u7a0b\u77e5\u8bc6\u6574\u7406","text":"<p>\u7b2c\u4e00\u904d\u6574\u7406\uff0c\u56e0\u4e3a\u4e0d\u7406\u89e3\uff0c\u6240\u4ee5\u6574\u7406\u8d77\u6765\u6709\u70b9\u4e71</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#java_1","title":"Java\u7ebf\u7a0b\u6a21\u578b","text":"<ul> <li>\u5185\u6838\u6001 \u5185\u6838\u6001\u7ebf\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u8ba1\u7b97\u673a\u7684\u6240\u6709\u8d44\u6e90</li> <li>\u7528\u6237\u6001 \u7528\u6237\u6001\u7ebf\u7a0b\u53ea\u80fd\u8bbf\u95ee\u81ea\u5df1\u5185\u5b58\u4e2d\u7684\u8d44\u6e90</li> </ul>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_2","title":"\u5185\u6838\u7ebf\u7a0b\u6a21\u578b(\u4e00\u5bf9\u4e00\u6a21\u578b)","text":"<p>\u5185\u6838\u7ebf\u7a0b\u6a21\u578b\u5373\u5b8cl</p> <p></p> <p>\u4f18\u70b9\uff1a\u7cfb\u7edf\u53ef\u4ee5\u76f4\u63a5\u77e5\u9053\u7ebf\u7a0b\u7684\u4f7f\u7528\u60c5\u51b5</p> <p>\u7f3a\u70b9\uff1a\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u9891\u7e41\u5207\u6362\uff0c\u6d88\u8017\u8f83\u5927\uff0c\u6bcf\u4e00\u4e2aLWP\u5bf9\u5e94\u4e00\u4e2aKLT\uff0c\u4f1a\u6d88\u8017\u66f4\u591a\u7684\u5185\u6838\u5185\u5b58\u7a7a\u95f4\u3002</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_3","title":"\u7528\u6237\u7ebf\u7a0b\u6a21\u578b(\u591a\u5bf9\u4e00\u6a21\u578b)","text":"<p>\u7528\u6237\u7ebf\u7a0b\u6a21\u578b\u5b8c\u5168\u5efa\u7acb\u5728\u7528\u6237\u7a7a\u95f4\u7684\u7ebf\u7a0b\u5e93\u4e0a\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u7cfb\u7edf\u5185\u6838\uff0c\u7528\u6237\u7ebf\u7a0b\u7684\u521b\u5efa\u3001\u540c\u6b65\u3001\u5207\u6362\u548c\u9500\u6bc1\u7b49\u64cd\u4f5c\u5b8c\u5168\u5728\u7528\u6237\u6001\u6267\u884c\uff0c\u4e0d\u9700\u8981\u5207\u6362\u5230\u5185\u6838\u6001\u3002</p> <p></p> <p>\u4f18\u70b9\uff1a\u7ebf\u7a0b\u7684\u5404\u79cd\u64cd\u4f5c\u7531\u7528\u6237\u8fdb\u7a0b\u5b8c\u6210\uff0c\u5207\u6362\u6d88\u8017\u4f4e</p> <p>\u7f3a\u70b9\uff1a\u7ebf\u7a0b\u7684\u8c03\u5ea6\u5b9e\u73b0\u590d\u6742\uff0c\u5185\u6838\u6001\u65e0\u6cd5\u77e5\u9053\u7ebf\u7a0b\u7684\u5207\u6362\u60c5\u51b5</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#mn","title":"\u6df7\u5408\u7528\u6237\u7ebf\u7a0b\u6a21\u578b(M\u5bf9N\u6a21\u578b)","text":"<p>\u6df7\u5408\u7ebf\u7a0b\u6a21\u578b\u662f\u524d\u8ff0\u4e24\u79cd\u6a21\u578b\u7684\u6df7\u5408\u7248\u672c\uff0c\u7528\u6237\u7ebf\u7a0b\u4ecd\u7136\u662f\u5728\u7528\u6237\u6001\u4e2d\u521b\u5efa\uff0c\u7528\u6237\u7ebf\u7a0b\u7684\u521b\u5efa\u3001\u5207\u6362\u548c\u9500\u6bc1\u7684\u6d88\u8017\u5f88\u4f4e\uff0c\u7528\u6237\u7ebf\u7a0b\u7684\u6570\u91cf\u4e0d\u53d7\u9650\u5236\u3002\u800cLWP\u5728\u7528\u6237\u7ebf\u7a0b\u548c\u5185\u6838\u7ebf\u7a0b\u4e4b\u95f4\u5145\u5f53\u6865\u6881\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u7ebf\u7a0b\u8c03\u5ea6\u548c\u5904\u7406\u5668\u6620\u5c04\u529f\u80fd\u3002</p> <p></p> <p>Java\u7ebf\u7a0b\u7684\u5185\u5b58\u6a21\u578b\u662f\u57fa\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u539f\u751f\u7ebf\u7a0b\u6a21\u578b\u6765\u5b9e\u73b0\u7684\uff0c\u5728Java\u7ebf\u7a0b\u5185\u5b58\u6a21\u578b\u4e2d\uff0c\u53ef\u4ee5\u5c06\u865a\u62df\u673a\u5185\u5b58\u5212\u5206\u4e3a\u4e24\u90e8\u5206\u5185\u5b58\uff1a\u4e3b\u5185\u5b58\u548c\u7ebf\u7a0b\u5de5\u4f5c\u5185\u5b58\u3002</p> <p></p> <p>\u65b9\u6cd5\u533a\u548c\u5806\u662f\u4e3b\u5185\u5b58\uff0c\u800c\u865a\u62df\u673a\u6808\u3001\u672c\u5730\u65b9\u6cd5\u6808\u4ee5\u53ca\u7a0b\u5e8f\u8ba1\u6570\u5668\u5219\u5c5e\u4e8e\u6bcf\u4e2a\u7ebf\u7a0b\u72ec\u4eab\u7684\u5de5\u4f5c\u5185\u5b58\uff0cJava\u5185\u5b58\u6a21\u578b\u89c4\u5b9a\u6240\u6709\u6210\u5458\u53d8\u91cf\u90fd\u9700\u8981\u5b58\u50a8\u5728\u4e3b\u5185\u5b58\u4e2d\uff0c\u7ebf\u7a0b\u4f1a\u5728\u5176\u5de5\u4f5c\u5185\u5b58\u4e2d\u4fdd\u5b58\u9700\u8981\u4f7f\u7528\u7684\u6210\u5458\u53d8\u91cf\u7684\u62f7\u8d1d\uff0c\u7ebf\u7a0b\u5bf9\u6210\u5458\u53d8\u91cf\u7684\u64cd\u4f5c(\u8bfb\u53d6\u548c\u8d4b\u503c\u7b49)\u90fd\u662f\u5bf9\u5176\u5de5\u4f5c\u5185\u5b58\u4e2d\u7684\u62f7\u8d1d\u8fdb\u884c\u64cd\u4f5c\u3002</p> <p>\u5404\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u4e0d\u80fd\u4e92\u76f8\u8bbf\u95ee\u5de5\u4f5c\u5185\u5b58\uff0c\u7ebf\u7a0b\u95f4\u53d8\u91cf\u7684\u4f20\u9012\u9700\u8981\u901a\u8fc7\u4e3b\u5185\u5b58\u6765\u5b8c\u6210\u3002</p> <p></p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#java_2","title":"Java\u7ebf\u7a0b","text":""},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_4","title":"\u591a\u7ebf\u7a0b\u5b9e\u73b0\u65b9\u5f0f","text":"<ul> <li>\u7ee7\u627fThread</li> </ul> <p>### Thread Api</p> <ul> <li>Thread.currentThread().getName()   \u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u540d\u79f0</li> <li>start()   1.\u542f\u52a8\u5f53\u524d\u7ebf\u7a0b2.\u8c03\u7528\u7ebf\u7a0b\u4e2d\u7684run\u65b9\u6cd5</li> <li>run()    \u7ee7\u627fThread\u7c7b\u9700\u8981\u91cd\u5199\u7684\u65b9\u6cd5</li> <li>currentThread() \u9759\u6001\u65b9\u6cd5\uff0c\u8fd4\u56de\u6267\u884c\u5f53\u524d\u4ee3\u7801\u7684\u7ebf\u7a0b</li> <li>setName():\u8bbe\u7f6e\u5f53\u524d\u7ebf\u7a0b\u7684\u540d\u5b57</li> <li>stop() \u5f3a\u5236\u7ed3\u675f\u5f53\u524d\u7ebf\u7a0b\uff0c\u5df2\u88abinterrupt()\u4ee3\u66ff</li> <li>interrupt() \u4e2d\u65ad\u7ebf\u7a0b\uff0c\u81ea\u5df1\u4e2d\u65ad\u81ea\u5df1\u662f\u6ca1\u95ee\u9898\u7684\uff0c\u4f46\u662f\u5982\u679c\u662f\u5176\u4ed6\u7684\u7ebf\u7a0b\uff0c\u9700\u8981\u5224\u65ad</li> <li>checkAccess() \u5224\u65ad\u662f\u5426\u5916\u90e8\u53ef\u4ee5\u4e2d\u65ad\u8be5\u7ebf\u7a0b</li> <li>wait() \u7b49\u5f85 \u5fc5\u987b\u5728synchronized\u4e0a\u4f7f\u7528\uff0c\u539f\u56e0: Wait() \u662fobject\u7684\u65b9\u6cd5\uff0c\u800c\u4e0d\u662fThread,\u5fc5\u987b\u6301\u6709\u8be5object\u7684\u5bf9\u8c61\u9501\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u72b6\u6001\u4e0d\u4e00\u81f4\u3002</li> <li>notify()/notifyAll() \u5524\u9192.      \u539f\u56e0: notify()/notifyall() \u662fobject\u7684\u65b9\u6cd5\uff0c\u800c\u4e0d\u662fThread,\u5fc5\u987b\u6301\u6709\u8be5object\u7684\u5bf9\u8c61\u9501\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u72b6\u6001\u4e0d\u4e00\u81f4\u3002</li> <li>suspend() \u6302\u8d77\u7ebf\u7a0b  \u4e0d\u63a8\u8350\u4f7f\u7528 \u56e0\u4e3a\u4f1a\u5360\u7528Cpu\u548c\u9501\u4e0d\u653e</li> <li>resume()  \u7ee7\u7eed\u7ebf\u7a0b</li> <li>Join() \u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u5185\u90e8\u65b9\u6cd5\u4e0a\u7684\u4e0a\u7ebf\u662fwait()</li> <li>yield() \u8ba9\u5f53\u524d\u7ebf\u7a0b\u8ba9\u51fa</li> </ul> <p>\u8fdb\u7a0b\u6709\u4ee5\u4e0b\u72b6\u6001\uff0c\u8fdb\u7a0b\u662fcpu\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d</p> <p></p> <p>\u7ebf\u7a0b</p> <ul> <li> <p>\u5b9e\u73b0runable</p> </li> <li> <p>\u5b9e\u73b0callable</p> </li> <li> <p>\u6709\u8fd4\u56de\u503c \u8fd4\u56deFuture\u5bf9\u8c61\uff0c\u8fd4\u56de\u7ed3\u679c\u7531Future\u5bf9\u8c61\u4fdd\u5b58</p> </li> <li>\u53ef\u4ee5\u58f0\u660e\u68c0\u67e5\u578b\u5f02\u5e38</li> <li>\u53ea\u6709\u4e00\u4e2acall()\u65b9\u6cd5</li> <li>callable\u7684start()\u53ea\u80fd\u4f7f\u7528Executor;</li> </ul> <p>Future\uff1a\u8fd4\u56de\u7684\u7ed3\u679c</p> <ul> <li> <p>boolean cancel(boolean mayInterruptIfRunning)</p> <p>\u53d6\u6d88\u4efb\u52a1\u7684\u6267\u884c\u3002\u53c2\u6570\u6307\u5b9a\u662f\u5426\u7acb\u5373\u4e2d\u65ad\u4efb\u52a1\u6267\u884c\uff0c\u6216\u8005\u7b49\u7b49\u4efb\u52a1\u7ed3\u675f</p> </li> <li> <p>boolean isCancelled() </p> <p>\u4efb\u52a1\u662f\u5426\u5df2\u7ecf\u53d6\u6d88\uff0c\u4efb\u52a1\u6b63\u5e38\u5b8c\u6210\u524d\u5c06\u5176\u53d6\u6d88\uff0c\u5219\u8fd4\u56de true</p> </li> <li> <p>boolean isDone()</p> </li> </ul> <p>\u200b       \u4efb\u52a1\u662f\u5426\u5df2\u7ecf\u5b8c\u6210\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u5982\u679c\u4efb\u52a1\u6b63\u5e38\u7ec8\u6b62\u3001\u5f02\u5e38\u6216\u53d6\u6d88\uff0c\u90fd\u5c06\u8fd4\u56detrue</p> <ul> <li> <p>V get()</p> <p>\u7b49\u5f85\u4efb\u52a1\u6267\u884c\u7ed3\u675f\uff0c\u7136\u540e\u83b7\u5f97V\u7c7b\u578b\u7684\u7ed3\u679c\u3002InterruptedException \u7ebf\u7a0b\u88ab\u4e2d\u65ad\u5f02\u5e38\uff0c ExecutionException\u4efb\u52a1\u6267\u884c\u5f02\u5e38\uff0c\u5982\u679c\u4efb\u52a1\u88ab\u53d6\u6d88\uff0c\u8fd8\u4f1a\u629b\u51faCancellationException</p> </li> <li> <p>V get(long timeout, TimeUnit unit) </p> <p>\u540c\u4e0a\u9762\u7684get\u529f\u80fd\u4e00\u6837\uff0c\u591a\u4e86\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\u3002\u53c2\u6570timeout\u6307\u5b9a\u8d85\u65f6\u65f6\u95f4\uff0cuint\u6307\u5b9a\u65f6\u95f4\u7684\u5355\u4f4d\uff0c\u5728\u679a\u4e3e\u7c7bTimeUnit\u4e2d\u6709\u76f8\u5173\u7684\u5b9a\u4e49\u3002\u5982\u679c\u8ba1\u7b97\u8d85\u65f6\uff0c\u5c06\u629b\u51faTimeoutException</p> </li> </ul> <p>```java    static class testCallRunable implements Callable{           private String name;           public testCallRunable(String name){               this.name = name;           } <pre><code>      @Override\n      public Boolean call() throws Exception {\n          //for\u7528\u4e8e\u6a21\u62df\u8d85\u65f6\n          for(int i=0;i&lt;999999999;i++){\n              if(i==999999998){\n                  System.out.println(name+\"\u6210\u529f\uff01\");\n              }\n              if (Thread.interrupted()){ //\u5f88\u91cd\u8981\n                  return false;\n              }\n          }\n          System.out.println(name + \"\u6267\u884c\u7ed3\u675f..........\");\n          return true;\n      }\n  }\n</code></pre> <p>public static void main(String[] args) {           int timeout = 2;           new Thread(new testRunable(\"testRunable1\")).start();           ExecutorService exector = Executors.newCachedThreadPool();           Boolean result = false;           Future future = exector.submit(new testCallRunable(\"testCallable\"));           exector.execute(new testRunable(\"testRunable2\"));           try {              // \u901a\u8fc7Future\u7684get()\u65b9\u6cd5\u83b7\u53d6callable\u7684\u8fd4\u56de\u503c \u540c\u65f6\u4e5f\u53ef\u4ee5\u83b7\u53d6call\uff08\uff09\u65b9\u6cd5\u4e2d\u58f0\u660e\u7684\u5f02\u5e38               result = future.get(timeout,TimeUnit.MILLISECONDS);               System.out.println(\"\u53d1\u9001\u8bf7\u6c42\u4efb\u52a1\u7684\u8fd4\u56de\u7ed3\u679c\uff1a \"+result);  //2           } catch (InterruptedException e) {               e.printStackTrace();               System.out.println(\"\u7ebf\u7a0b\u4e2d\u65ad\u51fa\u9519\u3002\");               future.cancel(true);// \u4e2d\u65ad\u6267\u884c\u6b64\u4efb\u52a1\u7684\u7ebf\u7a0b           } catch (ExecutionException e) {               e.printStackTrace();               System.out.println(\"\u7ebf\u7a0b\u670d\u52a1\u51fa\u9519\u3002\");               future.cancel(true);           } catch (TimeoutException e) {               e.printStackTrace();               System.out.println(\"\u8d85\u65f6\u3002\");               future.cancel(true);           }finally {               System.out.println(\"\u7ebf\u7a0b\u670d\u52a1\u5173\u95ed\u3002\");               exector.shutdown();           } <pre><code>  }\n</code></pre> <p>```</p> <p>\u200b   FutureTask:\u662f\u4e00\u4e2aRunableFuture,RunableFuture\u5b9e\u73b0\u4e86Runable,Future\u8fd9\u4e24\u4e2a\u63a5\u53e3\u3002</p> <p>Future\u4e2d\u6709\u6210\u5458\u53d8\u91cfcallable\uff0c\u5b9e\u73b0\u7684run\u65b9\u6cd5\u4e2d\u8c03\u7528\u4e86callable.call()\u65b9\u6cd5\uff0c\u5e76\u5c06\u503c\u4fdd\u5b58\u5230<code>outcome</code>\uff0c\u4ece\u800c\u5b9e\u73b0Future\u4fdd\u5b58\u7ed3\u679c\u7684\u529f\u80fd\u3002</p> <pre><code> public void run() {\n        if (state != NEW ||\n            !UNSAFE.compareAndSwapObject(this, runnerOffset,\n                                         null, Thread.currentThread()))\n            return;\n        try {\n            Callable&lt;V&gt; c = callable;\n            if (c != null &amp;&amp; state == NEW) {\n                V result;\n                boolean ran;\n                try {\n                    result = c.call();//\u6700\u7ec8\u6267\u884c\u7684\u662fcallable.call()\n                    ran = true;\n                } catch (Throwable ex) {\n                    result = null;\n                    ran = false;\n                    setException(ex);//\u4fdd\u5b58\u8fd4\u56de\u7ed3\u679c\u5230outcome\n                }\n                if (ran)\n                    set(result);//\u4fdd\u5b58\u8fd4\u56de\u7ed3\u679c\u5230outcome\n            }\n        } finally {\n            // runner must be non-null until state is settled to\n            // prevent concurrent calls to run()\n            runner = null;\n            // state must be re-read after nulling runner to prevent\n            // leaked interrupts\n            int s = state;\n            if (s &gt;= INTERRUPTING)\n                handlePossibleCancellationInterrupt(s);\n        }\n    }\n</code></pre> <p>FutureTask\u7684\u6784\u9020\u51fd\u6570\u6709\u4e24\u4e2a\uff0c\u53ef\u4ee5\u4f20\u5165callable(),\u4e5f\u53ef\u4ee5\u4f20\u5165runable(),\u672c\u8d28\u4e0a\u6700\u540e\u662f\u6700\u540e\u90fd\u4f1a\u8f6c\u6362\u6210callable\uff1b</p> <pre><code> public FutureTask(Callable&lt;V&gt; callable) {\n        if (callable == null)\n            throw new NullPointerException();\n        this.callable = callable;\n        this.state = NEW;       // ensure visibility of callable\n    }\n public FutureTask(Runnable runnable, V result) {\n        this.callable = Executors.callable(runnable, result);\n        this.state = NEW;       // ensure visibility of callable\n    }\n</code></pre> <p>\u82e5\u60f3\u5b9e\u73b0\u4fdd\u5b58\u591a\u4e2a\u8fd4\u56de\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528<code>CompletionService</code></p> <ul> <li>\u7ebf\u7a0b\u6c60\u521b\u5efa\u7ebf\u7a0b (\u89c1)</li> </ul>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_5","title":"\u7ebf\u7a0b\u8c03\u5ea6","text":""},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_6","title":"\u7ebf\u7a0b\u540c\u6b65","text":"<p>\u4f7f\u7528synchronized\u6765\u5b9e\u73b0\u7ebf\u7a0b\u540c\u6b65\uff0c\u53ef\u4ee5\u5206\u4e3a\u540c\u6b65\u65b9\u6cd5\u548c\u540c\u6b65\u8bed\u53e5\u5757</p> <ul> <li> <p>\u5bf9\u8c61\u9501</p> </li> <li> <p>\u628asynchronized\u5f53\u4f5c\u51fd\u6570\u4fee\u9970\u7b26\u65f6 = \u4f7f\u7528this\u5f53\u5bf9\u8c61\u9501</p> <p><code>java Public synchronized void methodAAA() { //\u2026. } //\u7b49\u4ef7\u4e8e public void methodAAA() { synchronized (this)      //  (1) {        //\u2026.. } }</code></p> <p>\u8be5\u5bf9\u8c61\u9501\u7684\u4f7f\u7528\u662f\u8bf4\u540c\u4e00\u4e2a\u5bf9\u8c61\u5728\u4e0d\u540c\u7ebf\u7a0b\u4e2d\u7684\u540c\u6b65\u3002</p> </li> <li> <p>instance\u53d8\u91cf \u5f53\u5bf9\u8c61\u9501</p> <p><code>java class Foo implements Runnable {        private byte[] lock = new byte[0];  // \u7279\u6b8a\u7684instance\u53d8\u91cf     Public void methodA() {        synchronized(lock) { //\u2026 } } //\u2026.. }</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u6210\u5458\u53d8\u91cf\u6765\u5f53\u5bf9\u8c61\u9501\uff0c\u96f6\u957f\u5ea6\u7684byte\u6570\u7ec4\u5bf9\u8c61\u521b\u5efa\u8d77\u6765\u5c06\u6bd4\u4efb\u4f55\u5bf9\u8c61\u90fd\u7ecf\u6d4e</p> </li> <li> <p>synchronized\u4f5c\u7528\u4e8estatic \u51fd\u6570 = \u4f7f\u7528class literal(\u7c7b\u540d\u79f0\u5b57\u9762\u5e38\u91cf)\u5f53\u9501</p> <p><code>java Class Foo {   public synchronized static void methodAAA()   // \u540c\u6b65\u7684static \u51fd\u6570   {     //\u2026.   }   public void methodBBB()   {     synchronized(Foo.class)   //  class literal(\u7c7b\u540d\u79f0\u5b57\u9762\u5e38\u91cf)   } }</code></p> <p>\u8be5\u540c\u6b65\u662f\u8bf4\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5bf9\u8c61\u7684\u7c7b\u4f5c\u4e3a\u9501\uff0c\u4e0d\u540c\u7684\u5bf9\u8c61\u5728\u4e0d\u540c\u7684\u7ebf\u7a0b\u4e2d\u4f7f\u7528\u8be5\u65b9\u6cd5\u9700\u8981\u540c\u6b65</p> </li> <li> <p>\u6210\u5458\u9501</p> </li> <li> <p>\u51fd\u6570\u6210\u5458\u5f53\u9501</p> <p><code>java public void method3(SomeObject so) {   synchronized(so)   {     //\u2026..   } }</code></p> <p>\u62ff\u5230\u51fd\u6570\u53c2\u6570\u5f53\u9501</p> </li> </ul> <p>\u4f7f\u7528Lock\u9501\u65b9\u6cd5</p> <pre><code> private ReentrantLock lock = new ReentrantLock();\n  lock.lock();\n  lock.unlock();\n</code></pre> <p>Lock\u9501\u7684\u65b9\u6cd5\u76f8\u6bd4\u8f83\u4e8esynchorized,\u9700\u8981\u624b\u52a8\u7684\u53bb\u5b9e\u73b0\u542f\u52a8\u540c\u6b65\u548c\u5173\u95ed\u540c\u6b65\u3002</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_7","title":"\u7ebf\u7a0b\u6c60\u77e5\u8bc6\u6574\u7406","text":"<p>\u7ebf\u7a0b\u6c60\u662f\u4e00\u79cd\u57fa\u4e8e\u6c60\u5316\u601d\u60f3\u7ba1\u7406\u7ebf\u7a0b\u7684\u5de5\u5177\u3002\u6c60\u5316\u6280\u672f\uff1a\u6c60\u5316\u6280\u672f\u7b80\u5355\u70b9\u6765\u8bf4\uff0c\u5c31\u662f\u63d0\u524d\u4fdd\u5b58\u5927\u91cf\u7684\u8d44\u6e90\uff0c\u4ee5\u5907\u4e0d\u65f6\u4e4b\u9700\u3002\u6bd4\u5982\u6211\u4eec\u7684\u5bf9\u8c61\u6c60\uff0c\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u7b49\u3002</p> <p>\u7ebf\u7a0b\u6c60\u7684\u4f7f\u7528\u662f\u590d\u7528\u4e86\u7ebf\u7a0b\uff0c\u51cf\u5c11\u4e86\u7ebf\u7a0b\u7684\u521b\u5efa\u548c\u9500\u6bc1\uff0c\u63d0\u9ad8\u4e86\u7ebf\u7a0b\u7684\u5229\u7528\u7387\u3002</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_8","title":"\u7ebf\u7a0b\u6c60\u7684\u4f18\u52bf","text":"<ul> <li>\u964d\u4f4e\u8d44\u6e90\u6d88\u8017</li> <li>\u63d0\u9ad8\u54cd\u5e94\u901f\u5ea6</li> <li>\u63d0\u9ad8\u7ebf\u7a0b\u7684\u53ef\u7ba1\u7406\u6027</li> </ul>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#java_3","title":"Java\u7ebf\u7a0b\u6c60\u7684\u521b\u5efa\u548c\u53c2\u6570\u8bf4\u660e","text":"<p>\u63a8\u8350\u4f7f\u7528ThreadPoolExecutor,\u800c\u4e0d\u5efa\u8bae\u4f7f\u7528Executors\u6765\u521b\u5efa,\u539f\u56e0\u662f\u4f7f\u7528ThreadPoolExecutor\u53ef\u4ee5\u66f4\u52a0\u660e\u786e\u7ebf\u7a0b\u6c60\u7684\u8fd0\u884c\u89c4\u5219\uff0c\u89c4\u907f\u8d44\u6e90\u8017\u5c3d\u7684\u98ce\u9669\u3002</p> <ul> <li> <p>executor      java\u63d0\u4f9b\u7684\u7ebf\u7a0b\u6c60\u521b\u5efa\u65b9\u6cd5</p> </li> <li> <p>newFixedThreadPool</p> </li> <li>newSingleThreadExecutor</li> <li>newCachedThreadPool</li> <li>newScheduledThreadPool</li> <li> <p>newWorkStealingPool</p> </li> <li> <p>ThreadPoolExecutor</p> </li> </ul> <p><code>java   public ThreadPoolExecutor(int corePoolSize,                                 int maximumPoolSize,                                 long keepAliveTime,                                 TimeUnit unit,                                 BlockingQueue&lt;Runnable&gt; workQueue,                                 ThreadFactory threadFactory,                                 RejectedExecutionHandler handler)</code></p> <ul> <li> <p>corePoolSize \u6838\u5fc3\u7ebf\u7a0b\u6570,\u7ebf\u7a0b\u6c60\u7684\u57fa\u672c\u5927\u5c0f,<code>prestartAllCoreThreads</code>()\u65b9\u6cd5\u7ebf\u7a0b\u6c60\u5c31\u4f1a\u4e3a\u6211\u4eec\u63d0\u524d\u521b\u5efa\u597d\u6240\u6709\u7684\u57fa\u672c\u7ebf\u7a0b.</p> </li> <li> <p>maximumPoolSize\u3002\u6700\u5927\u7ebf\u7a0b\u6570\uff0c\u77e5\u8bc6\u70b9\uff1a\u5982\u679c\u4f7f\u7528\u7684\u662f\u65e0\u754c\u961f\u5217\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f\u4e0d\u4f1a\u8d77\u4f5c\u7528\u7684\uff0c\u5177\u4f53\u770b\u7ebf\u7a0b\u7684\u6267\u884c\u6d41\u7a0b</p> </li> <li> <p>keepAliveTime  \u7a7a\u95f2\u7ebf\u7a0b\u6700\u5927\u751f\u5b58\u7a7a\u95f4\uff0c\u5f53\u7ebf\u7a0b\u6570&gt;corePoolSize\u65f6\uff0c\u82e5\u4e00\u4e2a\u7ebf\u7a0b\u7a7a\u95f2\u7684\u65f6\u95f4\u8fbe\u5230\u4e86keepAliveTime\uff0c\u5219\u4f1a\u7ec8\u6b62\uff0c\u76f4\u5230\u7ebf\u7a0b\u6570\u4e0d\u8d85\u8fc7corePoolSize\u3002\u5982\u679c\u8c03\u7528\u4e86<code>allowCoreThreadTimeOut</code>(boolean)\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5c06<code>allowCoreThreadTimeOut</code>\u8bbe\u7f6e\u4e3atrue.\u6b64\u65f6\u4f1a\u5c06keepAliveTime\u6269\u5c55\u5230corePoolSize\u7ebf\u7a0b\u4ee5\u5185\uff0c\u5373\u53ea\u8981\u7ebf\u7a0b\u7a7a\u95f2\u7684\u65f6\u95f4\u8fbe\u5230\u4e86keepAliveTime\uff0c\u5c31\u4f1a\u7ec8\u6b62\u7ebf\u7a0b\uff1b</p> </li> <li> <p>unit \u7ebf\u7a0b\u5b58\u6d3b\u65f6\u95f4\u7684\u7684\u5355\u4f4d\u3002\u53ef\u9009\u7684\u5355\u4f4d\u6709<code>days</code>\u3001<code>hours</code>\u7b49\u3002</p> </li> <li> <p>workQueue  \u963b\u585e\u961f\u5217 \u8be6\u60c5\u89c1(Java \u591a\u7ebf\u7a0b\u963b\u585e\u961f\u5217)</p> <p></p> </li> <li> <p>threadFactory  \u81ea\u5b9a\u4e49\u8bbe\u7f6e\u521b\u5efa\u7ebf\u7a0b\u7684\u5de5\u5382\uff0c\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u5de5\u5382\u6765\u521b\u5efa\u6709\u4e1a\u52a1\u610f\u4e49\u7684\u7ebf\u7a0b\u540d\u5b57\uff0c\u5efa\u8bae\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u5de5\u5382\uff0c\u65b9\u4fbf\u51fa\u9519\u65f6\u56de\u6eaf\u3002</p> <p>\u4e3b\u8981\u901a\u8fc7\u7ebf\u7a0bnamePrefix\u6765\u547d\u540d\u3002</p> <p>```java //\u9ed8\u8ba4\u7684\u7ebf\u7a0b\u5de5\u5382 private static class DefaultThreadFactory implements ThreadFactory {         private static final AtomicInteger poolNumber = new AtomicInteger(1);         private final ThreadGroup group;         private final AtomicInteger threadNumber = new AtomicInteger(1);         private final String namePrefix;</p> <pre><code>    DefaultThreadFactory() {\n        SecurityManager s = System.getSecurityManager();\n        group = (s != null) ? s.getThreadGroup() :\n                              Thread.currentThread().getThreadGroup();\n        namePrefix = \"pool-\" +\n                      poolNumber.getAndIncrement() +\n                     \"-thread-\";\n    }\n\n    public Thread newThread(Runnable r) {\n        Thread t = new Thread(group, r,\n                              namePrefix + threadNumber.getAndIncrement(),\n                              0);\n        if (t.isDaemon())\n            t.setDaemon(false);\n        if (t.getPriority() != Thread.NORM_PRIORITY)\n            t.setPriority(Thread.NORM_PRIORITY);\n        return t;\n    }\n}\n</code></pre> <p>```</p> </li> <li> <p>RejectedExecutionHandler handler \u7ebf\u7a0b\u6c60\u62d2\u7edd\u7b56\u7565</p> <p>\u5f53\u7ebf\u7a0b\u6c60\u548c\u963b\u585e\u961f\u5217\u90fd\u6ee1\u4e86\u7684\u65f6\u5019\uff0c\u9700\u8981\u91c7\u53d6\u4e00\u5b9a\u7684\u7b56\u7565\u6765\u62d2\u7edd\u65b0\u63d0\u4ea4\u7684\u4efb\u52a1\u3002</p> <p></p> </li> </ul> <p>\u200b                 \u53ef\u4ee5\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u7b56\u7565\uff0c\u6bd4\u5982\u4e0d\u62d2\u7edd\u800c\u662f\u6dfb\u52a0\u7ebf\u7a0b\u6570\uff0c\u518d\u6bd4\u5982\u8bb0\u5f55\u65e5\u5fd7\u540e\u8fdb\u884c\u91cd\u8bd5</p> <pre><code>\n            //\u6dfb\u52a0\u7ebf\u7a0b\n            public void rejectedExecution(Runnable runnable, ThreadPoolExecutor threadPoolExecutor) {\n              if (null == threadPoolExecutor || threadPoolExecutor.isShutdown()) {\n                return;\n              }\n\n              int maxSize = threadPoolExecutor.getMaximumPoolSize();\n              threadPoolExecutor.setMaximumPoolSize(++maxSize);\n              threadPoolExecutor.execute(runnable);\n            }\n            //\u62d2\u7edd\u540e\u8bb0\u5f55\u65e5\u5fd7\u5e76\u91cd\u8bd5\n            @Override\n            public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {\n              String msg = String.format(\"Thread pool is EXHAUSTED!\" +\n                                         \" Thread Name: %s, Pool Size: %d (active: %d, core: %d, max: %d, largest: %d), Task: %d (completed: \"\n                                         + \"%d),\" +\n                                         \" Executor status:(isShutdown:%s, isTerminated:%s, isTerminating:%s), in %s://%s:%d!\",\n                                         threadName, e.getPoolSize(), e.getActiveCount(), e.getCorePoolSize(), e.getMaximumPoolSize(),\n                                         e.getLargestPoolSize(),\n                                         e.getTaskCount(), e.getCompletedTaskCount(), e.isShutdown(), e.isTerminated(), e.isTerminating(),\n                                         url.getProtocol(), url.getIp(), url.getPort());\n              logger.warn(msg);\n              dumpJStack();\n              dispatchThreadPoolExhaustedEvent(msg);\n              throw new RejectedExecutionException(msg);\n            }\n            ```\n</code></pre> <p>\u7ebf\u7a0b\u6c60\u53c2\u6570\u8bbe\u7f6e\u7684\u53c2\u8003\u8bbe\u7f6e\u5efa\u8bae\uff1a</p> <ul> <li>IO \u5bc6\u96c6\u7684\u7528IO\u5bc6\u96c6\u578b\u7ebf\u7a0b\u5904\u7406\uff0c\u7ebf\u7a0b\u8bbe\u7f6e\u6570\u8bbe\u7f6e\u4e3a2\u500dcpu\u4ee5\u4e0a\u3002IO\u578b\uff1a\u8bfb\u53d6\u6570\u636e\u5e93\u3001\u6587\u4ef6\u8bfb\u5199\u3001\u7f51\u7edc\u901a\u4fe1\u7b49\u8017\u65f6\u4efb\u52a1</li> <li>CPU\u5bc6\u96c6\u7684\u7528CPU\u5bc6\u96c6\u578b\u7ebf\u7a0b\u5904\u7406\uff0c\u7ebf\u7a0b\u8bbe\u7f6e\u6570\u4e3acpu+1;(1\u7528\u6765\u5907\u4efd\u7ebf\u7a0b) \u3002CPU\u578b\u5927\u91cf\u8ba1\u7b97\u3001\u538b\u7f29\u3001\u89e3\u538b\u7b49</li> </ul>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_9","title":"\u7ebf\u7a0b\u6c60\u7684\u6267\u884c\u6d41\u7a0b","text":"<p>\uff081\uff09\u5224\u65ad\u7ebf\u7a0b\u6c60\u662f\u5426\u8fd8\u5b58\u5728\uff0c\u82e5\u5b58\u5728\uff0c\u6267\u884c\u7ebf\u7a0b\uff0c\u82e5\u4e0d\u5b58\u5728\uff0c\u62d2\u7edd</p> <p>\uff082\uff09\u5224\u65ad\u7ebf\u7a0b\u6570\u662f\u5426\u5c0f\u4e8e\u6838\u5fc3\u7ebf\u7a0b\u6570\uff0c\u82e5\u5c0f\u4e8e\uff0c\u6dfb\u52a0\u65b0\u7684\u7ebf\u7a0b\u518d\u6267\u884c\uff0c\u82e5\u5927\u4e8e\uff0c\u5c06\u5176\u6dfb\u52a0\u5230\u963b\u585e\u961f\u5217</p> <p>\uff083\uff09\u5224\u65ad\u963b\u585e\u961f\u5217\u662f\u5426\u5df2\u6ee1\uff0c\u82e5\u672a\u6ee1\uff0c\u5728\u963b\u585e\u961f\u5217\u4e2d\u7b49\u5f85\u7ebf\u7a0b\u83b7\u53d6\u6267\u884c\uff0c\u82e5\u5df2\u6ee1\uff0c\u770b\u662f\u5426\u5df2\u8fbe\u5230\u6700\u5927\u7ebf\u7a0b\u6570</p> <p>\uff084\uff09\u82e5\u5df2\u8fbe\u5230\u6700\u5927\u7ebf\u7a0b\u6570\uff0c\u62d2\u7edd\u6267\u884c\uff0c\u82e5\u672a\u8fbe\u5230\uff0c\u6dfb\u52a0\u65b0\u7684\u5de5\u4f5c\u7ebf\u7a0b\u5e76\u6267\u884c</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#java-blockingqueue","title":"Java \u591a\u7ebf\u7a0b\u963b\u585e\u961f\u5217\u2014\u2014BlockingQueue","text":"<p>BlockingQueue\u5f88\u597d\u7684\u89e3\u51b3\u4e86\u591a\u7ebf\u7a0b\u4e2d\uff0c\u5982\u4f55\u9ad8\u6548\u5b89\u5168\u201c\u4f20\u8f93\u201d\u6570\u636e\u7684\u95ee\u9898\u3002\u901a\u8fc7\u8fd9\u4e9b\u9ad8\u6548\u5e76\u4e14\u7ebf\u7a0b\u5b89\u5168\u7684\u961f\u5217\u7c7b\uff0c\u4e3a\u6211\u4eec\u5feb\u901f\u642d\u5efa\u9ad8\u8d28\u91cf\u7684*\u591a\u7ebf\u7a0b\u7a0b\u5e8f*\u5e26\u6765\u6781\u5927\u7684\u4fbf\u5229</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_10","title":"\u6838\u5fc3\u65b9\u6cd5","text":""},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_11","title":"\u653e\u5165\u6570\u636e","text":"<ul> <li>boolean add(E e) </li> </ul> <p>\u6dfb\u52a0\u6570\u636e\u5230BlockingQueue,\u5982\u679cBlockingQueue\u6709\u7a7a\u95f4\u53ef\u4ee5\u5bb9\u7eb3\uff0c\u8fd4\u56detrue,\u5426\u5219\u8fd4\u56deFalse\u3002\u4e0d\u963b\u585e\u5f53\u524d\u6267\u884c\u65b9\u6cd5\u7684\u7ebf\u7a0b</p> <ul> <li>boolean offer(E e)</li> </ul> <p>\u6dfb\u52a0\u6570\u636e\u5230BlockingQueue,\u5982\u679cBlockingQueue\u6709\u7a7a\u95f4\u53ef\u4ee5\u5bb9\u7eb3\uff0c\u8fd4\u56detrue,\u5426\u5219\u8fd4\u56deFalse\u3002\u4e0d\u963b\u585e\u5f53\u524d\u6267\u884c\u65b9\u6cd5\u7684\u7ebf\u7a0b\uff0c\u5f53\u4f7f\u7528\u53d7\u9650\u961f\u5217\u65f6\uff0c\u63a8\u8350\u4f7f\u7528offer</p> <ul> <li>boolean offer(E e, long timeout, TimeUnit unit) throws InterruptedException;</li> </ul> <p>\u53ef\u4ee5\u8bbe\u5b9a\u7b49\u5f85\u7684\u65f6\u95f4\uff0c\u5982\u679c\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5185\uff0c\u8fd8\u4e0d\u80fd\u5f80\u961f\u5217\u4e2d\u52a0\u5165BlockingQueue\uff0c\u5219\u8fd4\u56de\u5931\u8d25\u3002 </p> <ul> <li>void put(E e) throws InterruptedException;</li> </ul> <p>\u628aanObject\u52a0\u5230BlockingQueue\u91cc,\u5982\u679cBlockQueue\u6ca1\u6709\u7a7a\u95f4,\u5219\u8c03\u7528\u6b64\u65b9\u6cd5\u7684\u7ebf\u7a0b\u88ab\u963b\u65ad,\u76f4\u5230BlockingQueue\u91cc\u9762\u6709\u7a7a\u95f4\u518d\u7ee7\u7eed.</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_12","title":"\u83b7\u53d6\u6570\u636e","text":"<ul> <li>E poll(long timeout, TimeUnit unit) throws InterruptedException;</li> </ul> <p>BlockingQueue\u53d6\u51fa\u4e00\u4e2a\u961f\u9996\u7684\u5bf9\u8c61\uff0c\u5982\u679c\u5728\u6307\u5b9a\u65f6\u95f4\u5185\uff0c\u961f\u5217\u4e00\u65e6\u6709\u6570\u636e\u53ef\u53d6\uff0c\u5219\u7acb\u5373\u8fd4\u56de\u961f\u5217\u4e2d\u7684\u6570\u636e\u3002\u5426\u5219\u77e5\u9053\u65f6\u95f4\u8d85\u65f6\u8fd8\u6ca1\u6709\u6570\u636e\u53ef\u53d6\uff0c\u8fd4\u56de\u5931\u8d25\u3002</p> <ul> <li>E take() throws InterruptedException;</li> </ul> <p>\u53d6\u8d70BlockingQueue\u91cc\u6392\u5728\u9996\u4f4d\u7684\u5bf9\u8c61,\u82e5BlockingQueue\u4e3a\u7a7a,\u963b\u65ad\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\u76f4\u5230BlockingQueue\u6709\u65b0\u7684\u6570\u636e\u88ab\u52a0\u5165; </p> <ul> <li>int drainTo(Collection&lt;? super E&gt; c);</li> </ul> <p>\u5c06BlockingQueue\u7684\u6570\u636e\u5df2\u5230\u96c6\u5408C\u4e2d\uff0c\u901a\u8fc7\u8be5\u65b9\u6cd5\uff0c\u53ef\u4ee5\u63d0\u5347\u83b7\u53d6\u6570\u636e\u6548\u7387\uff1b\u4e0d\u9700\u8981\u591a\u6b21\u5206\u6279\u52a0\u9501\u6216\u91ca\u653e\u9501\u3002 </p> <ul> <li>int drainTo(Collection&lt;? super E&gt; c, int maxElements); \u53ef\u4ee5\u6307\u5b9a\u4e00\u6b21\u6027\u53d6\u51fa\u7684\u6570\u636e\u6570\u91cf</li> </ul>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_13","title":"\u5176\u4ed6\u65b9\u6cd5","text":"<ul> <li>int remainingCapacity();</li> </ul> <p>\u8fd4\u56de\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u961f\u5217\u53ef\u4ee5\u6dfb\u52a0\u7684\u6570\u636e\u6570\u91cf</p> <ul> <li>boolean remove(Object o);</li> </ul> <p>\u79fb\u9664\u961f\u5217\u4e2d\u6307\u5b9a\u7684\u5b9e\u4f8b\uff0c\u82e5\u6210\u529f\u8fd4\u56detrue,\u5426\u5219\u8fd4\u56defalse</p> <ul> <li>boolean contains(Object o);</li> </ul> <p>\u5982\u679cBlockingQueue\u4e2d\u6709\u81f3\u5c11\u4e00\u4e2a\u6307\u5b9a\u7684\u5b9e\u4f8b\uff0c\u8fd4\u56detrue,\u5426\u5219\u8fd4\u56defalse</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#blockingqueue","title":"\u5e38\u89c1BlockingQueue","text":""},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#arrayblockingqueue","title":"ArrayBlockingQueue","text":"<p>\u57fa\u4e8e\u6570\u7ec4\u7684\u6709\u754c\u963b\u585e\u961f\u5217\uff0c\u7ef4\u62a4\u4e86\u4e00\u4e2a\u5b9a\u957f\u7684\u6570\u7ec4\uff0c\u5e76\u6709\u4e24\u4e2a\u5e38\u91cf\u6807\u8bc6\u961f\u9996\u548c\u961f\u5c3e\uff0c\u5e76\u53ef\u4ee5\u9009\u62e9\u662f\u516c\u5e73\u9501\u8fd8\u662f\u975e\u516c\u5e73\u9501\uff0c\u4f46\u662f\u653e\u5165\u6570\u636e\u548c\u83b7\u53d6\u6570\u636e\u662f\u5171\u7528\u4e00\u4e2a\u9501\u5bf9\u8c61\uff0c\u610f\u5473\u7740\u65e0\u6cd5\u771f\u6b63\u5e76\u884c\u8fd0\u884c\u3002</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#linkedblockingqueue","title":"LinkedBlockingQueue","text":"<p>\u57fa\u4e8e\u961f\u5217\u7684\u6709\u754c\u963b\u585e\u961f\u5217\uff0c\u4f46\u662f\u961f\u5217\u957f\u5ea6\u4e3aInteger.MAX_VALUE\uff0c\u610f\u5473\u7740\u751f\u4ea7\u8005\u901f\u5ea6\u8fdc\u8fdc\u5927\u4e8e\u6d88\u8d39\u8005\u6d88\u8d39\u901f\u5ea6\u65f6\uff0c\u5bb9\u6613\u4ea7\u751f\u5185\u5b58\u6ea2\u51fa\u3002\u6548\u7387\u9ad8\u4e8eArrayBlockingQueue\uff0c\u539f\u56e0\u662f\u56e0\u4e3a\u4f7f\u7528\u4e86\u5206\u79bb\u9501\u3002</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#delayqueue","title":"DelayQueue","text":"<p>DelayQueue\u548c\u653e\u5165\u6570\u636e\u6ca1\u6709\u5173\u7cfb\uff0c\u53d6\u51fa\u6570\u636e\u65f6\uff0c\u53ea\u6709\u5f53\u5176\u6307\u5b9a\u7684\u5ef6\u8fdf\u65f6\u95f4\u5230\u4e86\uff0c\u624d\u80fd\u591f\u4ece\u961f\u5217\u4e2d\u83b7\u53d6\u5230\u8be5\u5143\u7d20\u3002\u4f7f\u7528\u573a\u666f\uff1a\u4f7f\u7528\u4e00\u4e2aDelayQueue\u6765\u7ba1\u7406\u4e00\u4e2a\u8d85\u65f6\u672a\u54cd\u5e94\u7684\u8fde\u63a5\u961f\u5217\u3002</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#priorityblockingqueue","title":"PriorityBlockingQueue","text":"<p>\u57fa\u4e8e\u4f18\u5148\u7ea7\u7684\u6709\u754c\u963b\u585e\u961f\u5217\uff0c\u4f18\u5148\u7ea7\u7684\u5224\u65ad\u53ef\u4ee5\u901a\u8fc7\u91cd\u5199Compator\u5bf9\u8c61\uff0c\u4e0d\u963b\u585e\u751f\u4ea7\u8005\uff0c\u53ea\u963b\u585e\u6d88\u8d39\u8005</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#synchronousqueue","title":"SynchronousQueue","text":"<p>\u540c\u6b65\u961f\u5217\u662f\u4e00\u4e2a\u6ca1\u6709\u5bb9\u91cf\u7684\u961f\u5217\uff0c\u53ea\u6709\u5f53put\u64cd\u4f5c\u548ctake\u64cd\u4f5c\u540c\u65f6\u5b58\u5728\u65f6\uff0c\u624d\u4f1a\u6267\u884c\uff0c\u5426\u5219\u4f1a\u963b\u585e\u6d88\u8d39\u8005\u548c\u751f\u4ea7\u8005\uff0c\u907f\u514d\u961f\u5217\u91cc\u5b58\u5728\u7f13\u51b2\u6570\u636e\uff0c\u5728\u7cfb\u7edf\u5f02\u5e38\u5173\u95ed\u65f6\uff0c\u5c31\u80fd\u6392\u9664\u56e0\u4e3a\u963b\u585e\u961f\u5217\u4e22\u6d88\u606f\u7684\u53ef\u80fd\u3002\u4e00\u822c\u8bbe\u7f6e\u4e3aInteger.MAX_VALUE\uff0c\u907f\u514d\u62d2\u7edd\u6267\u884c\u3002</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_14","title":"\u7ebf\u7a0b\u6c60\u7ebf\u7a0b\u56de\u6536","text":"<p>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\u5373\u4f1a\u88ab\u56de\u6536</p> <ul> <li>\u5f53\u524d\u7ebf\u7a0b\u6c60\u5927\u5c0f&gt;\u6838\u5fc3\u7ebf\u7a0b\u6c60\u5927\u5c0f</li> <li>\u8be5\u7ebf\u7a0b\u7a7a\u95f2\u65f6\u95f4\u8d85\u8fc7KeepAliveTime</li> </ul> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e<code>allowCoreThreadTimeOut</code>\u4e3a<code>true</code>\uff0c\u5219\u8be5\u7ebf\u7a0b\u8d85\u8fc7\u5373\u4f1a\u88ab\u56de\u6536\u3002</p> <p>Android \u4e2d\u4f7f\u7528\u9047\u5230\u7684\u95ee\u9898\uff1a</p> <p>1\u3001\u7ebf\u7a0b\u6c60\u521b\u5efa\u7684\u7ebf\u7a0b\u4e2d\u65b0\u5efaLooper\u9047\u5230\u201cOnly one Looper may be created per thread\u201d</p> <p>\u539f\u56e0\uff1a\u7ebf\u7a0b\u6c60\u662f\u5728\u590d\u7528\u7ebf\u7a0b\uff0c\u63d0\u9ad8\u7ebf\u7a0b\u5229\u7528\u6548\u7387\uff0c\u56e0\u6b64\u53ef\u80fd\u4f7f\u7528\u7684\u662f\u590d\u7528\u7684\u7ebf\u7a0b\uff0c\u7ebf\u7a0b\u4e2d\u6709\u53ef\u80fd\u5df2\u7ecf\u5b58\u5728Looper</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u8fdb\u884c\u5bf9Looper\u7684\u5224\u65ad\u3002</p> <p>2\u3001\u4f7f\u7528\u975e\u6838\u5fc3\u7ebf\u7a0b\u521b\u5efaLooper,\u7ebf\u7a0b\u4f1a\u88ab\u56de\u6536</p> <p>\u539f\u56e0\uff1a\u975e\u6838\u5fc3\u7ebf\u7a0b\u4f1a\u6709\u5b58\u6d3b\u65f6\u95f4\uff0c\u5f53\u975e\u6838\u5fc3\u7ebf\u7a0b\u7a7a\u95f2\u65f6\u95f4\u8d85\u8fc7\u5b58\u6d3b\u65f6\u95f4\u4f1a\u88ab\u56de\u6536</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#java_4","title":"\u56db\u79cdJava\u63d0\u4f9b\u7684\u7ebf\u7a0b\u6c60\u5bf9\u6bd4","text":""},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#_15","title":"\u5982\u4f55\u9009\u62e9\u7ebf\u7a0b\u6c60\u81ea\u5b9a\u4e49\u53c2\u6570","text":""},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#java_5","title":"\u5b9e\u6218Java\u5e76\u53d1\u7a0b\u5e8f\u8bbe\u8ba1 \u7b14\u8bb0","text":"<p>\u5fc5\u987b\u77e5\u9053\u7684\u6982\u5ff5\uff1a</p> <p><code>\u540c\u6b65</code>\uff1a\u5fc5\u987b\u7b49\u5230\u7ed3\u679c\u8fd4\u56de\u624d\u4f1a\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c</p> <p><code>\u5f02\u6b65</code>\uff1a\u4e0d\u9700\u8981\u7b49\u8fd4\u56de\u7ed3\u679c\u5c31\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c</p> <p><code>\u5e76\u53d1</code>\uff1a\u4e24\u4e2a\u6216\u591a\u4e2a\u4efb\u52a1\u6267\u884c\u7684\u65f6\u5019\u662f\u8f6e\u6d41\u4ea4\u66ff\u6267\u884c\u7684\uff0c\u5355\u6838Cpu\u6267\u884c\u591a\u7ebf\u7a0b\u7684\u65f6\u5019\u5c31\u662f\u5e76\u53d1</p> <p><code>\u5e76\u884c</code>\uff1a\u4e24\u4e2a\u6216\u591a\u4e2a\u4efb\u52a1\u6267\u884c\u7684\u65f6\u5019\u662f\u5e76\u884c\u6267\u884c</p> <p><code>\u4e34\u754c\u533a</code>\uff1a\u5728\u5e76\u884c\u65f6\uff0c\u591a\u4e2a\u7ebf\u7a0b\u5171\u4eab\u7684\u8d44\u6e90</p> <p><code>\u963b\u585e</code>\uff1a\u5728\u7ebf\u7a0b\u62ff\u4e0d\u5230\u81ea\u5df1\u7ee7\u7eed\u6267\u884c\u7684\u8d44\u6e90\u65f6\uff0c\u5c31\u4f1a\u6302\u8d77\uff0c\u5c31\u662f\u963b\u585e\u3002</p> <p><code>\u6b7b\u9501</code>\uff1a\u6b7b\u9501\u6307\u7ebf\u7a0b\u4e4b\u95f4\u90fd\u5360\u6709\u5bf9\u65b9\u60f3\u8981\u7684\u8d44\u6e90\uff0c\u9020\u6210\u7ebf\u7a0b\u90fd\u65e0\u6cd5\u6267\u884c\u3002</p> <p><code>\u9965\u997f</code>\uff1a\u6307\u67d0\u4e2a\u7ebf\u7a0b\u56e0\u4e3a\u79cd\u79cd\u539f\u56e0\u4e00\u76f4\u65e0\u6cd5\u83b7\u5f97\u81ea\u5df1\u60f3\u8981\u7684\u8d44\u6e90\uff0c\u6bd4\u5982\u4f18\u5148\u7ea7\u8fc7\u4f4e</p> <p><code>\u6d3b\u9501</code>\uff1a\u6307\u7ebf\u7a0b\u7684\u8d44\u6e90\u7b56\u7565\uff0c\u4e00\u76f4\u51b2\u7a81</p> <p><code>\u5e76\u53d1\u7ea7\u522b</code>\uff1a\u6839\u636e\u5e76\u53d1\u7b56\u7565\u7684\u8fdb\u884c\u5206\u7c7b</p> <ul> <li><code>\u963b\u585e</code></li> <li><code>\u65e0\u9965\u997f</code></li> <li><code>\u65e0\u969c\u788d</code></li> <li><code>\u65e0\u9501</code></li> <li><code>\u65e0\u7b49\u5f85</code></li> </ul> <p><code>\u539f\u5b50\u6027</code>\uff1a\u7ebf\u7a0b\u64cd\u4f5c\u8fc7\u7a0b\u662f\u4e0d\u53ef\u4e2d\u65ad\u7684</p> <p><code>\u53ef\u89c1\u6027</code>\uff1a\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u4e86\u67d0\u4e00\u4e2a\u5171\u4eab\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u5176\u4ed6\u7ebf\u7a0b\u662f\u5426\u80fd\u591f\u7acb\u5373\u77e5\u9053\u8fd9\u4e2a\u4fee\u6539\u3002</p> <p><code>\u6709\u5e8f\u6027</code>\uff1a\u56e0\u4e3acpu\u6d41\u6c34\u7ebf\u7684\u64cd\u4f5c\uff08\u4e3a\u4e86\u63d0\u9ad8\u6267\u884c\u6548\u7387\uff09\uff0c\u4f1a\u8fdb\u884c\u6307\u4ee4\u91cd\u6392\uff0c\u4ece\u800c\u9020\u6210\u4e0d\u662f\u90a3\u4e48\u6709\u5e8f</p> <p>\u4f46\u662f\u6307\u4ee4\u91cd\u6392\u7684\u524d\u63d0\u662f\u4fdd\u8bc1\u4e32\u884c\u8bed\u4e49\u7684\u4e00\u81f4\u6027\u3002</p> <p><code>\u6307\u4ee4\u91cd\u6392\u7684\u6392\u5e8f\u539f\u5219</code>\uff1aHappen-Before\u539f\u5219</p> <p>\u7a0b\u5e8f\u987a\u5e8f\u539f\u5219\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u5185\u4fdd\u8bc1\u8bed\u4e49\u7684\u4e32\u884c\u6027</p> <p>volatile\u89c4\u5219:volatile\u53d8\u91cf\u7684\u5199\u5148\u4e8e\u8bfb\u53d1\u751f\uff0c\u8fd9\u4fdd\u8bc1\u4e86volatile\u53d8\u91cf\u7684\u53ef\u89c1\u6027</p> <p>\u9501\u89c4\u5219\uff1a\u89e3\u9501\u5fc5\u7136\u53d1\u751f\u5728\u968f\u540e\u7684\u52a0\u9501\u524d</p> <p>\u7ebf\u7a0b\u7684start()\u5148\u4e8e\u5b83\u7684\u6bcf\u4e00\u4e2a\u52a8\u4f5c</p> <p>\u7ebf\u7a0b\u7684\u6240\u6709\u64cd\u4f5c\u5148\u4e8e\u7ebf\u7a0b\u7684\u7ec8\u7ed3(Thread.join())</p> <p>\u7ebf\u7a0b\u7684\u4e2d\u65ad\uff08interrupt()\uff09\u5148\u4e8e\u88ab\u4e2d\u65ad\u7ebf\u7a0b\u7684\u4ee3\u7801</p> <p>\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u7684\u6267\u884c\u3001\u7ed3\u675f\u5148\u4e8efinalize()\u65b9\u6cd5</p>"},{"location":"Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/#java-reference","title":"Java Reference","text":""},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/","title":"Java\u57fa\u7840\u5b66\u4e60","text":""},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#java","title":"Java\u57fa\u7840\u5b66\u4e60","text":""},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#1asynctask","title":"1\u3001asyncTask","text":"<ol> <li>\u4f7f\u7528\u539f\u56e0\uff1a\u5728\u540e\u53f0\u8fdb\u884c\u5904\u7406\u8017\u65f6\u64cd\u4f5c\u3002</li> </ol> <p>AsyncTask\u7c7b\u5141\u8bb8\u5b9a\u4e49\u5c06\u5728\u540e\u53f0\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u5e76\u63d0\u4f9b\u4e86\u53ef\u4ee5\u7528\u6765\u76d1\u63a7\u8fdb\u5ea6\u53ca\u5728GUI\u7ebf\u7a0b\u4e0a\u53d1\u5e03\u7ed3\u679c\u7684\u5904\u7406\u7a0b\u5e8f\u3002</p> <p>\u4f18\u70b9\uff1a\u7b80\u5355\uff0c\u5feb\u6377\uff0c\u8fc7\u7a0b\u53ef\u63a7</p> <ol> <li> <p>\u57fa\u672c\u539f\u7406</p> </li> <li> <p>\u5b83\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u4e00\u4e2a\u5f02\u6b65\u4efb\u52a1\uff0c\u8be5\u4efb\u52a1\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff1a\u5c06\u5728\u540e\u53f0\u6267\u884c\u7684\u5904\u7406\uff0c\u4ee5\u53ca\u5728\u5904\u7406\u5b8c\u6210\u540e\u6267\u884c\u7684UI\u66f4\u65b0\u3002</p> </li> <li> <p>\u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u6709\u4e09\u4e2a\u6cdb\u578b\u53c2\u6570</p> <ul> <li> <p>Params. \u542f\u52a8\u4efb\u52a1\u6267\u884c\u7684\u8f93\u5165\u53c2\u6570\uff0c\u6bd4\u5982HTTP\u8bf7\u6c42\u7684URL\u3002(\u8f93\u5165\u53c2\u6570)</p> </li> <li> <p>Progress \u540e\u53f0\u4efb\u52a1\u6267\u884c\u7684\u767e\u5206\u6bd4\u3002(\u62a5\u544a\u8fdb\u5ea6\u7684\u503c)</p> </li> <li> <p>Result. \u8fd4\u56de\u7ed3\u679c\u7684\u503c</p> </li> </ul> <p>\u4e09\u8005\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u4e0d\u60f3\u4f7f\u7528\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u4e3avoid. </p> </li> <li> <p>\u6267\u884c\u5206\u4e3a\u56db\u4e2a\u6b65\u9aa4\uff0c\u6bcf\u4e00\u6b65\u5bf9\u5e94\u4e00\u4e2a\u56de\u8c03\u65b9\u6cd5</p> </li> <li> <p>\u9700\u8981\u5b50\u7c7b\u5316</p> </li> <li> <p>\u9700\u8981xublishProgress\u65b9\u6cd5\u6765\u66f4\u65b0\u5b9e\u65f6\u7684\u4efb\u52a1\u8fdb\u5ea6\u3002\u8be5\u65b9\u6cd5\u662f\u62bd\u8c61\u65b9\u6cd5\uff0c\u5b50\u7c7b\u5fc5\u987b\u5b9e\u73b0\u3002</p> <ul> <li>onProgressUpdate(Progress):UI thread\u5c06\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u4ece\u800c\u5728\u754c\u9762\u4e0a\u5c55\u793a\u4efb\u52a1\u7684\u8fdb\u5c55\u60c5\u51b5\uff0c\u4f8b\u5982\u901a\u8fc7\u4e00\u4e2a\u8fdb\u5ea6\u6761\u8fdb\u884c\u5c55\u793a\u3002</li> <li>onPostExecute(Result):\u5728doInBackground\u6267\u884c\u5b8c\u6210\u540e\uff0conPostExecute()\u65b9\u6cd5\u5c06\u88abUI thread\u8c03\u7528\uff0c\u540e\u53f0\u7684\u8ba1\u7b97\u7ed3\u679c\u5c06\u901a\u8fc7\u8be5\u65b9\u6cd5\u4f20\u9012\u5230UI thread</li> <li>onCancelled()   \u7528\u6237\u8c03\u7528\u53d6\u6d88\u65f6\uff0c\u4f1a\u8fdb\u884c\u7684\u64cd\u4f5c</li> </ul> </li> <li> <p>\u6ce8\u610f\u8981\u70b9\uff1a</p> </li> <li> <p>Task\u7684\u5b9e\u4f8b\u5fc5\u987b\u5728UI\u7ebf\u7a0b\u521b\u5efa</p> </li> <li>execute()\u65b9\u6cd5\u5fc5\u987b\u5728UI\u7ebf\u7a0b\u88ab\u521b\u5efa</li> <li>\u4e0d\u8981\u624b\u52a8\u8c03\u7528\u8fd9\u56db\u4e2a\u65b9\u6cd5</li> <li>\u8be5Task\u53ea\u80fd\u6267\u884c\u4e00\u6b21\uff0c\u591a\u6b21\u8c03\u7528\u4f1a\u51fa\u9519</li> </ol>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#2synchronized","title":"2\u3001Synchronized \u9501\u673a\u5236\u7684\u539f\u7406","text":"<ul> <li> <p>\u662f\u4e00\u79cd\u72ec\u5360\u5f0f\u7684\u91cd\u91cf\u7ea7\u9501\uff0c\u5728\u8fd0\u884c\u5230\u540c\u6b65\u65b9\u6cd5\u6216\u8005\u540c\u6b65\u4ee3\u7801\u5757\u7684\u65f6\u5019\uff0c\u8ba9\u7a0b\u5e8f\u7684\u8fd0\u884c\u7ea7\u522b\u7531\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\uff0c\u628a\u6240\u6709\u7684\u7ebf\u7a0b\u6302\u8d77\uff0c\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7684\u6307\u4ee4\uff0c\u53bb\u8c03\u5ea6\u7ebf\u7a0b\u3002</p> </li> <li> <p>\u5b9e\u73b0\u539f\u7406\uff1a</p> </li> <li> <p>\u5728JVM\u4e2d\u5b9e\u73b0\uff0c\u57fa\u4e8e\u8fdb\u5165\u548c\u9000\u51faMonitor\u5bf9\u8c61\u6765\u5b9e\u73b0\u65b9\u6cd5\u548c\u4ee3\u7801\u5757\u7684\u540c\u6b65</p> </li> <li> <p>\u540c\u6b65\u4ee3\u7801\u5757\uff1a</p> <p>monitorenter\u6307\u4ee4\u63d2\u5165\u5230\u540c\u6b65\u4ee3\u7801\u5757\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0cmonitorexit\u6307\u4ee4\u63d2\u5165\u5230\u540c\u6b65\u4ee3\u7801\u5757\u7684\u7ed3\u675f\u4f4d\u7f6e\uff0cJVM\u9700\u8981\u4fdd\u8bc1\u6bcf\u4e00\u4e2amonitorenter\u90fd\u6709\u4e00\u4e2amonitorexit\u4e0e\u4e4b\u76f8\u5bf9\u5e94\u3002\u4efb\u4f55\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2amonitor\u4e0e\u4e4b\u76f8\u5173\u8054\uff0c\u5f53\u4e14\u4e00\u4e2amonitor\u88ab\u6301\u6709\u4e4b\u540e\uff0c\u4ed6\u5c06\u5904\u4e8e\u9501\u5b9a\u72b6\u6001\u3002\u7ebf\u7a0b\u6267\u884c\u5230monitorenter\u6307\u4ee4\u65f6\uff0c\u5c06\u4f1a\u5c1d\u8bd5\u83b7\u53d6\u5bf9\u8c61\u6240\u5bf9\u5e94\u7684monitor\u6240\u6709\u6743\uff0c\u5373\u5c1d\u8bd5\u83b7\u53d6\u5bf9\u8c61\u7684\u9501\uff1b</p> </li> <li> <p>\u540c\u6b65\u65b9\u6cd5\uff1a</p> </li> <li> <p>\u4f5c\u7528\uff1a</p> </li> <li>\u786e\u4fdd\u7ebf\u7a0b\u4e92\u65a5\u7684\u8bbf\u95ee\u540c\u6b65\u4ee3\u7801</li> <li>\u4fdd\u8bc1\u5171\u4eab\u53d8\u91cf\u7684\u4fee\u6539\u80fd\u53ca\u65f6\u770b\u89c1</li> <li> <p>\u6709\u6548\u89e3\u51b3\u91cd\u6392\u5e8f\u95ee\u9898</p> </li> <li> <p>\u9501\u673a\u5236\u76f8\u5173\u539f\u7406\uff1a</p> </li> <li> <p>\u81ea\u65cb\u6982\u5ff5\uff1a\u963b\u585e\u65f6\u6302\u8d77\u7ebf\u7a0b\u548c\u6062\u590d\u7ebf\u7a0b\u5728\u64cd\u4f5c\u7cfb\u7edf\u592a\u6d6a\u8d39\u65f6\u95f4\uff0c\u4f7f\u5176\u7ebf\u7a0b\u7a0d\u5fae\u7b49\u4e00\u4f1a\uff0c\u4f46\u4e5f\u6709\u7b49\u5f85\u65f6\u95f4\u9650\u5236\uff0c\u4e00\u822c\u4e3a\u81ea\u65cb10\u6b21\u3002</p> </li> <li>\u9501\u6d88\u9664\uff1a\u6240\u4f7f\u7528\u7684\u8d44\u6e90\u6ca1\u6709\u5176\u4ed6\u7ebf\u7a0b\u7528\uff0c\u6d88\u9664\u9501</li> <li>\u9501\u7c97\u5316\uff1a\u540c\u65f6\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u53cd\u590d\u52a0\u9501\u548c\u89e3\u9501\uff0c\u6269\u5927\u9501\u7684\u8303\u56f4</li> <li>\u9501\u7684\u72b6\u6001\uff08\u53ea\u80fd\u7531\u4f4e\u5230\u9ad8\uff09\uff1a<ul> <li>\u65e0\u9501\u72b6\u6001</li> <li>\u504f\u5411\u9501\u72b6\u6001</li> <li>\u8f7b\u91cf\u7ea7\u9501\u72b6\u6001</li> <li>\u91cd\u91cf\u7ea7\u9501\u72b6\u6001</li> </ul> </li> </ul> <p></p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#3","title":"3\u3001\u51fd\u6570\u5f0f\u63a5\u53e3\u7684\u7528\u6cd5","text":"<ul> <li>Function\u51fd\u6570\u5e38\u7528\u5165\u53e3</li> </ul> name type description Consumer Consumer&lt; T &gt; \u63a5\u6536T\u5bf9\u8c61\uff0c\u4e0d\u8fd4\u56de\u503c Predicate Predicate&lt; T &gt; \u63a5\u6536T\u5bf9\u8c61\u5e76\u8fd4\u56deboolean Function Function&lt; T, R &gt; \u63a5\u6536T\u5bf9\u8c61\uff0c\u8fd4\u56deR\u5bf9\u8c61 Supplier Supplier&lt; T &gt; \u63d0\u4f9bT\u5bf9\u8c61\uff08\u4f8b\u5982\u5de5\u5382\uff09\uff0c\u4e0d\u63a5\u6536\u503c UnaryOperator UnaryOperator \u63a5\u6536T\u5bf9\u8c61\uff0c\u8fd4\u56deT\u5bf9\u8c61 BinaryOperator BinaryOperator \u63a5\u6536\u4e24\u4e2aT\u5bf9\u8c61\uff0c\u8fd4\u56deT\u5bf9\u8c61 <ul> <li> <p>Function\u5e38\u7528\u65b9\u6cd5\u4f7f\u7528\uff1aapply andThen compose</p> </li> <li> <p>apply  \u8f93\u5165T\uff0c\u6267\u884c\u64cd\u4f5c\u540e\uff0c\u8fd4\u56deR </p> <p>```java import java.util.function.Function;</p> <p>public class FunctionTest { <pre><code>private Function&lt;In, Out&gt; processor = new Function&lt;In, Out&gt;() {\n    @Override\n    public Out apply(In in) {\n        return (Out) new String(\"apply:\" + in);\n\n    }\n};\n\npublic static void main(String[] args) {\n    FunctionTest&lt;String, String&gt; functionTest = new FunctionTest();\n    System.out.println(functionTest.processor.apply(\"hello~!\"));\n}\n</code></pre> <p>}</p> <p>//\u8f93\u51fa apply:hello~! ```</p> <li> <p>apply lambda</p> <p>```java import java.util.function.Function;</p> <p>public class FunctionTest { <pre><code>private Function&lt;In, Out&gt; processor = in -&gt; {\n    return (Out) new String(\"apply:\" + in);\n};\n\npublic static void main(String[] args) {\n    FunctionTest&lt;String, String&gt; functionTest = new FunctionTest();\n    System.out.println(functionTest.processor.apply(\"hello~!\"));\n}\n</code></pre> <p>} //\u8f93\u51fa\u548c\u4e0a\u9762\u4e00\u6837 ```</p> <li> <p>andThen   \u5148\u6267\u884capply,\u518d\u6267\u884candThen</p> <p><code>java Function&lt;Integer, Integer&gt; name = e -&gt; e * 2; Function&lt;Integer, Integer&gt; square = e -&gt; e * e; int value = name.andThen(square).apply(3); System.out.println(\"andThen value=\" + value); //\u8f93\u51fa value=36</code></p> </li> <li> <p>compose  \u5148\u6267\u884ccompose,\u518d\u6267\u884capply     <code>java     int value2 = name.compose(square).apply(3);     System.out.println(\"compose value2=\" + value2);     //\u8f93\u51favalue2=18</code></p> </li> <li> <p>\u8fd4\u56de\u4e00\u4e2a\u6267\u884c\u4e86apply()\u65b9\u6cd5\u4e4b\u540e\u53ea\u4f1a\u8fd4\u56de\u8f93\u5165\u53c2\u6570\u7684\u51fd\u6570\u5bf9\u8c61</p> <p><code>java Object identity = Function.identity().apply(\"huohuo\"); System.out.println(identity);</code></p> </li>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#4iocdi","title":"4\u3001\u63a7\u5236\u53cd\u8f6c(IOC)\u548c\u4f9d\u8d56\u6ce8\u5165DI","text":"<ul> <li>IOC\uff1a\u662f\u4e00\u79cd\u7f16\u7a0b\u601d\u60f3\uff0c\u662f\u5c06\u8bbe\u8ba1\u597d\u7684\u5bf9\u8c61\u4ea4\u7ed9\u5bb9\u5668\u63a7\u5236\uff0c\u800c\u4e0d\u662f\u4f20\u7edf\u7684\u5728\u4f60\u7684\u5bf9\u8c61\u5185\u90e8\u63a7\u5236\u3002</li> </ul> <p>\u4f20\u7edf\u7684\u7f16\u7a0b\u601d\u8def(\u5c06\u5176\u79f0\u4e3a\u6b63\u8f6c)\uff1a</p> <p></p> <p>\u200b        \u7531\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u6211\u4eec\u5728\u6b63\u5e38\u7f16\u7a0b\u7684\u65f6\u5019\uff0c\u9700\u8981\u81ea\u5df1\u53bb\u624b\u52a8\u521b\u5efa\u6211\u4eec\u8981\u4f7f\u7528\u7684\u7c7b\uff0c\u5982\u679c\u6709\u4f9d\u8d56\uff0c\u5c31\u8981\u5c06\u4f9d\u8d56\u7684\u7c7b\u4e5f\u521b\u5efa\u51fa\u6765\u3002</p> <p>\u200b                IOC\u7684\u7f16\u7a0b\u601d\u8def\uff1a      </p> <p></p> <p>\u200b         \u7531\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u6211\u4eec\u7f16\u7a0b\u65f6\u7531IOC\u5bb9\u5668\u53bb\u5e2e\u6211\u95e8\u67e5\u627e\u548c\u63d0\u4f9b\u7528\u6237\u7c7b\u53ca\u5176\u4f9d\u8d56\u7684\u7c7b\uff0c\u6211\u4eec\u662f\u88ab\u52a8\u7684\u63a5\u53d7\u5bf9\u8c61\u3002</p> <p>\u200b         IoC\u5bf9\u7f16\u7a0b\u5e26\u6765\u7684\u6700\u5927\u6539\u53d8\u4e0d\u662f\u4ece\u4ee3\u7801\u4e0a\uff0c\u800c\u662f\u4ece\u601d\u60f3\u4e0a\uff0c\u53d1\u751f\u4e86\u201c\u4e3b\u4ece\u6362\u4f4d\u201d\u7684\u53d8\u5316\u3002\u5e94\u7528\u7a0b\u5e8f\u539f\u672c\u662f\u8001\u5927\uff0c\u8981\u83b7\u53d6\u4ec0\u4e48\u8d44\u6e90\u90fd\u662f\u4e3b\u52a8\u51fa\u51fb\uff0c\u4f46\u662f\u5728IoC/DI\u601d\u60f3\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u5c31\u53d8\u6210\u88ab\u52a8\u7684\u4e86\uff0c\u88ab\u52a8\u7684\u7b49\u5f85IoC\u5bb9\u5668\u6765\u521b\u5efa\u5e76\u6ce8\u5165\u5b83\u6240\u9700\u8981\u7684\u8d44\u6e90\u4e86\u3002</p> <p>IoC\u5f88\u597d\u7684\u4f53\u73b0\u4e86\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u6cd5\u5219\u4e4b\u4e00\u2014\u2014 \u597d\u83b1\u575e\u6cd5\u5219\uff1a\u201c\u522b\u627e\u6211\u4eec\uff0c\u6211\u4eec\u627e\u4f60\u201d\uff1b\u5373\u7531IoC\u5bb9\u5668\u5e2e\u5bf9\u8c61\u627e\u76f8\u5e94\u7684\u4f9d\u8d56\u5bf9\u8c61\u5e76\u6ce8\u5165\uff0c\u800c\u4e0d\u662f\u7531\u5bf9\u8c61\u4e3b\u52a8\u53bb\u627e\u3002</p> <ul> <li>DI:\u5176\u5b9e\u548cIOC \u662f\u4e00\u56de\u4e8b\uff0c\u53ea\u662f\u6362\u4e86\u4e00\u4e2a\u89d2\u5ea6\u8bf4\u660e\uff0c\u91cd\u70b9\u8bf4\u660e\uff1a\u201c\u88ab\u6ce8\u5165\u5bf9\u8c61\u4f9d\u8d56IoC\u5bb9\u5668\u914d\u7f6e\u4f9d\u8d56\u5bf9\u8c61\u201d</li> </ul> <p>IoC\u7684\u4e00\u4e2a\u91cd\u70b9\u662f\u5728\u7cfb\u7edf\u8fd0\u884c\u4e2d\uff0c\u52a8\u6001\u7684\u5411\u67d0\u4e2a\u5bf9\u8c61\u63d0\u4f9b\u5b83\u6240\u9700\u8981\u7684\u5176\u4ed6\u5bf9\u8c61\u3002\u8fd9\u4e00\u70b9\u662f\u901a\u8fc7DI\uff08Dependency Injection\uff0c\u4f9d\u8d56\u6ce8\u5165\uff09\u6765\u5b9e\u73b0\u7684</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#5java","title":"5\u3001Java\u5e8f\u5217\u5316","text":"<ul> <li>\u6982\u5ff5</li> </ul> <p>java\u5e8f\u5217\u5316:\u4fdd\u5b58\u5185\u5b58\u5bf9\u8c61\u7684\u72b6\u6001\uff0c\u5305\u62ec\u5bf9\u8c61\u7684\u5c5e\u6027\u503c,\u4f46\u4e0d\u5305\u62ec\u65b9\u6cd5\u548cstatic\u53d8\u91cf(\u56e0\u4e3astatic\u4fee\u9970\u7684\u53d8\u91cf\u662f\u5c5e\u4e8e\u7c7b\u800c\u4e0d\u96b6\u5c5e\u4e8e\u5bf9\u8c61),\u4ee5\u53ca\u7528transient\u5173\u952e\u5b57\u4fee\u9970\u7684\u53d8\u91cf(transient\u662f\u7981\u6b62\u5e8f\u5217\u5316\u7684\u6807\u8bc6,\u6548\u679c\u7b49\u540c\u4e8estatic\u4fee\u9970\u7684\u53d8\u91cf).</p> <p>java\u53cd\u5e8f\u5217\u5316:\u662f\u4e0ejava\u5e8f\u5217\u5316\u76f8\u5bf9\u7684,\u8868\u793a\u4ece\u78c1\u76d8\u6216\u8005\u5176\u4ed6\u4ecb\u8d28\u4e2d\u8bfb\u53d6\u5e8f\u5217\u5316\u5bf9\u8c61\u7684\u5185\u5bb9.</p> <ul> <li> <p>\u5e94\u7528\u573a\u666f</p> </li> <li> <p>\u5185\u5b58\u4e2d\u7684\u5bf9\u8c61\u4fdd\u5b58\u5230\u78c1\u76d8\u6587\u4ef6\u4e2d</p> </li> <li>\u7f51\u7edc\u4f20\u8f93\u5bf9\u8c61,\u6bd4\u5982Socket\u5957\u63a5\u5b57\u4f20\u8f93</li> <li> <p>\u901a\u8fc7RMI\uff08Remote Method Invoke \u8fdc\u7a0b\u65b9\u6cd5\u8c03\u7528\uff09\u4f20\u8f93\u5bf9\u8c61,\u5982android\u4e2d\u7684AIDL</p> </li> <li> <p>\u5b9e\u73b0\u65b9\u5f0f</p> </li> <li> <p>\u5b9e\u73b0Serializable\u5e8f\u5217\u5316\u7684\u7a7a\u63a5\u53e3</p> <p>```java public class TestSerializable implements Serializable {//Serializable\u662f\u4e00\u4e2a\u7a7a\u63a5\u53e3     private static final  long serializableUID = 1L;//\u5e8f\u5217\u5316\u6807\u8bc6\uff0c\u9632\u6b62\u53cd\u5e8f\u5217\u5316\u5931\u8d25     private transient  int  banSerializable; //\u7981\u6b62\u5e8f\u5217\u5316     private static  int banSeriallizable2; //\u7981\u6b62\u5e8f\u5217\u5316     //\u5c5e\u6027\u4e2d\u7684\u7c7b\u4e5f\u5fc5\u987b\u5b9e\u73b0\u5e8f\u5217\u5316\uff0c\u5426\u5219\u4f1a\u62a5\u5f02\u5e38</p> <pre><code>public String name;\npublic int id;\n\npublic TestSerializable() {\n}\n\npublic TestSerializable(String name, int id) {\n    this.name = name;\n    this.id = id;\n}\n</code></pre> <p>} ```</p> </li> <li> <p>Parcelable\u63a5\u53e3\uff0candroid\u7279\u6709\u7684\u5e8f\u5217\u5316\u5b58\u50a8,\u4f20\u8f93\u6548\u7387\u9ad8,\u9700\u8981\u5b9e\u73b0\u91cc\u9762\u7684\u62bd\u8c61\u65b9\u5f0f,\u5b9e\u73b0\u8d77\u6765\u6bd4\u8f83\u9ebb\u70e6.</p> <ul> <li>\u4e24\u4e2a\u65b9\u6cd5</li> <li>\u4e00\u4e2a\u63a5\u53e3</li> </ul> <p>```java public class TestParcelable  implements Parcelable {     public  String  name;     public  int     id;     public TestParcelable(String name,int id){//\u6784\u9020\u51fd\u6570         this.name = name;         this.id   = id;     }</p> <pre><code>protected TestParcelable(Parcel in) {//\u5bf9\u8c61\u53cd\u5e8f\u5217\u5316\u8bfb\u53d6\u6570\u636e\n    this.name = in.readString();\n    this.id   = in.readInt();\n}\n\n@Override\npublic int describeContents() { //\u5185\u5bb9\u63a5\u53e3\u63cf\u8ff0\uff0c\u9ed8\u8ba4\u8fd4\u56de0\n    return 0;\n}\n\n@Override\npublic void writeToParcel(Parcel dest, int flags) {//\u5c06\u5bf9\u8c61\u5e8f\u5217\u5316\u4e00\u4e2aParcel\u5bf9\u8c61\uff0c\u5c06\u5bf9\u8c61\u5b58\u5165Parcel\u4e2d\n    dest.writeString(name);\n    dest.writeInt(id);\n}\n\npublic static final Creator&lt;TestParcelable&gt; CREATOR = new Creator&lt;TestParcelable&gt;() {//\u5b9e\u73b0\u7684\u63a5\u53e3\n    @Override\n    public TestParcelable createFromParcel(Parcel in) {\n        return new TestParcelable(in);\n    }\n\n    @Override\n    public TestParcelable[] newArray(int size) {\n        return new TestParcelable[size];\n    }\n};\n</code></pre> <p>} ```</p> </li> <li> <p>\u533a\u522b</p> </li> </ul> <p>Serializable : \u867d\u7136\u8be5\u63a5\u53e3\u5b9e\u73b0\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u662fSerializable\u9891\u7e41\u7684\u8fdb\u884cIO\u64cd\u4f5c,\u5728\u5185\u5b58\u5e8f\u5217\u5316\u4e0a\u5f00\u9500\u6bd4\u8f83\u5927\u3002</p> <p>Parcelable\uff1a Parcelable\u6027\u80fd\u6bd4\u8f83\u597d\uff0c\u5728\u5185\u5b58\u5f00\u9500\u65b9\u9762\u8f83\u5c0f\uff0c\u5728\u5185\u5b58\u95f4\u6570\u636e\u4f20\u8f93\u63a8\u8350\u4f7f\u7528\uff0c\u4f46\u4f7f\u7528\u6bd4\u8f83\u590d\u6742\u3002</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#6final","title":"6\u3001Final \u5173\u952e\u5b57\u7684\u4f7f\u7528","text":"<ul> <li>final \u4fee\u9970\u7c7b</li> </ul> <p>\u8be5\u7c7b\u4e0d\u80fd\u88ab\u7ee7\u627f\uff0c\u4e14\u8be5\u7c7b\u4e2d\u7684\u6240\u6709\u53d8\u91cf\u6210\u5458\u548c\u65b9\u6cd5\u90fd\u4f1a\u5b9a\u4e49\u4e3afinal\u3002</p> <ul> <li>final \u4fee\u9970\u51fd\u6570</li> </ul> <p>\u8be5\u51fd\u6570\u4e0d\u80fd\u88ab\u7ee7\u627f\uff0c\u56e0\u6b64\u4e5f\u4e0d\u80fd\u88ab\u5b50\u7c7b\u91cd\u5199\uff0c\u4f46\u8be5\u51fd\u6570\u53ef\u4ee5\u5b9e\u73b0\u91cd\u8f7d\u3002</p> <p>\u4f7f\u7528\u539f\u56e0\uff1a</p> <p>1\u3001\u9501\u5b9a\u8be5\u65b9\u6cd5\uff0c\u4e0d\u80fd\u88ab\u7ee7\u627f\u91cd\u5199</p> <ul> <li>final \u4fee\u9970\u6210\u5458\u53d8\u91cf</li> </ul> <p>\u8be5\u6210\u5458\u53d8\u91cf\u662f\u5e38\u91cf,\u53ea\u80fd\u8d4b\u503c\u4e00\u6b21\uff0c\u8d4b\u503c\u540e\u4e0d\u80fd\u6539\u53d8</p> <ul> <li> <p>final \u4fee\u9970\u51fd\u6570\u53c2\u6570</p> </li> <li> <p>\u4fee\u9970\u57fa\u672c\u7c7b\u578b</p> </li> <li>\u4fee\u9970\u5f15\u7528\u7c7b\u578b</li> </ul> <p>https://www.cnblogs.com/xuelisheng/p/11158110.html</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#7interface","title":"7\u3001\u4f7f\u7528Interface \u5b9e\u73b0\u7b80\u5355\u5de5\u5382\u6a21\u5f0f","text":"<ul> <li>\u63a5\u53e3\u7c7b</li> </ul> <p>```java   public interface INetEngine {</p> <pre><code>public User login(LoginParam param) throws ProtocolException, MalformedURLException, IOException, JSONException;\n</code></pre> <p>}   ```</p> <ul> <li>\u5b9e\u73b0\u63a5\u53e3\u7684\u7c7b</li> </ul> <p>\u5b9e\u73b0\u7684\u65b9\u6cd5\u81ea\u5df1\u5b9e\u73b0login\u65b9\u6cd5\u5c31\u53ef\u4ee5</p> <ul> <li>\u5de5\u5382\u7c7b</li> </ul> <p>\u53ef\u4ee5\u4f7f\u7528\u53cd\u5c04\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u901a\u8fc7\u4f20\u503c\u6765\u5206\u7c7b\u5efa\u4ea7\u54c1</p> <p><code>java   public class NetEngineFactory {       //\u4f7f\u7528\u53cd\u5c04\u5b9e\u73b0NetEnginge       public static &lt;T extends  INetEngine&gt; T CreateNetEngine(Class clazz,Context context){           INetEngine iNetEngine = null;           try {               iNetEngine = (INetEngine) Class.forName(clazz.getName()).getDeclaredConstructor(Context.class).newInstance(context);           } catch (Exception e){               e.printStackTrace();           }           return (T)iNetEngine;       }   }</code></p> <ul> <li>\u4f7f\u7528</li> </ul> <p><code>java    result = NetEngineFactory.CreateNetEngine(HuConnectionNetEngine.class,mContext).login(mparam);</code></p> <ul> <li>\u5bf9\u53cd\u5c04\u8fdb\u884c\u5206\u6790</li> </ul> <p>\u901a\u8fc7\u7c7b\u540d\u5b9e\u73b0\u7c7b\u7684\u5b9e\u73b0</p> <ul> <li> <p>newInstance()</p> <p>\u53ea\u80fd\u5b9e\u73b0\u5bf9\u65e0\u53c2\u6570\u7684\u6784\u9020\u51fd\u6570\u7684\u521b\u5efa</p> </li> <li> <p>getDeclaredConstructor(.class).newInstance(Param)</p> <p>\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u542b\u6709\u53c2\u6570\u7684\u6784\u9020\u51fd\u6570\u7684\u521b\u5efa</p> </li> </ul>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#8","title":"8\u3001\u7c7b\u52a0\u8f7d","text":"<ul> <li>\u7279\u6027\uff1aJVM\u7684\u751f\u547d\u5468\u671f\u53ea\u52a0\u8f7d\u4e00\u6b21\uff0c\u5ef6\u8fdf\u8bb0\u8f7d\u3001\u6309\u9700\u52a0\u8f7d\uff0c\u80fd\u5c11\u52a0\u8f7d\u5c31\u5c11\u8bb0\u8f7d</li> </ul> <p>\u56e0\u4e3aJVM\u7684\u7a7a\u95f4\u6709\u9650</p> <ul> <li>\u52a0\u8f7d\u65f6\u673a</li> </ul> <p>1\uff09\u7b2c\u4e00\u6b21\u521b\u5efa\u5bf9\u8c61\u8981\u52a0\u8f7d\u7c7b.</p> <p>2\uff09\u8c03\u7528\u9759\u6001\u65b9\u6cd5\u65f6\u8981\u52a0\u8f7d\u7c7b,\u8bbf\u95ee\u9759\u6001\u5c5e\u6027\u65f6\u4f1a\u52a0\u8f7d\u7c7b\u3002</p> <p>3\uff09\u52a0\u8f7d\u5b50\u7c7b\u65f6\u5fc5\u5b9a\u4f1a\u5148\u52a0\u8f7d\u7236\u7c7b\u3002</p> <p>4\uff09\u521b\u5efa\u5bf9\u8c61\u5f15\u7528\u4e0d\u52a0\u8f7d\u7c7b.</p> <p>5) \u5b50\u7c7b\u8c03\u7528\u7236\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u65f6</p> <pre><code>  (1)\u5f53\u5b50\u7c7b\u6ca1\u6709\u8986\u76d6\u7236\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u65f6\uff0c\u53ea\u52a0\u8f7d\u7236\u7c7b\uff0c\u4e0d\u52a0\u8f7d\u5b50\u7c7b\n\n  (2)\u5f53\u5b50\u7c7b\u6709\u8986\u76d6\u7236\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u65f6\uff0c\u65e2\u52a0\u8f7d\u7236\u7c7b\uff0c\u53c8\u52a0\u8f7d\u5b50\u7c7b\n</code></pre> <p>6\uff09\u8bbf\u95ee\u9759\u6001\u5e38\u91cf\uff0c\u5982\u679c\u7f16\u8bd1\u5668\u53ef\u4ee5\u8ba1\u7b97\u51fa\u5e38\u91cf\u7684\u503c\uff0c\u5219\u4e0d\u4f1a\u52a0\u8f7d\u7c7b,\u4f8b\u5982:public static final int a =123;\u5426\u5219\u4f1a\u52a0\u8f7d\u7c7b,\u4f8b\u5982:public static final int a = math.PI\u3002</p> <p>\u3010\u7c7b\u52a0\u8f7d\u3011https://blog.csdn.net/weixin_45987569/article/details/127844934</p> <ul> <li> <p>\u7c7b\u52a0\u8f7d\u673a\u5236</p> </li> <li> <p>\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668</p> </li> <li>\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668</li> <li> <p>\u7cfb\u7edf\u7c7b\u52a0\u8f7d\u5668</p> </li> <li> <p>\u53cc\u4eb2\u59d4\u6d3e\u539f\u5219</p> </li> </ul>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#11static","title":"11\u3001Static \u5173\u952e\u5b57","text":"<ul> <li> <p>\u4fee\u9970\u6210\u5458\u53d8\u91cf</p> </li> <li> <p>\u4fee\u9970\u6210\u5458\u65b9\u6cd5</p> </li> </ul> <p>\u9759\u6001\u65b9\u6cd5\u53c8\u79f0\u7c7b\u65b9\u6cd5\uff0c\u4e0d\u9700\u8981\u5b9e\u4f8b\u5316\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7c7b\u6765\u8c03\u7528\uff0c\u4e0d\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u975e\u9759\u6001\u65b9\u6cd5\u548c\u975e\u9759\u6001\u5e38\u91cf\u3002</p> <p>\u9759\u6001\u65b9\u6cd5\u4e0d\u80fd\u4f7f\u7528this,\u56e0\u4e3athis\u662f\u5f15\u7528\u7c7b\u7684\u5f53\u524d\u5b9e\u4f8b\uff0c\u4f7f\u7528\u7c7b\u65b9\u6cd5\u5e76\u6ca1\u6709\u5b9e\u4f8b\u5316\uff0c\u56e0\u6b64this\u4f1a\u5f15\u7528\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5bf9\u8c61\uff0c\u4f1a\u62a5\u9519\u3002</p> <ul> <li>\u4fee\u9970\u7c7b</li> </ul> <p>\u4f1a\u5c06\u6570\u636e\u653e\u5728\u9759\u6001\u5b58\u50a8\u533a\uff0c\u5b9e\u73b0\u7c7b\u7684\u6240\u6709\u5bf9\u8c61\u7684\u6570\u636e\u5171\u4eab</p> <ul> <li>\u9759\u6001\u5757\uff1a\u7528\u6765\u4f18\u5316\u7a0b\u5e8f</li> </ul> <p><code>java   Static{} //\u9759\u6001\u4ee3\u7801\u5757</code></p> <ol> <li>static\u5757\u53ef\u4ee5\u7f6e\u4e8e\u7c7b\u4e2d\u7684\u4efb\u4f55\u5730\u65b9\uff0c\u7c7b\u4e2d\u53ef\u4ee5\u6709\u591a\u4e2astatic\u5757\u3002</li> <li>\u5728\u7c7b\u521d\u6b21\u88ab\u52a0\u8f7d\u7684\u65f6\u5019\u6267\u884c\u4e14\u4ec5\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\uff08\u8fd9\u662f\u4f18\u5316\u6027\u80fd\u7684\u539f\u56e0\uff01\uff01\uff01\uff09\uff0c\u4f1a\u6309\u7167static\u5757\u7684\u987a\u5e8f\u6765\u6267\u884c\u6bcf\u4e2astatic\u5757\uff0c\u4e00\u822c\u7528\u6765\u521d\u59cb\u5316\u9759\u6001\u53d8\u91cf\u548c\u8c03\u7528\u9759\u6001\u65b9\u6cd5\u3002</li> <li>\u4f1a\u5728\u7c7b\u52a0\u8f7d\u65f6\u5bf9\u9759\u6001\u4ee3\u7801\u5757\u6267\u884c\u4e00\u6b21</li> </ol> <p>\u4ee3\u7801\u5757\u6709\u4e09\u79cd\u6784\u9020\u4ee3\u7801\u5757\uff0c\u9759\u6001\u4ee3\u7801\u5757 \u548c\u6784\u9020\u65b9\u6cd5\u4ee3\u7801\u5757\u3002\u6267\u884c\u987a\u5e8f\uff1a\u9759\u6001\u4ee3\u7801\u5757\uff0c\u6784\u9020\u4ee3\u7801\u5757\uff0c\u6784\u9020\u65b9\u6cd5\u4ee3\u7801\u5757\u3002</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#12","title":"12\u3001\u7236\u7c7b\u548c\u5b50\u7c7b\u7684\u8f6c\u6362","text":""},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_1","title":"\u7236\u7c7b\u4e0d\u80fd\u76f4\u63a5\u5f3a\u8f6c\u6210\u5b50\u7c7b\uff0c\u9664\u975e\u7236\u7c7b\u662f\u7531\u8be5\u5b50\u7c7b\u521b\u5efa\u800c\u6765\u7684\uff0c\u800c\u5b50\u7c7b\u53ef\u4ee5\u76f4\u63a5\u8f6c\u6210\u7236\u7c7b\u3002","text":"<pre><code>class Fruit {\n    public Fruit() {\n    }\n}\n\nclass Apple extends Fruit {\n    public Apple() {\n        super();\n    }\n}\n\nApple apple = new Apple();\nFruit fruit = new Fruit();\nfruit = apple;  //\u4e0d\u4f1a\u62a5\u9519\uff0c\u82f9\u679c\u662f\u6c34\u679c\n\napple = (Apple)Fruit;//\u6b64\u65f6\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6c34\u679c\u4e0d\u7b49\u540c\u4e8e\u82f9\u679c\nFruit fruit = new Apple();\napple = (Apple)fruit: //\u4e0d\u4f1a\u62a5\u9519\uff0c\u6307\u5b9a\u6c34\u679c\u4e3a\u82f9\u679c\u7684\u7b49\u4e8e\u82f9\u679c\n</code></pre>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#13-volatile","title":"13\u3001 volatile","text":"<p>\u662f\u4f9d\u8d56\u4e8eJava\u7684\u5185\u5b58\u6a21\u578b\uff0c\u7ebf\u7a0b\u6267\u884c\u65f6\u4f1a\u5c06\u53d8\u91cf\u4ece\u4e3b\u5185\u5b58\u52a0\u8f7d\u5230\u7ebf\u7a0b\u5de5\u4f5c\u5185\u5b58\uff0c\u5efa\u7acb\u4e00\u4e2a\u526f\u672c\uff0c\u5728\u67d0\u4e2a\u65f6\u523b\u5199\u56de\u3002valatile\u6307\u7684\u6bcf\u6b21\u90fd\u8bfb\u53d6\u4e3b\u5185\u5b58\u7684\u503c\uff0c\u6709\u66f4\u65b0\u5219\u7acb\u5373\u5199\u56de\u4e3b\u5185\u5b58\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u7a0b\u5ea6\u8f83\u8f7b\u7684\u201csynchornized\u201d</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#14","title":"14\u3001\u65e5\u671f\u7684\u4f7f\u7528","text":"<ul> <li>SimpleDataFormat</li> </ul> <p>\u65e5\u671f\u683c\u5f0f\u7684\u89c4\u8303</p> Letter Date or Time Component Presentation Examples <code>G</code> Era designator Text <code>AD</code> <code>y</code> Year Year <code>1996</code>; <code>96</code> <code>Y</code> Week year Year <code>2009</code>; <code>09</code> <code>M</code> Month in year (context sensitive) Month <code>July</code>; <code>Jul</code>; <code>07</code> <code>L</code> Month in year (standalone form) Month <code>July</code>; <code>Jul</code>; <code>07</code> <code>w</code> Week in year Number <code>27</code> <code>W</code> Week in month Number <code>2</code> <code>D</code> Day in year Number <code>189</code> <code>d</code> Day in month Number <code>10</code> <code>F</code> Day of week in month Number <code>2</code> <code>E</code> Day name in week Text <code>Tuesday</code>; <code>Tue</code> <code>u</code> Day number of week (1 = Monday, ..., 7 = Sunday) Number <code>1</code> <code>a</code> Am/pm marker Text <code>PM</code> <code>H</code> Hour in day (0-23) Number <code>0</code> <code>k</code> Hour in day (1-24) Number <code>24</code> <code>K</code> Hour in am/pm (0-11) Number <code>0</code> <code>h</code> Hour in am/pm (1-12) Number <code>12</code> <code>m</code> Minute in hour Number <code>30</code> <code>s</code> Second in minute Number <code>55</code> <code>S</code> Millisecond Number <code>978</code> <code>z</code> Time zone General time zone <code>Pacific Standard Time</code>; <code>PST</code>; <code>GMT-08:00</code> <code>Z</code> Time zone RFC 822 time zone <code>-0800</code> <code>X</code> Time zone ISO 8601 time zone <code>-08</code>; <code>-0800</code>; <code>-08:00</code> <pre><code>//\u793a\u4f8b\nSimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssXXX\");\nDate date = new Date(System.currentTimeMillis());\ntestData.setText(dateFormat.format(date));\n//X\u662f\u5728Android API 24\u4e4b\u540e\u624d\u53ef\u4ee5\u4f7f\u7528\uff0c\u56e0\u6b6424\u4e4b\u524d\u4f7f\u7528Z\n</code></pre> <p>SimpleDataFormat(String pattern,Local locla):local\u662f\u5339\u914d\u5f53\u524d\u7684\u73af\u5883\u548c\u8bed\u8a00\u6a21\u5f0f</p> <ul> <li>DateTimeFormatter</li> </ul> <p>SimpleDateFormat\u662f\u7ebf\u7a0b\u4e0d\u5b89\u5168\u7684\uff0c\u4ecd\u7136\u9700\u8981\u6211\u4eec\u8fdb\u884c\u7ebf\u7a0b\u5b89\u5168\u7684\u5904\u7406\uff0c\u800cDateTimeFormatter\u662f1.8\u7684\u65b0\u589e\u7684\u7ebf\u7a0b\u5b89\u5168\u7684\u65e5\u671f\u683c\u5f0f\u5316\u7c7b\u3002</p> <p><code>java   ZonedDateTime datatime = ZonedDateTime.now();   DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd'T'HH:mm:ss ZZZZ\");   testData.setText(datatime.format(formatter));</code></p> <ul> <li> <p>\u65e5\u671f\u7c7b</p> </li> <li> <p>java.util.Date</p> <p><code>java //\u793a\u4f8b Date date = new Date(System.currentTimeMillis());</code></p> </li> <li> <p>Calendar</p> <p><code>java Calendar calendar = Calendar.getInstance(); SimpleDateFormat formatter = new SimpleDateFormat(\"dd-MM-yyyy HH:mm:ss\");   System.out.println(formatter.format(calendar.getTime()));</code></p> </li> <li> <p>Date/Time API \u2014\u2014JAVA 8 \u65b0\u589e</p> <ul> <li>LocalData \u53ea\u4f1a\u4ea7\u751f\u5f53\u5929\u7684\u65e5\u671f</li> </ul> <p><code>java   LocalDate date = LocalDate.now();</code></p> <ul> <li>LocalTime \u53ea\u4f1a\u4ea7\u751f\u65f6\u95f4</li> </ul> <p><code>java   LocalTime time = LocalTime.now();</code></p> <ul> <li>LocalDateTime \u65f6\u95f4\u548c\u65e5\u671f</li> </ul> <p><code>java   LocalDateTime dateTime = LocalDateTime.now();</code></p> <ul> <li>ZoneDateTime \u65f6\u95f4\u3001\u65e5\u671f\u548c\u65f6\u533a</li> </ul> <p><code>java    ZonedDateTime datatime = ZonedDateTime.now();</code></p> </li> </ul>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#15string-format","title":"15\u3001String Format","text":"<p>https://blog.csdn.net/weixin_42338519/article/details/89392562</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#16java-clone","title":"16\u3001Java Clone","text":"<ul> <li>\u6982\u8ff0</li> </ul> <p>Java\u514b\u9686\u57fa\u672c\u6570\u636e\u7c7b\u578b,\u975e\u5e38\u7b80\u5355\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u65b9\u5f0f\uff1a</p> <p><code>java   int a = 1;   int b = a;</code></p> <p>\u8fd9\u6837\u53ef\u4ee5\u5b9e\u73b0\uff0c\u662f\u56e0\u4e3aJava\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b\u662f\u6bcf\u6b21\u521b\u5efa\u90fd\u662f\u7533\u8bf7\u5185\u5b58\u6765\u5b58\u503c\uff0c\u6bcf\u4e2a\u57fa\u672c\u6570\u636e\u53d8\u91cf\u90fd\u6709\u81ea\u5df1\u7684\u7a7a\u95f4\u3002   \u800c\u5982\u679c\u662f\u6211\u4eec\u65b0\u5efa\u7684\u7c7b\uff0c\u5373\u5f15\u7528\u7c7b\u578b\uff0c\u5982\u679c\u76f4\u63a5\u4f7f\u7528\u4ee5\u4e0a\u65b9\u5f0f\uff0c\u5219\u5e76\u4e0d\u80fd\u5b9e\u73b0,\u53c2\u8003\u4ee5\u4e0b\u6848\u4f8b\uff1a</p> <p>```java   class Student {       private int number;  </p> <pre><code>  public int getNumber() {  \n      return number;  \n  }\n\n  public void setNumber(int number) {  \n      this.number = number;  \n  }\n</code></pre> <p>}   public class Test {  </p> <pre><code>  public static void main(String args[]) {  \n      Student stu1 = new Student();  \n      stu1.setNumber(12345);  \n      Student stu2 = stu1;  \n      //\u8f93\u51fa\u7ed3\u679c1  \n      System.out.println(\"\u5b66\u751f1:\" + stu1.getNumber());  \n      System.out.println(\"\u5b66\u751f2:\" + stu2.getNumber());\n\n      stu2.setNumber(23456);\n    //\u8f93\u51fa\u7ed3\u679c2\n     System.out.println(\"\u5b66\u751f1:\" + stu1.getNumber());  \n      System.out.println(\"\u5b66\u751f2:\" + stu2.getNumber());  \n  }\n</code></pre> <p>}</p> <p>//\u8f93\u51fa\u7ed3\u679c1:   \u5b66\u751f1:12345   \u5b66\u751f2:12345   //\u8f93\u51fa\u7ed3\u679c2   \u5b66\u751f1:23456    \u5b66\u751f2:23456   ```</p> <p>\u539f\u56e0\u662f<code>Student stu2 = stu1</code>,\u53ea\u662f\u5c06stu1\u7684\u5f15\u7528\u8d4b\u503c\u7ed9\u4e86stu2,\u4e24\u8005\u5728\u5185\u5b58\u4e2d\u6307\u5411\u7684\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u5730\u5740\u3002</p> <p>\u56e0\u6b64\u4f7f\u7528\u76f4\u63a5\u7684\u8d4b\u503c\u662f\u4e0d\u884c\u7684\u3002\u90a3\u4e48\u4f7f\u7528new Student()\u53ef\u4ee5\u5417\uff1f\u770b\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <p>```java   class Student {       private int number;  </p> <pre><code>  public int getNumber() {  \n      return number;  \n  }\n\n  public void setNumber(int number) {  \n      this.number = number;  \n  }\n</code></pre> <p>}   public class Test {  </p> <pre><code>  public static void main(String args[]) {  \n      Student stu1 = new Student();  \n      stu1.setNumber(12345);  \n      Student stu2 = new Student;  \n      stu2.setNumber(stu1.getNumber);\n      //\u8f93\u51fa\u7ed3\u679c1  \n      System.out.println(\"\u5b66\u751f1:\" + stu1.getNumber());  \n      System.out.println(\"\u5b66\u751f2:\" + stu2.getNumber());\n\n      stu2.setNumber(23456);\n    //\u8f93\u51fa\u7ed3\u679c2\n     System.out.println(\"\u5b66\u751f1:\" + stu1.getNumber());  \n      System.out.println(\"\u5b66\u751f2:\" + stu2.getNumber());  \n  }\n</code></pre> <p>}</p> <p>//\u8f93\u51fa\u7ed3\u679c1:   \u5b66\u751f1:12345   \u5b66\u751f2:12345   //\u8f93\u51fa\u7ed3\u679c2   \u5b66\u751f1:12345   \u5b66\u751f2:23456   ```</p> <p>\u8fd9\u6837\u662f\u53ef\u4ee5\u7684\uff0c\u4f46\u662f\u5982\u679c\u5c5e\u6027\u5f88\u591a\u7684\u8bdd\uff0c\u6211\u4eec\u5199\u8fd9\u6837\u7684\u65b9\u6cd5\u5c31\u5f88\u9ebb\u70e6\uff0c\u56e0\u6b64\u5fc5\u987b\u4f7f\u7528Clone\u3002\u800c\u901a\u8fc7clone\u65b9\u6cd5\u8d4b\u503c\u7684\u5bf9\u8c61\u8ddf\u539f\u6765\u7684\u5bf9\u8c61\u65f6\u540c\u65f6\u72ec\u7acb\u5b58\u5728\u7684\u3002</p> <ul> <li> <p>Clone\u7684\u5b9e\u73b0</p> <p>\u5b9e\u73b0Object\u7684Clone(),\u8be5\u65b9\u6cd5\u662fNative\u65b9\u6cd5\uff0c\u901f\u5ea6\u6bd4\u8f83\u5feb\uff0c\u5b9e\u73b0\u8be5\u65b9\u6cd5\uff0c\u5fc5\u987b\u5b9e\u73b0Cloneable\u63a5\u53e3</p> <p><code>java /* 1) x.clone() != x will be true 2) x.clone().getClass() == x.getClass() will be true, but these are not absolute requirements. 3) x.clone().equals(x) will be true, this is not an absolute requirement.\u8be5\u65b9\u6cd5\u4f7f\u7528\u4e00\u822c\u8981\u5224\u7a7a*/ protected Object clone() throws CloneNotSupportedException {         if (!(this instanceof Cloneable)) {             throw new CloneNotSupportedException(\"Class \" + getClass().getName() +                                                  \" doesn't implement Cloneable\");         }                 //internalClone\u662f\u4e00\u4e2aNative\u65b9\u6cd5\uff0c\u5728JDK\u76ee\u5f55\u4e0b\u7684src.zip\u53ef\u4ee5\u67e5\u770b         return internalClone();     }</code></p> <ul> <li>\u6d45\u514b\u9686</li> </ul> <p>\u5b9e\u73b0\u7684\u6b65\u9aa4\uff1a</p> <ol> <li>\u88ab\u590d\u5236\u7684\u7c7b\u9700\u8981\u5b9e\u73b0Clonenable\u63a5\u53e3</li> <li>\u91cd\u5199Clone()\u65b9\u6cd5\uff0c\u8bbf\u95ee\u4fee\u9970\u7b26\u4e3aPublic \u65b9\u6cd5\u4e2d\u8c03\u7528super.clone()\u65b9\u6cd5\u5f97\u5230\u9700\u8981\u7684\u590d\u5236\u5bf9\u8c61</li> </ol> <p>```java   class Student implements Cloneable{       private int number;  </p> <pre><code>  public int getNumber() {  \n      return number;  \n  }\n\n  public void setNumber(int number) {  \n      this.number = number;  \n  }\n\n  @Override  \n  public Object clone() {  \n      Student stu = null;  \n      try{  \n          stu = (Student)super.clone();  \n      }catch(CloneNotSupportedException e) {  \n          e.printStackTrace();  \n      }  \n      return stu;  \n  }\n</code></pre> <p>}   ```</p> <p>\u200b        \u6d45\u514b\u9686\u590d\u5236\u539f\u578b\u7684\u503c\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\u548c\u5f15\u7528\u7c7b\u578b\u6210\u5458\u53d8\u91cf\u7684\u5f15\u7528\u7ed9\u590d\u5236\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u8bf4\u503c\u6210\u5458\u53d8\u91cf\u4e8c\u8005\u662f\u533a\u5206\u5f00\u7684\uff0c\u4f46\u662f\u5f15\u7528\u53d8\u91cf\u4e8c\u8005\u6307\u7684\u662f\u76f8\u540c\u7684\u5185\u5b58\u5730\u5740\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <ul> <li>\u6df1Clone</li> </ul> <p>\u6df1\u514b\u9686\u533a\u522b\u4e8e\u6d45\u514b\u9686\u662f\u4f1a\u590d\u5236\u5f15\u7528\u7c7b\u578b\u7684\u53d8\u91cf\u7ed9\u590d\u5236\u5bf9\u8c61\u3002\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>\u5b9e\u73b0\u65b9\u6cd5\uff1a</p> <p>1\u3001\u901a\u8fc7\u5b9e\u73b0\u5f15\u7528\u7c7b\u578b\u7684clone()\u65b9\u6cd5\u6765\u5b9e\u73b0</p> <p>2\u3001\u901a\u8fc7\u5e8f\u5217\u5316\u6765\u5b9e\u73b0</p> <p>```java   //\u4ee5\u4e0b\u662f\u901a\u8fc7\u5b9e\u73b0\u5f15\u7528\u7c7b\u578b\u7684Clone()\u65b9\u6cd5\u6765\u5b9e\u73b0\u6df1\u514b\u9686   class Address implements Cloneable {       private String add;</p> <pre><code>  public String getAdd() {\n      return add;\n  }\n\n  public void setAdd(String add) {\n      this.add = add;\n  }\n\n  @Override\n  public Object clone() {\n      Address addr = null;\n      try{\n          addr = (Address)super.clone();\n      }catch(CloneNotSupportedException e) {\n          e.printStackTrace();\n      }\n      return addr;\n  }\n</code></pre> <p>}</p> <p>class Student implements Cloneable{       private int number;</p> <pre><code>  private Address addr;\n\n  public Address getAddr() {\n      return addr;\n  }\n\n  public void setAddr(Address addr) {\n      this.addr = addr;\n  }\n\n  public int getNumber() {\n      return number;\n  }\n\n  public void setNumber(int number) {\n      this.number = number;\n  }\n\n  @Override\n  public Object clone() {\n      Student stu = null;\n      try{\n          stu = (Student)super.clone();   //\u6d45\u590d\u5236\n      }catch(CloneNotSupportedException e) {\n          e.printStackTrace();\n      }\n      stu.addr = (Address)addr.clone();   //\u6df1\u5ea6\u590d\u5236\n      return stu;\n  }\n</code></pre> <p>}   ```</p> <p>\u7b2c\u4e00\u79cd\u65b9\u5f0f\u7684\u7f3a\u70b9\u5728\u4e8e\uff0c\u5982\u679c\u6709\u591a\u5c42\u514b\u9686\u6216\u8005\u591a\u4e2a\u5f15\u7528\u7c7b\u578b\uff0c\u5c31\u9700\u8981\u5168\u90e8\u5b9e\u73b0\u5176clone()\u65b9\u6cd5\uff0c\u8fd9\u6837\u5b9e\u73b0\u5c31\u4f1a\u5f88\u9ebb\u70e6\uff0c\u56e0\u6b64\u91c7\u7528\u5e8f\u5217\u5316\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u5e8f\u5217\u5316\u5c31\u662f\u5c06\u5bf9\u8c61\u5199\u5230\u6d41\u7684\u8fc7\u7a0b\uff0c\u5199\u5230\u6d41\u4e2d\u7684\u5bf9\u8c61\u662f\u539f\u6709\u5bf9\u8c61\u7684\u4e00\u4e2a\u62f7\u8d1d\uff0c\u800c\u539f\u5bf9\u8c61\u4ecd\u7136\u5b58\u5728\u4e8e\u5185\u5b58\u4e2d\u3002\u901a\u8fc7\u5e8f\u5217\u5316\u5b9e\u73b0\u7684\u62f7\u8d1d\u4e0d\u4ec5\u53ef\u4ee5\u590d\u5236\u5bf9\u8c61\u672c\u8eab\uff0c\u800c\u4e14\u53ef\u4ee5\u590d\u5236\u5176\u5f15\u7528\u7684\u6210\u5458\u5bf9\u8c61\uff0c\u56e0\u6b64\u901a\u8fc7\u5e8f\u5217\u5316\u5c06\u5bf9\u8c61\u5199\u5230\u4e00\u4e2a\u6d41\u4e2d\uff0c\u518d\u4ece\u6d41\u91cc\u5c06\u5176\u8bfb\u51fa\u6765\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6df1\u514b\u9686\u3002</p> <p>```java   //\u901a\u8fc7\u5e8f\u5217\u5316\u5b9e\u73b0\u6df1\u514b\u9686   public class Outer implements Serializable{     private static final long serialVersionUID = 369285298572941L;  //\u6700\u597d\u662f\u663e\u5f0f\u58f0\u660eID     public Inner inner;   \u3000//Discription:[\u6df1\u5ea6\u590d\u5236\u65b9\u6cd5,\u9700\u8981\u5bf9\u8c61\u53ca\u5bf9\u8c61\u6240\u6709\u7684\u5bf9\u8c61\u5c5e\u6027\u90fd\u5b9e\u73b0\u5e8f\u5217\u5316]     public Outer myclone() {         Outer outer = null;         try {\u00a0// \u5c06\u8be5\u5bf9\u8c61\u5e8f\u5217\u5316\u6210\u6d41,\u56e0\u4e3a\u5199\u5728\u6d41\u91cc\u7684\u662f\u5bf9\u8c61\u7684\u4e00\u4e2a\u62f7\u8d1d\uff0c\u800c\u539f\u5bf9\u8c61\u4ecd\u7136\u5b58\u5728\u4e8eJVM\u91cc\u9762\u3002\u6240\u4ee5\u5229\u7528\u8fd9\u4e2a\u7279\u6027\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u8c61\u7684\u6df1\u62f7\u8d1d             ByteArrayOutputStream baos = new ByteArrayOutputStream();             ObjectOutputStream oos = new ObjectOutputStream(baos);             oos.writeObject(this);   \u3000\u3000\u3000\u3000\u3000\u3000// \u5c06\u6d41\u5e8f\u5217\u5316\u6210\u5bf9\u8c61             ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());             ObjectInputStream ois = new ObjectInputStream(bais);             outer = (Outer) ois.readObject();         } catch (IOException e) {             e.printStackTrace();         } catch (ClassNotFoundException e) {             e.printStackTrace();         }         return outer;     }   }   //\u5185\u90e8\u7c7b\u4e5f\u5fc5\u987b\u5e8f\u5217\u5316   public class Inner implements Serializable{     private static final long serialVersionUID = 872390113109L; //\u6700\u597d\u662f\u663e\u5f0f\u58f0\u660eID     public String name = \"\";</p> <pre><code>public Inner(String name) {\n    this.name = name;\n}\n\n@Override\npublic String toString() {\n    return \"Inner\u7684name\u503c\u4e3a\uff1a\" + name;\n}\n</code></pre> <p>}   //\u9664\u6b64\u4e4b\u5916\u8fd8\u53ef\u4ee5\u5b9e\u73b0Parcelable   ```</p> </li> </ul>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#17java","title":"17\u3001java \u8fed\u4ee3\u5668","text":"<ul> <li>Iterable \u63a5\u53e3</li> </ul> <p>\u4e00\u4e2a\u96c6\u5408\u5bf9\u8c61\u8981\u8868\u660e\u81ea\u5df1\u652f\u6301\u8fed\u4ee3\uff0c\u80fd\u6709\u4f7f\u7528foreach\u8bed\u53e5\u7684\u7279\u6743\uff0c\u5c31\u5fc5\u987b\u5b9e\u73b0Iterable\u63a5\u53e3\uff0c\u8868\u660e\u6211\u662f\u53ef\u8fed\u4ee3\u7684\uff01\u7136\u800c\u5b9e\u73b0Iterable\u63a5\u53e3\uff0c\u5c31\u5fc5\u9700\u4e3aforeach\u8bed\u53e5\u63d0\u4f9b\u4e00\u4e2a\u8fed\u4ee3\u5668\u3002\u8fd9\u4e2a\u8fed\u4ee3\u5668\u662f\u7528\u63a5\u53e3\u5b9a\u4e49\u7684 iterator\u65b9\u6cd5\u63d0\u4f9b\u7684\u3002\u4e5f\u5c31\u662fiterator\u65b9\u6cd5\u9700\u8981\u8fd4\u56de\u4e00\u4e2aIterator\u5bf9\u8c61\u3002</p> <p><code>java   //Iterable JDK\u6e90\u7801//\u53ef\u4ee5\u901a\u8fc7\u6210\u5458\u5185\u90e8\u7c7b\uff0c\u65b9\u6cd5\u5185\u90e8\u7c7b\uff0c\u751a\u81f3\u533f\u540d\u5185\u90e8\u7c7b\u53bb\u5b9e\u73b0Iterator   public interface Iterable&lt;T&gt;   {       Iterator&lt;T&gt; iterator();   }</code></p> <ul> <li>Iterator  \u8fed\u4ee3\u5668 \u5b9e\u73b0\u4e86Iterable\uff0c\u5c31\u4f1a\u6709\u8fed\u4ee3\u5668</li> </ul> <p>\u5305\u542b3\u4e2a\u65b9\u6cd5: hasNext ,  next , remove\u3002</p> <p>```java    List li = new ArrayList&lt;&gt;(); <p>li.add(1);   li.add(2);   li.add(3);</p> <p>//\u4e0d\u4f7f\u7528foreach \u800c\u624b\u52a8\u8fed\u4ee3   Iterator iter = li.iterator();    //\u83b7\u53d6ArrayList \u7684\u8fed\u4ee3\u5668 <p>while(iter.hasNext())                      //\u2460\u5148\u63a2\u6d4b\u80fd\u5426\u7ee7\u7eed\u8fed\u4ee3   {     System.out.println(iter.next());       //\u2461\u540e\u53d6\u51fa\u672c\u6b21\u8fed\u4ee3\u51fa\u7684\u5143\u7d20</p> <pre><code>//invoke  remove()                     //\u2462\u6700\u540e\u5982\u679c\u9700\u8981\uff0c\u8c03\u7528remove\n</code></pre> <p>}   ```</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#18","title":"18\u3001\u7ea2\u9ed1\u6811","text":""},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#bst","title":"\u4e8c\u53c9\u641c\u7d22\u6811\uff08BST\uff09","text":"<ul> <li> <p>\u82e5\u4efb\u610f\u7ed3\u70b9\u7684\u5de6\u5b50\u6811\u4e0d\u7a7a\uff0c\u5219\u5de6\u5b50\u6811\u4e0a\u6240\u6709\u7ed3\u70b9\u7684\u503c\u5747\u4e0d\u5927\u4e8e\u5b83\u7684\u6839\u7ed3\u70b9\u7684\u503c\u3002</p> </li> <li> <p>\u82e5\u4efb\u610f\u7ed3\u70b9\u7684\u53f3\u5b50\u6811\u4e0d\u7a7a\uff0c\u5219\u53f3\u5b50\u6811\u4e0a\u6240\u6709\u7ed3\u70b9\u7684\u503c\u5747\u4e0d\u5c0f\u4e8e\u5b83\u7684\u6839\u7ed3\u70b9\u7684\u503c\u3002</p> </li> <li> <p>\u4efb\u610f\u7ed3\u70b9\u7684\u5de6\u3001\u53f3\u5b50\u6811\u4e5f\u5206\u522b\u4e3a\u4e8c\u53c9\u641c\u7d22\u6811\u3002</p> </li> </ul>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#avl","title":"\u5e73\u8861\u4e8c\u53c9\u6811\uff08AVL\uff09","text":"<p>\u4efb\u610f\u8282\u70b9\u7684\u5b50\u6811\u7684\u9ad8\u5ea6\u5dee\u90fd\u5c0f\u4e8e\u7b49\u4e8e 1</p> <ul> <li>\u662f\u4e8c\u53c9\u6392\u5e8f\u6811</li> <li>\u4efb\u4f55\u4e00\u4e2a\u8282\u70b9\u7684\u5de6\u5b50\u6811\u6216\u8005\u53f3\u5b50\u6811\u90fd\u662f\u300c\u5e73\u8861\u4e8c\u53c9\u6811\u300d\uff08\u5de6\u53f3\u9ad8\u5ea6\u5dee\u5c0f\u4e8e\u7b49\u4e8e 1\uff09</li> </ul> <p>\u7ea2\u9ed1\u6811\u5728\u662f\u4e8c\u53c9\u641c\u7d22\u6811\u7684\u60c5\u51b5\u4e0b\uff0c\u6ee1\u8db3\u4ee5\u4e0b\u8981\u6c42\uff1a</p> <ol> <li>\u8282\u70b9\u662f\u7ea2\u8272\u6216\u9ed1\u8272\u3002</li> <li>\u6839\u662f\u9ed1\u8272\u3002</li> <li>\u6240\u6709\u53f6\u5b50\u90fd\u662f\u9ed1\u8272\uff08\u53f6\u5b50\u662fNIL\u8282\u70b9\uff09\u3002</li> <li>\u6bcf\u4e2a\u7ea2\u8272\u8282\u70b9\u5fc5\u987b\u6709\u4e24\u4e2a\u9ed1\u8272\u7684\u5b50\u8282\u70b9\u3002\uff08\u4ece\u6bcf\u4e2a\u53f6\u5b50\u5230\u6839\u7684\u6240\u6709\u8def\u5f84\u4e0a\u4e0d\u80fd\u6709\u4e24\u4e2a\u8fde\u7eed\u7684\u7ea2\u8272\u8282\u70b9\u3002\uff09</li> <li>\u4ece\u4efb\u4e00\u8282\u70b9\u5230\u5176\u6bcf\u4e2a\u53f6\u5b50\u7684\u6240\u6709\u7b80\u5355\u8def\u5f84\u90fd\u5305\u542b\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8272\u8282\u70b9\u3002</li> </ol>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#19java","title":"19\u3001Java \u6cdb\u578b","text":"<p>\u901a\u914d\u7b26:\u6ca1\u5565\u533a\u522b\uff0c\u53ea\u4e0d\u8fc7\u662f\u7f16\u7801\u65f6\u7684\u4e00\u79cd\u7ea6\u5b9a\u4fd7\u6210\u7684\u4e1c\u897f\u3002\u6bd4\u5982\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684 T \uff0c\u6211\u4eec\u53ef\u4ee5\u6362\u6210 A-Z \u4e4b\u95f4\u7684\u4efb\u4f55\u4e00\u4e2a \u5b57\u6bcd\u90fd\u53ef\u4ee5\uff0c\u5e76\u4e0d\u4f1a\u5f71\u54cd\u7a0b\u5e8f\u7684\u6b63\u5e38\u8fd0\u884c\uff0c\u4f46\u662f\u5982\u679c\u6362\u6210\u5176\u4ed6\u7684\u5b57\u6bcd\u4ee3\u66ff T \uff0c\u5728\u53ef\u8bfb\u6027\u4e0a\u53ef\u80fd\u4f1a\u5f31\u4e00\u4e9b\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cT\uff0cE\uff0cK\uff0cV\uff0c\uff1f\u662f\u8fd9\u6837\u7ea6\u5b9a\u7684\uff1a</p> <ul> <li>\uff1f\u8868\u793a\u4e0d\u786e\u5b9a\u7684 java \u7c7b\u578b</li> <li>T (type) \u8868\u793a\u5177\u4f53\u7684\u4e00\u4e2ajava\u7c7b\u578b</li> <li>K V (key value) \u5206\u522b\u4ee3\u8868java\u952e\u503c\u4e2d\u7684Key Value</li> <li>E (element) \u4ee3\u8868Element</li> </ul>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#20","title":"20\u3001\u5185\u90e8\u7c7b\u3001\u533f\u540d\u5185\u90e8\u7c7b\u3001\u9759\u6001\u5185\u90e8\u7c7b","text":"<ul> <li>\u6210\u5458\u5185\u90e8\u7c7b</li> </ul> <p>```java   public class Test {        //\u4e0d\u5bf9\u5916\u5f00\u653e\u7684        class memberInnerClass{            public void memberInner(){                System.out.println(\"\u6210\u5458\u5185\u90e8\u7c7b\");            }        }       //\u5185\u90e8\u7c7b \u5bf9\u5916\u5f00\u653e       public  class  inner{           public  String  innername;           public void log(){               System.out.println(\" inner log\");           }       }</p> <p>}   ```</p> <ul> <li>\u5185\u90e8\u7c7b\u5c31\u50cf\u4e00\u4e2a\u5b9e\u4f8b\u6210\u5458\u4e00\u6837\u5b58\u5728\u4e8e\u5916\u90e8\u7c7b\u4e2d\u3002</li> <li>\u5185\u90e8\u7c7b\u53ef\u4ee5\u8bbf\u95ee\u5916\u90e8\u7c7b\u7684\u6240\u6709\u6210\u5458\u5c31\u60f3\u8bbf\u95ee\u81ea\u5df1\u7684\u6210\u5458\u4e00\u6837\u6ca1\u6709\u9650\u5236\u3002</li> <li>\u5185\u90e8\u7c7b\u4e2d\u7684this\u6307\u7684\u662f\u5185\u90e8\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\u672c\u8eab\uff0c\u5982\u679c\u8981\u7528\u5916\u90e8\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\u5c31\u53ef\u4ee5\u7528\u7c7b\u540d.this\u7684\u65b9\u5f0f\u83b7\u5f97\u3002</li> <li> <p>\u5185\u90e8\u7c7b\u5bf9\u8c61\u4e2d\u4e0d\u80fd\u6709\u9759\u6001\u6210\u5458\uff0c\u539f\u56e0\u5f88\u7b80\u5355\uff0c\u5185\u90e8\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\u662f\u5916\u90e8\u7c7b\u5b9e\u4f8b\u5bf9\u8c61\u7684\u4e00\u4e2a\u6210\u5458\u3002</p> </li> <li> <p>\u65b9\u6cd5\u5185\u90e8\u7c7b</p> </li> </ul> <p>```java    public class A {</p> <pre><code>   public void A(){\n       System.out.println(\"\u65b9\u6cd5\u5185\u90e8\u7c7b\");\n   }\n</code></pre> <p>}</p> <p>public class Test {</p> <pre><code>   public void methodInner(){\n       //\u77ed\u6682\u6027\u7684\n       class B extends A{\n\n       }\n       new B().A();\n\n   }\n</code></pre> <p>```</p> <ol> <li>\u65b9\u6cd5\u4e2d\u7684\u5185\u90e8\u7c7b\u6ca1\u6709\u8bbf\u95ee\u4fee\u9970\u7b26\uff0c \u5373\u65b9\u6cd5\u5185\u90e8\u7c7b\u5bf9\u5305\u56f4\u5b83\u7684\u65b9\u6cd5\u4e4b\u5916\u7684\u4efb\u4f55\u4e1c\u897f\u90fd\u4e0d\u53ef\u89c1\u3002</li> <li> <p>\u65b9\u6cd5\u5185\u90e8\u7c7b\u53ea\u80fd\u591f\u8bbf\u95ee\u8be5\u65b9\u6cd5\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u6240\u4ee5\u4e5f\u53eb\u5c40\u90e8\u5185\u90e8\u7c7b\u3002\u800c\u4e14\u8fd9\u4e9b\u5c40\u90e8\u53d8\u91cf\u4e00\u5b9a\u8981\u662ffinal\u4fee\u9970\u7684\u5e38\u91cf\u3002</p> </li> <li> <p>\u9759\u6001\u5185\u90e8\u7c7b</p> </li> </ol> <p>\u9759\u6001\u5185\u90e8\u7c7b\u4e0d\u6301\u6709\u5916\u90e8\u7c7b\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5c06\u5176\u5b8c\u5168\u4ece\u5916\u90e8\u7c7b\u4e2d\u79fb\u9664\uff0c\u800c\u4e0d\u4f1a\u5f71\u54cd\u3002</p> <pre><code> //\u9759\u6001\u5185\u90e8\u7c7b\n    public static class staticinner{\n        public  String  staticinnername;\n        public void log(){\n            System.out.println(\"static inner log\");\n        }\n    }\n</code></pre> <ol> <li>\u53ea\u80fd\u8bbf\u95ee\u5916\u90e8\u7c7b\u7684\u9759\u6001\u6210\u5458\u5bf9\u8c61\u548c\u65b9\u6cd5</li> <li> <p>\u4e0d\u4f1a\u5f15\u8d77\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>\u533f\u540d\u5185\u90e8\u7c7b</p> </li> <li> <p>\u4e00\u4e2a\u7c7b\u7528\u4e8e\u7ee7\u627f\u5176\u4ed6\u7c7b\u6216\u662f\u5b9e\u73b0\u63a5\u53e3\uff0c\u5e76\u4e0d\u9700\u8981\u589e\u52a0\u989d\u5916\u7684\u65b9\u6cd5\uff0c\u53ea\u662f\u5bf9\u7ee7\u627f\u65b9\u6cd5\u7684\u4e8b\u5148\u6216\u662f\u8986\u76d6\u3002</p> </li> <li>\u53ea\u662f\u4e3a\u4e86\u83b7\u5f97\u4e00\u4e2a\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u4e0d\u9700\u8981\u77e5\u9053\u5176\u5b9e\u9645\u7c7b\u578b\u3002</li> <li>\u7c7b\u540d\u6ca1\u6709\u610f\u4e49\uff0c\u4e5f\u5c31\u662f\u4e0d\u9700\u8981\u4f7f\u7528\u5230\u3002</li> </ol> <pre><code>//\u533f\u540d\u5185\u90e8\u7c7b\n    public inner niinner = new inner(){\n        public void log(){\n            System.out.println(\"niming inner log\");\n        }\n    };\n //\u9759\u6001\u533f\u540d\u5185\u90e8\u7c7b,\u5b9e\u9645\u4e0a\u5c31\u662f\u533f\u540d\u5185\u90e8\u7c7b\uff0c\u52a0\u9759\u6001\u662f\u56e0\u4e3anew \u7684\u8fd9\u4e2a\u7c7b\u662f\u9759\u6001\u5185\u90e8\u7c7b\n    public staticinner staticinnerni = new staticinner(){\n        public void log(){\n            System.out.println(\"niming static inner log\");\n        }\n    };\n</code></pre> <ul> <li>\u547d\u4ee4<code>javac</code>\u751f\u6210\u7684class\u6587\u4ef6\u5206\u6790</li> </ul> <p>javac  javafilename</p> <p>\u4f1a\u5bf9\u5185\u90e8\u7c7b\u3001\u9759\u6001\u5185\u90e8\u7c7b\u751f\u6210\u76f8\u5bf9\u5e94\u7684class\u6587\u4ef6\uff0c\u4f1a\u5bf9\u533f\u540d\u5185\u90e8\u7c7b\u751f\u6210$1\u3001$2\u3001$3\u8fd9\u6837\u7684\u6587\u4ef6\u3002</p> <p>DemoOutter.java\u6587\u4ef6\u7f16\u8bd1\u540e\u4f1a\u751f\u6210\u5982\u4e0b\u7684\u6587\u4ef6\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u5185\u90e8\u7c7b\u751f\u6210inner.class,\u9759\u6001\u5185\u90e8\u7c7b\u751f\u6210staticinner.class\u6587\u4ef6,\u800c\u5176\u4ed6\u7684\u533f\u540d\u5185\u90e8\u7c7b\u751f\u6210$1\u3001$2\u3001$3\u3001$4\u6587\u4ef6\u3002</p> <pre><code>//DemoOutter.java\nimport java.util.ArrayList;\nimport java.util.Iterator;\n\npublic class DemoOutter {\n\n    //\u5185\u90e8\u7c7b\n    public  class  inner{\n        public  String  innername;\n        public void log(){\n            System.out.println(\" inner log\");\n        }\n    }\n\n\n    //\u533f\u540d\u5185\u90e8\u7c7b\n    public inner niinner = new inner(){\n        public void log(){\n            System.out.println(\"niming inner log\");\n        }\n    };\n\n\n    //\u9759\u6001\u5185\u90e8\u7c7b\n    public static class staticinner{\n        public  String  staticinnername;\n        public void log(){\n            System.out.println(\"static inner log\");\n        }\n    }\n\n\n    //\u9759\u6001\u533f\u540d\u5185\u90e8\u7c7b\n    public staticinner staticinnerni = new staticinner(){\n        public void log(){\n            System.out.println(\"niming static inner log\");\n        }\n    };\n//\n//    public staticinner Staticinnerni2 = new staticinner();\n\n\n    public Runnable mRunable = new Runnable() {\n        @Override\n        public void run() {\n            System.out.println(\"workThead outter log\");\n        }\n    };\n\n    public void  outterlog(){\n        System.out.println(\"outter log\");\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                System.out.println(\"workThead outter log\");\n            }\n        }).start();\n    }\n\n\n    public static void main(String[] args) {\n    }\n}\n\n</code></pre> <p><code>.inner.class</code> \u53ef\u4ee5\u770b\u5230\u5176\u591a\u4e86\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u8be5\u6784\u9020\u51fd\u6570\u5c06\u5916\u90e8\u7c7b\u7684\u5f15\u7528\u7ed9\u4e86\u5185\u90e8\u7c7b<code>this.this$0</code></p> <pre><code>public class DemoOutter$inner {\n    public String innername;\n\n    public DemoOutter$inner(DemoOutter var1) {\n        this.this$0 = var1;\n    }\n\n    public void log() {\n        System.out.println(\" inner log\");\n    }\n}\n</code></pre> <p>\u800c<code>.staticinner.class</code>\u5219\u6ca1\u6709\u8fd9\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u4e0d\u4f1a\u6301\u6709\u5916\u90e8\u7c7b\u5f15\u7528</p> <pre><code>public class DemoOutter$staticinner {\n    public String staticinnername;\n\n    public DemoOutter$staticinner() {\n    }\n\n    public void log() {\n        System.out.println(\"static inner log\");\n    }\n}\n</code></pre> <p>\u800c\u533f\u540d\u5185\u90e8\u7c7b$1.class\u548c\u5185\u90e8\u7c7b\u4e00\u6837\u6301\u6709\u4e86\u5916\u90e8\u7c7b\u7684\u5f15\u7528\u3002</p> <pre><code>\nclass DemoOutter$1 extends inner {\n    DemoOutter$1(DemoOutter var1) {\n        super(var1);\n        this.this$0 = var1;\n    }\n\n    public void log() {\n        System.out.println(\"niming inner log\");\n    }\n}\n</code></pre>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#21synthetic","title":"21.synthetic\u5173\u952e\u5b57","text":"<p>\u6709synthetic\u6807\u8bb0\u7684field\u548cmethod\u662fclass\u5185\u90e8\u4f7f\u7528\u7684\uff0c\u662f\u7f16\u8bd1\u5668\u81ea\u52a8\u751f\u6210\u7684\uff0c\u6b63\u5e38\u7684\u6e90\u4ee3\u7801\u91cc\u4e0d\u4f1a\u51fa\u73b0synthetic field\u3002</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_2","title":"\u4e3e\u4f8b","text":"<p>1.\u5185\u90e8\u7c7b\u8bbf\u95ee\u5916\u90e8\u7c7b</p> <p>\u975estatic\u7684inner class\u91cc\u9762\u90fd\u4f1a\u6709\u4e00\u4e2athis$0\u7684\u5b57\u6bb5\u4fdd\u5b58\u5b83\u7684\u7236\u5bf9\u8c61</p> <pre><code>//java\u5199\u6cd5\nclass parent {   \n     public  void foo() {   \n    }   \n\n     class inner {   \n        inner() {   \n          foo();   \n        }   \n    }   \n} \n//\u7f16\u8bd1\u540e\nclass parent$inner   \n{   \n    synthetic parent  this$ 0;   \n\n    parent$inner(parent  this$ 0)   \n    {   \n        this. this$ 0 =  this$ 0;   \n        this$ 0.foo();   \n    }   \n}  \n</code></pre> <p>2.\u5185\u90e8\u7c7b\u65b9\u4f4d\u5916\u90e8\u7c7b\u79c1\u6709\u5c5e\u6027</p> <p>\u5728jvm\u91cc\uff0c\u6240\u6709class\u7684\u79c1\u6709\u6210\u5458\u90fd\u4e0d\u5141\u8bb8\u5728\u5176\u4ed6\u7c7b\u91cc\u8bbf\u95ee\uff0c\u5305\u62ec\u5b83\u7684inner class\u3002\u5728java\u8bed\u8a00\u91ccinner class\u662f\u53ef\u4ee5\u8bbf\u95ee\u7236\u7c7b\u7684\u79c1\u6709\u6210\u5458\u7684\u3002\u5728class\u91cc\u662f\u7528\u5982\u4e0b\u7684\u65b9\u6cd5\u5b9e\u73b0\u7684\uff1a</p> <pre><code>class parent   \n{   \n   private  int value =  0;  \n\n  synthetic  static  int access$ 000(parent obj)   \n  {   \n     return value;   \n  }   \n}  \n</code></pre>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#22collection-map","title":"22.Collection &amp;&amp; Map","text":"<p>\u535a\u5ba2</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#23","title":"23.\u6cdb\u578b","text":"<ul> <li>Java\u6cdb\u578b</li> </ul> <p>Java \u6cdb\u578b\uff08generics\uff09\u662f JDK 5 \u4e2d\u5f15\u5165\u7684\u4e00\u4e2a\u65b0\u7279\u6027, \u6cdb\u578b\u63d0\u4f9b\u4e86\u7f16\u8bd1\u65f6\u7c7b\u578b\u5b89\u5168\u68c0\u6d4b\u673a\u5236\uff0c\u8be5\u673a\u5236\u5141\u8bb8\u7a0b\u5e8f\u5458\u5728\u7f16\u8bd1\u65f6\u68c0\u6d4b\u5230\u975e\u6cd5\u7684\u7c7b\u578b\u3002</p> <p>\u6cdb\u578b\u7684\u672c\u8d28\u662f\u53c2\u6570\u5316\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f\u8bf4\u6240\u64cd\u4f5c\u7684\u6570\u636e\u7c7b\u578b\u88ab\u6307\u5b9a\u4e3a\u4e00\u4e2a\u53c2\u6570\u3002</p> <ul> <li>\u6cdb\u578b\u4f7f\u7528</li> </ul> <p>\u6cdb\u578b\u4f7f\u7528\u65b9\u5f0f\uff0c\u5206\u522b\u4e3a\uff1a\u6cdb\u578b\u7c7b\u3001\u6cdb\u578b\u63a5\u53e3\u3001\u6cdb\u578b\u65b9\u6cd5\u3002</p> <p>\u2460\u6cdb\u578b\u7c7b\uff0c\u6cdb\u578b\u7c7b\u7684\u58f0\u660e\u548c\u975e\u6cdb\u578b\u7c7b\u7684\u58f0\u660e\u7c7b\u4f3c\uff0c\u9664\u4e86\u5728\u7c7b\u540d\u540e\u9762\u6dfb\u52a0\u4e86\u7c7b\u578b\u53c2\u6570\u58f0\u660e\u90e8\u5206\u3002</p> <p>\u6cdb\u578b\u7c7b\u7684\u7c7b\u578b\u53c2\u6570\u58f0\u660e\u90e8\u5206\u4e5f\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u7c7b\u578b\u53c2\u6570\uff0c\u53c2\u6570\u95f4\u7528\u9017\u53f7\u9694\u5f00\u3002\u4e00\u4e2a\u6cdb\u578b\u53c2\u6570\uff0c\u4e5f\u88ab\u79f0\u4e3a\u4e00\u4e2a\u7c7b\u578b\u53d8\u91cf\uff0c\u662f\u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u6cdb\u578b\u7c7b\u578b\u540d\u79f0\u7684\u6807\u8bc6\u7b26\u3002</p> <p>\u683c\u5f0f\u4e3a\uff1apublic class \u7c7b\u540d&lt;\u6cdb\u578b\u7c7b\u578b1,\u2026&gt;</p> <pre><code>public class Box&lt;T&gt; {\n\n  private T t;\n\n  public void add(T t) {\n    this.t = t;\n  }\n\n  public T get() {\n    return t;\n  }\n\n  public static void main(String[] args) {\n    Box&lt;Integer&gt; integerBox = new Box&lt;Integer&gt;();\n    Box&lt;String&gt; stringBox = new Box&lt;String&gt;();\n    integerBox.add(new Integer(10));\n    stringBox.add(new String(\"Java\u6cdb\u578b\"));\n\n    System.out.printf(\"\u6574\u578b\u503c\u4e3a :%d\\n\\n\", integerBox.get());\n    System.out.printf(\"\u5b57\u7b26\u4e32\u4e3a :%s\\n\", stringBox.get());\n  }\n}\n</code></pre> <p>\u2461\u6cdb\u578b\u65b9\u6cd5\uff0c\u6240\u6709\u6cdb\u578b\u65b9\u6cd5\u58f0\u660e\u90fd\u6709\u4e00\u4e2a\u7c7b\u578b\u53c2\u6570\u58f0\u660e\u90e8\u5206\uff08\u7531\u5c16\u62ec\u53f7\u5206\u9694\uff09\uff0c\u8be5\u7c7b\u578b\u53c2\u6570\u58f0\u660e\u90e8\u5206\u5728\u65b9\u6cd5\u8fd4\u56de\u7c7b\u578b\u4e4b\u524d\uff08\u5728\u4e0b\u9762\u4f8b\u5b50\u4e2d\u7684\uff09\u3002 <p>\u6bcf\u4e00\u4e2a\u7c7b\u578b\u53c2\u6570\u58f0\u660e\u90e8\u5206\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u7c7b\u578b\u53c2\u6570\uff0c\u53c2\u6570\u95f4\u7528\u9017\u53f7\u9694\u5f00\u3002\u4e00\u4e2a\u6cdb\u578b\u53c2\u6570\uff0c\u4e5f\u88ab\u79f0\u4e3a\u4e00\u4e2a\u7c7b\u578b\u53d8\u91cf\uff0c\u662f\u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u6cdb\u578b\u7c7b\u578b\u540d\u79f0\u7684\u6807\u8bc6\u7b26\u3002</p> <p>\u683c\u5f0f\u4e3a\uff1apublic &lt;\u6cdb\u578b\u7c7b\u578b&gt; \u8fd4\u56de\u7c7b\u578b \u65b9\u6cd5\u540d(\u6cdb\u578b\u7c7b\u578b .)</p> <pre><code>public class ObjectPrint {  \n    public &lt;T&gt; void show(T t) {\n        System.out.println(t); \n    }\n}\npublic class ObjectToolDemo { \n    public static void main(String[] args) { \n        ObjectPrint op = new ObjectPrint();\n        op.show(\"java\");\n        op.show(1100);\n        op.show(true);\n    }\n}\n</code></pre> <p>\u2462\u6cdb\u578b\u901a\u914d\u7b26\uff0c\u7c7b\u578b\u901a\u914d\u7b26\u4e00\u822c\u662f\u4f7f\u7528?\u4ee3\u66ff\u5177\u4f53\u7684\u7c7b\u578b\u53c2\u6570\u3002\u4f8b\u5982 List&lt;?&gt; \u5728\u903b\u8f91\u4e0a\u662fList,List \u7b49\u6240\u6709List&lt;\u5177\u4f53\u7c7b\u578b\u5b9e\u53c2&gt;\u7684\u7236\u7c7b\u3002 <pre><code>public class GenericTest {\n\n\n    public static void main(String[] args) {\n        List&lt;String&gt; names = new ArrayList&lt;String&gt;();\n        List&lt;Integer&gt; ages = new ArrayList&lt;Integer&gt;();\n        List&lt;Number&gt; numbers = new ArrayList&lt;Number&gt;();\n\n        names.add(\"icon\");\n        ages.add(18);\n        numbers.add(314);\n\n        getData(names);\n        getData(ages);\n        getData(numbers);\n\n   }\n\n   public static void getData(List&lt;?&gt; data) {\n      System.out.println(\"data :\" + data.get(0));\n   }\n}\n</code></pre> <p>\u56e0\u4e3agetData()\u65b9\u6cd5\u7684\u53c2\u6570\u662fList\u7c7b\u578b\u7684\uff0c\u6240\u4ee5names\uff0cages\uff0cnumbers\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u8fd9\u4e2a\u65b9\u6cd5\u7684\u5b9e\u53c2\uff0c\u8fd9\u5c31\u662f\u901a\u914d\u7b26\u7684\u4f5c\u7528\u3002</p> <p>\u2463\u6cdb\u578b\u4e0a\u4e0b\u8fb9\u754c\uff0c\u53ef\u80fd\u6709\u65f6\u5019\uff0c\u4f60\u4f1a\u60f3\u9650\u5236\u90a3\u4e9b\u88ab\u5141\u8bb8\u4f20\u9012\u5230\u4e00\u4e2a\u7c7b\u578b\u53c2\u6570\u7684\u7c7b\u578b\u79cd\u7c7b\u8303\u56f4\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u64cd\u4f5c\u6570\u5b57\u7684\u65b9\u6cd5\u53ef\u80fd\u53ea\u5e0c\u671b\u63a5\u53d7Number\u6216\u8005Number\u5b50\u7c7b\u7684\u5b9e\u4f8b\u3002\u8fd9\u5c31\u662f\u6709\u754c\u7c7b\u578b\u53c2\u6570\u7684\u76ee\u7684\u3002</p> <p>\u8981\u58f0\u660e\u4e00\u4e2a\u6709\u754c\u7684\u7c7b\u578b\u53c2\u6570\uff0c\u9996\u5148\u5217\u51fa\u7c7b\u578b\u53c2\u6570\u7684\u540d\u79f0\uff0c\u540e\u8ddfextends\u5173\u952e\u5b57\uff0c\u6700\u540e\u7d27\u8ddf\u5b83\u7684\u4e0a\u754c\u9650\u3002</p> <pre><code>public class GenericTest {\n\n\n    public static void main(String[] args) {\n        List&lt;String&gt; name = new ArrayList&lt;String&gt;();\n        List&lt;Integer&gt; age = new ArrayList&lt;Integer&gt;();\n        List&lt;Number&gt; number = new ArrayList&lt;Number&gt;();\n\n        name.add(\"icon\");\n        age.add(18);\n        number.add(314);\n\n        //getUperNumber(name);//1\n        getUperNumber(age);//2\n        getUperNumber(number);//3\n\n   }\n\n   public static void getData(List&lt;?&gt; data) {\n      System.out.println(\"data :\" + data.get(0));\n   }\n\n   public static void getUperNumber(List&lt;? extends Number&gt; data) {\n          System.out.println(\"data :\" + data.get(0));\n       }\n}\n</code></pre> <p>\u4e0a\u56fe\u4e2d\u7684extends\u4e0d\u662f\u7c7b\u7ee7\u627f\u91cc\u7684\u90a3\u4e2aextends\uff0c\u4e24\u4e2a\u6839\u672c\u6ca1\u6709\u4efb\u4f55\u5173\u8054\u3002\u56fe\u4e2d\u7684extends\u540e\u7684BoundingType\u53ef\u4ee5\u662f\u7c7b\uff0c\u4e5f\u53ef\u4ee5\u662f\u63a5\u53e3\uff0c\u610f\u601d\u662f\u8bf4\uff0cT\u662f\u5728BoundingType\u57fa\u7840\u4e0a\u521b\u5efa\u7684\uff0c\u5177\u6709BoundingType\u7684\u529f\u80fd\uff0c\u53ef\u80fd\u662fJAVA\u5f00\u53d1\u4eba\u5458\u4e0d\u60f3\u518d\u5f15\u5165\u4e00\u4e2a\u5173\u952e\u5b57\uff0c\u6240\u4ee5\u7528\u5df2\u6709\u7684extends\u6765\u4ee3\u66ff\u800c\u5df2\u3002</p> <p>\u7c7b\u578b\u901a\u914d\u7b26\u4e0b\u754c\u9650\u901a\u8fc7\u5f62\u5982 List&lt;? super Number&gt;\u6765\u5b9a\u4e49\uff0c\u8868\u793a\u7c7b\u578b\u53ea\u80fd\u63a5\u53d7Number\u53ca\u5176\u4e09\u5c42\u7236\u7c7b\u7c7b\u578b\uff0c\u5982 Object \u7c7b\u578b\u7684\u5b9e\u4f8b\u3002</p> <p>? extends Number ? super Number \u8fd9\u4e24\u8005\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f 1.\"? extends T\" \u8868\u793a\u7c7b\u578b\u7684\u4e0a\u754c\uff0c\u8868\u793a\u53c2\u6570\u5316\u7c7b\u578b\u53ef\u80fd\u662fT\u6216\u8005\u662fT\u7684\u5b50\u7c7b\uff0c\u53ea\u80fd\u53d6\uff0c\u4e0d\u80fd\u5199\uff1b 2.\"? super T\" \u8868\u793a\u7c7b\u578b\u7684\u4e0b\u754c\uff0cJava core\u4e2d\u53eb\u8d85\u7c7b\u578b\u9650\u5b9a\uff0c\u8868\u793a\u53c2\u6570\u5316\u7c7b\u578b\u662f\u6b64\u7c7b\u578b\u7684\u8d85\u7c7b\u578b\uff08\u7236\u7c7b\u578b\uff09\uff0c\u751a\u81f3\u662fObject\u3002\u53ea\u80fd\u5199\uff0c\u4e0d\u80fd\u53d6\u3002</p> <ul> <li>\u6cdb\u578b\u7684\u4f18\u52bf</li> </ul> <p>\u2460\u8fd0\u884c\u65f6\u4e0d\u786e\u5b9a\u7c7b\u578b\uff1b \u2461\u7c7b\u578b\u5b89\u5168\uff1b \u2462\u6d88\u9664\u5f3a\u5236\u8f6c\u6362\uff1b \u2463\u63d0\u9ad8\u865a\u62df\u673a\u6027\u80fd\u3002</p> <ul> <li>\u6cdb\u578b\u64e6\u9664</li> </ul> <p>Java5\u4e4b\u540e\u89c4\u5b9a\u4e86\u65b0\u7684Class\u6587\u4ef6\u683c\u5f0f\u89c4\u8303\uff0c\u65b9\u6cd5\u4e0e\u57df\u7684\u63cf\u8ff0\u7b26\u589e\u6dfb\u4e86\u5bf9\u6cdb\u578b\u4fe1\u606f\u7684\u8bb0\u5f55\u3002\u56e0\u6b64\u6cdb\u578b\u5199\u5230Class\u6587\u4ef6\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u89c4\u5f8b\uff1a</p> <ul> <li>\u58f0\u660e\u4e00\u4fa7\u7684\uff0c\u6e90\u7801\u91cc\u5199\u4e86\u4ec0\u4e48\u8fd0\u884c\u65f6\u5c31\u80fd\u770b\u5230\u4ec0\u4e48\u3002</li> <li>\u4f7f\u7528\u4e00\u4fa7\u7684\uff0c\u6e90\u7801\u91cc\u5199\u4e86\u4ec0\u4e48\u5230\u8fd0\u884c\u65f6\u5c31\u6ca1\u4e86</li> </ul> <p>\u56e0\u6b64\u51fa\u73b0\u8fd9\u6837\u7684\u60c5\u51b5\uff1a</p> <pre><code>List&lt;String&gt; list1 = new ArrayList&lt;String&gt;();//\u5de6\u4fa7\u58f0\u660e \u53f3\u4fa7\u4f7f\u7528\nList list2 = new ArrayList&lt;String&gt;();//\u5de6\u4fa7\u58f0\u660e \u53f3\u4fa7\u4f7f\u7528\n</code></pre> <p>\u5b9e\u4f8b1 <code>list1</code>class\u6587\u4ef6\u4e2d\u4f1a\u4fdd\u5b58String\u8fd9\u4e2a\u4f20\u5165\u7684\u6cdb\u578b\u53c2\u6570\u7684\u4fe1\u606f(\u8def\u5f84),\u800c\u5b9e\u4f8b2<code>list2</code>\u5c31\u6ca1\u6709\u5305\u542bString\u3002</p> <p>\u56e0\u6b64\u5728\u4f7f\u7528\u6cdb\u578b\u65f6\u5c3d\u91cf\u58f0\u660e\u548c\u5b9a\u4e49\u90fd\u4f7f\u7528\u660e\u786e\u7c7b\u578b\u3002</p> <p>\u5047\u8bbe\u53c2\u6570\u7c7b\u578b\u7684\u5360\u4f4d\u7b26\u4e3aT\uff0c\u64e6\u9664\u89c4\u5219\u5982\u4e0b\uff1a</p> <p>\u64e6\u9664\u540e\u53d8\u4e3aObecjt <p>&lt;? extends A&gt;\u64e6\u9664\u540e\u53d8\u4e3aA</p> <p>*&lt;\uff1f super A&gt;\u64e6\u9664\u540e\u53d8\u4e3aObject</p> <ul> <li>\u6cdb\u578b\u64e6\u9664\u7684\u4ee3\u4ef7</li> </ul> <p>1.\u4e0d\u53ef\u4ee5\u4f7f\u7528<code>arg instanceof T</code>\u8868\u8fbe\u5f0f\u548c<code>new T()</code>\u8868\u8fbe\u5f0f</p> <p>2.\u6cdb\u578b\u65b9\u6cd5\u4e5f\u4f1a\u53d1\u751f\u6cdb\u578b\u64e6\u9664</p> <ul> <li>\u6cdb\u578b\u64e6\u9664\u7684\u8865\u507f\uff0c\u5373\u5982\u4f55\u907f\u514d\u6cdb\u578b\u64e6\u9664</li> </ul> <p>\u4f7f\u7528Class\u6765\u5e2e\u5fd9\uff0c\u56e0\u4e3aClass\u5bf9\u8c61\u83b7\u5f97\u8fd0\u884c\u65f6\u7c7b\u578b\u548c\u6cdb\u578b\u64e6\u9664\u6ca1\u6709\u5173\u7cfb\u3002</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#24java","title":"24.Java [\u5806\uff0c\u6808\uff0c\u65b9\u6cd5\u533a]","text":"<p>1\u3001JVM\u5185\u5b58\u5206\u4e3a\u5806\uff08heap\uff09\u3001\u6808\uff08stock\uff09\u3001\u65b9\u6cd5\u533a\uff08method\uff09\u4e09\u4e2a\u533a\u57df\uff0c\u5206\u522b\u7528\u4e8e\u50a8\u5b58\u4e0d\u540c\u7684\u6570\u636e\u3002</p> <p></p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_3","title":"\u5806","text":"<p>2\u3001JVM\u53ea\u6709\u4e00\u4e2a\u5806\u533a\uff0c\u5728\u865a\u62df\u673a\u542f\u52a8\u65f6\u521b\u5efa\uff0c\u88ab\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\uff0c\u5806\u533a\u4e0d\u653e\u57fa\u672c\u7c7b\u578b\uff08\u6210\u5458\u53d8\u91cf\u9664\u5916\uff09\u548c\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u53ea\u5b58\u50a8\u5bf9\u8c61\u672c\u8eab\uff08\u5305\u62ecclass\u5bf9\u8c61\u548c\u5f02\u5e38\u5bf9\u8c61\uff09\u548c\u6570\u7ec4\uff0c\u5806\u662fGC\u6240\u7ba1\u7406\u7684\u4e3b\u8981\u533a\u57df\uff08\u5bf9\u4e0d\u9700\u8981\u7684\u5bf9\u8c61\u8fdb\u884c\u6807\u8bb0\uff0c\u800c\u540e\u8fdb\u884c\u6e05\u9664\uff09\u3002</p> <ul> <li>\u65b0\u751f\u4ee3\uff1aEden Survivor \u5b58\u50a8\u65b0\u751f\u7684\u5bf9\u8c61 </li> <li>\u8001\u751f\u4ee3\uff1aTenured  \u5b58\u50a8\u88ab\u957f\u65f6\u95f4\u4f7f\u7528\u7684\u5bf9\u8c61</li> <li>\u5143\u7a7a\u95f4\uff1a1.8\u4e4b\u524d\u88ab\u79f0\u4e3a\u6c38\u4e45\u4ee3\uff1a\u5b58\u50a8\u4e00\u4e9b\u65b9\u6cd5\u4e2d\u64cd\u4f5c\u7684\u4e34\u65f6\u5bf9\u8c61\u7b49\u3002</li> </ul> <p>3\u3001GC\uff08Garbage Controller\uff09\u6d41\u7a0b\uff1a</p> <ul> <li>\u57fa\u672c\u6240\u6709\u6570\u636e\u90fd\u4f1a\u4fdd\u5b58\u5728JVM\u7684\u5806\u5185\u5b58\u4e4b\u4e2d\u3002</li> <li>\u5bf9\u4e8e\u6574\u4e2a\u7684GC\u6d41\u7a0b\u91cc\u9762\uff0c\u6700\u9700\u8981\u5904\u7406\u7684\u4e8b\u662f \u5e74\u8f7b\u4ee3 \u548c \u8001\u5e74\u4ee3 \u7684\u5185\u5b58\u6e05\u7406\u64cd\u4f5c\u3002</li> <li>\u5143\u7a7a\u95f4\uff08\u6c38\u4e45\u4ee3\uff09\u90fd\u4e0d\u5728GC\u8303\u56f4\u5185\u3002</li> </ul>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#gc","title":"GC\u7c7b\u578b","text":"<ul> <li>YoungGC</li> <li>Full GC </li> </ul>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#gc_1","title":"GC\u5177\u4f53\u6d41\u7a0b\uff1a","text":"<ol> <li>\u5f53\u73b0\u5728\u6709\u4e00\u4e2a\u65b0\u751f\u7684\u5bf9\u8c61\u4ea7\u751f\uff0cJVM\u9700\u8981\u4e3a\u8be5\u5bf9\u8c61\u8fdb\u884c\u5185\u5b58\u7a7a\u95f4\u7533\u8bf7\u3002</li> <li>\u5148\u5224\u65adEden\u533a\u662f\u5426\u6709\u5185\u5b58\u7a7a\u95f4\uff0c\u5982\u679c\u6709\uff0c\u76f4\u63a5\u5c06\u65b0\u5bf9\u8c61\u4fdd\u5b58\u5728Eden\u533a\u3002</li> <li>\u5982\u679cEden\u533a\u7684\u5185\u5b58\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4f1a\u81ea\u52a8\u6267\u884c\u4e00\u4e2aMinor GC\u64cd\u4f5c\uff0c\u5c06Eden\u533a\u65e0\u7528\u5185\u5b58\u7a7a\u95f4\u8fdb\u884c\u6e05\u7406\u3002</li> <li>\u6e05\u7406Eden\u533a\u4e4b\u540e\u7ee7\u7eed\u5224\u65adEden\u533a\u5185\u5b58\u7a7a\u95f4\u60c5\u51b5\uff0c\u5982\u679c\u5145\u8db3\uff0c\u5219\u5c06\u65b0\u5bf9\u8c61\u76f4\u63a5\u4fdd\u5b58\u5728Eden\u533a\u3002</li> <li>\u5982\u679c\u6267\u884c\u4e86Minor GC\u4e4b\u540e\u53d1\u73b0Eden\u533a\u7684\u5185\u5b58\u4ecd\u7136\u4e0d\u8db3\uff0c\u90a3\u5c31\u5224\u65ad\u5b58\u6d3b\u533a\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5e76\u5c06Eden\u533a\u7684\u90e8\u5206\u6d3b\u8dc3\u5bf9\u8c61\u4fdd\u5b58\u5728\u5b58\u6d3b\u533a\u3002</li> <li>\u6d3b\u8dc3\u5bf9\u8c61\u8fc1\u79fb\u5230\u5b58\u6d3b\u533a\u540e\uff0c\u7ee7\u7eed\u5224\u65adEden\u533a\u5185\u5b58\u7a7a\u95f4\u60c5\u51b5\uff0c\u5982\u679c\u5145\u8db3\uff0c\u5219\u5c06\u65b0\u5bf9\u8c61\u76f4\u63a5\u4fdd\u5b58\u5728Eben\u533a\u3002</li> <li>\u5982\u679c\u5b58\u6d3b\u533a\u4e5f\u6ca1\u6709\u7a7a\u95f4\u4e86\uff0c\u5219\u7ee7\u7eed\u5224\u65ad\u8001\u5e74\u533a\uff0c\u5982\u679c\u8001\u5e74\u533a\u5145\u8db3\uff0c\u5219\u5c06\u5b58\u6d3b\u533a\u90e8\u5206\u6d3b\u8dc3\u5bf9\u8c61\u4fdd\u5b58\u5728\u8001\u5e74\u533a\u3002</li> <li>\u5b58\u6d3b\u533a\u7684\u6d3b\u8dc3\u5bf9\u8c61\u8fc1\u79fb\u5230\u8001\u5e74\u533a\u540e\uff0c\u5219\u5c06Eden\u533a\u7684\u90e8\u5206\u6d3b\u8dc3\u5bf9\u8c61\u4fdd\u5b58\u5230\u5b58\u6d3b\u533a\u3002</li> <li>\u6d3b\u8dc3\u5bf9\u8c61\u8fc1\u79fb\u5230\u5b58\u6d3b\u533a\u540e\uff0c\u7ee7\u7eed\u5224\u65adEden\u533a\u5185\u5b58\u7a7a\u95f4\u60c5\u51b5\uff0c\u5982\u679c\u5145\u8db3\uff0c\u5219\u5c06\u65b0\u5bf9\u8c61\u76f4\u63a5\u4fdd\u5b58\u5728Eden\u533a\u3002</li> <li>\u5982\u679c\u8001\u5e74\u533a\u4e5f\u6ee1\u4e86\uff0c\u8fd9\u65f6\u5019\u4ea7\u751fMinor GC\uff08full GC\uff09\u8fdb\u884c\u8001\u5e74\u533a\u7684\u5185\u5b58\u6e05\u7406\u3002</li> <li>\u5982\u679c\u8001\u5e74\u533a\u6267\u884cMajor GC\u4e4b\u540e\u53d1\u73b0\u65e0\u6cd5\u8fdb\u884c\u5bf9\u8c61\u4fdd\u5b58\uff0c\u4f1a\u4ea7\u751fOutOfMemoryError\u5f02\u5e38\u3002</li> </ol> <p>\u5806\u5185\u5b58\u8c03\u6574</p> <p>\u5806\u5185\u5b58\u7a7a\u95f4\u8c03\u6574\u53c2\u6570\uff1a</p> <ul> <li>-Xms\uff1a\u8bbe\u7f6e\u521d\u59cb\u5206\u914d\u5927\u5c0f\uff0c\u9ed8\u8ba4\u4e3a\u7269\u7406\u5185\u5b58\u76841/64</li> <li>-Xmx\uff1a\u6700\u5927\u5206\u914d\u5185\u5b58\uff0c\u9ed8\u8ba4\u4e3a\u7269\u7406\u5185\u5b58\u76841/4</li> <li>-xmn\uff1a\u8bbe\u7f6e\u5e74\u8f7b\u4ee3\u7684\u5927\u5c0f \u9ed8\u8ba4\u60c5\u51b5\u662f\u5e74\u8f7b\u4ee3\uff1a\u8001\u5e74\u4ee3=1:2</li> <li>-XX:+PrintGCDetails\uff1a\u8f93\u51fa\u8be6\u7ec6\u7684GC\u5904\u7406\u65e5\u5fd7</li> <li>-XX:+PrintGCTimeStamps\uff1a\u8f93\u51faGC\u7684\u65f6\u95f4\u6233\u4fe1\u606f</li> <li>-XX:+PrintGCDateStamps\uff1a\u8f93\u51faGC\u7684\u65f6\u95f4\u6233\u4fe1\u606f\uff08\u4ee5\u65e5\u671f\u7684\u5f62\u5f0f\uff09</li> <li>-XX:+PrintHeapAtGC\uff1a\u5728GC\u8fdb\u884c\u5904\u7406\u7684\u524d\u540e\u6253\u5370\u5806\u5185\u5b58\u4fe1\u606f</li> <li>-Xloggc:(SavePath)\uff1a\u8bbe\u7f6e\u65e5\u5fd7\u4fe1\u606f\u4fdd\u5b58\u6587\u4ef6</li> <li>\u5728\u5806\u5185\u5b58\u7684\u8c03\u6574\u7b56\u7565\u4e2d\uff0c\u57fa\u672c\u4e0a\u53ea\u8981\u8c03\u6574\u4e24\u4e2a\u53c2\u6570\uff1a-Xms\u548c-Xmx</li> </ul> <pre><code>Runtime runtime = Runtime.getRuntime();\nlong maxMemory = runtime.maxMemory();\nlong totalMemory = runtime.totalMemory();\nSystem.out.println(\"max_memory=\" + maxMemory /(double)1024/1024 + \"M\");\nSystem.out.println(\"total_memory=\" + totalMemory /(double)1024/1024 + \"M\");\n</code></pre> <p>Jvm\u8c03\u4f18</p> <p>1.\u589e\u52a0\u5806\u5185\u5b58\u5927\u5c0f</p> <p>2.\u52a0\u5927\u4e00\u4e0b\u5e74\u8f7b\u4ee3\u7684\u5bb9\u91cf\u548c\u51cf\u5c11\u5bf9\u8c61\u8fdb\u5165\u8001\u5e74\u4ee3\u7684\u5e74\u9f84\u9608\u503c</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_4","title":"\u6808","text":"<p>1\u3001\u6bcf\u4e2a\u7ebf\u7a0b\u5305\u542b\u4e00\u4e2a\u6808\u533a\uff08\u5806\u53ea\u6709\u4e00\u4e2a\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\uff09\uff0c\u6808\u4e2d\u53ea\u4fdd\u5b58\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u5bf9\u8c61\u548c\u81ea\u5b9a\u4e49\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5bf9\u8c61\u90fd\u5b58\u653e\u5728\u5806\u533a\u4e2d\u3002 2\u3001\u6bcf\u4e2a\u6808\u4e2d\u7684\u6570\u636e\uff08\u539f\u59cb\u7c7b\u578b \u548c \u5bf9\u8c61\u5f15\u7528\uff09\u90fd\u662f\u79c1\u6709\u7684\uff0c\u5176\u4ed6\u6808\u4e0d\u80fd\u8bbf\u95ee\u3002 3\u3001\u6808\u5206\u4e3a3\u90e8\u5206\uff1a\u57fa\u672c\u7c7b\u578b\u53d8\u91cf\u533a\u3001\u6267\u884c\u73af\u5883\u4e0a\u4e0b\u6587\u3001\u64cd\u4f5c\u6307\u4ee4\u533a\uff08\u5b58\u653e\u64cd\u4f5c\u6307\u4ee4\uff09\u3002</p> <p>4\u3001\u8fc7\u7a0b\uff1a\u6808\u7528\u4e8e\u5b58\u50a8\u7a0b\u5e8f\u8fd0\u884c\u65f6\u5728\u65b9\u6cd5\u4e2d\u58f0\u660e\u7684\u6240\u6709\u5c40\u90e8\u53d8\u91cf\uff08\u6808\u4e3b\u8981\u5b58\u50a8\u65b9\u6cd5\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf\uff09\u3002JVM\u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u65b9\u6cd5\u5206\u914d\u4e00\u4e2a\u5bf9\u5e94\u7684\u7a7a\u95f4\uff0c\u8fd9\u4e2a\u7a7a\u95f4\u79f0\u4e3a\u8be5\u65b9\u6cd5\u7684\u6808\u5e27\u3002\u4e00\u4e2a\u6808\u5e27\u5bf9\u5e94\u4e00\u4e2a\u6b63\u5728\u8c03\u7528\u7684\u65b9\u6cd5\uff0c\u6808\u5e27\u4e2d\u5b58\u50a8\u4e86\u8be5\u65b9\u6cd5\u7684\u53c2\u6570\u3001\u5c40\u90e8\u53d8\u91cf\u7b49\u6570\u636e\u3002\u5f53\u67d0\u4e00\u65b9\u6cd5\u8c03\u7528\u5b8c\u6210\u540e\uff0c\u5176\u5bf9\u5e94\u7684\u6808\u5e27\u5c06\u88ab\u6e05\u9664\uff0c\u5c40\u90e8\u53d8\u91cf\u5931\u6548\u3002\uff08\u65b9\u6cd5\u7ed3\u675f\uff0c\u5c40\u90e8\u53d8\u91cf\u5931\u6548\uff0c\u4ece\u6808\u4e2d\u6e05\u9664\uff09</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_5","title":"\u65b9\u6cd5\u533a","text":"<p>\u65b9\u6cd5\u533a\uff1a\u5b58\u653eclass\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5b58\u50a8\u7740class\u6587\u4ef6\u7684\u4fe1\u606f\u548c\u52a8\u6001\u5e38\u91cf\u6c60\uff0cclass\u6587\u4ef6\u7684\u4fe1\u606f\u5305\u62ec\u7c7b\u4fe1\u606f\u548c\u9759\u6001\u5e38\u91cf\u6c60\uff0c\u4e5f\u662f\u5806\u4e2d\u7684\u6c38\u4e45\u4ee3\u3002</p> <p>\u8fd0\u884c\u5e38\u91cf\u6c60\u662f\u65b9\u6cd5\u533a\u7684\u4e00\u90e8\u5206\uff0c\u5e38\u91cf\u6c60\u7528\u4e8e\u5b58\u653e\u7f16\u8bd1\u671f\u751f\u6210\u7684\u5404\u79cd\u5b57\u9762\u91cf\u548c\u7b26\u53f7\u5f15\u7528\uff08\u8fd8\u6709\u7ffb\u8bd1\u51fa\u6765\u7684\u76f4\u63a5\u5f15\u7528\uff09\uff0c\u8fd9\u90e8\u5206\u5185\u5bb9\u5728\u7c7b\u52a0\u8f7d\u540e\u8fdb\u5165\u65b9\u6cd5\u533a\u7684\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\u4e2d\u5b58\u653e\u3002 \u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\u76f8\u5bf9\u4e8eClass\u6587\u4ef6\u5e38\u91cf\u6c60\u7684\u53e6\u4e00\u4e2a\u91cd\u8981\u7279\u5f81\u662f\u5177\u5907\u52a8\u6001\u6027\uff0c\u8fd0\u884c\u671f\u4e5f\u53ef\u80fd\u5c06\u65b0\u7684\u5e38\u91cf\u653e\u5165\u6c60\u4e2d\u3002</p> <p>\u7ebf\u7a0b\u5b89\u5168\u7684\u5171\u4eab\u533a\u57df\u3002</p>"},{"location":"Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/#_6","title":"\u56de\u6536\u5bf9\u8c61","text":"<p>\u4e3b\u8981\u662f\u533a\u5206\u5806\u4e2d\u54ea\u4e9b\u5bf9\u8c61\u5df2\u6b7b\uff0c\u53ef\u4ee5\u8fdb\u884c\u56de\u6536\uff0c\u4e3b\u8981\u662f\u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u6ca1\u6709\u53d8\u91cf\u53bb\u8bb0\u5f55\u7684\u65f6\u5019\uff0c\u8be5\u5bf9\u8c61\u5c31\u4f1a\u6210\u4e3a\u5783\u573e\u5bf9\u8c61\uff0c\u5e76\u5728\u5783\u573e\u56de\u6536\u5668\u7a7a\u95f2\u7684\u65f6\u5019\u56de\u6536\u3002</p> <p>\u4e24\u79cd\u5bf9\u5bf9\u8c61\u8fdb\u884c\u56de\u6536\u5224\u65ad\u7684\u65b9\u6cd5\uff1a</p> <p>1.\u5f15\u7528\u8ba1\u6570\u6cd5</p> <p>\u6bcf\u4e2a\u5bf9\u8c61\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u5668\uff0c\u5f53\u6709\u522b\u4eba\u5f15\u7528\u5b83\u7684\u65f6\u5019\uff0c\u8ba1\u6570\u5668\u5c31\u4f1a\u52a01\uff0c\u5f53\u522b\u4eba\u4e0d\u5f15\u7528\u5b83\u7684\u65f6\u5019\uff0c\u8ba1\u6570\u5668\u5c31\u4f1a\u51cf1\uff0c\u5f53\u8ba1\u6570\u5668\u4e3a0\u7684\u65f6\u5019\u5bf9\u8c61\u5c31\u53ef\u4ee5\u5f53\u6210\u5783\u573e\u3002</p> <p>2.\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5</p> <p>\u901a\u8fc7\u7cfb\u5217\u7684\u79f0\u4e3a GC Roots \u7684\u5bf9\u8c61\u4f5c\u4e3a\u8d77\u59cb\u70b9\uff0c\u4ece\u8fd9\u4e9b\u8282\u70b9\u5f00\u59cb\u5411\u4e0b\u641c\u7d22\uff0c\u641c\u7d22\u8d70\u8fc7\u7684\u8def\u5f84\u6210\u4e3a \u5f15 \u7528\u8fde\uff0c\u5f53\u4e00\u4e2a\u5bf9\u8c61\u5230GC Roots\u6ca1\u6709\u4efb\u4f55\u5f15\u7528\u94fe\u76f8\u8fde\u65f6\uff0c\u5219\u8bc1\u660e\u6b64\u5bf9\u8c61\u662f\u4e0d\u53ef\u8fbe\u7684\uff0c\u4f1a\u88ab\u5224\u65ad\u4e3a\u53ef\u56de\u6536\u7684\u5bf9 \u8c61\u3002</p> <p>\u53ef\u4ee5\u6210\u4e3aGCRoot\u7684\uff1a</p> <ul> <li>\u865a\u62df\u673a\u6808\u4e2d (\u6808\u5e27\u4e2d\u7684\u672c\u5730\u53d8\u91cf\u8868) \u5f15\u7528\u7684\u5bf9\u8c61  </li> <li>\u65b9\u6cd5\u533a\u4e2d\u7c7b\u9759\u6001\u5c5e\u6027\u5f15\u7528\u7684\u5bf9\u8c61  </li> <li>\u65b9\u6cd5\u533a\u4e2d\u5e38\u91cf\u7684\u5f15\u7528\u5bf9\u8c61 </li> <li>\u672c\u5730\u65b9\u6cd5\u6808\u4e2d\u5f15\u7528\u7684\u5bf9\u8c61</li> </ul> <p>GC Roots\u7684\u5bf9\u8c61\uff1a GC\u7ba1\u7406\u7684\u4e3b\u8981\u533a\u57df\u662fJava\u5806\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u53ea\u9488\u5bf9\u5806\u8fdb\u884c\u5783\u573e\u56de\u6536\u3002\u88abGC Roots\u5f15\u7528\u7684\u5bf9\u8c61\u4e0d\u88abGC\u56de\u6536\uff0c\u53ef\u4ee5\u4f5c\u4e3aGCRoots\u5bf9\u8c61\u7684\u662f java\u865a\u62df\u673a\u6808\u4e2d\u5f15\u7528\u7684\u5bf9\u8c61\u3001 \u672c\u5730\u65b9\u6cd5\u6808\u4e2djni\u5f15\u7528\u7684\u5bf9\u8c61\u3001 \u65b9\u6cd5\u533a\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\u5f15\u7528\u7684\u5bf9\u8c61\u3001 \u65b9\u6cd5\u533a\u4e2d\u9759\u6001\u5c5e\u6027\u5f15\u7528\u7684\u5bf9\u8c61\u3001 \u8fd0\u884c\u4e2d\u7684\u7ebf\u7a0b\uff08\u53ef\u8054\u60f3\u5230--\u5185\u5b58\u6cc4\u9732\u554a)\u3001 \u7531\u5f15\u5bfc\u7c7b\u52a0\u8f7d\u5668\u52a0\u8f7d\u7684\u5bf9\u8c61\u3001 GC\u63a7\u5236\u7684\u5bf9\u8c61\u3002</p> <p>\u5373\u5c40\u90e8\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u53ef\u4ee5\u4f5c\u4e3aGC Root</p> <p>JVM\u4e2d\u4e3b\u8981\u4f7f\u7528\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5\uff0c\u5c3d\u91cf\u4e0d\u8981\u521b\u5efa\u5f88\u5927\u7684\u5bf9\u8c61</p> <p>\u539f\u56e0 : GC\u56de\u6536\u7b97\u6cd5\u4ece\u6765\u4e0d\u5bf9\u5927\u5bf9\u8c61(&gt;=85000\u5b57\u8282)\u5806\u8fdb\u884c\u5185\u5b58\u538b\u7f29\u6574\u7406\uff0c\u5728\u5806\u4e2d\u5927\u7684\u5185\u5b58\u5757\u4f1a\u6d6a\u8d39\u592a\u591aCPU</p> <p>\u5224\u65ad\u662f\u5426\u88ab\u56de\u6536\uff0c\u53ef\u4ee5\u91cd\u5199Object.finalize()\u65b9\u6cd5\u3002</p>"},{"location":"Java/Java%E5%BC%82%E5%B8%B8/","title":"Java\u5f02\u5e38","text":"<p>\u65e5\u5e38\u5de5\u4f5c\u603b\u7ed3\u7684Java\u5f02\u5e38</p> <ol> <li><code>Android android.os.DeadSystemException</code></li> </ol> <p>\u51fa\u73b0\u539f\u56e0\uff1a\u88ab\u7cfb\u7edf\u6740\u6389\u670d\u52a1\u5bfc\u81f4\u51fa\u73b0\u7684\u539f\u56e0\uff0c\u4e00\u822c\u51fa\u73b0\u5728\u540e\u53f0\u7528\u6237\u65e0\u611f\u77e5\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u6682\u65f6\u4e0d\u5904\u7406\uff0c\u662f\u5426\u629b\u51fa\u5f02\u5e38\u662f\u6709mInstrumentation.onException(s, e)\u6765\u5224\u65ad\u7684\uff0c\u662f\u5426\u53ef\u4ee5hook\u4f4f Instrumentation\u3002\u91cd\u5199onException\u51fd\u6570\uff0c\u5224\u65ad\u4e0d\u4e0a\u62a5\u5f02\u5e38\u3002</p>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/","title":"Java\u6ce8\u89e3\uff08Annotation\uff09","text":""},{"location":"Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/#_1","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>Java \u6ce8\u89e3\uff08Annotation\uff09\u53c8\u79f0 Java \u6807\u6ce8\uff0c\u4e5f\u53ef\u4ee5\u8bf4\u662f\u7ed9\u6e90\u4ee3\u7801\u52a0\u6807\u7b7e\uff0c\u4e0d\u662f\u8fd9\u4e9b\u6807\u7b7e\u6709\u4ec0\u4e48\u610f\u4e49\uff0c\u800c\u662f\u5916\u90e8\u5de5\u5177\u8bbf\u95ee\u8fd9\u4e9b\u6807\u7b7e\uff0c\u4f1a\u505a\u51fa\u76f8\u5e94\u7684\u5904\u7406\uff0c\u8bbf\u95ee\u548c\u5904\u7406Annotation\u7684\u5de5\u5177\u7edf\u79f0\u4e3aAPT(Annotation Processing Tool)\u3002</p>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/#_2","title":"\u57fa\u672c\u8bed\u6cd5","text":"<p>\u6ce8\u89e3\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u4e09\u7c7b\uff1a</p> <ul> <li>\u57fa\u672c\u6ce8\u89e3</li> <li>\u5143\u6ce8\u89e3</li> <li>\u81ea\u5b9a\u4e49\u6ce8\u89e3</li> </ul> <p></p>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/#_3","title":"\u57fa\u672c\u6ce8\u89e3","text":"<p>Java\u5185\u7f6e\u7684\u6ce8\u89e3\u5171\u67095\u4e2a\uff1a</p> <ul> <li><code>@Override</code>  :\u8ba9\u7f16\u8bd1\u5668\u68c0\u67e5\u88ab\u6807\u8bb0\u7684\u65b9\u6cd5\uff0c\u4fdd\u8bc1\u5176\u91cd\u5199\u4e86\u7236\u7c7b\u7684\u67d0\u4e00\u4e2a\u65b9\u6cd5\u3002</li> </ul> <p><code>java   @Target(ElementType.METHOD)   @Retention(RetentionPolicy.SOURCE)   public @interface Override {   }</code></p> <ul> <li><code>@Deprecated</code> :\u6807\u8bb0\u67d0\u4e9b\u7a0b\u5e8f\u5143\u7d20\u5df2\u7ecf\u8fc7\u65f6\uff0c\u7a0b\u5e8f\u5458\u8bf7\u4e0d\u8981\u518d\u4f7f\u7528\u4e86\u3002</li> </ul> <p><code>java   @Documented   @Retention(RetentionPolicy.RUNTIME)   @Target(value={CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, PARAMETER, TYPE})   public @interface Deprecated {   }</code></p> <ul> <li><code>@SuppressWarnings</code> :\u544a\u8bc9\u7f16\u8bd1\u5668\u4e0d\u8981\u663e\u793a\u8b66\u544a\uff0c\u81ea\u5df1\u6e05\u695a\u7684\u77e5\u9053\u81ea\u5df1\u5728\u5e72\u4ec0\u4e48\u3002</li> </ul> <p>\u6709\u4e00\u4e2a\u53c2\u6570\uff0c\u4e3aString\u6570\u7ec4\u3002</p> <ul> <li>deprecation\uff1a\u4f7f\u7528\u4e86\u4e0d\u8d5e\u6210\u4f7f\u7528\u7684\u7c7b\u6216\u65b9\u6cd5\u65f6\u7684\u8b66\u544a\uff1b</li> <li>unchecked\uff1a\u6267\u884c\u4e86\u672a\u68c0\u67e5\u7684\u8f6c\u6362\u65f6\u7684\u8b66\u544a\uff0c\u4f8b\u5982\u5f53\u4f7f\u7528\u96c6\u5408\u65f6\u6ca1\u6709\u7528\u6cdb\u578b (Generics) \u6765\u6307\u5b9a\u96c6\u5408\u4fdd\u5b58\u7684\u7c7b\u578b;</li> <li>fallthrough\uff1a\u5f53 Switch \u7a0b\u5e8f\u5757\u76f4\u63a5\u901a\u5f80\u4e0b\u4e00\u79cd\u60c5\u51b5\u800c\u6ca1\u6709 Break \u65f6\u7684\u8b66\u544a;</li> <li>path\uff1a\u5728\u7c7b\u8def\u5f84\u3001\u6e90\u6587\u4ef6\u8def\u5f84\u7b49\u4e2d\u6709\u4e0d\u5b58\u5728\u7684\u8def\u5f84\u65f6\u7684\u8b66\u544a;</li> <li>serial\uff1a\u5f53\u5728\u53ef\u5e8f\u5217\u5316\u7684\u7c7b\u4e0a\u7f3a\u5c11 serialVersionUID \u5b9a\u4e49\u65f6\u7684\u8b66\u544a;</li> <li>finally\uff1a\u4efb\u4f55 finally \u5b50\u53e5\u4e0d\u80fd\u6b63\u5e38\u5b8c\u6210\u65f6\u7684\u8b66\u544a;</li> <li>all\uff1a\u5173\u4e8e\u4ee5\u4e0a\u6240\u6709\u60c5\u51b5\u7684\u8b66\u544a\u3002</li> </ul> <p><code>java   @Target({TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE})   @Retention(RetentionPolicy.SOURCE)   public @interface SuppressWarnings {       String[] value();   }</code></p> <ul> <li><code>@SafeVarargs</code>(Java7\u65b0\u589e):<code>@SuppressWarnings</code>\u53ef\u4ee5\u7528\u5728\u5404\u79cd\u9700\u8981\u53d6\u6d88\u8b66\u544a\u7684\u5730\u65b9\uff0c\u800c <code>@SafeVarargs</code>\u4e3b\u8981\u7528\u5728\u53d6\u6d88\u53c2\u6570\u7684\u8b66\u544a\u3002\u5bf9\u65b9\u6cd5\u53c2\u6570\u6709\u8b66\u544a\u65f6\uff0c\u53d6\u6d88\u8b66\u544a\u3002</li> </ul> <p><code>java   @Documented   @Retention(RetentionPolicy.RUNTIME)   @Target({ElementType.CONSTRUCTOR, ElementType.METHOD})   public @interface SafeVarargs {}</code></p> <p>\u8be5\u6ce8\u89e3\u4e3b\u8981\u662f\u4e13\u95e8\u5904\u7406\u53d6\u6d88\u5806\u6c61\u67d3\u8b66\u544a\u8bbe\u7f6e\u7684\uff0c\u5806\u6c61\u67d3\u662f\u6307\u5f53\u53c2\u6570\u5316\u7c7b\u578b\u53d8\u91cf\u5f15\u7528\u7684\u5bf9\u8c61\u4e0d\u662f\u8be5\u53c2\u6570\u5316\u7c7b\u578b\u7684\u5bf9\u8c61\u65f6\u800c\u53d1\u751f\u7684\u3002\u6211\u4eec\u77e5\u9053\u5728JDK5\u4e2d\uff0c\u5f15\u5165\u4e86\u6cdb\u578b\u7684\u6982\u5ff5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u521b\u5efa\u96c6\u5408\u7c7b\u7684\u65f6\u5019\uff0c\u6307\u5b9a\u8be5\u96c6\u5408\u7c7b\u4e2d\u5e94\u8be5\u5b58\u50a8\u7684\u5bf9\u8c61\u7c7b\u578b\u3002\u5982\u679c\u5728\u6307\u5b9a\u7c7b\u578b\u7684\u96c6\u5408\u4e2d\uff0c\u5f15\u7528\u4e86\u4e0d\u540c\u7684\u7c7b\u578b\uff0c\u90a3\u4e48\u8fd9\u79cd\u60c5\u51b5\u5c31\u53eb\u505a\u5806\u6c61\u67d3\u3002</p> <p><code>java   //\u5806\u6c61\u67d3\u7684\u4f8b\u5b50   public void heapPollution1(){           List normalList= Arrays.asList(\"www.flydean.com\",100);           List&lt;Integer&gt; normalList= normalList;       }</code></p> <p>\u4ee5\u4e0a\u7684\u4f8b\u5b50\u4e2d\uff0cnormalList\u4e2d\u5305\u542b\u4e86int\u548cString\u4e24\u79cd\u7c7b\u578b\uff0c\u5f53\u6211\u4eec\u5c06normalList\u8d4b\u503c\u7ed9normalList\u7684\u65f6\u5019\uff0cjava\u7f16\u8bd1\u5668\u5e76\u4e0d\u4f1a\u53bb\u5224\u65ad\u8d4b\u503cList\u4e2d\u7684\u7c7b\u578b\uff0cintegerList\u4e2d\u5305\u542b\u4e86\u975eInteger\u7684\u5143\u7d20\uff0c\u6700\u7ec8\u5bfc\u81f4\u5728\u4f7f\u7528\u7684\u65f6\u5019\u4f1a\u51fa\u73b0\u9519\u8bef\u3002</p> <ul> <li><code>@FunctionalInterface</code> (Java8\u65b0\u589e):\u6807\u8bb0\u578b\u6ce8\u89e3\uff0c\u544a\u8bc9\u7f16\u8bd1\u5668\u68c0\u67e5\u88ab\u6807\u6ce8\u7684\u63a5\u53e3\u662f\u5426\u662f\u4e00\u4e2a\u51fd\u6570\u63a5\u53e3\uff0c\u5373\u68c0\u67e5\u8fd9\u4e2a\u63a5\u53e3\u662f\u5426\u53ea\u5305\u542b\u4e00\u4e2a\u62bd\u8c61\u65b9\u6cd5\uff0c\u53ea\u6709\u51fd\u6570\u63a5\u53e3\u624d\u53ef\u4ee5\u4f7f\u7528<code>Lambda</code>\u8868\u8fbe\u5f0f\u521b\u5efa\u5b9e\u4f8b\u3002</li> </ul> <p><code>java   @Documented   @Retention(RetentionPolicy.RUNTIME)   @Target(ElementType.TYPE)   public @interface FunctionalInterface {}</code></p>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/#_4","title":"\u5143\u6ce8\u89e3","text":"<p>\u7528\u6765\u7ed9\u5176\u4ed6\u6ce8\u89e3\u6253\u6807\u7b7e\u7684\u6ce8\u89e3\uff0c\u5373\u7528\u6765\u6ce8\u89e3\u5176\u4ed6\u6ce8\u89e3\u7684\u6ce8\u89e3\u3002\u5143\u6ce8\u89e3\u5171\u67096\u4e2a\u3002</p> <ul> <li>@Retention\uff1a\u7528\u4e8e\u6307\u5b9a\u88ab\u6b64\u5143\u6ce8\u89e3\u6807\u6ce8\u7684\u6ce8\u89e3\u7684\u4fdd\u7559\u65f6\u957f\uff0c\u5373\u8be5\u6ce8\u89e3\u5728\u5728\u54ea\u4e2a\u9636\u6bb5\u8fd8\u53ef\u4ee5\u7528\u5230\u3002</li> </ul> <p>\u6709\u4e00\u4e2a\u5c5e\u6027<code>value</code>,\u8fd4\u56de\u4e00\u4e2a\u679a\u4e3e<code>RetentionPolicy</code> \u7c7b\u578b\uff0c\u67093\u79cd\u7c7b\u578b\uff1a</p> <ul> <li>RetentionPolicy.SOURCE: \u6ce8\u89e3\u4fe1\u606f\u53ea\u4fdd\u7559\u5728\u6e90\u4ee3\u7801\u4e2d\uff0c\u7f16\u8bd1\u5668\u7f16\u8bd1\u6e90\u7801\u65f6\u4f1a\u5c06\u5176\u76f4\u63a5\u4e22\u5f03\u3002</li> <li>RetentionPolicy.CLASS: \u6ce8\u89e3\u4fe1\u606f\u4fdd\u7559\u5728<code>class</code>\u6587\u4ef6\u4e2d\uff0c\u4f46\u662f\u865a\u62df\u673a<code>VM</code>\u4e0d\u4f1a\u6301\u6709\u5176\u4fe1\u606f\u3002</li> <li>RetentionPolicy.RUNTIME\uff1a\u6ce8\u89e3\u4e0d\u4ec5\u88ab\u4fdd\u5b58\u5230class\u6587\u4ef6\u4e2d\uff0cjvm\u52a0\u8f7dclass\u6587\u4ef6\u4e4b\u540e\uff0c\u4ecd\u7136\u5b58\u5728\uff1b</li> </ul> <p><code>java     @Documented     @Retention(RetentionPolicy.RUNTIME)     @Target(ElementType.ANNOTATION_TYPE)     public @interface Retention {         RetentionPolicy value();     }</code></p> <ul> <li>@Target\uff1a\u8bf4\u660e\u4e86\u6ce8\u89e3(Annotation)\u6240\u4fee\u9970\u7684\u5bf9\u8c61\u8303\u56f4\u3002\u6ce8\u89e3\u53ef\u88ab\u7528\u4e8e packages\u3001types\uff08\u7c7b\u3001\u63a5\u53e3\u3001\u679a\u4e3e\u3001Annotation\u7c7b\u578b\uff09\u3001\u7c7b\u578b\u6210\u5458\uff08\u65b9\u6cd5\u3001\u6784\u9020\u65b9\u6cd5\u3001\u6210\u5458\u53d8\u91cf\u3001\u679a\u4e3e\u503c\uff09\u3001\u65b9\u6cd5\u53c2\u6570\u548c\u672c\u5730\u53d8\u91cf\uff08\u5982\u5faa\u73af\u53d8\u91cf\u3001catch\u53c2\u6570\uff09\uff0c\u800c\u8be5\u5143\u6ce8\u89e3\u58f0\u660e\u4e86\u66f4\u6e05\u6670\u7684\u4f7f\u7528\u8303\u56f4\u3002</li> </ul> <p>\u6709\u4e00\u4e2a\u679a\u4e3e\u6570\u7ec4\u5c5e\u6027<code>ElementType</code>\uff0c\u6709\u4ee5\u4e0b\u51e0\u79cd\u7c7b\u578b\uff1a</p> <ul> <li>TYPE\uff1a\u7528\u4e8e\u63cf\u8ff0\u7c7b\u3001\u63a5\u53e3(\u5305\u62ec\u6ce8\u89e3\u7c7b\u578b) \u6216enum\u58f0\u660e</li> <li>FIELD\uff1a\u7528\u4e8e\u63cf\u8ff0\u5c5e\u6027</li> <li>METHOD\uff1a\u7528\u4e8e\u63cf\u8ff0\u65b9\u6cd5</li> <li>PARAMETER\uff1a \u7528\u4e8e\u63cf\u8ff0\u53c2\u6570</li> <li>CONSTRUCTOR\uff1a \u7528\u4e8e\u63cf\u8ff0\u6784\u9020\u5668</li> <li>LOCAL_VARIABLE\uff1a\u7528\u4e8e\u63cf\u8ff0\u5c40\u90e8\u53d8\u91cf </li> <li>ANNOTATION_TYPE\uff1a\u7528\u4e8e\u63cf\u8ff0\u6ce8\u89e3\u7c7b\u578b</li> <li>PACKAGE\uff1a \u7528\u4e8e\u63cf\u8ff0\u5305 </li> <li>TYPE_PARAMETER(Java8 \u65b0\u589e)\uff1a \u7528\u6765\u6807\u6ce8\u7c7b\u578b\u53c2\u6570</li> <li>TYPE_USE(Java8 \u65b0\u589e)\uff1a\u80fd\u6807\u6ce8\u4efb\u4f55\u7c7b\u578b\u540d\u79f0</li> </ul> <p><code>java   @Documented   @Retention(RetentionPolicy.RUNTIME)   @Target(ElementType.ANNOTATION_TYPE)   public @interface Target {       ElementType[] value();   }s s s s s s s s s s s s s s s s s s s s s s s s s s s s</code></p> <ul> <li> <p>@Documented\uff1a\u8868\u660e\u8fd9\u4e2a\u6ce8\u89e3\u5e94\u8be5\u88ab javadoc\u5de5\u5177\u8bb0\u5f55. \u9ed8\u8ba4\u60c5\u51b5\u4e0b,javadoc\u662f\u4e0d\u5305\u62ec\u6ce8\u89e3\u7684. \u4f46\u5982\u679c\u58f0\u660e\u6ce8\u89e3\u65f6\u6307\u5b9a\u4e86 @Documented,\u5219\u5b83\u4f1a\u88ab javadoc \u4e4b\u7c7b\u7684\u5de5\u5177\u5904\u7406, \u6240\u4ee5\u6ce8\u89e3\u7c7b\u578b\u4fe1\u606f\u4e5f\u4f1a\u88ab\u5305\u62ec\u5728\u751f\u6210\u7684\u6587\u6863\u4e2d\uff0c\u662f\u4e00\u4e2a\u6807\u8bb0\u6ce8\u89e3\uff0c\u6ca1\u6709\u6210\u5458\u3002</p> </li> <li> <p>@Inherited\uff1a\u5176\u8ba9\u88ab\u4fee\u9970\u7684\u6ce8\u89e3\u62e5\u6709\u88ab\u7ee7\u627f\u7684\u80fd\u529b\u3002\u6bd4\u5982\u4e00\u4e2a\u6ce8\u89e3\u62e5\u6709\u5143\u6ce8\u89e3@Inherited\uff0c\u5f53\u5b83\u4fee\u9970\u7684\u7c7b\u88ab\u7ee7\u627f\u65f6\uff0c\u5b83\u7684\u5b50\u7c7b\u4e5f\u5c31\u62e5\u6709\u4e86\u8be5\u6ce8\u89e3\u3002</p> </li> </ul> <p>```java   @Inherited   @Target(ElementType.TYPE)   @Retention(RetentionPolicy.RUNTIME)   public @interface InAnnotation{   }</p> <p>@InAnnotation   class Base{}   //Son\u6b64\u65f6\u4e5f\u7ee7\u627f\u4e86\u6ce8\u89e3@InAnnotation   class Son extends Base{}   ```</p> <ul> <li>@Repeatable \uff1a\u4f7f\u62e5\u6709@Repeatable\u6ce8\u89e3\u53ef\u4ee5\u91cd\u590d\u7684\u6ce8\u89e3\u5728\u67d0\u4e00\u4e2a\u7a0b\u5e8f\u5143\u7d20\u3002\u5373\u5148\u5efa\u7acbItem\u6ce8\u89e3\uff0c\u518d\u5efa\u7acbList\u6ce8\u89e3\uff0cItem\u6ce8\u89e3\u9700\u8981\u58f0\u660e@Repeatable\u3002</li> </ul> <p>```java   //item\u6ce8\u89e3   @Target(ElementType.METHOD)   @Retention(RetentionPolicy.RUNTIME)   @Repeatable(Values.class)   public @interface Value {       String value() default \"value\";   }   //list\u6ce8\u89e3   @Target(ElementType.METHOD)   @Retention(RetentionPolicy.RUNTIME)   public @interface Values {     //\u8fd9\u4e2avalue\u7c7b\u578b\u65f6item\u6ce8\u89e3       Value[] value();   }   //\u4f7f\u7528\uff0c\u4e00\u5b9a\u8981\u5199list\u6ce8\u89e3\uff0c\u5728\u5904\u7406\u65f6\uff0c\u4f1a\u5c06\u5176\u6309List\u6ce8\u89e3\u5904\u7406   public class AnnotationClass {</p> <pre><code>  @Value(\"hello\")\n  @Value(\"world\")\n  public void test(String var1, String var2) {\n      System.out.println(var1 + \" \" + var2);\n  }\n</code></pre> <p>}   ```</p> <ul> <li>@Native\uff1a\u6307\u5b9a\u5b57\u6bb5\u662f\u4e00\u4e2a\u5e38\u91cf\uff0c\u5176\u503c\u5f15\u7528native code\u3002\u8868\u793a\u8fd9\u4e2a\u53d8\u91cf\u53ef\u4ee5\u88ab\u672c\u5730\u4ee3\u7801\u5f15\u7528\u3002\uff08\u4e0d\u5e38\u7528\uff09</li> </ul>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/#_5","title":"\u81ea\u5b9a\u4e49\u6ce8\u89e3","text":"<ul> <li>\u6ce8\u89e3\u683c\u5f0f</li> </ul> <p>public @interface \u6ce8\u89e3\u540d {\u5b9a\u4e49\u4f53}</p> <p>\u6ce8\u89e3\u53c2\u6570\u7684\u53ef\u652f\u6301\u6570\u636e\u7c7b\u578b\uff1a</p> <p>1.\u6240\u6709\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff08int,float,boolean,byte,double,char,long,short) \u3000\u3000\u3000\u30002.String\u7c7b\u578b \u3000\u3000\u3000\u30003.Class\u7c7b\u578b \u3000\u3000\u3000\u30004.enum\u7c7b\u578b \u3000\u3000\u3000\u30005.Annotation\u7c7b\u578b \u3000\u3000\u3000\u30006.\u4ee5\u4e0a\u6240\u6709\u7c7b\u578b\u7684\u6570\u7ec4</p> <pre><code>//\u65e0\u53c2\u6570\n@Target(ElementType.METHOD)//\u53ea\u80fd\u5e94\u7528\u4e8e\u65b9\u6cd5\u4e0a\u3002\n@Retention(RetentionPolicy.RUNTIME)//\u4fdd\u5b58\u5230\u8fd0\u884c\u65f6\npublic @interface Test {\n}\n//\u6709\u53c2\u6570\n@Target(ElementType.TYPE)//\u53ea\u80fd\u5e94\u7528\u4e8e\u7c7b\u578b\u4e0a\uff0c\u5305\u62ec\u7c7b\uff0c\u63a5\u53e3\u3002\n@Retention(RetentionPolicy.RUNTIME)//\u4fdd\u5b58\u5230\u8fd0\u884c\u65f6\npublic @interface Table {\n    String name() default \"\";\n}\n</code></pre> <ul> <li>\u4f7f\u7528\u6ce8\u89e3</li> </ul> <p>\u4f7f\u7528APT\u901a\u8fc7\u53cd\u5c04\u8bfb\u53d6\u6ce8\u89e3\uff0c\u5904\u7406\u6ce8\u89e3\u3002\u8be5\u65b9\u5f0f\u4e3a\u8fd0\u884c\u65f6\u5904\u7406\u6ce8\u89e3\u7684\u65b9\u5f0f\u3002</p> <p>\u5728java.lang.reflect \u53cd\u5c04\u5305\u4e0b\u5b58\u5728\u4e00\u4e2a\u53ebAnnotatedElement\u63a5\u53e3\uff0c\u5176\u8868\u793a\u7a0b\u5e8f\u4e2d\u53ef\u4ee5\u63a5\u53d7\u6ce8\u89e3\u7684\u7a0b\u5e8f\u5143\u7d20\uff0c\u4f8b\u5982 \u7c7b\uff0c\u65b9\u6cd5\uff0c\u5b57\u6bb5\uff0c\u6784\u9020\u51fd\u6570\uff0c\u5305\u7b49\u7b49\u3002\u800cJava\u4e3a\u4f7f\u7528\u53cd\u5c04\u7684\u4e3b\u8981\u7c7b\u5b9e\u73b0\u4e86\u6b64\u63a5\u53e3\uff0c\u5982\u53cd\u5c04\u5305\u5185\u7684Constructor\u7c7b\u3001Field\u7c7b\u3001Method\u7c7b\u3001Package\u7c7b\u548cClass\u7c7b\u3002\u5b9e\u73b0\u7c7b\u662f<code>Parameter</code>\uff0c\u5e38\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <ul> <li><code>&lt;T extends Annotation&gt; T getAnnotation(Class&lt;T&gt; annotationClass);</code>  \u8fd4\u56de\u8be5\u5143\u7d20\u4e0a\u5b58\u5728\u7684\u6307\u5b9a\u7c7b\u578b\u7684\u6ce8\u89e3\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u8fd4\u56de null\u3002</li> <li> <p><code>default &lt;T extends Annotation&gt; T getDeclaredAnnotation(Class&lt;T&gt; annotationClass){}\uff1b</code>\u8fd4\u56de\u8be5\u5143\u7d20\u4e0a\u5b58\u5728\u7684\u76f4\u63a5\u4fee\u9970\u8be5\u5143\u7d20\u7684\u6307\u5b9a\u7c7b\u578b\u7684\u6ce8\u89e3\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u8fd4\u56denull\u3002</p> </li> <li> <p><code>Annotation[] getAnnotations();</code>\u8fd4\u56de\u8be5\u5143\u7d20\u4e0a\u5b58\u5728\u7684\u6240\u6709\u6ce8\u89e3\u3002</p> </li> <li><code>Annotation[] getDeclaredAnnotations();</code>\u8fd4\u56de\u8be5\u5143\u7d20\u4e0a\u5b58\u5728\u7684\u76f4\u63a5\u4fee\u9970\u8be5\u5143\u7d20\u7684\u6240\u6709\u6ce8\u89e3\u3002</li> <li><code>default &lt;T extends Annotation&gt; T[] getAnnotationsByType(Class&lt;T&gt; annotationClass){};</code>\u8fd4\u56de\u4fee\u9970\u8be5\u7a0b\u5e8f\u5143\u7d20\u7684\u6307\u5b9a\u7c7b\u578b\u7684\u591a\u4e2a<code>Annotation</code>\uff0c\u6b64\u4e3aJDK8\u6dfb\u52a0\u7684<code>Repeatable</code>\u6240\u4f7f\u7528</li> </ul> <pre><code>//\u83b7\u53d6\u6ce8\u89e3\u4f7f\u7528\u5b9e\u4f8b\n\n//\u6ce8\u89e3 @Master \u548c@Shusheng\n@Repeatable(ShuShengs.class)\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\npublic @interface ShuSheng {\n  String name() default \"ben\";\n  int age();\n}\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\npublic @interface ShuShengs {\n  ShuSheng[] value();\n}\n\n//\u4f7f\u7528\u6ce8\u89e3\u7684\u7c7b Anose Annotation\n@Master\npublic class AnoBase {\n}\n\n@ShuSheng(name=\"frank\",age=18)\n@ShuSheng(age = 20)\npublic class AnnotationDemo extends AnoBase{\n}\n\npublic static  void main(String[] args){\n\n  Class&lt;?&gt; cInstance=AnnotationDemo.class;\n\n  //\u83b7\u53d6AnnotationDemo\u4e0a\u7684\u91cd\u590d\u6ce8\u89e3\n  ShuSheng[] ssAons= cInstance.getAnnotationsByType(ShuSheng.class);\n  System.out.println(\"\u91cd\u590d\u6ce8\u89e3:\"+ Arrays.asList(ssAons).toString());\n\n  //\u83b7\u53d6AnnotationDemo\u4e0a\u7684\u6240\u6709\u6ce8\u89e3\uff0c\u5305\u62ec\u4ece\u7236\u7c7b\u7ee7\u627f\u7684\n  Annotation[] allAno=cInstance.getAnnotations();\n  System.out.println(\"\u6240\u6709\u6ce8\u89e3:\"+Arrays.asList(allAno).toString());\n\n  //\u5224\u65adAnnotationDemo\u4e0a\u662f\u5426\u5b58\u5728Master\u6ce8\u89e3\n  boolean isP=cInstance.isAnnotationPresent(Master.class);\n  System.out.println(\"\u662f\u5426\u5b58\u5728Master: \"+isP);\n}\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p></p> <p>\u7531\u6b64\u53ef\u77e5\uff0c\u5728\u6ca1\u6709<code>@Inherited</code>\u65f6\uff0c\u5b50\u7c7b\u662f\u4e0d\u7ee7\u627f\u6ce8\u89e3\u7684\uff0c\u800c\u4e14item\u6ce8\u89e3\u6700\u540e\u5728\u7c7b\u4e2d\u663e\u793a\u7684\u662flist\u6ce8\u89e3\u3002</p>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/#aptannotation","title":"APT\uff1a\u8bbf\u95ee\u548c\u5904\u7406Annotation\u7684\u5de5\u5177","text":"<p>APT\u662fAnnotation-Processing-tool\u7684\u7b80\u5199\uff0c\u79f0\u4e3a\u6ce8\u89e3\u5904\u7406\u5668\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u81ea\u5b9a\u4e49\u6ce8\u89e3\u662f\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u7684\uff0c\u901a\u8fc7\u53cd\u5c04\u83b7\u53d6class\u4e0a\u7684\u6ce8\u89e3\uff0c\u5e76\u8fdb\u884c\u89e3\u6790\u5904\u7406\uff0c\u4f7f\u7528apt\u53ef\u4ee5\u8ba9\u6211\u4eec\u5728\u7f16\u8bd1\u65f6\u5904\u7406\u6ce8\u89e3\u3002</p> <p>\u6ce8\u89e3\u7684\u4e24\u79cd\u5904\u7406\u65b9\u5f0f\uff1b</p> <ul> <li>\u8fd0\u884c\u65f6\u83b7\u53d6\u5e76\u4f7f\u7528\u6ce8\u89e3\u4fe1\u606f\uff0c\u6b64\u65b9\u5f0f\u5c5e\u4e8e\u53cd\u5c04\u8303\u7574\uff0c\u6709\u6027\u80fd\u635f\u5931\u3002\u81ea\u5b9a\u4e49\u6ce8\u89e3</li> <li>\u7f16\u8bd1\u65f6\u83b7\u53d6\u6ce8\u89e3\u4fe1\u606f\uff0c\u5e76\u636e\u6b64\u4ea7\u751fjava\u4ee3\u7801\u6587\u4ef6\uff0c\u65e0\u6027\u80fd\u635f\u5931\u3002</li> </ul>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/#android-android-annotation-processor","title":"Android \u6ce8\u89e3\u5904\u7406\u5668(Android Annotation Processor)","text":"<p>Android \u4e2d\u5e38\u7528\u7684APT\u6709ButterKnife, Dagger2\uff0cGlide\u7b49\uff0c\u53ea\u5173\u6ce8\u7b2c\u4e8c\u79cd\u6ce8\u89e3\u7684\u5904\u7406\u65b9\u5f0f\u3002</p> <p>APT\u7684\u4f7f\u7528\uff1a</p> <p>1.\u7ee7\u627fAbstractProcessor</p> <p>2.\u5b9e\u73b0Processor\u7684\u5173\u952e\u65b9\u6cd5</p> <p>3.\u6ce8\u518c\u5904\u7406\u5668</p> <ul> <li>\u624b\u52a8\u6ce8\u518c</li> <li>\u81ea\u52a8\u6ce8\u518c</li> </ul> <p>\u4eff\u7167ButterKnife\u7b80\u5355\u7684\u505a\u4e2a\u6ce8\u89e3</p> <p>ButterKnife\u7684\u7b80\u5355\u4f7f\u7528</p>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/#javapoet","title":"javapoet \u7684\u57fa\u672c\u7528\u6cd5","text":"<p>\u5f00\u6e90\u6587\u6863</p>"},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/","title":"LeetCode \u9898\u89e3","text":""},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#_1","title":"\u6570\u636e\u7ed3\u6784","text":"<p>\u6808</p> <ul> <li>155. \u6700\u5c0f\u6808 E</li> </ul> <p>\u601d\u8def\u4e00\uff1a\u7528\u94fe\u8868\u5b9e\u73b0</p> <p>\u601d\u8def\u4e8c\uff1a\u7528\u8f85\u52a9\u6808\uff0c\u5c06\u5f53\u524d\u6700\u5c0f\u503c\u7684\u6570\u636e\u5165\u8f85\u52a9\u6808\uff0c\u51fa\u6808\u7684\u65f6\u5019\u5c06\u6700\u5c0f\u503c\u548c\u8f85\u52a9\u6808\u4e00\u8d77\u51fa</p> <pre><code>public class MinStack2 {\n\n  class Node {\n    public int val;\n    public int min;\n    public Node next;\n    public  Node(){}\n    public Node(int val,Node next){\n      this.val = val;\n      this.next =next;\n    }\n\n  }\n\n  private Node head;\n\n  public MinStack2() {\n    head = null;\n  }\n\n  public void push(int val) {\n    Node temp = new Node(val,null);\n    if(head == null){\n      head = temp;\n      head.min = val;\n    } else{\n      temp.next = head;\n      temp.min = Math.min(val,head.min);\n      head = temp;\n    }\n  }\n\n  public void pop() {\n    if(head != null){\n      head = head.next;\n    }\n  }\n\n  public int top() {\n    if(head != null){\n      return  head.val;\n    }\n    return 0;\n  }\n\n  public int getMin() {\n    if(head != null){\n      return  head.min;\n    }\n    return 0;\n  }\n}\n</code></pre> <ul> <li>85. \u6700\u5927\u77e9\u5f62 H</li> </ul> <p>\u4e0d\u4f1a</p> <p>\u94fe\u8868</p> <ul> <li> <p>206. \u53cd\u8f6c\u94fe\u8868 E</p> </li> <li> <p>160. \u76f8\u4ea4\u94fe\u8868 E</p> </li> <li> <p>876. \u94fe\u8868\u7684\u4e2d\u95f4\u7ed3\u70b9 E</p> </li> <li> <p>21. \u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u94fe\u8868 E, 23. \u5408\u5e76K\u4e2a\u5347\u5e8f\u94fe\u8868 H</p> </li> <li> <p>141. \u73af\u5f62\u94fe\u8868 E, 142. \u73af\u5f62\u94fe\u8868 II M</p> </li> <li> <p>19. \u5220\u9664\u94fe\u8868\u7684\u5012\u6570\u7b2c N \u4e2a\u7ed3\u70b9 M</p> </li> <li> <p>287. \u5bfb\u627e\u91cd\u590d\u6570 M</p> </li> <li> <p>146. LRU \u7f13\u5b58\u673a\u5236 M</p> </li> </ul> <p>\u6811</p> <ul> <li>\u4e8c\u53c9\u6811\u524d\u5e8f/\u4e2d\u5e8f/\u540e\u5e8f\u904d\u5386</li> </ul> <p>\u4e3b\u8981\u662f\u9012\u5f52\u548c\u8fed\u4ee3</p> <ul> <li> <p>\u5224\u65ad\u662f\u5426\u662f\u5e73\u8861\u4e8c\u53c9\u6811</p> </li> <li> <p>\u4e8c\u53c9\u6811\u526a\u679d</p> </li> <li> <p>\u4e8c\u53c9\u6811\u67d3\u8272</p> </li> </ul> <p>\u81ea\u5e95\u5411\u4e0a\u7684\u52a8\u6001\u89c4\u5212\uff0c\u6b64\u9898\u7684\u91cd\u70b9\u5728\u4e8e\u6c42\u6700\u4f18\u89e3\uff0c\u4e0d\u5728\u4e8e\u67d3\u8272\u54ea\u4e2a\u8282\u70b9</p> <p>\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u67d3\u8272\uff1adp[i] = max(dp[i],root.val + left[j]+)</p> <p>\u610f\u601d\u662f\u9664\u4e86\u5f53\u524d\u8282\u70b9\u67d3\u8272\uff0c\u8fd8\u9700\u8981i-1\u4e2a\u8282\u70b9\uff0c\u8fed\u4ee3\u67e5\u627e\u5de6\u5b50\u6811j\u4e2a\uff0c\u53f3\u5b50\u6811i-1-j\u4e2a</p> <p>\u5982\u679c\u5f53\u524d\u8282\u70b9\u4e0d\u67d3\u8272\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u5c31\u662fdp[0] \u5de6\u5b50\u6811k\u4e2a\uff0c\u6216\u8005\u53f3\u5b50\u6811k\u4e2a\uff0c\u4f46\u662f\u56e0\u4e3a\u5de6\u53f3\u5b50\u6811\u4e0d\u4e00\u5b9a\u80fd\u8fbe\u5230k\u4e2a\uff0c\u6700\u91cd\u8981\u7684\u662f\u4e0d\u7528\u8003\u8651\u67d3\u8272\u60c5\u51b5\uff0c\u4e0d\u9700\u8981\u77e5\u9053\u5de6\u53f3\u5b50\u6811\u7684\u67d3\u8272\u60c5\u51b5\uff0c\u53ea\u8981\u603b\u4ef7\u503c\u5c31\u884c\uff0c\u4e3adp[0]=Max(Left[])+Max(right[])</p> <ul> <li> <p>112. \u8def\u5f84\u603b\u548c E, 113. \u8def\u5f84\u603b\u548c II M, 437. \u8def\u5f84\u603b\u548c III M</p> </li> <li> <p>236. \u4e8c\u53c9\u6811\u7684\u6700\u8fd1\u516c\u5171\u7956\u5148 M</p> </li> <li> <p>958. \u4e8c\u53c9\u6811\u7684\u5b8c\u5168\u6027\u68c0\u9a8c M</p> </li> <li> <p>124. \u4e8c\u53c9\u6811\u4e2d\u7684\u6700\u5927\u8def\u5f84\u548c H</p> </li> </ul> <p>\u5e73\u8861\u4e8c\u53c9\u6811</p> <ul> <li>\u57fa\u672c\u539f\u7406\u548c\u64cd\u4f5c</li> <li>\u4e3a\u4ec0\u4e48\u6709\u4e86BST\u548cAVL\u8fd8\u9700\u8981\u7ea2\u9ed1\u6811</li> </ul> <p>\u5b8c\u5168\u4e8c\u53c9\u6811</p> <ul> <li>\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u63d2\u5165</li> <li>222. \u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u8282\u70b9\u4e2a\u6570 M</li> </ul> <p>\u54c8\u5e0c\u8868</p> <p>\u5251\u6307 Offer 48. \u6700\u957f\u4e0d\u542b\u91cd\u590d\u5b57\u7b26\u7684\u5b50\u5b57\u7b26\u4e32 M</p> <p>\u524d\u7f00\u548c+\u54c8\u5e0c\u8868</p> <ul> <li>560. \u548c\u4e3aK\u7684\u5b50\u6570\u7ec4 M</li> <li>523. \u8fde\u7eed\u7684\u5b50\u6570\u7ec4\u548c M</li> </ul> <p>\u56fe</p> <ul> <li>200. \u5c9b\u5c7f\u6570\u91cf M</li> <li>\u5b57\u8282\u8df3\u52a8\u5927\u95ef\u5173</li> </ul> <p>\u5e76\u67e5\u96c6</p>"},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#_2","title":"\u67e5\u627e","text":""},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#_3","title":"\u6392\u5e8f","text":"<p>\u6700\u77ed\u8def\u5f84\u3001\u6700\u5c0f\u751f\u6210\u6811\u3001\u7f51\u7edc\u6d41\u5efa\u6a21</p>"},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#_4","title":"\u52a8\u6001\u89c4\u5212","text":"<p>\u80cc\u5305\u95ee\u9898\u3001\u6700\u957f\u5b50\u5e8f\u5217\u3001\u8ba1\u6570\u95ee\u9898</p>"},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#_5","title":"\u6a21\u5f0f\u5339\u914d","text":"<ul> <li>5. \u6700\u957f\u56de\u6587\u5b50\u4e32</li> </ul>"},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#_6","title":"\u57fa\u7840\u6280\u5de7","text":""},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#_7","title":"\u5206\u6cbb\u3001\u500d\u589e\u3001\u4e8c\u5206\u6cd5\u3001\u8d2a\u5fc3\u7b97\u6cd5","text":""},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#13","title":"1\u30013\u7684\u5e42","text":"<ul> <li>\u9898\u76ee\u63cf\u8ff0</li> </ul> <p>\u7ed9\u5b9a\u4e00\u4e2a\u6574\u6570\uff0c\u5199\u4e00\u4e2a\u51fd\u6570\u6765\u5224\u65ad\u5b83\u662f\u5426\u662f 3 \u7684\u5e42\u6b21\u65b9\u3002\u5982\u679c\u662f\uff0c\u8fd4\u56de true \uff1b\u5426\u5219\uff0c\u8fd4\u56de false \u3002</p> <p>\u6574\u6570 n \u662f 3 \u7684\u5e42\u6b21\u65b9\u9700\u6ee1\u8db3\uff1a\u5b58\u5728\u6574\u6570 x \u4f7f\u5f97 n == 3^x</p> <ul> <li>\u4e2a\u4eba\u89e3\u9898\uff1a\u8bd5\u9664\u6cd5</li> </ul> <p>\u601d\u8def\uff1a\u4e00\u76f4\u662f3\u7684\u500d\u6570\uff0c\u6700\u540e\u4e00\u4e2a\u4f59\u6570\u662f1\uff1b\u5176\u6b21\u9700\u8981\u8003\u8651\u7279\u6b8a\u60c5\u51b5\uff0c0\u4e0d\u662f\u5e42\u6b21\u65b9\u7684\u7ed3\u679c\uff0c\u867d\u7136\u5b83\u7684\u4f59\u6570\u662f0\uff0c1\u662f3^0\u7684\u7ed3\u679c\u3002</p> <p><code>java   public boolean isPowerOfThree(int n) {           if (n == 0) {               return false;           }           if (n == 1) {               return true;           }           while (n !=1) {               if (n % 3 != 0) {                   return false;               }               n = n / 3;           }           return true;       }   //\u7b80\u5199\u540e       public boolean isPowerOfThree(int n) {           while (n &gt; 0 &amp;&amp; (n % 3 == 0)) {               n = n / 3;           }           return n == 1;       }</code></p> <p>\u590d\u6742\u5ea6\u5206\u6790\uff1aT(n) = O(logn) S(n) = O(1)</p> <ul> <li>\u679a\u4e3e\uff1a\u5c06int \u8303\u56f4\u5185\u7684\u6240\u67093\u7684\u5e42\u5b58\u50a8,\u7528\u96c6\u5408set\u5224\u65ad</li> </ul> <p>```java    public boolean isPowerOfThree(int n) {               Set set = new HashSet() {                   {                       add(1);                       add(3);                       add(9);                       add(27);                       add(81);                       add(243);                       add(729);                       add(2187);                       add(6561);                       add(19683);                       add(59049);                       add(177147);                       add(531441);                       add(1594323);                       add(4782969);                       add(14348907);                       add(43046721);                       add(129140163);                       add(387420489);                       add(1162261467);                   }               }; <pre><code>          return set.contains(n);\n  }\n</code></pre> <p>```</p> <p>\u590d\u6742\u5ea6\u5206\u6790\uff1aT(n) =O(1) S(n) = O (1)</p> <ul> <li>\u7ea6\u6570\u6cd5\uff1aint\u8303\u56f4\u5185\u7684\u6700\u5927\u8d28\u6570\uff0c\u9664\u4ee5\u4efb\u4f55\u4e00\u4e2a3\u7684\u5e42\u6b21\u65b9\uff0c\u4f59\u6570\u5fc5\u4e3a0</li> </ul> <p><code>java    return n &gt; 0 &amp;&amp; 1162261467 % 3 ==0;</code></p> <p>\u590d\u6742\u5ea6\u5206\u6790\uff1aT(n) = O(1),S(n) = O(1);</p>"},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#2","title":"2\u3001\u4e24\u6570\u4e4b\u548c","text":"<p>\u9898\u76ee\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u6574\u6570\u6570\u7ec4 nums \u548c\u4e00\u4e2a\u6574\u6570\u76ee\u6807\u503c target\uff0c\u8bf7\u4f60\u5728\u8be5\u6570\u7ec4\u4e2d\u627e\u51fa \u548c\u4e3a\u76ee\u6807\u503c target  \u7684\u90a3 \u4e24\u4e2a \u6574\u6570\uff0c\u5e76\u8fd4\u56de\u5b83\u4eec\u7684\u6570\u7ec4\u4e0b\u6807\u3002</p> <p>\u4f60\u53ef\u4ee5\u5047\u8bbe\u6bcf\u79cd\u8f93\u5165\u53ea\u4f1a\u5bf9\u5e94\u4e00\u4e2a\u7b54\u6848\u3002\u4f46\u662f\uff0c\u6570\u7ec4\u4e2d\u540c\u4e00\u4e2a\u5143\u7d20\u5728\u7b54\u6848\u91cc\u4e0d\u80fd\u91cd\u590d\u51fa\u73b0\u3002</p> <p>\u4f60\u53ef\u4ee5\u6309\u4efb\u610f\u987a\u5e8f\u8fd4\u56de\u7b54\u6848\u3002</p> <ul> <li>\u65b9\u6cd5\u4e00\uff1a\u66b4\u529b\u7834\u89e3</li> </ul> <p>\u601d\u8def\uff1a\u4e24\u4e2afor \u5faa\u73af\u76f8\u52a0\u5f97\u5230\u76ee\u6807\u503c</p> <p><code>java          int []result = new int[2];          int length = nums.length;          for(int i = 0;i&lt;length;i++){              for(int j = i+1;j&lt;length;j++){                  if(target == nums[i]+nums[j]){                     result[0] = i;                     result[1] = j;                     break;                  }              }          }          return result;</code></p> <p>\u7b97\u6cd5\u590d\u6742\u5ea6\uff1aO(n^2)  \u7a7a\u95f4\u590d\u6742\u5ea6 O(1)</p> <ul> <li>\u65b9\u6cd5\u4e8c\uff1a\u54c8\u5e0c\u67e5\u627e\u5b9e\u73b0</li> </ul> <p>\u601d\u8def\uff1a\u5229\u7528\u54c8\u5e0cMap\u5b58\u50a8\u6570\u7ec4\u7684\u503c\uff0c\u901a\u8fc7\u67e5\u627e nums[i]\u548ctag\u7684\u5dee\u503c\u662f\u5426\u5b58\u5728\uff0c\u6765\u5b9e\u73b0\u6c42\u4e24\u6570\u4e4b\u548c\u7684\u4e0b\u6807.</p> <p><code>java   Map&lt;Integer,Integer&gt; map = new HashMap&lt;&gt;();           for(int i = 0;i &lt; nums.length; i++){               if(map.containsKey(target - nums[i])){                return new int[]{map.get(target - nums[i]),i};               }               map.put(nums[i],i);           }           throw new IllegalArgumentException(\"No two sum solution\");</code></p> <p>T(n) =O(n) S(n) = O(n)</p>"},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#3","title":"3\u3001\u4e24\u6570\u76f8\u52a0","text":"<p>\u7ed9\u4f60\u4e24\u4e2a \u975e\u7a7a \u7684\u94fe\u8868\uff0c\u8868\u793a\u4e24\u4e2a\u975e\u8d1f\u7684\u6574\u6570\u3002\u5b83\u4eec\u6bcf\u4f4d\u6570\u5b57\u90fd\u662f\u6309\u7167 \u9006\u5e8f \u7684\u65b9\u5f0f\u5b58\u50a8\u7684\uff0c\u5e76\u4e14\u6bcf\u4e2a\u8282\u70b9\u53ea\u80fd\u5b58\u50a8 \u4e00\u4f4d \u6570\u5b57\u3002\u8bf7\u4f60\u5c06\u4e24\u4e2a\u6570\u76f8\u52a0\uff0c\u5e76\u4ee5\u76f8\u540c\u5f62\u5f0f\u8fd4\u56de\u4e00\u4e2a\u8868\u793a\u548c\u7684\u94fe\u8868\u3002\u4f60\u53ef\u4ee5\u5047\u8bbe\u9664\u4e86\u6570\u5b57 0 \u4e4b\u5916\uff0c\u8fd9\u4e24\u4e2a\u6570\u90fd\u4e0d\u4f1a\u4ee5 0 \u5f00\u5934\u3002</p> <ul> <li>\u65b9\u6cd5\u4e00\uff1a\u4e0d\u5bf9\u9f50\u76f8\u52a0</li> </ul> <p>\u601d\u8def\uff1a1\u3001\u94fe\u8868\u4e00\u5bf9\u4e00\u76f8\u52a0,\u8f6e\u6d41\u5f80\u540e\u8d70</p> <p>\u200b         2\u3001\u8c01\u505c\u4e86\u5c31\u8ba9\u53e6\u4e00\u4e2a\u7ee7\u7eed\u8d70</p> <p>\u200b         3\u3001\u76f8\u52a0 \uff0c\u6709\u4e00\u4e2a\u6807\u5fd7\u4f4d\u5224\u65ad\u662f\u5426\u5927\u4e8e10</p> <p>\u200b         4\u3001\u5b58\u5165\u5230\u65b0\u7684\u94fe\u8868\u4e2d</p> <p>\u200b         5\u3001\u6700\u540e\u5224\u65ad\u662f\u5426\u8fd8\u6709\u8fdb\u4e00\u4f4d\uff0c\u6709\u76f4\u63a5\u5728\u65b0\u7684\u94fe\u8868\u4e2d\u52a01</p> <p>```java      //\u8fd4\u56de\u7684\u7ed3\u679c           ListNode resultAdd = new ListNode(-1,null);//\u79fb\u52a8\u4f4d           ListNode result = resultAdd;//\u7ed3\u679c\u94fe\u8868           ListNode tempNode = null;//\u4e34\u65f6\u5b58\u653e\u7ed3\u70b9           int temp;//\u4e34\u65f6\u5b58\u653e\u503c           boolean isAdd = false;//\u4e34\u65f6</p> <pre><code>      while (l1!=null||l2!=null){\n        if(l1!=null&amp;&amp;l2!=null){\n            temp = l1.val+ l2.val;\n            l1 = l1.next;\n            l2 = l2.next;\n        }else if(l2 == null){\n            temp = l1.val;\n            l1 = l1.next;\n        }else\n        {\n            temp = l2.val;\n            l2 = l2.next;\n        }\n          //\u662f\u5426\u9700\u8981\u52a01\n          if(isAdd) {\n              temp+=1;\n          }\n          //\u662f\u5426\u9700\u8981\u8fdb\u4e00\n          if(temp&gt;=10){\n              isAdd = true;\n              temp -=10;\n          }else{\n              isAdd = false;\n          }\n          //\u63d2\u5165\u5355\u94fe\u8868\n          tempNode = new ListNode(temp,null);\n\n          resultAdd.next = tempNode;\n          resultAdd = tempNode;\n      }\n      if(isAdd){\n          tempNode = new ListNode(1,null);\n          resultAdd.next = tempNode;\n      }\n      return  result.next;\n</code></pre> <p>```</p> <p>T(n) = O(n)  S(n) =O(1)</p> <p>\u8be5\u9898\u4e3b\u8981\u8003\u8651\u7684\u5c31\u662f\u4ec0\u4e48\u65f6\u5019\u8fdb\u4e00</p>"},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#4","title":"4\u3001\u65e0\u91cd\u590d\u5b57\u7b26\u7684\u6700\u957f\u5b50\u4e32","text":"<p>\u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32 <code>s</code> \uff0c\u8bf7\u4f60\u627e\u51fa\u5176\u4e2d\u4e0d\u542b\u6709\u91cd\u590d\u5b57\u7b26\u7684 \u6700\u957f\u5b50\u4e32 \u7684\u957f\u5ea6\u3002</p> <ul> <li>\u65b9\u6cd5\u4e00\uff1a\u6ed1\u52a8\u7a97\u53e3</li> </ul> <p>\u601d\u8def\u4e00\uff1a1. \u4f7f\u7528hasheset\u6765\u5224\u65ad\u5b57\u7b26\u662f\u5426\u91cd\u590d</p> <p>2.\u4e24\u4e2a\u6307\u9488\u5b9e\u73b0\u5bf9\u6700\u957f\u5b50\u4e32\u7684\u79fb\u52a8\uff0c\u5f53\u53f3\u6307\u9488\u9047\u5230\u91cd\u590d\u5b57\u7b26\u4e32\u540e\uff0c\u5c06\u5de6\u6307\u9488\u79fb\u5230\u91cd\u590d\u5b57\u7b26\u4e32</p> <p><code>bash    public int lengthOfLongestSubstring(String s) {          int result=0,rk = 0;           Set&lt;Character&gt; set = new HashSet&lt;Character&gt;();           for(int i = 0;i&lt;s.length();i++){               if(i!=0){                   //\u5de6\u6307\u9488\u79fb\u52a8\u4e00\u4e2a\uff0c\u5373\u5220\u9664\u4e00\u4e2a\u91cd\u590d\u7684                   set.remove(s.charAt(i-1));               }               //\u5c06               while(rk  &lt;s.length() &amp;&amp; !set.contains(s.charAt(rk))){                   set.add(s.charAt(rk));                   ++rk;               }              result = Math.max(result,rk-i);           }           return result;       }</code></p> <p>\u601d\u8def\u4e8c\uff1a1.\u4f7f\u7528mapset\u6765\u5224\u65ad\u5b57\u7b26\u662f\u5426\u91cd\u590d\uff0c\u5e76\u8bb0\u4f4f\u4f4d\u7f6e</p> <p>\u200b       2.\u4e24\u4e2a\u6307\u9488\u5b9e\u73b0\u5bf9\u6700\u957f\u5b50\u4e32\u7684\u79fb\u52a8\uff0c\u5f53\u53f3\u6307\u9488\u9047\u5230\u91cd\u590d\u5b57\u7b26\u4e32\u540e\uff0c\u5c06\u5de6\u6307\u9488\u901a\u8fc7map\u8bb0\u5f55\u7684\u4f4d\u7f6e\u79fb\u5230\u91cd\u590d\u5b57\u7b26\u4e32</p> <p>T(n) =O(n),S(n) = O(1)</p>"},{"location":"Java/LeetCode%20%E9%A2%98%E8%A7%A3/#5","title":"5\u3001\u5bfb\u627e\u4e24\u4e2a\u6b63\u5e8f\u6570\u7ec4\u7684\u4e2d\u4f4d\u6570","text":"<pre><code> /**\n     * \u4e8c\u5206\u6cd5\u5b9e\u73b0\n     * 1\u3001\u8003\u8651\u5c06\u4e2d\u4f4d\u6570\u7684\u4e24\u7c7b\u60c5\u51b5\u5f52\u4e00 [(m+n+1)/2 + (m+n+2)/2]/2\n     * 2\u3001\u8003\u8651\u7279\u6b8a\u60c5\u51b5 nums\u4e3anull \u6216\u4e3a\u4e00\n     * 3\u3001\u8003\u8651\u8fb9\u754c\u95ee\u9898 nums\u4e0b\u6807\n     * @param nums1\n     * @param nums2\n     * @return\n     */\n    public double findMidTwoByBin(int[] nums1,int [] nums2){\n        int numslength1 = nums1.length;\n        int numslength2 = nums2.length;\n        int left = (numslength1+ numslength2 +1)/2;\n        int right = (numslength1 + numslength2 +2)/2;\n        return (double) (findKth(nums1,0,nums2,0,left) + findKth(nums1,0,nums2,0,right))/2;\n    }\n    /**\n     * \u627e\u5230\u7b2ck\u4e2a\u503c\n     */\n    public int findKth(int [] nums1,int i,int []nums2,int j,int k){\n        if(i &gt;= nums1.length) return nums2[j+k-1];\n        if(j &gt;= nums2.length) return nums1[j+k-1];\n        if(k == 1) return Math.min(nums1[i],nums2[j]);\n        //\u4e00\u822c\u60c5\u51b5\n        int minValuenums1 = (i + k / 2 - 1) &lt; nums1.length ? nums1[i + k / 2 - 1] : Integer.MAX_VALUE;\n        int minValuenums2 = (j + k / 2 - 1) &lt; nums2.length ? nums2[j + k / 2 - 1] : Integer.MAX_VALUE;\n        if(minValuenums1 &lt; minValuenums2){\n            return  findKth(nums1,i+k/2,nums2,j,k-k/2);\n        } else{\n            return  findKth(nums1,i,nums2,j+k/2,k-k/2);\n        }\n    }\n</code></pre> <p>6.\u7528\u4e24\u4e2a\u6808\u5b9e\u73b0\u961f\u5217</p> <p>8.\u4ece\u5c3e\u5230\u5934\u6253\u5370\u94fe\u8868</p> <p>\u601d\u8def\u4e00\uff1a\u5229\u7528\u94fe\u8868\u548c\u6570\u7ec4\u7684\u5173\u7cfb</p> <pre><code>int size = 0;\nListNode temp = head;\nwhile (head.next != null) {\n  head = head.next;\n  size++;\n}\nhead = temp;\nint[] res = new int[size];\nfor (int i = size - 1; i &gt;= 0; i--) {\n  res[i] = head.val;\n  head = head.next;\n}\nreturn res;\n</code></pre> <p>\u601d\u8def\u4e8c:\u9012\u5f52 \u5148\u52a0\u6700\u540e\u56de\u6eaf\u540e\u52a0\u524d\u9762\u7684</p> <pre><code> ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;();\n    public int[] reversePrint2(ListNode head) {\n        rec(head);\n        int [] res = new int[arrayList.size()];\n        for (int i = 0; i &gt; arrayList.size(); i++) {\n            res[i] = arrayList.get(i);\n        }\n        return res;\n    }\n\n    public void rec(ListNode head){\n        if(head == null)\n            return;\n        rec(head.next);\n        arrayList.add(head.val)\n    }\n\n</code></pre> <p>\u601d\u8def\u4e09\uff1a\u5229\u7528\u6808\u5148\u8fdb\u540e\u51fa\u7684\u7279\u6027</p> <p>9.\u8ba1\u7b97\u5e03\u5c14\u4e8c\u53c9\u6811\u7684\u503c</p> <p>\u601d\u8def\uff1a\u9012\u5f52\u5b9e\u73b0 O(n)</p> <pre><code>public boolean evaluateTree(TreeNode root) {\n  if(root.val == 2){\n    return evaluateTree(root.left) || evaluateTree(root.right);\n  } else if(root.val == 3){\n    return evaluateTree(root.left) &amp;&amp; evaluateTree(root.right);\n  } else {\n    if(root.val == 0){\n      return  true;\n    } else {\n      return  false;\n    }\n  }\n}\n</code></pre>"},{"location":"LargeModel/ChatGpt%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/","title":"ChatGpt\u9884\u8bad\u7ec3\u6a21\u578b","text":"<p>InstuctGPT\u6709\u76f8\u5173\u8bba\u6587</p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p>"},{"location":"Net/Http%E5%8D%8F%E8%AE%AE/","title":"Http\u8be6\u89e3","text":""},{"location":"Net/Http%E5%8D%8F%E8%AE%AE/#_1","title":"\u8bf7\u6c42\u5934","text":""},{"location":"Net/Http%E5%8D%8F%E8%AE%AE/#content-type","title":"Content-Type","text":"<p>\u662f\u8bf7\u6c42\u5934\u4e2d\u5b9e\u9645\u53d1\u9001\u7684\u6570\u636e\u7c7b\u578b\u3002</p> <p>MediaType,\u5373\u662fInternet Media Type\uff0c\u4e92\u8054\u7f51\u5a92\u4f53\u7c7b\u578b\uff1b\u4e5f\u53eb\u505aMIME\u7c7b\u578b\uff0c\u5728Http\u534f\u8bae\u6d88\u606f\u5934\u4e2d\uff0c\u4f7f\u7528Content-Type\u6765\u8868\u793a\u5177\u4f53\u8bf7\u6c42\u4e2d\u7684\u5a92\u4f53\u7c7b\u578b\u4fe1\u606f\u3002</p> <p>\u5e38\u89c1\u7684\u5a92\u4f53\u683c\u5f0f\u7c7b\u578b\u5982\u4e0b\uff1a</p> <ul> <li> <p>text/html \uff1a HTML\u683c\u5f0f</p> </li> <li> <p>text/plain \uff1a\u7eaf\u6587\u672c\u683c\u5f0f   </p> </li> <li> <p>text/xml \uff1a XML\u683c\u5f0f</p> </li> <li> <p>image/gif \uff1agif\u56fe\u7247\u683c\u5f0f  </p> </li> <li> <p>image/jpeg \uff1ajpg\u56fe\u7247\u683c\u5f0f </p> </li> <li> <p>image/png\uff1apng\u56fe\u7247\u683c\u5f0f</p> </li> </ul> <p>\u4ee5application\u5f00\u5934\u7684\u5a92\u4f53\u683c\u5f0f\u7c7b\u578b\uff1a</p> <ul> <li> <p>application/xhtml+xml \uff1aXHTML\u683c\u5f0f</p> </li> <li> <p>application/xml   \uff1a XML\u6570\u636e\u683c\u5f0f</p> </li> <li> <p>application/atom+xml \uff1aAtom XML\u805a\u5408\u683c\u5f0f  </p> </li> <li> <p>application/json  \uff1a JSON\u6570\u636e\u683c\u5f0f</p> </li> <li> <p>application/pdf    \uff1apdf\u683c\u5f0f </p> </li> <li> <p>application/msword \uff1a Word\u6587\u6863\u683c\u5f0f</p> </li> <li> <p>application/octet-stream \uff1a \u4e8c\u8fdb\u5236\u6d41\u6570\u636e\uff08\u5982\u5e38\u89c1\u7684\u6587\u4ef6\u4e0b\u8f7d\uff09</p> </li> <li> <p>application/x-www-form-urlencoded \uff1a \u4e2d\u9ed8\u8ba4\u7684encType\uff0cform\u8868\u5355\u6570\u636e\u88ab\u7f16\u7801\u4e3akey/value\u683c\u5f0f\u53d1\u9001\u5230\u670d\u52a1\u5668\uff08\u8868\u5355\u9ed8\u8ba4\u7684\u63d0\u4ea4\u6570\u636e\u7684\u683c\u5f0f\uff09 <p>\u53e6\u5916\u4e00\u79cd\u5e38\u89c1\u7684\u5a92\u4f53\u683c\u5f0f\u662f\u4e0a\u4f20\u6587\u4ef6\u4e4b\u65f6\u4f7f\u7528\u7684\uff1a</p> <ul> <li>multipart/form-data \uff1a \u9700\u8981\u5728\u8868\u5355\u4e2d\u8fdb\u884c\u6587\u4ef6\u4e0a\u4f20\u65f6\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u8be5\u683c\u5f0f</li> </ul>"},{"location":"Net/Http%E5%8D%8F%E8%AE%AE/#_2","title":"\u8bf7\u6c42\u62a5\u6587","text":"<p>http1.1 \u7531\u8bf7\u6c42\u884c\u3001\u8bf7\u6c42\u5934\u548c\u8bf7\u6c42\u5b9e\u4f53\u4e09\u90e8\u5206\u7ec4\u6210\u3002</p> <p>\u7c7b\u578b\u7684\u4f7f\u7528\u5730\u65b9</p> <ul> <li>ENTITY_TYPE_STRING</li> </ul> \u7c7b\u540d#\u65b9\u6cd5\u540d FeedReadTimeReportActivity#initIntent\uff08\uff09 <ul> <li>ENTITY_TYPE_FORM_URLENCODED</li> </ul> <p>\u6709\u4e09\u5341\u591a\u5904</p> <ul> <li>ENTITY_TYPE_BYTE_STREAM</li> </ul> \u7c7b\u540d#\u65b9\u6cd5\u540d FileUploadParam#createPostRequestBundle() UploadFileSendParam#createPostRequestBundle() <ul> <li>ENTITY_TYPE_BYTE_ARRAY</li> </ul> \u7c7b\u540d#\u65b9\u6cd5\u540d UploadAppInfosParam#createPostRequestBundle() HttpSender#initClient <ul> <li>ENTITY_TYPE_APPLICATION_JSON</li> </ul> \u7c7b\u540d#\u65b9\u6cd5\u540d VideoMachineRequest#createPostRequestBundle() <ul> <li>ENTITY_TYPE_MULTIPART</li> </ul> \u7c7b\u540d#\u65b9\u6cd5\u540d FileSender#initClient()"},{"location":"Python/Python%20%E6%95%99%E7%A8%8B/","title":"Python \u6559\u7a0b","text":"<p>Python \u6559\u7a0b</p> <p>\u6d4b\u8bd5git ignore</p> <p>\u5b66\u4e60\u76ee\u7684</p> <ol> <li>\u4e86\u89e3\u57fa\u672c\u8bed\u6cd5\u548c\u4f7f\u7528\u7279\u6027</li> <li>\u81ea\u52a8\u5316\u6d4b\u8bd5Case</li> <li>FastBIOT</li> <li>\u53ef\u89c6\u5316\u5de5\u5177&amp;&amp;\u7b97\u6cd5</li> </ol> <p>1\u3001\u914d\u7f6e\u73af\u5883</p> <p>\u4e0b\u8f7dpython\u548c\u5728VScode\u4e0b\u8f7dpython\u63d2\u4ef6</p> <p>2\u3001pip. python\u7b2c\u4e09\u65b9\u5305\u7684\u7ba1\u7406\u5de5\u5177</p> <pre><code>#python3 \u4e0b\u8f7dpip\ncurl https://bootstrap.pypa.io/get-pip.py | python3\n#\u66f4\u65b0pip\npip install --upgrade pip\n</code></pre> <ul> <li>\u66f4\u65b0pip\u6e90</li> </ul> <pre><code>\n</code></pre>"},{"location":"Python/Python%20%E6%95%99%E7%A8%8B/#_1","title":"\u8bed\u6cd5","text":""},{"location":"Python/Python%20%E6%95%99%E7%A8%8B/#_2","title":"\u51fd\u6570","text":"<p>\u5fc5\u9009\u53c2\u6570(\u4e5f\u53ef\u79f0\u4e3a\u4f4d\u7f6e\u53c2\u6570)</p> <p>\u5fc5\u987b\u4f20\u5165\u7684\u53c2\u6570\u7684\u503c</p> <p>\u5b9a\u4e49\u9ed8\u8ba4\u53c2\u6570</p> <p>\u9ed8\u8ba4\u53c2\u6570\u5fc5\u987b\u6307\u5411\u4e0d\u53d8\u7684\u5bf9\u8c61</p> <p>\u53ef\u53d8\u53c2\u6570</p> <p>\u5728\u53c2\u6570\u524d\u6dfb\u52a0*,\u53ef\u53d8\u53c2\u6570\u5141\u8bb8\u4f60\u4f20\u51650\u4e2a\u6216\u4efb\u610f\u4e2a\u53c2\u6570\uff0c\u8fd9\u4e9b\u53ef\u53d8\u53c2\u6570\u5728\u51fd\u6570\u8c03\u7528\u65f6\u81ea\u52a8\u7ec4\u88c5\u4e3a\u4e00\u4e2atuple\u3002</p> <pre><code>def calc(*numbers):\n    sum = 0\n    for n in numbers:\n        sum = sum + n * n\n    return sum\n\n#\u4f7f\u7528\u7ed3\u679c  \n&gt;&gt;&gt; calc(1, 2)\n5\n&gt;&gt;&gt; calc()\n0\n</code></pre> <p>\u5173\u952e\u5b57\u53c2\u6570</p> <p>\u5173\u952e\u5b57\u53c2\u6570\u5141\u8bb8\u4f60\u4f20\u51650\u4e2a\u6216\u4efb\u610f\u4e2a\u542b\u53c2\u6570\u540d\u7684\u53c2\u6570\uff0c\u8fd9\u4e9b\u5173\u952e\u5b57\u53c2\u6570\u5728\u51fd\u6570\u5185\u90e8\u81ea\u52a8\u7ec4\u88c5\u4e3a\u4e00\u4e2adict</p> <pre><code>def person(name, age, **kw):\n    print('name:', name, 'age:', age, 'other:', kw)\n\n&gt;&gt;&gt; extra = {'city': 'Beijing', 'job': 'Engineer'}\n&gt;&gt;&gt; person('Jack', 24, city=extra['city'], job=extra['job'])\nname: Jack age: 24 other: {'city': 'Beijing', 'job': 'Engineer'} \n</code></pre> <p>\u547d\u540d\u5173\u952e\u5b57\u53c2\u6570</p> <p>\u4e3a\u4e86\u9650\u5236\u5173\u952e\u5b57\u53c2\u6570\u7684key\u503c</p> <pre><code>def person(name, age, *, city, job):\n    print(name, age, city, job)\n#\u5173\u952e\u5b57\u53c2\u6570**kw\u4e0d\u540c\uff0c\u547d\u540d\u5173\u952e\u5b57\u53c2\u6570\u9700\u8981\u4e00\u4e2a\u7279\u6b8a\u5206\u9694\u7b26*\uff0c*\u540e\u9762\u7684\u53c2\u6570\u88ab\u89c6\u4e3a\u547d\u540d\u5173\u952e\u5b57\u53c2\u6570\u3002\n</code></pre> <pre><code>#\u5982\u679c\u51fd\u6570\u5b9a\u4e49\u4e2d\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a\u53ef\u53d8\u53c2\u6570\uff0c\u540e\u9762\u8ddf\u7740\u7684\u547d\u540d\u5173\u952e\u5b57\u53c2\u6570\u5c31\u4e0d\u518d\u9700\u8981\u4e00\u4e2a\u7279\u6b8a\u5206\u9694\u7b26*\u4e86\uff1a\ndef person(name, age, *args, city, job):\n    print(name, age, args, city, job)\n</code></pre> <pre><code>#\u547d\u540d\u5173\u952e\u5b57\u53c2\u6570 \u53ef\u4ee5\u6dfb\u52a0\u9ed8\u8ba4\u53c2\u6570\uff0c\u7b80\u5316\u8c03\u7528\ndef person(name, age, *, city='Beijing', job):\n    print(name, age, city, job)\n</code></pre> <p>\u53c2\u6570\u7ec4\u5408</p> <p>\u5b9a\u4e49\u7684\u987a\u5e8f\u5fc5\u987b\u662f\uff1a\u5fc5\u9009\u53c2\u6570\u3001\u9ed8\u8ba4\u53c2\u6570\u3001\u53ef\u53d8\u53c2\u6570\u3001\u547d\u540d\u5173\u952e\u5b57\u53c2\u6570\u548c\u5173\u952e\u5b57\u53c2\u6570\u3002</p> <p>\u6700\u795e\u5947\u7684\uff1a\u5bf9\u4e8e\u4efb\u610f\u51fd\u6570\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7\u7c7b\u4f3c <code>func(*args, **kw)</code>\u7684\u5f62\u5f0f\u8c03\u7528\u5b83\uff0c\u65e0\u8bba\u5b83\u7684\u53c2\u6570\u662f\u5982\u4f55\u5b9a\u4e49\u7684\u3002</p> <pre><code>def f1(a, b, c=0, *args, **kw):\n    print('a =', a, 'b =', b, 'c =', c, 'args =', args, 'kw =', kw)\n\ndef f2(a, b, c=0, *, d, **kw):\n    print('a =', a, 'b =', b, 'c =', c, 'd =', d, 'kw =', kw)\n\n&gt;&gt;&gt; args = (1, 2, 3, 4)\n&gt;&gt;&gt; kw = {'d': 99, 'x': '#'}\n&gt;&gt;&gt; f1(*args, **kw)\na = 1 b = 2 c = 3 args = (4,) kw = {'d': 99, 'x': '#'}\n</code></pre>"}]}