
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="个人技术wiki">
      
      
        <meta name="author" content="Zq">
      
      
      
        <link rel="prev" href="../14%20Service/">
      
      
        <link rel="next" href="../17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>Android 常用业务功能 - ZqAndroid</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4b4a2bd9.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#15-android" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="ZqAndroid" class="md-header__button md-logo" aria-label="ZqAndroid" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ZqAndroid
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Android 常用业务功能
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ZqAndroid" class="md-nav__button md-logo" aria-label="ZqAndroid" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ZqAndroid
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Android
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Android
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../1%E5%AE%89%E5%8D%93%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 初识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../2Android%E5%A4%A7%E7%BA%B2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 大纲
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../1Acticity%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity 启动流程和启动模式源码解析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../1Activity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../2Boradcast%20Receiver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Broadcast Receiver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../3Service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../3View%E6%8E%A7%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    View控件和布局
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../4%E5%A4%9A%E5%AA%92%E4%BD%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多媒体
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../4ContentProvider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ContentProvider
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../5Android%20%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6%E2%80%94%E2%80%94Handler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 的消息传递机制——Handler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../5Application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../6Android%20Lint%20%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android Lint ——代码优化的扫描工具
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../7Android%20%E6%9D%82%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 杂记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../8Android%E6%B7%B7%E6%B7%86%E2%80%94%E2%80%94proguard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android混淆——proguard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../9%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F%28%E6%B7%B1%E8%89%B2%E4%B8%BB%E9%A2%98%29%E9%80%82%E9%85%8D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    暗黑模式(深色主题)适配
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../10Android%20Crash%20%E5%88%86%E6%9E%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android Crash 分析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../11%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设计模式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../12%20Otto%E5%BA%93%E3%80%81IPCOtto%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Otto库、IPCOtto库的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../13%20Gradle%20%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gradle 构建工具的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../14%20Service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Android 常用业务功能
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Android 常用业务功能
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1alarmanager" class="md-nav__link">
    1.AlarManager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2action" class="md-nav__link">
    2.常用的Action
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3android" class="md-nav__link">
    3.Android 定位的原理
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    位置信息使用权的类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gps" class="md-nav__link">
    GPS 定位
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    网络定位
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    基站定位
  </a>
  
    <nav class="md-nav" aria-label="基站定位">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    基站定位信息获取
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wifi" class="md-nav__link">
    Wifi定位
  </a>
  
    <nav class="md-nav" aria-label="Wifi定位">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wifi_1" class="md-nav__link">
    Wifi的相关概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wifi_2" class="md-nav__link">
    wifi信息的获取和使用
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    混合定位
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agps" class="md-nav__link">
    AGPS定位
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android-moke" class="md-nav__link">
    Android Moke位置
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android" class="md-nav__link">
    Android 沉浸式(全屏功能实现)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android-asyncinflater" class="md-nav__link">
    Android AsyncInflater
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jetpacket基础学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../18%20RxJAVA%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RxJAVA 基础知识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../19%20%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    音视频开发
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../20%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    性能优化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../21Gson%E4%BD%BF%E7%94%A8%E5%92%8C%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gson使用和源码解析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../22%20Kotlin%20%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotlin 语法入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../23%20OkDownLoad%20%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OkDownLoad 使用教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../24%20%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自动化测试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../25%20Apk%E5%A4%A7%E5%B0%8F%E4%BC%98%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apk大小优化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../26%20AOSP%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AOSP源码学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../27%20JNI%20%E5%92%8C.SO%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JNI 和.SO入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../28%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%96%B9%E6%A1%88%E5%A4%84%E7%90%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内存泄漏方案处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../29%20Room%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Room数据库的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../30.%E7%BD%91%E7%BB%9C%E6%95%B4%E7%90%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络整理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../31.%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    鸿蒙开发
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../33Android%20%E8%B5%84%E6%BA%90%E8%AF%A6%E8%A7%A3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 资源详解
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../34Compose%E7%9A%84%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compose的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A8%A1%E5%9D%97%E9%97%B4%E9%80%9A%E4%BF%A1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    模块间通信
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%B5%8C%E5%A5%97%E6%BB%91%E5%8A%A8%E9%80%A0%E6%88%90%E7%9A%84%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%81%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    嵌套滑动造成的滑动冲突原理分析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../32%E8%87%AA%E5%AE%9A%E4%B9%89View/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自定义View
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Android%20%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 问题总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Android%20Demo%20%20200/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android Demo  200
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Android%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android工具使用教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../AppBarLayout%E7%9A%84%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AppBarLayout的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../ContentProvider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ContentProvider
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Fragment%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fragment的知识点
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Plugin%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugin 插件开发
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    前端
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            前端
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E7%AB%AF/%E8%B7%A8%E7%AB%AF%E7%BB%8F%E9%AA%8C%E5%BC%80%E5%8F%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    跨端经验开发
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E7%AB%AF/css/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    css
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E7%AB%AF/Preact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preact
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E7%AB%AF/Vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vue
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数据结构
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            数据结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1%E7%BB%AA%E8%AE%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1绪论
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DevTools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            DevTools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../DevTools/docker%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../DevTools/Easy-Make本地搭建.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Easy-Make本地搭建
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../DevTools/%E5%8F%8D%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%92%8C%E6%80%BB%E7%BB%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    反编译工具使用和总结
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Flutter
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Flutter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Flutter/Base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Java
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/JAVA%20%E7%BA%BF%E7%A8%8B%E8%AF%A6%E8%A7%A3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JAVA 线程详解
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java基础学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/Java%E5%BC%82%E5%B8%B8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java异常
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/Java%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java注解（Annotation）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/LeetCode%20%E9%A2%98%E8%A7%A3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LeetCode 题解
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Net
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Net
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Net/Http%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Http协议
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Python/Python%20%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python 教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ReadNotes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            ReadNotes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ReadNotes/Coding%20Easy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coding Easy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SoftwareExam
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            SoftwareExam
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../SoftwareExam/%E5%B1%82%E6%AC%A1%E5%BC%8F%E6%9E%B6%E6%9E%84%E8%8C%83%E6%96%87/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    层次式架构范文
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../SoftwareExam/software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    software
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Spring-Boot
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Spring-Boot
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring-Boot/Spring-Boot%20%E6%A1%86%E6%9E%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring-Boot 框架
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Tools/common%20tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1alarmanager" class="md-nav__link">
    1.AlarManager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2action" class="md-nav__link">
    2.常用的Action
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3android" class="md-nav__link">
    3.Android 定位的原理
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    位置信息使用权的类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gps" class="md-nav__link">
    GPS 定位
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    网络定位
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    基站定位
  </a>
  
    <nav class="md-nav" aria-label="基站定位">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    基站定位信息获取
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wifi" class="md-nav__link">
    Wifi定位
  </a>
  
    <nav class="md-nav" aria-label="Wifi定位">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wifi_1" class="md-nav__link">
    Wifi的相关概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wifi_2" class="md-nav__link">
    wifi信息的获取和使用
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    混合定位
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agps" class="md-nav__link">
    AGPS定位
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android-moke" class="md-nav__link">
    Android Moke位置
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android" class="md-nav__link">
    Android 沉浸式(全屏功能实现)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android-asyncinflater" class="md-nav__link">
    Android AsyncInflater
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="15-android">15 Android 常用业务功能</h1>
<h2 id="1alarmanager">1.AlarManager</h2>
<blockquote>
<p>AlarmManager 可以按照”预先设定的时间“或”时间间隔"激活Intent的一种方式，他与timer不同的是，他是程序之外的，生命周期不受程序控制，即使程序关闭也会触发。它比Service和定时器更加节省资源。如果在应用程序内触发定时操作，推荐Handler，Timer以及Thread等方式。因为这样Android能更好的控制系统资源。</p>
</blockquote>
<ul>
<li>Alerm的四个可用类型（set()方法的第一个参数）</li>
</ul>
<p>（1）RTC_WAKEUP 在指定的时间唤醒设备，并激活PendingIntent</p>
<p>（2）RTC 在指定的时间激活PendingIntent，但是不会唤醒设备</p>
<p>（3） ELAPSED_REALTIME 根据设备启动之后经过的时间激活PendingIntent，但是不会唤醒设备，经过的时间包含设备休眠的所有时间</p>
<p>（4）ELAPSED_REALTIME_WAKEUP 在设备启动并经过指定的时间之后激活PendingIntent和唤醒设备。</p>
<ul>
<li>
<p>设置重复的Alarm</p>
</li>
<li>
<p>setRepeating  可以精确控制时间，比较耗电</p>
</li>
<li>
<p>setIndexactRepeating 可以减少电量的消耗，但是会同步多个没有精确指定时间间隔的Alerm.</p>
<p>INTERVAL_FIFTEEN_MINUTES（每十五分钟）</p>
<p>INTERVAL_HALF_HOUR（每隔半个小时）</p>
<p>INTERVAL_HOUR（每隔一个小时）</p>
<p>INTEVAL_HALF_DAY（每个半天）</p>
</li>
</ul>
<p>​        INTEVAL_DAY（每隔一天）</p>
<ul>
<li>set (int type, 
                  long triggerAtMillis, 
                  PendingIntent operation)</li>
</ul>
<p>Android 19之后，<code>triggerAtMillis</code>是不精确的，不会提前但可能会延迟，为了降低系统的消耗</p>
<p>代码示例：1分钟后发送广播ACTION_GET_PUSH_VALUE</p>
<pre><code class="language-java">AlarmManager alarmMng = (AlarmManager) context
                    .getSystemService(Context.ALARM_SERVICE);
            int flags = SDKAdaptationUtils.getPendingIntent31Flags(1);//Flags适配Android版本
            PendingIntent rtcIntent = PendingIntent.getBroadcast(context, 0,
                    new Intent(ACTION_GET_PUSH_VALUE), flags);
            Date t = new Date();
            t.setTime(java.lang.System.currentTimeMillis() + 60 * 1000);
            alarmMng.set(AlarmManager.RTC, t.getTime(), rtcIntent);
//取消该任务
alarmMng.cancle();
</code></pre>
<h2 id="2action">2.常用的Action</h2>
<ol>
<li><code>Intent.ACTION_BOOT_COMPLETED</code>,开机启动广播</li>
</ol>
<p><code>xml
   需要权限
   &lt;uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /&gt;
   //自定义的广播添加
   &lt;intent-filter&gt;
     &lt;action android:name="android.intent.action.BOOT_COMPLETED" /&gt;
   &lt;/intent-filter&gt;</code></p>
<p>注意：</p>
<blockquote>
<p>1.需要系统开启自启动开关，当然这个开关不是说app可以自启动了，只是可以接收开机启动广播了.</p>
<p>2.Android 8 之后说静态注册的广播不能接收系统广播，因为Android 8广播只能发送显式广播,经测试，仍然可以接收系统广播</p>
<p>3.开机广播需要开机一段时间后才能收到。  </p>
</blockquote>
<h2 id="3android">3.Android 定位的原理</h2>
<blockquote>
<p>移动端大致通过三种方式来进行设备定位：GPS、基站、wifi。</p>
</blockquote>
<p>Android中我们一般使用<code>LocationManager</code>来获取配置信息，<code>Provider</code>有：</p>
<pre><code class="language-java">public static final String NETWORK_PROVIDER = &quot;network&quot;;
public static final String GPS_PROVIDER = &quot;gps&quot;;
public static final String PASSIVE_PROVIDER = &quot;passive&quot;;
public static final String FUSED_PROVIDER = &quot;fused&quot;;
</code></pre>
<table>
<thead>
<tr>
<th>类型</th>
<th>作用</th>
<th>优缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td>GPS_PROVIDER</td>
<td>通过 GPS 来获取地理位置的经纬度信息</td>
<td>优点：获取地理位置信息精确度高； 缺点：只能在户外使用，获取经纬度信息耗时，耗电；</td>
</tr>
<tr>
<td>NETWORK_PROVIDER</td>
<td>通过移动网络的基站或者 Wi-Fi 来获取地理位置</td>
<td>优点：只要有网络，就可以快速定位，室内室外都可； 缺点：精确度不高；</td>
</tr>
<tr>
<td>PASSIVE_PROVIDER</td>
<td>被动接收更新地理位置信息，而不用自己请求地理位置信息。</td>
<td>PASSIVE_PROVIDER 返回的位置是通过其他 providers 产生的</td>
</tr>
<tr>
<td>FUSED_PROVIDER</td>
<td>依赖GMS</td>
<td>暂时在国内无法使用,目前在Android12（即android api 31）上又重新使用了起来</td>
</tr>
</tbody>
</table>
<p>打开系统定位，并允许app使用定位权限，则会获取以上Provider，关闭定位，则一个都不会获取到，低版本的能获取到PASSIVE_PROVIDER。</p>
<h2 id="_1">位置信息使用权的类型</h2>
<pre><code class="language-xml">&lt;manifest ... &gt;
  &lt;-- 前台位置信息--&gt;
  &lt;--精确定位--&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;
  &lt;--模糊定位--&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;
 &lt;-- 后台位置信息--&gt;
  &lt;!-- Required only when requesting background location access on
       Android 10 (API level 29) and higher. --&gt;
  &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;
&lt;/manifest&gt;
</code></pre>
<p>1.在API Level 29以下请求位置信息，请求前台位置信息同时会获取后台位置信息，在29以上，需要请求后台位置信息。</p>
<p>2.精确度</p>
<ul>
<li>
<p>模糊定位，在3平米以内</p>
</li>
<li>
<p>精确定位，在50米以内 </p>
</li>
</ul>
<p>精确定位的请求同时会返回模糊定位的权限，但Android 建议递增式请求位置信息。</p>
<p>3.权限组</p>
<pre><code class="language-java">public static final String LOCATION = android.permission-group.LOCATION
</code></pre>
<p>权限组的概念是为了更好的使用权限，而不需要每次去请求。</p>
<p>1.ACCESS_BACKGROUND_LOCATION——后台定位权限使用说明</p>
<ul>
<li>targetSdkVersion&lt;29时,即Android 10 以下，不区分前台和后台定位权限,申请前台位置权限，默认给予后台位置权限。</li>
<li>targetSdkVersion&gt;=29时,即Android 10及以上，至少需要有一个前台权限同意，才能申请后台定位，若两个没有，则不会展示权限申请框，默认拒绝。</li>
<li>targetSdkVersion&gt;=29时，当前台和后台权限同时申请时，选择“使用时允许”，后台定位申请会被拒绝。targetSdkVersion&gt;=30时,即Android 11及以上，取消了“始终允许”，则后台一定会被拒绝。因此先选前台，再选后台。</li>
</ul>
<p>2.ACCESS_COARSE_LOCATION&amp;&amp; ACCESS_FINE_LOCATION</p>
<p>Android 12，申请ACCESS_COARSE_LOCATION不会默认有ACCESS_FINE_LOCATION权限，但是申请ACCESS_FINE_LOCATION回默认有ACCESS_COARSE_LOCATION权限。</p>
<h2 id="gps">GPS 定位</h2>
<p>精确定位打开的情况，不会再请求打开模糊定位的权限，模糊定位的权限打开，需要精确定位的时候仍然需要申请权限打开。</p>
<p>需要打开App Gps 定位，使用LocationManager 定位,会在Listener中收到Location,</p>
<pre><code class="language-java">LocationManager.requestLocationUpdates()
</code></pre>
<h2 id="_2">网络定位</h2>
<p>需要权限</p>
<pre><code class="language-xml">&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;
</code></pre>
<p>同Gps定位，需要获取NETWORK_PROVIDER</p>
<blockquote>
<p>原理：Android 提供的位置服务，利用位置服务器进行定位</p>
</blockquote>
<h2 id="_3">基站定位</h2>
<p>通过TelephonyManager我们可以拿到基站信息，再通过相关的api接口就能得到经纬度，但是基站定位精度很差。</p>
<p>基站信息包含如下：</p>
<blockquote>
<p>MCC，Mobile Country Code，移动国家代码（中国的为460）；
MNC，Mobile Network Code，移动网络号码（中国移动为00，中国联通为01）；
LAC，Location Area Code，位置区域码；
CID，Cell Identity，基站编号，是个16位的数据（范围是0到65535）。</p>
<p>以下是CDMA独有的信息</p>
<p>SID, 无线系统ID</p>
<p>NID,Network id</p>
<p>BID, Basestation ID</p>
</blockquote>
<p>需要区分GSM和CDMA，IMSL：中国联通GSM系统使用01，中国移动GSM系统使用02，中国电信CDMA系统使用03。</p>
<p>获取到以上信息，通过一些公开的Api信息获取到经纬度。</p>
<h3 id="_4">基站定位信息获取</h3>
<blockquote>
<p>基站信息的获取需要开启定位服务和精确位置权限，否则无法获取基站信息。</p>
<p>低版本不需要开启服务。</p>
</blockquote>
<p>需要权限</p>
<pre><code class="language-java">&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt; dangours
</code></pre>
<p>获取卡1基站信息 </p>
<ul>
<li>TelephonyManager#getCellLocation();</li>
</ul>
<p>获取当前手机的基站位置，需要精确位置的权限。</p>
<p><code>java
  TelephonyManager mTelephonyManager = context.getSystemService(Context.TELEPHONY_SERVICE);
  CellLocation cellLocation = mTelephonyManager.getCellLocation();</code></p>
<ul>
<li>TelephonyManager#getAllCellInfo();</li>
</ul>
<p>获取当前设备的所有基站信息，需要精确位置的权限。</p>
<ul>
<li>TelephonyManagerEx#getCellLocation()</li>
</ul>
<p>通过反射获取当前设备基站的信息，可以选择卡1/卡2，需要精确位置的权限。</p>
<p><code>java
    Class&lt;?&gt; cls;
              try {
                 cls = Class.forName("com.mediatek.telephony.TelephonyManagerEx");
                 Method method1 = cls.getDeclaredMethod("getCellLocation", int.class);
                 Method method2 = cls.getDeclaredMethod("getDefault");
                 Object obj = (Object)method2.invoke(null);
                 cellLocation = (CellLocation)method1.invoke(obj, 1);  //0表示卡1，1表示卡2
              } catch (ClassNotFoundException e) {
                  e.printStackTrace();
              } catch (IllegalArgumentException e) {
                  e.printStackTrace();
              } catch (NoSuchMethodException e) {
                  e.printStackTrace();
              } catch (IllegalAccessException e) {
                  e.printStackTrace();
              } catch (InvocationTargetException e) {
                  e.printStackTrace();
              }  catch (Exception e) {
                e.printStackTrace();
            }</code></p>
<ul>
<li>ITelephony#getCellLocation()</li>
</ul>
<p>获取当前设备的基站信息，主要针对于双卡双待手机</p>
<p><code>try {
  bundle = getITelephonyBundle(mTelephonyManager);
  } catch (Exception e) {
  e.printStackTrace();
  }
  if (bundle != null) {
  backupCell = new GsmCellLocation(bundle);
  }
  private Bundle getITelephonyBundle(TelephonyManager telMgr)throws Exception {
  @SuppressLint("SoonBlockedPrivateApi")
  Method getITelephony = telMgr.getClass().getDeclaredMethod("getITelephony");
  getITelephony.setAccessible(true);
  Object iTelephony = getITelephony.invoke(telMgr);
  Method getCellLocation = iTelephony.getClass().getDeclaredMethod("getCellLocation");
  Object result = getCellLocation.invoke(iTelephony);
  return (Bundle) result;
  }</code></p>
<h2 id="wifi">Wifi定位</h2>
<p>wifi定位是通过WifiManager拿到wifi的信息，主要是wifi的BSSID（即mac地址）。然后通过一些api查询经纬度</p>
<p>比如：<a href="http://www.cellocation.com/interfac/">接口说明文档 | LBS数据仓库</a></p>
<h3 id="wifi_1">Wifi的相关概念</h3>
<ul>
<li>SAT</li>
</ul>
<blockquote>
<p>Station(站点)，是指Android访问无线网络的节点</p>
</blockquote>
<ul>
<li>AP</li>
</ul>
<blockquote>
<p>AccessPoint(接入点)，分为硬AP和软AP。</p>
<p>硬AP是指拥有独立的CPU，能独立进行数据的相关处理，是一个独立完全的模块，常见的为无线路由器。</p>
<p>软AP是指使用驱动配置称为AP模式，实现接入点的功能，包括通过 Wi-Fi 热点和仅限本地使用的 Wi-Fi 热点共享网络。</p>
</blockquote>
<ul>
<li>wifi感知对设备</li>
</ul>
<blockquote>
<p>通过 Android 8.0 中新增的 <a href="https://developer.android.google.cn/guide/topics/connectivity/wifi-aware.html">Wi-Fi 感知</a>功能，支持设备可以直接使用 Wi-Fi 感知协议发现其他设备、与其他设备互连，以及将覆盖范围扩展到其他设备。</p>
</blockquote>
<ul>
<li>WIFI直联</li>
</ul>
<blockquote>
<p><a href="https://developer.android.google.cn/guide/topics/connectivity/wifip2p.html">WLAN 直连</a>功能又称“Wi-Fi 点对点”，它允许支持设备直接使用 WLAN 直连协议发现其他设备并与之互连，无需连接到互联网或移动网络，即在不使用移动网络的情况下，使用wifi在设备之间进行数据通信。</p>
</blockquote>
<p>现在已经出现了SAT/SAT并发、SAT/AP并发和AP/AP并发，允许设备同时连接两个Wifi，实现了wifi切换时的平滑过渡，因此Android 12及以上推出了新的API 来获取wifi信息。</p>
<p>因此不使用 <code>WifiManager.getConnectionInfo()</code>，而改用 <a href="https://developer.android.google.cn/reference/android/net/ConnectivityManager.NetworkCallback#onCapabilitiesChanged(android.net.Network, android.net.NetworkCapabilities)"><code>NetworkCallback.onCapabilitiesChanged()</code></a>，以获取与用于注册 <code>NetworkCallback</code> 的 <code>NetworkRequest</code> 匹配的所有 <code>WifiInfo</code> 对象。</p>
<h3 id="wifi_2">wifi信息的获取和使用</h3>
<p>需要权限</p>
<pre><code class="language-java">&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt; normal
&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt; dangours
</code></pre>
<blockquote>
<p>需要打开wifi和打开定位服务，才能获取到连接的wifi信息，需要精确定位权限才能获取接入点列表。低版本Android 不需要定位服务</p>
<p>需要打开wifi,连不连上无所谓，在google的服务器或者其他服务器中存有你附近的wifi信息，则可以定位</p>
</blockquote>
<ul>
<li>
<p>获取连接的wifi信息</p>
</li>
<li>
<p>WifiManager#getConnectionInfo()</p>
</li>
</ul>
<p><code>java
  //Android 12 之前
  WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
  android.net.wifi.WifiInfo wifiinfo =  wifiManager.getConnectionInfo();</code></p>
<ul>
<li>NetworkCallback.onCapabilitiesChanged()</li>
</ul>
<p><code>java</code></p>
<ul>
<li>获取最近一次扫描的接入点列表</li>
</ul>
<p>WifiManager#getScanResults() 需要精确定位的权限</p>
<p><code>java
  WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
  List&lt;ScanResult&gt; oriScanResults  = wifiManager.getScanResults();</code></p>
<h2 id="_5">混合定位</h2>
<p>基于临近基站和WIFI热点的高精度混合基站定位，比单一的基站定位和wifi定位更加精确一点。</p>
<p>方案：</p>
<p>1.通过WifiManager的getScanResults函数获取扫描到的wifi列表，其中level就是信号强度，可能需要去重/</p>
<p>2.通过TelephonyManager的getAllCe.llInfo函数获得。这个函数要求minsdkverison必须在17及以上,其中mRssi就是信号强度。</p>
<h2 id="agps">AGPS定位</h2>
<p>这个与其说是一个定位方式，不如说是一种实现方案，即通过网络位置和位置服务器判断出最佳的卫星，减少获取卫星信号的时间，因为获取网络位置的速度比较快。这个是Android自带的，但是好像默认就是这种模式。</p>
<h2 id="android-moke">Android Moke位置</h2>
<p>只针对于Provider,即网络定位和Gps定位</p>
<ul>
<li>权限</li>
</ul>
<p><code>&lt;uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"
  tools:ignore="MockLocation"/&gt;</code></p>
<pre><code class="language-java">//code

</code></pre>
<h2 id="android">Android 沉浸式(全屏功能实现)</h2>
<h2 id="android-asyncinflater">Android AsyncInflater</h2>
<blockquote>
<p>在异步线程中加载xml成View,然后回到主线程直接加载View。</p>
</blockquote>
<p>使用用法：</p>
<pre><code class="language-java">  // 异步加载 xml, 在 Activity.onCreate(xxx) 里面
        new AsyncLayoutInflater(this).inflate(R.layout.activity_main, null, new AsyncLayoutInflater.OnInflateFinishedListener() {
            @Override
            public void onInflateFinished(@NonNull View view, int resid, @Nullable ViewGroup parent) {
                setContentView(view);
                Log.d(TAG, &quot;onInflateFinished: &quot;);
            }
        });

</code></pre>
<p>原理：</p>
<p>1.new AsyncLayoutInflater(Context)的操作</p>
<pre><code class="language-java"> public AsyncLayoutInflater(@NonNull Context context) {
        mInflater = new BasicInflater(context);
        mHandler = new Handler(mHandlerCallback);
        mInflateThread = InflateThread.getInstance();
    }
</code></pre>
<p>mInflater:用来渲染xml文件为view</p>
<p>mHandler:新建了一个Looper为主线程的Handler</p>
<p>mInflateThread： 新建了一个线程，InflateThread改线程为一个单例。</p>
<p>2.AsyncLayoutInflater.inflate()</p>
<pre><code class="language-java">  @UiThread
    public void inflate(@LayoutRes int resid, @Nullable ViewGroup parent,
            @NonNull OnInflateFinishedListener callback) {
        if (callback == null) {
            throw new NullPointerException(&quot;callback argument may not be null!&quot;);
        }
        InflateRequest request = mInflateThread.obtainRequest();
        request.inflater = this;
        request.resid = resid;
        request.parent = parent;
        request.callback = callback;
        mInflateThread.enqueue(request);
    }
</code></pre>
<p>新建了InflateRequest，封装了一个InflateRequest请求，包括持有AsyncLayoutInflater的引用inflater，线程绘制view的resid，回到主线程加载view的callback，然后进入到了InflateThread的请求队列中。</p>
<p>3.InflateThread绘制完后，通过handler返回到主线程</p>
<pre><code class="language-java">  private static class InflateThread extends Thread {
    // 单例 
        private static final InflateThread sInstance;
        static {
            sInstance = new InflateThread();
            sInstance.start();
        }

        public static InflateThread getInstance() {
            return sInstance;
        }

       //阻塞队列
        private ArrayBlockingQueue&lt;InflateRequest&gt; mQueue = new ArrayBlockingQueue&lt;&gt;(10);
       //同步的请求缓存池
        private SynchronizedPool&lt;InflateRequest&gt; mRequestPool = new SynchronizedPool&lt;&gt;(10);

        // Extracted to its own method to ensure locals have a constrained liveness
        // scope by the GC. This is needed to avoid keeping previous request references
        // alive for an indeterminate amount of time, see b/33158143 for details
       //这是重点，从阻塞队列中取到请求，
        public void runInner() {
            InflateRequest request;
            try {
              //1.从阻塞队列中取到请求
                request = mQueue.take();
            } catch (InterruptedException ex) {
                // Odd, just continue
                Log.w(TAG, ex);
                return;
            }

            try {
              //2.绘制成View
                request.view = request.inflater.mInflater.inflate(
                        request.resid, request.parent, false);
            } catch (RuntimeException ex) {
                // Probably a Looper failure, retry on the UI thread
                Log.w(TAG, &quot;Failed to inflate resource in the background! Retrying on the UI&quot;
                        + &quot; thread&quot;, ex);
            }
          //3.将view返回给主线程
            Message.obtain(request.inflater.mHandler, 0, request)
                    .sendToTarget();
        }

        @Override
        public void run() {
            while (true) {
                runInner();
            }
        }

    //从request中获取请求
        public InflateRequest obtainRequest() {
            InflateRequest obj = mRequestPool.acquire();
            if (obj == null) {
                obj = new InflateRequest();
            }
            return obj;
        }

        public void releaseRequest(InflateRequest obj) {
            obj.callback = null;
            obj.inflater = null;
            obj.parent = null;
            obj.resid = 0;
            obj.view = null;
            mRequestPool.release(obj);
        }

        public void enqueue(InflateRequest request) {
            try {
                mQueue.put(request);
            } catch (InterruptedException e) {
                throw new RuntimeException(
                        &quot;Failed to enqueue async inflate request&quot;, e);
            }
        }
    }

//主线程中
  private Callback mHandlerCallback = new Callback() {
        @Override
        public boolean handleMessage(Message msg) {
            InflateRequest request = (InflateRequest) msg.obj;
            if (request.view == null) {
                request.view = mInflater.inflate(
                        request.resid, request.parent, false);
            }
          //拿到View后在onInflateFinished中调用setContentView(View view)；
            request.callback.onInflateFinished(
                    request.view, request.resid, request.parent);
            mInflateThread.releaseRequest(request);
            return true;
        }
    };
</code></pre>
<p>4.AsyncInflater的原理比较简单，注意一点是有可能会内存泄漏，因为InflateThread是一个单例，它会持有Activity的引用。</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../14%20Service/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Service">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                Service
              </div>
            </div>
          </a>
        
        
          
          <a href="../17%20Jetpacket%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/" class="md-footer__link md-footer__link--next" aria-label="下一页: Jetpacket基础学习">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                Jetpacket基础学习
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.footer", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.81fa17fe.min.js"></script>
      
    
  </body>
</html>