# è£…æœºå¿…å¤‡è½¯ä»¶

[HomeBrew](#HomeBrew)

[mas](#mas)

Git 

[SSH](#SSH)

[Oh-my-zsh](# Oh-My-zsh)

[Typora](https://download.typora.io/mac/Typora-1.4.3.dmg):1.4.3ä»¥ä¸Šæ˜¯è¦æ”¶è´¹çš„

[Android Studio](#Android Studio)

[Vs code](#Vs code)

[IDEA](#IDEA)

Proxyman:ç ´è§£ç‰ˆï¼Œç›´æ¥copyè¿‡æ¥çš„

[Chrome](https://www.google.cn/intl/en_uk/chrome/)

[Clash](https://clashforwindows.me/all-clients/) 

JAVA/JDK:çœ‹IDEA

C++ 

Python

Node.js

Flutter

Harmony OS

Docker

Ollama

# [Oh-My-zsh](https://ohmyz.sh/)

> zsh çš„æ­é…å·¥å…· æä¾›å¿«æ·å¼€å‘çš„å·¥å…·                                      
>

### Basic Installation

Oh My Zsh is installed by running one of the following commands in your terminal. You can install this via the command-line with either `curl`, `wget` or another similar tool.

| Method    | Command                                                      |
| --------- | ------------------------------------------------------------ |
| **curl**  | `sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"` |
| **wget**  | `sh -c "$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"` |
| **fetch** | `sh -c "$(fetch -o - https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"` |

Alternatively, the installer is also mirrored outside GitHub. Using this URL instead may be required if you're in a country like China or India (for certain ISPs), that blocks `raw.githubusercontent.com`:

| Method    | Command                                           |
| --------- | ------------------------------------------------- |
| **curl**  | `sh -c "$(curl -fsSL https://install.ohmyz.sh/)"` |
| **wget**  | `sh -c "$(wget -O- https://install.ohmyz.sh/)"`   |
| **fetch** | `sh -c "$(fetch -o - https://install.ohmyz.sh/)"` |

ä¸€.ä¸»é¢˜

1.å®‰è£…ä¸»é¢˜

Omz ä¼šæå‰é¢„è£…ä¸€äº›Theme,ä½ç½®åœ¨`~/.oh-my-zsh/themes`,æ²¡æœ‰çš„éœ€è¦å…ˆå®‰è£…

2.é…ç½®ç¯å¢ƒå˜é‡

```zsh
vim ~/.zshrc
themes=[#åœ¨è¿™é‡Œæ·»åŠ ç›¸åº”çš„æ’ä»¶åç§°]
source ~/.zshrc
```

äºŒ.æ’ä»¶

> æ’ä»¶æ˜¯å…¶ä¸»è¦å·¥å…·ï¼Œä½¿ç”¨æ–°çš„æ’ä»¶ä¸€èˆ¬éœ€è¦ä»¥ä¸‹å‡ æ­¥

1.ä¿è¯ä½¿ç”¨çš„å·¥å…·æ’ä»¶ä¸»ä½“å·²å®‰è£…ï¼Œæ¯”å¦‚git plugin,éœ€è¦å…ˆå®‰è£…ä¸»ä½“git

2.å®‰è£…plugin

Omz ä¼šæå‰é¢„è£…ä¸€äº›plugin,ä½ç½®åœ¨`~/.oh-my-zsh/plugins`

å¯ä»¥æŸ¥çœ‹éœ€è¦ä½¿ç”¨çš„plugin æ˜¯å¦å·²å®‰è£…ï¼Œæ²¡æœ‰å®‰è£…ï¼Œéœ€è¦å®‰è£…ä¸€ä¸‹ï¼Œæ’ä»¶è¯¦æƒ…çœ‹https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins

3.é…ç½®ç¯å¢ƒå˜é‡

```zsh
vim ~/.zshrc
plugins=(
#åœ¨è¿™é‡Œæ·»åŠ ç›¸åº”çš„æ’ä»¶åç§°
)
source ~/.zshrc
```

# [HomeBrew](https://brew.idayer.com/guide/start/)

> ä½¿ç”¨HomeBrew å®‰è£…éœ€è¦ä½¿ç”¨çš„è½¯ä»¶

* å®‰è£…å‘½ä»¤ï¼šï¼ˆåœ¨bashçš„å‘½ä»¤çª—å£ä¸­ï¼‰

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

```bash
/bin/bash -c "$(curl -fsSL https://gitee.com/ineo6/homebrew-install/raw/master/install.sh)" #ä¸­ç§‘å¤§æº
```

* é‡åˆ°çš„é—®é¢˜

  * å®‰è£…æˆåŠŸä½†æ˜¯æœ‰ä¸€ä¸ªWarningå’Œnext stepçš„æç¤º

    ![image-20210820193951593](å·¥å…·ä½¿ç”¨æ•™ç¨‹.assets/image-20210820193951593.png)

    ![image-20210820194017326](å·¥å…·ä½¿ç”¨æ•™ç¨‹.assets/image-20210820194017326.png)

    * é¦–å…ˆæˆ‘æŒ‰ç…§æç¤ºåœ¨.bash_profileæ·»åŠ `$(/opt/homebrew/bin/brew shellenv)`ï¼Œä½†æ˜¯æˆ‘å‘ç°æ‰€æœ‰çš„å‘½ä»¤not commend,

    * æ‰€ä»¥åªèƒ½æ‰§è¡Œ

      ```bash
      export PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin"
      ```

      è¿™æ ·å°±å¯ä»¥é‡æ–°æ‰“å¼€.bash_profileæ–‡ä»¶ï¼Œå°†æ·»åŠ çš„åˆ é™¤æ‰

    * ä½†æ˜¯ä»ç„¶ä¼šæŠ¥é”™ï¼š brew not commend

    * æ‰§è¡Œï¼š

      ```bash
      export PATH=$PATH:/opt/homebrew/bin
      ```

      è¿™ä¸ªæ–¹æ³•æ˜¯å°†brewå‘½ä»¤æ”¾åœ¨ç»ˆç«¯ä¸­ï¼Œè‡³æ­¤å¯ä»¥ä½¿ç”¨ã€‚

  * ç¯å¢ƒå˜é‡é…ç½®,æ”¾åœ¨.bash_profile

    ```bash
    export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles/bottles
    ```

  * ä¸€äº›æºçš„é“¾æ¥

    ```xml
    //æ¸…åæº
    https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/bottles
    ```

 Brew æœç´¢App ç‰ˆæœ¬

Brew search  AppName

```bash
#ä¾‹å¦‚æŸ¥æ‰¾Android Studioçš„ç‰ˆæœ¬
brew search android-studio
```

# Vs code

å®˜ç½‘ä¸‹è½½ï¼šhttp://code.visualstudio.com/

å¸¸ç”¨æ’ä»¶æ•´ç†ï¼š



# MAS

> ä¸‹è½½mac Appstore çš„è½¯ä»¶

å®‰è£…ï¼š

```bash
brew install mas
```

#  Charlesså®‰è£…é…ç½®æ•™ç¨‹

1ã€ä¸‹è½½å®‰è£…Charless [4.6.2](https://www.charlesproxy.com/download/)

2ã€å°†charlessè®¾ç½®ç›¸åº”æ“ä½œç³»ç»Ÿçš„ä»£ç†

3ã€é…ç½®Android

* æŸ¥çœ‹æœ¬æœºIPåœ°å€ï¼šHelp -> Local IP Addresses
* æ‰“å¼€Android çš„æ— çº¿è¿æ¥ï¼Œå’ŒPCçš„æ— çº¿è¿æ¥ä¿æŒä¸€è‡´
* é…ç½®ä»£ç†ï¼Œæ‰‹åŠ¨->å¡«å†™PCç›¸åº”çš„IPåœ°å€å’Œç«¯å£å·
* ä¼šå‘PCå‘é€é…ç½®è¯·æ±‚ï¼Œç‚¹å‡»å…è®¸ï¼Œåœ¨Proxy -> Access Control Settingsé‡Œçœ‹åˆ°å¯ä»¥è®¿é—®æ­¤ä»£ç†æœåŠ¡å™¨åˆ—è¡¨

# Android Studio

> Android å¼€å‘IDEï¼Œå®˜ç½‘ä¸‹è½½

é€‰æ‹©Android sdk ä¸‹è½½

## IDEA 

> Java å¼€å‘IDE,[å®˜ç½‘ä¸‹è½½](https://www.jetbrains.com/zh-cn/idea/download/)ï¼Œé…ç½®JDK

IDEA ç ´è§£:çœ‹jetbra.zip ä¸­readme

JDK 11 ä¸‹è½½é“¾æ¥ï¼šhttps://cdn.azul.com/zulu/bin/zulu11.50.19-ca-jdk11.0.12-macosx_aarch64.dmg

# Adb å‘½ä»¤ä½¿ç”¨

> https://cs.android.com/android/platform/superproject/+/master:packages/modules/adb/README.md?hl=zh-cn
>
> [Android è°ƒè¯•æ¡¥ (ADB)](https://developer.android.com/studio/command-line/adb?hl=zh-cn) å¯è®©æ‚¨å°†å¼€å‘å·¥ä½œç«™ç›´æ¥è¿æ¥åˆ° Android è®¾å¤‡ï¼Œä»¥ä¾¿å®‰è£…è½¯ä»¶åŒ…å¹¶è¯„ä¼°æ›´æ”¹ã€‚å¦‚éœ€è¯¦ç»†äº†è§£ ADBï¼Œè¯·å‚é˜…å…¶ [README](https://cs.android.com/android/platform/superproject/+/master:packages/modules/adb/README.md?hl=zh-cn)ã€‚

1ã€å®‰è£…

brew install --cask android-platform-tools

2ã€æŸ¥è¯¢å½“å‰è¿è¡Œçš„Activity

adb shell dumpsys activity | grep -i run

adb shell dumpsys activity | grep mResumedActivity

3ã€æŸ¥è¯¢æ­£åœ¨è¿è¡Œçš„Services

adb shell dumpsys activity services | grep ServiceName

```adb
dumpsys activity services | grep schemebyService
#è¿è¡Œçš„ä¼šæœ‰ç›¸å…³æ—¥å¿—æ‰“å°
```

4ã€è°ƒèµ·Activity

* é€šè¿‡åŒ…åå’Œ

adb shell am start [options] <INTENT>

<INTENT> = åŒ…å/Activityåç§°   

Activityè¿˜å¿…é¡»åŒ…å«å±æ€§`android:exported="true"`

Egï¼š adb shell am start -n com.sina.weibo/com.sina.weibo.VisitorMoreActivity

å¾®åšä¸­ï¼ŒåŒ…åéƒ½æ˜¯è¿™ä¸ªï¼šcom.sina.weibo

* é€šè¿‡Scheme è°ƒèµ·Activity

  ```adb
  adb shell am start -a [action] -d [uri] [packagename]
  ```

  Egï¼š

  ```adb
  adb shell am start -a android.intent.action.VIEW -d "sinaweibo://searchall?"
  ```

  å¦‚æœScheme å«æœ‰å‚æ•°ï¼Œåœ¨adb shell å‘½ä»¤ä¸‹ï¼Œæ‰“å¼€Scheme.

```adb
adb shell #ç¬¬ä¸€æ­¥
int  "sinaweibo://searchall?containerid=100103&q=%23%E8%B0%81%E6%98%AF%E5%87%B6%E6%89%8B%E5%90%91%E5%AE%8B%E8%8C%9C%E9%81%93%E6%AD%89%23&isnewpage=1&extparam=seat%3D1%26source%3Dranklist%26filter_type%3Drealtimehot%26pos%3D0%26pre_seqid%3D583717771%26dgr%3D0%26c_type%3D30%26mi_cid%3D100103%26flag%3D257%26cate%3D0%26display_time%3D1638955922%26pre_seqid%3D583717771"
```

scheme ä¸ºhttpæ—¶,æ›¿æ¢ç›¸åº”çš„åŒ…åå’ŒActivityå°±è¡Œ

```shell
adb shell am start -a android.intent.action.VIEW -d "http://example.com/qr/favorite" -n "com.example.test/com.example.test.MainActivity"
```

5ã€æŸ¥è¯¢è®¾å¤‡

```adb
adb devices
```

6ã€adbæŸ¥è¯¢logcat

* æŸ¥è¯¢å½“å‰åŒ…åæ‰€åœ¨çš„PID 

  ```adb
  adb shell dumpsys meminfo åŒ…å
  adb logcat | grep PID
  ```

* æ¡ä»¶æŸ¥è¯¢

  * æ ¹æ®Tagå’Œçº§åˆ«æŸ¥è¯¢

    ```adb
    adb logcat -s TAG
    adb logcat TAG:çº§åˆ« *:s //*:s æ„å‘³ä¸æŸ¥çœ‹å…¶ä»–æ—¥å¿—
    ```

  * ä»¥æŸç§æ ¼å¼æŸ¥è¯¢

    ```adb
    adb logcat -b ç¼“å†²åŒºç±»å‹
    æ³¨ï¼šç¼“å†²åŒºç±»å‹ï¼ˆradio-æ— çº¿ç¼“å†²åŒºï¼Œevents-äº‹ä»¶ç¼“å†²åŒºï¼Œmain-ä¸»ç¼“å†²åŒºï¼Œé»˜è®¤ï¼‰
    ```

* å†™åˆ°æ–‡ä»¶ä¸­

  ```adb
  adb logcat -f filename æŸ¥è¯¢æ¡ä»¶
  ```

* æ¸…ç†å·²ç»å­˜åœ¨çš„æ—¥å¿—

  ```adb
  adb logcat -c
  ```

* å°†æ—¥å¿—æ˜¾ç¤ºåœ¨æ§åˆ¶å°åé€€å‡º

  ```adb
  adb logcat -d
  ```

7. Adb  æ¨¡æ‹Ÿé”®ç›˜ç‚¹å‡»

   ```adb
   adb shell input keyevent KEY
   //æ¯”å¦‚ç‚¹å‡»è¿”å›é”®
   //adb shell input keyevent KEYCODE_BACK
   //adb shell input keyevent 4
   adb shell input tap  width height  //åœ¨ï¼ˆwidth heightï¼‰ç‚¹å‡»
   adb shell input swipe  startX starY  endX endY  // åœ¨(startX starY)æ»‘åŠ¨åˆ°ï¼ˆendX endYï¼‰
   adb shell input swipe  startX starY  endX endY  time //åœ¨(startX starY)æ»‘åŠ¨åˆ°ï¼ˆendX endYï¼‰è¿ç»­æ»‘åŠ¨å¤šå°‘ç§’
   ```

8.APIç‰ˆæœ¬

adb shell getprop ro.build.version.sdk

9.adb shell am instrument

instrument [options] component

ç›®æ ‡ `component` æ˜¯è¡¨å• `test_package/runner_classï¼Œåœ¨UiAutomator2.0ä¸­ï¼Œç›®æ ‡ componentä¸ºï¼šæµ‹è¯•åŒ…å/android.support.test.runner.AndroidJUnitRunner(å³è¿è¡Œå™¨å›ºå®šï¼šAndroidJUnitRunnerç±»æ˜¯ä¸€ä¸ªJUnitæµ‹è¯•è¿è¡Œå™¨,å…è®¸è¿è¡ŒJUnit 3æˆ–JUnit 4æµ‹è¯•ç±»åœ¨ Android è®¾å¤‡ä¸Š,åŒ…æ‹¬é‚£äº›ä½¿ç”¨Espressoå’ŒUI Automatoræ¡†æ¶ã€‚)`

**å„é¡¹å‚æ•°ï¼š**

- `-r`ï¼šä»¥åŸå§‹å½¢å¼è¾“å‡ºæµ‹è¯•ç»“æœï¼›è¯¥é€‰é¡¹é€šå¸¸æ˜¯åœ¨æ€§èƒ½æµ‹è¯•æ—¶ä¸`[-e perf true]`ä¸€èµ·ä½¿ç”¨ã€‚
- `-e name value`ï¼šæä¾›äº†ä»¥é”®å€¼å¯¹å½¢å¼å­˜åœ¨çš„è¿‡æ»¤å™¨å’Œå‚æ•°ã€‚ä¾‹å¦‚ï¼š-e testFile <filePath>ï¼ˆè¿è¡Œæ–‡ä»¶ä¸­æŒ‡å®šçš„ç”¨ä¾‹ï¼‰ï¼›-e package <packageName>ï¼ˆè¿è¡Œè¿™ä¸ªåŒ…ä¸­çš„æ‰€æœ‰ç”¨ä¾‹ï¼‰â€¦â€¦ æœ‰åå‡ ç§ã€‚
- `-p file`ï¼šå°†åˆ†ææ•°æ®å†™å…¥ `file`ã€‚
- `-w`ï¼šæµ‹è¯•è¿è¡Œå™¨éœ€è¦ä½¿ç”¨æ­¤é€‰é¡¹ã€‚-w <test_package_name>/<runner_class> ï¼š<test_package_name>å’Œ<runner_class>åœ¨æµ‹è¯•å·¥ç¨‹çš„AndroidManifest.xmlä¸­æŸ¥æ‰¾ï¼Œä½œç”¨æ˜¯ä¿æŒadb shellæ‰“å¼€ç›´è‡³æµ‹è¯•å®Œæˆã€‚
- `--no-window-animation`ï¼šè¿è¡Œæ—¶å…³é—­çª—å£åŠ¨ç”»ã€‚
- `--user user_id | current`ï¼šæŒ‡å®šä»ªå™¨åœ¨å“ªä¸ªç”¨æˆ·ä¸­è¿è¡Œï¼›å¦‚æœæœªæŒ‡å®šï¼Œåˆ™åœ¨å½“å‰ç”¨æˆ·ä¸­è¿è¡Œã€‚

## LogCat è¿‡æ»¤è¯­æ³•

è¿‡æ»¤è¯­æ³•
package:mine  é»˜è®¤è¯­æ³•ï¼Œå®˜æ–¹åŸç‰ˆè§£é‡Šï¼šPIDs for the local app projectï¼Œä¸å¤ªç†è§£è¿™ä¸ªè§£é‡Šï¼Œä¸è¿‡æ ¹æ®ä½¿ç”¨ï¼Œåº”è¯¥å°±æ˜¯å½“å‰logcatçª—å£æ‰€åœ¨é¡¹ç›®çš„log

package:my-package-ID ä¹Ÿå°±æ˜¯æ ¹æ®åŒ…åè¿‡æ»¤

tag:my-tag æ ¹æ®tagè¿›è¡Œè¿‡æ»¤

level:ERROR æ ¹æ®æ—¥å¿—ç­‰çº§è¿›è¡Œè¿‡æ»¤

-tag:exclude-this-tag åœ¨å‰é¢åŠ äº†ä¸ªâ€˜-â€™ï¼Œæ’é™¤æŒ‡å®šçš„TAG

tag~:regex-tag åœ¨åé¢åŠ äº†ä¸ª'~'ï¼Œæ”¯æŒæ­£åˆ™è¿‡æ»¤

-tag~:exclude-this-regex-tag è¿™ä¸ªè‡ªç„¶å°±æ˜¯æ”¯æŒæ­£åˆ™è¿‡æ»¤æ’é™¤æŒ‡å®šTAG

-package:exclude-this-package åŒä¸Š

package~:regex-package åŒä¸Š

-package~:exclude-this-regex-package åŒä¸Š

# SSH

* ä¿®æ”¹å¯†ç 

  ![image-20210817105630380](å·¥å…·ä½¿ç”¨æ•™ç¨‹.assets/image-20210817105630380.png)



## **1. ç”Ÿæˆæ–°çš„ SSH å¯†é’¥**

å¦‚æœæ²¡æœ‰ SSH å¯†é’¥ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆï¼š

```bash
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

å…¶ä¸­ï¼š

- `-t rsa`ï¼šä½¿ç”¨ RSA ç®—æ³•ã€‚
- `-b 4096`ï¼šå¯†é’¥é•¿åº¦ 4096 ä½ï¼Œæ›´å®‰å…¨ã€‚
- `-C "your_email@example.com"`ï¼šç”¨äºæ ‡è®°å¯†é’¥ï¼ˆé€šå¸¸å¡« GitHub/GitLab è´¦å·çš„é‚®ç®±ï¼‰ã€‚

**ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼š**

1. å®ƒä¼šæç¤ºä½ ä¿å­˜å¯†é’¥çš„æ–‡ä»¶è·¯å¾„ï¼Œ**ç›´æ¥å›è½¦** ä½¿ç”¨é»˜è®¤è·¯å¾„ï¼ˆ`~/.ssh/id_rsa`ï¼‰ã€‚
2. ç„¶åä¼šè¦æ±‚ä½ è¾“å…¥ **å¯†ç çŸ­è¯­ï¼ˆPassphraseï¼‰**ï¼Œå¯ä»¥ç•™ç©ºï¼Œæˆ–è€…è¾“å…¥ä¸€ä¸ªå®‰å…¨å¯†ç ã€‚

------

## **ğŸ”¹ 2. æ·»åŠ  SSH å¯†é’¥åˆ° SSH ä»£ç†**

å¯åŠ¨ SSH ä»£ç†ï¼š

```bash
eval "$(ssh-agent -s)"
```

ç„¶åï¼Œæ·»åŠ  SSH å¯†é’¥åˆ°ä»£ç†ï¼š

```bash
ssh-add ~/.ssh/id_rsa
```

å¦‚æœä½ çš„ macOS ç‰ˆæœ¬è¾ƒæ–°ï¼ˆå¦‚ macOS Venturaï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ï¼š

```
ssh-add --apple-use-keychain ~/.ssh/id_rsa
```

å¹¶åœ¨ `~/.ssh/config` ä¸­æ·»åŠ ï¼š

```bash
Host *
  AddKeysToAgent yes
  UseKeychain yes
  IdentityFile ~/.ssh/id_rsa
```

------

## **ğŸ”¹ 3. å¤åˆ¶ SSH å…¬é’¥**

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¤åˆ¶ SSH å…¬é’¥ï¼š

```bash
pbcopy < ~/.ssh/id_rsa.pub
```

ç„¶åï¼Œä½ å¯ä»¥å°†è¿™ä¸ªå¯†é’¥ç²˜è´´åˆ° **GitHubã€GitLabã€æœåŠ¡å™¨ç­‰è¿œç¨‹æœåŠ¡**ã€‚Githubçš„Authentication keys

**æ‰‹åŠ¨æŸ¥çœ‹ SSH å…¬é’¥ï¼š**

```bash
cat ~/.ssh/id_rsa.pub
```

ç„¶å **æ‰‹åŠ¨å¤åˆ¶**ã€‚

# adb  bugreport

* è¯»å–è®¾å¤‡æ‰€æœ‰ä¿¡æ¯

  ```bash
  adb bugreport > bugreport.txt
  ```

  ä¼šç”Ÿæˆè¯¥è®¾å¤‡çš„æ‰€æœ‰ä¿¡æ¯åœ¨å‹ç¼©åŒ…ä¸­ã€‚

å› ä¸ºadb bugreportæ²¡æœ‰ä»€ä¹ˆé€‰é¡¹ï¼Œæ˜¯é€šè¿‡dumpsysç­‰å‘½ä»¤é…åˆå®Œæˆçš„ã€‚

* é‡ç½®ç”µæ± ç»Ÿè®¡ä¿¡æ¯

  ```bash
  adb shell dumpsys batterystats --reset
  ```

* .Wakelock analysiså…¨éƒ¨wakelockä¿¡æ¯

  ```bash
  adb shell dumpsys batterystats --enable full-wake-history
  ```

*  Kernel trace analysisåˆ†æå†…æ ¸ï¼Œä¸»è¦åˆ†æwakeup sourceå’Œwakelock activitiesï¼Œé¦–å…ˆä½¿kernelåˆ†æ

  ```bash
  #æš‚æ—¶è¿˜ä¸çŸ¥é“è¿™ä¸ªæœ‰ä»€ä¹ˆç”¨
  $ adb root
  $ adb shell
  
  # Set the events to trace.
  $ echo "power:wakeup_source_activate" >> /d/tracing/set_event
  $ echo "power:wakeup_source_deactivate" >> /d/tracing/set_event
  
  # The default trace size for most devices is 1MB, which is relatively low and might cause the logs to overflow.
  # 8MB to 10MB should be a decent size for 5-6 hours of logging.
  
  $ echo 8192 > /d/tracing/buffer_size_kb
  
  $ echo 1 > /d/tracing/tracing_on
  
  #å†™å…¥æ—¥å¿—
  $ echo 0 > /d/tracing/tracing_on
  $ adb pull /d/tracing/trace <some path>
  
  # Take a bug report at this time.
  $ adb bugreport > bugreport.txt
  ```

è·å–bugreportå‹ç¼©åŒ…åï¼Œä½¿ç”¨[battery historian](https://github.com/google/battery-historian)åˆ†æã€‚



## ç®€æ˜“å›¾åºŠåº”ç”¨ï¼š

ä¸Šä¼ å›¾ç‰‡ï¼š

```bash
curl --location --request POST 'http://10.235.32.30:8081/image/upload' \

--form 'file=@"/Users/zhangqian20/Downloads/res/header_bg.9.png"'
```

æ˜¾ç¤ºå›¾ç‰‡ï¼š

```bash
http://10.235.32.30:8081/image/uploads/{ä¸Šä¼ å›¾ç‰‡è¿”å›çš„åœ°å€}
```

æŸ¥çœ‹å·²æœ‰çš„å›¾ç‰‡ï¼š

```bash
http://10.235.32.30:8081/image/uploads
```

åˆ é™¤å›¾ç‰‡ï¼š

```bash
curl --location --request DELETE 'http://10.235.32.30:8081/image/uploads/1329f096-69ae-4d6a-93e5-e30d6355a378-header_bg_414.9.png'
```



# Kibanaå’ŒPeckerä½¿ç”¨æ•™ç¨‹

1ã€æ ¹æ®å…·ä½“é”™è¯¯æŸ¥æ‰¾å‘ç”Ÿçš„æ—¶é—´å’Œæ¬¡æ•°ï¼š

`java_fingerprint`ï¼Œä½†è¿™ä¸ªä¹Ÿåªæ˜¯é™å®šäºkibanaæŠ“å–çš„é”™è¯¯ï¼ŒåŒä¸€ä¸ª`cause`ï¼Œå¯èƒ½å¼•èµ·å¤šä¸ª`java_fingerprint`.

`cause`,å…·ä½“çš„é”™è¯¯ä¹Ÿå¯ä»¥ç”¨causeçš„æ¨¡ç³ŠæŸ¥è¯¢å»å®ç°

2ã€from  ç‰ˆæœ¬å· æ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰è‡ªå·±å›ºå®šçš„ç‰ˆæœ¬å·

| fromå€¼10ä½ | AA                | BBB                                                          | C             | X                              | DD                                                           | E                                         |
| ---------- | ----------------- | ------------------------------------------------------------ | ------------- | ------------------------------ | ------------------------------------------------------------ | ----------------------------------------- |
| å«ä¹‰       | äº§å“              | ç‰ˆæœ¬                                                         | æ­£å¼/å…¬æµ‹     | æ“ä½œç³»ç»Ÿ                       | æ“ä½œç³»ç»Ÿä¸‹è®¾å¤‡å½¢æ€ç»†åˆ†                                       | ä¸»ç‰ˆæœ¬/é¢„è£…                               |
| å–å€¼èŒƒå›´   | ä¸¤ä½æ•°å­— 00-99    | ä¸‰ä½å­—æ¯æˆ–æ•°å­— 0-9/a-z/A-Z  ç¬¬ä¸€ä½ä»£è¡¨å¹´ä»½ï¼Œä»0å¼€å§‹ï¼Œé¡ºåºä¸º0-9ã€A-Zã€a-z;  ç¬¬äºŒä½ä»£è¡¨æœˆä»½ï¼Œä»0å¼€å§‹ï¼Œé¡ºåºä¸º0-9ã€ABCï¼Œ å…¶ä¸­1-9åˆ†åˆ«è¡¨ç¤º1-9æœˆï¼ŒAè¡¨ç¤º10æœˆï¼ŒBè¡¨ç¤º11æœˆï¼ŒCè¡¨ç¤º12æœˆï¼Œ 0è¡¨ç¤ºåœ£è¯èŠ‚&å…ƒæ—¦å‰æäº¤çš„è·¨å¹´ç‰ˆæœ¬;  ç¬¬ä¸‰ä½ä»£è¡¨å½“æœˆçš„ç¬¬å‡ ä¸ªç‰ˆæœ¬ï¼Œä»0å¼€å§‹ï¼Œé¡ºåºä¸º0-9ã€‚ | ä¸€ä½æ•°å­— 0-9  | ä¸€ä½å¤§å†™å­—æ¯æˆ–æ•°å­— 0-9/A-Z     | ä¸¤ä½æ•°å­— 01-99 åœ¨æ¯ä¸€ç§æ“ä½œç³»ç»Ÿä¸­ï¼Œé€šè¿‡æ­¤å­—æ®µç»†åˆ†ä¸åŒç±»å‹çš„è®¾å¤‡ã€‚ | ä¸€ä½å­—æ¯æˆ–æ•°å­— 0-9/a-z/A-Z                |
| ä¸¾ä¾‹       | 10=å¾®åš 25=æé€Ÿç‰ˆ | 812=2018å¹´1æœˆç¬¬ä¸‰ä¸ªç‰ˆæœ¬ 9A0=2019å¹´10æœˆç¬¬ä¸€ä¸ªç‰ˆæœ¬ A12=2020å¹´1æœˆç¬¬ä¸‰ä¸ªç‰ˆæœ¬ B00=2021å¹´è·¨å¹´ç‰ˆæœ¬ï¼ˆå…ƒæ—¦èŠ‚ï¼‰ B01=2021å¹´è·¨å¹´ç‰ˆæœ¬ç¬¬äºŒç‰ˆï¼ˆæç‰¹æ®Šæƒ…å†µæ‰ä¼šè¿™ä¹ˆå‘ï¼Œä¸€èˆ¬ä¼šå‘å¸ƒ B10ï¼‰ B10=2021å¹´1æœˆç¬¬ä¸€ç‰ˆï¼ˆå®ƒçš„å‰ä¸€ä¸ªç‰ˆæœ¬é€šå¸¸æ˜¯ B00ï¼‰ | 1=å…¬æµ‹ 9=æ­£å¼ | 3=iOS  9=iPad 5=Android A=é¸¿è’™ | æ¯”å¦‚åœ¨ iOS ç³»ç»Ÿä¸­ 01=iPhoneï¼Œ02=iPad                         | 0=ä¸»ç‰ˆæœ¬ 3=ç§»åŠ¨å®šåˆ¶ç‰ˆ 4=å‚å•†é¢„è£…ç‰ˆ 8=ç®€ç‰ˆ |

3ã€type  Crash çš„ç±»å‹

å¦‚ï¼š`java_crash`ã€`native_crash`

4ã€AppMd5

ç­‰äºå·¥ç¨‹æ¨¡å¼ä¸­çš„Current_md5ï¼Œæ˜¯æ¯ä¸ªVersionCodeå¯¹åº”ä¸åŒçš„Current_md5ã€‚

5ã€`jsoncontent.sytem_bundleversion`

IOSé€šè¿‡åŒ…å·åŒºåˆ†inhouseå’ŒstoreåŒ…



# kibana ä½¿ç”¨æ•™ç¨‹

## Visualize ä½¿ç”¨æ–¹å¼

1.åˆ›å»ºDataSource

2.é€‰æ‹©è¦å»ºç«‹çš„æ¨¡å‹ 

* pie é¥¼å›¾

3.åˆ›å»ºåˆé€‚çš„æ•°æ®æ¨¡å‹

### Metrics

* Y-axis: å›¾å½¢çš„Yè½´

### Buckets

> æ¡¶èšåˆï¼Œèƒ½å°†æ•°æ®è¿›è¡Œåˆ†ç±»

* Split slices : ä¼šå°†æ•°æ®åˆ†æˆç‰‡çŠ¶

### Aggregation

> åˆ†ç±»çš„ç±»å‹

* Range  :åŒºé—´èŒƒå›´ 

  é€‰æ‹©è¦åˆ†åŒºé—´çš„å±æ€§

* Filters: ç­›é€‰æ¡ä»¶

* Terms: æ’åº

* Countï¼š æ—¥å¿—çš„æ•°é‡æ•°

* Data Histogram:æ•°æ®æŸ±çŠ¶å›¾ï¼Œå¯ä»¥ç”Ÿæˆæ—¶é—´è¡¨

  **Field**ï¼šé€‰æ‹©æ—¶é—´å­—æ®µï¼ˆä¾‹å¦‚ `@timestamp`ï¼‰ã€‚

  **Interval**ï¼šé€‰æ‹© `Daily`ï¼Œä»¥æ¯å¤©ä¸ºé—´éš”æ˜¾ç¤ºæ•°æ®ã€‚

  å³å¯ç”Ÿæˆä»¥æ¯å¤©ä¸ºæ•°æ®çš„Xè½´

### Options

#### Labels settings

* Show labels
* Show top level only
* Show values



